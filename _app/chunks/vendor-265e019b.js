function ft(){}function ht(a,t){for(const u in t)a[u]=t[u];return a}function oe(a){return a()}function ae(){return Object.create(null)}function mt(a){a.forEach(oe)}function ue(a){return typeof a=="function"}function xt(a,t){return a!=a?t==t:a!==t||a&&typeof a=="object"||typeof a=="function"}function Ee(a){return Object.keys(a).length===0}function ce(a,...t){if(a==null)return ft;const u=a.subscribe(...t);return u.unsubscribe?()=>u.unsubscribe():u}function Tr(a,t,u){a.$$.on_destroy.push(ce(t,u))}function Pe(a,t,u,d){if(a){const f=le(a,t,u,d);return a[0](f)}}function le(a,t,u,d){return a[1]&&d?ht(u.ctx.slice(),a[1](d(t))):u.ctx}function xe(a,t,u,d){if(a[2]&&d){const f=a[2](d(u));if(t.dirty===void 0)return f;if(typeof f=="object"){const c=[],p=Math.max(t.dirty.length,f.length);for(let m=0;m<p;m+=1)c[m]=t.dirty[m]|f[m];return c}return t.dirty|f}return t.dirty}function Te(a,t,u,d,f,c){if(f){const p=le(t,u,d,c);a.p(p,f)}}function Ae(a){if(a.ctx.length>32){const t=[],u=a.ctx.length/32;for(let d=0;d<u;d++)t[d]=-1;return t}return-1}function gt(a){const t={};for(const u in a)u[0]!=="$"&&(t[u]=a[u]);return t}let Mt=!1;function Se(){Mt=!0}function Re(){Mt=!1}function ke(a,t,u,d){for(;a<t;){const f=a+(t-a>>1);u(f)<=d?a=f+1:t=f}return a}function Me(a){if(a.hydrate_init)return;a.hydrate_init=!0;let t=a.childNodes;if(a.nodeName==="HEAD"){const _=[];for(let x=0;x<t.length;x++){const S=t[x];S.claim_order!==void 0&&_.push(S)}t=_}const u=new Int32Array(t.length+1),d=new Int32Array(t.length);u[0]=-1;let f=0;for(let _=0;_<t.length;_++){const x=t[_].claim_order,S=(f>0&&t[u[f]].claim_order<=x?f+1:ke(1,f,M=>t[u[M]].claim_order,x))-1;d[_]=u[S]+1;const y=S+1;u[y]=_,f=Math.max(y,f)}const c=[],p=[];let m=t.length-1;for(let _=u[f]+1;_!=0;_=d[_-1]){for(c.push(t[_-1]);m>=_;m--)p.push(t[m]);m--}for(;m>=0;m--)p.push(t[m]);c.reverse(),p.sort((_,x)=>_.claim_order-x.claim_order);for(let _=0,x=0;_<p.length;_++){for(;x<c.length&&p[_].claim_order>=c[x].claim_order;)x++;const S=x<c.length?c[x]:null;a.insertBefore(p[_],S)}}function zt(a,t){if(Mt){for(Me(a),(a.actual_end_child===void 0||a.actual_end_child!==null&&a.actual_end_child.parentElement!==a)&&(a.actual_end_child=a.firstChild);a.actual_end_child!==null&&a.actual_end_child.claim_order===void 0;)a.actual_end_child=a.actual_end_child.nextSibling;t!==a.actual_end_child?(t.claim_order!==void 0||t.parentNode!==a)&&a.insertBefore(t,a.actual_end_child):a.actual_end_child=t.nextSibling}else(t.parentNode!==a||t.nextSibling!==null)&&a.appendChild(t)}function Tt(a,t,u){Mt&&!u?zt(a,t):(t.parentNode!==a||t.nextSibling!=u)&&a.insertBefore(t,u||null)}function ct(a){a.parentNode.removeChild(a)}function Ar(a,t){for(let u=0;u<a.length;u+=1)a[u]&&a[u].d(t)}function Ie(a){return document.createElement(a)}function yt(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function It(a){return document.createTextNode(a)}function Sr(){return It(" ")}function he(){return It("")}function Rr(a,t,u,d){return a.addEventListener(t,u,d),()=>a.removeEventListener(t,u,d)}function dt(a,t,u){u==null?a.removeAttribute(t):a.getAttribute(t)!==u&&a.setAttribute(t,u)}function kr(a){return a===""?null:+a}function vt(a){return Array.from(a.childNodes)}function Oe(a){a.claim_info===void 0&&(a.claim_info={last_index:0,total_claimed:0})}function fe(a,t,u,d,f=!1){Oe(a);const c=(()=>{for(let p=a.claim_info.last_index;p<a.length;p++){const m=a[p];if(t(m)){const _=u(m);return _===void 0?a.splice(p,1):a[p]=_,f||(a.claim_info.last_index=p),m}}for(let p=a.claim_info.last_index-1;p>=0;p--){const m=a[p];if(t(m)){const _=u(m);return _===void 0?a.splice(p,1):a[p]=_,f?_===void 0&&a.claim_info.last_index--:a.claim_info.last_index=p,m}}return d()})();return c.claim_order=a.claim_info.total_claimed,a.claim_info.total_claimed+=1,c}function de(a,t,u,d){return fe(a,f=>f.nodeName===t,f=>{const c=[];for(let p=0;p<f.attributes.length;p++){const m=f.attributes[p];u[m.name]||c.push(m.name)}c.forEach(p=>f.removeAttribute(p))},()=>d(t))}function Mr(a,t,u){return de(a,t,u,Ie)}function At(a,t,u){return de(a,t,u,yt)}function pe(a,t){return fe(a,u=>u.nodeType===3,u=>{const d=""+t;if(u.data.startsWith(d)){if(u.data.length!==d.length)return u.splitText(d.length)}else u.data=d},()=>It(t),!0)}function Ir(a){return pe(a," ")}function Ce(a,t){t=""+t,a.wholeText!==t&&(a.data=t)}function Or(a,t){a.value=t==null?"":t}function Cr(a,t,u){a.classList[u?"add":"remove"](t)}function Nr(a,t=document.body){return Array.from(t.querySelectorAll(a))}let St;function Rt(a){St=a}function Ht(){if(!St)throw new Error("Function called outside component initialization");return St}function jr(a){Ht().$$.on_mount.push(a)}function Ur(a){Ht().$$.after_update.push(a)}function Fr(a,t){Ht().$$.context.set(a,t)}const kt=[],me=[],Ot=[],Yt=[],Ne=Promise.resolve();let Vt=!1;function je(){Vt||(Vt=!0,Ne.then(ge))}function Wt(a){Ot.push(a)}function Br(a){Yt.push(a)}const Kt=new Set;let Ct=0;function ge(){const a=St;do{for(;Ct<kt.length;){const t=kt[Ct];Ct++,Rt(t),Ue(t.$$)}for(Rt(null),kt.length=0,Ct=0;me.length;)me.pop()();for(let t=0;t<Ot.length;t+=1){const u=Ot[t];Kt.has(u)||(Kt.add(u),u())}Ot.length=0}while(kt.length);for(;Yt.length;)Yt.pop()();Vt=!1,Kt.clear(),Rt(a)}function Ue(a){if(a.fragment!==null){a.update(),mt(a.before_update);const t=a.dirty;a.dirty=[-1],a.fragment&&a.fragment.p(a.ctx,t),a.after_update.forEach(Wt)}}const Nt=new Set;let pt;function Dr(){pt={r:0,c:[],p:pt}}function Lr(){pt.r||mt(pt.c),pt=pt.p}function _t(a,t){a&&a.i&&(Nt.delete(a),a.i(t))}function jt(a,t,u,d){if(a&&a.o){if(Nt.has(a))return;Nt.add(a),pt.c.push(()=>{Nt.delete(a),d&&(u&&a.d(1),d())}),a.o(t)}}function qr(a,t){a.d(1),t.delete(a.key)}function $r(a,t,u,d,f,c,p,m,_,x,S,y){let M=a.length,P=c.length,b=M;const g={};for(;b--;)g[a[b].key]=b;const E=[],v=new Map,U=new Map;for(b=P;b--;){const e=y(f,c,b),l=u(e);let o=p.get(l);o?d&&o.p(e,t):(o=x(l,e),o.c()),v.set(l,E[b]=o),l in g&&U.set(l,Math.abs(b-g[l]))}const O=new Set,q=new Set;function C(e){_t(e,1),e.m(m,S),p.set(e.key,e),S=e.first,P--}for(;M&&P;){const e=E[P-1],l=a[M-1],o=e.key,T=l.key;e===l?(S=e.first,M--,P--):v.has(T)?!p.has(o)||O.has(o)?C(e):q.has(T)?M--:U.get(o)>U.get(T)?(q.add(o),C(e)):(O.add(T),M--):(_(l,p),M--)}for(;M--;){const e=a[M];v.has(e.key)||_(e,p)}for(;P;)C(E[P-1]);return E}function Xt(a,t){const u={},d={},f={$$scope:1};let c=a.length;for(;c--;){const p=a[c],m=t[c];if(m){for(const _ in p)_ in m||(d[_]=1);for(const _ in m)f[_]||(u[_]=m[_],f[_]=1);a[c]=m}else for(const _ in p)f[_]=1}for(const p in d)p in u||(u[p]=void 0);return u}function Qt(a){return typeof a=="object"&&a!==null?a:{}}function Jr(a,t,u){const d=a.$$.props[t];d!==void 0&&(a.$$.bound[d]=u,u(a.$$.ctx[d]))}function Zt(a){a&&a.c()}function te(a,t){a&&a.l(t)}function Ut(a,t,u,d){const{fragment:f,on_mount:c,on_destroy:p,after_update:m}=a.$$;f&&f.m(t,u),d||Wt(()=>{const _=c.map(oe).filter(ue);p?p.push(..._):mt(_),a.$$.on_mount=[]}),m.forEach(Wt)}function Ft(a,t){const u=a.$$;u.fragment!==null&&(mt(u.on_destroy),u.fragment&&u.fragment.d(t),u.on_destroy=u.fragment=null,u.ctx=[])}function Fe(a,t){a.$$.dirty[0]===-1&&(kt.push(a),je(),a.$$.dirty.fill(0)),a.$$.dirty[t/31|0]|=1<<t%31}function Bt(a,t,u,d,f,c,p,m=[-1]){const _=St;Rt(a);const x=a.$$={fragment:null,ctx:null,props:c,update:ft,not_equal:f,bound:ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:ae(),dirty:m,skip_bound:!1,root:t.target||_.$$.root};p&&p(x.root);let S=!1;if(x.ctx=u?u(a,t.props||{},(y,M,...P)=>{const b=P.length?P[0]:M;return x.ctx&&f(x.ctx[y],x.ctx[y]=b)&&(!x.skip_bound&&x.bound[y]&&x.bound[y](b),S&&Fe(a,y)),M}):[],x.update(),S=!0,mt(x.before_update),x.fragment=d?d(x.ctx):!1,t.target){if(t.hydrate){Se();const y=vt(t.target);x.fragment&&x.fragment.l(y),y.forEach(ct)}else x.fragment&&x.fragment.c();t.intro&&_t(a.$$.fragment),Ut(a,t.target,t.anchor,t.customElement),Re(),ge()}Rt(_)}class Dt{$destroy(){Ft(this,1),this.$destroy=ft}$on(t,u){const d=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return d.push(u),()=>{const f=d.indexOf(u);f!==-1&&d.splice(f,1)}}$set(t){this.$$set&&!Ee(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const bt=[];function Be(a,t){return{subscribe:De(a,t).subscribe}}function De(a,t=ft){let u;const d=new Set;function f(m){if(xt(a,m)&&(a=m,u)){const _=!bt.length;for(const x of d)x[1](),bt.push(x,a);if(_){for(let x=0;x<bt.length;x+=2)bt[x][0](bt[x+1]);bt.length=0}}}function c(m){f(m(a))}function p(m,_=ft){const x=[m,_];return d.add(x),d.size===1&&(u=t(f)||ft),m(a),()=>{d.delete(x),d.size===0&&(u(),u=null)}}return{set:f,update:c,subscribe:p}}function Gr(a,t,u){const d=!Array.isArray(a),f=d?[a]:a,c=t.length<2;return Be(u,p=>{let m=!1;const _=[];let x=0,S=ft;const y=()=>{if(x)return;S();const P=t(d?_[0]:_,p);c?p(P):S=ue(P)?P:ft},M=f.map((P,b)=>ce(P,g=>{_[b]=g,x&=~(1<<b),m&&y()},()=>{x|=1<<b}));return m=!0,y(),function(){mt(M),S()}})}function zr(a,t,u=!1){const d=t.length,f=a.length;return f>d?!1:Le(u!==!0?a.toLowerCase():a,f,u!==!0?t.toLowerCase():t,d)}function Le(a,t,u,d){let f=0,c=0;t:for(;f<t;){const p=a.charAt(f++);for(;c<d;)if(u.charAt(c++)===p)continue t;return!1}return!0}var Lt,qe=new Uint8Array(16);function $e(){if(!Lt&&(Lt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Lt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lt(qe)}var Je=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ge(a){return typeof a=="string"&&Je.test(a)}var it=[];for(var ee=0;ee<256;++ee)it.push((ee+256).toString(16).substr(1));function ze(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=(it[a[t+0]]+it[a[t+1]]+it[a[t+2]]+it[a[t+3]]+"-"+it[a[t+4]]+it[a[t+5]]+"-"+it[a[t+6]]+it[a[t+7]]+"-"+it[a[t+8]]+it[a[t+9]]+"-"+it[a[t+10]]+it[a[t+11]]+it[a[t+12]]+it[a[t+13]]+it[a[t+14]]+it[a[t+15]]).toLowerCase();if(!Ge(u))throw TypeError("Stringified UUID is invalid");return u}function Hr(a,t,u){a=a||{};var d=a.random||(a.rng||$e)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,t){u=u||0;for(var f=0;f<16;++f)t[u+f]=d[f];return t}return ze(d)}var He=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ye(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ye={exports:{}};/*! remotestorage.js 2.0.0-beta.1, https://remotestorage.io, MIT licensed */(function(a,t){(function(u,d){a.exports=d()})(He,function(){return function(u){var d={};function f(c){if(d[c])return d[c].exports;var p=d[c]={i:c,l:!1,exports:{}};return u[c].call(p.exports,p,p.exports,f),p.l=!0,p.exports}return f.m=u,f.c=d,f.d=function(c,p,m){f.o(c,p)||Object.defineProperty(c,p,{enumerable:!0,get:m})},f.r=function(c){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},f.t=function(c,p){if(1&p&&(c=f(c)),8&p||4&p&&typeof c=="object"&&c&&c.__esModule)return c;var m=Object.create(null);if(f.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:c}),2&p&&typeof c!="string")for(var _ in c)f.d(m,_,function(x){return c[x]}.bind(null,_));return m},f.n=function(c){var p=c&&c.__esModule?function(){return c.default}:function(){return c};return f.d(p,"a",p),p},f.o=function(c,p){return Object.prototype.hasOwnProperty.call(c,p)},f.p="",f(f.s=17)}([function(u,d,f){(function(c,p){Object.defineProperty(d,"__esModule",{value:!0}),d.applyMixins=d.toBase64=d.getTextFromArrayBuffer=d.shouldBeTreatedAsBinary=d.getJSONFromLocalStorage=d.localStorageAvailable=d.pathsFromRoot=d.deepClone=d.equal=d.bindAll=d.cleanPath=d.baseName=d.isDocument=d.isFolder=d.containingFolder=d.extend=d.getGlobalContext=d.globalContext=d.logError=void 0,d.logError=m=>{typeof m=="string"?console.error(m):console.error(m.message,m.stack)},d.globalContext=typeof window!="undefined"?window:typeof self=="object"?self:c,d.getGlobalContext=()=>typeof window!="undefined"?window:typeof self=="object"?self:c,d.extend=(...m)=>{const _=m[0];return Array.prototype.slice.call(m,1).forEach(function(x){for(const S in x)_[S]=x[S]}),_},d.containingFolder=m=>{if(m==="")return"/";if(!m)throw"Path not given!";return m.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},d.isFolder=m=>m.substr(-1)==="/",d.isDocument=m=>!d.isFolder(m),d.baseName=m=>{const _=m.split("/");return d.isFolder(m)?_[_.length-2]+"/":_[_.length-1]},d.cleanPath=m=>m.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27"),d.bindAll=m=>{for(const _ in this)typeof m[_]=="function"&&(m[_]=m[_].bind(m))},d.equal=(m,_,x=[])=>{let S;if(typeof m!=typeof _)return!1;if(typeof m=="number"||typeof m=="boolean"||typeof m=="string")return m===_;if(typeof m=="function")return m.toString()===_.toString();if(m instanceof ArrayBuffer&&_ instanceof ArrayBuffer&&(m=new Uint8Array(m),_=new Uint8Array(_)),m instanceof Array){if(m.length!==_.length)return!1;for(let y=0,M=m.length;y<M;y++)if(!d.equal(m[y],_[y],x))return!1}else{for(S in m)if(m.hasOwnProperty(S)&&!(S in _))return!1;for(S in _){if(!_.hasOwnProperty(S))continue;if(!(S in m))return!1;let y;if(typeof _[S]=="object"){if(x.indexOf(_[S])>=0)continue;y=x.slice(),y.push(_[S])}if(!d.equal(m[S],_[S],y))return!1}}return!0},d.deepClone=m=>{if(m!==void 0){const _=JSON.parse(JSON.stringify(m));return function x(S,y){if(typeof S=="object"&&!Array.isArray(S)&&S!==null){for(const M in S)if(typeof S[M]=="object"&&S[M]!==null)if(S[M].toString()==="[object ArrayBuffer]"){y[M]=new ArrayBuffer(S[M].byteLength);const P=new Int8Array(S[M]);new Int8Array(y[M]).set(P)}else x(S[M],y[M])}}(m,_),_}},d.pathsFromRoot=m=>{const _=[m],x=m.replace(/\/$/,"").split("/");for(;x.length>1;)x.pop(),_.push(x.join("/")+"/");return _},d.localStorageAvailable=()=>{const m=d.getGlobalContext();if(!("localStorage"in m))return!1;try{return m.localStorage.setItem("rs-check","1"),m.localStorage.removeItem("rs-check"),!0}catch{return!1}},d.getJSONFromLocalStorage=m=>{const _=d.getGlobalContext();try{return JSON.parse(_.localStorage.getItem(m))}catch{}},d.shouldBeTreatedAsBinary=(m,_)=>!!(_&&_.match(/charset=binary/)||/[\x00-\x08\x0E-\x1F\uFFFD]/.test(m)),d.getTextFromArrayBuffer=(m,_)=>new Promise(x=>{if(typeof Blob=="undefined"){const S=new p(new Uint8Array(m));x(S.toString(_))}else{let S;const y=d.globalContext;if(y.BlobBuilder=y.BlobBuilder||y.WebKitBlobBuilder,y.BlobBuilder!==void 0){const P=new y.BlobBuilder;P.append(m),S=P.getBlob()}else S=new Blob([m]);const M=new FileReader;typeof M.addEventListener=="function"?M.addEventListener("loadend",function(P){x(P.target.result)}):M.onloadend=function(P){x(P.target.result)},M.readAsText(S,_)}}),d.toBase64=m=>{const _=d.getGlobalContext();return"btoa"in _?_.btoa(m):p.from(m).toString("base64")},d.applyMixins=function(m,_){_.forEach(x=>{Object.getOwnPropertyNames(x.prototype).forEach(S=>{Object.defineProperty(m.prototype,S,Object.getOwnPropertyDescriptor(x.prototype,S))})})}}).call(this,f(5),f(19).Buffer)},function(u,d,f){const c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(f(3));u.exports=function(...p){c.default.logging&&console.log(...p)}},function(u,d,f){const c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(f(1));u.exports=class{addEvents(p){p.forEach(m=>this._addEvent(m))}addEventListener(p,m){if(typeof p!="string")throw new Error("Argument eventName should be a string");if(typeof m!="function")throw new Error("Argument handler should be a function");c.default("[EventHandling] Adding event listener",p),this._validateEvent(p),this._handlers[p].push(m)}on(p,m){return this.addEventListener(p,m)}removeEventListener(p,m){this._validateEvent(p);const _=this._handlers[p].length;for(let x=0;x<_;x++)if(this._handlers[p][x]===m)return void this._handlers[p].splice(x,1)}_emit(p,...m){this._validateEvent(p),this._handlers[p].slice().forEach(_=>{_.apply(this,m)})}_validateEvent(p){if(!(p in this._handlers))throw new Error("Unknown event: "+p)}_delegateEvent(p,m){m.on(p,_=>{this._emit(p,_)})}_addEvent(p){this._handlers===void 0&&(this._handlers={}),this._handlers[p]=[]}}},function(u,d,f){const c={cache:!0,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},cordovaRedirectUri:void 0,logging:!1,modules:[],backgroundSyncInterval:6e4,disableFeatures:[],discoveryTimeout:1e4,isBackground:!1,requestTimeout:3e4,syncInterval:1e4};u.exports=c},function(u,d,f){class c extends Error{constructor(m,_={}){super(),this.name="Unauthorized",this.message=m===void 0?"App authorization expired or revoked.":m,_.code!==void 0&&(this.code=_.code),this.stack=new Error().stack}}u.exports=c},function(u,d){var f;f=function(){return this}();try{f=f||new Function("return this")()}catch{typeof window=="object"&&(f=window)}u.exports=f},function(u,d,f){var c=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};const p=c(f(1)),m=f(0),_=c(f(4));let x;function S(M){const P=M||y.getLocation().href,b=P.indexOf("#");if(b===-1)return;const g=P.substring(b+1);return g.includes("=")?g.split("&").reduce(function(E,v){const U=v.split("=");if(U[0]==="state"&&U[1].match(/rsDiscovery/)){let O=decodeURIComponent(U[1]);const q=O.substr(O.indexOf("rsDiscovery=")).split("&")[0].split("=")[1];E.rsDiscovery=JSON.parse(atob(q)),O=O.replace(new RegExp("&?rsDiscovery="+q),""),O.length>0&&(E.state=O)}else E[decodeURIComponent(U[0])]=decodeURIComponent(U[1]);return E},{}):void 0}class y{static authorize(P,{authURL:b,scope:g,redirectUri:E,clientId:v}){if(p.default("[Authorize] authURL = ",b,"scope = ",g,"redirectUri = ",E,"clientId = ",v),!m.localStorageAvailable()&&P.backend==="remotestorage"){E+=E.indexOf("#")>0?"&":"#";const O={userAddress:P.remote.userAddress,href:P.remote.href,storageApi:P.remote.storageApi,properties:P.remote.properties};E+="rsDiscovery="+m.toBase64(JSON.stringify(O))}const U=function(O,q,C,e){const l=q.indexOf("#");let o=O;return o+=O.indexOf("?")>0?"&":"?",o+="redirect_uri="+encodeURIComponent(q.replace(/#.*$/,"")),o+="&scope="+encodeURIComponent(C),o+="&client_id="+encodeURIComponent(e),l!==-1&&l+1!==q.length&&(o+="&state="+encodeURIComponent(q.substring(l+1))),o+="&response_type=token",o}(b,E,g,v);m.globalContext.cordova?y.openWindow(U,E,"location=yes,clearsessioncache=yes,clearcache=yes").then(O=>{P.remote.configure({token:O.access_token})}):y.setLocation(U)}static setLocation(P){if(typeof P=="string")document.location.href=P;else{if(typeof P!="object")throw"Invalid location "+P;document.location=P}}static _rs_supported(){return typeof document!="undefined"}static _rs_cleanup(P){P.removeEventListener("features-loaded",x)}}y.IMPLIED_FAKE_TOKEN=!1,y.getLocation=function(){return document.location},y.openWindow=function(M,P,b){return new Promise((g,E)=>{const v=open(M,"_blank",b);if(!v||v.closed)return E("Authorization popup was blocked");function U(){return E("Authorization was canceled")}v.addEventListener("loadstart",function(O){if(O.url.indexOf(P)!==0)return;v.removeEventListener("exit",U),v.close();const q=S(O.url);return q?g(q):E("Authorization error")}),v.addEventListener("exit",U)})},y._rs_init=function(M){const P=S();let b;P&&(b=y.getLocation(),b.hash=""),x=function(){let g=!1;if(P){if(P.error)throw P.error==="access_denied"?new _.default("Authorization failed: access denied",{code:"access_denied"}):new _.default("Authorization failed: "+P.error);P.rsDiscovery&&M.remote.configure(P.rsDiscovery),P.access_token&&(M.remote.configure({token:P.access_token}),g=!0),P.remotestorage&&(M.connect(P.remotestorage),g=!0),P.state&&(b=y.getLocation(),y.setLocation(b.href.split("#")[0]+"#"+P.state)),g||M.remote.stopWaitingForToken()}else M.remote.stopWaitingForToken()},M.on("features-loaded",x)},u.exports=y},function(u,d,f){var c=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};const p=c(f(23)),m=c(f(24)),_=c(f(25)),x=c(f(2)),S=c(f(3)),y=f(0);class M{constructor(b,g){if(this.schemas={configurable:!0,get:function(){return M.Types.inScope(this.moduleName)}},g[g.length-1]!=="/")throw"Not a folder: "+g;g==="/"&&(this.makePath=v=>(v[0]==="/"?"":"/")+v),this.storage=b,this.base=g;const E=this.base.split("/");E.length>2?this.moduleName=E[1]:this.moduleName="root",this.addEvents(["change"]),this.on=this.on.bind(this),b.onChange(this.base,this._fireChange.bind(this))}scope(b){return new M(this.storage,this.makePath(b))}getListing(b,g){if(typeof b!="string")b="";else if(b.length>0&&b[b.length-1]!=="/")return Promise.reject("Not a folder: "+b);return this.storage.get(this.makePath(b),g).then(function(E){return E.statusCode===404?{}:E.body})}getAll(b,g){if(typeof b!="string")b="";else if(b.length>0&&b[b.length-1]!=="/")return Promise.reject("Not a folder: "+b);return this.storage.get(this.makePath(b),g).then(E=>{if(E.statusCode===404)return{};if(typeof E.body=="object"){const v=Object.keys(E.body);if(v.length===0)return{};const U=v.map(O=>this.storage.get(this.makePath(b+O),g).then(function(q){if(typeof q.body=="string")try{q.body=JSON.parse(q.body)}catch{}typeof q.body=="object"&&(E.body[O]=q.body)}));return Promise.all(U).then(function(){return E.body})}})}getFile(b,g){return typeof b!="string"?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(b),g).then(function(E){return{data:E.body,contentType:E.contentType,revision:E.revision}})}storeFile(b,g,E){return typeof b!="string"?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):typeof g!="string"?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):typeof E!="string"&&typeof E!="object"?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(g),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(g),E,b).then(v=>v.statusCode===200||v.statusCode===201?v.revision:Promise.reject("Request (PUT "+this.makePath(g)+") failed with status: "+v.statusCode)))}getObject(b,g){return typeof b!="string"?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(b),g).then(E=>{if(typeof E.body=="object")return E.body;if(typeof E.body=="string")try{return JSON.parse(E.body)}catch{throw new Error("Not valid JSON: "+this.makePath(b))}else if(E.body!==void 0&&E.statusCode===200)return Promise.reject("Not an object: "+this.makePath(b))})}storeObject(b,g,E){if(typeof b!="string")return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if(typeof g!="string")return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if(typeof E!="object")return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(E,b);try{const v=this.validate(E);if(!v.valid)return Promise.reject(v)}catch(v){return Promise.reject(v)}return this.storage.put(this.makePath(g),JSON.stringify(E),"application/json; charset=UTF-8").then(v=>v.statusCode===200||v.statusCode===201?v.revision:Promise.reject("Request (PUT "+this.makePath(g)+") failed with status: "+v.statusCode))}remove(b){return typeof b!="string"?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(b),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage.delete(this.makePath(b)))}getItemURL(b){if(typeof b!="string")throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(b=y.cleanPath(this.makePath(b)),this.storage.remote.href+b):void 0}cache(b,g="ALL"){if(typeof b!="string")throw"Argument 'path' of baseClient.cache must be a string";if(typeof g!="string")throw"Argument 'strategy' of baseClient.cache must be a string or undefined";if(g!=="FLUSH"&&g!=="SEEN"&&g!=="ALL")throw`Argument 'strategy' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]`;return this.storage.caching.set(this.makePath(b),g),this}flush(b){return this.storage.local.flush(b)}declareType(b,g,E){let v;E?v=g:(E=g,v=this._defaultTypeURI(b)),M.Types.declare(this.moduleName,b,v,E)}validate(b){const g=M.Types.getSchema(b["@context"]);if(g)return p.default.validateResult(b,g);throw new _.default(b["@context"])}_defaultTypeURI(b){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(b)}_attachType(b,g){b["@context"]=M.Types.resolveAlias(this.moduleName+"/"+g)||this._defaultTypeURI(g)}makePath(b){return this.base+(b||"")}_fireChange(b){S.default.changeEvents[b.origin]&&(["new","old","lastCommon"].forEach(function(g){if((!b[g+"ContentType"]||/^application\/(.*)json(.*)/.exec(b[g+"ContentType"]))&&typeof b[g+"Value"]=="string")try{b[g+"Value"]=JSON.parse(b[g+"Value"])}catch{}}),this._emit("change",b))}static _rs_init(){}}M.Types=m.default,y.applyMixins(M,[x.default]),u.exports=M},function(u,d,f){(function(c){var p=this&&this.__awaiter||function(C,e,l,o){return new(l||(l=Promise))(function(T,w){function I(L){try{G(o.next(L))}catch(R){w(R)}}function $(L){try{G(o.throw(L))}catch(R){w(R)}}function G(L){var R;L.done?T(L.value):(R=L.value,R instanceof l?R:new l(function(B){B(R)})).then(I,$)}G((o=o.apply(C,e||[])).next())})},m=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};const _=m(f(6)),x=m(f(2)),S=m(f(4)),y=m(f(3)),M=m(f(1)),P=f(0);let b;const g="remotestorage:wireclient",E={"draft-dejong-remotestorage-00":2,"draft-dejong-remotestorage-01":3,"draft-dejong-remotestorage-02":4,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":1};let v;if(typeof(c||window).ArrayBufferView=="function")v=function(C){return C&&C instanceof(c||window).ArrayBufferView};else{const C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];v=function(e){for(let l=0;l<8;l++)if(e instanceof C[l])return!0;return!1}}function U(C){return typeof C!="string"?C:C==="*"?"*":'"'+C+'"'}function O(C){return typeof C!="string"?C:C.replace(/^["']|["']$/g,"")}class q{constructor(e){if(this._revisionCache={},b=P.localStorageAvailable(),this.rs=e,this.connected=!1,this.addEvents(["connected","not-connected"]),b){const l=function(){const o=P.getJSONFromLocalStorage(g)||{},{userAddress:T,href:w,storageApi:I,token:$,properties:G}=o;return{userAddress:T,href:w,storageApi:I,token:$,properties:G}}();l&&setTimeout(()=>{this.configure(l)},0)}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}get storageType(){if(this.storageApi){const e=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return e?e[1]:"2012.04"}}_request(e,l,o,T,w,I,$){return p(this,void 0,void 0,function*(){if(function(L,R){return(L==="PUT"||L==="DELETE")&&P.isFolder(R)}(e,l))return Promise.reject(`Don't use ${e} on directories!`);let G;return o!==_.default.IMPLIED_FAKE_TOKEN&&(T.Authorization="Bearer "+o),this.rs._emit("wire-busy",{method:e,isFolder:P.isFolder(l)}),q.request(e,l,{body:w,headers:T,responseType:"arraybuffer"}).then(L=>{if(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:e,isFolder:P.isFolder(l),success:!0}),R=L.status,[401,403,404,412].indexOf(R)>=0)return M.default("[WireClient] Error response status",L.status),G=I?O(L.getResponseHeader("ETag")):void 0,L.status===401&&this.rs._emit("error",new S.default),Promise.resolve({statusCode:L.status,revision:G});if(function(B){return[201,204,304].indexOf(B)>=0}(L.status)||L.status===200&&e!=="GET")return G=O(L.getResponseHeader("ETag")),M.default("[WireClient] Successful request",G),Promise.resolve({statusCode:L.status,revision:G});{const B=L.getResponseHeader("Content-Type");G=I?O(L.getResponseHeader("ETag")):L.status===200?$:void 0;const n=function(s){let A,k="UTF-8";return s&&(A=s.match(/charset=(.+)$/),A&&(k=A[1])),k}(B);return P.shouldBeTreatedAsBinary(L.response,B)?(M.default("[WireClient] Successful request with unknown or binary mime-type",G),Promise.resolve({statusCode:L.status,body:L.response,contentType:B,revision:G})):P.getTextFromArrayBuffer(L.response,n).then(s=>(M.default("[WireClient] Successful request",G),Promise.resolve({statusCode:L.status,body:s,contentType:B,revision:G})))}var R},L=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:e,isFolder:P.isFolder(l),success:!1}),Promise.reject(L)))})}configure(e){if(typeof e!="object")throw new Error("WireClient configure settings parameter should be an object");if(e.userAddress!==void 0&&(this.userAddress=e.userAddress),e.href!==void 0&&(this.href=e.href),e.storageApi!==void 0&&(this.storageApi=e.storageApi),e.token!==void 0&&(this.token=e.token),e.properties!==void 0&&(this.properties=e.properties),typeof this.storageApi=="string"){const l=E[this.storageApi]||5;this.supportsRevs=l>=2}this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,b&&(localStorage[g]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(e,l={}){if(!this.connected)return Promise.reject("not connected (path: "+e+")");const o={};return this.supportsRevs&&l.ifNoneMatch&&(o["If-None-Match"]=U(l.ifNoneMatch)),this._request("GET",this.href+P.cleanPath(e),this.token,o,void 0,this.supportsRevs,this._revisionCache[e]).then(T=>{if(!P.isFolder(e))return Promise.resolve(T);let w={};if(T.body!==void 0)try{T.body=JSON.parse(T.body)}catch{return Promise.reject("Folder description at "+this.href+P.cleanPath(e)+" is not JSON")}if(T.statusCode===200&&typeof T.body=="object"){if(Object.keys(T.body).length===0)T.statusCode=404;else if((I=T.body)["@context"]==="http://remotestorage.io/spec/folder-description"&&typeof I.items=="object"){for(const $ in T.body.items)this._revisionCache[e+$]=T.body.items[$].ETag;w=T.body.items}else Object.keys(T.body).forEach($=>{this._revisionCache[e+$]=T.body[$],w[$]={ETag:T.body[$]}});return T.body=w,Promise.resolve(T)}return Promise.resolve(T);var I})}put(e,l,o,T={}){if(!this.connected)return Promise.reject("not connected (path: "+e+")");!o.match(/charset=/)&&(l instanceof ArrayBuffer||v(l))&&(o+="; charset=binary");const w={"Content-Type":o};return this.supportsRevs&&(T.ifMatch&&(w["If-Match"]=U(T.ifMatch)),T.ifNoneMatch&&(w["If-None-Match"]=U(T.ifNoneMatch))),this._request("PUT",this.href+P.cleanPath(e),this.token,w,l,this.supportsRevs)}delete(e,l={}){if(!this.connected)throw new Error("not connected (path: "+e+")");l||(l={});const o={};return this.supportsRevs&&l.ifMatch&&(o["If-Match"]=U(l.ifMatch)),this._request("DELETE",this.href+P.cleanPath(e),this.token,o,void 0,this.supportsRevs)}static request(e,l,o){return p(this,void 0,void 0,function*(){return typeof fetch=="function"?q._fetchRequest(e,l,o):typeof XMLHttpRequest=="function"?q._xhrRequest(e,l,o):(M.default("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"),Promise.reject("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"))})}static _fetchRequest(e,l,o){let T;const w={};let I;typeof AbortController=="function"&&(I=new AbortController);const $=fetch(l,{method:e,headers:o.headers,body:o.body,signal:I?I.signal:void 0}).then(L=>{switch(M.default("[WireClient fetch]",L),L.headers.forEach((R,B)=>{w[B.toUpperCase()]=R}),T={readyState:4,status:L.status,statusText:L.statusText,response:void 0,getResponseHeader:R=>w[R.toUpperCase()]||null,responseType:o.responseType,responseURL:l},o.responseType){case"arraybuffer":return L.arrayBuffer();case"blob":return L.blob();case"json":return L.json();case void 0:case"":case"text":return L.text();default:throw new Error("responseType 'document' is not currently supported using fetch")}}).then(L=>(T.response=L,o.responseType&&o.responseType!=="text"||(T.responseText=L),T)),G=new Promise((L,R)=>{setTimeout(()=>{R("timeout"),I&&I.abort()},y.default.requestTimeout)});return Promise.race([$,G])}static _xhrRequest(e,l,o){return new Promise((T,w)=>{M.default("[WireClient]",e,l);let I=!1;const $=setTimeout(()=>{I=!0,w("timeout")},y.default.requestTimeout),G=new XMLHttpRequest;if(G.open(e,l,!0),o.responseType&&(G.responseType=o.responseType),o.headers)for(const R in o.headers)G.setRequestHeader(R,o.headers[R]);G.onload=()=>{I||(clearTimeout($),T(G))},G.onerror=R=>{I||(clearTimeout($),w(R))};let L=o.body;typeof L=="object"&&!v(L)&&L instanceof ArrayBuffer&&(L=new Uint8Array(L)),G.send(L)})}static _rs_init(e){e.remote=new q(e),e.remote.online=!0}static _rs_supported(){return typeof fetch=="function"||typeof XMLHttpRequest=="function"}static _rs_cleanup(){b&&delete localStorage[g]}}q.isArrayBufferView=v,P.applyMixins(q,[x.default]),u.exports=q}).call(this,f(5))},function(u,d,f){class c extends Error{constructor(m){super(),this.name="SyncError",this.message="Sync failed: ",typeof m=="string"?this.message+=m:(this.message+=m.message,this.stack=m.stack,this.originalError=m)}}u.exports=c},function(u,d,f){var c=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};const p=c(f(2)),m=c(f(3)),_=c(f(1)),x=f(0);class S{constructor(){this._updateNodesRunning=!1,this._updateNodesQueued=[]}get(E,v,U){return typeof v=="number"?this.getNodes(x.pathsFromRoot(E)).then(O=>{const q=y(O[E]);return M(O,v)?U(E):q?{statusCode:200,body:q.body||q.itemsMap,contentType:q.contentType}:{statusCode:404}}):this.getNodes([E]).then(O=>{const q=y(O[E]);if(q){if(x.isFolder(E))for(const C in q.itemsMap)q.itemsMap.hasOwnProperty(C)&&q.itemsMap[C]===!1&&delete q.itemsMap[C];return{statusCode:200,body:q.body||q.itemsMap,contentType:q.contentType}}return{statusCode:404}})}put(E,v,U){const O=x.pathsFromRoot(E);return this._updateNodes(O,function(q,C){try{for(let e=0,l=q.length;e<l;e++){const o=q[e];let T,w=C[o];w||(C[o]=w=P(o)),e===0?(T=y(w),w.local={body:v,contentType:U,previousBody:T?T.body:void 0,previousContentType:T?T.contentType:void 0}):w=b(w,q[e-1].substring(o.length))}return C}catch(e){throw _.default("[Cachinglayer] Error during PUT",C,e),e}})}delete(E){const v=x.pathsFromRoot(E);return this._updateNodes(v,function(U,O){for(let q=0,C=U.length;q<C;q++){const e=U[q],l=O[e];let o;if(l)if(q===0)o=y(l),l.local={body:!1,previousBody:o?o.body:void 0,previousContentType:o?o.contentType:void 0};else{l.local||(l.local=x.deepClone(l.common));const T=U[q-1].substring(e.length);if(delete l.local.itemsMap[T],Object.getOwnPropertyNames(l.local.itemsMap).length>0)break}else console.error("Cannot delete non-existing node "+e)}return O})}flush(E){return this._getAllDescendentPaths(E).then(v=>this.getNodes(v)).then(v=>{for(const U in v){const O=v[U];O&&O.common&&O.local&&this._emitChange({path:O.path,origin:"local",oldValue:O.local.body===!1?void 0:O.local.body,newValue:O.common.body===!1?void 0:O.common.body}),v[U]=void 0}return this.setNodes(v)})}_emitChange(E){m.default.changeEvents[E.origin]&&this._emit("change",E)}fireInitial(){m.default.changeEvents.local&&this.forAllNodes(E=>{if(x.isDocument(E.path)){const v=y(E);v&&this._emitChange({path:E.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:v.body,newContentType:v.contentType})}}).then(()=>{this._emit("local-events-done")})}onDiff(E){this.diffHandler=E}migrate(E){return typeof E!="object"||E.common||(E.common={},typeof E.path=="string"?E.path.substr(-1)==="/"&&typeof E.body=="object"&&(E.common.itemsMap=E.body):(E.local||(E.local={}),E.local.body=E.body,E.local.contentType=E.contentType)),E}_updateNodes(E,v){return new Promise((U,O)=>{this._doUpdateNodes(E,v,{resolve:U,reject:O})})}_doUpdateNodes(E,v,U){this._updateNodesRunning?this._updateNodesQueued.push({paths:E,cb:v,promise:U}):(this._updateNodesRunning=!0,this.getNodes(E).then(O=>{const q=x.deepClone(O),C=[];O=v(E,O);for(const e in O){const l=O[e];x.equal(l,q[e])?delete O[e]:x.isDocument(e)&&(x.equal(l.local.body,l.local.previousBody)&&l.local.contentType===l.local.previousContentType||C.push({path:e,origin:"window",oldValue:l.local.previousBody,newValue:l.local.body===!1?void 0:l.local.body,oldContentType:l.local.previousContentType,newContentType:l.local.contentType}),delete l.local.previousBody,delete l.local.previousContentType)}this.setNodes(O).then(()=>{this._emitChangeEvents(C),U.resolve({statusCode:200})})}).then(()=>Promise.resolve(),O=>{U.reject(O)}).then(()=>{this._updateNodesRunning=!1;const O=this._updateNodesQueued.shift();O&&this._doUpdateNodes(O.paths,O.cb,O.promise)}))}_emitChangeEvents(E){for(let v=0,U=E.length;v<U;v++)this._emitChange(E[v]),this.diffHandler&&this.diffHandler(E[v].path)}_getAllDescendentPaths(E){return x.isFolder(E)?this.getNodes([E]).then(v=>{const U=[E],O=y(v[E]),q=Object.keys(O.itemsMap).map(C=>this._getAllDescendentPaths(E+C).then(e=>{for(let l=0,o=e.length;l<o;l++)U.push(e[l])}));return Promise.all(q).then(()=>U)}):Promise.resolve([E])}_getInternals(){return{getLatest:y,makeNode:P,isOutdated:M}}}function y(g){if(typeof g=="object"&&typeof g.path=="string")if(x.isFolder(g.path)){if(g.local&&g.local.itemsMap)return g.local;if(g.common&&g.common.itemsMap)return g.common}else{if(g.local){if(g.local.body&&g.local.contentType)return g.local;if(g.local.body===!1)return}if(g.common&&g.common.body&&g.common.contentType)return g.common;if(g.body&&g.contentType)return{body:g.body,contentType:g.contentType}}}function M(g,E){for(const v in g){if(g[v]&&g[v].remote)return!0;const U=y(g[v]);if(U&&U.timestamp&&new Date().getTime()-U.timestamp<=E)return!1;if(!U)return!0}return!0}function P(g){const E={path:g,common:{}};return x.isFolder(g)&&(E.common.itemsMap={}),E}function b(g,E){return g.common||(g.common={itemsMap:{}}),g.common.itemsMap||(g.common.itemsMap={}),g.local||(g.local=x.deepClone(g.common)),g.local.itemsMap||(g.local.itemsMap=g.common.itemsMap),g.local.itemsMap[E]=!0,g}x.applyMixins(S,[p.default]),u.exports=S},function(u,d,f){u.exports=class{constructor(){this.reset()}static _rs_init(){}get scopes(){return Object.keys(this.scopeModeMap).map(c=>({name:c,mode:this.scopeModeMap[c]}))}get scopeParameter(){return this.scopes.map(c=>`${this._scopeNameForParameter(c)}:${c.mode}`).join(" ")}claim(c,p){if(typeof c!="string"||c.indexOf("/")!==-1||c.length===0)throw new Error("Scope should be a non-empty string without forward slashes");if(!p.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(c),this.scopeModeMap[c]=p}get(c){return this.scopeModeMap[c]}remove(c){const p={};for(const m in this.scopeModeMap)p[m]=this.scopeModeMap[m];this.reset(),delete p[c];for(const m in p)this.claim(m,p[m])}checkPermission(c,p){const m=this.get(c);return m&&(p==="r"||m==="rw")}checkPathPermission(c,p){if(this.checkPermission("*",p))return!0;const m=this._getModuleName(c);return!!this.checkPermission(m,p)}reset(){this.rootPaths=[],this.scopeModeMap={}}_getModuleName(c){if(c[0]!=="/")throw new Error("Path should start with a slash");const p=c.replace(/^\/public/,"").match(/^\/([^/]*)\//);return p?p[1]:"*"}_adjustRootPaths(c){"*"in this.scopeModeMap||c==="*"?this.rootPaths=["/"]:c in this.scopeModeMap||(this.rootPaths.push("/"+c+"/"),this.rootPaths.push("/public/"+c+"/"))}_scopeNameForParameter(c){if(c.name==="*"&&this.storageType){if(this.storageType==="2012.04")return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return c.name}setStorageType(c){this.storageType=c}}},function(u,d,f){var c=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};const p=f(0),m=c(f(1));u.exports=class{constructor(){this.pendingActivations=[],this.reset()}set(_,x){if(typeof _!="string")throw new Error("path should be a string");if(!p.isFolder(_))throw new Error("path should be a folder");if(!x.match(/^(FLUSH|SEEN|ALL)$/))throw new Error("strategy should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[_]=x,x==="ALL"&&(this.activateHandler?this.activateHandler(_):this.pendingActivations.push(_))}enable(_){this.set(_,"ALL")}disable(_){this.set(_,"FLUSH")}onActivate(_){m.default("[Caching] Setting activate handler",_,this.pendingActivations),this.activateHandler=_;for(let x=0;x<this.pendingActivations.length;x++)_(this.pendingActivations[x]);this.pendingActivations=[]}checkPath(_){return this._rootPaths[_]!==void 0?this._rootPaths[_]:_==="/"?"SEEN":this.checkPath(p.containingFolder(_))}reset(){this._rootPaths={}}static _rs_init(){}}},function(u,d,f){var c=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};const p=c(f(7)),m=c(f(8)),_=c(f(2)),x=f(0),S="https://www.googleapis.com",y="remotestorage:googledrive";let M;function P(q){return q.substr(-1)==="/"&&(q=q.substr(0,q.length-1)),decodeURIComponent(q)}function b(q){return q.replace(/[^\/]+\/?$/,"")}function g(q){const C=q.split("/");return q.substr(-1)==="/"?C[C.length-2]+"/":C[C.length-1]}function E(q){return x.cleanPath("/remotestorage/"+q)}function v(q){return q.replace(/^["'](.*)["']$/,"$1")}class U{constructor(C){this._items={},this.maxAge=C,this._items={}}get(C){const e=this._items[C],l=new Date().getTime();return e&&e.t>=l-this.maxAge?e.v:void 0}set(C,e){this._items[C]={v:e,t:new Date().getTime()}}}class O{constructor(C,e){if(this.connected=!1,this.online=!0,this.addEvents(["connected","not-connected"]),this.rs=C,this.clientId=e,this._fileIdCache=new U(300),M=x.localStorageAvailable(),M){const l=x.getJSONFromLocalStorage(y);l&&this.configure(l)}}configure(C){C.userAddress!==void 0&&(this.userAddress=C.userAddress),C.token!==void 0&&(this.token=C.token);const e=function(){M&&localStorage.setItem(y,JSON.stringify({userAddress:this.userAddress,token:this.token}))},l=function(){this.connected=!1,delete this.token,M&&localStorage.removeItem(y)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),e.apply(this)):this.info().then(o=>{this.userAddress=o.user.emailAddress,this._emit("connected"),e.apply(this)}).catch(()=>{l.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))})):l.apply(this)}connect(){this.rs.setBackend("googledrive"),this.rs.authorize({authURL:"https://accounts.google.com/o/oauth2/auth",scope:"https://www.googleapis.com/auth/drive",clientId:this.clientId})}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(C,e){return x.isFolder(C)?this._getFolder(E(C)):this._getFile(E(C),e)}put(C,e,l,o){const T=E(C);function w(I){if(I.status>=200&&I.status<300){const $=JSON.parse(I.responseText),G=v($.etag);return Promise.resolve({statusCode:200,contentType:$.mimeType,revision:G})}return I.status===412?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+I.status+" ("+I.responseText+")")}return this._getFileId(T).then(I=>I?o&&o.ifNoneMatch==="*"?w({status:412}):this._updateFile(I,T,e,l,o).then(w):this._createFile(T,e,l).then(w))}delete(C,e){const l=E(C);return this._getFileId(l).then(o=>o?this._getMeta(o).then(T=>{let w;return typeof T=="object"&&typeof T.etag=="string"&&(w=v(T.etag)),e&&e.ifMatch&&e.ifMatch!==w?{statusCode:412,revision:w}:this._request("DELETE",S+"/drive/v2/files/"+o,{}).then(I=>I.status===200||I.status===204?{statusCode:200}:Promise.reject("Delete failed: "+I.status+" ("+I.responseText+")"))}):Promise.resolve({statusCode:200}))}info(){return this._request("GET","https://www.googleapis.com/drive/v2/about?fields=user",{}).then(function(C){try{const e=JSON.parse(C.responseText);return Promise.resolve(e)}catch(e){return Promise.reject(e)}})}_updateFile(C,e,l,o,T){const w={mimeType:o},I={"Content-Type":"application/json; charset=UTF-8"};return T&&T.ifMatch&&(I["If-Match"]='"'+T.ifMatch+'"'),this._request("PUT",S+"/upload/drive/v2/files/"+C+"?uploadType=resumable",{body:JSON.stringify(w),headers:I}).then($=>$.status===412?$:this._request("PUT",$.getResponseHeader("Location"),{body:o.match(/^application\/json/)?JSON.stringify(l):l}))}_createFile(C,e,l){return this._getParentId(C).then(o=>{const T={title:P(g(C)),mimeType:l,parents:[{kind:"drive#fileLink",id:o}]};return this._request("POST",S+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(T),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(w=>this._request("POST",w.getResponseHeader("Location"),{body:l.match(/^application\/json/)?JSON.stringify(e):e}))})}_getFile(C,e){return this._getFileId(C).then(l=>this._getMeta(l).then(o=>{let T;if(typeof o=="object"&&typeof o.etag=="string"&&(T=v(o.etag)),e&&e.ifNoneMatch&&T===e.ifNoneMatch)return Promise.resolve({statusCode:304});if(!o.downloadUrl){if(!o.exportLinks||!o.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:o.mimeType,revision:T});o.mimeType+=";export=text/html",o.downloadUrl=o.exportLinks["text/html"]}return this._request("GET",o.downloadUrl,{responseType:"arraybuffer"}).then(w=>x.getTextFromArrayBuffer(w.response,"UTF-8").then(function(I){let $=I;if(o.mimeType.match(/^application\/json/))try{$=JSON.parse($)}catch{}else x.shouldBeTreatedAsBinary(I,o.mimeType)&&($=w.response);return{statusCode:200,body:$,contentType:o.mimeType,revision:T}}))}))}_getFolder(C){return this._getFileId(C).then(e=>{let l,o,T;if(!e)return Promise.resolve({statusCode:404});const w="'"+e+"' in parents";return this._request("GET",S+"/drive/v2/files?q="+encodeURIComponent(w)+"&fields="+encodeURIComponent("items(downloadUrl,etag,fileSize,id,mimeType,title)")+"&maxResults=1000",{}).then(I=>{if(I.status!==200)return Promise.reject("request failed or something: "+I.status);try{l=JSON.parse(I.responseText)}catch{return Promise.reject("non-JSON response from GoogleDrive")}T={};for(const $ of l.items)o=v($.etag),$.mimeType==="application/vnd.google-apps.folder"?(this._fileIdCache.set(C+x.cleanPath($.title)+"/",$.id),T[$.title+"/"]={ETag:o}):(this._fileIdCache.set(C+x.cleanPath($.title),$.id),T[$.title]={ETag:o,"Content-Type":$.mimeType,"Content-Length":$.fileSize});return Promise.resolve({statusCode:200,body:T,contentType:"application/json; charset=UTF-8",revision:void 0})})})}_getParentId(C){const e=b(C);return this._getFileId(e).then(l=>l?Promise.resolve(l):this._createFolder(e))}_createFolder(C){return this._getParentId(C).then(e=>this._request("POST",S+"/drive/v2/files",{body:JSON.stringify({title:P(g(C)),mimeType:"application/vnd.google-apps.folder",parents:[{id:e}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(l=>{const o=JSON.parse(l.responseText);return Promise.resolve(o.id)}))}_getFileId(C){let e;return C==="/"?Promise.resolve("root"):(e=this._fileIdCache.get(C))?Promise.resolve(e):this._getFolder(b(C)).then(()=>(e=this._fileIdCache.get(C),e?Promise.resolve(e):C.substr(-1)==="/"?this._createFolder(C).then(()=>this._getFileId(C)):Promise.resolve()))}_getMeta(C){return this._request("GET",S+"/drive/v2/files/"+C,{}).then(function(e){return e.status===200?Promise.resolve(JSON.parse(e.responseText)):Promise.reject("request (getting metadata for "+C+") failed with status: "+e.status)})}_request(C,e,l){return l.headers||(l.headers={}),l.headers.Authorization="Bearer "+this.token,this.rs._emit("wire-busy",{method:C,isFolder:x.isFolder(e)}),m.default.request.call(this,C,e,l).then(o=>o&&o.status===401?void this.connect():(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:C,isFolder:x.isFolder(e),success:!0}),Promise.resolve(o)),o=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:C,isFolder:x.isFolder(e),success:!1}),Promise.reject(o)))}static _rs_init(C){const e=C.apiKeys.googledrive;var l;e&&(C.googledrive=new O(C,e.clientId),C.backend==="googledrive"&&(C._origRemote=C.remote,C.remote=C.googledrive,(l=C)._origBaseClientGetItemURL||(l._origBaseClientGetItemURL=p.default.prototype.getItemURL,p.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Google Drive yet")})))}static _rs_supported(){return!0}static _rs_cleanup(C){var e;C.setBackend(void 0),C._origRemote&&(C.remote=C._origRemote,delete C._origRemote),(e=C)._origBaseClientGetItemURL&&(p.default.prototype.getItemURL=e._origBaseClientGetItemURL,delete e._origBaseClientGetItemURL)}}x.applyMixins(O,[_.default]),u.exports=O},function(u,d,f){var c=this&&this.__awaiter||function(l,o,T,w){return new(T||(T=Promise))(function(I,$){function G(B){try{R(w.next(B))}catch(n){$(n)}}function L(B){try{R(w.throw(B))}catch(n){$(n)}}function R(B){var n;B.done?I(B.value):(n=B.value,n instanceof T?n:new T(function(s){s(n)})).then(G,L)}R((w=w.apply(l,o||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};const m=p(f(2)),_=p(f(8)),x=p(f(7)),S=p(f(26)),y=p(f(9)),M=p(f(4)),P=f(0);let b;const g="remotestorage:dropbox";function E(l){return P.cleanPath("/remotestorage/"+l).replace(/\/$/,"")}function v(l,o){return new RegExp("^"+o.join("\\/")+"(\\/|$)").test(l.error_summary)}function U(l){return l instanceof ArrayBuffer||_.default.isArrayBufferView(l)}class O{constructor(o){if(this.rs=o,this.connected=!1,this.online=!0,this._initialFetchDone=!1,this.addEvents(["connected","not-connected"]),this.clientId=o.apiKeys.dropbox.appKey,this._revCache=new S.default("rev"),this._fetchDeltaCursor=null,this._fetchDeltaPromise=null,this._itemRefs={},b=P.localStorageAvailable(),b){const T=P.getJSONFromLocalStorage(g);T&&this.configure(T),this._itemRefs=P.getJSONFromLocalStorage(g+":shares")||{}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}connect(){this.rs.setBackend("dropbox"),this.token?e(this.rs):this.rs.authorize({authURL:"https://www.dropbox.com/oauth2/authorize",scope:"",clientId:this.clientId})}configure(o){o.userAddress!==void 0&&(this.userAddress=o.userAddress),o.token!==void 0&&(this.token=o.token);const T=function(){b&&localStorage.setItem(g,JSON.stringify({userAddress:this.userAddress,token:this.token}))},w=function(){this.connected=!1,b&&localStorage.removeItem(g)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),T.apply(this)):this.info().then(function(I){this.userAddress=I.email,this._emit("connected"),T.apply(this)}.bind(this)).catch(function(){w.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))}.bind(this))):w.apply(this)}stopWaitingForToken(){this.connected||this._emit("not-connected")}_getFolder(o){const T=this._revCache,w=$=>{let G;if($.status!==200&&$.status!==409)return Promise.reject("Unexpected response status: "+$.status);try{G=JSON.parse($.responseText)}catch(R){return Promise.reject(R)}if($.status===409)return v(G,["path","not_found"])?Promise.resolve({}):Promise.reject(new Error("API returned an error: "+G.error_summary));const L=G.entries.reduce((R,B)=>{const n=B[".tag"]==="folder",s=B.path_lower.split("/").slice(-1)[0]+(n?"/":"");return n?R[s]={ETag:T.get(o+s)}:(R[s]={ETag:B.rev},this._revCache.set(o+s,B.rev)),R},{});return G.has_more?I(G.cursor).then(function(R){return Object.assign(L,R)}):Promise.resolve(L)},I=$=>{const G={body:{cursor:$}};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder/continue",G).then(w)};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder",{body:{path:E(o)}}).then(w).then(function($){return Promise.resolve({statusCode:200,body:$,contentType:"application/json; charset=UTF-8",revision:T.get(o)})})}get(o,T){if(!this.connected)return Promise.reject("not connected (path: "+o+")");const w=this._revCache.get(o);if(w===null)return Promise.resolve({statusCode:404});if(T&&T.ifNoneMatch){if(!this._initialFetchDone)return this.fetchDelta().then(()=>this.get(o,T));if(w&&w===T.ifNoneMatch)return Promise.resolve({statusCode:304})}if(o.substr(-1)==="/")return this._getFolder(o);const I={headers:{"Dropbox-API-Arg":JSON.stringify({path:E(o)})},responseType:"arraybuffer"};return T&&T.ifNoneMatch&&(I.headers["If-None-Match"]=T.ifNoneMatch),this._request("GET","https://content.dropboxapi.com/2/files/download",I).then($=>{const G=$.status;let L,R,B,n;return G!==200&&G!==409?Promise.resolve({statusCode:G}):(L=$.getResponseHeader("Dropbox-API-Result"),P.getTextFromArrayBuffer($.response,"UTF-8").then(s=>{R=s,G===409&&(L=R);try{L=JSON.parse(L)}catch(A){return Promise.reject(A)}if(G===409)return v(L,["path","not_found"])?{statusCode:404}:Promise.reject(new Error('API error while downloading file ("'+o+'"): '+L.error_summary));if(B=$.getResponseHeader("Content-Type"),n=L.rev,this._revCache.set(o,n),this._shareIfNeeded(o),P.shouldBeTreatedAsBinary(s,B))R=$.response;else try{R=JSON.parse(R),B="application/json; charset=UTF-8"}catch{}return{statusCode:G,body:R,contentType:B,revision:n}}))})}put(o,T,w,I){if(!this.connected)throw new Error("not connected (path: "+o+")");const $=this._revCache.get(o);if(I&&I.ifMatch&&$&&$!==I.ifMatch)return Promise.resolve({statusCode:412,revision:$});if(I&&I.ifNoneMatch==="*"&&$&&$!=="rev")return Promise.resolve({statusCode:412,revision:$});if(!w.match(/charset=/)&&U(T)&&(w+="; charset=binary"),T.length>157286400)return Promise.reject(new Error("Cannot upload file larger than 150MB"));let G;const L=I&&(I.ifMatch||I.ifNoneMatch==="*"),R={body:T,contentType:w,path:o};return G=L?this._getMetadata(o).then(B=>I&&I.ifNoneMatch==="*"&&B||I&&I.ifMatch&&B&&B.rev!==I.ifMatch?Promise.resolve({statusCode:412,revision:B.rev}):this._uploadSimple(R)):this._uploadSimple(R),G.then(B=>(this._shareIfNeeded(o),B))}delete(o,T){if(!this.connected)throw new Error("not connected (path: "+o+")");const w=this._revCache.get(o);return T&&T.ifMatch&&w&&T.ifMatch!==w?Promise.resolve({statusCode:412,revision:w}):T&&T.ifMatch?this._getMetadata(o).then(I=>T&&T.ifMatch&&I&&I.rev!==T.ifMatch?Promise.resolve({statusCode:412,revision:I.rev}):this._deleteSimple(o)):this._deleteSimple(o)}_shareIfNeeded(o){o.match(/^\/public\/.*[^/]$/)&&this._itemRefs[o]===void 0&&this.share(o)}share(o){const T={body:{path:E(o)}};return this._request("POST","https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings",T).then(w=>{if(w.status!==200&&w.status!==409)return Promise.reject(new Error("Invalid response status:"+w.status));let I;try{I=JSON.parse(w.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+w.responseText))}return w.status===409?v(I,["shared_link_already_exists"])?this._getSharedLink(o):Promise.reject(new Error("API error: "+I.error_summary)):Promise.resolve(I.url)}).then(w=>(this._itemRefs[o]=w,b&&localStorage.setItem(g+":shares",JSON.stringify(this._itemRefs)),Promise.resolve(w)),w=>(w.message='Sharing Dropbox file or folder ("'+o+'") failed: '+w.message,Promise.reject(w)))}info(){return this._request("POST","https://api.dropboxapi.com/2/users/get_current_account",{}).then(function(o){let T=o.responseText;try{T=JSON.parse(T)}catch{return Promise.reject(new Error("Could not query current account info: Invalid API response: "+T))}return Promise.resolve({email:T.email})})}_request(o,T,w){return w.headers||(w.headers={}),w.headers.Authorization="Bearer "+this.token,typeof w.body!="object"||U(w.body)||(w.body=JSON.stringify(w.body),w.headers["Content-Type"]="application/json; charset=UTF-8"),this.rs._emit("wire-busy",{method:o,isFolder:P.isFolder(T)}),_.default.request.call(this,o,T,w).then(I=>I&&I.status===503?(this.online&&(this.online=!1,this.rs._emit("network-offline")),setTimeout(this._request(o,T,w),3210)):(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:o,isFolder:P.isFolder(T),success:!0}),Promise.resolve(I)),I=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:o,isFolder:P.isFolder(T),success:!1}),Promise.reject(I)))}fetchDelta(...o){if(this._fetchDeltaPromise)return this._fetchDeltaPromise;const T=w=>{let I,$="https://api.dropboxapi.com/2/files/list_folder";return typeof w=="string"?($+="/continue",I={cursor:w}):I={path:"/remotestorage",recursive:!0,include_deleted:!0},this._request("POST",$,{body:I}).then(G=>{if(G.status===401)return this.rs._emit("error",new M.default),Promise.resolve(o);if(G.status!==200&&G.status!==409)return Promise.reject(new Error("Invalid response status: "+G.status));let L;try{L=JSON.parse(G.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+G.responseText))}if(G.status===409){if(!v(L,["path","not_found"]))return Promise.reject(new Error("API returned an error: "+L.error_summary));L={cursor:null,entries:[],has_more:!1}}if(w||this._revCache.deactivatePropagation(),L.entries.forEach(R=>{const B=R.path_lower.substr("/remotestorage".length);R[".tag"]==="deleted"?(this._revCache.delete(B),this._revCache.delete(B+"/")):R[".tag"]==="file"&&this._revCache.set(B,R.rev)}),this._fetchDeltaCursor=L.cursor,L.has_more)return T(L.cursor);this._revCache.activatePropagation(),this._initialFetchDone=!0}).catch(G=>G==="timeout"||G instanceof ProgressEvent?Promise.resolve():Promise.reject(G))};return this._fetchDeltaPromise=T(this._fetchDeltaCursor).catch(w=>(typeof w=="object"&&"message"in w?w.message="Dropbox: fetchDelta: "+w.message:w="Dropbox: fetchDelta: "+w,this._fetchDeltaPromise=null,Promise.reject(w))).then(()=>(this._fetchDeltaPromise=null,Promise.resolve(o))),this._fetchDeltaPromise}_getMetadata(o){const T={path:E(o)};return this._request("POST","https://api.dropboxapi.com/2/files/get_metadata",{body:T}).then(w=>{if(w.status!==200&&w.status!==409)return Promise.reject(new Error("Invalid response status:"+w.status));let I;try{I=JSON.parse(w.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+w.responseText))}return w.status===409?v(I,["path","not_found"])?Promise.resolve():Promise.reject(new Error("API error: "+I.error_summary)):Promise.resolve(I)}).then(void 0,w=>(w.message='Could not load metadata for file or folder ("'+o+'"): '+w.message,Promise.reject(w)))}_uploadSimple(o){const T={path:E(o.path),mode:{".tag":"overwrite",update:void 0},mute:!0};return o.ifMatch&&(T.mode={".tag":"update",update:o.ifMatch}),this._request("POST","https://content.dropboxapi.com/2/files/upload",{body:o.body,headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":JSON.stringify(T)}}).then(w=>{if(w.status!==200&&w.status!==409)return Promise.resolve({statusCode:w.status});let I=w.responseText;try{I=JSON.parse(I)}catch{return Promise.reject(new Error("Invalid API result: "+I))}return w.status===409?v(I,["path","conflict"])?this._getMetadata(o.path).then(function($){return Promise.resolve({statusCode:412,revision:$.rev})}):Promise.reject(new Error("API error: "+I.error_summary)):(this._revCache.set(o.path,I.rev),Promise.resolve({statusCode:w.status,revision:I.rev}))})}_deleteSimple(o){const T={path:E(o)};return this._request("POST","https://api.dropboxapi.com/2/files/delete",{body:T}).then(w=>{if(w.status!==200&&w.status!==409)return Promise.resolve({statusCode:w.status});let I=w.responseText;try{I=JSON.parse(I)}catch{return Promise.reject(new Error("Invalid response body: "+I))}return w.status===409?v(I,["path_lookup","not_found"])?Promise.resolve({statusCode:404}):Promise.reject(new Error("API error: "+I.error_summary)):Promise.resolve({statusCode:200})}).then(w=>(w.statusCode!==200&&w.statusCode!==404||(this._revCache.delete(o),delete this._itemRefs[o]),Promise.resolve(w)),w=>(w.message='Could not delete Dropbox file or folder ("'+o+'"): '+w.message,Promise.reject(w)))}_getSharedLink(o){return c(this,void 0,void 0,function*(){const T={body:{path:E(o),direct_only:!0}};return this._request("POST","https://api.dropbox.com/2/sharing/list_shared_links",T).then(w=>{if(w.status!==200&&w.status!==409)return Promise.reject(new Error("Invalid response status: "+w.status));let I;try{I=JSON.parse(w.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+w.responseText))}return w.status===409?Promise.reject(new Error("API error: "+w.error_summary)):I.links.length?Promise.resolve(I.links[0].url):Promise.reject(new Error("No links returned"))},w=>(w.message='Could not get link to a shared file or folder ("'+o+'"): '+w.message,Promise.reject(w)))})}static _rs_init(o){b=P.localStorageAvailable(),o.apiKeys.dropbox&&(o.dropbox=new O(o)),o.backend==="dropbox"&&e(o)}static _rs_supported(){return!0}static _rs_cleanup(o){(function(T){(function(w){w._origRemote&&(w.remote=w._origRemote,delete w._origRemote)})(T),function(w){!w._dropboxOrigSync||(w.sync.sync=w._dropboxOrigSync,delete w._dropboxOrigSync)}(T),function(w){!w._origBaseClientGetItemURL||(x.default.prototype.getItemURL=w._origBaseClientGetItemURL,delete w._origBaseClientGetItemURL)}(T),C(T)})(o),b&&localStorage.removeItem(g),o.setBackend(void 0)}}function q(l,...o){l._dropboxOrigSync||(l._dropboxOrigSync=l.sync.sync.bind(l.sync),l.sync.sync=function(){return this.dropbox.fetchDelta(l,...o).then(l._dropboxOrigSync,function(T){l._emit("error",new y.default(T)),l._emit("sync-done")})}.bind(l))}function C(l){l._dropboxOrigSyncCycle&&(l.syncCycle=l._dropboxOrigSyncCycle,delete l._dropboxOrigSyncCycle)}function e(l){(function(o){o._origRemote||(o._origRemote=o.remote,o.remote=o.dropbox)})(l),l.sync?q(l):function(o,...T){o._dropboxOrigSyncCycle||(o._dropboxOrigSyncCycle=o.syncCycle,o.syncCycle=()=>{if(!o.sync)throw new Error("expected sync to be initialized by now");q(o),o._dropboxOrigSyncCycle(o,...T),C(o)})}(l),function(o){o._origBaseClientGetItemURL||(o._origBaseClientGetItemURL=x.default.prototype.getItemURL,x.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Dropbox yet")})}(l)}P.applyMixins(O,[m.default]),u.exports=O},function(u,d,f){var c=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};const p=c(f(27)),m=c(f(1)),_=f(0);let x,S,y={};const M=function(P){return new Promise((b,g)=>P in y?b(y[P]):new p.default({tls_only:!1,uri_fallback:!0,request_timeout:5e3}).lookup(P,function(E,v){if(E)return g(E);if(typeof v.idx.links.remotestorage!="object"||typeof v.idx.links.remotestorage.length!="number"||v.idx.links.remotestorage.length<=0)return m.default("[Discover] WebFinger record for "+P+" does not have remotestorage defined in the links section ",JSON.stringify(v.json)),g("WebFinger record for "+P+" does not have remotestorage defined in the links section.");const U=v.idx.links.remotestorage[0],O=U.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||U.properties["auth-endpoint"],q=U.properties["http://remotestorage.io/spec/version"]||U.type;return y[P]={href:U.href,storageApi:q,authURL:O,properties:U.properties},S&&(localStorage["remotestorage:discover"]=JSON.stringify({cache:y})),b(y[P])}))};(M.DiscoveryError=function(P){this.name="DiscoveryError",this.message=P,this.stack=new Error().stack}).prototype=Object.create(Error.prototype),M.DiscoveryError.prototype.constructor=M.DiscoveryError,M._rs_init=function(){if(S=_.localStorageAvailable(),S)try{y=JSON.parse(localStorage["remotestorage:discover"]).cache}catch{}},M._rs_supported=function(){return x=Object.prototype.hasOwnProperty.call(_.globalContext,"XMLHttpRequest"),x},M._rs_cleanup=function(){S&&delete localStorage["remotestorage:discover"]},u.exports=M},function(u,d,f){const c=(this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}})(f(2)),p=f(0);class m{constructor(){this.addEvents(["background","foreground"]),this.mode=typeof window!="undefined"?"browser":"node",this.mode==="browser"&&(this.setBrowserPrefixedNames(),document.addEventListener(this.visibilityChangeEvent,this.setVisibility.bind(this),!1),this.setVisibility())}setBrowserPrefixedNames(){this.mode==="browser"&&(document.hidden!==void 0?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):document.mozHidden!==void 0?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange"):document.msHidden!==void 0?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):document.webkitHidden!==void 0&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"))}setVisibility(){document[this.hiddenProperty]?this.goBackground():this.goForeground()}isBrowser(){return this.mode==="browser"}isNode(){return this.mode==="node"}goBackground(){this._emit("background")}goForeground(){this._emit("foreground")}static _rs_init(){}static _rs_cleanup(){}}p.applyMixins(m,[c.default]),u.exports=m},function(u,d,f){u.exports=f(18)},function(u,d,f){var c=this&&this.__createBinding||(Object.create?function(L,R,B,n){n===void 0&&(n=B),Object.defineProperty(L,n,{enumerable:!0,get:function(){return R[B]}})}:function(L,R,B,n){n===void 0&&(n=B),L[n]=R[B]}),p=this&&this.__setModuleDefault||(Object.create?function(L,R){Object.defineProperty(L,"default",{enumerable:!0,value:R})}:function(L,R){L.default=R}),m=this&&this.__importStar||function(L){if(L&&L.__esModule)return L;var R={};if(L!=null)for(var B in L)B!=="default"&&Object.hasOwnProperty.call(L,B)&&c(R,L,B);return p(R,L),R},_=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};const x=_(f(3)),S=_(f(1)),y=f(0),M=_(f(11)),P=_(f(6)),b=_(f(7)),g=_(f(12)),E=_(f(2)),v=_(f(13)),U=_(f(14)),O=_(f(15)),q=_(f(9)),C=_(f(4)),e=_(f(29)),l=m(f(0)),o=y.getGlobalContext();let T;function w(L){return L.statusCode!==403&&L.statusCode!==401||this._emit("error",new C.default),Promise.resolve(L)}function I(L){return typeof L=="number"&&L>1e3&&L<36e5}class ${constructor(R){this._pending=[],this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this._init=e.default.loadFeatures,this.features=e.default.features,this.loadFeature=e.default.loadFeature,this.featureSupported=e.default.featureSupported,this.featureDone=e.default.featureDone,this.featuresDone=e.default.featuresDone,this.featuresLoaded=e.default.featuresLoaded,this.featureInitialized=e.default.featureInitialized,this.featureFailed=e.default.featureFailed,this.hasFeature=e.default.hasFeature,this._setCachingModule=e.default._setCachingModule,this._collectCleanupFunctions=e.default._collectCleanupFunctions,this._fireReady=e.default._fireReady,this.initFeature=e.default.initFeature,typeof R=="object"&&y.extend(x.default,R),this.addEvents(["ready","authing","connecting","connected","disconnected","not-connected","conflict","error","features-loaded","sync-interval-change","sync-req-done","sync-done","wire-busy","wire-done","network-offline","network-online"]),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")}),T=y.localStorageAvailable(),T&&(this.apiKeys=y.getJSONFromLocalStorage("remotestorage:api-keys")||{},this.setBackend(localStorage.getItem("remotestorage:backend")||"remotestorage"));const B=this.on;this.on=function(n,s){if(this._allLoaded)switch(n){case"features-loaded":setTimeout(s,0);break;case"ready":this.remote&&setTimeout(s,0);break;case"connected":this.remote&&this.remote.connected&&setTimeout(s,0);break;case"not-connected":this.remote&&!this.remote.connected&&setTimeout(s,0)}return B.call(this,n,s)},this._init(),this.fireInitial=function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}.bind(this),this.on("ready",this.fireInitial.bind(this)),this.loadModules()}get connected(){return this.remote.connected}loadModules(){x.default.modules.forEach(this.addModule.bind(this))}authorize(R){if(this.access.setStorageType(this.remote.storageApi),R.scope===void 0&&(R.scope=this.access.scopeParameter),o.cordova)R.redirectUri=x.default.cordovaRedirectUri;else{const B=P.default.getLocation();let n=B.origin;B.pathname!=="/"&&(n+=B.pathname),R.redirectUri=n}R.clientId===void 0&&(R.clientId=R.redirectUri.match(/^(https?:\/\/[^/]+)/)[0]),P.default.authorize(this,R)}impliedauth(R,B){R=R||this.remote.storageApi,B=B||String(document.location),S.default("ImpliedAuth proceeding due to absent authURL; storageApi = "+R+" redirectUri = "+B),this.remote.configure({token:P.default.IMPLIED_FAKE_TOKEN}),document.location.href=B}connect(R,B){if(this.setBackend("remotestorage"),R.indexOf("@")<0)return void this._emit("error",new $.DiscoveryError("User address doesn't contain an @."));if(o.cordova){if(typeof x.default.cordovaRedirectUri!="string")return void this._emit("error",new $.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));if(!o.cordova.InAppBrowser)return void this._emit("error",new $.DiscoveryError("Please include the InAppBrowser Cordova plugin to enable OAuth"))}this.remote.configure({userAddress:R}),this._emit("connecting");const n=setTimeout(()=>{this._emit("error",new $.DiscoveryError("No storage information found for this user address."))},x.default.discoveryTimeout);O.default(R).then(s=>{if(clearTimeout(n),this._emit("authing"),s.userAddress=R,this.remote.configure(s),!this.remote.connected)if(s.authURL)if(B===void 0)this.authorize({authURL:s.authURL});else{if(typeof B!="string")throw new Error("Supplied bearer token must be a string");S.default("Skipping authorization sequence and connecting with known token"),this.remote.configure({token:B})}else this.impliedauth()},()=>{clearTimeout(n),this._emit("error",new $.DiscoveryError("No storage information found for this user address."))})}reconnect(){this.remote.configure({token:null}),this.backend==="remotestorage"?this.connect(this.remote.userAddress):this.remote.connect()}disconnect(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")});const R=this._cleanups.length;let B=0;const n=()=>{B++,B>=R&&(this._init(),this._emit("disconnected"))};R>0?this._cleanups.forEach(s=>{const A=s(this);typeof A=="object"&&typeof A.then=="function"?A.then(n):n()}):n()}setBackend(R){this.backend=R,T&&(R?localStorage.setItem("remotestorage:backend",R):localStorage.removeItem("remotestorage:backend"))}onChange(R,B){this._pathHandlers.change[R]||(this._pathHandlers.change[R]=[]),this._pathHandlers.change[R].push(B)}enableLog(){x.default.logging=!0}disableLog(){x.default.logging=!1}log(...R){S.default.apply($,R)}setApiKeys(R){const B=[G.GOOGLE,G.DROPBOX];if(typeof R!="object"||!Object.keys(R).every(n=>B.includes(n)))return console.error("setApiKeys() was called with invalid arguments"),!1;Object.keys(R).forEach(n=>{const s=R[n];if(s){switch(n){case G.DROPBOX:this.apiKeys[G.DROPBOX]={appKey:s},this.dropbox!==void 0&&this.dropbox.clientId===s||U.default._rs_init(this);break;case G.GOOGLE:this.apiKeys[G.GOOGLE]={clientId:s},this.googledrive!==void 0&&this.googledrive.clientId===s||v.default._rs_init(this)}return!0}delete this.apiKeys[n]}),T&&localStorage.setItem("remotestorage:api-keys",JSON.stringify(this.apiKeys))}setCordovaRedirectUri(R){if(typeof R!="string"||!R.match(/http(s)?:\/\//))throw new Error("Cordova redirect URI must be a URI string");x.default.cordovaRedirectUri=R}_setGPD(R,B){function n(s){return function(...A){return s.apply(B,A).then(w.bind(this))}}this.get=n(R.get),this.put=n(R.put),this.delete=n(R.delete)}_pendingGPD(R){return(...B)=>{const n=Array.prototype.slice.call(B);return new Promise((s,A)=>{this._pending.push({method:R,args:n,promise:{resolve:s,reject:A}})})}}_processPending(){this._pending.forEach(R=>{try{this[R.method](...R.args).then(R.promise.resolve,R.promise.reject)}catch(B){R.promise.reject(B)}}),this._pending=[]}_bindChange(R){R.on("change",this._dispatchEvent.bind(this,"change"))}_dispatchEvent(R,B){Object.keys(this._pathHandlers[R]).forEach(n=>{const s=n.length;B.path.substr(0,s)===n&&this._pathHandlers[R][n].forEach(A=>{const k={};for(const F in B)k[F]=B[F];k.relativePath=B.path.replace(new RegExp("^"+n),"");try{A(k)}catch(F){console.error("'change' handler failed: ",F,F.stack),this._emit("error",F)}})})}scope(R){if(typeof R!="string")throw"Argument 'path' of baseClient.scope must be a string";return this.access.checkPathPermission(R,"r")||console.warn("WARNING: Please use remoteStorage.access.claim() to ask for access permissions first: https://remotestoragejs.readthedocs.io/en/latest/js-api/access.html#claim"),new b.default(this,R)}getSyncInterval(){return x.default.syncInterval}setSyncInterval(R){if(!I(R))throw R+" is not a valid sync interval";const B=x.default.syncInterval;x.default.syncInterval=R,this._emit("sync-interval-change",{oldValue:B,newValue:R})}getBackgroundSyncInterval(){return x.default.backgroundSyncInterval}setBackgroundSyncInterval(R){if(!I(R))throw R+" is not a valid sync interval";const B=x.default.backgroundSyncInterval;x.default.backgroundSyncInterval=R,this._emit("sync-interval-change",{oldValue:B,newValue:R})}getCurrentSyncInterval(){return x.default.isBackground?x.default.backgroundSyncInterval:x.default.syncInterval}getRequestTimeout(){return x.default.requestTimeout}setRequestTimeout(R){if(typeof R!="number")throw R+" is not a valid request timeout";x.default.requestTimeout=R}syncCycle(){this.sync&&!this.sync.stopped&&(this.on("sync-done",()=>{this.sync&&!this.sync.stopped&&(this._syncTimer&&(clearTimeout(this._syncTimer),this._syncTimer=void 0),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}),this.sync.sync())}startSync(){return x.default.cache?(this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()):(console.warn("Nothing to sync, because caching is disabled."),Promise.resolve())}stopSync(){clearTimeout(this._syncTimer),this._syncTimer=void 0,this.sync?this.sync.stopped=!0:this.syncStopped=!0}addModule(R){const B=R.name,n=R.builder;if(Object.defineProperty(this,B,{configurable:!0,get:function(){const s=this._loadModule(B,n);return Object.defineProperty(this,B,{value:s}),s}}),B.indexOf("-")!==-1){const s=B.replace(/\-[a-z]/g,function(A){return A[1].toUpperCase()});Object.defineProperty(this,s,{get:function(){return this[B]}})}}_loadModule(R,B){if(B)return B(new b.default(this,"/"+R+"/"),new b.default(this,"/public/"+R+"/")).exports;throw"Unknown module: "+R}}var G;$.Authorize=P.default,$.SyncError=q.default,$.Unauthorized=C.default,$.DiscoveryError=O.default.DiscoveryError,$.util=l,Object.defineProperty($.prototype,"access",{get:function(){const L=new M.default;return Object.defineProperty(this,"access",{value:L}),L},configurable:!0}),Object.defineProperty($.prototype,"caching",{configurable:!0,get:function(){const L=new g.default;return Object.defineProperty(this,"caching",{value:L}),L}}),y.applyMixins($,[E.default]),function(L){L.GOOGLE="googledrive",L.DROPBOX="dropbox"}(G||(G={})),u.exports=$},function(u,d,f){(function(c){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var p=f(20),m=f(21),_=f(22);function x(){return y.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function S(r,i){if(x()<i)throw new RangeError("Invalid typed array length");return y.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(i)).__proto__=y.prototype:(r===null&&(r=new y(i)),r.length=i),r}function y(r,i,h){if(!(y.TYPED_ARRAY_SUPPORT||this instanceof y))return new y(r,i,h);if(typeof r=="number"){if(typeof i=="string")throw new Error("If encoding is specified then the first argument must be a string");return b(this,r)}return M(this,r,i,h)}function M(r,i,h,j){if(typeof i=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&i instanceof ArrayBuffer?function(N,D,Y,X){if(D.byteLength,Y<0||D.byteLength<Y)throw new RangeError("'offset' is out of bounds");if(D.byteLength<Y+(X||0))throw new RangeError("'length' is out of bounds");return D=Y===void 0&&X===void 0?new Uint8Array(D):X===void 0?new Uint8Array(D,Y):new Uint8Array(D,Y,X),y.TYPED_ARRAY_SUPPORT?(N=D).__proto__=y.prototype:N=g(N,D),N}(r,i,h,j):typeof i=="string"?function(N,D,Y){if(typeof Y=="string"&&Y!==""||(Y="utf8"),!y.isEncoding(Y))throw new TypeError('"encoding" must be a valid string encoding');var X=0|v(D,Y),rt=(N=S(N,X)).write(D,Y);return rt!==X&&(N=N.slice(0,rt)),N}(r,i,h):function(N,D){if(y.isBuffer(D)){var Y=0|E(D.length);return(N=S(N,Y)).length===0||D.copy(N,0,0,Y),N}if(D){if(typeof ArrayBuffer!="undefined"&&D.buffer instanceof ArrayBuffer||"length"in D)return typeof D.length!="number"||(X=D.length)!=X?S(N,0):g(N,D);if(D.type==="Buffer"&&_(D.data))return g(N,D.data)}var X;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(r,i)}function P(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function b(r,i){if(P(i),r=S(r,i<0?0:0|E(i)),!y.TYPED_ARRAY_SUPPORT)for(var h=0;h<i;++h)r[h]=0;return r}function g(r,i){var h=i.length<0?0:0|E(i.length);r=S(r,h);for(var j=0;j<h;j+=1)r[j]=255&i[j];return r}function E(r){if(r>=x())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x().toString(16)+" bytes");return 0|r}function v(r,i){if(y.isBuffer(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var h=r.length;if(h===0)return 0;for(var j=!1;;)switch(i){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":case void 0:return nt(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*h;case"hex":return h>>>1;case"base64":return et(r).length;default:if(j)return nt(r).length;i=(""+i).toLowerCase(),j=!0}}function U(r,i,h){var j=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0)<=(i>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return B(this,i,h);case"utf8":case"utf-8":return G(this,i,h);case"ascii":return L(this,i,h);case"latin1":case"binary":return R(this,i,h);case"base64":return $(this,i,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n(this,i,h);default:if(j)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),j=!0}}function O(r,i,h){var j=r[i];r[i]=r[h],r[h]=j}function q(r,i,h,j,N){if(r.length===0)return-1;if(typeof h=="string"?(j=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,isNaN(h)&&(h=N?0:r.length-1),h<0&&(h=r.length+h),h>=r.length){if(N)return-1;h=r.length-1}else if(h<0){if(!N)return-1;h=0}if(typeof i=="string"&&(i=y.from(i,j)),y.isBuffer(i))return i.length===0?-1:C(r,i,h,j,N);if(typeof i=="number")return i&=255,y.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(r,i,h):Uint8Array.prototype.lastIndexOf.call(r,i,h):C(r,[i],h,j,N);throw new TypeError("val must be string, number or Buffer")}function C(r,i,h,j,N){var D,Y=1,X=r.length,rt=i.length;if(j!==void 0&&((j=String(j).toLowerCase())==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(r.length<2||i.length<2)return-1;Y=2,X/=2,rt/=2,h/=2}function Z(lt,Pt){return Y===1?lt[Pt]:lt.readUInt16BE(Pt*Y)}if(N){var W=-1;for(D=h;D<X;D++)if(Z(r,D)===Z(i,W===-1?0:D-W)){if(W===-1&&(W=D),D-W+1===rt)return W*Y}else W!==-1&&(D-=D-W),W=-1}else for(h+rt>X&&(h=X-rt),D=h;D>=0;D--){for(var at=!0,ut=0;ut<rt;ut++)if(Z(r,D+ut)!==Z(i,ut)){at=!1;break}if(at)return D}return-1}function e(r,i,h,j){h=Number(h)||0;var N=r.length-h;j?(j=Number(j))>N&&(j=N):j=N;var D=i.length;if(D%2!=0)throw new TypeError("Invalid hex string");j>D/2&&(j=D/2);for(var Y=0;Y<j;++Y){var X=parseInt(i.substr(2*Y,2),16);if(isNaN(X))return Y;r[h+Y]=X}return Y}function l(r,i,h,j){return K(nt(i,r.length-h),r,h,j)}function o(r,i,h,j){return K(function(N){for(var D=[],Y=0;Y<N.length;++Y)D.push(255&N.charCodeAt(Y));return D}(i),r,h,j)}function T(r,i,h,j){return o(r,i,h,j)}function w(r,i,h,j){return K(et(i),r,h,j)}function I(r,i,h,j){return K(function(N,D){for(var Y,X,rt,Z=[],W=0;W<N.length&&!((D-=2)<0);++W)Y=N.charCodeAt(W),X=Y>>8,rt=Y%256,Z.push(rt),Z.push(X);return Z}(i,r.length-h),r,h,j)}function $(r,i,h){return i===0&&h===r.length?p.fromByteArray(r):p.fromByteArray(r.slice(i,h))}function G(r,i,h){h=Math.min(r.length,h);for(var j=[],N=i;N<h;){var D,Y,X,rt,Z=r[N],W=null,at=Z>239?4:Z>223?3:Z>191?2:1;if(N+at<=h)switch(at){case 1:Z<128&&(W=Z);break;case 2:(192&(D=r[N+1]))==128&&(rt=(31&Z)<<6|63&D)>127&&(W=rt);break;case 3:D=r[N+1],Y=r[N+2],(192&D)==128&&(192&Y)==128&&(rt=(15&Z)<<12|(63&D)<<6|63&Y)>2047&&(rt<55296||rt>57343)&&(W=rt);break;case 4:D=r[N+1],Y=r[N+2],X=r[N+3],(192&D)==128&&(192&Y)==128&&(192&X)==128&&(rt=(15&Z)<<18|(63&D)<<12|(63&Y)<<6|63&X)>65535&&rt<1114112&&(W=rt)}W===null?(W=65533,at=1):W>65535&&(W-=65536,j.push(W>>>10&1023|55296),W=56320|1023&W),j.push(W),N+=at}return function(ut){var lt=ut.length;if(lt<=4096)return String.fromCharCode.apply(String,ut);for(var Pt="",Gt=0;Gt<lt;)Pt+=String.fromCharCode.apply(String,ut.slice(Gt,Gt+=4096));return Pt}(j)}d.Buffer=y,d.SlowBuffer=function(r){return+r!=r&&(r=0),y.alloc(+r)},d.INSPECT_MAX_BYTES=50,y.TYPED_ARRAY_SUPPORT=c.TYPED_ARRAY_SUPPORT!==void 0?c.TYPED_ARRAY_SUPPORT:function(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},r.foo()===42&&typeof r.subarray=="function"&&r.subarray(1,1).byteLength===0}catch{return!1}}(),d.kMaxLength=x(),y.poolSize=8192,y._augment=function(r){return r.__proto__=y.prototype,r},y.from=function(r,i,h){return M(null,r,i,h)},y.TYPED_ARRAY_SUPPORT&&(y.prototype.__proto__=Uint8Array.prototype,y.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&y[Symbol.species]===y&&Object.defineProperty(y,Symbol.species,{value:null,configurable:!0})),y.alloc=function(r,i,h){return function(j,N,D,Y){return P(N),N<=0?S(j,N):D!==void 0?typeof Y=="string"?S(j,N).fill(D,Y):S(j,N).fill(D):S(j,N)}(null,r,i,h)},y.allocUnsafe=function(r){return b(null,r)},y.allocUnsafeSlow=function(r){return b(null,r)},y.isBuffer=function(r){return!(r==null||!r._isBuffer)},y.compare=function(r,i){if(!y.isBuffer(r)||!y.isBuffer(i))throw new TypeError("Arguments must be Buffers");if(r===i)return 0;for(var h=r.length,j=i.length,N=0,D=Math.min(h,j);N<D;++N)if(r[N]!==i[N]){h=r[N],j=i[N];break}return h<j?-1:j<h?1:0},y.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(r,i){if(!_(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return y.alloc(0);var h;if(i===void 0)for(i=0,h=0;h<r.length;++h)i+=r[h].length;var j=y.allocUnsafe(i),N=0;for(h=0;h<r.length;++h){var D=r[h];if(!y.isBuffer(D))throw new TypeError('"list" argument must be an Array of Buffers');D.copy(j,N),N+=D.length}return j},y.byteLength=v,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<r;i+=2)O(this,i,i+1);return this},y.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<r;i+=4)O(this,i,i+3),O(this,i+1,i+2);return this},y.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<r;i+=8)O(this,i,i+7),O(this,i+1,i+6),O(this,i+2,i+5),O(this,i+3,i+4);return this},y.prototype.toString=function(){var r=0|this.length;return r===0?"":arguments.length===0?G(this,0,r):U.apply(this,arguments)},y.prototype.equals=function(r){if(!y.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||y.compare(this,r)===0},y.prototype.inspect=function(){var r="",i=d.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(r+=" ... ")),"<Buffer "+r+">"},y.prototype.compare=function(r,i,h,j,N){if(!y.isBuffer(r))throw new TypeError("Argument must be a Buffer");if(i===void 0&&(i=0),h===void 0&&(h=r?r.length:0),j===void 0&&(j=0),N===void 0&&(N=this.length),i<0||h>r.length||j<0||N>this.length)throw new RangeError("out of range index");if(j>=N&&i>=h)return 0;if(j>=N)return-1;if(i>=h)return 1;if(this===r)return 0;for(var D=(N>>>=0)-(j>>>=0),Y=(h>>>=0)-(i>>>=0),X=Math.min(D,Y),rt=this.slice(j,N),Z=r.slice(i,h),W=0;W<X;++W)if(rt[W]!==Z[W]){D=rt[W],Y=Z[W];break}return D<Y?-1:Y<D?1:0},y.prototype.includes=function(r,i,h){return this.indexOf(r,i,h)!==-1},y.prototype.indexOf=function(r,i,h){return q(this,r,i,h,!0)},y.prototype.lastIndexOf=function(r,i,h){return q(this,r,i,h,!1)},y.prototype.write=function(r,i,h,j){if(i===void 0)j="utf8",h=this.length,i=0;else if(h===void 0&&typeof i=="string")j=i,h=this.length,i=0;else{if(!isFinite(i))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");i|=0,isFinite(h)?(h|=0,j===void 0&&(j="utf8")):(j=h,h=void 0)}var N=this.length-i;if((h===void 0||h>N)&&(h=N),r.length>0&&(h<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");for(var D=!1;;)switch(j){case"hex":return e(this,r,i,h);case"utf8":case"utf-8":return l(this,r,i,h);case"ascii":return o(this,r,i,h);case"latin1":case"binary":return T(this,r,i,h);case"base64":return w(this,r,i,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,r,i,h);default:if(D)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),D=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(r,i,h){var j="";h=Math.min(r.length,h);for(var N=i;N<h;++N)j+=String.fromCharCode(127&r[N]);return j}function R(r,i,h){var j="";h=Math.min(r.length,h);for(var N=i;N<h;++N)j+=String.fromCharCode(r[N]);return j}function B(r,i,h){var j=r.length;(!i||i<0)&&(i=0),(!h||h<0||h>j)&&(h=j);for(var N="",D=i;D<h;++D)N+=Q(r[D]);return N}function n(r,i,h){for(var j=r.slice(i,h),N="",D=0;D<j.length;D+=2)N+=String.fromCharCode(j[D]+256*j[D+1]);return N}function s(r,i,h){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+i>h)throw new RangeError("Trying to access beyond buffer length")}function A(r,i,h,j,N,D){if(!y.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>N||i<D)throw new RangeError('"value" argument is out of bounds');if(h+j>r.length)throw new RangeError("Index out of range")}function k(r,i,h,j){i<0&&(i=65535+i+1);for(var N=0,D=Math.min(r.length-h,2);N<D;++N)r[h+N]=(i&255<<8*(j?N:1-N))>>>8*(j?N:1-N)}function F(r,i,h,j){i<0&&(i=4294967295+i+1);for(var N=0,D=Math.min(r.length-h,4);N<D;++N)r[h+N]=i>>>8*(j?N:3-N)&255}function H(r,i,h,j,N,D){if(h+j>r.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function J(r,i,h,j,N){return N||H(r,0,h,4),m.write(r,i,h,j,23,4),h+4}function z(r,i,h,j,N){return N||H(r,0,h,8),m.write(r,i,h,j,52,8),h+8}y.prototype.slice=function(r,i){var h,j=this.length;if((r=~~r)<0?(r+=j)<0&&(r=0):r>j&&(r=j),(i=i===void 0?j:~~i)<0?(i+=j)<0&&(i=0):i>j&&(i=j),i<r&&(i=r),y.TYPED_ARRAY_SUPPORT)(h=this.subarray(r,i)).__proto__=y.prototype;else{var N=i-r;h=new y(N,void 0);for(var D=0;D<N;++D)h[D]=this[D+r]}return h},y.prototype.readUIntLE=function(r,i,h){r|=0,i|=0,h||s(r,i,this.length);for(var j=this[r],N=1,D=0;++D<i&&(N*=256);)j+=this[r+D]*N;return j},y.prototype.readUIntBE=function(r,i,h){r|=0,i|=0,h||s(r,i,this.length);for(var j=this[r+--i],N=1;i>0&&(N*=256);)j+=this[r+--i]*N;return j},y.prototype.readUInt8=function(r,i){return i||s(r,1,this.length),this[r]},y.prototype.readUInt16LE=function(r,i){return i||s(r,2,this.length),this[r]|this[r+1]<<8},y.prototype.readUInt16BE=function(r,i){return i||s(r,2,this.length),this[r]<<8|this[r+1]},y.prototype.readUInt32LE=function(r,i){return i||s(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},y.prototype.readUInt32BE=function(r,i){return i||s(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},y.prototype.readIntLE=function(r,i,h){r|=0,i|=0,h||s(r,i,this.length);for(var j=this[r],N=1,D=0;++D<i&&(N*=256);)j+=this[r+D]*N;return j>=(N*=128)&&(j-=Math.pow(2,8*i)),j},y.prototype.readIntBE=function(r,i,h){r|=0,i|=0,h||s(r,i,this.length);for(var j=i,N=1,D=this[r+--j];j>0&&(N*=256);)D+=this[r+--j]*N;return D>=(N*=128)&&(D-=Math.pow(2,8*i)),D},y.prototype.readInt8=function(r,i){return i||s(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},y.prototype.readInt16LE=function(r,i){i||s(r,2,this.length);var h=this[r]|this[r+1]<<8;return 32768&h?4294901760|h:h},y.prototype.readInt16BE=function(r,i){i||s(r,2,this.length);var h=this[r+1]|this[r]<<8;return 32768&h?4294901760|h:h},y.prototype.readInt32LE=function(r,i){return i||s(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},y.prototype.readInt32BE=function(r,i){return i||s(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},y.prototype.readFloatLE=function(r,i){return i||s(r,4,this.length),m.read(this,r,!0,23,4)},y.prototype.readFloatBE=function(r,i){return i||s(r,4,this.length),m.read(this,r,!1,23,4)},y.prototype.readDoubleLE=function(r,i){return i||s(r,8,this.length),m.read(this,r,!0,52,8)},y.prototype.readDoubleBE=function(r,i){return i||s(r,8,this.length),m.read(this,r,!1,52,8)},y.prototype.writeUIntLE=function(r,i,h,j){r=+r,i|=0,h|=0,j||A(this,r,i,h,Math.pow(2,8*h)-1,0);var N=1,D=0;for(this[i]=255&r;++D<h&&(N*=256);)this[i+D]=r/N&255;return i+h},y.prototype.writeUIntBE=function(r,i,h,j){r=+r,i|=0,h|=0,j||A(this,r,i,h,Math.pow(2,8*h)-1,0);var N=h-1,D=1;for(this[i+N]=255&r;--N>=0&&(D*=256);)this[i+N]=r/D&255;return i+h},y.prototype.writeUInt8=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,1,255,0),y.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[i]=255&r,i+1},y.prototype.writeUInt16LE=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[i]=255&r,this[i+1]=r>>>8):k(this,r,i,!0),i+2},y.prototype.writeUInt16BE=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[i]=r>>>8,this[i+1]=255&r):k(this,r,i,!1),i+2},y.prototype.writeUInt32LE=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[i+3]=r>>>24,this[i+2]=r>>>16,this[i+1]=r>>>8,this[i]=255&r):F(this,r,i,!0),i+4},y.prototype.writeUInt32BE=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=255&r):F(this,r,i,!1),i+4},y.prototype.writeIntLE=function(r,i,h,j){if(r=+r,i|=0,!j){var N=Math.pow(2,8*h-1);A(this,r,i,h,N-1,-N)}var D=0,Y=1,X=0;for(this[i]=255&r;++D<h&&(Y*=256);)r<0&&X===0&&this[i+D-1]!==0&&(X=1),this[i+D]=(r/Y>>0)-X&255;return i+h},y.prototype.writeIntBE=function(r,i,h,j){if(r=+r,i|=0,!j){var N=Math.pow(2,8*h-1);A(this,r,i,h,N-1,-N)}var D=h-1,Y=1,X=0;for(this[i+D]=255&r;--D>=0&&(Y*=256);)r<0&&X===0&&this[i+D+1]!==0&&(X=1),this[i+D]=(r/Y>>0)-X&255;return i+h},y.prototype.writeInt8=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,1,127,-128),y.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[i]=255&r,i+1},y.prototype.writeInt16LE=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[i]=255&r,this[i+1]=r>>>8):k(this,r,i,!0),i+2},y.prototype.writeInt16BE=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[i]=r>>>8,this[i+1]=255&r):k(this,r,i,!1),i+2},y.prototype.writeInt32LE=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,4,2147483647,-2147483648),y.TYPED_ARRAY_SUPPORT?(this[i]=255&r,this[i+1]=r>>>8,this[i+2]=r>>>16,this[i+3]=r>>>24):F(this,r,i,!0),i+4},y.prototype.writeInt32BE=function(r,i,h){return r=+r,i|=0,h||A(this,r,i,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),y.TYPED_ARRAY_SUPPORT?(this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=255&r):F(this,r,i,!1),i+4},y.prototype.writeFloatLE=function(r,i,h){return J(this,r,i,!0,h)},y.prototype.writeFloatBE=function(r,i,h){return J(this,r,i,!1,h)},y.prototype.writeDoubleLE=function(r,i,h){return z(this,r,i,!0,h)},y.prototype.writeDoubleBE=function(r,i,h){return z(this,r,i,!1,h)},y.prototype.copy=function(r,i,h,j){if(h||(h=0),j||j===0||(j=this.length),i>=r.length&&(i=r.length),i||(i=0),j>0&&j<h&&(j=h),j===h||r.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("sourceStart out of bounds");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),r.length-i<j-h&&(j=r.length-i+h);var N,D=j-h;if(this===r&&h<i&&i<j)for(N=D-1;N>=0;--N)r[N+i]=this[N+h];else if(D<1e3||!y.TYPED_ARRAY_SUPPORT)for(N=0;N<D;++N)r[N+i]=this[N+h];else Uint8Array.prototype.set.call(r,this.subarray(h,h+D),i);return D},y.prototype.fill=function(r,i,h,j){if(typeof r=="string"){if(typeof i=="string"?(j=i,i=0,h=this.length):typeof h=="string"&&(j=h,h=this.length),r.length===1){var N=r.charCodeAt(0);N<256&&(r=N)}if(j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!y.isEncoding(j))throw new TypeError("Unknown encoding: "+j)}else typeof r=="number"&&(r&=255);if(i<0||this.length<i||this.length<h)throw new RangeError("Out of range index");if(h<=i)return this;var D;if(i>>>=0,h=h===void 0?this.length:h>>>0,r||(r=0),typeof r=="number")for(D=i;D<h;++D)this[D]=r;else{var Y=y.isBuffer(r)?r:nt(new y(r,j).toString()),X=Y.length;for(D=0;D<h-i;++D)this[D+i]=Y[D%X]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function Q(r){return r<16?"0"+r.toString(16):r.toString(16)}function nt(r,i){var h;i=i||1/0;for(var j=r.length,N=null,D=[],Y=0;Y<j;++Y){if((h=r.charCodeAt(Y))>55295&&h<57344){if(!N){if(h>56319){(i-=3)>-1&&D.push(239,191,189);continue}if(Y+1===j){(i-=3)>-1&&D.push(239,191,189);continue}N=h;continue}if(h<56320){(i-=3)>-1&&D.push(239,191,189),N=h;continue}h=65536+(N-55296<<10|h-56320)}else N&&(i-=3)>-1&&D.push(239,191,189);if(N=null,h<128){if((i-=1)<0)break;D.push(h)}else if(h<2048){if((i-=2)<0)break;D.push(h>>6|192,63&h|128)}else if(h<65536){if((i-=3)<0)break;D.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(h<1114112))throw new Error("Invalid code point");if((i-=4)<0)break;D.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return D}function et(r){return p.toByteArray(function(i){if((i=function(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}(i).replace(V,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}(r))}function K(r,i,h,j){for(var N=0;N<j&&!(N+h>=i.length||N>=r.length);++N)i[N+h]=r[N];return N}}).call(this,f(5))},function(u,d,f){d.byteLength=function(P){var b=y(P),g=b[0],E=b[1];return 3*(g+E)/4-E},d.toByteArray=function(P){var b,g,E=y(P),v=E[0],U=E[1],O=new m(function(e,l,o){return 3*(l+o)/4-o}(0,v,U)),q=0,C=U>0?v-4:v;for(g=0;g<C;g+=4)b=p[P.charCodeAt(g)]<<18|p[P.charCodeAt(g+1)]<<12|p[P.charCodeAt(g+2)]<<6|p[P.charCodeAt(g+3)],O[q++]=b>>16&255,O[q++]=b>>8&255,O[q++]=255&b;return U===2&&(b=p[P.charCodeAt(g)]<<2|p[P.charCodeAt(g+1)]>>4,O[q++]=255&b),U===1&&(b=p[P.charCodeAt(g)]<<10|p[P.charCodeAt(g+1)]<<4|p[P.charCodeAt(g+2)]>>2,O[q++]=b>>8&255,O[q++]=255&b),O},d.fromByteArray=function(P){for(var b,g=P.length,E=g%3,v=[],U=0,O=g-E;U<O;U+=16383)v.push(M(P,U,U+16383>O?O:U+16383));return E===1?(b=P[g-1],v.push(c[b>>2]+c[b<<4&63]+"==")):E===2&&(b=(P[g-2]<<8)+P[g-1],v.push(c[b>>10]+c[b>>4&63]+c[b<<2&63]+"=")),v.join("")};for(var c=[],p=[],m=typeof Uint8Array!="undefined"?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,S=_.length;x<S;++x)c[x]=_[x],p[_.charCodeAt(x)]=x;function y(P){var b=P.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=P.indexOf("=");return g===-1&&(g=b),[g,g===b?0:4-g%4]}function M(P,b,g){for(var E,v,U=[],O=b;O<g;O+=3)E=(P[O]<<16&16711680)+(P[O+1]<<8&65280)+(255&P[O+2]),U.push(c[(v=E)>>18&63]+c[v>>12&63]+c[v>>6&63]+c[63&v]);return U.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},function(u,d){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(f,c,p,m,_){var x,S,y=8*_-m-1,M=(1<<y)-1,P=M>>1,b=-7,g=p?_-1:0,E=p?-1:1,v=f[c+g];for(g+=E,x=v&(1<<-b)-1,v>>=-b,b+=y;b>0;x=256*x+f[c+g],g+=E,b-=8);for(S=x&(1<<-b)-1,x>>=-b,b+=m;b>0;S=256*S+f[c+g],g+=E,b-=8);if(x===0)x=1-P;else{if(x===M)return S?NaN:1/0*(v?-1:1);S+=Math.pow(2,m),x-=P}return(v?-1:1)*S*Math.pow(2,x-m)},d.write=function(f,c,p,m,_,x){var S,y,M,P=8*x-_-1,b=(1<<P)-1,g=b>>1,E=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=m?0:x-1,U=m?1:-1,O=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(y=isNaN(c)?1:0,S=b):(S=Math.floor(Math.log(c)/Math.LN2),c*(M=Math.pow(2,-S))<1&&(S--,M*=2),(c+=S+g>=1?E/M:E*Math.pow(2,1-g))*M>=2&&(S++,M/=2),S+g>=b?(y=0,S=b):S+g>=1?(y=(c*M-1)*Math.pow(2,_),S+=g):(y=c*Math.pow(2,g-1)*Math.pow(2,_),S=0));_>=8;f[p+v]=255&y,v+=U,y/=256,_-=8);for(S=S<<_|y,P+=_;P>0;f[p+v]=255&S,v+=U,S/=256,P-=8);f[p+v-U]|=128*O}},function(u,d){var f={}.toString;u.exports=Array.isArray||function(c){return f.call(c)=="[object Array]"}},function(u,d,f){var c,p,m;p=[],(m=typeof(c=function(){var _,x,S,y;Object.keys||(Object.keys=(_=Object.prototype.hasOwnProperty,x=!{toString:null}.propertyIsEnumerable("toString"),y=(S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(n){if(typeof n!="object"&&typeof n!="function"||n===null)throw new TypeError("Object.keys called on non-object");var s=[];for(var A in n)_.call(n,A)&&s.push(A);if(x)for(var k=0;k<y;k++)_.call(n,S[k])&&s.push(S[k]);return s})),Object.create||(Object.create=function(){function n(){}return function(s){if(arguments.length!==1)throw new Error("Object.create implementation only accepts one parameter.");return n.prototype=s,new n}}()),Array.isArray||(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(n){if(this===null)throw new TypeError;var s=Object(this),A=s.length>>>0;if(A===0)return-1;var k=0;if(arguments.length>1&&((k=Number(arguments[1]))!=k?k=0:k!==0&&k!==1/0&&k!==-1/0&&(k=(k>0||-1)*Math.floor(Math.abs(k)))),k>=A)return-1;for(var F=k>=0?k:Math.max(A-Math.abs(k),0);F<A;F++)if(F in s&&s[F]===n)return F;return-1}),Object.isFrozen||(Object.isFrozen=function(n){for(var s="tv4_test_frozen_key";n.hasOwnProperty(s);)s+=Math.random();try{return n[s]=!0,delete n[s],!1}catch{return!0}});var M={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},P={"*":!0};function b(n){return encodeURI(n).replace(/%25[0-9][0-9]/g,function(s){return"%"+s.substring(3)})}function g(n){var s="";M[n.charAt(0)]&&(s=n.charAt(0),n=n.substring(1));var A="",k="",F=!0,H=!1,J=!1;s==="+"?F=!1:s==="."?(k=".",A="."):s==="/"?(k="/",A="/"):s==="#"?(k="#",F=!1):s===";"?(k=";",A=";",H=!0,J=!0):s==="?"?(k="?",A="&",H=!0):s==="&"&&(k="&",A="&",H=!0);for(var z=[],V=n.split(","),Q=[],nt={},et=0;et<V.length;et++){var K=V[et],r=null;if(K.indexOf(":")!==-1){var i=K.split(":");K=i[0],r=parseInt(i[1],10)}for(var h={};P[K.charAt(K.length-1)];)h[K.charAt(K.length-1)]=!0,K=K.substring(0,K.length-1);var j={truncate:r,name:K,suffices:h};Q.push(j),nt[K]=j,z.push(K)}var N=function(D){for(var Y="",X=0,rt=0;rt<Q.length;rt++){var Z=Q[rt],W=D(Z.name);if(W==null||Array.isArray(W)&&W.length===0||typeof W=="object"&&Object.keys(W).length===0)X++;else if(Y+=rt===X?k:A||",",Array.isArray(W)){H&&(Y+=Z.name+"=");for(var at=0;at<W.length;at++)at>0&&(Y+=Z.suffices["*"]&&A||",",Z.suffices["*"]&&H&&(Y+=Z.name+"=")),Y+=F?encodeURIComponent(W[at]).replace(/!/g,"%21"):b(W[at])}else if(typeof W=="object"){H&&!Z.suffices["*"]&&(Y+=Z.name+"=");var ut=!0;for(var lt in W)ut||(Y+=Z.suffices["*"]&&A||","),ut=!1,Y+=F?encodeURIComponent(lt).replace(/!/g,"%21"):b(lt),Y+=Z.suffices["*"]?"=":",",Y+=F?encodeURIComponent(W[lt]).replace(/!/g,"%21"):b(W[lt])}else H&&(Y+=Z.name,J&&W===""||(Y+="=")),Z.truncate!=null&&(W=W.substring(0,Z.truncate)),Y+=F?encodeURIComponent(W).replace(/!/g,"%21"):b(W)}return Y};return N.varNames=z,{prefix:k,substitution:N}}function E(n){if(!(this instanceof E))return new E(n);for(var s=n.split("{"),A=[s.shift()],k=[],F=[],H=[];s.length>0;){var J=s.shift(),z=J.split("}")[0],V=J.substring(z.length+1),Q=g(z);F.push(Q.substitution),k.push(Q.prefix),A.push(V),H=H.concat(Q.substitution.varNames)}this.fill=function(nt){for(var et=A[0],K=0;K<F.length;K++)et+=(0,F[K])(nt),et+=A[K+1];return et},this.varNames=H,this.template=n}E.prototype={toString:function(){return this.template},fillFromObject:function(n){return this.fill(function(s){return n[s]})}};var v=function(n,s,A,k,F){if(this.missing=[],this.missingMap={},this.formatValidators=n?Object.create(n.formatValidators):{},this.schemas=n?Object.create(n.schemas):{},this.collectMultiple=s,this.errors=[],this.handleError=s?this.collectError:this.returnError,k&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),F&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=A||T("en"),typeof this.errorReporter=="string")throw new Error("debug");if(this.definedKeywords={},n)for(var H in n.definedKeywords)this.definedKeywords[H]=n.definedKeywords[H].slice(0)};function U(n,s){if(n===s)return!0;if(n&&s&&typeof n=="object"&&typeof s=="object"){if(Array.isArray(n)!==Array.isArray(s))return!1;if(Array.isArray(n)){if(n.length!==s.length)return!1;for(var A=0;A<n.length;A++)if(!U(n[A],s[A]))return!1}else{var k;for(k in n)if(s[k]===void 0&&n[k]!==void 0)return!1;for(k in s)if(n[k]===void 0&&s[k]!==void 0)return!1;for(k in n)if(!U(n[k],s[k]))return!1}return!0}return!1}v.prototype.defineKeyword=function(n,s){this.definedKeywords[n]=this.definedKeywords[n]||[],this.definedKeywords[n].push(s)},v.prototype.createError=function(n,s,A,k,F,H,J){var z=new L(n,s,A,k,F);return z.message=this.errorReporter(z,H,J),z},v.prototype.returnError=function(n){return n},v.prototype.collectError=function(n){return n&&this.errors.push(n),null},v.prototype.prefixErrors=function(n,s,A){for(var k=n;k<this.errors.length;k++)this.errors[k]=this.errors[k].prefixWith(s,A);return this},v.prototype.banUnknownProperties=function(n,s){for(var A in this.unknownPropertyPaths){var k=this.createError(w.UNKNOWN_PROPERTY,{path:A},A,"",null,n,s),F=this.handleError(k);if(F)return F}return null},v.prototype.addFormat=function(n,s){if(typeof n=="object"){for(var A in n)this.addFormat(A,n[A]);return this}this.formatValidators[n]=s},v.prototype.resolveRefs=function(n,s){if(n.$ref!==void 0){if((s=s||{})[n.$ref])return this.createError(w.CIRCULAR_REFERENCE,{urls:Object.keys(s).join(", ")},"","",null,void 0,n);s[n.$ref]=!0,n=this.getSchema(n.$ref,s)}return n},v.prototype.getSchema=function(n,s){var A;if(this.schemas[n]!==void 0)return A=this.schemas[n],this.resolveRefs(A,s);var k=n,F="";if(n.indexOf("#")!==-1&&(F=n.substring(n.indexOf("#")+1),k=n.substring(0,n.indexOf("#"))),typeof this.schemas[k]=="object"){A=this.schemas[k];var H=decodeURIComponent(F);if(H==="")return this.resolveRefs(A,s);if(H.charAt(0)!=="/")return;for(var J=H.split("/").slice(1),z=0;z<J.length;z++){var V=J[z].replace(/~1/g,"/").replace(/~0/g,"~");if(A[V]===void 0){A=void 0;break}A=A[V]}if(A!==void 0)return this.resolveRefs(A,s)}this.missing[k]===void 0&&(this.missing.push(k),this.missing[k]=k,this.missingMap[k]=k)},v.prototype.searchSchemas=function(n,s){if(Array.isArray(n))for(var A=0;A<n.length;A++)this.searchSchemas(n[A],s);else if(n&&typeof n=="object"){for(var k in typeof n.id=="string"&&function(H,J){if(J.substring(0,H.length)===H){var z=J.substring(H.length);if(J.length>0&&J.charAt(H.length-1)==="/"||z.charAt(0)==="#"||z.charAt(0)==="?")return!0}return!1}(s,n.id)&&this.schemas[n.id]===void 0&&(this.schemas[n.id]=n),n)if(k!=="enum"){if(typeof n[k]=="object")this.searchSchemas(n[k],s);else if(k==="$ref"){var F=l(n[k]);F&&this.schemas[F]===void 0&&this.missingMap[F]===void 0&&(this.missingMap[F]=F)}}}},v.prototype.addSchema=function(n,s){if(typeof n!="string"||s===void 0){if(typeof n!="object"||typeof n.id!="string")return;n=(s=n).id}n===l(n)+"#"&&(n=l(n)),this.schemas[n]=s,delete this.missingMap[n],o(s,n),this.searchSchemas(s,n)},v.prototype.getSchemaMap=function(){var n={};for(var s in this.schemas)n[s]=this.schemas[s];return n},v.prototype.getSchemaUris=function(n){var s=[];for(var A in this.schemas)n&&!n.test(A)||s.push(A);return s},v.prototype.getMissingUris=function(n){var s=[];for(var A in this.missingMap)n&&!n.test(A)||s.push(A);return s},v.prototype.dropSchemas=function(){this.schemas={},this.reset()},v.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},v.prototype.validateAll=function(n,s,A,k,F){var H;if(!(s=this.resolveRefs(s)))return null;if(s instanceof L)return this.errors.push(s),s;var J,z=this.errors.length,V=null,Q=null;if(this.checkRecursive&&n&&typeof n=="object"){if(H=!this.scanned.length,n[this.validatedSchemasKey]){var nt=n[this.validatedSchemasKey].indexOf(s);if(nt!==-1)return this.errors=this.errors.concat(n[this.validationErrorsKey][nt]),null}if(Object.isFrozen(n)&&(J=this.scannedFrozen.indexOf(n))!==-1){var et=this.scannedFrozenSchemas[J].indexOf(s);if(et!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[J][et]),null}if(this.scanned.push(n),Object.isFrozen(n))J===-1&&(J=this.scannedFrozen.length,this.scannedFrozen.push(n),this.scannedFrozenSchemas.push([])),V=this.scannedFrozenSchemas[J].length,this.scannedFrozenSchemas[J][V]=s,this.scannedFrozenValidationErrors[J][V]=[];else{if(!n[this.validatedSchemasKey])try{Object.defineProperty(n,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(n,this.validationErrorsKey,{value:[],configurable:!0})}catch{n[this.validatedSchemasKey]=[],n[this.validationErrorsKey]=[]}Q=n[this.validatedSchemasKey].length,n[this.validatedSchemasKey][Q]=s,n[this.validationErrorsKey][Q]=[]}}var K=this.errors.length,r=this.validateBasic(n,s,F)||this.validateNumeric(n,s,F)||this.validateString(n,s,F)||this.validateArray(n,s,F)||this.validateObject(n,s,F)||this.validateCombinations(n,s,F)||this.validateHypermedia(n,s,F)||this.validateFormat(n,s,F)||this.validateDefinedKeywords(n,s,F)||null;if(H){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(r||K!==this.errors.length)for(;A&&A.length||k&&k.length;){var i=A&&A.length?""+A.pop():null,h=k&&k.length?""+k.pop():null;r&&(r=r.prefixWith(i,h)),this.prefixErrors(K,i,h)}return V!==null?this.scannedFrozenValidationErrors[J][V]=this.errors.slice(z):Q!==null&&(n[this.validationErrorsKey][Q]=this.errors.slice(z)),this.handleError(r)},v.prototype.validateFormat=function(n,s){if(typeof s.format!="string"||!this.formatValidators[s.format])return null;var A=this.formatValidators[s.format].call(null,n,s);return typeof A=="string"||typeof A=="number"?this.createError(w.FORMAT_CUSTOM,{message:A},"","/format",null,n,s):A&&typeof A=="object"?this.createError(w.FORMAT_CUSTOM,{message:A.message||"?"},A.dataPath||"",A.schemaPath||"/format",null,n,s):null},v.prototype.validateDefinedKeywords=function(n,s,A){for(var k in this.definedKeywords)if(s[k]!==void 0)for(var F=this.definedKeywords[k],H=0;H<F.length;H++){var J=(0,F[H])(n,s[k],s,A);if(typeof J=="string"||typeof J=="number")return this.createError(w.KEYWORD_CUSTOM,{key:k,message:J},"","",null,n,s).prefixWith(null,k);if(J&&typeof J=="object"){var z=J.code;if(typeof z=="string"){if(!w[z])throw new Error("Undefined error code (use defineError): "+z);z=w[z]}else typeof z!="number"&&(z=w.KEYWORD_CUSTOM);var V=typeof J.message=="object"?J.message:{key:k,message:J.message||"?"},Q=J.schemaPath||"/"+k.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(z,V,J.dataPath||null,Q,null,n,s)}}return null},v.prototype.validateBasic=function(n,s,A){var k;return(k=this.validateType(n,s,A))||(k=this.validateEnum(n,s,A))?k.prefixWith(null,"type"):null},v.prototype.validateType=function(n,s){if(s.type===void 0)return null;var A=typeof n;n===null?A="null":Array.isArray(n)&&(A="array");var k=s.type;Array.isArray(k)||(k=[k]);for(var F=0;F<k.length;F++){var H=k[F];if(H===A||H==="integer"&&A==="number"&&n%1==0)return null}return this.createError(w.INVALID_TYPE,{type:A,expected:k.join("/")},"","",null,n,s)},v.prototype.validateEnum=function(n,s){if(s.enum===void 0)return null;for(var A=0;A<s.enum.length;A++)if(U(n,s.enum[A]))return null;return this.createError(w.ENUM_MISMATCH,{value:typeof JSON!="undefined"?JSON.stringify(n):n},"","",null,n,s)},v.prototype.validateNumeric=function(n,s,A){return this.validateMultipleOf(n,s,A)||this.validateMinMax(n,s,A)||this.validateNaN(n,s,A)||null};var O=Math.pow(2,-51),q=1-O;function C(n){var s=String(n).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return s?{href:s[0]||"",protocol:s[1]||"",authority:s[2]||"",host:s[3]||"",hostname:s[4]||"",port:s[5]||"",pathname:s[6]||"",search:s[7]||"",hash:s[8]||""}:null}function e(n,s){return s=C(s||""),n=C(n||""),s&&n?(s.protocol||n.protocol)+(s.protocol||s.authority?s.authority:n.authority)+(A=s.protocol||s.authority||s.pathname.charAt(0)==="/"?s.pathname:s.pathname?(n.authority&&!n.pathname?"/":"")+n.pathname.slice(0,n.pathname.lastIndexOf("/")+1)+s.pathname:n.pathname,k=[],A.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(F){F==="/.."?k.pop():k.push(F)}),k.join("").replace(/^\//,A.charAt(0)==="/"?"/":""))+(s.protocol||s.authority||s.pathname?s.search:s.search||n.search)+s.hash:null;var A,k}function l(n){return n.split("#")[0]}function o(n,s){if(n&&typeof n=="object")if(s===void 0?s=n.id:typeof n.id=="string"&&(s=e(s,n.id),n.id=s),Array.isArray(n))for(var A=0;A<n.length;A++)o(n[A],s);else for(var k in typeof n.$ref=="string"&&(n.$ref=e(s,n.$ref)),n)k!=="enum"&&o(n[k],s)}function T(n){var s=R[n=n||"en"];return function(A){var k=s[A.code]||G[A.code];if(typeof k!="string")return"Unknown error code "+A.code+": "+JSON.stringify(A.messageParams);var F=A.params;return k.replace(/\{([^{}]*)\}/g,function(H,J){var z=F[J];return typeof z=="string"||typeof z=="number"?z:H})}}v.prototype.validateMultipleOf=function(n,s){var A=s.multipleOf||s.divisibleBy;if(A===void 0)return null;if(typeof n=="number"){var k=n/A%1;if(k>=O&&k<q)return this.createError(w.NUMBER_MULTIPLE_OF,{value:n,multipleOf:A},"","",null,n,s)}return null},v.prototype.validateMinMax=function(n,s){if(typeof n!="number")return null;if(s.minimum!==void 0){if(n<s.minimum)return this.createError(w.NUMBER_MINIMUM,{value:n,minimum:s.minimum},"","/minimum",null,n,s);if(s.exclusiveMinimum&&n===s.minimum)return this.createError(w.NUMBER_MINIMUM_EXCLUSIVE,{value:n,minimum:s.minimum},"","/exclusiveMinimum",null,n,s)}if(s.maximum!==void 0){if(n>s.maximum)return this.createError(w.NUMBER_MAXIMUM,{value:n,maximum:s.maximum},"","/maximum",null,n,s);if(s.exclusiveMaximum&&n===s.maximum)return this.createError(w.NUMBER_MAXIMUM_EXCLUSIVE,{value:n,maximum:s.maximum},"","/exclusiveMaximum",null,n,s)}return null},v.prototype.validateNaN=function(n,s){return typeof n!="number"?null:isNaN(n)===!0||n===1/0||n===-1/0?this.createError(w.NUMBER_NOT_A_NUMBER,{value:n},"","/type",null,n,s):null},v.prototype.validateString=function(n,s,A){return this.validateStringLength(n,s,A)||this.validateStringPattern(n,s,A)||null},v.prototype.validateStringLength=function(n,s){return typeof n!="string"?null:s.minLength!==void 0&&n.length<s.minLength?this.createError(w.STRING_LENGTH_SHORT,{length:n.length,minimum:s.minLength},"","/minLength",null,n,s):s.maxLength!==void 0&&n.length>s.maxLength?this.createError(w.STRING_LENGTH_LONG,{length:n.length,maximum:s.maxLength},"","/maxLength",null,n,s):null},v.prototype.validateStringPattern=function(n,s){if(typeof n!="string"||typeof s.pattern!="string"&&!(s.pattern instanceof RegExp))return null;var A;if(s.pattern instanceof RegExp)A=s.pattern;else{var k,F="",H=s.pattern.match(/^\/(.+)\/([img]*)$/);H?(k=H[1],F=H[2]):k=s.pattern,A=new RegExp(k,F)}return A.test(n)?null:this.createError(w.STRING_PATTERN,{pattern:s.pattern},"","/pattern",null,n,s)},v.prototype.validateArray=function(n,s,A){return Array.isArray(n)&&(this.validateArrayLength(n,s,A)||this.validateArrayUniqueItems(n,s,A)||this.validateArrayItems(n,s,A))||null},v.prototype.validateArrayLength=function(n,s){var A;return s.minItems!==void 0&&n.length<s.minItems&&(A=this.createError(w.ARRAY_LENGTH_SHORT,{length:n.length,minimum:s.minItems},"","/minItems",null,n,s),this.handleError(A))||s.maxItems!==void 0&&n.length>s.maxItems&&(A=this.createError(w.ARRAY_LENGTH_LONG,{length:n.length,maximum:s.maxItems},"","/maxItems",null,n,s),this.handleError(A))?A:null},v.prototype.validateArrayUniqueItems=function(n,s){if(s.uniqueItems){for(var A=0;A<n.length;A++)for(var k=A+1;k<n.length;k++)if(U(n[A],n[k])){var F=this.createError(w.ARRAY_UNIQUE,{match1:A,match2:k},"","/uniqueItems",null,n,s);if(this.handleError(F))return F}}return null},v.prototype.validateArrayItems=function(n,s,A){if(s.items===void 0)return null;var k,F;if(Array.isArray(s.items)){for(F=0;F<n.length;F++)if(F<s.items.length){if(k=this.validateAll(n[F],s.items[F],[F],["items",F],A+"/"+F))return k}else if(s.additionalItems!==void 0){if(typeof s.additionalItems=="boolean"){if(!s.additionalItems&&(k=this.createError(w.ARRAY_ADDITIONAL_ITEMS,{},"/"+F,"/additionalItems",null,n,s),this.handleError(k)))return k}else if(k=this.validateAll(n[F],s.additionalItems,[F],["additionalItems"],A+"/"+F))return k}}else for(F=0;F<n.length;F++)if(k=this.validateAll(n[F],s.items,[F],["items"],A+"/"+F))return k;return null},v.prototype.validateObject=function(n,s,A){return typeof n!="object"||n===null||Array.isArray(n)?null:this.validateObjectMinMaxProperties(n,s,A)||this.validateObjectRequiredProperties(n,s,A)||this.validateObjectProperties(n,s,A)||this.validateObjectDependencies(n,s,A)||null},v.prototype.validateObjectMinMaxProperties=function(n,s){var A,k=Object.keys(n);return s.minProperties!==void 0&&k.length<s.minProperties&&(A=this.createError(w.OBJECT_PROPERTIES_MINIMUM,{propertyCount:k.length,minimum:s.minProperties},"","/minProperties",null,n,s),this.handleError(A))||s.maxProperties!==void 0&&k.length>s.maxProperties&&(A=this.createError(w.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:k.length,maximum:s.maxProperties},"","/maxProperties",null,n,s),this.handleError(A))?A:null},v.prototype.validateObjectRequiredProperties=function(n,s){if(s.required!==void 0)for(var A=0;A<s.required.length;A++){var k=s.required[A];if(n[k]===void 0){var F=this.createError(w.OBJECT_REQUIRED,{key:k},"","/required/"+A,null,n,s);if(this.handleError(F))return F}}return null},v.prototype.validateObjectProperties=function(n,s,A){var k;for(var F in n){var H=A+"/"+F.replace(/~/g,"~0").replace(/\//g,"~1"),J=!1;if(s.properties!==void 0&&s.properties[F]!==void 0&&(J=!0,k=this.validateAll(n[F],s.properties[F],[F],["properties",F],H)))return k;if(s.patternProperties!==void 0){for(var z in s.patternProperties)if(new RegExp(z).test(F)&&(J=!0,k=this.validateAll(n[F],s.patternProperties[z],[F],["patternProperties",z],H)))return k}if(J)this.trackUnknownProperties&&(this.knownPropertyPaths[H]=!0,delete this.unknownPropertyPaths[H]);else if(s.additionalProperties!==void 0){if(this.trackUnknownProperties&&(this.knownPropertyPaths[H]=!0,delete this.unknownPropertyPaths[H]),typeof s.additionalProperties=="boolean"){if(!s.additionalProperties&&(k=this.createError(w.OBJECT_ADDITIONAL_PROPERTIES,{key:F},"","/additionalProperties",null,n,s).prefixWith(F,null),this.handleError(k)))return k}else if(k=this.validateAll(n[F],s.additionalProperties,[F],["additionalProperties"],H))return k}else this.trackUnknownProperties&&!this.knownPropertyPaths[H]&&(this.unknownPropertyPaths[H]=!0)}return null},v.prototype.validateObjectDependencies=function(n,s,A){var k;if(s.dependencies!==void 0){for(var F in s.dependencies)if(n[F]!==void 0){var H=s.dependencies[F];if(typeof H=="string"){if(n[H]===void 0&&(k=this.createError(w.OBJECT_DEPENDENCY_KEY,{key:F,missing:H},"","",null,n,s).prefixWith(null,F).prefixWith(null,"dependencies"),this.handleError(k)))return k}else if(Array.isArray(H))for(var J=0;J<H.length;J++){var z=H[J];if(n[z]===void 0&&(k=this.createError(w.OBJECT_DEPENDENCY_KEY,{key:F,missing:z},"","/"+J,null,n,s).prefixWith(null,F).prefixWith(null,"dependencies"),this.handleError(k)))return k}else if(k=this.validateAll(n,H,[],["dependencies",F],A))return k}}return null},v.prototype.validateCombinations=function(n,s,A){return this.validateAllOf(n,s,A)||this.validateAnyOf(n,s,A)||this.validateOneOf(n,s,A)||this.validateNot(n,s,A)||null},v.prototype.validateAllOf=function(n,s,A){if(s.allOf===void 0)return null;for(var k,F=0;F<s.allOf.length;F++){var H=s.allOf[F];if(k=this.validateAll(n,H,[],["allOf",F],A))return k}return null},v.prototype.validateAnyOf=function(n,s,A){if(s.anyOf===void 0)return null;var k,F,H=[],J=this.errors.length;this.trackUnknownProperties&&(k=this.unknownPropertyPaths,F=this.knownPropertyPaths);for(var z=!0,V=0;V<s.anyOf.length;V++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var Q=s.anyOf[V],nt=this.errors.length,et=this.validateAll(n,Q,[],["anyOf",V],A);if(et===null&&nt===this.errors.length){if(this.errors=this.errors.slice(0,J),this.trackUnknownProperties){for(var K in this.knownPropertyPaths)F[K]=!0,delete k[K];for(var r in this.unknownPropertyPaths)F[r]||(k[r]=!0);z=!1;continue}return null}et&&H.push(et.prefixWith(null,""+V).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=k,this.knownPropertyPaths=F),z?(H=H.concat(this.errors.slice(J)),this.errors=this.errors.slice(0,J),this.createError(w.ANY_OF_MISSING,{},"","/anyOf",H,n,s)):void 0},v.prototype.validateOneOf=function(n,s,A){if(s.oneOf===void 0)return null;var k,F,H=null,J=[],z=this.errors.length;this.trackUnknownProperties&&(k=this.unknownPropertyPaths,F=this.knownPropertyPaths);for(var V=0;V<s.oneOf.length;V++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var Q=s.oneOf[V],nt=this.errors.length,et=this.validateAll(n,Q,[],["oneOf",V],A);if(et===null&&nt===this.errors.length){if(H!==null)return this.errors=this.errors.slice(0,z),this.createError(w.ONE_OF_MULTIPLE,{index1:H,index2:V},"","/oneOf",null,n,s);if(H=V,this.trackUnknownProperties){for(var K in this.knownPropertyPaths)F[K]=!0,delete k[K];for(var r in this.unknownPropertyPaths)F[r]||(k[r]=!0)}}else et&&J.push(et)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=k,this.knownPropertyPaths=F),H===null?(J=J.concat(this.errors.slice(z)),this.errors=this.errors.slice(0,z),this.createError(w.ONE_OF_MISSING,{},"","/oneOf",J,n,s)):(this.errors=this.errors.slice(0,z),null)},v.prototype.validateNot=function(n,s,A){if(s.not===void 0)return null;var k,F,H=this.errors.length;this.trackUnknownProperties&&(k=this.unknownPropertyPaths,F=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var J=this.validateAll(n,s.not,null,null,A),z=this.errors.slice(H);return this.errors=this.errors.slice(0,H),this.trackUnknownProperties&&(this.unknownPropertyPaths=k,this.knownPropertyPaths=F),J===null&&z.length===0?this.createError(w.NOT_PASSED,{},"","/not",null,n,s):null},v.prototype.validateHypermedia=function(n,s,A){if(!s.links)return null;for(var k,F=0;F<s.links.length;F++){var H=s.links[F];if(H.rel==="describedby"){for(var J=new E(H.href),z=!0,V=0;V<J.varNames.length;V++)if(!(J.varNames[V]in n)){z=!1;break}if(z){var Q={$ref:J.fillFromObject(n)};if(k=this.validateAll(n,Q,[],["links",F],A))return k}}}};var w={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},I={};for(var $ in w)I[w[$]]=$;var G={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function L(n,s,A,k,F){if(Error.call(this),n===void 0)throw new Error("No error code supplied: "+k);this.message="",this.params=s,this.code=n,this.dataPath=A||"",this.schemaPath=k||"",this.subErrors=F||null;var H=new Error(this.message);if(this.stack=H.stack||H.stacktrace,!this.stack)try{throw H}catch(J){this.stack=J.stack||J.stacktrace}}L.prototype=Object.create(Error.prototype),L.prototype.constructor=L,L.prototype.name="ValidationError",L.prototype.prefixWith=function(n,s){if(n!==null&&(n=n.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+n+this.dataPath),s!==null&&(s=s.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+s+this.schemaPath),this.subErrors!==null)for(var A=0;A<this.subErrors.length;A++)this.subErrors[A].prefixWith(n,s);return this};var R={},B=function n(s){var A,k,F=new v,H={setErrorReporter:function(J){return typeof J=="string"?this.language(J):(k=J,!0)},addFormat:function(){F.addFormat.apply(F,arguments)},language:function(J){return J?(R[J]||(J=J.split("-")[0]),!!R[J]&&(A=J,J)):A},addLanguage:function(J,z){var V;for(V in w)z[V]&&!z[w[V]]&&(z[w[V]]=z[V]);var Q=J.split("-")[0];if(R[Q])for(V in R[J]=Object.create(R[Q]),z)R[Q][V]===void 0&&(R[Q][V]=z[V]),R[J][V]=z[V];else R[J]=z,R[Q]=z;return this},freshApi:function(J){var z=n();return J&&z.language(J),z},validate:function(J,z,V,Q){var nt=T(A),et=new v(F,!1,k?function(r,i,h){return k(r,i,h)||nt(r,i,h)}:nt,V,Q);typeof z=="string"&&(z={$ref:z}),et.addSchema("",z);var K=et.validateAll(J,z,null,null,"");return!K&&Q&&(K=et.banUnknownProperties(J,z)),this.error=K,this.missing=et.missing,this.valid=K===null,this.valid},validateResult:function(){var J={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(J,arguments),J},validateMultiple:function(J,z,V,Q){var nt=T(A),et=new v(F,!0,k?function(r,i,h){return k(r,i,h)||nt(r,i,h)}:nt,V,Q);typeof z=="string"&&(z={$ref:z}),et.addSchema("",z),et.validateAll(J,z,null,null,""),Q&&et.banUnknownProperties(J,z);var K={toString:function(){return this.valid?"valid":this.error.message}};return K.errors=et.errors,K.missing=et.missing,K.valid=K.errors.length===0,K},addSchema:function(){return F.addSchema.apply(F,arguments)},getSchema:function(){return F.getSchema.apply(F,arguments)},getSchemaMap:function(){return F.getSchemaMap.apply(F,arguments)},getSchemaUris:function(){return F.getSchemaUris.apply(F,arguments)},getMissingUris:function(){return F.getMissingUris.apply(F,arguments)},dropSchemas:function(){F.dropSchemas.apply(F,arguments)},defineKeyword:function(){F.defineKeyword.apply(F,arguments)},defineError:function(J,z,V){if(typeof J!="string"||!/^[A-Z]+(_[A-Z]+)*$/.test(J))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if(typeof z!="number"||z%1!=0||z<1e4)throw new Error("Code number must be an integer > 10000");if(w[J]!==void 0)throw new Error("Error already defined: "+J+" as "+w[J]);if(I[z]!==void 0)throw new Error("Error code already used: "+I[z]+" as "+z);for(var Q in w[J]=z,I[z]=J,G[J]=G[z]=V,R){var nt=R[Q];nt[J]&&(nt[z]=nt[z]||nt[J])}},reset:function(){F.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:o,resolveUrl:e,getDocumentUri:l,errorCodes:w};return H.language(s||"en"),H}();return B.addLanguage("en-gb",G),B.tv4=B,B})=="function"?c.apply(d,p):c)===void 0||(u.exports=m)},function(u,d,f){Object.defineProperty(d,"__esModule",{value:!0}),d.BaseClientTypes=void 0;class c{constructor(){this.uris={},this.schemas={},this.aliases={}}declare(_,x,S,y){const M=_+"/"+x;if(y.extends){const P=y.extends.split("/"),b=P.length===1?_+"/"+P.shift():P.join("/"),g=this.uris[b];if(!g)throw"Type '"+M+"' tries to extend unknown schema '"+b+"'";y.extends=this.schemas[g]}this.uris[M]=S,this.aliases[S]=M,this.schemas[S]=y}resolveAlias(_){return this.uris[_]}getSchema(_){return this.schemas[_]}inScope(_){const x=_.length,S={};for(const y in this.uris)if(y.substr(0,x+1)===_+"/"){const M=this.uris[y];S[M]=this.schemas[M]}return S}}d.BaseClientTypes=c;const p=new c;d.default=p},function(u,d,f){class c extends Error{constructor(m){super();const _=new Error("Schema not found: "+m);return _.name="SchemaNotFound",_}}u.exports=c},function(u,d,f){u.exports=class{constructor(c){this._itemsRev={},this._storage={},this._canPropagate=!1,this.defaultValue=c,this.activatePropagation()}get(c){c=c.toLowerCase();let p=this._storage[c];return p===void 0&&(p=this.defaultValue,this._storage[c]=p),p}set(c,p){return c=c.toLowerCase(),this._storage[c]===p||(this._storage[c]=p,p||delete this._itemsRev[c],this._updateParentFolderItemRev(c,p),this._canPropagate&&this._propagate(c)),p}delete(c){return this.set(c,null)}deactivatePropagation(){return this._canPropagate=!1,!0}activatePropagation(){return this._canPropagate||(this._generateFolderRev("/"),this._canPropagate=!0),!0}_hashCode(c){let p=0;if(c.length===0)return p;for(let m=0;m<c.length;m++)p=(p<<5)-p+c.charCodeAt(m),p|=0;return p}_generateHash(c){const p=c.sort().join("|");return""+this._hashCode(p)}_updateParentFolderItemRev(c,p){if(c!=="/"){const m=this._getParentFolder(c);this._itemsRev[m]||(this._itemsRev[m]={});const _=this._itemsRev[m];p?_[c]=p:delete _[c],this._updateParentFolderItemRev(m,this.defaultValue)}}_getParentFolder(c){return c.substr(0,c.lastIndexOf("/",c.length-2)+1)}_propagate(c){if(c!=="/"){const p=this._getParentFolder(c),m=this._itemsRev[p],_=[];for(const S in m)_.push(m[S]);const x=this._generateHash(_);this.set(p,x)}}_generateFolderRev(c){const p=this._itemsRev[c];let m=this.defaultValue;if(p){const _=[];for(const x in p){let S;S=x.substr(-1)==="/"?this._generateFolderRev(x):p[x],_.push(S)}_.length>0&&(m=this._generateHash(_))}return this.set(c,m),m}}},function(u,d,f){var c;/*!
 * webfinger.js
 *   version 2.7.0
 *   http://github.com/silverbucket/webfinger.js
 *
 * Developed and Maintained by:
 *   Nick Jennings <nick@silverbucket.net> 2012
 *
 * webfinger.js is released under the AGPL (see LICENSE).
 *
 * You don't have to do anything special to choose one license or the other and you don't
 * have to notify anyone which license you are using.
 * Please see the corresponding license file for details of these licenses.
 * You are free to use, modify and distribute this software, but all copyright
 * information must remain.
 *
 */typeof fetch!="function"&&typeof XMLHttpRequest!="function"&&(XMLHttpRequest=f(28)),function(p){var m={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage","http://tools.ietf.org/id/draft-dejong-remotestorage":"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},_={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camlistore:[]},x=["webfinger","host-meta","host-meta.json"];function S(M){return M.toString=function(){return this.message},M}function y(M){typeof M!="object"&&(M={}),this.config={tls_only:M.tls_only===void 0||M.tls_only,webfist_fallback:M.webfist_fallback!==void 0&&M.webfist_fallback,uri_fallback:M.uri_fallback!==void 0&&M.uri_fallback,request_timeout:M.request_timeout!==void 0?M.request_timeout:1e4}}y.prototype.__fetchJRD=function(M,P,b){if(typeof fetch=="function")return this.__fetchJRD_fetch(M,P,b);if(typeof XMLHttpRequest=="function")return this.__fetchJRD_XHR(M,P,b);throw new Error("add a polyfill for fetch or XMLHttpRequest")},y.prototype.__fetchJRD_fetch=function(M,P,b){var g,E=this;typeof AbortController=="function"&&(g=new AbortController);var v=fetch(M,{headers:{Accept:"application/jrd+json, application/json"},signal:g?g.signal:void 0}).then(function(O){if(O.ok)return O.text();throw O.status===404?S({message:"resource not found",url:M,status:O.status}):S({message:"error during request",url:M,status:O.status})},function(O){throw S({message:"error during request",url:M,status:void 0,err:O})}).then(function(O){if(E.__isValidJSON(O))return O;throw S({message:"invalid json",url:M,status:void 0})}),U=new Promise(function(O,q){setTimeout(function(){q(S({message:"request timed out",url:M,status:void 0})),g&&g.abort()},E.config.request_timeout)});Promise.race([v,U]).then(function(O){b(O)}).catch(function(O){P(O)})},y.prototype.__fetchJRD_XHR=function(M,P,b){var g=this,E=!1,v=new XMLHttpRequest;function U(){if(!E){if(E=!0,v.status===200)return g.__isValidJSON(v.responseText)?b(v.responseText):P(S({message:"invalid json",url:M,status:v.status}));if(v.status===404)return P(S({message:"resource not found",url:M,status:v.status}));if(v.status>=301&&v.status<=302){var q=v.getResponseHeader("Location");return function(C){return typeof C=="string"&&C.split("://")[0]==="https"}(q)?O():P(S({message:"no redirect URL found",url:M,status:v.status}))}return P(S({message:"error during request",url:M,status:v.status}))}}function O(){v.onreadystatechange=function(){v.readyState===4&&U()},v.onload=function(){U()},v.ontimeout=function(){return P(S({message:"request timed out",url:M,status:v.status}))},v.open("GET",M,!0),v.timeout=g.config.request_timeout,v.setRequestHeader("Accept","application/jrd+json, application/json"),v.send()}return O()},y.prototype.__isValidJSON=function(M){try{JSON.parse(M)}catch{return!1}return!0},y.prototype.__isLocalhost=function(M){return/^localhost(\.localdomain)?(\:[0-9]+)?$/.test(M)},y.prototype.__processJRD=function(M,P,b,g){var E=JSON.parse(P);if(typeof E!="object"||typeof E.links!="object")return E.error!==void 0?b(S({message:E.error,request:M})):b(S({message:"unknown response from server",request:M}));var v=E.links;Array.isArray(v)||(v=[]);var U={object:E,json:P,idx:{}};U.idx.properties={name:void 0},U.idx.links=JSON.parse(JSON.stringify(_)),v.map(function(C,e){if(m.hasOwnProperty(C.rel)&&U.idx.links[m[C.rel]]){var l={};Object.keys(C).map(function(o,T){l[o]=C[o]}),U.idx.links[m[C.rel]].push(l)}});var O=JSON.parse(P).properties;for(var q in O)O.hasOwnProperty(q)&&q==="http://packetizer.com/ns/name"&&(U.idx.properties.name=O[q]);return g(U)},y.prototype.lookup=function(M,P){if(typeof M!="string")throw new Error("first parameter must be a user address");if(typeof P!="function")throw new Error("second parameter must be a callback");var b=this,g="";g=M.indexOf("://")>-1?M.replace(/ /g,"").split("/")[2]:M.replace(/ /g,"").split("@")[1];var E=0,v="https";function U(){var C="";return M.split("://")[1]||(C="acct:"),v+"://"+g+"/.well-known/"+x[E]+"?resource="+C+M}function O(C){if(b.config.uri_fallback&&g!=="webfist.org"&&E!==x.length-1)return E+=1,q();if(!b.config.tls_only&&v==="https")return E=0,v="http",q();if(!b.config.webfist_fallback||g==="webfist.org")return P(C);E=0,v="http",g="webfist.org";var e=U();b.__fetchJRD(e,P,function(l){b.__processJRD(e,l,P,function(o){typeof o.idx.links.webfist=="object"&&typeof o.idx.links.webfist[0].href=="string"&&b.__fetchJRD(o.idx.links.webfist[0].href,P,function(T){b.__processJRD(e,T,P,function(w){return P(null,P)})})})})}function q(){var C=U();b.__fetchJRD(C,O,function(e){b.__processJRD(C,e,P,function(l){P(null,l)})})}return b.__isLocalhost(g)&&(v="http"),setTimeout(q,0)},y.prototype.lookupLink=function(M,P,b){if(!_.hasOwnProperty(P))return b("unsupported rel "+P);this.lookup(M,function(g,E){var v=E.idx.links[P];return g?b(g):v.length===0?b('no links found with rel="'+P+'"'):b(null,v[0])})},(c=function(){return y}.apply(d,[]))===void 0||(u.exports=c)}()},function(u,d){u.exports=XMLHttpRequest},function(u,d,f){var c=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};const p=c(f(3)),m=c(f(16)),_=c(f(1)),x=f(0),S=c(f(30)),y=c(f(11)),M=c(f(6)),P=c(f(15)),b=c(f(7)),g=c(f(13)),E=c(f(14)),v=c(f(8)),U=c(f(31)),O=c(f(12)),q=c(f(32)),C=c(f(33)),e=c(f(34)),l={features:[],featuresDone:0,readyFired:!1,loadFeatures(){this.features=[],this.featuresDone=0,this.readyFired=!1,this.featureModules={WireClient:v.default,Dropbox:E.default,GoogleDrive:g.default,Access:y.default,Discover:P.default,Authorize:M.default,BaseClient:b.default,Env:m.default},p.default.cache&&x.extend(this.featureModules,{Caching:O.default,IndexedDB:q.default,LocalStorage:C.default,InMemoryStorage:e.default,Sync:U.default}),p.default.disableFeatures.forEach(o=>{this.featureModules[o]&&delete this.featureModules[o]}),this._allLoaded=!1;for(const o in this.featureModules)this.loadFeature(o)},hasFeature(o){for(let T=this.features.length-1;T>=0;T--)if(this.features[T].name===o)return this.features[T].supported;return!1},loadFeature(o){const T=this.featureModules[o],w=!T._rs_supported||T._rs_supported();_.default(`[RemoteStorage] [FEATURE ${o}] initializing ...`),typeof w=="object"?w.then(()=>{this.featureSupported(o,!0),this.initFeature(o)},()=>{this.featureSupported(o,!1)}):typeof w=="boolean"?(this.featureSupported(o,w),w&&this.initFeature(o)):this.featureSupported(o,!1)},initFeature(o){const T=this.featureModules[o];let w;try{w=T._rs_init(this)}catch(I){return void this.featureFailed(o,I)}typeof w=="object"&&typeof w.then=="function"?w.then(()=>{this.featureInitialized(o)},I=>{this.featureFailed(o,I)}):this.featureInitialized(o)},featureFailed(o,T){_.default(`[RemoteStorage] [FEATURE ${o}] initialization failed (${T})`),this.featureDone()},featureSupported(o,T){_.default(`[RemoteStorage] [FEATURE ${o}]${T?"":"not "} supported`),T||this.featureDone()},featureInitialized(o){_.default(`[RemoteStorage] [FEATURE ${o}] initialized`),this.features.push({name:o,init:this.featureModules[o]._rs_init,supported:!0,cleanup:this.featureModules[o]._rs_cleanup}),this.featureDone()},featureDone(){this.featuresDone++,this.featuresDone===Object.keys(this.featureModules).length&&setTimeout(this.featuresLoaded.bind(this),0)},_setCachingModule(){["IndexedDB","LocalStorage","InMemoryStorage"].some(o=>{if(this.features.some(T=>T.name===o))return this.features.local=this.featureModules[o],!0})},_fireReady(){try{this.readyFired||(this._emit("ready"),this.readyFired=!0)}catch(o){console.error("'ready' failed: ",o,o.stack),this._emit("error",o)}},featuresLoaded(){_.default("[RemoteStorage] All features loaded"),this._setCachingModule(),this.local=p.default.cache&&this.features.local&&new this.features.local,this.local&&this.remote?(this._setGPD(S.default,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",()=>{this._fireReady(),this._emit("connected")}),this.remote.on("not-connected",()=>{this._fireReady(),this._emit("not-connected")}),this.remote.connected&&(this._fireReady(),this._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(o){x.logError(o),this._emit("error",o)}this._processPending()},_collectCleanupFunctions(){this._cleanups=[];for(let o=0;o<this.features.length;o++){const T=this.features[o].cleanup;typeof T=="function"&&this._cleanups.push(T)}}};u.exports=l},function(u,d,f){var c=this&&this.__awaiter||function(x,S,y,M){return new(y||(y=Promise))(function(P,b){function g(U){try{v(M.next(U))}catch(O){b(O)}}function E(U){try{v(M.throw(U))}catch(O){b(O)}}function v(U){var O;U.done?P(U.value):(O=U.value,O instanceof y?O:new y(function(q){q(O)})).then(g,E)}v((M=M.apply(x,S||[])).next())})};const p=(this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}})(f(1));function m(x){return this.backend==="dropbox"&&!!x.match(/^\/public\/.*[^\/]$/)}const _={get:function(x,S){if(this.local){if(S===void 0)S=typeof(y=this).remote=="object"&&y.remote.connected&&y.remote.online?2*y.getSyncInterval():(p.default("Not setting default maxAge, because remote is offline or not connected"),!1);else if(typeof S!="number"&&S!==!1)return Promise.reject("Argument 'maxAge' must be 'false' or a number");return this.local.get(x,S,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(x);var y},put:function(x,S,y){return m.bind(this)(x)?_._wrapBusyDone.call(this,this.remote.put(x,S,y)):this.local?this.local.put(x,S,y):_._wrapBusyDone.call(this,this.remote.put(x,S,y))},delete:function(x){return this.local?this.local.delete(x):_._wrapBusyDone.call(this,this.remote.delete(x))},_wrapBusyDone:function(x){return c(this,void 0,void 0,function*(){return this._emit("wire-busy"),x.then(S=>(this._emit("wire-done",{success:!0}),Promise.resolve(S)),S=>(this._emit("wire-done",{success:!1}),Promise.reject(S)))})}};u.exports=_},function(u,d,f){var c=this&&this.__awaiter||function(C,e,l,o){return new(l||(l=Promise))(function(T,w){function I(L){try{G(o.next(L))}catch(R){w(R)}}function $(L){try{G(o.throw(L))}catch(R){w(R)}}function G(L){var R;L.done?T(L.value):(R=L.value,R instanceof l?R:new l(function(B){B(R)})).then(I,$)}G((o=o.apply(C,e||[])).next())})},p=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};const m=p(f(3)),_=p(f(16)),x=p(f(2)),S=p(f(1)),y=p(f(6)),M=p(f(9)),P=p(f(4)),b=f(0);let g,E;function v(C,e,l){return{action:C,path:e,promise:l}}function U(C,e){return C.common.revision!==e&&(!C.remote||C.remote.revision!==e)}function O(C){return C.common&&C.common.revision}class q{constructor(e){this.rs=e,this._tasks={},this._running={},this._timeStarted={},this.numThreads=10,this.rs.local.onDiff(l=>{this.addTask(l),this.doTasks()}),this.rs.caching.onActivate(l=>{this.addTask(l),this.doTasks()}),this.addEvents(["done","req-done"])}now(){return new Date().getTime()}queueGetRequest(e){return new Promise((l,o)=>{this.rs.remote.connected?this.rs.remote.online?(this.addTask(e,function(){this.rs.local.get(e).then(T=>l(T))}.bind(this)),this.doTasks()):o("cannot fulfill maxAge requirement - remote is not online"):o("cannot fulfill maxAge requirement - remote is not connected")})}corruptServerItemsMap(e,l){if(typeof e!="object"||Array.isArray(e))return!0;for(const o in e){const T=e[o];if(typeof T!="object"||typeof T.ETag!="string")return!0;if(b.isFolder(o)){if(o.substring(0,o.length-1).indexOf("/")!==-1)return!0}else if(o.indexOf("/")!==-1||l&&(typeof T["Content-Type"]!="string"||typeof T["Content-Length"]!="number"))return!0}return!1}corruptItemsMap(e){if(typeof e!="object"||Array.isArray(e))return!0;for(const l in e)if(typeof e[l]!="boolean")return!0;return!1}corruptRevision(e){return typeof e!="object"||Array.isArray(e)||e.revision&&typeof e.revision!="string"||e.body&&typeof e.body!="string"&&typeof e.body!="object"||e.contentType&&typeof e.contentType!="string"||e.contentLength&&typeof e.contentLength!="number"||e.timestamp&&typeof e.timestamp!="number"||e.itemsMap&&this.corruptItemsMap(e.itemsMap)}isCorrupt(e){return typeof e!="object"||Array.isArray(e)||typeof e.path!="string"||this.corruptRevision(e.common)||e.local&&this.corruptRevision(e.local)||e.remote&&this.corruptRevision(e.remote)||e.push&&this.corruptRevision(e.push)}hasTasks(){return Object.getOwnPropertyNames(this._tasks).length>0}collectDiffTasks(){return c(this,void 0,void 0,function*(){let e=0;return this.rs.local.forAllNodes(l=>{e>100||(this.isCorrupt(l)?(S.default("[Sync] WARNING: corrupt node in local cache",l),typeof l=="object"&&l.path&&(this.addTask(l.path),e++)):(this.needsFetch(l)&&this.rs.access.checkPathPermission(l.path,"r")||b.isDocument(l.path)&&this.needsPush(l)&&this.rs.access.checkPathPermission(l.path,"rw"))&&(this.addTask(l.path),e++))}).then(()=>e).catch(l=>{throw l})})}inConflict(e){return e.local&&e.remote&&(e.remote.body!==void 0||e.remote.itemsMap)}needsRefresh(e){return!!e.common&&(!e.common.timestamp||this.now()-e.common.timestamp>m.default.syncInterval)}needsFetch(e){return!!this.inConflict(e)||!(!e.common||e.common.itemsMap!==void 0||e.common.body!==void 0)||!(!e.remote||e.remote.itemsMap!==void 0||e.remote.body!==void 0)}needsPush(e){return!this.inConflict(e)&&(!(!e.local||e.push)||void 0)}needsRemotePut(e){return e.local&&e.local.body}needsRemoteDelete(e){return e.local&&e.local.body===!1}getParentPath(e){const l=e.match(/^(.*\/)([^\/]+\/?)$/);if(l)return l[1];throw new Error('Not a valid path: "'+e+'"')}deleteChildPathsFromTasks(){for(const e in this._tasks){const l=b.pathsFromRoot(e);for(let o=1;o<l.length;o++)this._tasks[l[o]]&&(Array.isArray(this._tasks[e])&&this._tasks[e].length&&Array.prototype.push.apply(this._tasks[l[o]],this._tasks[e]),delete this._tasks[e])}}collectRefreshTasks(){return c(this,void 0,void 0,function*(){return this.rs.local.forAllNodes(e=>{let l;if(this.needsRefresh(e)){try{l=this.getParentPath(e.path)}catch{}l&&this.rs.access.checkPathPermission(l,"r")?this.addTask(l):this.rs.access.checkPathPermission(e.path,"r")&&this.addTask(e.path)}}).then(()=>this.deleteChildPathsFromTasks()).catch(e=>{throw e})})}flush(e){for(const l in e)this.rs.caching.checkPath(l)==="FLUSH"&&e[l]&&!e[l].local&&(S.default("[Sync] Flushing",l),e[l]=void 0);return e}doTask(e){return this.rs.local.getNodes([e]).then(l=>{const o=l[e];return o===void 0||function(T){return T.remote&&T.remote.revision&&!T.remote.itemsMap&&!T.remote.body}(o)?v("get",e,this.rs.remote.get(e)):this.needsRemotePut(o)?(o.push=b.deepClone(o.local),o.push.timestamp=this.now(),this.rs.local.setNodes(this.flush(l)).then(()=>{let T;return T=O(o)?{ifMatch:o.common.revision}:{ifNoneMatch:"*"},v("put",e,this.rs.remote.put(e,o.push.body,o.push.contentType,T))})):this.needsRemoteDelete(o)?(o.push={body:!1,timestamp:this.now()},this.rs.local.setNodes(this.flush(l)).then(()=>O(o)?v("delete",e,this.rs.remote.delete(e,{ifMatch:o.common.revision})):v("get",e,this.rs.remote.get(e)))):O(o)?v("get",e,this.rs.remote.get(e,{ifNoneMatch:o.common.revision})):v("get",e,this.rs.remote.get(e))})}autoMergeFolder(e){if(e.remote.itemsMap&&(e.common=e.remote,delete e.remote,e.common.itemsMap)){for(const l in e.common.itemsMap)e.local.itemsMap[l]||(e.local.itemsMap[l]=!1);b.equal(e.local.itemsMap,e.common.itemsMap)&&delete e.local}return e}autoMergeDocument(e){return function(l){return(!l.remote||!l.remote.revision||l.remote.revision===l.common.revision)&&(l.common.body===void 0&&l.remote.body===!1||l.remote.body===l.common.body&&l.remote.contentType===l.common.contentType)}(e)?delete(e=function(l){return l.remote&&l.remote.body===!1&&l.local&&l.local.body===!1&&delete l.local,l}(e)).remote:e.remote.body!==void 0&&(S.default("[Sync] Emitting keep/revert"),this.rs.local._emitChange({origin:"conflict",path:e.path,oldValue:e.local.body,newValue:e.remote.body,lastCommonValue:e.common.body,oldContentType:e.local.contentType,newContentType:e.remote.contentType,lastCommonContentType:e.common.contentType}),e.remote.body?e.common=e.remote:e.common={},delete e.remote,delete e.local),e}autoMerge(e){if(e.remote){if(e.local)return b.isFolder(e.path)?this.autoMergeFolder(e):this.autoMergeDocument(e);if(b.isFolder(e.path))e.remote.itemsMap!==void 0&&(e.common=e.remote,delete e.remote);else if(e.remote.body!==void 0){const l={origin:"remote",path:e.path,oldValue:e.common.body===!1?void 0:e.common.body,newValue:e.remote.body===!1?void 0:e.remote.body,oldContentType:e.common.contentType,newContentType:e.remote.contentType};if((l.oldValue||l.newValue)&&this.rs.local._emitChange(l),!e.remote.body)return;e.common=e.remote,delete e.remote}return e}e.common.body&&this.rs.local._emitChange({origin:"remote",path:e.path,oldValue:e.common.body,newValue:void 0,oldContentType:e.common.contentType,newContentType:void 0})}updateCommonTimestamp(e,l){return c(this,void 0,void 0,function*(){return this.rs.local.getNodes([e]).then(o=>(o[e]&&o[e].common&&o[e].common.revision===l&&(o[e].common.timestamp=this.now()),this.rs.local.setNodes(this.flush(o))))})}markChildren(e,l,o,T){return c(this,void 0,void 0,function*(){const w=[],I={},$={};for(const G in l)w.push(e+G),I[e+G]=l[G];for(const G in T)w.push(e+G);return this.rs.local.getNodes(w).then(G=>{let L,R;for(const B in G)if(R=G[B],I[B])R&&R.common?U(R,I[B].ETag)&&(o[B]=b.deepClone(R),o[B].remote={revision:I[B].ETag,timestamp:this.now()},o[B]=this.autoMerge(o[B])):(L=this.rs.caching.checkPath(B),L==="ALL"&&(o[B]={path:B,common:{timestamp:this.now()},remote:{revision:I[B].ETag,timestamp:this.now()}})),o[B]&&I[B]["Content-Type"]&&(o[B].remote.contentType=I[B]["Content-Type"]),o[B]&&I[B]["Content-Length"]&&(o[B].remote.contentLength=I[B]["Content-Length"]);else if(T[B.substring(e.length)]&&R&&R.common){if(R.common.itemsMap)for(const n in R.common.itemsMap)$[B+n]=!0;if(R.local&&R.local.itemsMap)for(const n in R.local.itemsMap)$[B+n]=!0;if(R.remote||b.isFolder(B))o[B]=void 0;else if(o[B]=this.autoMerge(R),o[B]===void 0){const n=this.getParentPath(B),s=o[n],A=B.substring(e.length);s&&s.local&&(delete s.local.itemsMap[A],b.equal(s.local.itemsMap,s.common.itemsMap)&&delete s.local)}}return this.deleteRemoteTrees(Object.keys($),o).then(B=>this.rs.local.setNodes(this.flush(B)))})})}deleteRemoteTrees(e,l){return c(this,void 0,void 0,function*(){return e.length===0?Promise.resolve(l):this.rs.local.getNodes(e).then(o=>c(this,void 0,void 0,function*(){const T={};function w(I,$){if(I&&I.itemsMap)for(const G in I.itemsMap)T[$+G]=!0}for(const I in o){const $=o[I];$&&(b.isFolder(I)?(w($.common,I),w($.local,I)):$.common&&typeof $.common.body!==void 0&&(l[I]=b.deepClone($),l[I].remote={body:!1,timestamp:this.now()},l[I]=this.autoMerge(l[I])))}return this.deleteRemoteTrees(Object.keys(T),l).then(I=>this.rs.local.setNodes(this.flush(I)))}))})}completeFetch(e,l,o,T){return c(this,void 0,void 0,function*(){let w,I;const $=b.pathsFromRoot(e);return b.isFolder(e)?w=[e]:(I=$[1],w=[e,I]),this.rs.local.getNodes(w).then(G=>{let L,R,B=G[e];const n={};function s(A){if(A&&A.itemsMap)for(L in A.itemsMap)l[L]||(n[L]=!0)}if(typeof B=="object"&&B.path===e&&typeof B.common=="object"||(B={path:e,common:{}},G[e]=B),B.remote={revision:T,timestamp:this.now()},b.isFolder(e))for(L in s(B.common),s(B.remote),B.remote.itemsMap={},l)B.remote.itemsMap[L]=!0;else B.remote.body=l,B.remote.contentType=o,R=G[I],R&&R.local&&R.local.itemsMap&&(L=e.substring(I.length),R.local.itemsMap[L]=!0,b.equal(R.local.itemsMap,R.common.itemsMap)&&delete R.local);return G[e]=this.autoMerge(B),{toBeSaved:G,missingChildren:n}})})}completePush(e,l,o,T){return c(this,void 0,void 0,function*(){return this.rs.local.getNodes([e]).then(w=>{const I=w[e];if(!I.push)throw this.stopped=!0,new Error("completePush called but no push version!");return o?(S.default("[Sync] We have a conflict"),I.remote&&I.remote.revision===T||(I.remote={revision:T||"conflict",timestamp:this.now()},delete I.push),w[e]=this.autoMerge(I)):(I.common={revision:T,timestamp:this.now()},l==="put"?(I.common.body=I.push.body,I.common.contentType=I.push.contentType,b.equal(I.local.body,I.push.body)&&I.local.contentType===I.push.contentType&&delete I.local,delete I.push):l==="delete"&&(I.local.body===!1?w[e]=void 0:delete I.push)),this.rs.local.setNodes(this.flush(w))})})}dealWithFailure(e){return c(this,void 0,void 0,function*(){return this.rs.local.getNodes([e]).then(l=>{if(l[e])return delete l[e].push,this.rs.local.setNodes(this.flush(l))})})}interpretStatus(e){const l={statusCode:e,successful:void 0,conflict:void 0,unAuth:void 0,notFound:void 0,changed:void 0,networkProblems:void 0};if(typeof e=="string"&&(e==="offline"||e==="timeout"))return l.successful=!1,l.networkProblems=!0,l;if(typeof e=="number"){const o=Math.floor(e/100);return l.successful=o===2||e===304||e===412||e===404,l.conflict=e===412,l.unAuth=e===401&&this.rs.remote.token!==y.default.IMPLIED_FAKE_TOKEN||e===402||e===403,l.notFound=e===404,l.changed=e!==304,l}}handleGetResponse(e,l,o,T,w){return c(this,void 0,void 0,function*(){return l.notFound&&(o=!!b.isFolder(e)&&{}),l.changed?this.completeFetch(e,o,T,w).then(I=>b.isFolder(e)?this.corruptServerItemsMap(o)?(S.default("[Sync] WARNING: Discarding corrupt folder description from server for "+e),!1):this.markChildren(e,o,I.toBeSaved,I.missingChildren).then(()=>!0):this.rs.local.setNodes(this.flush(I.toBeSaved)).then(()=>!0)):this.updateCommonTimestamp(e,w).then(()=>!0)})}handleResponse(e,l,o){const T=this.interpretStatus(o.statusCode);if(T.successful){if(l==="get")return this.handleGetResponse(e,T,o.body,o.contentType,o.revision);if(l==="put"||l==="delete")return this.completePush(e,l,T.conflict,o.revision).then(function(){return!0});throw new Error("cannot handle response for unknown action "+l)}{let w;return w=T.unAuth?new P.default:T.networkProblems?new M.default("Network request failed."):new Error("HTTP response code "+T.statusCode+" received."),this.dealWithFailure(e).then(()=>{throw this.rs._emit("error",w),w})}}finishTask(e){if(e.action!==void 0)return e.promise.then(l=>this.handleResponse(e.path,e.action,l),l=>(S.default("[Sync] wireclient rejects its promise!",e.path,e.action,l),this.handleResponse(e.path,e.action,{statusCode:"offline"}))).then(l=>{if(delete this._timeStarted[e.path],delete this._running[e.path],l&&this._tasks[e.path]){for(let o=0;o<this._tasks[e.path].length;o++)this._tasks[e.path][o]();delete this._tasks[e.path]}this.rs._emit("sync-req-done"),this.collectTasks(!1).then(()=>{!this.hasTasks()||this.stopped?(S.default("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(this._tasks).length,this.stopped),this.done||(this.done=!0,this.rs._emit("sync-done"))):setTimeout(()=>{this.doTasks()},10)})},l=>{S.default("[Sync] Error",l),delete this._timeStarted[e.path],delete this._running[e.path],this.rs._emit("sync-req-done"),this.done||(this.done=!0,this.rs._emit("sync-done"))});delete this._running[e.path]}doTasks(){let e,l,o=0;e=this.rs.remote.connected?this.rs.remote.online?this.numThreads:1:0;const T=e-Object.getOwnPropertyNames(this._running).length;if(T<=0)return!0;for(l in this._tasks)if(!this._running[l]&&(this._timeStarted[l]=this.now(),this._running[l]=this.doTask(l),this._running[l].then(this.finishTask.bind(this)),o++,o>=T))return!0;return o>=T}collectTasks(e){return c(this,void 0,void 0,function*(){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(l=>l||e===!1?Promise.resolve():this.collectRefreshTasks(),function(l){throw l})})}addTask(e,l){this._tasks[e]||(this._tasks[e]=[]),typeof l=="function"&&this._tasks[e].push(l)}sync(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(()=>{try{this.doTasks()}catch(e){S.default("[Sync] doTasks error",e)}},function(e){throw S.default("[Sync] Sync error",e),new Error("Local cache unavailable")})}static _rs_init(e){g=function(){S.default("[Sync] syncCycleCb calling syncCycle");const l=new _.default;l.isBrowser()&&function(o,T){function w(I){const $=T.getCurrentSyncInterval();m.default.isBackground=!I;const G=T.getCurrentSyncInterval();T._emit("sync-interval-change",{oldValue:$,newValue:G})}o.on("background",()=>w(!1)),o.on("foreground",()=>w(!0))}(l,e),e.sync||(e.sync=new q(e),e.syncStopped&&(S.default("[Sync] Instantiating sync stopped"),e.sync.stopped=!0,delete e.syncStopped)),S.default("[Sync] syncCycleCb calling syncCycle"),e.syncCycle()},E=function(){e.removeEventListener("connected",E),e.startSync()},e.on("ready",g),e.on("connected",E)}static _rs_cleanup(e){e.stopSync(),e.removeEventListener("ready",g),e.removeEventListener("connected",E),e.sync=void 0,delete e.sync}}b.applyMixins(q,[x.default]),u.exports=q},function(u,d,f){(function(c){var p=this&&this.__awaiter||function(b,g,E,v){return new(E||(E=Promise))(function(U,O){function q(l){try{e(v.next(l))}catch(o){O(o)}}function C(l){try{e(v.throw(l))}catch(o){O(o)}}function e(l){var o;l.done?U(l.value):(o=l.value,o instanceof E?o:new E(function(T){T(o)})).then(q,C)}e((v=v.apply(b,g||[])).next())})},m=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};const _=m(f(2)),x=m(f(10)),S=m(f(1)),y=f(0);let M;class P extends x.default{constructor(g){super(),this.addEvents(["change","local-events-done"]),this.db=g||M,this.db?(this.getsRunning=0,this.putsRunning=0,this.changesQueued={},this.changesRunning={},this.commitSlownessWarning=null):S.default("[IndexedDB] Failed to open DB")}getNodes(g){return p(this,void 0,void 0,function*(){const E=[],v={};for(let U=0,O=g.length;U<O;U++)this.changesQueued[g[U]]!==void 0?v[g[U]]=y.deepClone(this.changesQueued[g[U]]||void 0):this.changesRunning[g[U]]!==void 0?v[g[U]]=y.deepClone(this.changesRunning[g[U]]||void 0):E.push(g[U]);return E.length>0?this.getNodesFromDb(E).then(function(U){for(const O in v)U[O]=v[O];return U}):Promise.resolve(v)})}setNodes(g){return p(this,void 0,void 0,function*(){for(const E in g)this.changesQueued[E]=g[E]||!1;return this.maybeFlush(),Promise.resolve()})}maybeFlush(){this.putsRunning===0?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=c.setInterval(function(){console.warn("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))}flushChangesQueued(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))}getNodesFromDb(g){return new Promise((E,v)=>{const U=this.db.transaction(["nodes"],"readonly"),O=U.objectStore("nodes"),q={};this.getsRunning++,g.map(C=>{O.get(C).onsuccess=e=>{q[C]=e.target.result}}),U.oncomplete=()=>{E(q),this.getsRunning--},U.onerror=U.onabort=()=>{v("get transaction error/abort"),this.getsRunning--}})}setNodesInDb(g){return p(this,void 0,void 0,function*(){return new Promise((E,v)=>{const U=this.db.transaction(["nodes"],"readwrite"),O=U.objectStore("nodes"),q=new Date().getTime();this.putsRunning++,S.default("[IndexedDB] Starting put",g,this.putsRunning);for(const C in g){const e=g[C];if(typeof e=="object")try{O.put(e)}catch(l){throw S.default("[IndexedDB] Error while putting",e,l),l}else try{O.delete(C)}catch(l){throw S.default("[IndexedDB] Error while removing",O,e,l),l}}U.oncomplete=()=>{this.putsRunning--,S.default("[IndexedDB] Finished put",g,this.putsRunning,new Date().getTime()-q+"ms"),E()},U.onerror=()=>{this.putsRunning--,v("transaction error")},U.onabort=()=>{v("transaction abort"),this.putsRunning--}})})}reset(g){const E=this.db.name;this.db.close(),P.clean(this.db.name,()=>{P.open(E,(v,U)=>{v?S.default("[IndexedDB] Error while resetting local storage",v):this.db=U,typeof g=="function"&&g(self)})})}forAllNodes(g){return p(this,void 0,void 0,function*(){return new Promise(E=>{this.db.transaction(["nodes"],"readonly").objectStore("nodes").openCursor().onsuccess=v=>{const U=v.target.result;U?(g(this.migrate(U.value)),U.continue()):E()}})})}closeDB(){this.putsRunning===0?this.db.close():setTimeout(this.closeDB.bind(this),100)}static open(g,E){const v=setTimeout(function(){E("timeout trying to open db")},1e4);try{const U=indexedDB.open(g,2);U.onerror=function(){S.default("[IndexedDB] Opening DB failed",U),clearTimeout(v),E(U.error)},U.onupgradeneeded=function(O){const q=U.result;S.default("[IndexedDB] Upgrade: from ",O.oldVersion," to ",O.newVersion),O.oldVersion!==1&&(S.default("[IndexedDB] Creating object store: nodes"),q.createObjectStore("nodes",{keyPath:"path"})),S.default("[IndexedDB] Creating object store: changes"),q.createObjectStore("changes",{keyPath:"path"})},U.onsuccess=function(){clearTimeout(v);const O=U.result;if(!O.objectStoreNames.contains("nodes")||!O.objectStoreNames.contains("changes"))return S.default("[IndexedDB] Missing object store. Resetting the database."),void P.clean(g,function(){P.open(g,E)});E(null,U.result)}}catch(U){S.default("[IndexedDB] Failed to open database: "+U),S.default("[IndexedDB] Resetting database and trying again."),clearTimeout(v),P.clean(g,function(){P.open(g,E)})}}static clean(g,E){const v=indexedDB.deleteDatabase(g);v.onsuccess=function(){S.default("[IndexedDB] Done removing DB"),E()},v.onerror=v.onabort=function(U){console.error('Failed to remove database "'+g+'"',U)}}static _rs_init(g){return new Promise((E,v)=>{P.open("remotestorage",function(U,O){U?v(U):(M=O,O.onerror=()=>{g._emit("error",U)},E())})})}static _rs_supported(){return new Promise((g,E)=>{const v=y.getGlobalContext();let U=!1;if(typeof navigator!="undefined"&&navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(U=!0)),"indexedDB"in v&&!U)try{const O=indexedDB.open("rs-check");O.onerror=function(){E()},O.onsuccess=function(){O.result.close(),indexedDB.deleteDatabase("rs-check"),g()}}catch{E()}else E()})}static _rs_cleanup(g){return new Promise(E=>{g.local&&g.local.closeDB(),P.clean("remotestorage",E)})}diffHandler(){}}y.applyMixins(P,[_.default]),u.exports=P}).call(this,f(5))},function(u,d,f){var c=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};const p=c(f(10)),m=c(f(2)),_=c(f(1)),x=f(0),S="remotestorage:cache:nodes:";function y(P){return P.substr(0,S.length)===S||P.substr(0,"remotestorage:cache:changes:".length)==="remotestorage:cache:changes:"}class M extends p.default{constructor(){super(),this.addEvents(["change","local-events-done"])}diffHandler(...b){}getNodes(b){const g={};for(let E=0,v=b.length;E<v;E++)try{g[b[E]]=JSON.parse(localStorage[S+b[E]])}catch{g[b[E]]=void 0}return Promise.resolve(g)}setNodes(b){for(const g in b)localStorage[S+g]=JSON.stringify(b[g]);return Promise.resolve()}forAllNodes(b){let g;for(let E=0,v=localStorage.length;E<v;E++)if(localStorage.key(E).substr(0,S.length)===S){try{g=this.migrate(JSON.parse(localStorage[localStorage.key(E)]))}catch{g=void 0}g&&b(g)}return Promise.resolve()}static _rs_init(){}static _rs_supported(){return x.localStorageAvailable()}static _rs_cleanup(){const b=[];for(let g=0,E=localStorage.length;g<E;g++){const v=localStorage.key(g);y(v)&&b.push(v)}b.forEach(g=>{_.default("[LocalStorage] Removing",g),delete localStorage[g]})}}x.applyMixins(M,[m.default]),u.exports=M},function(u,d,f){var c=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};const p=c(f(2)),m=c(f(10)),_=f(0);class x extends m.default{constructor(){super(),this._storage={},this.addEvents(["change","local-events-done"])}getNodes(y){const M={};for(let P=0,b=y.length;P<b;P++)M[y[P]]=this._storage[y[P]];return Promise.resolve(M)}setNodes(y){for(const M in y)y[M]===void 0?delete this._storage[M]:this._storage[M]=y[M];return Promise.resolve()}forAllNodes(y){for(const M in this._storage)y(this.migrate(this._storage[M]));return Promise.resolve()}diffHandler(){}static _rs_init(){}static _rs_supported(){return!0}static _rs_cleanup(){}}_.applyMixins(x,[p.default]),u.exports=x}])})})(ye);var Yr=Ye(ye.exports);function ve(a){let t,u;return{c(){t=yt("title"),u=It(a[0])},l(d){t=At(d,"title",{});var f=vt(t);u=pe(f,a[0]),f.forEach(ct)},m(d,f){Tt(d,t,f),zt(t,u)},p(d,f){f&1&&Ce(u,d[0])},d(d){d&&ct(t)}}}function Ve(a){let t,u,d,f=a[0]&&ve(a);const c=a[3].default,p=Pe(c,a,a[2],null);return{c(){t=yt("svg"),f&&f.c(),u=he(),p&&p.c(),this.h()},l(m){t=At(m,"svg",{xmlns:!0,viewBox:!0,class:!0});var _=vt(t);f&&f.l(_),u=he(),p&&p.l(_),_.forEach(ct),this.h()},h(){dt(t,"xmlns","http://www.w3.org/2000/svg"),dt(t,"viewBox",a[1]),dt(t,"class","svelte-c8tyih")},m(m,_){Tt(m,t,_),f&&f.m(t,null),zt(t,u),p&&p.m(t,null),d=!0},p(m,[_]){m[0]?f?f.p(m,_):(f=ve(m),f.c(),f.m(t,u)):f&&(f.d(1),f=null),p&&p.p&&(!d||_&4)&&Te(p,c,m,m[2],d?xe(c,m[2],_,null):Ae(m[2]),null),(!d||_&2)&&dt(t,"viewBox",m[1])},i(m){d||(_t(p,m),d=!0)},o(m){jt(p,m),d=!1},d(m){m&&ct(t),f&&f.d(),p&&p.d(m)}}}function We(a,t,u){let{$$slots:d={},$$scope:f}=t,{title:c=null}=t,{viewBox:p}=t;return a.$$set=m=>{"title"in m&&u(0,c=m.title),"viewBox"in m&&u(1,p=m.viewBox),"$$scope"in m&&u(2,f=m.$$scope)},[c,p,f,d]}class re extends Dt{constructor(t){super();Bt(this,t,We,Ve,xt,{title:0,viewBox:1})}}function Ke(a){let t;return{c(){t=yt("path"),this.h()},l(u){t=At(u,"path",{d:!0}),vt(t).forEach(ct),this.h()},h(){dt(t,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z")},m(u,d){Tt(u,t,d)},d(u){u&&ct(t)}}}function Xe(a){let t,u;const d=[{viewBox:"0 0 24 24"},a[0]];let f={$$slots:{default:[Ke]},$$scope:{ctx:a}};for(let c=0;c<d.length;c+=1)f=ht(f,d[c]);return t=new re({props:f}),{c(){Zt(t.$$.fragment)},l(c){te(t.$$.fragment,c)},m(c,p){Ut(t,c,p),u=!0},p(c,[p]){const m=p&1?Xt(d,[d[0],Qt(c[0])]):{};p&2&&(m.$$scope={dirty:p,ctx:c}),t.$set(m)},i(c){u||(_t(t.$$.fragment,c),u=!0)},o(c){jt(t.$$.fragment,c),u=!1},d(c){Ft(t,c)}}}function Qe(a,t,u){return a.$$set=d=>{u(0,t=ht(ht({},t),gt(d)))},t=gt(t),[t]}class Vr extends Dt{constructor(t){super();Bt(this,t,Qe,Xe,xt,{})}}const _e=()=>{};function Wr(a,t=0,u={}){let d=null,f=!1;const c=u.before||_e,p=u.after||_e;return function(..._){f||(f=!0,c()),d!=null&&(clearTimeout(d),d=null),!!u.isImmediate&&d==null?(f=!1,a.apply(this,_),p()):d=setTimeout(()=>{f=!1,d=null,a.apply(this,_),p()},t)}}function Ze(a){let t;return{c(){t=yt("path"),this.h()},l(u){t=At(u,"path",{d:!0}),vt(t).forEach(ct),this.h()},h(){dt(t,"d","M256 105c-101.8 0-188.4 62.4-224 151 35.6 88.6 122.2 151 224 151s188.4-62.4 224-151c-35.6-88.6-122.2-151-224-151zm0 251.7c-56 0-101.8-45.3-101.8-100.7S200 155.3 256 155.3 357.8 200.6 357.8 256 312 356.7 256 356.7zm0-161.1c-33.6 0-61.1 27.2-61.1 60.4s27.5 60.4 61.1 60.4 61.1-27.2 61.1-60.4-27.5-60.4-61.1-60.4z")},m(u,d){Tt(u,t,d)},d(u){u&&ct(t)}}}function tr(a){let t,u;const d=[{viewBox:"0 0 512 512"},a[0]];let f={$$slots:{default:[Ze]},$$scope:{ctx:a}};for(let c=0;c<d.length;c+=1)f=ht(f,d[c]);return t=new re({props:f}),{c(){Zt(t.$$.fragment)},l(c){te(t.$$.fragment,c)},m(c,p){Ut(t,c,p),u=!0},p(c,[p]){const m=p&1?Xt(d,[d[0],Qt(c[0])]):{};p&2&&(m.$$scope={dirty:p,ctx:c}),t.$set(m)},i(c){u||(_t(t.$$.fragment,c),u=!0)},o(c){jt(t.$$.fragment,c),u=!1},d(c){Ft(t,c)}}}function er(a,t,u){return a.$$set=d=>{u(0,t=ht(ht({},t),gt(d)))},t=gt(t),[t]}class Kr extends Dt{constructor(t){super();Bt(this,t,er,tr,xt,{})}}function rr(a){let t;return{c(){t=yt("path"),this.h()},l(u){t=At(u,"path",{d:!0}),vt(t).forEach(ct),this.h()},h(){dt(t,"d","M256.1 144.8c56.2 0 101.9 45.3 101.9 101.1 0 13.1-2.6 25.5-7.3 37l59.5 59c30.8-25.5 55-58.4 69.9-96-35.3-88.7-122.3-151.6-224.2-151.6-28.5 0-55.8 5.1-81.1 14.1l44 43.7c11.6-4.6 24.1-7.3 37.3-7.3zM52.4 89.7l46.5 46.1 9.4 9.3c-33.9 26-60.4 60.8-76.3 100.8 35.2 88.7 122.2 151.6 224.1 151.6 31.6 0 61.7-6.1 89.2-17l8.6 8.5 59.7 59 25.9-25.7L78.2 64 52.4 89.7zM165 201.4l31.6 31.3c-1 4.2-1.6 8.7-1.6 13.1 0 33.5 27.3 60.6 61.1 60.6 4.5 0 9-.6 13.2-1.6l31.6 31.3c-13.6 6.7-28.7 10.7-44.8 10.7-56.2 0-101.9-45.3-101.9-101.1 0-15.8 4.1-30.7 10.8-44.3zm87.8-15.7l64.2 63.7.4-3.2c0-33.5-27.3-60.6-61.1-60.6l-3.5.1z")},m(u,d){Tt(u,t,d)},d(u){u&&ct(t)}}}function nr(a){let t,u;const d=[{viewBox:"0 0 512 512"},a[0]];let f={$$slots:{default:[rr]},$$scope:{ctx:a}};for(let c=0;c<d.length;c+=1)f=ht(f,d[c]);return t=new re({props:f}),{c(){Zt(t.$$.fragment)},l(c){te(t.$$.fragment,c)},m(c,p){Ut(t,c,p),u=!0},p(c,[p]){const m=p&1?Xt(d,[d[0],Qt(c[0])]):{};p&2&&(m.$$scope={dirty:p,ctx:c}),t.$set(m)},i(c){u||(_t(t.$$.fragment,c),u=!0)},o(c){jt(t.$$.fragment,c),u=!1},d(c){Ft(t,c)}}}function ir(a,t,u){return a.$$set=d=>{u(0,t=ht(ht({},t),gt(d)))},t=gt(t),[t]}class Xr extends Dt{constructor(t){super();Bt(this,t,ir,nr,xt,{})}}const ne={},qt={};class $t{constructor(t,u){if(t!==ne)throw new TypeError("Options can only be created with the some or none functions");this._value=u}static some(t){return st(t)}static none(){return ot()}static from(t){return t!=null?st(t):ot()}static fromJSON(t){return $t.from(t)}isNone(){return this._value===qt}isSome(){return!this.isNone()}expect(t){if(this.isSome())return this._value;throw new Error(typeof t=="function"?t():t)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(t){return this.isSome()?this._value:t}unwrapOrElse(t){return this.isSome()?this._value:t()}map(t){return this.isSome()?st(t(this._value)):ot()}mapOr(t,u){return this.isSome()?st(t(this._value)):st(u)}mapOrElse(t,u){return this.isSome()?st(t(this._value)):st(u())}flatMap(t){return this.isSome()?t(this._value):ot()}flatMapOr(t,u){return this.isSome()?t(this._value):u}flatMapOrElse(t,u){return this.isSome()?t(this._value):u()}and(t){return this.isSome()?t:ot()}andThen(t){return this.isSome()?t(this._value):ot()}or(t){return this.isNone()?t:this}orElse(t){return this.isNone()?t():this}xor(t){const u=this.isSome(),d=t.isSome();return u&&!d?this:!u&&d?t:ot()}filter(t){return this.isSome()&&t(this._value)?this:ot()}getOrInsert(t){return this.isNone()&&(this._value=t),this}getOrInsertWith(t){return this.isNone()&&(this._value=t()),this}take(){if(this.isSome()){const t=this._value;return this._value=qt,st(t)}else return ot()}from(t){return t!=null?this._value=t:this.clear(),this}replace(t){return this._value=t,this}clear(){return this._value=qt,this}ifSome(t,u){return this.isSome()?t(this._value):u&&u(),this}ifNone(t,u){return this.isNone()?t():u&&u(this._value),this}toJSON(){return this.unwrapOr(null)}toJS(){return this.unwrapOr(null)}}const st=a=>new $t(ne,a),ot=()=>new $t(ne,qt);class tt{constructor(t){this._index=0,this._iter=t}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const t=this._iter.next();return t.done?t:{value:[t.value,this._index++]}}enumerate(){throw new Error("iter/Enumerate was not imported!")}peekable(){throw new Error("iter/Peekable was not imported!")}forEach(t){throw new Error("iter/ForEach was not imported!")}map(t){throw new Error("iter/Map was not imported!")}merge(t){throw new Error("iter/Merge was not imported!")}concat(t){return this.merge(t)}filter(t){throw new Error("iter/Filter was not imported!")}step(t){throw new Error("iter/Step was not imported!")}skip(t){throw new Error("iter/Skip was not imported!")}take(t){throw new Error("iter/Take was not imported!")}toMap(t,u){throw new Error("iter/ToMap was not imported!")}count(){return this.reduce(0,t=>t+1)}consume(){let t=this.next();for(;!t.done;)t=this.next();return this}toArray(){return this.reduce([],(t,u)=>(t.push(u),t))}join(t){return this.toArray().join(t)}indexOf(t){let u=this.next(),d=0;for(;!u.done;){if(u.value===t)return d;d++,u=this.next()}return-1}findIndex(t){let u=this.nextWithIndex();for(;!u.done;){const[d,f]=u.value;if(t(d,f))return f;u=this.nextWithIndex()}return-1}find(t){let u=this.nextWithIndex();for(;!u.done;){const[d,f]=u.value;if(t(d,f))return st(d);u=this.nextWithIndex()}return ot()}findAll(t){return this.filter(t)}nth(t=0){let u=this.next();for(t<0&&(t=0);!u.done;){if(t--<=0)return st(u.value);u=this.next()}return ot()}first(){return this.nth(0)}last(){let t=this.next();for(;!t.done;){const u=this.next();if(u.done)return st(t.value);t=u}return ot()}any(t){return this.findIndex(t)!==-1}some(t){return this.any(t)}none(t){return this.findIndex(t)===-1}all(t){let u=this.nextWithIndex();for(;!u.done;){const[d,f]=u.value;if(!t(d,f))return!1;u=this.nextWithIndex()}return!0}unflatten(t){throw new Error("iter/Unflatten was not imported!")}reduce(t,u){let d=this.next();for(;!d.done;){const f=d.value;t=u(t,f,this._index-1),d=this.next()}return t}reverse(){return Jt(this.toArray().reverse())}}function Jt(a){return a!=null?typeof a[Symbol.iterator]=="function"?new tt(a[Symbol.iterator]()):typeof a.next=="function"?a instanceof tt?a:new tt(a):Jt(typeof a=="object"?Object.entries(a):[a]):Jt([])}class sr extends tt{constructor(t){super(t)}next(){const t=super.nextWithIndex();return t.done?t:{value:or(t.value)}}}tt.prototype.enumerate=function(){return new sr(this)};function or(a){const t=a[0],u=a;return u[0]=a[1],u[1]=t,u}class ar extends tt{constructor(t,u){super(t);this._fn=u}next(){let t=super.nextWithIndex();for(;!t.done;){const[u,d]=t.value;if(this._fn(u,d))return{done:!1,value:u};t=super.nextWithIndex()}return{done:!0,value:void 0}}}tt.prototype.filter=function(t){return new ar(this,t)};class ur extends tt{constructor(t,u){super(t);this._fn=([d,f])=>(u(d,f),d)}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._fn(t.value)}}}tt.prototype.forEach=function(t){return new ur(this,t)};class cr extends tt{constructor(t,u){super(t);this._fn=([d,f])=>u(d,f)}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._fn(t.value)}}}tt.prototype.map=function(t){return new cr(this,t)};class lr extends tt{constructor(t,u){super(t);this._other=u}next(){const t=super.next();return t.done?this._other.next():t}}tt.prototype.merge=function(t){return new lr(this,t)};class hr extends tt{constructor(){super(...arguments);this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?st(this.peeked.shift()):ot()}peek(t=0){if(t<this.peeked.length)return st(this.peeked[t]);{let u=this.peeked.length-t-1,d=super.next();for(;!d.done&&(this.peeked.push(d.value),!(--u<=0));)d=super.next();return d.done?ot():st(d.value)}}next(){const t=this.unpeek();if(t.isSome())return{done:!1,value:t.unwrap()};const u=super.next();return u.done?u:{done:!1,value:u.value}}}tt.prototype.peekable=function(){return new hr(this)};class fr extends tt{constructor(t,u){super(t);this._skipped=0,this._skip=(u<=0?0:u)|0}next(){let t=super.next();for(;!t.done;)if(this._skipped<=this._skip)this._skipped+=1,t=super.next();else return t;return{done:!0,value:void 0}}}tt.prototype.skip=function a(a){return new fr(this,a)};class dr extends tt{constructor(t,u){super(t);this._stepped=0,this._step=u<=0?1:u|0}next(){let t=super.next();for(;!t.done;)if(this._stepped<this._step)this._stepped+=1,t=super.next();else return this._stepped=0,t;return{done:!0,value:void 0}}}tt.prototype.step=function a(a){return new dr(this,a)};class pr extends tt{constructor(t,u){super(t);this._taken=0,this._count=(u<=0?0:u)|0}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}tt.prototype.take=function(t){return new pr(this,t)};const mr=a=>a,gr=a=>a;class yr extends tt{constructor(t,u=mr,d=gr){super(t);this._map=([f,c])=>[u(f,c),d(f,c)]}toObject(){return this.reduce({},(t,u)=>(t[u[0]]=u[1],t))}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._map(t.value)}}}tt.prototype.toMap=function(t,u){return new yr(this,t,u)};class vr extends tt{constructor(t,u){super(t);this._fn=u}next(){return this._fn(this._iter)}}tt.prototype.unflatten=function(t){return new vr(this,t)};var wt;(function(a){a[a.Forward=0]="Forward",a[a.Backward=1]="Backward"})(wt||(wt={}));class ie{constructor(t,u,d=1){this.start=t!==t?0:t,this.end=u!==u?this.start-1:u,this.step=d!==d?1:Math.abs(d),this.direction=t>u?wt.Backward:wt.Forward}static from(t,u,d=1){return new ie(t,u,d)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(t){return this.start<=t&&t<=this.end}isEmpty(){return this.direction===wt.Forward?this.start>this.end:this.start<this.end}iter(){return new tt(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const t=this.start;return this.direction===wt.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:t}}}}const Qr=ie.from,Et=Math.pow(2,31)-1|0;function _r(a,t){return a[0]=(t&4278190080)>>24,a[1]=(t&16711680)>>16,a[2]=(t&65280)>>8,a[3]=t&255,a}class br extends tt{constructor(t){super(t);this.rng=t}iter(){return new tt(this)}next(){return{done:!1,value:this.rng.nextFloat()}}}class wr extends tt{constructor(t,u=0,d=1){super(t);this.rng=t,this.min=u,this.max=d}iter(){return new tt(this)}nextFloat(){return this.rng.nextFloatInRange(this.min,this.max)}next(){return{done:!1,value:this.nextFloat()}}}class Er extends tt{constructor(t,u=0,d=Et){super(t);this.rng=t,this.min=u|0,this.max=d|0}iter(){return new tt(this)}nextInt(){return this.rng.nextIntInRange(this.min,this.max)}next(){return{done:!1,value:this.nextInt()}}}const Pr=new Uint8Array(4);class be{nextFloat(){return this.nextInt()/Et}nextFloatInRange(t=0,u=1){return t+this.nextFloat()*(u-t)}nextIntInRange(t=0,u=Et){return Math.round(this.nextFloatInRange(t,u))}shuffle(t){const u=t.length;for(let d=0;d<u;d++){const f=d+this.nextIntInRange(0,u-d-1),c=t[d];t[d]=t[f],t[f]=c}return t}fromArray(t){return t.length?st(t[this.nextIntInRange(0,t.length-1)]):ot()}keyFromObject(t){return this.fromArray(Object.keys(t))}valueFromObject(t){return this.fromArray(Object.values(t))}fillBytes(t){const u=Pr;for(let d=0,f=t.length;d<f;d++){const c=d%4;c===0&&_r(u,this.nextInt()),t[d]=u[c]}return t}[Symbol.iterator](){return this}iter(){return new tt(this)}next(){return{done:!1,value:this.nextInt()}}float(){return new br(this)}uniformFloat(t=0,u=1){return new wr(this,t,u)}uniformInt(t=0,u=Et){return new Er(this,t,u)}}class we extends be{constructor(t=423257940){super();this.seed=t}setSeed(t=423257940){return this.seed=t,this}nextInt(){return this.seed=Math.imul(48271,this.seed)|0%Et,this.seed&Et}}const xr=new we;class se extends be{constructor(t,u,d,f){super();this.x=423257940,this.y=2829571177,this.z=2541948421,this.w=289122235,this.set(t,u,d,f)}static fromSeed(t){return new se().setSeed(t)}setSeed(t){const u=xr.setSeed(t);return this.set(u.nextInt(),u.nextInt(),u.nextInt(),u.nextInt())}set(t=423257940,u=2829571177,d=2541948421,f=289122235){return this.x=t|0,this.y=u|0,this.z=d|0,this.w=f|0,this}nextInt(){const t=this.x,u=t^t<<11;this.x=this.y,this.y=this.z,this.z=this.w;const d=this.w;return this.w=d^d>>19^(u^u>>8),this.w}}new we;new se;export{se as $,jr as A,ht as B,De as C,Pe as D,Nr as E,zt as F,Te as G,Ae as H,xe as I,ft as J,Gr as K,Hr as L,Vr as M,Cr as N,Rr as O,Or as P,ue as Q,Yr as R,Dt as S,mt as T,Xr as U,Kr as V,me as W,Jr as X,Br as Y,Wr as Z,Qr as _,vt as a,kr as a0,Ar as a1,Tr as a2,zr as a3,yt as a4,At as a5,$r as a6,qr as a7,dt as b,Mr as c,ct as d,Ie as e,Tt as f,pe as g,Ce as h,Bt as i,Zt as j,Sr as k,he as l,te as m,Ir as n,Ut as o,Xt as p,Qt as q,Dr as r,xt as s,It as t,jt as u,Ft as v,Lr as w,_t as x,Fr as y,Ur as z};
