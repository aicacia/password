import{X as re,Y as Ee,Z as Ne,C as Ue,W as je,_ as Ie,a0 as Oe,S as Q,i as R,s as x,a1 as oe,a2 as ue,e as $,k as U,t as K,j as C,c as y,a as j,d as m,n as I,g as S,m as G,b as d,L as Z,f as P,F as b,a3 as O,o as W,M as B,a4 as ie,x as q,u as J,v as X,a5 as ee,a6 as fe,J as pe,h as te,l as ce,r as de,w as _e,a7 as he,K as De,a8 as Ae}from"../chunks/vendor-f23cb189.js";import{g as me,r as we,L as Ke}from"../chunks/keys-ac9139ce.js";import{M as be}from"../chunks/Modal-4ba55855.js";import{b as se}from"../chunks/paths-28a87002.js";import"../chunks/preload-helper-04e99934.js";const z=Ue({}),Se=re(z,n=>Object.entries(n).map(([e,s])=>[e,Object.entries(s).map(([t,o])=>({username:t,password:o}))]));re(z,Object.keys);function Be(n,e,s){z.update(t=>{const o=t[n]||(t[n]={});return o[e]=s,t}),ge()}function Me(n,e){z.update(s=>{const t=s[n]||(s[n]={});return delete t[e],s}),ge()}let ve=!1;async function ge(){if(!ve)try{const[n,e]=await me();await Ve(n,e)}finally{ve=!1}}function ke(n){return Object.entries(n).reduce((e,[s,t])=>((!e[s]||!Object.keys(t).length)&&delete e[s],e),n)}async function Ve(n,e){const s=ke(je(z)),t=await Ie({message:await Oe({text:JSON.stringify(s),filename:"passwords.json.pgp"}),encryptionKeys:e,signingKeys:n});await we.scope("/").storeFile("pgp","passwords.json.pgp",t)}async function qe(n,e){const s=await we.scope("/").getFile("/passwords.json.pgp").then(({data:t})=>t);if(s){const{data:t}=await Ee({message:await Ne({armoredMessage:s}),verificationKeys:e,decryptionKeys:n});z.set(ke(JSON.parse(t)))}}me().then(([n,e])=>qe(n,e));function Je(n){let e,s;return{c(){e=$("img"),this.h()},l(t){e=y(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){d(e,"class","w-6 h-6"),fe(e.src,s=`${se}/hidden.svg`)||d(e,"src",s),d(e,"alt","Show")},m(t,o){P(t,e,o)},p:pe,d(t){t&&m(e)}}}function Fe(n){let e,s;return{c(){e=$("img"),this.h()},l(t){e=y(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){d(e,"class","w-6 h-6"),fe(e.src,s=`${se}/visible.svg`)||d(e,"src",s),d(e,"alt","Hide")},m(t,o){P(t,e,o)},p:pe,d(t){t&&m(e)}}}function He(n){let e,s,t,o,r,p,w,f,c,v,l;return{c(){e=$("p"),s=K("Delete "),t=K(n[2]),o=U(),r=K(n[0]),p=K(" Password?"),w=U(),f=$("button"),c=K("Delete"),this.h()},l(a){e=y(a,"P",{class:!0});var u=j(e);s=S(u,"Delete "),t=S(u,n[2]),o=I(u),r=S(u,n[0]),p=S(u," Password?"),u.forEach(m),w=I(a),f=y(a,"BUTTON",{class:!0});var N=j(f);c=S(N,"Delete"),N.forEach(m),this.h()},h(){d(e,"class","mb-2"),d(f,"class","btn danger")},m(a,u){P(a,e,u),b(e,s),b(e,t),b(e,o),b(e,r),b(e,p),P(a,w,u),P(a,f,u),b(f,c),v||(l=B(f,"click",n[10]),v=!0)},p(a,u){u&4&&te(t,a[2]),u&1&&te(r,a[0])},d(a){a&&m(e),a&&m(w),a&&m(f),v=!1,l()}}}function Le(n){let e,s;return{c(){e=$("h3"),s=K("Deleting Password"),this.h()},l(t){e=y(t,"H3",{slot:!0});var o=j(e);s=S(o,"Deleting Password"),o.forEach(m),this.h()},h(){d(e,"slot","title")},m(t,o){P(t,e,o),b(e,s)},d(t){t&&m(e)}}}function ze(n){let e,s,t,o,r,p,w,f,c,v,l,a,u,N,E,D,M,F,V,g;function Y(h,k){return h[4]?Fe:Je}let i=Y(n),_=i(n);function A(h){n[11](h)}let T={$$slots:{title:[Le],default:[He]},$$scope:{ctx:n}};return n[3]!==void 0&&(T.open=n[3]),D=new be({props:T}),oe.push(()=>ue(D,"open",A)),{c(){e=$("div"),s=$("div"),t=$("input"),o=U(),r=$("div"),p=$("input"),w=U(),f=$("input"),c=U(),v=$("button"),_.c(),l=U(),a=$("div"),u=$("button"),N=K("\xD7"),E=U(),C(D.$$.fragment),this.h()},l(h){e=y(h,"DIV",{class:!0});var k=j(e);s=y(k,"DIV",{class:!0});var H=j(s);t=y(H,"INPUT",{class:!0,type:!0,placeholder:!0}),H.forEach(m),o=I(k),r=y(k,"DIV",{class:!0});var L=j(r);p=y(L,"INPUT",{class:!0,type:!0,placeholder:!0}),w=I(L),f=y(L,"INPUT",{class:!0,type:!0,placeholder:!0}),c=I(L),v=y(L,"BUTTON",{class:!0});var le=j(v);_.l(le),le.forEach(m),L.forEach(m),l=I(k),a=y(k,"DIV",{class:!0});var ne=j(a);u=y(ne,"BUTTON",{class:!0});var ae=j(u);N=S(ae,"\xD7"),ae.forEach(m),ne.forEach(m),k.forEach(m),E=I(h),G(D.$$.fragment,h),this.h()},h(){d(t,"class","input h-full"),d(t,"type","text"),d(t,"placeholder","Username"),d(s,"class","relative flex-1"),d(p,"class","input h-full"),d(p,"type","text"),d(p,"placeholder","Password"),Z(p,"hidden",!n[4]),d(f,"class","input h-full"),d(f,"type","password"),d(f,"placeholder","Password"),Z(f,"hidden",n[4]),d(v,"class","text-black absolute top-0 bottom-0 right-2"),d(r,"class","relative flex-1"),d(u,"class","btn danger px-4"),d(a,"class","relative flex-grow-0"),d(e,"class","flex")},m(h,k){P(h,e,k),b(e,s),b(s,t),O(t,n[0]),b(e,o),b(e,r),b(r,p),O(p,n[1]),b(r,w),b(r,f),O(f,n[1]),b(r,c),b(r,v),_.m(v,null),b(e,l),b(e,a),b(a,u),b(u,N),P(h,E,k),W(D,h,k),F=!0,V||(g=[B(t,"input",n[5]),B(p,"input",n[6]),B(f,"input",n[7]),B(v,"click",n[8]),B(u,"click",n[9])],V=!0)},p(h,[k]){k&1&&t.value!==h[0]&&O(t,h[0]),k&2&&p.value!==h[1]&&O(p,h[1]),k&16&&Z(p,"hidden",!h[4]),k&2&&f.value!==h[1]&&O(f,h[1]),k&16&&Z(f,"hidden",h[4]),i===(i=Y(h))&&_?_.p(h,k):(_.d(1),_=i(h),_&&(_.c(),_.m(v,null)));const H={};k&4101&&(H.$$scope={dirty:k,ctx:h}),!M&&k&8&&(M=!0,H.open=h[3],ie(()=>M=!1)),D.$set(H)},i(h){F||(q(D.$$.fragment,h),F=!0)},o(h){J(D.$$.fragment,h),F=!1},d(h){h&&m(e),_.d(),h&&m(E),X(D,h),V=!1,ee(g)}}}function Ce(n,e,s){let{app:t}=e,{username:o}=e,{password:r}=e,p=!1,w=!1;function f(){o=this.value,s(0,o)}function c(){r=this.value,s(1,r)}function v(){r=this.value,s(1,r)}const l=()=>s(4,w=!w),a=()=>s(3,p=!p),u=()=>Me(t,o);function N(E){p=E,s(3,p)}return n.$$set=E=>{"app"in E&&s(2,t=E.app),"username"in E&&s(0,o=E.username),"password"in E&&s(1,r=E.password)},[o,r,t,p,w,f,c,v,l,a,u,N]}class Ge extends Q{constructor(e){super();R(this,e,Ce,ze,x,{app:2,username:0,password:1})}}function $e(n,e,s){const t=n.slice();return t[5]=e[s][0],t[14]=e[s][1],t}function ye(n,e,s){const t=n.slice();return t[17]=e[s],t}function We(n){let e,s,t,o,r,p,w,f,c,v;return{c(){e=$("input"),s=U(),t=$("input"),o=U(),r=$("input"),p=U(),w=$("button"),f=K("Add"),this.h()},l(l){e=y(l,"INPUT",{class:!0,type:!0,placeholder:!0}),s=I(l),t=y(l,"INPUT",{class:!0,type:!0,placeholder:!0}),o=I(l),r=y(l,"INPUT",{class:!0,type:!0,placeholder:!0}),p=I(l),w=y(l,"BUTTON",{class:!0});var a=j(w);f=S(a,"Add"),a.forEach(m),this.h()},h(){d(e,"class","input mt-1"),d(e,"type","text"),d(e,"placeholder","Application"),d(t,"class","input mt-1"),d(t,"type","text"),d(t,"placeholder","Username"),d(r,"class","input mt-1"),d(r,"type","password"),d(r,"placeholder","Password"),d(w,"class","btn primary mt-3")},m(l,a){P(l,e,a),O(e,n[5]),P(l,s,a),P(l,t,a),O(t,n[0]),P(l,o,a),P(l,r,a),O(r,n[1]),P(l,p,a),P(l,w,a),b(w,f),c||(v=[B(e,"input",n[7]),B(t,"input",n[8]),B(r,"input",n[9]),B(w,"click",n[10])],c=!0)},p(l,a){a&32&&e.value!==l[5]&&O(e,l[5]),a&1&&t.value!==l[0]&&O(t,l[0]),a&2&&r.value!==l[1]&&O(r,l[1])},d(l){l&&m(e),l&&m(s),l&&m(t),l&&m(o),l&&m(r),l&&m(p),l&&m(w),c=!1,ee(v)}}}function Pe(n){let e,s;return e=new Ge({props:{app:n[5],username:n[17].username,password:n[17].password}}),{c(){C(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,o){W(e,t,o),s=!0},p(t,o){const r={};o&16&&(r.app=t[5]),o&20&&(r.username=t[17].username),o&20&&(r.password=t[17].password),e.$set(r)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function Te(n){let e,s,t=n[5]+"",o,r,p,w,f=n[14].filter(n[13]),c=[];for(let l=0;l<f.length;l+=1)c[l]=Pe(ye(n,f,l));const v=l=>J(c[l],1,1,()=>{c[l]=null});return{c(){e=$("h2"),s=K("Application: "),o=K(t),r=U();for(let l=0;l<c.length;l+=1)c[l].c();p=ce(),this.h()},l(l){e=y(l,"H2",{class:!0});var a=j(e);s=S(a,"Application: "),o=S(a,t),a.forEach(m),r=I(l);for(let u=0;u<c.length;u+=1)c[u].l(l);p=ce(),this.h()},h(){d(e,"class","mt-2")},m(l,a){P(l,e,a),b(e,s),b(e,o),P(l,r,a);for(let u=0;u<c.length;u+=1)c[u].m(l,a);P(l,p,a),w=!0},p(l,a){if((!w||a&16)&&t!==(t=l[5]+"")&&te(o,t),a&20){f=l[14].filter(l[13]);let u;for(u=0;u<f.length;u+=1){const N=ye(l,f,u);c[u]?(c[u].p(N,a),q(c[u],1)):(c[u]=Pe(N),c[u].c(),q(c[u],1),c[u].m(p.parentNode,p))}for(de(),u=f.length;u<c.length;u+=1)v(u);_e()}},i(l){if(!w){for(let a=0;a<f.length;a+=1)q(c[a]);w=!0}},o(l){c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)J(c[a]);w=!1},d(l){l&&m(e),l&&m(r),he(c,l),l&&m(p)}}}function Xe(n){let e,s,t,o,r,p,w,f,c,v,l,a,u,N,E,D;function M(i){n[11](i)}let F={$$slots:{default:[We]},$$scope:{ctx:n}};n[3]!==void 0&&(F.open=n[3]),f=new be({props:F}),oe.push(()=>ue(f,"open",M));let V=n[4],g=[];for(let i=0;i<V.length;i+=1)g[i]=Te($e(n,V,i));const Y=i=>J(g[i],1,1,()=>{g[i]=null});return{c(){e=$("div"),s=$("button"),t=K("Add"),o=U(),r=$("a"),p=K("Keys"),w=U(),C(f.$$.fragment),v=U(),l=$("input"),a=U(),u=$("div");for(let i=0;i<g.length;i+=1)g[i].c();this.h()},l(i){e=y(i,"DIV",{class:!0});var _=j(e);s=y(_,"BUTTON",{class:!0});var A=j(s);t=S(A,"Add"),A.forEach(m),o=I(_),r=y(_,"A",{class:!0,href:!0});var T=j(r);p=S(T,"Keys"),T.forEach(m),_.forEach(m),w=I(i),G(f.$$.fragment,i),v=I(i),l=y(i,"INPUT",{class:!0,type:!0,placeholder:!0}),a=I(i),u=y(i,"DIV",{class:!0});var h=j(u);for(let k=0;k<g.length;k+=1)g[k].l(h);h.forEach(m),this.h()},h(){d(s,"class","btn primary"),d(r,"class","btn primary"),d(r,"href",`${se}/keys`),d(e,"class","flex justify-between mb-2"),d(l,"class","input"),d(l,"type","text"),d(l,"placeholder","Search..."),d(u,"class","mt-1")},m(i,_){P(i,e,_),b(e,s),b(s,t),b(e,o),b(e,r),b(r,p),P(i,w,_),W(f,i,_),P(i,v,_),P(i,l,_),O(l,n[2]),P(i,a,_),P(i,u,_);for(let A=0;A<g.length;A+=1)g[A].m(u,null);N=!0,E||(D=[B(s,"click",n[6]),B(l,"input",n[12])],E=!0)},p(i,[_]){const A={};if(_&1048611&&(A.$$scope={dirty:_,ctx:i}),!c&&_&8&&(c=!0,A.open=i[3],ie(()=>c=!1)),f.$set(A),_&4&&l.value!==i[2]&&O(l,i[2]),_&20){V=i[4];let T;for(T=0;T<V.length;T+=1){const h=$e(i,V,T);g[T]?(g[T].p(h,_),q(g[T],1)):(g[T]=Te(h),g[T].c(),q(g[T],1),g[T].m(u,null))}for(de(),T=V.length;T<g.length;T+=1)Y(T);_e()}},i(i){if(!N){q(f.$$.fragment,i);for(let _=0;_<V.length;_+=1)q(g[_]);N=!0}},o(i){J(f.$$.fragment,i),g=g.filter(Boolean);for(let _=0;_<g.length;_+=1)J(g[_]);N=!1},d(i){i&&m(e),i&&m(w),X(f,i),i&&m(v),i&&m(l),i&&m(a),i&&m(u),he(g,i),E=!1,ee(D)}}}function Ye(n,e,s){let t;De(n,Se,M=>s(4,t=M));let o,r,p,w="",f=!1;const c=()=>s(3,f=!f);function v(){o=this.value,s(5,o)}function l(){r=this.value,s(0,r)}function a(){p=this.value,s(1,p)}const u=()=>Be(o,r,p);function N(M){f=M,s(3,f)}function E(){w=this.value,s(2,w)}return[r,p,w,f,t,o,c,v,l,a,u,N,E,M=>w?Ae(w,M.username):!0]}class Ze extends Q{constructor(e){super();R(this,e,Ye,Xe,x,{})}}function Qe(n){let e,s;return e=new Ze({}),{c(){C(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,o){W(e,t,o),s=!0},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function Re(n){let e,s;return e=new Ke({props:{$$slots:{default:[Qe]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,o){W(e,t,o),s=!0},p(t,[o]){const r={};o&1&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}class nt extends Q{constructor(e){super();R(this,e,null,Re,x,{})}}export{nt as default};
