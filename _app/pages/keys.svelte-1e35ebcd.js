import{S as ce,i as ue,s as fe,a7 as ve,a8 as ke,e as w,t as B,k as C,j as J,c as K,a as E,g as R,d as u,n as H,m as z,b as D,f as F,F as _,o as G,M as Y,aa as $e,r as ee,u as N,w as te,x as O,v as Q,a3 as _e,K as ge,J as Z,L as le,h as de,a5 as pe,a6 as me}from"../chunks/vendor-cf18c955.js";import{k as we,s as Ke,L as Ee}from"../chunks/keys-b9524687.js";import{M as Pe}from"../chunks/Modal-76280f12.js";import{b as Ie}from"../chunks/paths-28a87002.js";import"../chunks/preload-helper-04e99934.js";function De(a){let e,l,t,r,f,n,c,P,d,k;return{c(){e=w("label"),l=B("Public and Private Keys"),t=C(),r=w("input"),f=C(),n=w("button"),c=B("Import"),this.h()},l(o){e=K(o,"LABEL",{for:!0});var m=E(e);l=R(m,"Public and Private Keys"),m.forEach(u),t=H(o),r=K(o,"INPUT",{id:!0,type:!0,class:!0}),f=H(o),n=K(o,"BUTTON",{class:!0});var b=E(n);c=R(b,"Import"),b.forEach(u),this.h()},h(){D(e,"for","public-key-upload"),D(r,"id","public-key-upload"),D(r,"type","file"),r.multiple=!0,D(r,"class","input"),D(n,"class","btn primary mt-8"),n.disabled=P=a[1]||!a[5]||!a[4]},m(o,m){F(o,e,m),_(e,l),F(o,t,m),F(o,r,m),F(o,f,m),F(o,n,m),_(n,c),d||(k=[Y(r,"change",a[8]),Y(n,"click",a[7])],d=!0)},p(o,m){m&50&&P!==(P=o[1]||!o[5]||!o[4])&&(n.disabled=P)},d(o){o&&u(e),o&&u(t),o&&u(r),o&&u(f),o&&u(n),d=!1,_e(k)}}}function Te(a){let e,l;return{c(){e=w("h1"),l=B("No Public Key")},l(t){e=K(t,"H1",{});var r=E(e);l=R(r,"No Public Key"),r.forEach(u)},m(t,r){F(t,e,r),_(e,l)},p:Z,i:Z,o:Z,d(t){t&&u(e)}}}function Ne(a){var I;let e,l,t,r,f,n,c,P,d,k,o=((I=a[6].publicKey)==null?void 0:I.armor())+"",m,b,U,L;const T=[je,Oe],h=[];function $(i,y){return i[2]?0:1}return n=$(a),c=h[n]=T[n](a),{c(){e=w("div"),l=w("h1"),t=B(`Public Key
				`),r=w("button"),f=w("div"),c.c(),P=C(),d=w("pre"),k=w("code"),m=B(o),this.h()},l(i){e=K(i,"DIV",{});var y=E(e);l=K(y,"H1",{class:!0});var p=E(l);t=R(p,`Public Key
				`),r=K(p,"BUTTON",{class:!0});var g=E(r);f=K(g,"DIV",{class:!0});var V=E(f);c.l(V),V.forEach(u),g.forEach(u),p.forEach(u),P=H(y),d=K(y,"PRE",{class:!0});var S=E(d);k=K(S,"CODE",{});var M=E(k);m=R(M,o),M.forEach(u),S.forEach(u),y.forEach(u),this.h()},h(){D(f,"class","w-6 h-6"),D(r,"class","btn primary"),D(l,"class","border-b"),D(d,"class","overflow-auto"),le(d,"hidden",!a[2])},m(i,y){F(i,e,y),_(e,l),_(l,t),_(l,r),_(r,f),h[n].m(f,null),_(e,P),_(e,d),_(d,k),_(k,m),b=!0,U||(L=Y(r,"click",a[12]),U=!0)},p(i,y){var g;let p=n;n=$(i),n!==p&&(ee(),N(h[p],1,1,()=>{h[p]=null}),te(),c=h[n],c||(c=h[n]=T[n](i),c.c()),O(c,1),c.m(f,null)),(!b||y&64)&&o!==(o=((g=i[6].publicKey)==null?void 0:g.armor())+"")&&de(m,o),y&4&&le(d,"hidden",!i[2])},i(i){b||(O(c),b=!0)},o(i){N(c),b=!1},d(i){i&&u(e),h[n].d(),U=!1,L()}}}function Oe(a){let e,l;return e=new pe({}),{c(){J(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,r){G(e,t,r),l=!0},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function je(a){let e,l;return e=new me({}),{c(){J(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,r){G(e,t,r),l=!0},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Ue(a){let e,l;return{c(){e=w("h1"),l=B("No Private Key")},l(t){e=K(t,"H1",{});var r=E(e);l=R(r,"No Private Key"),r.forEach(u)},m(t,r){F(t,e,r),_(e,l)},p:Z,i:Z,o:Z,d(t){t&&u(e)}}}function Fe(a){var I;let e,l,t,r,f,n,c,P,d,k,o=((I=a[6].privateKey)==null?void 0:I.armor())+"",m,b,U,L;const T=[Ve,Le],h=[];function $(i,y){return i[3]?0:1}return n=$(a),c=h[n]=T[n](a),{c(){e=w("div"),l=w("h1"),t=B(`Private Key
				`),r=w("button"),f=w("div"),c.c(),P=C(),d=w("pre"),k=w("code"),m=B(o),this.h()},l(i){e=K(i,"DIV",{});var y=E(e);l=K(y,"H1",{class:!0});var p=E(l);t=R(p,`Private Key
				`),r=K(p,"BUTTON",{class:!0});var g=E(r);f=K(g,"DIV",{class:!0});var V=E(f);c.l(V),V.forEach(u),g.forEach(u),p.forEach(u),P=H(y),d=K(y,"PRE",{class:!0});var S=E(d);k=K(S,"CODE",{});var M=E(k);m=R(M,o),M.forEach(u),S.forEach(u),y.forEach(u),this.h()},h(){D(f,"class","w-6 h-6"),D(r,"class","btn primary"),D(l,"class","border-b"),D(d,"class","overflow-auto"),le(d,"hidden",!a[3])},m(i,y){F(i,e,y),_(e,l),_(l,t),_(l,r),_(r,f),h[n].m(f,null),_(e,P),_(e,d),_(d,k),_(k,m),b=!0,U||(L=Y(r,"click",a[13]),U=!0)},p(i,y){var g;let p=n;n=$(i),n!==p&&(ee(),N(h[p],1,1,()=>{h[p]=null}),te(),c=h[n],c||(c=h[n]=T[n](i),c.c()),O(c,1),c.m(f,null)),(!b||y&64)&&o!==(o=((g=i[6].privateKey)==null?void 0:g.armor())+"")&&de(m,o),y&8&&le(d,"hidden",!i[3])},i(i){b||(O(c),b=!0)},o(i){N(c),b=!1},d(i){i&&u(e),h[n].d(),U=!1,L()}}}function Le(a){let e,l;return e=new pe({}),{c(){J(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,r){G(e,t,r),l=!0},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Ve(a){let e,l;return e=new me({}),{c(){J(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,r){G(e,t,r),l=!0},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Be(a){let e,l,t,r,f,n,c,P,d,k,o,m,b,U,L,T,h,$,I,i,y,p,g,V,S,M;function ye(s){a[11](s)}let re={$$slots:{default:[De]},$$scope:{ctx:a}};a[0]!==void 0&&(re.open=a[0]),b=new Pe({props:re}),ve.push(()=>ke(b,"open",ye));const ae=[Ne,Te],A=[];function ne(s,v){var j;return(h==null||v&64)&&(h=!!((j=s[6].publicKey)==null?void 0:j.armor())),h?0:1}$=ne(a,-1),I=A[$]=ae[$](a);const se=[Fe,Ue],q=[];function oe(s,v){var j;return(y==null||v&64)&&(y=!!((j=s[6].privateKey)==null?void 0:j.armor())),y?0:1}return p=oe(a,-1),g=q[p]=se[p](a),{c(){e=w("div"),l=w("div"),t=w("button"),r=B("Import"),f=C(),n=w("button"),c=B("Download"),d=C(),k=w("a"),o=B("Passwords"),m=C(),J(b.$$.fragment),L=C(),T=w("div"),I.c(),i=C(),g.c(),this.h()},l(s){e=K(s,"DIV",{class:!0});var v=E(e);l=K(v,"DIV",{});var j=E(l);t=K(j,"BUTTON",{class:!0});var W=E(t);r=R(W,"Import"),W.forEach(u),f=H(j),n=K(j,"BUTTON",{class:!0});var X=E(n);c=R(X,"Download"),X.forEach(u),j.forEach(u),d=H(v),k=K(v,"A",{class:!0,href:!0});var ie=E(k);o=R(ie,"Passwords"),ie.forEach(u),v.forEach(u),m=H(s),z(b.$$.fragment,s),L=H(s),T=K(s,"DIV",{class:!0});var x=E(T);I.l(x),i=H(x),g.l(x),x.forEach(u),this.h()},h(){D(t,"class","btn primary"),D(n,"class","btn primary"),n.disabled=P=!a[6].publicKey||!a[6].privateKey,D(k,"class","btn primary"),D(k,"href",`${Ie}/passwords`),D(e,"class","flex justify-between mb-2"),D(T,"class","grid lg:grid-cols-2 grid-cols-1 gap-2")},m(s,v){F(s,e,v),_(e,l),_(l,t),_(t,r),_(l,f),_(l,n),_(n,c),_(e,d),_(e,k),_(k,o),F(s,m,v),G(b,s,v),F(s,L,v),F(s,T,v),A[$].m(T,null),_(T,i),q[p].m(T,null),V=!0,S||(M=[Y(t,"click",a[9]),Y(n,"click",a[10])],S=!0)},p(s,[v]){(!V||v&64&&P!==(P=!s[6].publicKey||!s[6].privateKey))&&(n.disabled=P);const j={};v&16434&&(j.$$scope={dirty:v,ctx:s}),!U&&v&1&&(U=!0,j.open=s[0],$e(()=>U=!1)),b.$set(j);let W=$;$=ne(s,v),$===W?A[$].p(s,v):(ee(),N(A[W],1,1,()=>{A[W]=null}),te(),I=A[$],I?I.p(s,v):(I=A[$]=ae[$](s),I.c()),O(I,1),I.m(T,i));let X=p;p=oe(s,v),p===X?q[p].p(s,v):(ee(),N(q[X],1,1,()=>{q[X]=null}),te(),g=q[p],g?g.p(s,v):(g=q[p]=se[p](s),g.c()),O(g,1),g.m(T,null))},i(s){V||(O(b.$$.fragment,s),O(I),O(g),V=!0)},o(s){N(b.$$.fragment,s),N(I),N(g),V=!1},d(s){s&&u(e),s&&u(m),Q(b,s),s&&u(L),s&&u(T),A[$].d(),q[p].d(),S=!1,_e(M)}}}function be(a){return new Promise(e=>{const l=new FileReader;l.onload=t=>{const r=t.target.result;r||e(""),e(r)},l.readAsText(a)})}function he(a,e){const l=new File([e.armor()],a,{type:"application/pgp-key"}),t=document.createElement("a");t.href=URL.createObjectURL(l),t.download=l.name,t.click()}function Re(a,e){for(let l=0;l<a.length;l++){const t=a[l];if(e(t))return l}return-1}function Se(a,e){he("aicacia-password-public.pub",a),he("aicacia-password-private",e)}function Ce(a,e,l){let t;ge(a,we,h=>l(6,t=h));let r=!1,f=!1,n=!1,c=!1,P,d;async function k(){l(1,f=!0);try{await Ke(d,P,!0)}finally{l(0,r=!1),l(1,f=!1)}}async function o(h){const $=h.target.files;if(!$||$.length<2)return;const I=Re($,i=>i.name.includes(".pub"));l(4,P=await be($[I])),l(5,d=await be($[I===0?1:0]))}const m=()=>l(0,r=!r),b=()=>Se(t.publicKey,t.privateKey);function U(h){r=h,l(0,r)}return[r,f,n,c,P,d,t,k,o,m,b,U,()=>l(2,n=!n),()=>l(3,c=!c)]}class He extends ce{constructor(e){super();ue(this,e,Ce,Be,fe,{})}}function Me(a){let e,l;return e=new He({}),{c(){J(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,r){G(e,t,r),l=!0},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Ae(a){let e,l;return e=new Ee({props:{$$slots:{default:[Me]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,r){G(e,t,r),l=!0},p(t,[r]){const f={};r&1&&(f.$$scope={dirty:r,ctx:t}),e.$set(f)},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}class We extends ce{constructor(e){super();ue(this,e,null,Ae,fe,{})}}export{We as default};
