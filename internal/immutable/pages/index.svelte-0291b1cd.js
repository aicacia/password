var Ls=Object.defineProperty,Bs=Object.defineProperties;var $s=Object.getOwnPropertyDescriptors;var tn=Object.getOwnPropertySymbols;var qs=Object.prototype.hasOwnProperty,Vs=Object.prototype.propertyIsEnumerable;var rn=(t,e,r)=>e in t?Ls(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,it=(t,e)=>{for(var r in e||(e={}))qs.call(e,r)&&rn(t,r,e[r]);if(tn)for(var r of tn(e))Vs.call(e,r)&&rn(t,r,e[r]);return t},Ut=(t,e)=>Bs(t,$s(e));import{S as Ne,i as Re,s as Ye,I as vr,e as Q,c as Z,a as ee,d as G,g as ne,N as Gs,J as _r,K as br,L as wr,H as er,q as ae,o as ue,D as Wn,C as Me,w as ye,x as ve,y as _e,z as It,A as Ot,B as be,O as Ve,P as Qe,Q as Ze,b as J,E as ke,R as We,k as ce,m as he,T as Dt,M as K,U as we,n as rt,p as nt,G as gt,V as ut,W as De,t as Pe,h as Te,j as lt,X as Ws,Y as St,Z as kt,_ as Hn,l as Ie,$ as ct,a0 as Jn,a1 as nn,a2 as tr,a3 as Rr,a4 as sn,a5 as Hs,a6 as Js,v as zs}from"../chunks/index-b46ef222.js";import{d as yt,w as Ir}from"../chunks/index-032e4192.js";import{I as xt,f as on,L as Ys}from"../chunks/Layout-b6843b13.js";import{_ as Ks}from"../chunks/preload-helper-3187750d.js";function Xs(t){try{const e=new URL(t);return e.href=`${e.protocol}//${e.host}${e.pathname}`,e.hash&&(e.href+=`#${e.hash}`),e.search&&(e.href+=`?${e.search}`),e}catch{return}}function zn(t){var e;return((e=Xs(t))==null?void 0:e.toString())||t.trim()}var jt,Qs=new Uint8Array(16);function Zs(){if(!jt&&(jt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jt(Qs)}var eo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function to(t){return typeof t=="string"&&eo.test(t)}var Se=[];for(var lr=0;lr<256;++lr)Se.push((lr+256).toString(16).substr(1));function ro(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Se[t[e+0]]+Se[t[e+1]]+Se[t[e+2]]+Se[t[e+3]]+"-"+Se[t[e+4]]+Se[t[e+5]]+"-"+Se[t[e+6]]+Se[t[e+7]]+"-"+Se[t[e+8]]+Se[t[e+9]]+"-"+Se[t[e+10]]+Se[t[e+11]]+Se[t[e+12]]+Se[t[e+13]]+Se[t[e+14]]+Se[t[e+15]]).toLowerCase();if(!to(r))throw TypeError("Stringified UUID is invalid");return r}function no(t,e,r){t=t||{};var n=t.random||(t.rng||Zs)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return ro(n)}const so="v21wdidfxjapm8b",oo="399181883347-3dfijgbemptplmueu01bsfga9jpkks6j.apps.googleusercontent.com";var io=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ao(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yn={exports:{}};/*! remotestorage.js 2.0.0-beta.3, https://remotestorage.io, MIT licensed */(function(t,e){(function(r,n){t.exports=n()})(io,function(){return function(r){var n={};function s(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return r[o].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=r,s.c=n,s.d=function(o,a,l){s.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:l})},s.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,a){if(1&a&&(o=s(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var d in o)s.d(l,d,function(b){return o[b]}.bind(null,d));return l},s.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(a,"a",a),a},s.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},s.p="",s(s.s=17)}([function(r,n,s){(function(o,a){Object.defineProperty(n,"__esModule",{value:!0}),n.applyMixins=n.toBase64=n.getTextFromArrayBuffer=n.shouldBeTreatedAsBinary=n.getJSONFromLocalStorage=n.localStorageAvailable=n.pathsFromRoot=n.deepClone=n.equal=n.bindAll=n.cleanPath=n.baseName=n.isDocument=n.isFolder=n.containingFolder=n.extend=n.getGlobalContext=n.globalContext=n.logError=void 0,n.logError=l=>{typeof l=="string"?console.error(l):console.error(l.message,l.stack)},n.globalContext=typeof window!="undefined"?window:typeof self=="object"?self:o,n.getGlobalContext=()=>typeof window!="undefined"?window:typeof self=="object"?self:o,n.extend=(...l)=>{const d=l[0];return Array.prototype.slice.call(l,1).forEach(function(b){for(const A in b)d[A]=b[A]}),d},n.containingFolder=l=>{if(l==="")return"/";if(!l)throw"Path not given!";return l.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},n.isFolder=l=>l.substr(-1)==="/",n.isDocument=l=>!n.isFolder(l),n.baseName=l=>{const d=l.split("/");return n.isFolder(l)?d[d.length-2]+"/":d[d.length-1]},n.cleanPath=l=>l.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27"),n.bindAll=l=>{for(const d in this)typeof l[d]=="function"&&(l[d]=l[d].bind(l))},n.equal=(l,d,b=[])=>{let A;if(typeof l!=typeof d)return!1;if(typeof l=="number"||typeof l=="boolean"||typeof l=="string")return l===d;if(typeof l=="function")return l.toString()===d.toString();if(l instanceof ArrayBuffer&&d instanceof ArrayBuffer&&(l=new Uint8Array(l),d=new Uint8Array(d)),l instanceof Array){if(l.length!==d.length)return!1;for(let _=0,S=l.length;_<S;_++)if(!n.equal(l[_],d[_],b))return!1}else{for(A in l)if(l.hasOwnProperty(A)&&!(A in d))return!1;for(A in d){if(!d.hasOwnProperty(A))continue;if(!(A in l))return!1;let _;if(typeof d[A]=="object"){if(b.indexOf(d[A])>=0)continue;_=b.slice(),_.push(d[A])}if(!n.equal(l[A],d[A],_))return!1}}return!0},n.deepClone=l=>{if(l!==void 0){const d=JSON.parse(JSON.stringify(l));return function b(A,_){if(typeof A=="object"&&!Array.isArray(A)&&A!==null){for(const S in A)if(typeof A[S]=="object"&&A[S]!==null)if(A[S].toString()==="[object ArrayBuffer]"){_[S]=new ArrayBuffer(A[S].byteLength);const v=new Int8Array(A[S]);new Int8Array(_[S]).set(v)}else b(A[S],_[S])}}(l,d),d}},n.pathsFromRoot=l=>{const d=[l],b=l.replace(/\/$/,"").split("/");for(;b.length>1;)b.pop(),d.push(b.join("/")+"/");return d},n.localStorageAvailable=()=>{const l=n.getGlobalContext();if(!("localStorage"in l))return!1;try{return l.localStorage.setItem("rs-check","1"),l.localStorage.removeItem("rs-check"),!0}catch{return!1}},n.getJSONFromLocalStorage=l=>{const d=n.getGlobalContext();try{return JSON.parse(d.localStorage.getItem(l))}catch{}},n.shouldBeTreatedAsBinary=(l,d)=>!!(d&&d.match(/charset=binary/)||/[\x00-\x08\x0E-\x1F\uFFFD]/.test(l)),n.getTextFromArrayBuffer=(l,d)=>new Promise(b=>{if(typeof Blob=="undefined"){const A=new a(new Uint8Array(l));b(A.toString(d))}else{let A;const _=n.globalContext;if(_.BlobBuilder=_.BlobBuilder||_.WebKitBlobBuilder,_.BlobBuilder!==void 0){const v=new _.BlobBuilder;v.append(l),A=v.getBlob()}else A=new Blob([l]);const S=new FileReader;typeof S.addEventListener=="function"?S.addEventListener("loadend",function(v){b(v.target.result)}):S.onloadend=function(v){b(v.target.result)},S.readAsText(A,d)}}),n.toBase64=l=>{const d=n.getGlobalContext();return"btoa"in d?d.btoa(l):a.from(l).toString("base64")},n.applyMixins=function(l,d){d.forEach(b=>{Object.getOwnPropertyNames(b.prototype).forEach(A=>{Object.defineProperty(l.prototype,A,Object.getOwnPropertyDescriptor(b.prototype,A))})})}}).call(this,s(5),s(19).Buffer)},function(r,n,s){const o=(this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}})(s(3));r.exports=function(...a){o.default.logging&&console.log(...a)}},function(r,n,s){const o=(this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}})(s(1));r.exports=class{addEvents(a){a.forEach(l=>this._addEvent(l))}addEventListener(a,l){if(typeof a!="string")throw new Error("Argument eventName should be a string");if(typeof l!="function")throw new Error("Argument handler should be a function");o.default("[EventHandling] Adding event listener",a),this._validateEvent(a),this._handlers[a].push(l)}on(a,l){return this.addEventListener(a,l)}removeEventListener(a,l){this._validateEvent(a);const d=this._handlers[a].length;for(let b=0;b<d;b++)if(this._handlers[a][b]===l)return void this._handlers[a].splice(b,1)}_emit(a,...l){this._validateEvent(a),this._handlers[a].slice().forEach(d=>{d.apply(this,l)})}_validateEvent(a){if(!(a in this._handlers))throw new Error("Unknown event: "+a)}_delegateEvent(a,l){l.on(a,d=>{this._emit(a,d)})}_addEvent(a){this._handlers===void 0&&(this._handlers={}),this._handlers[a]=[]}}},function(r,n,s){const o={cache:!0,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},cordovaRedirectUri:void 0,logging:!1,modules:[],backgroundSyncInterval:6e4,disableFeatures:[],discoveryTimeout:1e4,isBackground:!1,requestTimeout:3e4,syncInterval:1e4};r.exports=o},function(r,n,s){class o extends Error{constructor(l,d={}){super(),this.name="Unauthorized",this.message=l===void 0?"App authorization expired or revoked.":l,d.code!==void 0&&(this.code=d.code),this.stack=new Error().stack}}r.exports=o},function(r,n){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}r.exports=s},function(r,n,s){var o=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};const a=o(s(1)),l=s(0),d=o(s(4));let b;function A(S){const v=S||_.getLocation().href,g=v.indexOf("#");if(g===-1)return;const y=v.substring(g+1);return y.includes("=")?y.split("&").reduce(function(T,P){const C=P.split("=");if(C[0]==="state"&&C[1].match(/rsDiscovery/)){let N=decodeURIComponent(C[1]);const $=N.substr(N.indexOf("rsDiscovery=")).split("&")[0].split("=")[1];T.rsDiscovery=JSON.parse(atob($)),N=N.replace(new RegExp("&?rsDiscovery="+$),""),N.length>0&&(T.state=N)}else T[decodeURIComponent(C[0])]=decodeURIComponent(C[1]);return T},{}):void 0}class _{static authorize(v,{authURL:g,scope:y,redirectUri:T,clientId:P}){if(a.default("[Authorize] authURL = ",g,"scope = ",y,"redirectUri = ",T,"clientId = ",P),!l.localStorageAvailable()&&v.backend==="remotestorage"){T+=T.indexOf("#")>0?"&":"#";const N={userAddress:v.remote.userAddress,href:v.remote.href,storageApi:v.remote.storageApi,properties:v.remote.properties};T+="rsDiscovery="+l.toBase64(JSON.stringify(N))}const C=function(N,$,x,i){const m=$.indexOf("#");let c=N;return c+=N.indexOf("?")>0?"&":"?",c+="redirect_uri="+encodeURIComponent($.replace(/#.*$/,"")),c+="&scope="+encodeURIComponent(x),c+="&client_id="+encodeURIComponent(i),m!==-1&&m+1!==$.length&&(c+="&state="+encodeURIComponent($.substring(m+1))),c+="&response_type=token",c}(g,T,y,P);l.globalContext.cordova?_.openWindow(C,T,"location=yes,clearsessioncache=yes,clearcache=yes").then(N=>{v.remote.configure({token:N.access_token})}):_.setLocation(C)}static setLocation(v){if(typeof v=="string")document.location.href=v;else{if(typeof v!="object")throw"Invalid location "+v;document.location=v}}static _rs_supported(){return typeof document!="undefined"}static _rs_cleanup(v){v.removeEventListener("features-loaded",b)}}_.IMPLIED_FAKE_TOKEN=!1,_.getLocation=function(){return document.location},_.openWindow=function(S,v,g){return new Promise((y,T)=>{const P=open(S,"_blank",g);if(!P||P.closed)return T("Authorization popup was blocked");function C(){return T("Authorization was canceled")}P.addEventListener("loadstart",function(N){if(N.url.indexOf(v)!==0)return;P.removeEventListener("exit",C),P.close();const $=A(N.url);return $?y($):T("Authorization error")}),P.addEventListener("exit",C)})},_._rs_init=function(S){const v=A();let g;v&&(g=_.getLocation(),g.hash=""),b=function(){let y=!1;if(v){if(v.error)throw v.error==="access_denied"?new d.default("Authorization failed: access denied",{code:"access_denied"}):new d.default("Authorization failed: "+v.error);v.rsDiscovery&&S.remote.configure(v.rsDiscovery),v.access_token&&(S.remote.configure({token:v.access_token}),y=!0),v.remotestorage&&(S.connect(v.remotestorage),y=!0),v.state&&(g=_.getLocation(),_.setLocation(g.href.split("#")[0]+"#"+v.state)),y||S.remote.stopWaitingForToken()}else S.remote.stopWaitingForToken()},S.on("features-loaded",b)},r.exports=_},function(r,n,s){var o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};const a=o(s(23)),l=o(s(24)),d=o(s(25)),b=o(s(2)),A=o(s(3)),_=s(0);class S{constructor(g,y){if(this.schemas={configurable:!0,get:function(){return S.Types.inScope(this.moduleName)}},y[y.length-1]!=="/")throw"Not a folder: "+y;y==="/"&&(this.makePath=P=>(P[0]==="/"?"":"/")+P),this.storage=g,this.base=y;const T=this.base.split("/");T.length>2?this.moduleName=T[1]:this.moduleName="root",this.addEvents(["change"]),this.on=this.on.bind(this),g.onChange(this.base,this._fireChange.bind(this))}scope(g){return new S(this.storage,this.makePath(g))}getListing(g,y){if(typeof g!="string")g="";else if(g.length>0&&g[g.length-1]!=="/")return Promise.reject("Not a folder: "+g);return this.storage.get(this.makePath(g),y).then(function(T){return T.statusCode===404?{}:T.body})}getAll(g,y){if(typeof g!="string")g="";else if(g.length>0&&g[g.length-1]!=="/")return Promise.reject("Not a folder: "+g);return this.storage.get(this.makePath(g),y).then(T=>{if(T.statusCode===404)return{};if(typeof T.body=="object"){const P=Object.keys(T.body);if(P.length===0)return{};const C=P.map(N=>this.storage.get(this.makePath(g+N),y).then(function($){if(typeof $.body=="string")try{$.body=JSON.parse($.body)}catch{}typeof $.body=="object"&&(T.body[N]=$.body)}));return Promise.all(C).then(function(){return T.body})}})}getFile(g,y){return typeof g!="string"?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(g),y).then(function(T){return{data:T.body,contentType:T.contentType,revision:T.revision}})}storeFile(g,y,T){return typeof g!="string"?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):typeof y!="string"?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):typeof T!="string"&&typeof T!="object"?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(y),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(y),T,g).then(P=>P.statusCode===200||P.statusCode===201?P.revision:Promise.reject("Request (PUT "+this.makePath(y)+") failed with status: "+P.statusCode)))}getObject(g,y){return typeof g!="string"?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(g),y).then(T=>{if(typeof T.body=="object")return T.body;if(typeof T.body=="string")try{return JSON.parse(T.body)}catch{throw new Error("Not valid JSON: "+this.makePath(g))}else if(T.body!==void 0&&T.statusCode===200)return Promise.reject("Not an object: "+this.makePath(g))})}storeObject(g,y,T){if(typeof g!="string")return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if(typeof y!="string")return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if(typeof T!="object")return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(T,g);try{const P=this.validate(T);if(!P.valid)return Promise.reject(P)}catch(P){return Promise.reject(P)}return this.storage.put(this.makePath(y),JSON.stringify(T),"application/json; charset=UTF-8").then(P=>P.statusCode===200||P.statusCode===201?P.revision:Promise.reject("Request (PUT "+this.makePath(y)+") failed with status: "+P.statusCode))}remove(g){return typeof g!="string"?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(g),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage.delete(this.makePath(g)))}getItemURL(g){if(typeof g!="string")throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(g=_.cleanPath(this.makePath(g)),this.storage.remote.href+g):void 0}cache(g,y="ALL"){if(typeof g!="string")throw"Argument 'path' of baseClient.cache must be a string";if(typeof y!="string")throw"Argument 'strategy' of baseClient.cache must be a string or undefined";if(y!=="FLUSH"&&y!=="SEEN"&&y!=="ALL")throw`Argument 'strategy' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]`;return this.storage.caching.set(this.makePath(g),y),this}flush(g){return this.storage.local.flush(g)}declareType(g,y,T){let P;T?P=y:(T=y,P=this._defaultTypeURI(g)),S.Types.declare(this.moduleName,g,P,T)}validate(g){const y=S.Types.getSchema(g["@context"]);if(y)return a.default.validateResult(g,y);throw new d.default(g["@context"])}_defaultTypeURI(g){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(g)}_attachType(g,y){g["@context"]=S.Types.resolveAlias(this.moduleName+"/"+y)||this._defaultTypeURI(y)}makePath(g){return this.base+(g||"")}_fireChange(g){A.default.changeEvents[g.origin]&&(["new","old","lastCommon"].forEach(function(y){if((!g[y+"ContentType"]||/^application\/(.*)json(.*)/.exec(g[y+"ContentType"]))&&typeof g[y+"Value"]=="string")try{g[y+"Value"]=JSON.parse(g[y+"Value"])}catch{}}),this._emit("change",g))}static _rs_init(){}}S.Types=l.default,_.applyMixins(S,[b.default]),r.exports=S},function(r,n,s){(function(o){var a=this&&this.__awaiter||function(x,i,m,c){return new(m||(m=Promise))(function(k,E){function I(F){try{V(c.next(F))}catch(O){E(O)}}function q(F){try{V(c.throw(F))}catch(O){E(O)}}function V(F){var O;F.done?k(F.value):(O=F.value,O instanceof m?O:new m(function(L){L(O)})).then(I,q)}V((c=c.apply(x,i||[])).next())})},l=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};const d=l(s(6)),b=l(s(2)),A=l(s(4)),_=l(s(3)),S=l(s(1)),v=s(0);let g;const y="remotestorage:wireclient",T={"draft-dejong-remotestorage-00":2,"draft-dejong-remotestorage-01":3,"draft-dejong-remotestorage-02":4,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":1};let P;if(typeof(o||window).ArrayBufferView=="function")P=function(x){return x&&x instanceof(o||window).ArrayBufferView};else{const x=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];P=function(i){for(let m=0;m<8;m++)if(i instanceof x[m])return!0;return!1}}function C(x){return typeof x!="string"?x:x==="*"?"*":'"'+x+'"'}function N(x){return typeof x!="string"?x:x.replace(/^["']|["']$/g,"")}class ${constructor(i){if(this._revisionCache={},g=v.localStorageAvailable(),this.rs=i,this.connected=!1,this.addEvents(["connected","not-connected"]),g){const m=function(){const c=v.getJSONFromLocalStorage(y)||{},{userAddress:k,href:E,storageApi:I,token:q,properties:V}=c;return{userAddress:k,href:E,storageApi:I,token:q,properties:V}}();m&&setTimeout(()=>{this.configure(m)},0)}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}get storageType(){if(this.storageApi){const i=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return i?i[1]:"2012.04"}}_request(i,m,c,k,E,I,q){return a(this,void 0,void 0,function*(){if(function(F,O){return(F==="PUT"||F==="DELETE")&&v.isFolder(O)}(i,m))return Promise.reject(`Don't use ${i} on directories!`);let V;return c!==d.default.IMPLIED_FAKE_TOKEN&&(k.Authorization="Bearer "+c),this.rs._emit("wire-busy",{method:i,isFolder:v.isFolder(m)}),$.request(i,m,{body:E,headers:k,responseType:"arraybuffer"}).then(F=>{if(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:i,isFolder:v.isFolder(m),success:!0}),O=F.status,[401,403,404,412].indexOf(O)>=0)return S.default("[WireClient] Error response status",F.status),V=I?N(F.getResponseHeader("ETag")):void 0,F.status===401&&this.rs._emit("error",new A.default),Promise.resolve({statusCode:F.status,revision:V});if(function(L){return[201,204,304].indexOf(L)>=0}(F.status)||F.status===200&&i!=="GET")return V=N(F.getResponseHeader("ETag")),S.default("[WireClient] Successful request",V),Promise.resolve({statusCode:F.status,revision:V});{const L=F.getResponseHeader("Content-Type");V=I?N(F.getResponseHeader("ETag")):F.status===200?q:void 0;const h=function(p){let R,M="UTF-8";return p&&(R=p.match(/charset=(.+)$/),R&&(M=R[1])),M}(L);return v.shouldBeTreatedAsBinary(F.response,L)?(S.default("[WireClient] Successful request with unknown or binary mime-type",V),Promise.resolve({statusCode:F.status,body:F.response,contentType:L,revision:V})):v.getTextFromArrayBuffer(F.response,h).then(p=>(S.default("[WireClient] Successful request",V),Promise.resolve({statusCode:F.status,body:p,contentType:L,revision:V})))}var O},F=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:i,isFolder:v.isFolder(m),success:!1}),Promise.reject(F)))})}configure(i){if(typeof i!="object")throw new Error("WireClient configure settings parameter should be an object");if(i.userAddress!==void 0&&(this.userAddress=i.userAddress),i.href!==void 0&&(this.href=i.href),i.storageApi!==void 0&&(this.storageApi=i.storageApi),i.token!==void 0&&(this.token=i.token),i.properties!==void 0&&(this.properties=i.properties),typeof this.storageApi=="string"){const m=T[this.storageApi]||5;this.supportsRevs=m>=2}this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,g&&(localStorage[y]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(i,m={}){if(!this.connected)return Promise.reject("not connected (path: "+i+")");const c={};return this.supportsRevs&&m.ifNoneMatch&&(c["If-None-Match"]=C(m.ifNoneMatch)),this._request("GET",this.href+v.cleanPath(i),this.token,c,void 0,this.supportsRevs,this._revisionCache[i]).then(k=>{if(!v.isFolder(i))return Promise.resolve(k);let E={};if(k.body!==void 0)try{k.body=JSON.parse(k.body)}catch{return Promise.reject("Folder description at "+this.href+v.cleanPath(i)+" is not JSON")}if(k.statusCode===200&&typeof k.body=="object"){if(Object.keys(k.body).length===0)k.statusCode=404;else if((I=k.body)["@context"]==="http://remotestorage.io/spec/folder-description"&&typeof I.items=="object"){for(const q in k.body.items)this._revisionCache[i+q]=k.body.items[q].ETag;E=k.body.items}else Object.keys(k.body).forEach(q=>{this._revisionCache[i+q]=k.body[q],E[q]={ETag:k.body[q]}});return k.body=E,Promise.resolve(k)}return Promise.resolve(k);var I})}put(i,m,c,k={}){if(!this.connected)return Promise.reject("not connected (path: "+i+")");!c.match(/charset=/)&&(m instanceof ArrayBuffer||P(m))&&(c+="; charset=binary");const E={"Content-Type":c};return this.supportsRevs&&(k.ifMatch&&(E["If-Match"]=C(k.ifMatch)),k.ifNoneMatch&&(E["If-None-Match"]=C(k.ifNoneMatch))),this._request("PUT",this.href+v.cleanPath(i),this.token,E,m,this.supportsRevs)}delete(i,m={}){if(!this.connected)throw new Error("not connected (path: "+i+")");m||(m={});const c={};return this.supportsRevs&&m.ifMatch&&(c["If-Match"]=C(m.ifMatch)),this._request("DELETE",this.href+v.cleanPath(i),this.token,c,void 0,this.supportsRevs)}static request(i,m,c){return a(this,void 0,void 0,function*(){return typeof fetch=="function"?$._fetchRequest(i,m,c):typeof XMLHttpRequest=="function"?$._xhrRequest(i,m,c):(S.default("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"),Promise.reject("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"))})}static _fetchRequest(i,m,c){let k;const E={};let I;typeof AbortController=="function"&&(I=new AbortController);const q=fetch(m,{method:i,headers:c.headers,body:c.body,signal:I?I.signal:void 0}).then(F=>{switch(S.default("[WireClient fetch]",F),F.headers.forEach((O,L)=>{E[L.toUpperCase()]=O}),k={readyState:4,status:F.status,statusText:F.statusText,response:void 0,getResponseHeader:O=>E[O.toUpperCase()]||null,responseType:c.responseType,responseURL:m},c.responseType){case"arraybuffer":return F.arrayBuffer();case"blob":return F.blob();case"json":return F.json();case void 0:case"":case"text":return F.text();default:throw new Error("responseType 'document' is not currently supported using fetch")}}).then(F=>(k.response=F,c.responseType&&c.responseType!=="text"||(k.responseText=F),k)),V=new Promise((F,O)=>{setTimeout(()=>{O("timeout"),I&&I.abort()},_.default.requestTimeout)});return Promise.race([q,V])}static _xhrRequest(i,m,c){return new Promise((k,E)=>{S.default("[WireClient]",i,m);let I=!1;const q=setTimeout(()=>{I=!0,E("timeout")},_.default.requestTimeout),V=new XMLHttpRequest;if(V.open(i,m,!0),c.responseType&&(V.responseType=c.responseType),c.headers)for(const O in c.headers)V.setRequestHeader(O,c.headers[O]);V.onload=()=>{I||(clearTimeout(q),k(V))},V.onerror=O=>{I||(clearTimeout(q),E(O))};let F=c.body;typeof F=="object"&&!P(F)&&F instanceof ArrayBuffer&&(F=new Uint8Array(F)),V.send(F)})}static _rs_init(i){i.remote=new $(i),i.remote.online=!0}static _rs_supported(){return typeof fetch=="function"||typeof XMLHttpRequest=="function"}static _rs_cleanup(){g&&delete localStorage[y]}}$.isArrayBufferView=P,v.applyMixins($,[b.default]),r.exports=$}).call(this,s(5))},function(r,n,s){class o extends Error{constructor(l){super(),this.name="SyncError",this.message="Sync failed: ",typeof l=="string"?this.message+=l:(this.message+=l.message,this.stack=l.stack,this.originalError=l)}}r.exports=o},function(r,n,s){var o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};const a=o(s(2)),l=o(s(3)),d=o(s(1)),b=s(0);class A{constructor(){this._updateNodesRunning=!1,this._updateNodesQueued=[]}get(T,P,C){return typeof P=="number"?this.getNodes(b.pathsFromRoot(T)).then(N=>{const $=_(N[T]);return S(N,P)?C(T):$?{statusCode:200,body:$.body||$.itemsMap,contentType:$.contentType}:{statusCode:404}}):this.getNodes([T]).then(N=>{const $=_(N[T]);if($){if(b.isFolder(T))for(const x in $.itemsMap)$.itemsMap.hasOwnProperty(x)&&$.itemsMap[x]===!1&&delete $.itemsMap[x];return{statusCode:200,body:$.body||$.itemsMap,contentType:$.contentType}}return{statusCode:404}})}put(T,P,C){const N=b.pathsFromRoot(T);return this._updateNodes(N,function($,x){try{for(let i=0,m=$.length;i<m;i++){const c=$[i];let k,E=x[c];E||(x[c]=E=v(c)),i===0?(k=_(E),E.local={body:P,contentType:C,previousBody:k?k.body:void 0,previousContentType:k?k.contentType:void 0}):E=g(E,$[i-1].substring(c.length))}return x}catch(i){throw d.default("[Cachinglayer] Error during PUT",x,i),i}})}delete(T){const P=b.pathsFromRoot(T);return this._updateNodes(P,function(C,N){for(let $=0,x=C.length;$<x;$++){const i=C[$],m=N[i];let c;if(m)if($===0)c=_(m),m.local={body:!1,previousBody:c?c.body:void 0,previousContentType:c?c.contentType:void 0};else{m.local||(m.local=b.deepClone(m.common));const k=C[$-1].substring(i.length);if(delete m.local.itemsMap[k],Object.getOwnPropertyNames(m.local.itemsMap).length>0)break}else console.error("Cannot delete non-existing node "+i)}return N})}flush(T){return this._getAllDescendentPaths(T).then(P=>this.getNodes(P)).then(P=>{for(const C in P){const N=P[C];N&&N.common&&N.local&&this._emitChange({path:N.path,origin:"local",oldValue:N.local.body===!1?void 0:N.local.body,newValue:N.common.body===!1?void 0:N.common.body}),P[C]=void 0}return this.setNodes(P)})}_emitChange(T){l.default.changeEvents[T.origin]&&this._emit("change",T)}fireInitial(){l.default.changeEvents.local&&this.forAllNodes(T=>{if(b.isDocument(T.path)){const P=_(T);P&&this._emitChange({path:T.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:P.body,newContentType:P.contentType})}}).then(()=>{this._emit("local-events-done")})}onDiff(T){this.diffHandler=T}migrate(T){return typeof T!="object"||T.common||(T.common={},typeof T.path=="string"?T.path.substr(-1)==="/"&&typeof T.body=="object"&&(T.common.itemsMap=T.body):(T.local||(T.local={}),T.local.body=T.body,T.local.contentType=T.contentType)),T}_updateNodes(T,P){return new Promise((C,N)=>{this._doUpdateNodes(T,P,{resolve:C,reject:N})})}_doUpdateNodes(T,P,C){this._updateNodesRunning?this._updateNodesQueued.push({paths:T,cb:P,promise:C}):(this._updateNodesRunning=!0,this.getNodes(T).then(N=>{const $=b.deepClone(N),x=[];N=P(T,N);for(const i in N){const m=N[i];b.equal(m,$[i])?delete N[i]:b.isDocument(i)&&(b.equal(m.local.body,m.local.previousBody)&&m.local.contentType===m.local.previousContentType||x.push({path:i,origin:"window",oldValue:m.local.previousBody,newValue:m.local.body===!1?void 0:m.local.body,oldContentType:m.local.previousContentType,newContentType:m.local.contentType}),delete m.local.previousBody,delete m.local.previousContentType)}this.setNodes(N).then(()=>{this._emitChangeEvents(x),C.resolve({statusCode:200})})}).then(()=>Promise.resolve(),N=>{C.reject(N)}).then(()=>{this._updateNodesRunning=!1;const N=this._updateNodesQueued.shift();N&&this._doUpdateNodes(N.paths,N.cb,N.promise)}))}_emitChangeEvents(T){for(let P=0,C=T.length;P<C;P++)this._emitChange(T[P]),this.diffHandler&&this.diffHandler(T[P].path)}_getAllDescendentPaths(T){return b.isFolder(T)?this.getNodes([T]).then(P=>{const C=[T],N=_(P[T]),$=Object.keys(N.itemsMap).map(x=>this._getAllDescendentPaths(T+x).then(i=>{for(let m=0,c=i.length;m<c;m++)C.push(i[m])}));return Promise.all($).then(()=>C)}):Promise.resolve([T])}_getInternals(){return{getLatest:_,makeNode:v,isOutdated:S}}}function _(y){if(typeof y=="object"&&typeof y.path=="string")if(b.isFolder(y.path)){if(y.local&&y.local.itemsMap)return y.local;if(y.common&&y.common.itemsMap)return y.common}else{if(y.local){if(y.local.body&&y.local.contentType)return y.local;if(y.local.body===!1)return}if(y.common&&y.common.body&&y.common.contentType)return y.common;if(y.body&&y.contentType)return{body:y.body,contentType:y.contentType}}}function S(y,T){for(const P in y){if(y[P]&&y[P].remote)return!0;const C=_(y[P]);if(C&&C.timestamp&&new Date().getTime()-C.timestamp<=T)return!1;if(!C)return!0}return!0}function v(y){const T={path:y,common:{}};return b.isFolder(y)&&(T.common.itemsMap={}),T}function g(y,T){return y.common||(y.common={itemsMap:{}}),y.common.itemsMap||(y.common.itemsMap={}),y.local||(y.local=b.deepClone(y.common)),y.local.itemsMap||(y.local.itemsMap=y.common.itemsMap),y.local.itemsMap[T]=!0,y}b.applyMixins(A,[a.default]),r.exports=A},function(r,n,s){r.exports=class{constructor(){this.reset()}static _rs_init(){}get scopes(){return Object.keys(this.scopeModeMap).map(o=>({name:o,mode:this.scopeModeMap[o]}))}get scopeParameter(){return this.scopes.map(o=>`${this._scopeNameForParameter(o)}:${o.mode}`).join(" ")}claim(o,a){if(typeof o!="string"||o.indexOf("/")!==-1||o.length===0)throw new Error("Scope should be a non-empty string without forward slashes");if(!a.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(o),this.scopeModeMap[o]=a}get(o){return this.scopeModeMap[o]}remove(o){const a={};for(const l in this.scopeModeMap)a[l]=this.scopeModeMap[l];this.reset(),delete a[o];for(const l in a)this.claim(l,a[l])}checkPermission(o,a){const l=this.get(o);return l&&(a==="r"||l==="rw")}checkPathPermission(o,a){if(this.checkPermission("*",a))return!0;const l=this._getModuleName(o);return!!this.checkPermission(l,a)}reset(){this.rootPaths=[],this.scopeModeMap={}}_getModuleName(o){if(o[0]!=="/")throw new Error("Path should start with a slash");const a=o.replace(/^\/public/,"").match(/^\/([^/]*)\//);return a?a[1]:"*"}_adjustRootPaths(o){"*"in this.scopeModeMap||o==="*"?this.rootPaths=["/"]:o in this.scopeModeMap||(this.rootPaths.push("/"+o+"/"),this.rootPaths.push("/public/"+o+"/"))}_scopeNameForParameter(o){if(o.name==="*"&&this.storageType){if(this.storageType==="2012.04")return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return o.name}setStorageType(o){this.storageType=o}}},function(r,n,s){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};const a=s(0),l=o(s(1));r.exports=class{constructor(){this.pendingActivations=[],this.reset()}set(d,b){if(typeof d!="string")throw new Error("path should be a string");if(!a.isFolder(d))throw new Error("path should be a folder");if(!b.match(/^(FLUSH|SEEN|ALL)$/))throw new Error("strategy should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[d]=b,b==="ALL"&&(this.activateHandler?this.activateHandler(d):this.pendingActivations.push(d))}enable(d){this.set(d,"ALL")}disable(d){this.set(d,"FLUSH")}onActivate(d){l.default("[Caching] Setting activate handler",d,this.pendingActivations),this.activateHandler=d;for(let b=0;b<this.pendingActivations.length;b++)d(this.pendingActivations[b]);this.pendingActivations=[]}checkPath(d){return this._rootPaths[d]!==void 0?this._rootPaths[d]:d==="/"?"SEEN":this.checkPath(a.containingFolder(d))}reset(){this._rootPaths={}}static _rs_init(){}}},function(r,n,s){var o=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};const a=o(s(7)),l=o(s(8)),d=o(s(2)),b=s(0),A="https://www.googleapis.com",_="remotestorage:googledrive";let S;function v($){return $.substr(-1)==="/"&&($=$.substr(0,$.length-1)),decodeURIComponent($)}function g($){return $.replace(/[^\/]+\/?$/,"")}function y($){const x=$.split("/");return $.substr(-1)==="/"?x[x.length-2]+"/":x[x.length-1]}function T($){return b.cleanPath("/remotestorage/"+$)}function P($){return $.replace(/^["'](.*)["']$/,"$1")}class C{constructor(x){this._items={},this.maxAge=x,this._items={}}get(x){const i=this._items[x],m=new Date().getTime();return i&&i.t>=m-this.maxAge?i.v:void 0}set(x,i){this._items[x]={v:i,t:new Date().getTime()}}}class N{constructor(x,i){if(this.connected=!1,this.online=!0,this.addEvents(["connected","not-connected"]),this.rs=x,this.clientId=i,this._fileIdCache=new C(300),S=b.localStorageAvailable(),S){const m=b.getJSONFromLocalStorage(_);m&&this.configure(m)}}configure(x){x.userAddress!==void 0&&(this.userAddress=x.userAddress),x.token!==void 0&&(this.token=x.token);const i=function(){S&&localStorage.setItem(_,JSON.stringify({userAddress:this.userAddress,token:this.token}))},m=function(){this.connected=!1,delete this.token,S&&localStorage.removeItem(_)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),i.apply(this)):this.info().then(c=>{this.userAddress=c.user.emailAddress,this._emit("connected"),i.apply(this)}).catch(()=>{m.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))})):m.apply(this)}connect(){this.rs.setBackend("googledrive"),this.rs.authorize({authURL:"https://accounts.google.com/o/oauth2/auth",scope:"https://www.googleapis.com/auth/drive",clientId:this.clientId})}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(x,i){return b.isFolder(x)?this._getFolder(T(x)):this._getFile(T(x),i)}put(x,i,m,c){const k=T(x);function E(I){if(I.status>=200&&I.status<300){const q=JSON.parse(I.responseText),V=P(q.etag);return Promise.resolve({statusCode:200,contentType:q.mimeType,revision:V})}return I.status===412?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+I.status+" ("+I.responseText+")")}return this._getFileId(k).then(I=>I?c&&c.ifNoneMatch==="*"?E({status:412}):this._updateFile(I,k,i,m,c).then(E):this._createFile(k,i,m).then(E))}delete(x,i){const m=T(x);return this._getFileId(m).then(c=>c?this._getMeta(c).then(k=>{let E;return typeof k=="object"&&typeof k.etag=="string"&&(E=P(k.etag)),i&&i.ifMatch&&i.ifMatch!==E?{statusCode:412,revision:E}:this._request("DELETE",A+"/drive/v2/files/"+c,{}).then(I=>I.status===200||I.status===204?{statusCode:200}:Promise.reject("Delete failed: "+I.status+" ("+I.responseText+")"))}):Promise.resolve({statusCode:200}))}info(){return this._request("GET","https://www.googleapis.com/drive/v2/about?fields=user",{}).then(function(x){try{const i=JSON.parse(x.responseText);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})}_updateFile(x,i,m,c,k){const E={mimeType:c},I={"Content-Type":"application/json; charset=UTF-8"};return k&&k.ifMatch&&(I["If-Match"]='"'+k.ifMatch+'"'),this._request("PUT",A+"/upload/drive/v2/files/"+x+"?uploadType=resumable",{body:JSON.stringify(E),headers:I}).then(q=>q.status===412?q:this._request("PUT",q.getResponseHeader("Location"),{body:c.match(/^application\/json/)?JSON.stringify(m):m}))}_createFile(x,i,m){return this._getParentId(x).then(c=>{const k={title:v(y(x)),mimeType:m,parents:[{kind:"drive#fileLink",id:c}]};return this._request("POST",A+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(k),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(E=>this._request("POST",E.getResponseHeader("Location"),{body:m.match(/^application\/json/)?JSON.stringify(i):i}))})}_getFile(x,i){return this._getFileId(x).then(m=>this._getMeta(m).then(c=>{let k;if(typeof c=="object"&&typeof c.etag=="string"&&(k=P(c.etag)),i&&i.ifNoneMatch&&k===i.ifNoneMatch)return Promise.resolve({statusCode:304});if(!c.downloadUrl){if(!c.exportLinks||!c.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:c.mimeType,revision:k});c.mimeType+=";export=text/html",c.downloadUrl=c.exportLinks["text/html"]}return this._request("GET",c.downloadUrl,{responseType:"arraybuffer"}).then(E=>b.getTextFromArrayBuffer(E.response,"UTF-8").then(function(I){let q=I;if(c.mimeType.match(/^application\/json/))try{q=JSON.parse(q)}catch{}else b.shouldBeTreatedAsBinary(I,c.mimeType)&&(q=E.response);return{statusCode:200,body:q,contentType:c.mimeType,revision:k}}))}))}_getFolder(x){return this._getFileId(x).then(i=>{let m,c,k;if(!i)return Promise.resolve({statusCode:404});const E="'"+i+"' in parents";return this._request("GET",A+"/drive/v2/files?q="+encodeURIComponent(E)+"&fields="+encodeURIComponent("items(downloadUrl,etag,fileSize,id,mimeType,title,labels)")+"&maxResults=1000&trashed=false",{}).then(I=>{var q;if(I.status!==200)return Promise.reject("request failed or something: "+I.status);try{m=JSON.parse(I.responseText)}catch{return Promise.reject("non-JSON response from GoogleDrive")}k={};for(const V of m.items)!((q=V.labels)===null||q===void 0)&&q.trashed||(c=P(V.etag),V.mimeType==="application/vnd.google-apps.folder"?(this._fileIdCache.set(x+b.cleanPath(V.title)+"/",V.id),k[V.title+"/"]={ETag:c}):(this._fileIdCache.set(x+b.cleanPath(V.title),V.id),k[V.title]={ETag:c,"Content-Type":V.mimeType,"Content-Length":V.fileSize}));return Promise.resolve({statusCode:200,body:k,contentType:"application/json; charset=UTF-8",revision:void 0})})})}_getParentId(x){const i=g(x);return this._getFileId(i).then(m=>m?Promise.resolve(m):this._createFolder(i))}_createFolder(x){return this._getParentId(x).then(i=>this._request("POST",A+"/drive/v2/files",{body:JSON.stringify({title:v(y(x)),mimeType:"application/vnd.google-apps.folder",parents:[{id:i}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(m=>{const c=JSON.parse(m.responseText);return Promise.resolve(c.id)}))}_getFileId(x){let i;return x==="/"?Promise.resolve("root"):(i=this._fileIdCache.get(x))?Promise.resolve(i):this._getFolder(g(x)).then(()=>(i=this._fileIdCache.get(x),i?Promise.resolve(i):x.substr(-1)==="/"?this._createFolder(x).then(()=>this._getFileId(x)):Promise.resolve()))}_getMeta(x){return this._request("GET",A+"/drive/v2/files/"+x,{}).then(function(i){return i.status===200?Promise.resolve(JSON.parse(i.responseText)):Promise.reject("request (getting metadata for "+x+") failed with status: "+i.status)})}_request(x,i,m){return m.headers||(m.headers={}),m.headers.Authorization="Bearer "+this.token,this.rs._emit("wire-busy",{method:x,isFolder:b.isFolder(i)}),l.default.request.call(this,x,i,m).then(c=>c&&c.status===401?void this.connect():(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:x,isFolder:b.isFolder(i),success:!0}),Promise.resolve(c)),c=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:x,isFolder:b.isFolder(i),success:!1}),Promise.reject(c)))}static _rs_init(x){const i=x.apiKeys.googledrive;var m;i&&(x.googledrive=new N(x,i.clientId),x.backend==="googledrive"&&(x._origRemote=x.remote,x.remote=x.googledrive,(m=x)._origBaseClientGetItemURL||(m._origBaseClientGetItemURL=a.default.prototype.getItemURL,a.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Google Drive yet")})))}static _rs_supported(){return!0}static _rs_cleanup(x){var i;x.setBackend(void 0),x._origRemote&&(x.remote=x._origRemote,delete x._origRemote),(i=x)._origBaseClientGetItemURL&&(a.default.prototype.getItemURL=i._origBaseClientGetItemURL,delete i._origBaseClientGetItemURL)}}b.applyMixins(N,[d.default]),r.exports=N},function(r,n,s){var o=this&&this.__awaiter||function(m,c,k,E){return new(k||(k=Promise))(function(I,q){function V(L){try{O(E.next(L))}catch(h){q(h)}}function F(L){try{O(E.throw(L))}catch(h){q(h)}}function O(L){var h;L.done?I(L.value):(h=L.value,h instanceof k?h:new k(function(p){p(h)})).then(V,F)}O((E=E.apply(m,c||[])).next())})},a=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};const l=a(s(2)),d=a(s(8)),b=a(s(7)),A=a(s(26)),_=a(s(9)),S=a(s(4)),v=s(0);let g;const y="remotestorage:dropbox";function T(m){return v.cleanPath("/remotestorage/"+m).replace(/\/$/,"")}function P(m,c){return new RegExp("^"+c.join("\\/")+"(\\/|$)").test(m.error_summary)}function C(m){return m instanceof ArrayBuffer||d.default.isArrayBufferView(m)}class N{constructor(c){if(this.rs=c,this.connected=!1,this.online=!0,this._initialFetchDone=!1,this.addEvents(["connected","not-connected"]),this.clientId=c.apiKeys.dropbox.appKey,this._revCache=new A.default("rev"),this._fetchDeltaCursor=null,this._fetchDeltaPromise=null,this._itemRefs={},g=v.localStorageAvailable(),g){const k=v.getJSONFromLocalStorage(y);k&&this.configure(k),this._itemRefs=v.getJSONFromLocalStorage(y+":shares")||{}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}connect(){this.rs.setBackend("dropbox"),this.token?i(this.rs):this.rs.authorize({authURL:"https://www.dropbox.com/oauth2/authorize",scope:"",clientId:this.clientId})}configure(c){c.userAddress!==void 0&&(this.userAddress=c.userAddress),c.token!==void 0&&(this.token=c.token);const k=function(){g&&localStorage.setItem(y,JSON.stringify({userAddress:this.userAddress,token:this.token}))},E=function(){this.connected=!1,g&&localStorage.removeItem(y)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),k.apply(this)):this.info().then(function(I){this.userAddress=I.email,this._emit("connected"),k.apply(this)}.bind(this)).catch(function(){E.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))}.bind(this))):E.apply(this)}stopWaitingForToken(){this.connected||this._emit("not-connected")}_getFolder(c){const k=this._revCache,E=q=>{let V;if(q.status!==200&&q.status!==409)return Promise.reject("Unexpected response status: "+q.status);try{V=JSON.parse(q.responseText)}catch(O){return Promise.reject(O)}if(q.status===409)return P(V,["path","not_found"])?Promise.resolve({}):Promise.reject(new Error("API returned an error: "+V.error_summary));const F=V.entries.reduce((O,L)=>{const h=L[".tag"]==="folder",p=L.path_lower.split("/").slice(-1)[0]+(h?"/":"");return h?O[p]={ETag:k.get(c+p)}:(O[p]={ETag:L.rev},this._revCache.set(c+p,L.rev)),O},{});return V.has_more?I(V.cursor).then(function(O){return Object.assign(F,O)}):Promise.resolve(F)},I=q=>{const V={body:{cursor:q}};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder/continue",V).then(E)};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder",{body:{path:T(c)}}).then(E).then(function(q){return Promise.resolve({statusCode:200,body:q,contentType:"application/json; charset=UTF-8",revision:k.get(c)})})}get(c,k){if(!this.connected)return Promise.reject("not connected (path: "+c+")");const E=this._revCache.get(c);if(E===null)return Promise.resolve({statusCode:404});if(k&&k.ifNoneMatch){if(!this._initialFetchDone)return this.fetchDelta().then(()=>this.get(c,k));if(E&&E===k.ifNoneMatch)return Promise.resolve({statusCode:304})}if(c.substr(-1)==="/")return this._getFolder(c);const I={headers:{"Dropbox-API-Arg":JSON.stringify({path:T(c)})},responseType:"arraybuffer"};return k&&k.ifNoneMatch&&(I.headers["If-None-Match"]=k.ifNoneMatch),this._request("GET","https://content.dropboxapi.com/2/files/download",I).then(q=>{const V=q.status;let F,O,L,h;return V!==200&&V!==409?Promise.resolve({statusCode:V}):(F=q.getResponseHeader("Dropbox-API-Result"),v.getTextFromArrayBuffer(q.response,"UTF-8").then(p=>{O=p,V===409&&(F=O);try{F=JSON.parse(F)}catch(R){return Promise.reject(R)}if(V===409)return P(F,["path","not_found"])?{statusCode:404}:Promise.reject(new Error('API error while downloading file ("'+c+'"): '+F.error_summary));if(L=q.getResponseHeader("Content-Type"),h=F.rev,this._revCache.set(c,h),this._shareIfNeeded(c),v.shouldBeTreatedAsBinary(p,L))O=q.response;else try{O=JSON.parse(O),L="application/json; charset=UTF-8"}catch{}return{statusCode:V,body:O,contentType:L,revision:h}}))})}put(c,k,E,I){if(!this.connected)throw new Error("not connected (path: "+c+")");const q=this._revCache.get(c);if(I&&I.ifMatch&&q&&q!==I.ifMatch)return Promise.resolve({statusCode:412,revision:q});if(I&&I.ifNoneMatch==="*"&&q&&q!=="rev")return Promise.resolve({statusCode:412,revision:q});if(!E.match(/charset=/)&&C(k)&&(E+="; charset=binary"),k.length>157286400)return Promise.reject(new Error("Cannot upload file larger than 150MB"));let V;const F=I&&(I.ifMatch||I.ifNoneMatch==="*"),O={body:k,contentType:E,path:c};return V=F?this._getMetadata(c).then(L=>I&&I.ifNoneMatch==="*"&&L||I&&I.ifMatch&&L&&L.rev!==I.ifMatch?Promise.resolve({statusCode:412,revision:L.rev}):this._uploadSimple(O)):this._uploadSimple(O),V.then(L=>(this._shareIfNeeded(c),L))}delete(c,k){if(!this.connected)throw new Error("not connected (path: "+c+")");const E=this._revCache.get(c);return k&&k.ifMatch&&E&&k.ifMatch!==E?Promise.resolve({statusCode:412,revision:E}):k&&k.ifMatch?this._getMetadata(c).then(I=>k&&k.ifMatch&&I&&I.rev!==k.ifMatch?Promise.resolve({statusCode:412,revision:I.rev}):this._deleteSimple(c)):this._deleteSimple(c)}_shareIfNeeded(c){c.match(/^\/public\/.*[^/]$/)&&this._itemRefs[c]===void 0&&this.share(c)}share(c){const k={body:{path:T(c)}};return this._request("POST","https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings",k).then(E=>{if(E.status!==200&&E.status!==409)return Promise.reject(new Error("Invalid response status:"+E.status));let I;try{I=JSON.parse(E.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+E.responseText))}return E.status===409?P(I,["shared_link_already_exists"])?this._getSharedLink(c):Promise.reject(new Error("API error: "+I.error_summary)):Promise.resolve(I.url)}).then(E=>(this._itemRefs[c]=E,g&&localStorage.setItem(y+":shares",JSON.stringify(this._itemRefs)),Promise.resolve(E)),E=>(E.message='Sharing Dropbox file or folder ("'+c+'") failed: '+E.message,Promise.reject(E)))}info(){return this._request("POST","https://api.dropboxapi.com/2/users/get_current_account",{}).then(function(c){let k=c.responseText;try{k=JSON.parse(k)}catch{return Promise.reject(new Error("Could not query current account info: Invalid API response: "+k))}return Promise.resolve({email:k.email})})}_request(c,k,E){return E.headers||(E.headers={}),E.headers.Authorization="Bearer "+this.token,typeof E.body!="object"||C(E.body)||(E.body=JSON.stringify(E.body),E.headers["Content-Type"]="application/json; charset=UTF-8"),this.rs._emit("wire-busy",{method:c,isFolder:v.isFolder(k)}),d.default.request.call(this,c,k,E).then(I=>I&&I.status===503?(this.online&&(this.online=!1,this.rs._emit("network-offline")),setTimeout(this._request(c,k,E),3210)):(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:c,isFolder:v.isFolder(k),success:!0}),Promise.resolve(I)),I=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:c,isFolder:v.isFolder(k),success:!1}),Promise.reject(I)))}fetchDelta(...c){if(this._fetchDeltaPromise)return this._fetchDeltaPromise;const k=E=>{let I,q="https://api.dropboxapi.com/2/files/list_folder";return typeof E=="string"?(q+="/continue",I={cursor:E}):I={path:"/remotestorage",recursive:!0,include_deleted:!0},this._request("POST",q,{body:I}).then(V=>{if(V.status===401)return this.rs._emit("error",new S.default),Promise.resolve(c);if(V.status!==200&&V.status!==409)return Promise.reject(new Error("Invalid response status: "+V.status));let F;try{F=JSON.parse(V.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+V.responseText))}if(V.status===409){if(!P(F,["path","not_found"]))return Promise.reject(new Error("API returned an error: "+F.error_summary));F={cursor:null,entries:[],has_more:!1}}if(E||this._revCache.deactivatePropagation(),F.entries.forEach(O=>{const L=O.path_lower.substr(14);O[".tag"]==="deleted"?(this._revCache.delete(L),this._revCache.delete(L+"/")):O[".tag"]==="file"&&this._revCache.set(L,O.rev)}),this._fetchDeltaCursor=F.cursor,F.has_more)return k(F.cursor);this._revCache.activatePropagation(),this._initialFetchDone=!0}).catch(V=>V==="timeout"||V instanceof ProgressEvent?Promise.resolve():Promise.reject(V))};return this._fetchDeltaPromise=k(this._fetchDeltaCursor).catch(E=>(typeof E=="object"&&"message"in E?E.message="Dropbox: fetchDelta: "+E.message:E="Dropbox: fetchDelta: "+E,this._fetchDeltaPromise=null,Promise.reject(E))).then(()=>(this._fetchDeltaPromise=null,Promise.resolve(c))),this._fetchDeltaPromise}_getMetadata(c){const k={path:T(c)};return this._request("POST","https://api.dropboxapi.com/2/files/get_metadata",{body:k}).then(E=>{if(E.status!==200&&E.status!==409)return Promise.reject(new Error("Invalid response status:"+E.status));let I;try{I=JSON.parse(E.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+E.responseText))}return E.status===409?P(I,["path","not_found"])?Promise.resolve():Promise.reject(new Error("API error: "+I.error_summary)):Promise.resolve(I)}).then(void 0,E=>(E.message='Could not load metadata for file or folder ("'+c+'"): '+E.message,Promise.reject(E)))}_uploadSimple(c){const k={path:T(c.path),mode:{".tag":"overwrite",update:void 0},mute:!0};return c.ifMatch&&(k.mode={".tag":"update",update:c.ifMatch}),this._request("POST","https://content.dropboxapi.com/2/files/upload",{body:c.body,headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":JSON.stringify(k)}}).then(E=>{if(E.status!==200&&E.status!==409)return Promise.resolve({statusCode:E.status});let I=E.responseText;try{I=JSON.parse(I)}catch{return Promise.reject(new Error("Invalid API result: "+I))}return E.status===409?P(I,["path","conflict"])?this._getMetadata(c.path).then(function(q){return Promise.resolve({statusCode:412,revision:q.rev})}):Promise.reject(new Error("API error: "+I.error_summary)):(this._revCache.set(c.path,I.rev),Promise.resolve({statusCode:E.status,revision:I.rev}))})}_deleteSimple(c){const k={path:T(c)};return this._request("POST","https://api.dropboxapi.com/2/files/delete",{body:k}).then(E=>{if(E.status!==200&&E.status!==409)return Promise.resolve({statusCode:E.status});let I=E.responseText;try{I=JSON.parse(I)}catch{return Promise.reject(new Error("Invalid response body: "+I))}return E.status===409?P(I,["path_lookup","not_found"])?Promise.resolve({statusCode:404}):Promise.reject(new Error("API error: "+I.error_summary)):Promise.resolve({statusCode:200})}).then(E=>(E.statusCode!==200&&E.statusCode!==404||(this._revCache.delete(c),delete this._itemRefs[c]),Promise.resolve(E)),E=>(E.message='Could not delete Dropbox file or folder ("'+c+'"): '+E.message,Promise.reject(E)))}_getSharedLink(c){return o(this,void 0,void 0,function*(){const k={body:{path:T(c),direct_only:!0}};return this._request("POST","https://api.dropbox.com/2/sharing/list_shared_links",k).then(E=>{if(E.status!==200&&E.status!==409)return Promise.reject(new Error("Invalid response status: "+E.status));let I;try{I=JSON.parse(E.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+E.responseText))}return E.status===409?Promise.reject(new Error("API error: "+E.error_summary)):I.links.length?Promise.resolve(I.links[0].url):Promise.reject(new Error("No links returned"))},E=>(E.message='Could not get link to a shared file or folder ("'+c+'"): '+E.message,Promise.reject(E)))})}static _rs_init(c){g=v.localStorageAvailable(),c.apiKeys.dropbox&&(c.dropbox=new N(c)),c.backend==="dropbox"&&i(c)}static _rs_supported(){return!0}static _rs_cleanup(c){(function(k){(function(E){E._origRemote&&(E.remote=E._origRemote,delete E._origRemote)})(k),function(E){!E._dropboxOrigSync||(E.sync.sync=E._dropboxOrigSync,delete E._dropboxOrigSync)}(k),function(E){!E._origBaseClientGetItemURL||(b.default.prototype.getItemURL=E._origBaseClientGetItemURL,delete E._origBaseClientGetItemURL)}(k),x(k)})(c),g&&localStorage.removeItem(y),c.setBackend(void 0)}}function $(m,...c){m._dropboxOrigSync||(m._dropboxOrigSync=m.sync.sync.bind(m.sync),m.sync.sync=function(){return this.dropbox.fetchDelta(m,...c).then(m._dropboxOrigSync,function(k){m._emit("error",new _.default(k)),m._emit("sync-done")})}.bind(m))}function x(m){m._dropboxOrigSyncCycle&&(m.syncCycle=m._dropboxOrigSyncCycle,delete m._dropboxOrigSyncCycle)}function i(m){(function(c){c._origRemote||(c._origRemote=c.remote,c.remote=c.dropbox)})(m),m.sync?$(m):function(c,...k){c._dropboxOrigSyncCycle||(c._dropboxOrigSyncCycle=c.syncCycle,c.syncCycle=()=>{if(!c.sync)throw new Error("expected sync to be initialized by now");$(c),c._dropboxOrigSyncCycle(c,...k),x(c)})}(m),function(c){c._origBaseClientGetItemURL||(c._origBaseClientGetItemURL=b.default.prototype.getItemURL,b.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Dropbox yet")})}(m)}v.applyMixins(N,[l.default]),r.exports=N},function(r,n,s){var o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};const a=o(s(27)),l=o(s(1)),d=s(0);let b,A,_={};const S=function(v){return new Promise((g,y)=>v in _?g(_[v]):new a.default({tls_only:!1,uri_fallback:!0,request_timeout:5e3}).lookup(v,function(T,P){if(T)return y(T);if(typeof P.idx.links.remotestorage!="object"||typeof P.idx.links.remotestorage.length!="number"||P.idx.links.remotestorage.length<=0)return l.default("[Discover] WebFinger record for "+v+" does not have remotestorage defined in the links section ",JSON.stringify(P.json)),y("WebFinger record for "+v+" does not have remotestorage defined in the links section.");const C=P.idx.links.remotestorage[0],N=C.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||C.properties["auth-endpoint"],$=C.properties["http://remotestorage.io/spec/version"]||C.type;return _[v]={href:C.href,storageApi:$,authURL:N,properties:C.properties},A&&(localStorage["remotestorage:discover"]=JSON.stringify({cache:_})),g(_[v])}))};(S.DiscoveryError=function(v){this.name="DiscoveryError",this.message=v,this.stack=new Error().stack}).prototype=Object.create(Error.prototype),S.DiscoveryError.prototype.constructor=S.DiscoveryError,S._rs_init=function(){if(A=d.localStorageAvailable(),A)try{_=JSON.parse(localStorage["remotestorage:discover"]).cache}catch{}},S._rs_supported=function(){return b=Object.prototype.hasOwnProperty.call(d.globalContext,"XMLHttpRequest"),b},S._rs_cleanup=function(){A&&delete localStorage["remotestorage:discover"]},r.exports=S},function(r,n,s){const o=(this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}})(s(2)),a=s(0);class l{constructor(){this.addEvents(["background","foreground"]),this.mode=typeof window!="undefined"?"browser":"node",this.mode==="browser"&&(this.setBrowserPrefixedNames(),document.addEventListener(this.visibilityChangeEvent,this.setVisibility.bind(this),!1),this.setVisibility())}setBrowserPrefixedNames(){this.mode==="browser"&&(document.hidden!==void 0?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):document.mozHidden!==void 0?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange"):document.msHidden!==void 0?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):document.webkitHidden!==void 0&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"))}setVisibility(){document[this.hiddenProperty]?this.goBackground():this.goForeground()}isBrowser(){return this.mode==="browser"}isNode(){return this.mode==="node"}goBackground(){this._emit("background")}goForeground(){this._emit("foreground")}static _rs_init(){}static _rs_cleanup(){}}a.applyMixins(l,[o.default]),r.exports=l},function(r,n,s){r.exports=s(18)},function(r,n,s){var o=this&&this.__createBinding||(Object.create?function(F,O,L,h){h===void 0&&(h=L),Object.defineProperty(F,h,{enumerable:!0,get:function(){return O[L]}})}:function(F,O,L,h){h===void 0&&(h=L),F[h]=O[L]}),a=this&&this.__setModuleDefault||(Object.create?function(F,O){Object.defineProperty(F,"default",{enumerable:!0,value:O})}:function(F,O){F.default=O}),l=this&&this.__importStar||function(F){if(F&&F.__esModule)return F;var O={};if(F!=null)for(var L in F)L!=="default"&&Object.hasOwnProperty.call(F,L)&&o(O,F,L);return a(O,F),O},d=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};const b=d(s(3)),A=d(s(1)),_=s(0),S=d(s(11)),v=d(s(6)),g=d(s(7)),y=d(s(12)),T=d(s(2)),P=d(s(13)),C=d(s(14)),N=d(s(15)),$=d(s(9)),x=d(s(4)),i=d(s(29)),m=l(s(0)),c=_.getGlobalContext();let k;function E(F){return F.statusCode!==403&&F.statusCode!==401||this._emit("error",new x.default),Promise.resolve(F)}function I(F){return typeof F=="number"&&F>=2e3&&F<=36e5}class q{constructor(O){this._pending=[],this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this._init=i.default.loadFeatures,this.features=i.default.features,this.loadFeature=i.default.loadFeature,this.featureSupported=i.default.featureSupported,this.featureDone=i.default.featureDone,this.featuresDone=i.default.featuresDone,this.featuresLoaded=i.default.featuresLoaded,this.featureInitialized=i.default.featureInitialized,this.featureFailed=i.default.featureFailed,this.hasFeature=i.default.hasFeature,this._setCachingModule=i.default._setCachingModule,this._collectCleanupFunctions=i.default._collectCleanupFunctions,this._fireReady=i.default._fireReady,this.initFeature=i.default.initFeature,typeof O=="object"&&_.extend(b.default,O),this.addEvents(["ready","authing","connecting","connected","disconnected","not-connected","conflict","error","features-loaded","sync-interval-change","sync-req-done","sync-done","wire-busy","wire-done","network-offline","network-online"]),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")}),k=_.localStorageAvailable(),k&&(this.apiKeys=_.getJSONFromLocalStorage("remotestorage:api-keys")||{},this.setBackend(localStorage.getItem("remotestorage:backend")||"remotestorage"));const L=this.on;this.on=function(h,p){if(this._allLoaded)switch(h){case"features-loaded":setTimeout(p,0);break;case"ready":this.remote&&setTimeout(p,0);break;case"connected":this.remote&&this.remote.connected&&setTimeout(p,0);break;case"not-connected":this.remote&&!this.remote.connected&&setTimeout(p,0)}return L.call(this,h,p)},this._init(),this.fireInitial=function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}.bind(this),this.on("ready",this.fireInitial.bind(this)),this.loadModules()}get connected(){return this.remote.connected}loadModules(){b.default.modules.forEach(this.addModule.bind(this))}authorize(O){if(this.access.setStorageType(this.remote.storageApi),O.scope===void 0&&(O.scope=this.access.scopeParameter),c.cordova)O.redirectUri=b.default.cordovaRedirectUri;else{const L=v.default.getLocation();let h=L.origin;L.pathname!=="/"&&(h+=L.pathname),O.redirectUri=h}O.clientId===void 0&&(O.clientId=O.redirectUri.match(/^(https?:\/\/[^/]+)/)[0]),v.default.authorize(this,O)}impliedauth(O,L){O=O||this.remote.storageApi,L=L||String(document.location),A.default("ImpliedAuth proceeding due to absent authURL; storageApi = "+O+" redirectUri = "+L),this.remote.configure({token:v.default.IMPLIED_FAKE_TOKEN}),document.location.href=L}connect(O,L){if(this.setBackend("remotestorage"),O.indexOf("@")<0&&!O.match(/^(https?:\/\/)?[^\s\/$\.?#]+\.[^\s]*$/))return void this._emit("error",new q.DiscoveryError("Not a valid user address or URL."));if(O.indexOf("@")<0&&!O.match(/^https?:\/\//)&&(O="https://"+O),c.cordova){if(typeof b.default.cordovaRedirectUri!="string")return void this._emit("error",new q.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));if(!c.cordova.InAppBrowser)return void this._emit("error",new q.DiscoveryError("Please include the InAppBrowser Cordova plugin to enable OAuth"))}this.remote.configure({userAddress:O}),this._emit("connecting");const h=setTimeout(()=>{this._emit("error",new q.DiscoveryError("No storage information found for this user address."))},b.default.discoveryTimeout);N.default(O).then(p=>{if(clearTimeout(h),this._emit("authing"),p.userAddress=O,this.remote.configure(p),!this.remote.connected)if(p.authURL)if(L===void 0)this.authorize({authURL:p.authURL});else{if(typeof L!="string")throw new Error("Supplied bearer token must be a string");A.default("Skipping authorization sequence and connecting with known token"),this.remote.configure({token:L})}else this.impliedauth()},()=>{clearTimeout(h),this._emit("error",new q.DiscoveryError("No storage information found for this user address."))})}reconnect(){this.remote.configure({token:null}),this.backend==="remotestorage"?this.connect(this.remote.userAddress):this.remote.connect()}disconnect(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")});const O=this._cleanups.length;let L=0;const h=()=>{L++,L>=O&&(this._init(),this._emit("disconnected"))};O>0?this._cleanups.forEach(p=>{const R=p(this);typeof R=="object"&&typeof R.then=="function"?R.then(h):h()}):h()}setBackend(O){this.backend=O,k&&(O?localStorage.setItem("remotestorage:backend",O):localStorage.removeItem("remotestorage:backend"))}onChange(O,L){this._pathHandlers.change[O]||(this._pathHandlers.change[O]=[]),this._pathHandlers.change[O].push(L)}enableLog(){b.default.logging=!0}disableLog(){b.default.logging=!1}log(...O){A.default.apply(q,O)}setApiKeys(O){const L=[V.GOOGLE,V.DROPBOX];if(typeof O!="object"||!Object.keys(O).every(h=>L.includes(h)))return console.error("setApiKeys() was called with invalid arguments"),!1;Object.keys(O).forEach(h=>{const p=O[h];if(p){switch(h){case V.DROPBOX:this.apiKeys[V.DROPBOX]={appKey:p},this.dropbox!==void 0&&this.dropbox.clientId===p||C.default._rs_init(this);break;case V.GOOGLE:this.apiKeys[V.GOOGLE]={clientId:p},this.googledrive!==void 0&&this.googledrive.clientId===p||P.default._rs_init(this)}return!0}delete this.apiKeys[h]}),k&&localStorage.setItem("remotestorage:api-keys",JSON.stringify(this.apiKeys))}setCordovaRedirectUri(O){if(typeof O!="string"||!O.match(/http(s)?:\/\//))throw new Error("Cordova redirect URI must be a URI string");b.default.cordovaRedirectUri=O}_setGPD(O,L){function h(p){return function(...R){return p.apply(L,R).then(E.bind(this))}}this.get=h(O.get),this.put=h(O.put),this.delete=h(O.delete)}_pendingGPD(O){return(...L)=>{const h=Array.prototype.slice.call(L);return new Promise((p,R)=>{this._pending.push({method:O,args:h,promise:{resolve:p,reject:R}})})}}_processPending(){this._pending.forEach(O=>{try{this[O.method](...O.args).then(O.promise.resolve,O.promise.reject)}catch(L){O.promise.reject(L)}}),this._pending=[]}_bindChange(O){O.on("change",this._dispatchEvent.bind(this,"change"))}_dispatchEvent(O,L){Object.keys(this._pathHandlers[O]).forEach(h=>{const p=h.length;L.path.substr(0,p)===h&&this._pathHandlers[O][h].forEach(R=>{const M={};for(const j in L)M[j]=L[j];M.relativePath=L.path.replace(new RegExp("^"+h),"");try{R(M)}catch(j){console.error("'change' handler failed: ",j,j.stack),this._emit("error",j)}})})}scope(O){if(typeof O!="string")throw"Argument 'path' of baseClient.scope must be a string";return this.access.checkPathPermission(O,"r")||console.warn("WARNING: Please use remoteStorage.access.claim() to ask for access permissions first: https://remotestoragejs.readthedocs.io/en/latest/js-api/access.html#claim"),new g.default(this,O)}getSyncInterval(){return b.default.syncInterval}setSyncInterval(O){if(!I(O))throw O+" is not a valid sync interval";const L=b.default.syncInterval;b.default.syncInterval=O,this._emit("sync-interval-change",{oldValue:L,newValue:O})}getBackgroundSyncInterval(){return b.default.backgroundSyncInterval}setBackgroundSyncInterval(O){if(!I(O))throw O+" is not a valid sync interval";const L=b.default.backgroundSyncInterval;b.default.backgroundSyncInterval=O,this._emit("sync-interval-change",{oldValue:L,newValue:O})}getCurrentSyncInterval(){return b.default.isBackground?b.default.backgroundSyncInterval:b.default.syncInterval}getRequestTimeout(){return b.default.requestTimeout}setRequestTimeout(O){if(typeof O!="number")throw O+" is not a valid request timeout";b.default.requestTimeout=O}syncCycle(){this.sync&&!this.sync.stopped&&(this.on("sync-done",()=>{this.sync&&!this.sync.stopped&&(this._syncTimer&&(clearTimeout(this._syncTimer),this._syncTimer=void 0),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}),this.sync.sync())}startSync(){return b.default.cache?(this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()):(console.warn("Nothing to sync, because caching is disabled."),Promise.resolve())}stopSync(){clearTimeout(this._syncTimer),this._syncTimer=void 0,this.sync?this.sync.stopped=!0:this.syncStopped=!0}addModule(O){const L=O.name,h=O.builder;if(Object.defineProperty(this,L,{configurable:!0,get:function(){const p=this._loadModule(L,h);return Object.defineProperty(this,L,{value:p}),p}}),L.indexOf("-")!==-1){const p=L.replace(/\-[a-z]/g,function(R){return R[1].toUpperCase()});Object.defineProperty(this,p,{get:function(){return this[L]}})}}_loadModule(O,L){if(L)return L(new g.default(this,"/"+O+"/"),new g.default(this,"/public/"+O+"/")).exports;throw"Unknown module: "+O}}var V;q.Authorize=v.default,q.SyncError=$.default,q.Unauthorized=x.default,q.DiscoveryError=N.default.DiscoveryError,q.util=m,Object.defineProperty(q.prototype,"access",{get:function(){const F=new S.default;return Object.defineProperty(this,"access",{value:F}),F},configurable:!0}),Object.defineProperty(q.prototype,"caching",{configurable:!0,get:function(){const F=new y.default;return Object.defineProperty(this,"caching",{value:F}),F}}),_.applyMixins(q,[T.default]),function(F){F.GOOGLE="googledrive",F.DROPBOX="dropbox"}(V||(V={})),r.exports=q},function(r,n,s){(function(o){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var a=s(20),l=s(21),d=s(22);function b(){return _.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function A(u,f){if(b()<f)throw new RangeError("Invalid typed array length");return _.TYPED_ARRAY_SUPPORT?(u=new Uint8Array(f)).__proto__=_.prototype:(u===null&&(u=new _(f)),u.length=f),u}function _(u,f,w){if(!(_.TYPED_ARRAY_SUPPORT||this instanceof _))return new _(u,f,w);if(typeof u=="number"){if(typeof f=="string")throw new Error("If encoding is specified then the first argument must be a string");return g(this,u)}return S(this,u,f,w)}function S(u,f,w,U){if(typeof f=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&f instanceof ArrayBuffer?function(D,B,X,W){if(B.byteLength,X<0||B.byteLength<X)throw new RangeError("'offset' is out of bounds");if(B.byteLength<X+(W||0))throw new RangeError("'length' is out of bounds");return B=X===void 0&&W===void 0?new Uint8Array(B):W===void 0?new Uint8Array(B,X):new Uint8Array(B,X,W),_.TYPED_ARRAY_SUPPORT?(D=B).__proto__=_.prototype:D=y(D,B),D}(u,f,w,U):typeof f=="string"?function(D,B,X){if(typeof X=="string"&&X!==""||(X="utf8"),!_.isEncoding(X))throw new TypeError('"encoding" must be a valid string encoding');var W=0|P(B,X),re=(D=A(D,W)).write(B,X);return re!==W&&(D=D.slice(0,re)),D}(u,f,w):function(D,B){if(_.isBuffer(B)){var X=0|T(B.length);return(D=A(D,X)).length===0||B.copy(D,0,0,X),D}if(B){if(typeof ArrayBuffer!="undefined"&&B.buffer instanceof ArrayBuffer||"length"in B)return typeof B.length!="number"||(W=B.length)!=W?A(D,0):y(D,B);if(B.type==="Buffer"&&d(B.data))return y(D,B.data)}var W;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(u,f)}function v(u){if(typeof u!="number")throw new TypeError('"size" argument must be a number');if(u<0)throw new RangeError('"size" argument must not be negative')}function g(u,f){if(v(f),u=A(u,f<0?0:0|T(f)),!_.TYPED_ARRAY_SUPPORT)for(var w=0;w<f;++w)u[w]=0;return u}function y(u,f){var w=f.length<0?0:0|T(f.length);u=A(u,w);for(var U=0;U<w;U+=1)u[U]=255&f[U];return u}function T(u){if(u>=b())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b().toString(16)+" bytes");return 0|u}function P(u,f){if(_.isBuffer(u))return u.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(u)||u instanceof ArrayBuffer))return u.byteLength;typeof u!="string"&&(u=""+u);var w=u.length;if(w===0)return 0;for(var U=!1;;)switch(f){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":case void 0:return de(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*w;case"hex":return w>>>1;case"base64":return fe(u).length;default:if(U)return de(u).length;f=(""+f).toLowerCase(),U=!0}}function C(u,f,w){var U=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0)<=(f>>>=0))return"";for(u||(u="utf8");;)switch(u){case"hex":return L(this,f,w);case"utf8":case"utf-8":return V(this,f,w);case"ascii":return F(this,f,w);case"latin1":case"binary":return O(this,f,w);case"base64":return q(this,f,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h(this,f,w);default:if(U)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),U=!0}}function N(u,f,w){var U=u[f];u[f]=u[w],u[w]=U}function $(u,f,w,U,D){if(u.length===0)return-1;if(typeof w=="string"?(U=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,isNaN(w)&&(w=D?0:u.length-1),w<0&&(w=u.length+w),w>=u.length){if(D)return-1;w=u.length-1}else if(w<0){if(!D)return-1;w=0}if(typeof f=="string"&&(f=_.from(f,U)),_.isBuffer(f))return f.length===0?-1:x(u,f,w,U,D);if(typeof f=="number")return f&=255,_.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?D?Uint8Array.prototype.indexOf.call(u,f,w):Uint8Array.prototype.lastIndexOf.call(u,f,w):x(u,[f],w,U,D);throw new TypeError("val must be string, number or Buffer")}function x(u,f,w,U,D){var B,X=1,W=u.length,re=f.length;if(U!==void 0&&((U=String(U).toLowerCase())==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(u.length<2||f.length<2)return-1;X=2,W/=2,re/=2,w/=2}function le(je,He){return X===1?je[He]:je.readUInt16BE(He*X)}if(D){var te=-1;for(B=w;B<W;B++)if(le(u,B)===le(f,te===-1?0:B-te)){if(te===-1&&(te=B),B-te+1===re)return te*X}else te!==-1&&(B-=B-te),te=-1}else for(w+re>W&&(w=W-re),B=w;B>=0;B--){for(var Ae=!0,ge=0;ge<re;ge++)if(le(u,B+ge)!==le(f,ge)){Ae=!1;break}if(Ae)return B}return-1}function i(u,f,w,U){w=Number(w)||0;var D=u.length-w;U?(U=Number(U))>D&&(U=D):U=D;var B=f.length;if(B%2!=0)throw new TypeError("Invalid hex string");U>B/2&&(U=B/2);for(var X=0;X<U;++X){var W=parseInt(f.substr(2*X,2),16);if(isNaN(W))return X;u[w+X]=W}return X}function m(u,f,w,U){return ie(de(f,u.length-w),u,w,U)}function c(u,f,w,U){return ie(function(D){for(var B=[],X=0;X<D.length;++X)B.push(255&D.charCodeAt(X));return B}(f),u,w,U)}function k(u,f,w,U){return c(u,f,w,U)}function E(u,f,w,U){return ie(fe(f),u,w,U)}function I(u,f,w,U){return ie(function(D,B){for(var X,W,re,le=[],te=0;te<D.length&&!((B-=2)<0);++te)X=D.charCodeAt(te),W=X>>8,re=X%256,le.push(re),le.push(W);return le}(f,u.length-w),u,w,U)}function q(u,f,w){return f===0&&w===u.length?a.fromByteArray(u):a.fromByteArray(u.slice(f,w))}function V(u,f,w){w=Math.min(u.length,w);for(var U=[],D=f;D<w;){var B,X,W,re,le=u[D],te=null,Ae=le>239?4:le>223?3:le>191?2:1;if(D+Ae<=w)switch(Ae){case 1:le<128&&(te=le);break;case 2:(192&(B=u[D+1]))==128&&(re=(31&le)<<6|63&B)>127&&(te=re);break;case 3:B=u[D+1],X=u[D+2],(192&B)==128&&(192&X)==128&&(re=(15&le)<<12|(63&B)<<6|63&X)>2047&&(re<55296||re>57343)&&(te=re);break;case 4:B=u[D+1],X=u[D+2],W=u[D+3],(192&B)==128&&(192&X)==128&&(192&W)==128&&(re=(15&le)<<18|(63&B)<<12|(63&X)<<6|63&W)>65535&&re<1114112&&(te=re)}te===null?(te=65533,Ae=1):te>65535&&(te-=65536,U.push(te>>>10&1023|55296),te=56320|1023&te),U.push(te),D+=Ae}return function(ge){var je=ge.length;if(je<=4096)return String.fromCharCode.apply(String,ge);for(var He="",ot=0;ot<je;)He+=String.fromCharCode.apply(String,ge.slice(ot,ot+=4096));return He}(U)}n.Buffer=_,n.SlowBuffer=function(u){return+u!=u&&(u=0),_.alloc(+u)},n.INSPECT_MAX_BYTES=50,_.TYPED_ARRAY_SUPPORT=o.TYPED_ARRAY_SUPPORT!==void 0?o.TYPED_ARRAY_SUPPORT:function(){try{var u=new Uint8Array(1);return u.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},u.foo()===42&&typeof u.subarray=="function"&&u.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=b(),_.poolSize=8192,_._augment=function(u){return u.__proto__=_.prototype,u},_.from=function(u,f,w){return S(null,u,f,w)},_.TYPED_ARRAY_SUPPORT&&(_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0})),_.alloc=function(u,f,w){return function(U,D,B,X){return v(D),D<=0?A(U,D):B!==void 0?typeof X=="string"?A(U,D).fill(B,X):A(U,D).fill(B):A(U,D)}(null,u,f,w)},_.allocUnsafe=function(u){return g(null,u)},_.allocUnsafeSlow=function(u){return g(null,u)},_.isBuffer=function(u){return!(u==null||!u._isBuffer)},_.compare=function(u,f){if(!_.isBuffer(u)||!_.isBuffer(f))throw new TypeError("Arguments must be Buffers");if(u===f)return 0;for(var w=u.length,U=f.length,D=0,B=Math.min(w,U);D<B;++D)if(u[D]!==f[D]){w=u[D],U=f[D];break}return w<U?-1:U<w?1:0},_.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(u,f){if(!d(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return _.alloc(0);var w;if(f===void 0)for(f=0,w=0;w<u.length;++w)f+=u[w].length;var U=_.allocUnsafe(f),D=0;for(w=0;w<u.length;++w){var B=u[w];if(!_.isBuffer(B))throw new TypeError('"list" argument must be an Array of Buffers');B.copy(U,D),D+=B.length}return U},_.byteLength=P,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var u=this.length;if(u%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var f=0;f<u;f+=2)N(this,f,f+1);return this},_.prototype.swap32=function(){var u=this.length;if(u%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var f=0;f<u;f+=4)N(this,f,f+3),N(this,f+1,f+2);return this},_.prototype.swap64=function(){var u=this.length;if(u%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var f=0;f<u;f+=8)N(this,f,f+7),N(this,f+1,f+6),N(this,f+2,f+5),N(this,f+3,f+4);return this},_.prototype.toString=function(){var u=0|this.length;return u===0?"":arguments.length===0?V(this,0,u):C.apply(this,arguments)},_.prototype.equals=function(u){if(!_.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u||_.compare(this,u)===0},_.prototype.inspect=function(){var u="",f=n.INSPECT_MAX_BYTES;return this.length>0&&(u=this.toString("hex",0,f).match(/.{2}/g).join(" "),this.length>f&&(u+=" ... ")),"<Buffer "+u+">"},_.prototype.compare=function(u,f,w,U,D){if(!_.isBuffer(u))throw new TypeError("Argument must be a Buffer");if(f===void 0&&(f=0),w===void 0&&(w=u?u.length:0),U===void 0&&(U=0),D===void 0&&(D=this.length),f<0||w>u.length||U<0||D>this.length)throw new RangeError("out of range index");if(U>=D&&f>=w)return 0;if(U>=D)return-1;if(f>=w)return 1;if(this===u)return 0;for(var B=(D>>>=0)-(U>>>=0),X=(w>>>=0)-(f>>>=0),W=Math.min(B,X),re=this.slice(U,D),le=u.slice(f,w),te=0;te<W;++te)if(re[te]!==le[te]){B=re[te],X=le[te];break}return B<X?-1:X<B?1:0},_.prototype.includes=function(u,f,w){return this.indexOf(u,f,w)!==-1},_.prototype.indexOf=function(u,f,w){return $(this,u,f,w,!0)},_.prototype.lastIndexOf=function(u,f,w){return $(this,u,f,w,!1)},_.prototype.write=function(u,f,w,U){if(f===void 0)U="utf8",w=this.length,f=0;else if(w===void 0&&typeof f=="string")U=f,w=this.length,f=0;else{if(!isFinite(f))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");f|=0,isFinite(w)?(w|=0,U===void 0&&(U="utf8")):(U=w,w=void 0)}var D=this.length-f;if((w===void 0||w>D)&&(w=D),u.length>0&&(w<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");for(var B=!1;;)switch(U){case"hex":return i(this,u,f,w);case"utf8":case"utf-8":return m(this,u,f,w);case"ascii":return c(this,u,f,w);case"latin1":case"binary":return k(this,u,f,w);case"base64":return E(this,u,f,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,u,f,w);default:if(B)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),B=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(u,f,w){var U="";w=Math.min(u.length,w);for(var D=f;D<w;++D)U+=String.fromCharCode(127&u[D]);return U}function O(u,f,w){var U="";w=Math.min(u.length,w);for(var D=f;D<w;++D)U+=String.fromCharCode(u[D]);return U}function L(u,f,w){var U=u.length;(!f||f<0)&&(f=0),(!w||w<0||w>U)&&(w=U);for(var D="",B=f;B<w;++B)D+=oe(u[B]);return D}function h(u,f,w){for(var U=u.slice(f,w),D="",B=0;B<U.length;B+=2)D+=String.fromCharCode(U[B]+256*U[B+1]);return D}function p(u,f,w){if(u%1!=0||u<0)throw new RangeError("offset is not uint");if(u+f>w)throw new RangeError("Trying to access beyond buffer length")}function R(u,f,w,U,D,B){if(!_.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>D||f<B)throw new RangeError('"value" argument is out of bounds');if(w+U>u.length)throw new RangeError("Index out of range")}function M(u,f,w,U){f<0&&(f=65535+f+1);for(var D=0,B=Math.min(u.length-w,2);D<B;++D)u[w+D]=(f&255<<8*(U?D:1-D))>>>8*(U?D:1-D)}function j(u,f,w,U){f<0&&(f=4294967295+f+1);for(var D=0,B=Math.min(u.length-w,4);D<B;++D)u[w+D]=f>>>8*(U?D:3-D)&255}function Y(u,f,w,U,D,B){if(w+U>u.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function H(u,f,w,U,D){return D||Y(u,0,w,4),l.write(u,f,w,U,23,4),w+4}function z(u,f,w,U,D){return D||Y(u,0,w,8),l.write(u,f,w,U,52,8),w+8}_.prototype.slice=function(u,f){var w,U=this.length;if((u=~~u)<0?(u+=U)<0&&(u=0):u>U&&(u=U),(f=f===void 0?U:~~f)<0?(f+=U)<0&&(f=0):f>U&&(f=U),f<u&&(f=u),_.TYPED_ARRAY_SUPPORT)(w=this.subarray(u,f)).__proto__=_.prototype;else{var D=f-u;w=new _(D,void 0);for(var B=0;B<D;++B)w[B]=this[B+u]}return w},_.prototype.readUIntLE=function(u,f,w){u|=0,f|=0,w||p(u,f,this.length);for(var U=this[u],D=1,B=0;++B<f&&(D*=256);)U+=this[u+B]*D;return U},_.prototype.readUIntBE=function(u,f,w){u|=0,f|=0,w||p(u,f,this.length);for(var U=this[u+--f],D=1;f>0&&(D*=256);)U+=this[u+--f]*D;return U},_.prototype.readUInt8=function(u,f){return f||p(u,1,this.length),this[u]},_.prototype.readUInt16LE=function(u,f){return f||p(u,2,this.length),this[u]|this[u+1]<<8},_.prototype.readUInt16BE=function(u,f){return f||p(u,2,this.length),this[u]<<8|this[u+1]},_.prototype.readUInt32LE=function(u,f){return f||p(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+16777216*this[u+3]},_.prototype.readUInt32BE=function(u,f){return f||p(u,4,this.length),16777216*this[u]+(this[u+1]<<16|this[u+2]<<8|this[u+3])},_.prototype.readIntLE=function(u,f,w){u|=0,f|=0,w||p(u,f,this.length);for(var U=this[u],D=1,B=0;++B<f&&(D*=256);)U+=this[u+B]*D;return U>=(D*=128)&&(U-=Math.pow(2,8*f)),U},_.prototype.readIntBE=function(u,f,w){u|=0,f|=0,w||p(u,f,this.length);for(var U=f,D=1,B=this[u+--U];U>0&&(D*=256);)B+=this[u+--U]*D;return B>=(D*=128)&&(B-=Math.pow(2,8*f)),B},_.prototype.readInt8=function(u,f){return f||p(u,1,this.length),128&this[u]?-1*(255-this[u]+1):this[u]},_.prototype.readInt16LE=function(u,f){f||p(u,2,this.length);var w=this[u]|this[u+1]<<8;return 32768&w?4294901760|w:w},_.prototype.readInt16BE=function(u,f){f||p(u,2,this.length);var w=this[u+1]|this[u]<<8;return 32768&w?4294901760|w:w},_.prototype.readInt32LE=function(u,f){return f||p(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},_.prototype.readInt32BE=function(u,f){return f||p(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},_.prototype.readFloatLE=function(u,f){return f||p(u,4,this.length),l.read(this,u,!0,23,4)},_.prototype.readFloatBE=function(u,f){return f||p(u,4,this.length),l.read(this,u,!1,23,4)},_.prototype.readDoubleLE=function(u,f){return f||p(u,8,this.length),l.read(this,u,!0,52,8)},_.prototype.readDoubleBE=function(u,f){return f||p(u,8,this.length),l.read(this,u,!1,52,8)},_.prototype.writeUIntLE=function(u,f,w,U){u=+u,f|=0,w|=0,U||R(this,u,f,w,Math.pow(2,8*w)-1,0);var D=1,B=0;for(this[f]=255&u;++B<w&&(D*=256);)this[f+B]=u/D&255;return f+w},_.prototype.writeUIntBE=function(u,f,w,U){u=+u,f|=0,w|=0,U||R(this,u,f,w,Math.pow(2,8*w)-1,0);var D=w-1,B=1;for(this[f+D]=255&u;--D>=0&&(B*=256);)this[f+D]=u/B&255;return f+w},_.prototype.writeUInt8=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,1,255,0),_.TYPED_ARRAY_SUPPORT||(u=Math.floor(u)),this[f]=255&u,f+1},_.prototype.writeUInt16LE=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[f]=255&u,this[f+1]=u>>>8):M(this,u,f,!0),f+2},_.prototype.writeUInt16BE=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[f]=u>>>8,this[f+1]=255&u):M(this,u,f,!1),f+2},_.prototype.writeUInt32LE=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[f+3]=u>>>24,this[f+2]=u>>>16,this[f+1]=u>>>8,this[f]=255&u):j(this,u,f,!0),f+4},_.prototype.writeUInt32BE=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=255&u):j(this,u,f,!1),f+4},_.prototype.writeIntLE=function(u,f,w,U){if(u=+u,f|=0,!U){var D=Math.pow(2,8*w-1);R(this,u,f,w,D-1,-D)}var B=0,X=1,W=0;for(this[f]=255&u;++B<w&&(X*=256);)u<0&&W===0&&this[f+B-1]!==0&&(W=1),this[f+B]=(u/X>>0)-W&255;return f+w},_.prototype.writeIntBE=function(u,f,w,U){if(u=+u,f|=0,!U){var D=Math.pow(2,8*w-1);R(this,u,f,w,D-1,-D)}var B=w-1,X=1,W=0;for(this[f+B]=255&u;--B>=0&&(X*=256);)u<0&&W===0&&this[f+B+1]!==0&&(W=1),this[f+B]=(u/X>>0)-W&255;return f+w},_.prototype.writeInt8=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,1,127,-128),_.TYPED_ARRAY_SUPPORT||(u=Math.floor(u)),u<0&&(u=255+u+1),this[f]=255&u,f+1},_.prototype.writeInt16LE=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[f]=255&u,this[f+1]=u>>>8):M(this,u,f,!0),f+2},_.prototype.writeInt16BE=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[f]=u>>>8,this[f+1]=255&u):M(this,u,f,!1),f+2},_.prototype.writeInt32LE=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,4,2147483647,-2147483648),_.TYPED_ARRAY_SUPPORT?(this[f]=255&u,this[f+1]=u>>>8,this[f+2]=u>>>16,this[f+3]=u>>>24):j(this,u,f,!0),f+4},_.prototype.writeInt32BE=function(u,f,w){return u=+u,f|=0,w||R(this,u,f,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),_.TYPED_ARRAY_SUPPORT?(this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=255&u):j(this,u,f,!1),f+4},_.prototype.writeFloatLE=function(u,f,w){return H(this,u,f,!0,w)},_.prototype.writeFloatBE=function(u,f,w){return H(this,u,f,!1,w)},_.prototype.writeDoubleLE=function(u,f,w){return z(this,u,f,!0,w)},_.prototype.writeDoubleBE=function(u,f,w){return z(this,u,f,!1,w)},_.prototype.copy=function(u,f,w,U){if(w||(w=0),U||U===0||(U=this.length),f>=u.length&&(f=u.length),f||(f=0),U>0&&U<w&&(U=w),U===w||u.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("sourceStart out of bounds");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),u.length-f<U-w&&(U=u.length-f+w);var D,B=U-w;if(this===u&&w<f&&f<U)for(D=B-1;D>=0;--D)u[D+f]=this[D+w];else if(B<1e3||!_.TYPED_ARRAY_SUPPORT)for(D=0;D<B;++D)u[D+f]=this[D+w];else Uint8Array.prototype.set.call(u,this.subarray(w,w+B),f);return B},_.prototype.fill=function(u,f,w,U){if(typeof u=="string"){if(typeof f=="string"?(U=f,f=0,w=this.length):typeof w=="string"&&(U=w,w=this.length),u.length===1){var D=u.charCodeAt(0);D<256&&(u=D)}if(U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!_.isEncoding(U))throw new TypeError("Unknown encoding: "+U)}else typeof u=="number"&&(u&=255);if(f<0||this.length<f||this.length<w)throw new RangeError("Out of range index");if(w<=f)return this;var B;if(f>>>=0,w=w===void 0?this.length:w>>>0,u||(u=0),typeof u=="number")for(B=f;B<w;++B)this[B]=u;else{var X=_.isBuffer(u)?u:de(new _(u,U).toString()),W=X.length;for(B=0;B<w-f;++B)this[B+f]=X[B%W]}return this};var se=/[^+\/0-9A-Za-z-_]/g;function oe(u){return u<16?"0"+u.toString(16):u.toString(16)}function de(u,f){var w;f=f||1/0;for(var U=u.length,D=null,B=[],X=0;X<U;++X){if((w=u.charCodeAt(X))>55295&&w<57344){if(!D){if(w>56319){(f-=3)>-1&&B.push(239,191,189);continue}if(X+1===U){(f-=3)>-1&&B.push(239,191,189);continue}D=w;continue}if(w<56320){(f-=3)>-1&&B.push(239,191,189),D=w;continue}w=65536+(D-55296<<10|w-56320)}else D&&(f-=3)>-1&&B.push(239,191,189);if(D=null,w<128){if((f-=1)<0)break;B.push(w)}else if(w<2048){if((f-=2)<0)break;B.push(w>>6|192,63&w|128)}else if(w<65536){if((f-=3)<0)break;B.push(w>>12|224,w>>6&63|128,63&w|128)}else{if(!(w<1114112))throw new Error("Invalid code point");if((f-=4)<0)break;B.push(w>>18|240,w>>12&63|128,w>>6&63|128,63&w|128)}}return B}function fe(u){return a.toByteArray(function(f){if((f=function(w){return w.trim?w.trim():w.replace(/^\s+|\s+$/g,"")}(f).replace(se,"")).length<2)return"";for(;f.length%4!=0;)f+="=";return f}(u))}function ie(u,f,w,U){for(var D=0;D<U&&!(D+w>=f.length||D>=u.length);++D)f[D+w]=u[D];return D}}).call(this,s(5))},function(r,n,s){n.byteLength=function(v){var g=_(v),y=g[0],T=g[1];return 3*(y+T)/4-T},n.toByteArray=function(v){var g,y,T=_(v),P=T[0],C=T[1],N=new l(function(i,m,c){return 3*(m+c)/4-c}(0,P,C)),$=0,x=C>0?P-4:P;for(y=0;y<x;y+=4)g=a[v.charCodeAt(y)]<<18|a[v.charCodeAt(y+1)]<<12|a[v.charCodeAt(y+2)]<<6|a[v.charCodeAt(y+3)],N[$++]=g>>16&255,N[$++]=g>>8&255,N[$++]=255&g;return C===2&&(g=a[v.charCodeAt(y)]<<2|a[v.charCodeAt(y+1)]>>4,N[$++]=255&g),C===1&&(g=a[v.charCodeAt(y)]<<10|a[v.charCodeAt(y+1)]<<4|a[v.charCodeAt(y+2)]>>2,N[$++]=g>>8&255,N[$++]=255&g),N},n.fromByteArray=function(v){for(var g,y=v.length,T=y%3,P=[],C=0,N=y-T;C<N;C+=16383)P.push(S(v,C,C+16383>N?N:C+16383));return T===1?(g=v[y-1],P.push(o[g>>2]+o[g<<4&63]+"==")):T===2&&(g=(v[y-2]<<8)+v[y-1],P.push(o[g>>10]+o[g>>4&63]+o[g<<2&63]+"=")),P.join("")};for(var o=[],a=[],l=typeof Uint8Array!="undefined"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,A=d.length;b<A;++b)o[b]=d[b],a[d.charCodeAt(b)]=b;function _(v){var g=v.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=v.indexOf("=");return y===-1&&(y=g),[y,y===g?0:4-y%4]}function S(v,g,y){for(var T,P,C=[],N=g;N<y;N+=3)T=(v[N]<<16&16711680)+(v[N+1]<<8&65280)+(255&v[N+2]),C.push(o[(P=T)>>18&63]+o[P>>12&63]+o[P>>6&63]+o[63&P]);return C.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(r,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(s,o,a,l,d){var b,A,_=8*d-l-1,S=(1<<_)-1,v=S>>1,g=-7,y=a?d-1:0,T=a?-1:1,P=s[o+y];for(y+=T,b=P&(1<<-g)-1,P>>=-g,g+=_;g>0;b=256*b+s[o+y],y+=T,g-=8);for(A=b&(1<<-g)-1,b>>=-g,g+=l;g>0;A=256*A+s[o+y],y+=T,g-=8);if(b===0)b=1-v;else{if(b===S)return A?NaN:1/0*(P?-1:1);A+=Math.pow(2,l),b-=v}return(P?-1:1)*A*Math.pow(2,b-l)},n.write=function(s,o,a,l,d,b){var A,_,S,v=8*b-d-1,g=(1<<v)-1,y=g>>1,T=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=l?0:b-1,C=l?1:-1,N=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(_=isNaN(o)?1:0,A=g):(A=Math.floor(Math.log(o)/Math.LN2),o*(S=Math.pow(2,-A))<1&&(A--,S*=2),(o+=A+y>=1?T/S:T*Math.pow(2,1-y))*S>=2&&(A++,S/=2),A+y>=g?(_=0,A=g):A+y>=1?(_=(o*S-1)*Math.pow(2,d),A+=y):(_=o*Math.pow(2,y-1)*Math.pow(2,d),A=0));d>=8;s[a+P]=255&_,P+=C,_/=256,d-=8);for(A=A<<d|_,v+=d;v>0;s[a+P]=255&A,P+=C,A/=256,v-=8);s[a+P-C]|=128*N}},function(r,n){var s={}.toString;r.exports=Array.isArray||function(o){return s.call(o)=="[object Array]"}},function(r,n,s){var o,a,l;a=[],(l=typeof(o=function(){var d,b,A,_;Object.keys||(Object.keys=(d=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),_=(A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(h){if(typeof h!="object"&&typeof h!="function"||h===null)throw new TypeError("Object.keys called on non-object");var p=[];for(var R in h)d.call(h,R)&&p.push(R);if(b)for(var M=0;M<_;M++)d.call(h,A[M])&&p.push(A[M]);return p})),Object.create||(Object.create=function(){function h(){}return function(p){if(arguments.length!==1)throw new Error("Object.create implementation only accepts one parameter.");return h.prototype=p,new h}}()),Array.isArray||(Array.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(h){if(this===null)throw new TypeError;var p=Object(this),R=p.length>>>0;if(R===0)return-1;var M=0;if(arguments.length>1&&((M=Number(arguments[1]))!=M?M=0:M!==0&&M!==1/0&&M!==-1/0&&(M=(M>0||-1)*Math.floor(Math.abs(M)))),M>=R)return-1;for(var j=M>=0?M:Math.max(R-Math.abs(M),0);j<R;j++)if(j in p&&p[j]===h)return j;return-1}),Object.isFrozen||(Object.isFrozen=function(h){for(var p="tv4_test_frozen_key";h.hasOwnProperty(p);)p+=Math.random();try{return h[p]=!0,delete h[p],!1}catch{return!0}});var S={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},v={"*":!0};function g(h){return encodeURI(h).replace(/%25[0-9][0-9]/g,function(p){return"%"+p.substring(3)})}function y(h){var p="";S[h.charAt(0)]&&(p=h.charAt(0),h=h.substring(1));var R="",M="",j=!0,Y=!1,H=!1;p==="+"?j=!1:p==="."?(M=".",R="."):p==="/"?(M="/",R="/"):p==="#"?(M="#",j=!1):p===";"?(M=";",R=";",Y=!0,H=!0):p==="?"?(M="?",R="&",Y=!0):p==="&"&&(M="&",R="&",Y=!0);for(var z=[],se=h.split(","),oe=[],de={},fe=0;fe<se.length;fe++){var ie=se[fe],u=null;if(ie.indexOf(":")!==-1){var f=ie.split(":");ie=f[0],u=parseInt(f[1],10)}for(var w={};v[ie.charAt(ie.length-1)];)w[ie.charAt(ie.length-1)]=!0,ie=ie.substring(0,ie.length-1);var U={truncate:u,name:ie,suffices:w};oe.push(U),de[ie]=U,z.push(ie)}var D=function(B){for(var X="",W=0,re=0;re<oe.length;re++){var le=oe[re],te=B(le.name);if(te==null||Array.isArray(te)&&te.length===0||typeof te=="object"&&Object.keys(te).length===0)W++;else if(X+=re===W?M:R||",",Array.isArray(te)){Y&&(X+=le.name+"=");for(var Ae=0;Ae<te.length;Ae++)Ae>0&&(X+=le.suffices["*"]&&R||",",le.suffices["*"]&&Y&&(X+=le.name+"=")),X+=j?encodeURIComponent(te[Ae]).replace(/!/g,"%21"):g(te[Ae])}else if(typeof te=="object"){Y&&!le.suffices["*"]&&(X+=le.name+"=");var ge=!0;for(var je in te)ge||(X+=le.suffices["*"]&&R||","),ge=!1,X+=j?encodeURIComponent(je).replace(/!/g,"%21"):g(je),X+=le.suffices["*"]?"=":",",X+=j?encodeURIComponent(te[je]).replace(/!/g,"%21"):g(te[je])}else Y&&(X+=le.name,H&&te===""||(X+="=")),le.truncate!=null&&(te=te.substring(0,le.truncate)),X+=j?encodeURIComponent(te).replace(/!/g,"%21"):g(te)}return X};return D.varNames=z,{prefix:M,substitution:D}}function T(h){if(!(this instanceof T))return new T(h);for(var p=h.split("{"),R=[p.shift()],M=[],j=[],Y=[];p.length>0;){var H=p.shift(),z=H.split("}")[0],se=H.substring(z.length+1),oe=y(z);j.push(oe.substitution),M.push(oe.prefix),R.push(se),Y=Y.concat(oe.substitution.varNames)}this.fill=function(de){for(var fe=R[0],ie=0;ie<j.length;ie++)fe+=(0,j[ie])(de),fe+=R[ie+1];return fe},this.varNames=Y,this.template=h}T.prototype={toString:function(){return this.template},fillFromObject:function(h){return this.fill(function(p){return h[p]})}};var P=function(h,p,R,M,j){if(this.missing=[],this.missingMap={},this.formatValidators=h?Object.create(h.formatValidators):{},this.schemas=h?Object.create(h.schemas):{},this.collectMultiple=p,this.errors=[],this.handleError=p?this.collectError:this.returnError,M&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),j&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=R||k("en"),typeof this.errorReporter=="string")throw new Error("debug");if(this.definedKeywords={},h)for(var Y in h.definedKeywords)this.definedKeywords[Y]=h.definedKeywords[Y].slice(0)};function C(h,p){if(h===p)return!0;if(h&&p&&typeof h=="object"&&typeof p=="object"){if(Array.isArray(h)!==Array.isArray(p))return!1;if(Array.isArray(h)){if(h.length!==p.length)return!1;for(var R=0;R<h.length;R++)if(!C(h[R],p[R]))return!1}else{var M;for(M in h)if(p[M]===void 0&&h[M]!==void 0)return!1;for(M in p)if(h[M]===void 0&&p[M]!==void 0)return!1;for(M in h)if(!C(h[M],p[M]))return!1}return!0}return!1}P.prototype.defineKeyword=function(h,p){this.definedKeywords[h]=this.definedKeywords[h]||[],this.definedKeywords[h].push(p)},P.prototype.createError=function(h,p,R,M,j,Y,H){var z=new F(h,p,R,M,j);return z.message=this.errorReporter(z,Y,H),z},P.prototype.returnError=function(h){return h},P.prototype.collectError=function(h){return h&&this.errors.push(h),null},P.prototype.prefixErrors=function(h,p,R){for(var M=h;M<this.errors.length;M++)this.errors[M]=this.errors[M].prefixWith(p,R);return this},P.prototype.banUnknownProperties=function(h,p){for(var R in this.unknownPropertyPaths){var M=this.createError(E.UNKNOWN_PROPERTY,{path:R},R,"",null,h,p),j=this.handleError(M);if(j)return j}return null},P.prototype.addFormat=function(h,p){if(typeof h=="object"){for(var R in h)this.addFormat(R,h[R]);return this}this.formatValidators[h]=p},P.prototype.resolveRefs=function(h,p){if(h.$ref!==void 0){if((p=p||{})[h.$ref])return this.createError(E.CIRCULAR_REFERENCE,{urls:Object.keys(p).join(", ")},"","",null,void 0,h);p[h.$ref]=!0,h=this.getSchema(h.$ref,p)}return h},P.prototype.getSchema=function(h,p){var R;if(this.schemas[h]!==void 0)return R=this.schemas[h],this.resolveRefs(R,p);var M=h,j="";if(h.indexOf("#")!==-1&&(j=h.substring(h.indexOf("#")+1),M=h.substring(0,h.indexOf("#"))),typeof this.schemas[M]=="object"){R=this.schemas[M];var Y=decodeURIComponent(j);if(Y==="")return this.resolveRefs(R,p);if(Y.charAt(0)!=="/")return;for(var H=Y.split("/").slice(1),z=0;z<H.length;z++){var se=H[z].replace(/~1/g,"/").replace(/~0/g,"~");if(R[se]===void 0){R=void 0;break}R=R[se]}if(R!==void 0)return this.resolveRefs(R,p)}this.missing[M]===void 0&&(this.missing.push(M),this.missing[M]=M,this.missingMap[M]=M)},P.prototype.searchSchemas=function(h,p){if(Array.isArray(h))for(var R=0;R<h.length;R++)this.searchSchemas(h[R],p);else if(h&&typeof h=="object"){for(var M in typeof h.id=="string"&&function(Y,H){if(H.substring(0,Y.length)===Y){var z=H.substring(Y.length);if(H.length>0&&H.charAt(Y.length-1)==="/"||z.charAt(0)==="#"||z.charAt(0)==="?")return!0}return!1}(p,h.id)&&this.schemas[h.id]===void 0&&(this.schemas[h.id]=h),h)if(M!=="enum"){if(typeof h[M]=="object")this.searchSchemas(h[M],p);else if(M==="$ref"){var j=m(h[M]);j&&this.schemas[j]===void 0&&this.missingMap[j]===void 0&&(this.missingMap[j]=j)}}}},P.prototype.addSchema=function(h,p){if(typeof h!="string"||p===void 0){if(typeof h!="object"||typeof h.id!="string")return;h=(p=h).id}h===m(h)+"#"&&(h=m(h)),this.schemas[h]=p,delete this.missingMap[h],c(p,h),this.searchSchemas(p,h)},P.prototype.getSchemaMap=function(){var h={};for(var p in this.schemas)h[p]=this.schemas[p];return h},P.prototype.getSchemaUris=function(h){var p=[];for(var R in this.schemas)h&&!h.test(R)||p.push(R);return p},P.prototype.getMissingUris=function(h){var p=[];for(var R in this.missingMap)h&&!h.test(R)||p.push(R);return p},P.prototype.dropSchemas=function(){this.schemas={},this.reset()},P.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},P.prototype.validateAll=function(h,p,R,M,j){var Y;if(!(p=this.resolveRefs(p)))return null;if(p instanceof F)return this.errors.push(p),p;var H,z=this.errors.length,se=null,oe=null;if(this.checkRecursive&&h&&typeof h=="object"){if(Y=!this.scanned.length,h[this.validatedSchemasKey]){var de=h[this.validatedSchemasKey].indexOf(p);if(de!==-1)return this.errors=this.errors.concat(h[this.validationErrorsKey][de]),null}if(Object.isFrozen(h)&&(H=this.scannedFrozen.indexOf(h))!==-1){var fe=this.scannedFrozenSchemas[H].indexOf(p);if(fe!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[H][fe]),null}if(this.scanned.push(h),Object.isFrozen(h))H===-1&&(H=this.scannedFrozen.length,this.scannedFrozen.push(h),this.scannedFrozenSchemas.push([])),se=this.scannedFrozenSchemas[H].length,this.scannedFrozenSchemas[H][se]=p,this.scannedFrozenValidationErrors[H][se]=[];else{if(!h[this.validatedSchemasKey])try{Object.defineProperty(h,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(h,this.validationErrorsKey,{value:[],configurable:!0})}catch{h[this.validatedSchemasKey]=[],h[this.validationErrorsKey]=[]}oe=h[this.validatedSchemasKey].length,h[this.validatedSchemasKey][oe]=p,h[this.validationErrorsKey][oe]=[]}}var ie=this.errors.length,u=this.validateBasic(h,p,j)||this.validateNumeric(h,p,j)||this.validateString(h,p,j)||this.validateArray(h,p,j)||this.validateObject(h,p,j)||this.validateCombinations(h,p,j)||this.validateHypermedia(h,p,j)||this.validateFormat(h,p,j)||this.validateDefinedKeywords(h,p,j)||null;if(Y){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(u||ie!==this.errors.length)for(;R&&R.length||M&&M.length;){var f=R&&R.length?""+R.pop():null,w=M&&M.length?""+M.pop():null;u&&(u=u.prefixWith(f,w)),this.prefixErrors(ie,f,w)}return se!==null?this.scannedFrozenValidationErrors[H][se]=this.errors.slice(z):oe!==null&&(h[this.validationErrorsKey][oe]=this.errors.slice(z)),this.handleError(u)},P.prototype.validateFormat=function(h,p){if(typeof p.format!="string"||!this.formatValidators[p.format])return null;var R=this.formatValidators[p.format].call(null,h,p);return typeof R=="string"||typeof R=="number"?this.createError(E.FORMAT_CUSTOM,{message:R},"","/format",null,h,p):R&&typeof R=="object"?this.createError(E.FORMAT_CUSTOM,{message:R.message||"?"},R.dataPath||"",R.schemaPath||"/format",null,h,p):null},P.prototype.validateDefinedKeywords=function(h,p,R){for(var M in this.definedKeywords)if(p[M]!==void 0)for(var j=this.definedKeywords[M],Y=0;Y<j.length;Y++){var H=(0,j[Y])(h,p[M],p,R);if(typeof H=="string"||typeof H=="number")return this.createError(E.KEYWORD_CUSTOM,{key:M,message:H},"","",null,h,p).prefixWith(null,M);if(H&&typeof H=="object"){var z=H.code;if(typeof z=="string"){if(!E[z])throw new Error("Undefined error code (use defineError): "+z);z=E[z]}else typeof z!="number"&&(z=E.KEYWORD_CUSTOM);var se=typeof H.message=="object"?H.message:{key:M,message:H.message||"?"},oe=H.schemaPath||"/"+M.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(z,se,H.dataPath||null,oe,null,h,p)}}return null},P.prototype.validateBasic=function(h,p,R){var M;return(M=this.validateType(h,p,R))||(M=this.validateEnum(h,p,R))?M.prefixWith(null,"type"):null},P.prototype.validateType=function(h,p){if(p.type===void 0)return null;var R=typeof h;h===null?R="null":Array.isArray(h)&&(R="array");var M=p.type;Array.isArray(M)||(M=[M]);for(var j=0;j<M.length;j++){var Y=M[j];if(Y===R||Y==="integer"&&R==="number"&&h%1==0)return null}return this.createError(E.INVALID_TYPE,{type:R,expected:M.join("/")},"","",null,h,p)},P.prototype.validateEnum=function(h,p){if(p.enum===void 0)return null;for(var R=0;R<p.enum.length;R++)if(C(h,p.enum[R]))return null;return this.createError(E.ENUM_MISMATCH,{value:typeof JSON!="undefined"?JSON.stringify(h):h},"","",null,h,p)},P.prototype.validateNumeric=function(h,p,R){return this.validateMultipleOf(h,p,R)||this.validateMinMax(h,p,R)||this.validateNaN(h,p,R)||null};var N=Math.pow(2,-51),$=1-N;function x(h){var p=String(h).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return p?{href:p[0]||"",protocol:p[1]||"",authority:p[2]||"",host:p[3]||"",hostname:p[4]||"",port:p[5]||"",pathname:p[6]||"",search:p[7]||"",hash:p[8]||""}:null}function i(h,p){return p=x(p||""),h=x(h||""),p&&h?(p.protocol||h.protocol)+(p.protocol||p.authority?p.authority:h.authority)+(R=p.protocol||p.authority||p.pathname.charAt(0)==="/"?p.pathname:p.pathname?(h.authority&&!h.pathname?"/":"")+h.pathname.slice(0,h.pathname.lastIndexOf("/")+1)+p.pathname:h.pathname,M=[],R.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(j){j==="/.."?M.pop():M.push(j)}),M.join("").replace(/^\//,R.charAt(0)==="/"?"/":""))+(p.protocol||p.authority||p.pathname?p.search:p.search||h.search)+p.hash:null;var R,M}function m(h){return h.split("#")[0]}function c(h,p){if(h&&typeof h=="object")if(p===void 0?p=h.id:typeof h.id=="string"&&(p=i(p,h.id),h.id=p),Array.isArray(h))for(var R=0;R<h.length;R++)c(h[R],p);else for(var M in typeof h.$ref=="string"&&(h.$ref=i(p,h.$ref)),h)M!=="enum"&&c(h[M],p)}function k(h){var p=O[h=h||"en"];return function(R){var M=p[R.code]||V[R.code];if(typeof M!="string")return"Unknown error code "+R.code+": "+JSON.stringify(R.messageParams);var j=R.params;return M.replace(/\{([^{}]*)\}/g,function(Y,H){var z=j[H];return typeof z=="string"||typeof z=="number"?z:Y})}}P.prototype.validateMultipleOf=function(h,p){var R=p.multipleOf||p.divisibleBy;if(R===void 0)return null;if(typeof h=="number"){var M=h/R%1;if(M>=N&&M<$)return this.createError(E.NUMBER_MULTIPLE_OF,{value:h,multipleOf:R},"","",null,h,p)}return null},P.prototype.validateMinMax=function(h,p){if(typeof h!="number")return null;if(p.minimum!==void 0){if(h<p.minimum)return this.createError(E.NUMBER_MINIMUM,{value:h,minimum:p.minimum},"","/minimum",null,h,p);if(p.exclusiveMinimum&&h===p.minimum)return this.createError(E.NUMBER_MINIMUM_EXCLUSIVE,{value:h,minimum:p.minimum},"","/exclusiveMinimum",null,h,p)}if(p.maximum!==void 0){if(h>p.maximum)return this.createError(E.NUMBER_MAXIMUM,{value:h,maximum:p.maximum},"","/maximum",null,h,p);if(p.exclusiveMaximum&&h===p.maximum)return this.createError(E.NUMBER_MAXIMUM_EXCLUSIVE,{value:h,maximum:p.maximum},"","/exclusiveMaximum",null,h,p)}return null},P.prototype.validateNaN=function(h,p){return typeof h!="number"?null:isNaN(h)===!0||h===1/0||h===-1/0?this.createError(E.NUMBER_NOT_A_NUMBER,{value:h},"","/type",null,h,p):null},P.prototype.validateString=function(h,p,R){return this.validateStringLength(h,p,R)||this.validateStringPattern(h,p,R)||null},P.prototype.validateStringLength=function(h,p){return typeof h!="string"?null:p.minLength!==void 0&&h.length<p.minLength?this.createError(E.STRING_LENGTH_SHORT,{length:h.length,minimum:p.minLength},"","/minLength",null,h,p):p.maxLength!==void 0&&h.length>p.maxLength?this.createError(E.STRING_LENGTH_LONG,{length:h.length,maximum:p.maxLength},"","/maxLength",null,h,p):null},P.prototype.validateStringPattern=function(h,p){if(typeof h!="string"||typeof p.pattern!="string"&&!(p.pattern instanceof RegExp))return null;var R;if(p.pattern instanceof RegExp)R=p.pattern;else{var M,j="",Y=p.pattern.match(/^\/(.+)\/([img]*)$/);Y?(M=Y[1],j=Y[2]):M=p.pattern,R=new RegExp(M,j)}return R.test(h)?null:this.createError(E.STRING_PATTERN,{pattern:p.pattern},"","/pattern",null,h,p)},P.prototype.validateArray=function(h,p,R){return Array.isArray(h)&&(this.validateArrayLength(h,p,R)||this.validateArrayUniqueItems(h,p,R)||this.validateArrayItems(h,p,R))||null},P.prototype.validateArrayLength=function(h,p){var R;return p.minItems!==void 0&&h.length<p.minItems&&(R=this.createError(E.ARRAY_LENGTH_SHORT,{length:h.length,minimum:p.minItems},"","/minItems",null,h,p),this.handleError(R))||p.maxItems!==void 0&&h.length>p.maxItems&&(R=this.createError(E.ARRAY_LENGTH_LONG,{length:h.length,maximum:p.maxItems},"","/maxItems",null,h,p),this.handleError(R))?R:null},P.prototype.validateArrayUniqueItems=function(h,p){if(p.uniqueItems){for(var R=0;R<h.length;R++)for(var M=R+1;M<h.length;M++)if(C(h[R],h[M])){var j=this.createError(E.ARRAY_UNIQUE,{match1:R,match2:M},"","/uniqueItems",null,h,p);if(this.handleError(j))return j}}return null},P.prototype.validateArrayItems=function(h,p,R){if(p.items===void 0)return null;var M,j;if(Array.isArray(p.items)){for(j=0;j<h.length;j++)if(j<p.items.length){if(M=this.validateAll(h[j],p.items[j],[j],["items",j],R+"/"+j))return M}else if(p.additionalItems!==void 0){if(typeof p.additionalItems=="boolean"){if(!p.additionalItems&&(M=this.createError(E.ARRAY_ADDITIONAL_ITEMS,{},"/"+j,"/additionalItems",null,h,p),this.handleError(M)))return M}else if(M=this.validateAll(h[j],p.additionalItems,[j],["additionalItems"],R+"/"+j))return M}}else for(j=0;j<h.length;j++)if(M=this.validateAll(h[j],p.items,[j],["items"],R+"/"+j))return M;return null},P.prototype.validateObject=function(h,p,R){return typeof h!="object"||h===null||Array.isArray(h)?null:this.validateObjectMinMaxProperties(h,p,R)||this.validateObjectRequiredProperties(h,p,R)||this.validateObjectProperties(h,p,R)||this.validateObjectDependencies(h,p,R)||null},P.prototype.validateObjectMinMaxProperties=function(h,p){var R,M=Object.keys(h);return p.minProperties!==void 0&&M.length<p.minProperties&&(R=this.createError(E.OBJECT_PROPERTIES_MINIMUM,{propertyCount:M.length,minimum:p.minProperties},"","/minProperties",null,h,p),this.handleError(R))||p.maxProperties!==void 0&&M.length>p.maxProperties&&(R=this.createError(E.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:M.length,maximum:p.maxProperties},"","/maxProperties",null,h,p),this.handleError(R))?R:null},P.prototype.validateObjectRequiredProperties=function(h,p){if(p.required!==void 0)for(var R=0;R<p.required.length;R++){var M=p.required[R];if(h[M]===void 0){var j=this.createError(E.OBJECT_REQUIRED,{key:M},"","/required/"+R,null,h,p);if(this.handleError(j))return j}}return null},P.prototype.validateObjectProperties=function(h,p,R){var M;for(var j in h){var Y=R+"/"+j.replace(/~/g,"~0").replace(/\//g,"~1"),H=!1;if(p.properties!==void 0&&p.properties[j]!==void 0&&(H=!0,M=this.validateAll(h[j],p.properties[j],[j],["properties",j],Y)))return M;if(p.patternProperties!==void 0){for(var z in p.patternProperties)if(new RegExp(z).test(j)&&(H=!0,M=this.validateAll(h[j],p.patternProperties[z],[j],["patternProperties",z],Y)))return M}if(H)this.trackUnknownProperties&&(this.knownPropertyPaths[Y]=!0,delete this.unknownPropertyPaths[Y]);else if(p.additionalProperties!==void 0){if(this.trackUnknownProperties&&(this.knownPropertyPaths[Y]=!0,delete this.unknownPropertyPaths[Y]),typeof p.additionalProperties=="boolean"){if(!p.additionalProperties&&(M=this.createError(E.OBJECT_ADDITIONAL_PROPERTIES,{key:j},"","/additionalProperties",null,h,p).prefixWith(j,null),this.handleError(M)))return M}else if(M=this.validateAll(h[j],p.additionalProperties,[j],["additionalProperties"],Y))return M}else this.trackUnknownProperties&&!this.knownPropertyPaths[Y]&&(this.unknownPropertyPaths[Y]=!0)}return null},P.prototype.validateObjectDependencies=function(h,p,R){var M;if(p.dependencies!==void 0){for(var j in p.dependencies)if(h[j]!==void 0){var Y=p.dependencies[j];if(typeof Y=="string"){if(h[Y]===void 0&&(M=this.createError(E.OBJECT_DEPENDENCY_KEY,{key:j,missing:Y},"","",null,h,p).prefixWith(null,j).prefixWith(null,"dependencies"),this.handleError(M)))return M}else if(Array.isArray(Y))for(var H=0;H<Y.length;H++){var z=Y[H];if(h[z]===void 0&&(M=this.createError(E.OBJECT_DEPENDENCY_KEY,{key:j,missing:z},"","/"+H,null,h,p).prefixWith(null,j).prefixWith(null,"dependencies"),this.handleError(M)))return M}else if(M=this.validateAll(h,Y,[],["dependencies",j],R))return M}}return null},P.prototype.validateCombinations=function(h,p,R){return this.validateAllOf(h,p,R)||this.validateAnyOf(h,p,R)||this.validateOneOf(h,p,R)||this.validateNot(h,p,R)||null},P.prototype.validateAllOf=function(h,p,R){if(p.allOf===void 0)return null;for(var M,j=0;j<p.allOf.length;j++){var Y=p.allOf[j];if(M=this.validateAll(h,Y,[],["allOf",j],R))return M}return null},P.prototype.validateAnyOf=function(h,p,R){if(p.anyOf===void 0)return null;var M,j,Y=[],H=this.errors.length;this.trackUnknownProperties&&(M=this.unknownPropertyPaths,j=this.knownPropertyPaths);for(var z=!0,se=0;se<p.anyOf.length;se++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var oe=p.anyOf[se],de=this.errors.length,fe=this.validateAll(h,oe,[],["anyOf",se],R);if(fe===null&&de===this.errors.length){if(this.errors=this.errors.slice(0,H),this.trackUnknownProperties){for(var ie in this.knownPropertyPaths)j[ie]=!0,delete M[ie];for(var u in this.unknownPropertyPaths)j[u]||(M[u]=!0);z=!1;continue}return null}fe&&Y.push(fe.prefixWith(null,""+se).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=M,this.knownPropertyPaths=j),z?(Y=Y.concat(this.errors.slice(H)),this.errors=this.errors.slice(0,H),this.createError(E.ANY_OF_MISSING,{},"","/anyOf",Y,h,p)):void 0},P.prototype.validateOneOf=function(h,p,R){if(p.oneOf===void 0)return null;var M,j,Y=null,H=[],z=this.errors.length;this.trackUnknownProperties&&(M=this.unknownPropertyPaths,j=this.knownPropertyPaths);for(var se=0;se<p.oneOf.length;se++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var oe=p.oneOf[se],de=this.errors.length,fe=this.validateAll(h,oe,[],["oneOf",se],R);if(fe===null&&de===this.errors.length){if(Y!==null)return this.errors=this.errors.slice(0,z),this.createError(E.ONE_OF_MULTIPLE,{index1:Y,index2:se},"","/oneOf",null,h,p);if(Y=se,this.trackUnknownProperties){for(var ie in this.knownPropertyPaths)j[ie]=!0,delete M[ie];for(var u in this.unknownPropertyPaths)j[u]||(M[u]=!0)}}else fe&&H.push(fe)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=M,this.knownPropertyPaths=j),Y===null?(H=H.concat(this.errors.slice(z)),this.errors=this.errors.slice(0,z),this.createError(E.ONE_OF_MISSING,{},"","/oneOf",H,h,p)):(this.errors=this.errors.slice(0,z),null)},P.prototype.validateNot=function(h,p,R){if(p.not===void 0)return null;var M,j,Y=this.errors.length;this.trackUnknownProperties&&(M=this.unknownPropertyPaths,j=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var H=this.validateAll(h,p.not,null,null,R),z=this.errors.slice(Y);return this.errors=this.errors.slice(0,Y),this.trackUnknownProperties&&(this.unknownPropertyPaths=M,this.knownPropertyPaths=j),H===null&&z.length===0?this.createError(E.NOT_PASSED,{},"","/not",null,h,p):null},P.prototype.validateHypermedia=function(h,p,R){if(!p.links)return null;for(var M,j=0;j<p.links.length;j++){var Y=p.links[j];if(Y.rel==="describedby"){for(var H=new T(Y.href),z=!0,se=0;se<H.varNames.length;se++)if(!(H.varNames[se]in h)){z=!1;break}if(z){var oe={$ref:H.fillFromObject(h)};if(M=this.validateAll(h,oe,[],["links",j],R))return M}}}};var E={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},I={};for(var q in E)I[E[q]]=q;var V={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function F(h,p,R,M,j){if(Error.call(this),h===void 0)throw new Error("No error code supplied: "+M);this.message="",this.params=p,this.code=h,this.dataPath=R||"",this.schemaPath=M||"",this.subErrors=j||null;var Y=new Error(this.message);if(this.stack=Y.stack||Y.stacktrace,!this.stack)try{throw Y}catch(H){this.stack=H.stack||H.stacktrace}}F.prototype=Object.create(Error.prototype),F.prototype.constructor=F,F.prototype.name="ValidationError",F.prototype.prefixWith=function(h,p){if(h!==null&&(h=h.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+h+this.dataPath),p!==null&&(p=p.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+p+this.schemaPath),this.subErrors!==null)for(var R=0;R<this.subErrors.length;R++)this.subErrors[R].prefixWith(h,p);return this};var O={},L=function h(p){var R,M,j=new P,Y={setErrorReporter:function(H){return typeof H=="string"?this.language(H):(M=H,!0)},addFormat:function(){j.addFormat.apply(j,arguments)},language:function(H){return H?(O[H]||(H=H.split("-")[0]),!!O[H]&&(R=H,H)):R},addLanguage:function(H,z){var se;for(se in E)z[se]&&!z[E[se]]&&(z[E[se]]=z[se]);var oe=H.split("-")[0];if(O[oe])for(se in O[H]=Object.create(O[oe]),z)O[oe][se]===void 0&&(O[oe][se]=z[se]),O[H][se]=z[se];else O[H]=z,O[oe]=z;return this},freshApi:function(H){var z=h();return H&&z.language(H),z},validate:function(H,z,se,oe){var de=k(R),fe=new P(j,!1,M?function(u,f,w){return M(u,f,w)||de(u,f,w)}:de,se,oe);typeof z=="string"&&(z={$ref:z}),fe.addSchema("",z);var ie=fe.validateAll(H,z,null,null,"");return!ie&&oe&&(ie=fe.banUnknownProperties(H,z)),this.error=ie,this.missing=fe.missing,this.valid=ie===null,this.valid},validateResult:function(){var H={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(H,arguments),H},validateMultiple:function(H,z,se,oe){var de=k(R),fe=new P(j,!0,M?function(u,f,w){return M(u,f,w)||de(u,f,w)}:de,se,oe);typeof z=="string"&&(z={$ref:z}),fe.addSchema("",z),fe.validateAll(H,z,null,null,""),oe&&fe.banUnknownProperties(H,z);var ie={toString:function(){return this.valid?"valid":this.error.message}};return ie.errors=fe.errors,ie.missing=fe.missing,ie.valid=ie.errors.length===0,ie},addSchema:function(){return j.addSchema.apply(j,arguments)},getSchema:function(){return j.getSchema.apply(j,arguments)},getSchemaMap:function(){return j.getSchemaMap.apply(j,arguments)},getSchemaUris:function(){return j.getSchemaUris.apply(j,arguments)},getMissingUris:function(){return j.getMissingUris.apply(j,arguments)},dropSchemas:function(){j.dropSchemas.apply(j,arguments)},defineKeyword:function(){j.defineKeyword.apply(j,arguments)},defineError:function(H,z,se){if(typeof H!="string"||!/^[A-Z]+(_[A-Z]+)*$/.test(H))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if(typeof z!="number"||z%1!=0||z<1e4)throw new Error("Code number must be an integer > 10000");if(E[H]!==void 0)throw new Error("Error already defined: "+H+" as "+E[H]);if(I[z]!==void 0)throw new Error("Error code already used: "+I[z]+" as "+z);for(var oe in E[H]=z,I[z]=H,V[H]=V[z]=se,O){var de=O[oe];de[H]&&(de[z]=de[z]||de[H])}},reset:function(){j.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:c,resolveUrl:i,getDocumentUri:m,errorCodes:E};return Y.language(p||"en"),Y}();return L.addLanguage("en-gb",V),L.tv4=L,L})=="function"?o.apply(n,a):o)===void 0||(r.exports=l)},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseClientTypes=void 0;class o{constructor(){this.uris={},this.schemas={},this.aliases={}}declare(d,b,A,_){const S=d+"/"+b;if(_.extends){const v=_.extends.split("/"),g=v.length===1?d+"/"+v.shift():v.join("/"),y=this.uris[g];if(!y)throw"Type '"+S+"' tries to extend unknown schema '"+g+"'";_.extends=this.schemas[y]}this.uris[S]=A,this.aliases[A]=S,this.schemas[A]=_}resolveAlias(d){return this.uris[d]}getSchema(d){return this.schemas[d]}inScope(d){const b=d.length,A={};for(const _ in this.uris)if(_.substr(0,b+1)===d+"/"){const S=this.uris[_];A[S]=this.schemas[S]}return A}}n.BaseClientTypes=o;const a=new o;n.default=a},function(r,n,s){class o extends Error{constructor(l){super();const d=new Error("Schema not found: "+l);return d.name="SchemaNotFound",d}}r.exports=o},function(r,n,s){r.exports=class{constructor(o){this._itemsRev={},this._storage={},this._canPropagate=!1,this.defaultValue=o,this.activatePropagation()}get(o){o=o.toLowerCase();let a=this._storage[o];return a===void 0&&(a=this.defaultValue,this._storage[o]=a),a}set(o,a){return o=o.toLowerCase(),this._storage[o]===a||(this._storage[o]=a,a||delete this._itemsRev[o],this._updateParentFolderItemRev(o,a),this._canPropagate&&this._propagate(o)),a}delete(o){return this.set(o,null)}deactivatePropagation(){return this._canPropagate=!1,!0}activatePropagation(){return this._canPropagate||(this._generateFolderRev("/"),this._canPropagate=!0),!0}_hashCode(o){let a=0;if(o.length===0)return a;for(let l=0;l<o.length;l++)a=(a<<5)-a+o.charCodeAt(l),a|=0;return a}_generateHash(o){const a=o.sort().join("|");return""+this._hashCode(a)}_updateParentFolderItemRev(o,a){if(o!=="/"){const l=this._getParentFolder(o);this._itemsRev[l]||(this._itemsRev[l]={});const d=this._itemsRev[l];a?d[o]=a:delete d[o],this._updateParentFolderItemRev(l,this.defaultValue)}}_getParentFolder(o){return o.substr(0,o.lastIndexOf("/",o.length-2)+1)}_propagate(o){if(o!=="/"){const a=this._getParentFolder(o),l=this._itemsRev[a],d=[];for(const A in l)d.push(l[A]);const b=this._generateHash(d);this.set(a,b)}}_generateFolderRev(o){const a=this._itemsRev[o];let l=this.defaultValue;if(a){const d=[];for(const b in a){let A;A=b.substr(-1)==="/"?this._generateFolderRev(b):a[b],d.push(A)}d.length>0&&(l=this._generateHash(d))}return this.set(o,l),l}}},function(r,n,s){var o;/*!
 * webfinger.js
 *   version 2.7.0
 *   http://github.com/silverbucket/webfinger.js
 *
 * Developed and Maintained by:
 *   Nick Jennings <nick@silverbucket.net> 2012
 *
 * webfinger.js is released under the AGPL (see LICENSE).
 *
 * You don't have to do anything special to choose one license or the other and you don't
 * have to notify anyone which license you are using.
 * Please see the corresponding license file for details of these licenses.
 * You are free to use, modify and distribute this software, but all copyright
 * information must remain.
 *
 */typeof fetch!="function"&&typeof XMLHttpRequest!="function"&&(XMLHttpRequest=s(28)),function(a){var l={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage","http://tools.ietf.org/id/draft-dejong-remotestorage":"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},d={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camlistore:[]},b=["webfinger","host-meta","host-meta.json"];function A(S){return S.toString=function(){return this.message},S}function _(S){typeof S!="object"&&(S={}),this.config={tls_only:S.tls_only===void 0||S.tls_only,webfist_fallback:S.webfist_fallback!==void 0&&S.webfist_fallback,uri_fallback:S.uri_fallback!==void 0&&S.uri_fallback,request_timeout:S.request_timeout!==void 0?S.request_timeout:1e4}}_.prototype.__fetchJRD=function(S,v,g){if(typeof fetch=="function")return this.__fetchJRD_fetch(S,v,g);if(typeof XMLHttpRequest=="function")return this.__fetchJRD_XHR(S,v,g);throw new Error("add a polyfill for fetch or XMLHttpRequest")},_.prototype.__fetchJRD_fetch=function(S,v,g){var y,T=this;typeof AbortController=="function"&&(y=new AbortController);var P=fetch(S,{headers:{Accept:"application/jrd+json, application/json"},signal:y?y.signal:void 0}).then(function(N){if(N.ok)return N.text();throw N.status===404?A({message:"resource not found",url:S,status:N.status}):A({message:"error during request",url:S,status:N.status})},function(N){throw A({message:"error during request",url:S,status:void 0,err:N})}).then(function(N){if(T.__isValidJSON(N))return N;throw A({message:"invalid json",url:S,status:void 0})}),C=new Promise(function(N,$){setTimeout(function(){$(A({message:"request timed out",url:S,status:void 0})),y&&y.abort()},T.config.request_timeout)});Promise.race([P,C]).then(function(N){g(N)}).catch(function(N){v(N)})},_.prototype.__fetchJRD_XHR=function(S,v,g){var y=this,T=!1,P=new XMLHttpRequest;function C(){if(!T){if(T=!0,P.status===200)return y.__isValidJSON(P.responseText)?g(P.responseText):v(A({message:"invalid json",url:S,status:P.status}));if(P.status===404)return v(A({message:"resource not found",url:S,status:P.status}));if(P.status>=301&&P.status<=302){var $=P.getResponseHeader("Location");return function(x){return typeof x=="string"&&x.split("://")[0]==="https"}($)?N():v(A({message:"no redirect URL found",url:S,status:P.status}))}return v(A({message:"error during request",url:S,status:P.status}))}}function N(){P.onreadystatechange=function(){P.readyState===4&&C()},P.onload=function(){C()},P.ontimeout=function(){return v(A({message:"request timed out",url:S,status:P.status}))},P.open("GET",S,!0),P.timeout=y.config.request_timeout,P.setRequestHeader("Accept","application/jrd+json, application/json"),P.send()}return N()},_.prototype.__isValidJSON=function(S){try{JSON.parse(S)}catch{return!1}return!0},_.prototype.__isLocalhost=function(S){return/^localhost(\.localdomain)?(\:[0-9]+)?$/.test(S)},_.prototype.__processJRD=function(S,v,g,y){var T=JSON.parse(v);if(typeof T!="object"||typeof T.links!="object")return T.error!==void 0?g(A({message:T.error,request:S})):g(A({message:"unknown response from server",request:S}));var P=T.links;Array.isArray(P)||(P=[]);var C={object:T,json:v,idx:{}};C.idx.properties={name:void 0},C.idx.links=JSON.parse(JSON.stringify(d)),P.map(function(x,i){if(l.hasOwnProperty(x.rel)&&C.idx.links[l[x.rel]]){var m={};Object.keys(x).map(function(c,k){m[c]=x[c]}),C.idx.links[l[x.rel]].push(m)}});var N=JSON.parse(v).properties;for(var $ in N)N.hasOwnProperty($)&&$==="http://packetizer.com/ns/name"&&(C.idx.properties.name=N[$]);return y(C)},_.prototype.lookup=function(S,v){if(typeof S!="string")throw new Error("first parameter must be a user address");if(typeof v!="function")throw new Error("second parameter must be a callback");var g=this,y="";y=S.indexOf("://")>-1?S.replace(/ /g,"").split("/")[2]:S.replace(/ /g,"").split("@")[1];var T=0,P="https";function C(){var x="";return S.split("://")[1]||(x="acct:"),P+"://"+y+"/.well-known/"+b[T]+"?resource="+x+S}function N(x){if(g.config.uri_fallback&&y!=="webfist.org"&&T!==b.length-1)return T+=1,$();if(!g.config.tls_only&&P==="https")return T=0,P="http",$();if(!g.config.webfist_fallback||y==="webfist.org")return v(x);T=0,P="http",y="webfist.org";var i=C();g.__fetchJRD(i,v,function(m){g.__processJRD(i,m,v,function(c){typeof c.idx.links.webfist=="object"&&typeof c.idx.links.webfist[0].href=="string"&&g.__fetchJRD(c.idx.links.webfist[0].href,v,function(k){g.__processJRD(i,k,v,function(E){return v(null,v)})})})})}function $(){var x=C();g.__fetchJRD(x,N,function(i){g.__processJRD(x,i,v,function(m){v(null,m)})})}return g.__isLocalhost(y)&&(P="http"),setTimeout($,0)},_.prototype.lookupLink=function(S,v,g){if(!d.hasOwnProperty(v))return g("unsupported rel "+v);this.lookup(S,function(y,T){var P=T.idx.links[v];return y?g(y):P.length===0?g('no links found with rel="'+v+'"'):g(null,P[0])})},(o=function(){return _}.apply(n,[]))===void 0||(r.exports=o)}()},function(r,n){r.exports=XMLHttpRequest},function(r,n,s){var o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};const a=o(s(3)),l=o(s(16)),d=o(s(1)),b=s(0),A=o(s(30)),_=o(s(11)),S=o(s(6)),v=o(s(15)),g=o(s(7)),y=o(s(13)),T=o(s(14)),P=o(s(8)),C=o(s(31)),N=o(s(12)),$=o(s(32)),x=o(s(33)),i=o(s(34)),m={features:[],featuresDone:0,readyFired:!1,loadFeatures(){this.features=[],this.featuresDone=0,this.readyFired=!1,this.featureModules={WireClient:P.default,Dropbox:T.default,GoogleDrive:y.default,Access:_.default,Discover:v.default,Authorize:S.default,BaseClient:g.default,Env:l.default},a.default.cache&&b.extend(this.featureModules,{Caching:N.default,IndexedDB:$.default,LocalStorage:x.default,InMemoryStorage:i.default,Sync:C.default}),a.default.disableFeatures.forEach(c=>{this.featureModules[c]&&delete this.featureModules[c]}),this._allLoaded=!1;for(const c in this.featureModules)this.loadFeature(c)},hasFeature(c){for(let k=this.features.length-1;k>=0;k--)if(this.features[k].name===c)return this.features[k].supported;return!1},loadFeature(c){const k=this.featureModules[c],E=!k._rs_supported||k._rs_supported();d.default(`[RemoteStorage] [FEATURE ${c}] initializing ...`),typeof E=="object"?E.then(()=>{this.featureSupported(c,!0),this.initFeature(c)},()=>{this.featureSupported(c,!1)}):typeof E=="boolean"?(this.featureSupported(c,E),E&&this.initFeature(c)):this.featureSupported(c,!1)},initFeature(c){const k=this.featureModules[c];let E;try{E=k._rs_init(this)}catch(I){return void this.featureFailed(c,I)}typeof E=="object"&&typeof E.then=="function"?E.then(()=>{this.featureInitialized(c)},I=>{this.featureFailed(c,I)}):this.featureInitialized(c)},featureFailed(c,k){d.default(`[RemoteStorage] [FEATURE ${c}] initialization failed (${k})`),this.featureDone()},featureSupported(c,k){d.default(`[RemoteStorage] [FEATURE ${c}]${k?"":"not "} supported`),k||this.featureDone()},featureInitialized(c){d.default(`[RemoteStorage] [FEATURE ${c}] initialized`),this.features.push({name:c,init:this.featureModules[c]._rs_init,supported:!0,cleanup:this.featureModules[c]._rs_cleanup}),this.featureDone()},featureDone(){this.featuresDone++,this.featuresDone===Object.keys(this.featureModules).length&&setTimeout(this.featuresLoaded.bind(this),0)},_setCachingModule(){["IndexedDB","LocalStorage","InMemoryStorage"].some(c=>{if(this.features.some(k=>k.name===c))return this.features.local=this.featureModules[c],!0})},_fireReady(){try{this.readyFired||(this._emit("ready"),this.readyFired=!0)}catch(c){console.error("'ready' failed: ",c,c.stack),this._emit("error",c)}},featuresLoaded(){d.default("[RemoteStorage] All features loaded"),this._setCachingModule(),this.local=a.default.cache&&this.features.local&&new this.features.local,this.local&&this.remote?(this._setGPD(A.default,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",()=>{this._fireReady(),this._emit("connected")}),this.remote.on("not-connected",()=>{this._fireReady(),this._emit("not-connected")}),this.remote.connected&&(this._fireReady(),this._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(c){b.logError(c),this._emit("error",c)}this._processPending()},_collectCleanupFunctions(){this._cleanups=[];for(let c=0;c<this.features.length;c++){const k=this.features[c].cleanup;typeof k=="function"&&this._cleanups.push(k)}}};r.exports=m},function(r,n,s){var o=this&&this.__awaiter||function(b,A,_,S){return new(_||(_=Promise))(function(v,g){function y(C){try{P(S.next(C))}catch(N){g(N)}}function T(C){try{P(S.throw(C))}catch(N){g(N)}}function P(C){var N;C.done?v(C.value):(N=C.value,N instanceof _?N:new _(function($){$(N)})).then(y,T)}P((S=S.apply(b,A||[])).next())})};const a=(this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}})(s(1));function l(b){return this.backend==="dropbox"&&!!b.match(/^\/public\/.*[^\/]$/)}const d={get:function(b,A){if(this.local){if(A===void 0)A=typeof(_=this).remote=="object"&&_.remote.connected&&_.remote.online?2*_.getSyncInterval():(a.default("Not setting default maxAge, because remote is offline or not connected"),!1);else if(typeof A!="number"&&A!==!1)return Promise.reject("Argument 'maxAge' must be 'false' or a number");return this.local.get(b,A,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(b);var _},put:function(b,A,_){return l.bind(this)(b)?d._wrapBusyDone.call(this,this.remote.put(b,A,_)):this.local?this.local.put(b,A,_):d._wrapBusyDone.call(this,this.remote.put(b,A,_))},delete:function(b){return this.local?this.local.delete(b):d._wrapBusyDone.call(this,this.remote.delete(b))},_wrapBusyDone:function(b){return o(this,void 0,void 0,function*(){return this._emit("wire-busy"),b.then(A=>(this._emit("wire-done",{success:!0}),Promise.resolve(A)),A=>(this._emit("wire-done",{success:!1}),Promise.reject(A)))})}};r.exports=d},function(r,n,s){var o=this&&this.__awaiter||function(x,i,m,c){return new(m||(m=Promise))(function(k,E){function I(F){try{V(c.next(F))}catch(O){E(O)}}function q(F){try{V(c.throw(F))}catch(O){E(O)}}function V(F){var O;F.done?k(F.value):(O=F.value,O instanceof m?O:new m(function(L){L(O)})).then(I,q)}V((c=c.apply(x,i||[])).next())})},a=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};const l=a(s(3)),d=a(s(16)),b=a(s(2)),A=a(s(1)),_=a(s(6)),S=a(s(9)),v=a(s(4)),g=s(0);let y,T;function P(x,i,m){return{action:x,path:i,promise:m}}function C(x,i){return x.common.revision!==i&&(!x.remote||x.remote.revision!==i)}function N(x){return x.common&&x.common.revision}class ${constructor(i){this.rs=i,this._tasks={},this._running={},this._timeStarted={},this.numThreads=10,this.rs.local.onDiff(m=>{this.addTask(m),this.doTasks()}),this.rs.caching.onActivate(m=>{this.addTask(m),this.doTasks()}),this.addEvents(["done","req-done"])}now(){return new Date().getTime()}queueGetRequest(i){return new Promise((m,c)=>{this.rs.remote.connected?this.rs.remote.online?(this.addTask(i,function(){this.rs.local.get(i).then(k=>m(k))}.bind(this)),this.doTasks()):c("cannot fulfill maxAge requirement - remote is not online"):c("cannot fulfill maxAge requirement - remote is not connected")})}corruptServerItemsMap(i,m){if(typeof i!="object"||Array.isArray(i))return!0;for(const c in i){const k=i[c];if(typeof k!="object"||typeof k.ETag!="string")return!0;if(g.isFolder(c)){if(c.substring(0,c.length-1).indexOf("/")!==-1)return!0}else if(c.indexOf("/")!==-1||m&&(typeof k["Content-Type"]!="string"||typeof k["Content-Length"]!="number"))return!0}return!1}corruptItemsMap(i){if(typeof i!="object"||Array.isArray(i))return!0;for(const m in i)if(typeof i[m]!="boolean")return!0;return!1}corruptRevision(i){return typeof i!="object"||Array.isArray(i)||i.revision&&typeof i.revision!="string"||i.body&&typeof i.body!="string"&&typeof i.body!="object"||i.contentType&&typeof i.contentType!="string"||i.contentLength&&typeof i.contentLength!="number"||i.timestamp&&typeof i.timestamp!="number"||i.itemsMap&&this.corruptItemsMap(i.itemsMap)}isCorrupt(i){return typeof i!="object"||Array.isArray(i)||typeof i.path!="string"||this.corruptRevision(i.common)||i.local&&this.corruptRevision(i.local)||i.remote&&this.corruptRevision(i.remote)||i.push&&this.corruptRevision(i.push)}hasTasks(){return Object.getOwnPropertyNames(this._tasks).length>0}collectDiffTasks(){return o(this,void 0,void 0,function*(){let i=0;return this.rs.local.forAllNodes(m=>{i>100||(this.isCorrupt(m)?(A.default("[Sync] WARNING: corrupt node in local cache",m),typeof m=="object"&&m.path&&(this.addTask(m.path),i++)):(this.needsFetch(m)&&this.rs.access.checkPathPermission(m.path,"r")||g.isDocument(m.path)&&this.needsPush(m)&&this.rs.access.checkPathPermission(m.path,"rw"))&&(this.addTask(m.path),i++))}).then(()=>i).catch(m=>{throw m})})}inConflict(i){return i.local&&i.remote&&(i.remote.body!==void 0||i.remote.itemsMap)}needsRefresh(i){return!!i.common&&(!i.common.timestamp||this.now()-i.common.timestamp>l.default.syncInterval)}needsFetch(i){return!!this.inConflict(i)||!(!i.common||i.common.itemsMap!==void 0||i.common.body!==void 0)||!(!i.remote||i.remote.itemsMap!==void 0||i.remote.body!==void 0)}needsPush(i){return!this.inConflict(i)&&(!(!i.local||i.push)||void 0)}needsRemotePut(i){return i.local&&i.local.body}needsRemoteDelete(i){return i.local&&i.local.body===!1}getParentPath(i){const m=i.match(/^(.*\/)([^\/]+\/?)$/);if(m)return m[1];throw new Error('Not a valid path: "'+i+'"')}deleteChildPathsFromTasks(){for(const i in this._tasks){const m=g.pathsFromRoot(i);for(let c=1;c<m.length;c++)this._tasks[m[c]]&&(Array.isArray(this._tasks[i])&&this._tasks[i].length&&Array.prototype.push.apply(this._tasks[m[c]],this._tasks[i]),delete this._tasks[i])}}collectRefreshTasks(){return o(this,void 0,void 0,function*(){return this.rs.local.forAllNodes(i=>{let m;if(this.needsRefresh(i)){try{m=this.getParentPath(i.path)}catch{}m&&this.rs.access.checkPathPermission(m,"r")?this.addTask(m):this.rs.access.checkPathPermission(i.path,"r")&&this.addTask(i.path)}}).then(()=>this.deleteChildPathsFromTasks()).catch(i=>{throw i})})}flush(i){for(const m in i)this.rs.caching.checkPath(m)==="FLUSH"&&i[m]&&!i[m].local&&(A.default("[Sync] Flushing",m),i[m]=void 0);return i}doTask(i){return this.rs.local.getNodes([i]).then(m=>{const c=m[i];return c===void 0||function(k){return k.remote&&k.remote.revision&&!k.remote.itemsMap&&!k.remote.body}(c)?P("get",i,this.rs.remote.get(i)):this.needsRemotePut(c)?(c.push=g.deepClone(c.local),c.push.timestamp=this.now(),this.rs.local.setNodes(this.flush(m)).then(()=>{let k;return k=N(c)?{ifMatch:c.common.revision}:{ifNoneMatch:"*"},P("put",i,this.rs.remote.put(i,c.push.body,c.push.contentType,k))})):this.needsRemoteDelete(c)?(c.push={body:!1,timestamp:this.now()},this.rs.local.setNodes(this.flush(m)).then(()=>N(c)?P("delete",i,this.rs.remote.delete(i,{ifMatch:c.common.revision})):P("get",i,this.rs.remote.get(i)))):N(c)?P("get",i,this.rs.remote.get(i,{ifNoneMatch:c.common.revision})):P("get",i,this.rs.remote.get(i))})}autoMergeFolder(i){if(i.remote.itemsMap&&(i.common=i.remote,delete i.remote,i.common.itemsMap)){for(const m in i.common.itemsMap)i.local.itemsMap[m]||(i.local.itemsMap[m]=!1);g.equal(i.local.itemsMap,i.common.itemsMap)&&delete i.local}return i}autoMergeDocument(i){return function(m){return(!m.remote||!m.remote.revision||m.remote.revision===m.common.revision)&&(m.common.body===void 0&&m.remote.body===!1||m.remote.body===m.common.body&&m.remote.contentType===m.common.contentType)}(i)?delete(i=function(m){return m.remote&&m.remote.body===!1&&m.local&&m.local.body===!1&&delete m.local,m}(i)).remote:i.remote.body!==void 0&&(A.default("[Sync] Emitting keep/revert"),this.rs.local._emitChange({origin:"conflict",path:i.path,oldValue:i.local.body,newValue:i.remote.body,lastCommonValue:i.common.body,oldContentType:i.local.contentType,newContentType:i.remote.contentType,lastCommonContentType:i.common.contentType}),i.remote.body?i.common=i.remote:i.common={},delete i.remote,delete i.local),i}autoMerge(i){if(i.remote){if(i.local)return g.isFolder(i.path)?this.autoMergeFolder(i):this.autoMergeDocument(i);if(g.isFolder(i.path))i.remote.itemsMap!==void 0&&(i.common=i.remote,delete i.remote);else if(i.remote.body!==void 0){const m={origin:"remote",path:i.path,oldValue:i.common.body===!1?void 0:i.common.body,newValue:i.remote.body===!1?void 0:i.remote.body,oldContentType:i.common.contentType,newContentType:i.remote.contentType};if((m.oldValue||m.newValue)&&this.rs.local._emitChange(m),!i.remote.body)return;i.common=i.remote,delete i.remote}return i}i.common.body&&this.rs.local._emitChange({origin:"remote",path:i.path,oldValue:i.common.body,newValue:void 0,oldContentType:i.common.contentType,newContentType:void 0})}updateCommonTimestamp(i,m){return o(this,void 0,void 0,function*(){return this.rs.local.getNodes([i]).then(c=>(c[i]&&c[i].common&&c[i].common.revision===m&&(c[i].common.timestamp=this.now()),this.rs.local.setNodes(this.flush(c))))})}markChildren(i,m,c,k){return o(this,void 0,void 0,function*(){const E=[],I={},q={};for(const V in m)E.push(i+V),I[i+V]=m[V];for(const V in k)E.push(i+V);return this.rs.local.getNodes(E).then(V=>{let F,O;for(const L in V)if(O=V[L],I[L])O&&O.common?C(O,I[L].ETag)&&(c[L]=g.deepClone(O),c[L].remote={revision:I[L].ETag,timestamp:this.now()},c[L]=this.autoMerge(c[L])):(F=this.rs.caching.checkPath(L),F==="ALL"&&(c[L]={path:L,common:{timestamp:this.now()},remote:{revision:I[L].ETag,timestamp:this.now()}})),c[L]&&I[L]["Content-Type"]&&(c[L].remote.contentType=I[L]["Content-Type"]),c[L]&&I[L]["Content-Length"]&&(c[L].remote.contentLength=I[L]["Content-Length"]);else if(k[L.substring(i.length)]&&O&&O.common){if(O.common.itemsMap)for(const h in O.common.itemsMap)q[L+h]=!0;if(O.local&&O.local.itemsMap)for(const h in O.local.itemsMap)q[L+h]=!0;if(O.remote||g.isFolder(L))c[L]=void 0;else if(c[L]=this.autoMerge(O),c[L]===void 0){const h=this.getParentPath(L),p=c[h],R=L.substring(i.length);p&&p.local&&(delete p.local.itemsMap[R],g.equal(p.local.itemsMap,p.common.itemsMap)&&delete p.local)}}return this.deleteRemoteTrees(Object.keys(q),c).then(L=>this.rs.local.setNodes(this.flush(L)))})})}deleteRemoteTrees(i,m){return o(this,void 0,void 0,function*(){return i.length===0?Promise.resolve(m):this.rs.local.getNodes(i).then(c=>o(this,void 0,void 0,function*(){const k={};function E(I,q){if(I&&I.itemsMap)for(const V in I.itemsMap)k[q+V]=!0}for(const I in c){const q=c[I];q&&(g.isFolder(I)?(E(q.common,I),E(q.local,I)):q.common&&typeof q.common.body!==void 0&&(m[I]=g.deepClone(q),m[I].remote={body:!1,timestamp:this.now()},m[I]=this.autoMerge(m[I])))}return this.deleteRemoteTrees(Object.keys(k),m).then(I=>this.rs.local.setNodes(this.flush(I)))}))})}completeFetch(i,m,c,k){return o(this,void 0,void 0,function*(){let E,I;const q=g.pathsFromRoot(i);return g.isFolder(i)?E=[i]:(I=q[1],E=[i,I]),this.rs.local.getNodes(E).then(V=>{let F,O,L=V[i];const h={};function p(R){if(R&&R.itemsMap)for(F in R.itemsMap)m[F]||(h[F]=!0)}if(typeof L=="object"&&L.path===i&&typeof L.common=="object"||(L={path:i,common:{}},V[i]=L),L.remote={revision:k,timestamp:this.now()},g.isFolder(i))for(F in p(L.common),p(L.remote),L.remote.itemsMap={},m)L.remote.itemsMap[F]=!0;else L.remote.body=m,L.remote.contentType=c,O=V[I],O&&O.local&&O.local.itemsMap&&(F=i.substring(I.length),O.local.itemsMap[F]=!0,g.equal(O.local.itemsMap,O.common.itemsMap)&&delete O.local);return V[i]=this.autoMerge(L),{toBeSaved:V,missingChildren:h}})})}completePush(i,m,c,k){return o(this,void 0,void 0,function*(){return this.rs.local.getNodes([i]).then(E=>{const I=E[i];if(!I.push)throw this.stopped=!0,new Error("completePush called but no push version!");return c?(A.default("[Sync] We have a conflict"),I.remote&&I.remote.revision===k||(I.remote={revision:k||"conflict",timestamp:this.now()},delete I.push),E[i]=this.autoMerge(I)):(I.common={revision:k,timestamp:this.now()},m==="put"?(I.common.body=I.push.body,I.common.contentType=I.push.contentType,g.equal(I.local.body,I.push.body)&&I.local.contentType===I.push.contentType&&delete I.local,delete I.push):m==="delete"&&(I.local.body===!1?E[i]=void 0:delete I.push)),this.rs.local.setNodes(this.flush(E))})})}dealWithFailure(i){return o(this,void 0,void 0,function*(){return this.rs.local.getNodes([i]).then(m=>{if(m[i])return delete m[i].push,this.rs.local.setNodes(this.flush(m))})})}interpretStatus(i){const m={statusCode:i,successful:void 0,conflict:void 0,unAuth:void 0,notFound:void 0,changed:void 0,networkProblems:void 0};if(typeof i=="string"&&(i==="offline"||i==="timeout"))return m.successful=!1,m.networkProblems=!0,m;if(typeof i=="number"){const c=Math.floor(i/100);return m.successful=c===2||i===304||i===412||i===404,m.conflict=i===412,m.unAuth=i===401&&this.rs.remote.token!==_.default.IMPLIED_FAKE_TOKEN||i===402||i===403,m.notFound=i===404,m.changed=i!==304,m}}handleGetResponse(i,m,c,k,E){return o(this,void 0,void 0,function*(){return m.notFound&&(c=!!g.isFolder(i)&&{}),m.changed?this.completeFetch(i,c,k,E).then(I=>g.isFolder(i)?this.corruptServerItemsMap(c)?(A.default("[Sync] WARNING: Discarding corrupt folder description from server for "+i),!1):this.markChildren(i,c,I.toBeSaved,I.missingChildren).then(()=>!0):this.rs.local.setNodes(this.flush(I.toBeSaved)).then(()=>!0)):this.updateCommonTimestamp(i,E).then(()=>!0)})}handleResponse(i,m,c){const k=this.interpretStatus(c.statusCode);if(k.successful){if(m==="get")return this.handleGetResponse(i,k,c.body,c.contentType,c.revision);if(m==="put"||m==="delete")return this.completePush(i,m,k.conflict,c.revision).then(function(){return!0});throw new Error("cannot handle response for unknown action "+m)}{let E;return E=k.unAuth?new v.default:k.networkProblems?new S.default("Network request failed."):new Error("HTTP response code "+k.statusCode+" received."),this.dealWithFailure(i).then(()=>{throw this.rs._emit("error",E),E})}}finishTask(i){if(i.action!==void 0)return i.promise.then(m=>this.handleResponse(i.path,i.action,m),m=>(A.default("[Sync] wireclient rejects its promise!",i.path,i.action,m),this.handleResponse(i.path,i.action,{statusCode:"offline"}))).then(m=>{if(delete this._timeStarted[i.path],delete this._running[i.path],m&&this._tasks[i.path]){for(let c=0;c<this._tasks[i.path].length;c++)this._tasks[i.path][c]();delete this._tasks[i.path]}this.rs._emit("sync-req-done"),this.collectTasks(!1).then(()=>{!this.hasTasks()||this.stopped?(A.default("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(this._tasks).length,this.stopped),this.done||(this.done=!0,this.rs._emit("sync-done"))):setTimeout(()=>{this.doTasks()},10)})},m=>{A.default("[Sync] Error",m),delete this._timeStarted[i.path],delete this._running[i.path],this.rs._emit("sync-req-done"),this.done||(this.done=!0,this.rs._emit("sync-done"))});delete this._running[i.path]}doTasks(){let i,m,c=0;i=this.rs.remote.connected?this.rs.remote.online?this.numThreads:1:0;const k=i-Object.getOwnPropertyNames(this._running).length;if(k<=0)return!0;for(m in this._tasks)if(!this._running[m]&&(this._timeStarted[m]=this.now(),this._running[m]=this.doTask(m),this._running[m].then(this.finishTask.bind(this)),c++,c>=k))return!0;return c>=k}collectTasks(i){return o(this,void 0,void 0,function*(){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(m=>m||i===!1?Promise.resolve():this.collectRefreshTasks(),function(m){throw m})})}addTask(i,m){this._tasks[i]||(this._tasks[i]=[]),typeof m=="function"&&this._tasks[i].push(m)}sync(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(()=>{try{this.doTasks()}catch(i){A.default("[Sync] doTasks error",i)}},function(i){throw A.default("[Sync] Sync error",i),new Error("Local cache unavailable")})}static _rs_init(i){y=function(){A.default("[Sync] syncCycleCb calling syncCycle");const m=new d.default;m.isBrowser()&&function(c,k){function E(I){const q=k.getCurrentSyncInterval();l.default.isBackground=!I;const V=k.getCurrentSyncInterval();k._emit("sync-interval-change",{oldValue:q,newValue:V})}c.on("background",()=>E(!1)),c.on("foreground",()=>E(!0))}(m,i),i.sync||(i.sync=new $(i),i.syncStopped&&(A.default("[Sync] Instantiating sync stopped"),i.sync.stopped=!0,delete i.syncStopped)),A.default("[Sync] syncCycleCb calling syncCycle"),i.syncCycle()},T=function(){i.removeEventListener("connected",T),i.startSync()},i.on("ready",y),i.on("connected",T)}static _rs_cleanup(i){i.stopSync(),i.removeEventListener("ready",y),i.removeEventListener("connected",T),i.sync=void 0,delete i.sync}}g.applyMixins($,[b.default]),r.exports=$},function(r,n,s){(function(o){var a=this&&this.__awaiter||function(g,y,T,P){return new(T||(T=Promise))(function(C,N){function $(m){try{i(P.next(m))}catch(c){N(c)}}function x(m){try{i(P.throw(m))}catch(c){N(c)}}function i(m){var c;m.done?C(m.value):(c=m.value,c instanceof T?c:new T(function(k){k(c)})).then($,x)}i((P=P.apply(g,y||[])).next())})},l=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};const d=l(s(2)),b=l(s(10)),A=l(s(1)),_=s(0);let S;class v extends b.default{constructor(y){super(),this.addEvents(["change","local-events-done"]),this.db=y||S,this.db?(this.getsRunning=0,this.putsRunning=0,this.changesQueued={},this.changesRunning={},this.commitSlownessWarning=null):A.default("[IndexedDB] Failed to open DB")}getNodes(y){return a(this,void 0,void 0,function*(){const T=[],P={};for(let C=0,N=y.length;C<N;C++)this.changesQueued[y[C]]!==void 0?P[y[C]]=_.deepClone(this.changesQueued[y[C]]||void 0):this.changesRunning[y[C]]!==void 0?P[y[C]]=_.deepClone(this.changesRunning[y[C]]||void 0):T.push(y[C]);return T.length>0?this.getNodesFromDb(T).then(function(C){for(const N in P)C[N]=P[N];return C}):Promise.resolve(P)})}setNodes(y){return a(this,void 0,void 0,function*(){for(const T in y)this.changesQueued[T]=y[T]||!1;return this.maybeFlush(),Promise.resolve()})}maybeFlush(){this.putsRunning===0?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=o.setInterval(function(){console.warn("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))}flushChangesQueued(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))}getNodesFromDb(y){return new Promise((T,P)=>{const C=this.db.transaction(["nodes"],"readonly"),N=C.objectStore("nodes"),$={};this.getsRunning++,y.map(x=>{N.get(x).onsuccess=i=>{$[x]=i.target.result}}),C.oncomplete=()=>{T($),this.getsRunning--},C.onerror=C.onabort=()=>{P("get transaction error/abort"),this.getsRunning--}})}setNodesInDb(y){return a(this,void 0,void 0,function*(){return new Promise((T,P)=>{const C=this.db.transaction(["nodes"],"readwrite"),N=C.objectStore("nodes"),$=new Date().getTime();this.putsRunning++,A.default("[IndexedDB] Starting put",y,this.putsRunning);for(const x in y){const i=y[x];if(typeof i=="object")try{N.put(i)}catch(m){throw A.default("[IndexedDB] Error while putting",i,m),m}else try{N.delete(x)}catch(m){throw A.default("[IndexedDB] Error while removing",N,i,m),m}}C.oncomplete=()=>{this.putsRunning--,A.default("[IndexedDB] Finished put",y,this.putsRunning,new Date().getTime()-$+"ms"),T()},C.onerror=()=>{this.putsRunning--,P("transaction error")},C.onabort=()=>{P("transaction abort"),this.putsRunning--}})})}reset(y){const T=this.db.name;this.db.close(),v.clean(this.db.name,()=>{v.open(T,(P,C)=>{P?A.default("[IndexedDB] Error while resetting local storage",P):this.db=C,typeof y=="function"&&y(self)})})}forAllNodes(y){return a(this,void 0,void 0,function*(){return new Promise(T=>{this.db.transaction(["nodes"],"readonly").objectStore("nodes").openCursor().onsuccess=P=>{const C=P.target.result;C?(y(this.migrate(C.value)),C.continue()):T()}})})}closeDB(){this.putsRunning===0?this.db.close():setTimeout(this.closeDB.bind(this),100)}static open(y,T){const P=setTimeout(function(){T("timeout trying to open db")},1e4);try{const C=indexedDB.open(y,2);C.onerror=function(){A.default("[IndexedDB] Opening DB failed",C),clearTimeout(P),T(C.error)},C.onupgradeneeded=function(N){const $=C.result;A.default("[IndexedDB] Upgrade: from ",N.oldVersion," to ",N.newVersion),N.oldVersion!==1&&(A.default("[IndexedDB] Creating object store: nodes"),$.createObjectStore("nodes",{keyPath:"path"})),A.default("[IndexedDB] Creating object store: changes"),$.createObjectStore("changes",{keyPath:"path"})},C.onsuccess=function(){clearTimeout(P);const N=C.result;if(!N.objectStoreNames.contains("nodes")||!N.objectStoreNames.contains("changes"))return A.default("[IndexedDB] Missing object store. Resetting the database."),void v.clean(y,function(){v.open(y,T)});T(null,C.result)}}catch(C){A.default("[IndexedDB] Failed to open database: "+C),A.default("[IndexedDB] Resetting database and trying again."),clearTimeout(P),v.clean(y,function(){v.open(y,T)})}}static clean(y,T){const P=indexedDB.deleteDatabase(y);P.onsuccess=function(){A.default("[IndexedDB] Done removing DB"),T()},P.onerror=P.onabort=function(C){console.error('Failed to remove database "'+y+'"',C)}}static _rs_init(y){return new Promise((T,P)=>{v.open("remotestorage",function(C,N){C?P(C):(S=N,N.onerror=()=>{y._emit("error",C)},T())})})}static _rs_supported(){return new Promise((y,T)=>{const P=_.getGlobalContext();let C=!1;if(typeof navigator!="undefined"&&navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(C=!0)),"indexedDB"in P&&!C)try{const N=indexedDB.open("rs-check");N.onerror=function(){T()},N.onsuccess=function(){N.result.close(),indexedDB.deleteDatabase("rs-check"),y()}}catch{T()}else T()})}static _rs_cleanup(y){return new Promise(T=>{y.local&&y.local.closeDB(),v.clean("remotestorage",T)})}diffHandler(){}}_.applyMixins(v,[d.default]),r.exports=v}).call(this,s(5))},function(r,n,s){var o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};const a=o(s(10)),l=o(s(2)),d=o(s(1)),b=s(0),A="remotestorage:cache:nodes:";function _(v){return v.substr(0,A.length)===A||v.substr(0,28)==="remotestorage:cache:changes:"}class S extends a.default{constructor(){super(),this.addEvents(["change","local-events-done"])}diffHandler(...g){}getNodes(g){const y={};for(let T=0,P=g.length;T<P;T++)try{y[g[T]]=JSON.parse(localStorage[A+g[T]])}catch{y[g[T]]=void 0}return Promise.resolve(y)}setNodes(g){for(const y in g)localStorage[A+y]=JSON.stringify(g[y]);return Promise.resolve()}forAllNodes(g){let y;for(let T=0,P=localStorage.length;T<P;T++)if(localStorage.key(T).substr(0,A.length)===A){try{y=this.migrate(JSON.parse(localStorage[localStorage.key(T)]))}catch{y=void 0}y&&g(y)}return Promise.resolve()}static _rs_init(){}static _rs_supported(){return b.localStorageAvailable()}static _rs_cleanup(){const g=[];for(let y=0,T=localStorage.length;y<T;y++){const P=localStorage.key(y);_(P)&&g.push(P)}g.forEach(y=>{d.default("[LocalStorage] Removing",y),delete localStorage[y]})}}b.applyMixins(S,[l.default]),r.exports=S},function(r,n,s){var o=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};const a=o(s(2)),l=o(s(10)),d=s(0);class b extends l.default{constructor(){super(),this._storage={},this.addEvents(["change","local-events-done"])}getNodes(_){const S={};for(let v=0,g=_.length;v<g;v++)S[_[v]]=this._storage[_[v]];return Promise.resolve(S)}setNodes(_){for(const S in _)_[S]===void 0?delete this._storage[S]:this._storage[S]=_[S];return Promise.resolve()}forAllNodes(_){for(const S in this._storage)_(this.migrate(this._storage[S]));return Promise.resolve()}diffHandler(){}static _rs_init(){}static _rs_supported(){return!0}static _rs_cleanup(){}}d.applyMixins(b,[a.default]),r.exports=b}])})})(Yn);var uo=ao(Yn.exports);const Ke=new uo;Ke.setApiKeys({dropbox:so,googledrive:oo});const rr=Ir(0),lo=yt(rr,t=>t>0),co=yt(rr,t=>t);function ho(){rr.update(t=>t+1)}function fo(){rr.update(t=>t-1)}function po(t){return ho(),t.finally(fo)}Ke.access.claim("passwords","rw");Ke.caching.enable("/passwords/");const Or=Ke.scope("/passwords/");Or.declareType("passwords",{type:"object",properties:{".*":{type:"object",properties:{id:{type:"string",format:"uuid"},url:{type:"string",format:"uri"},username:{type:"string"},password:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","url","username","password","createdAt","updatedAt"]}}});const st=Ir({});yt(st,t=>Object.values(t));yt(st,t=>t);const xr=yt(st,t=>Object.values(t).reduce((e,r)=>((e[r.url]||(e[r.url]=[])).push(r),e),{}));function mo(t,e,r){const s={id:no(),url:zn(t),username:e,password:r,createdAt:new Date,updatedAt:new Date};st.update(o=>{const a=Ut(it({},o),{[s.id]:s});return Cr(a),a})}async function go(t,e){let r;st.update(n=>{const s=n[t];if(s){const o=Ut(it(it({},s),e),{updatedAt:new Date});o.url=zn(o.url);const a=Ut(it({},n),{[t]:o});return r=Cr(a),a}else return n}),r&&await r}function yo(t){st.update(e=>{const r=it({},e);return delete r[t],Cr(r),r})}function vo(t){return{id:t.id,url:t.url,username:t.username,password:t.password,createdAt:t.createdAt.toJSON(),updatedAt:t.updatedAt.toJSON()}}function _o(t){return{id:t.id,url:t.url,username:t.username,password:t.password,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)}}async function Cr(t){await po(Or.storeObject("passwords","passwords.json",Object.values(t).reduce((e,r)=>(e[r.id]=vo(r),e),{})))}function bo(){Or.getObject("passwords.json",!1).then(t=>{if(t){const e=t;delete e["@context"],st.update(r=>(Object.values(e).forEach(n=>{const s=r[n.id],o=_o(n);(!s||s.updatedAt<o.updatedAt)&&(r[n.id]=o)}),r))}})}Ke.on("sync-done",bo);function wo(t){let e,r,n,s,o;const a=t[2].default,l=vr(a,t,t[1],null);return{c(){e=Q("div"),l&&l.c(),this.h()},l(d){e=Z(d,"DIV",{});var b=ee(e);l&&l.l(b),b.forEach(G),this.h()},h(){e.hidden=!0},m(d,b){ne(d,e,b),l&&l.m(e,null),n=!0,s||(o=Gs(r=Eo.call(null,e,t[0])),s=!0)},p(d,[b]){l&&l.p&&(!n||b&2)&&_r(l,a,d,d[1],n?wr(a,d[1],b,null):br(d[1]),null),r&&er(r.update)&&b&1&&r.update.call(null,d[0])},i(d){n||(ae(l,d),n=!0)},o(d){ue(l,d),n=!1},d(d){d&&G(e),l&&l.d(d),s=!1,o()}}}function Eo(t,e="body"){let r;async function n(o){if(e=o,typeof e=="string"){if(r=document.querySelector(e),r===null&&(await Wn(),r=document.querySelector(e)),r===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)r=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);r.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return n(e),{update:n,destroy:s}}function Po(t,e,r){let{$$slots:n={},$$scope:s}=e,{target:o="body"}=e;return t.$$set=a=>{"target"in a&&r(0,o=a.target),"$$scope"in a&&r(1,s=a.$$scope)},[o,s,n]}class To extends Ne{constructor(e){super(),Re(this,e,Po,wo,Ye,{target:0})}}function Ao(t){let e;return{c(){e=Qe("path"),this.h()},l(r){e=Ze(r,"path",{d:!0}),ee(e).forEach(G),this.h()},h(){J(e,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z")},m(r,n){ne(r,e,n)},p:ke,d(r){r&&G(e)}}}function So(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[Ao]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)s=Me(s,n[o]);return e=new xt({props:s}),{c(){ye(e.$$.fragment)},l(o){ve(e.$$.fragment,o)},m(o,a){_e(e,o,a),r=!0},p(o,[a]){const l=a&1?It(n,[n[0],Ot(o[0])]):{};a&2&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){r||(ae(e.$$.fragment,o),r=!0)},o(o){ue(e.$$.fragment,o),r=!1},d(o){be(e,o)}}}function ko(t,e,r){return t.$$set=n=>{r(0,e=Me(Me({},e),Ve(n)))},e=Ve(e),[e]}class Kn extends Ne{constructor(e){super(),Re(this,e,ko,So,Ye,{})}}const No=t=>({}),an=t=>({});function Ro(t){let e,r,n,s,o,a,l,d,b,A,_,S,v,g,y,T,P;const C=t[3].title,N=vr(C,t,t[4],an);S=new Kn({});const $=t[3].default,x=vr($,t,t[4],null);return{c(){e=Q("div"),r=Q("div"),n=ce(),s=Q("div"),o=Q("div"),a=Q("div"),l=Q("div"),d=Q("div"),N&&N.c(),b=ce(),A=Q("button"),_=Q("div"),ye(S.$$.fragment),v=ce(),g=Q("div"),x&&x.c(),this.h()},l(i){e=Z(i,"DIV",{class:!0,role:!0,"aria-modal":!0});var m=ee(e);r=Z(m,"DIV",{class:!0}),ee(r).forEach(G),n=he(m),s=Z(m,"DIV",{class:!0});var c=ee(s);o=Z(c,"DIV",{class:!0});var k=ee(o);a=Z(k,"DIV",{class:!0});var E=ee(a);l=Z(E,"DIV",{class:!0});var I=ee(l);d=Z(I,"DIV",{class:!0});var q=ee(d);N&&N.l(q),q.forEach(G),b=he(I),A=Z(I,"BUTTON",{class:!0});var V=ee(A);_=Z(V,"DIV",{class:!0});var F=ee(_);ve(S.$$.fragment,F),F.forEach(G),V.forEach(G),I.forEach(G),v=he(E),g=Z(E,"DIV",{class:!0});var O=ee(g);x&&x.l(O),O.forEach(G),E.forEach(G),k.forEach(G),c.forEach(G),m.forEach(G),this.h()},h(){J(r,"class","fixed inset-0 bg-gray-500 bg-opacity-25"),Dt(r,"hidden",!t[0]),J(d,"class","flex-grow"),J(_,"class","w-6 h-6"),J(A,"class","bg-transparent border-0 text-black outline-none focus:outline-none"),J(l,"class","flex items-start justify-between px-4 pt-4"),J(g,"class","relative p-4 flex-auto"),J(a,"class","relative bg-white text-left overflow-hidden shadow-xl sm:my-8 sm:container sm:w-full"),J(o,"class","flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0"),J(s,"class","fixed z-10 inset-0 overflow-y-auto"),Dt(s,"hidden",!t[0]),J(e,"class","relative z-10"),J(e,"role","dialog"),J(e,"aria-modal","true")},m(i,m){ne(i,e,m),K(e,r),K(e,n),K(e,s),K(s,o),K(o,a),K(a,l),K(l,d),N&&N.m(d,null),K(l,b),K(l,A),K(A,_),_e(S,_,null),K(a,v),K(a,g),x&&x.m(g,null),y=!0,T||(P=we(A,"click",t[1]),T=!0)},p(i,m){m&1&&Dt(r,"hidden",!i[0]),N&&N.p&&(!y||m&16)&&_r(N,C,i,i[4],y?wr(C,i[4],m,No):br(i[4]),an),x&&x.p&&(!y||m&16)&&_r(x,$,i,i[4],y?wr($,i[4],m,null):br(i[4]),null),m&1&&Dt(s,"hidden",!i[0])},i(i){y||(ae(N,i),ae(S.$$.fragment,i),ae(x,i),y=!0)},o(i){ue(N,i),ue(S.$$.fragment,i),ue(x,i),y=!1},d(i){i&&G(e),N&&N.d(i),be(S),x&&x.d(i),T=!1,P()}}}function Io(t){let e,r;return e=new To({props:{$$slots:{default:[Ro]},$$scope:{ctx:t}}}),{c(){ye(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,s){_e(e,n,s),r=!0},p(n,[s]){const o={};s&17&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){ue(e.$$.fragment,n),r=!1},d(n){be(e,n)}}}function Oo(t,e,r){let{$$slots:n={},$$scope:s}=e,{onClose:o=()=>{}}=e,{open:a=!1}=e;function l(){r(0,a=!1),o()}return t.$$set=d=>{"onClose"in d&&r(2,o=d.onClose),"open"in d&&r(0,a=d.open),"$$scope"in d&&r(4,s=d.$$scope)},[a,l,o,n,s]}class un extends Ne{constructor(e){super(),Re(this,e,Oo,Io,We,{onClose:2,open:0})}}var xo=Object.assign;function cr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return typeof t=="function"?t.apply(void 0,e):t}function Xn(t){function e(s,o){var a,l,d=r();return s=xo({},d||{},(a=cr(t,s,d))!==null&&a!==void 0?a:s),a=n.ctx=Object.freeze(s),n.ancestry.unshift(a),o=o(a),n.ancestry.shift(),n.ctx=(l=n.ancestry[0])!==null&&l!==void 0?l:null,o}function r(){return n.ctx}var n={ancestry:[]};return{bind:function(s,o){return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return e(s,function(){return o.apply(void 0,a)})}},run:e,use:r,useX:function(s){var o,a=n.ctx;if(s=(o=cr(s))!==null&&o!==void 0?o:"Context was used after it was closed",!a)throw s instanceof String?s.valueOf():Error(s&&cr(s));return n.ctx}}}var Pt=Object.assign;function Mr(t){return typeof t=="function"}function Ee(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(void 0,e)}}function Qn(t){return t===null}var Co=Ee(Qn);function Ur(t){return t===void 0}var Mo=Ee(Ur);function nr(t){return t===null||Ur(t)}var Uo=Ee(nr);function Ge(t){return String(t)===t}function Zn(t,e){return Ge(t)&&Ge(e)&&t.endsWith(e)}var Do=Ee(Zn);function es(t,e){return t===e}var jo=Ee(es);function qe(t){var e=Number(t);return!(isNaN(parseFloat(String(t)))||isNaN(Number(t))||!isFinite(e))}var Fo=Ee(qe);function wt(t,e){return qe(t)&&qe(e)&&Number(t)>Number(e)}function Ct(t,e){return qe(t)&&qe(e)&&Number(t)===Number(e)}var Lo=Ee(Ct);function Bt(t,e){return Ct(t,e)||wt(t,e)}function Dr(t){return!!Array.isArray(t)}var Bo=Ee(Dr);function ts(t,e){return!!(Dr(e)||Ge(e)&&Ge(t))&&e.indexOf(t)!==-1}var $o=Ee(ts);function Et(t,e){return qe(t)&&qe(e)&&Number(t)<Number(e)}function $t(t,e){return Ct(t,e)||Et(t,e)}function rs(t,e,r){return Bt(t,e)&&$t(t,r)}var qo=Ee(rs);function ns(t){return nr(t)||Ge(t)&&!t.trim()}var Vo=Ee(ns);function Tt(t){return!!t===t}var Go=Ee(Tt);function jr(t){return typeof t=="number"}var Wo=Ee(jr);function Jt(t,e){return Ct(t.length,e)}var Ho=Ee(Jt);function Fr(t){return!t||(jr(t)?t===0:Object.prototype.hasOwnProperty.call(t,"length")?Jt(t,0):typeof t=="object"&&Jt(Object.keys(t),0))}var Jo=Ee(Fr);function ss(t,e){return t in e}var zo=Ee(ss);function os(t){return Number.isNaN(t)}var Yo=Ee(os),Ko=Ee(Ge);function is(t){return!!t}var Xo=Ee(is);function as(t,e){if(nr(e))return!1;for(var r in e)if(e[r]===t)return!0;return!1}var Qo=Ee(as);function us(t,e){return e instanceof RegExp?e.test(t):!!Ge(e)&&new RegExp(e).test(t)}var Zo=Ee(us);function ln(t,e){return Ge(t)&&Ge(e)&&t.startsWith(e)}var et={condition:function(t,e){try{return e(t)}catch{return!1}},doesNotEndWith:Do,doesNotStartWith:Ee(ln),endsWith:Zn,equals:es,greaterThan:wt,greaterThanOrEquals:Bt,gt:wt,gte:Bt,inside:ts,isArray:Dr,isBetween:rs,isBlank:ns,isBoolean:Tt,isEmpty:Fr,isEven:function(t){return!!qe(t)&&t%2==0},isFalsy:Xo,isKeyOf:ss,isNaN:os,isNegative:function(t){return Et(t,0)},isNotArray:Bo,isNotBetween:qo,isNotBlank:Vo,isNotBoolean:Go,isNotEmpty:Jo,isNotKeyOf:zo,isNotNaN:Yo,isNotNull:Co,isNotNullish:Uo,isNotNumber:Wo,isNotNumeric:Fo,isNotString:Ko,isNotUndefined:Mo,isNotValueOf:Qo,isNull:Qn,isNullish:nr,isNumber:jr,isNumeric:qe,isOdd:function(t){return!!qe(t)&&t%2!=0},isPositive:function(t){return wt(t,0)},isString:Ge,isTruthy:is,isUndefined:Ur,isValueOf:as,lengthEquals:Jt,lengthNotEquals:Ho,lessThan:Et,lessThanOrEquals:$t,longerThan:function(t,e){return wt(t.length,e)},longerThanOrEquals:function(t,e){return Bt(t.length,e)},lt:Et,lte:$t,matches:us,notEquals:jo,notInside:$o,notMatches:Zo,numberEquals:Ct,numberNotEquals:Lo,shorterThan:function(t,e){return Et(t.length,e)},shorterThanOrEquals:function(t,e){return $t(t.length,e)},startsWith:ln};function Lr(t){for(var e in et){var r=et[e];Mr(r)&&t(e,r)}}var Br=Xn(function(t,e){var r={value:t.value,meta:t.meta||{}};return e?t.set?Pt(r,{parent:function(){return e&&{value:e.value,meta:e.meta,parent:e.parent}}}):e:Pt(r,{parent:ei})});function ei(){return null}function Nt(t,e,r){if(r||arguments.length===2)for(var n,s=0,o=e.length;s<o;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))}function sr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return Mr(t)?t.apply(void 0,e):t}function ls(t,e){if(!t)throw e instanceof String?e.valueOf():Error(e&&sr(e))}function $r(){try{return Mr(Proxy)}catch{return!1}}function ti(t,e){var r;return(r=sr(t))!==null&&r!==void 0?r:e}function zt(t,e){return t={pass:t},e&&(t.message=e),t}function cs(t,e,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return ls(Tt(t)||t&&Tt(t.pass),"Incorrect return value for rule: "+JSON.stringify(t)),Tt(t)?zt(t):zt(t.pass,sr.apply(void 0,Nt([t.message,e,r],n,!1)))}function cn(t){function e(s,o,a){return function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return ls((d=cs.apply(void 0,Nt([Br.run({value:t},function(){return o.apply(void 0,Nt([t],l,!1))}),a,t],l,!1))).pass,Fr(d.message)?"enforce/".concat(a," failed with ").concat(JSON.stringify(t)):new String(d.message)),s}}var r={};if(!$r())return Lr(function(s,o){r[s]=e(r,o,s)}),r;var n=new Proxy(r,{get:function(s,o){if(s=et[o])return e(n,s,o)}});return n}function ri(t,e){function r(a){n=!0,s=a}for(var n=!1,s=null,o=0;o<t.length;o++)if(e(t[o],r,o),n)return s}function hn(t){var e,r=[];return function n(s){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var l=et[s];r.push(function(b){return cs.apply(void 0,Nt([l.apply(void 0,Nt([b],o,!1)),s,b],o,!1))});var d={run:function(b){return ti(ri(r,function(A,_){var S,v=Br.run({value:b},function(){return A(b)});v.pass||_(zt(!!v.pass,(S=sr(e,b,v.message))!==null&&S!==void 0?S:v.message))}),zt(!0))},test:function(b){return d.run(b).pass},message:function(b){return b&&(e=b),d}};return $r()?d=new Proxy(d,{get:function(b,A){return et[A]?n(A):b[A]}}):(Lr(function(b){d[b]=n(b)}),d)}}(t)}var hr=function(){function t(){if(!$r())return Lr(function(r){e[r]=hn(r)}),Pt(cn,e)}var e={context:function(){return Br.useX()},extend:function(r){Pt(et,r),t()}};return t(),new Proxy(Pt(cn,e),{get:function(r,n){return n in r?r[n]:et[n]?hn(n):void 0}})}(),fn,hs=(fn=0,function(){return"".concat(fn++)});function or(t){return String(t)===t}function qr(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(void 0,e)}}var Xe=Object.assign;function Yt(t){var e=Number(t);return!(isNaN(parseFloat(String(t)))||isNaN(Number(t))||!isFinite(e))}function Er(t,e){return Yt(t)&&Yt(e)&&Number(t)===Number(e)}function Rt(t,e){return Yt(t)&&Yt(e)&&Number(t)>Number(e)}function ir(t){function e(s,o){var a=e.get(s);return a?a[1]:(o=o(),n.unshift([s.concat(),o]),Rt(n.length,t)&&(n.length=t),o)}function r(s){return n.findIndex(function(o){var a=o[0];return Er(s.length,a.length)&&s.every(function(l,d){return l===a[d]})})}t===void 0&&(t=1);var n=[];return e.invalidate=function(s){-1<(s=r(s))&&n.splice(s,1)},e.get=function(s){return n[r(s)]||null},e}var ni=qr(function(t){return t===null});function Be(t){return typeof t=="function"}function ht(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return Be(t)?t.apply(void 0,e):t}function fs(t,e){var r;return(r=ht(t))!==null&&r!==void 0?r:e}function Vr(t){return(t=[].concat(t))[t.length-1]}function Pr(t,e){for(var r=[],n=0;n<t.length;n++){var s=t[n];Array.isArray(s)?r.push(Pr(s,e)):(s=e(s),ni(s)&&r.push(s))}return r}function ds(t){return[].concat(t).reduce(function(e,r){return Array.isArray(r)?e.concat(ds(r)):[].concat(e).concat(r)},[])}function Kt(t,e){var r=0;for(e=e.slice(0,-1);r<e.length;r++){var n=e[r];t[n]=fs(t[n],[]),t=t[n]}return t}var ft,Le=ft||(ft={});Le[Le.DEFAULT=0]="DEFAULT",Le[Le.SUITE=1]="SUITE",Le[Le.EACH=2]="EACH",Le[Le.SKIP_WHEN=3]="SKIP_WHEN",Le[Le.OMIT_WHEN=4]="OMIT_WHEN",Le[Le.GROUP=5]="GROUP";var Xt,Ft=Xt||(Xt={});function si(){var t=0;return{current:function(){return t},next:function(){t++}}}function ps(t,e){return e===void 0&&(e=[]),{cursor:si(),keys:{current:{},prev:{}},path:e,type:t}}Ft[Ft.ALL=0]="ALL",Ft[Ft.EAGER=1]="EAGER";var pe=Xn(function(t,e){return e?null:Xe({},{exclusion:{tests:{},groups:{}},inclusion:{},isolate:ps(ft.DEFAULT),mode:[Xt.ALL]},t)});function Ce(){return pe.useX().stateRef}function ms(t){return Ce().optionalFields()[0][t]}function oi(t,e){(0,Ce().optionalFields()[1])(function(r){var n;return Xe(r,((n={})[t]=ht(e,r[t]),n))})}function Gr(t){var e;return(e=ms(t))===null||e===void 0?void 0:e[0]}function Tr(){dt(function(t){return t})}function dt(t){(0,Ce().testObjects()[1])(function(e){return{prev:e.prev,current:[].concat(t(e.current))}})}function Wr(){return $e().filter(function(t){return t.isPending()})}var ii=ir();function $e(){var t=Ce().testObjects()[0].current;return ii([t],function(){return ds(t)})}var At,dn=At||(At={});dn.Error="error",dn.Warning="warning";var gs=function(){function t(e,r,n){var s=n===void 0?{}:n;n=s.message;var o=s.groupName;s=s.key,this.key=null,this.id=hs(),this.severity=At.Error,this.status=fr,this.fieldName=e,this.testFn=r,o&&(this.groupName=o),n&&(this.message=n),s&&(this.key=s)}return t.prototype.run=function(){try{var e=this.testFn()}catch(r){e=r,this.message===void 0&&or(e)&&(this.message=r),e=!1}return e===!1&&this.fail(),e},t.prototype.setStatus=function(e){this.isFinalStatus()&&e!==dr||(this.status=e)},t.prototype.warns=function(){return this.severity===At.Warning},t.prototype.setPending=function(){this.setStatus(vn)},t.prototype.fail=function(){this.setStatus(this.warns()?gn:mn)},t.prototype.done=function(){this.isFinalStatus()||this.setStatus(yn)},t.prototype.warn=function(){this.severity=At.Warning},t.prototype.isFinalStatus=function(){return this.hasFailures()||this.isCanceled()||this.isPassing()},t.prototype.skip=function(e){this.isPending()&&!e||this.setStatus(pn)},t.prototype.cancel=function(){this.setStatus(_n),Tr()},t.prototype.reset=function(){this.status=fr,Tr()},t.prototype.omit=function(){this.setStatus(dr)},t.prototype.valueOf=function(){return!this.isFailing()},t.prototype.hasFailures=function(){return this.isFailing()||this.isWarning()},t.prototype.isNonActionable=function(){return this.isSkipped()||this.isOmitted()||this.isCanceled()},t.prototype.isPending=function(){return this.statusEquals(vn)},t.prototype.isTested=function(){return this.hasFailures()||this.isPassing()},t.prototype.isOmitted=function(){return this.statusEquals(dr)},t.prototype.isUntested=function(){return this.statusEquals(fr)},t.prototype.isFailing=function(){return this.statusEquals(mn)},t.prototype.isCanceled=function(){return this.statusEquals(_n)},t.prototype.isSkipped=function(){return this.statusEquals(pn)},t.prototype.isPassing=function(){return this.statusEquals(yn)},t.prototype.isWarning=function(){return this.statusEquals(gn)},t.prototype.statusEquals=function(e){return this.status===e},t}(),fr="UNTESTED",pn="SKIPPED",mn="FAILED",gn="WARNING",yn="PASSING",vn="PENDING",_n="CANCELED",dr="OMITTED";function pt(t,e){if(!t)throw e instanceof String?e.valueOf():Error(e&&ht(e))}function ai(t){function e(o,a,l){return n.references.push(),r(o,ht(a,l)),function(){return[n.references[o],function(d){return r(o,ht(d,n.references[o]))}]}}function r(o,a){var l=n.references[o];n.references[o]=a,Be(o=s[o][1])&&o(a,l),Be(t)&&t()}var n={references:[]},s=[];return{registerStateKey:function(o,a){var l=s.length;return s.push([o,a]),e(l,o)},reset:function(){var o=n.references;n.references=[],s.forEach(function(a,l){return e(l,a[0],o[l])})}}}function ui(t,e){var r=e.suiteId;return e=e.suiteName,{optionalFields:t.registerStateKey(function(){return{}}),suiteId:t.registerStateKey(r),suiteName:t.registerStateKey(e),testCallbacks:t.registerStateKey(function(){return{fieldCallbacks:{},doneCallbacks:[]}}),testObjects:t.registerStateKey(function(n){return{prev:n?n.current:[],current:[]}})}}function Ar(t){return t==null}function bn(t){setTimeout(function(){throw Error(t)},0)}function li(t,e){t=(t=t.type)===void 0?ft.DEFAULT:t,pt(Be(e));var r=ps(t,Qt());return t=pe.run({isolate:r},function(){return r.keys.prev=function(){var n=Ce().testObjects()[0].prev;return[].concat(Kt(n,Qt())).reduce(function(s,o){return o instanceof gs&&!Ar(o.key)&&(s[o.key]=o),s},{})}(),dt(function(n){var s=r.path;return Kt(n,s)[Vr(s)]=[],n}),e()}),Je().cursor.next(),t}function Je(){return pe.useX().isolate}function Qt(){var t=Je();return t.path.concat(t.cursor.current())}var Ue,wn=Ue||(Ue={});wn.WARNINGS="warnings",wn.ERRORS="errors";var mt,En=mt||(mt={});function Hr(t){return t===Ue.ERRORS?mt.ERROR_COUNT:mt.WARN_COUNT}function vt(t){return!t||(typeof t=="number"?t===0:Object.prototype.hasOwnProperty.call(t,"length")?Er(t.length,0):typeof t=="object"&&Er((t=Object.keys(t)).length,0))}En.ERROR_COUNT="errorCount",En.WARN_COUNT="warnCount";var ar=qr(vt);function tt(t,e){return!(!e||t.fieldName!==e)}var pr=qr(function(t,e){return t.groupName===e});function ys(t,e){return $e().some(function(r){return vs(r,t,e)})}function vs(t,e,r){return(r=!t.hasFailures()||r&&!tt(t,r))||(t=t.warns(),r=e===Ue.WARNINGS!=!!t),!r}function Pn(t){return!!_s(t)||!ys(Ue.ERRORS,t)&&!vt($e())&&!function(e){return ar(Wr().filter(function(r){return bs(r,e)}))}(t)&&function(e){return $e().every(function(r){return!(!e||tt(r,e))||ws(r,e)})}(t)}function _s(t){return!!t&&((e=ms(t))===null||e===void 0?void 0:e[1])===!0;var e}function bs(t,e){return!(e&&!tt(t,e))&&Gr(t.fieldName)!==!0}function ws(t,e){return!(!e||tt(t,e))||Gr(t.fieldName)===!0||t.isTested()||t.isOmitted()}function _t(){var t=pe.useX().summary;return pt(t),t}function ci(){var t=$e(),e=Xe({errorCount:0,warnCount:0,testCount:0},{groups:{},tests:{},valid:!1});return t.reduce(function(r,n){var s=r.tests;s[n.fieldName]=Tn(s,n),s[n.fieldName].valid=s[n.fieldName].valid!==!1&&Pn(n.fieldName);var o=r.groups,a=n.groupName;return a&&(o[a]=o[a]||{},o[a][n.fieldName]=Tn(o[a],n),s=o[a][n.fieldName],o[a][n.fieldName].valid===!1?n=!1:n=!!_s(n=n.fieldName)||!function(l,d,b){return $e().some(function(A){return!pr(A,d)&&vs(A,l,b)})}(Ue.ERRORS,a,n)&&!function(l,d){return ar(Wr().filter(function(b){return!pr(b,l)&&bs(b,d)}))}(a,n)&&function(l,d){return $e().every(function(b){return!!pr(b,l)||ws(b,d)})}(a,n),s.valid=n),r},e),e.valid=Pn(),function(r){for(var n in r.tests)r.errorCount+=r.tests[n].errorCount,r.warnCount+=r.tests[n].warnCount,r.testCount+=r.tests[n].testCount;return r}(e)}function Tn(t,e){function r(a){var l=Hr(a);o[l]++,s&&(o[a]=(o[a]||[]).concat(s))}var n=e.fieldName,s=e.message;t[n]=t[n]||Xe({errorCount:0,warnCount:0,testCount:0},{errors:[],warnings:[]});var o=t[n];return e.isNonActionable()||(t[n].testCount++,e.isFailing()?r(Ue.ERRORS):e.isWarning()&&r(Ue.WARNINGS)),o}function Es(t,e,r){var n;return((n=t==null?void 0:t[r])===null||n===void 0?void 0:n[e])||[]}function Ps(t,e){var r,n={},s=Hr(e);for(r in t)Rt(t[r][s],0)&&(n[r]=t[r][e]||[]);return n}function hi(t){return Ts(Ue.ERRORS,t)}function fi(t){return Ts(Ue.WARNINGS,t)}function Ts(t,e){var r=_t().tests;return e?Es(r,t,e):Ps(r,t)}function di(t,e){return As(t,Ue.ERRORS,e)}function pi(t,e){return As(t,Ue.WARNINGS,e)}function As(t,e,r){return t=_t().groups[t],r?Es(t,e,r):Ps(t,e)}function mi(t){return Ss(mt.ERROR_COUNT,t)}function gi(t){return Ss(mt.WARN_COUNT,t)}function Ss(t,e){var r,n=_t();return Rt(e?(r=n.tests[e])===null||r===void 0?void 0:r[t]:n[t],0)}function yi(t,e){return ks(Ue.ERRORS,t,e)}function vi(t,e){return ks(Ue.WARNINGS,t,e)}function ks(t,e,r){var n,s,o=_t();if(t=Hr(t),!(e=o.groups[e]))return!1;if(r)return Rt((n=e[r])===null||n===void 0?void 0:n[t],0);for(var a in e)if(Rt((s=e[a])===null||s===void 0?void 0:s[t],0))return!0;return!1}function _i(t){var e=_t();return t?!!Sr(e.tests,t):e.valid}function bi(t,e){if(!(t=_t().groups[t]))return!1;if(e)return Sr(t,e);for(var r in t)if(!Sr(t,r))return!1;return!0}function Sr(t,e){var r;return!((r=t[e])===null||r===void 0||!r.valid)}var wi=ir(1);function Jr(){var t=$e(),e={stateRef:Ce()};return wi([t],pe.bind(e,function(){var r=ci(),n=Ce().suiteName()[0],s={summary:r};return Xe(r,{getErrors:pe.bind(s,hi),getErrorsByGroup:pe.bind(s,di),getWarnings:pe.bind(s,fi),getWarningsByGroup:pe.bind(s,pi),hasErrors:pe.bind(s,mi),hasErrorsByGroup:pe.bind(s,yi),hasWarnings:pe.bind(s,gi),hasWarningsByGroup:pe.bind(s,vi),isValid:pe.bind(s,_i),isValidByGroup:pe.bind(s,bi),suiteName:n})}))}function Zt(t){var e=Wr();return!vt(e)&&(t?e.some(function(r){return tt(r,t)}):ar(e))}var Ei=ir(20);function Ns(){var t=$e(),e={stateRef:Ce()};return Ei([t],pe.bind(e,function(){return Xe({},Jr(),{done:pe.bind(e,Ai)})}))}function Pi(t,e,r){return!(Be(t)&&(!e||r.tests[e]&&!vt(r.tests[e].testCount)))}function Ti(t){return!(Zt()&&(!t||Zt(t)))}function Ai(){function t(){return n(Jr())}for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=(e=e.reverse())[0];return e=e[1],r=Ns(),Pi(n,e,r)?r:Ti(e)?(t(),r):(Si(t,e),r)}function Si(t,e){(0,Ce().testCallbacks()[1])(function(r){return e?r.fieldCallbacks[e]=(r.fieldCallbacks[e]||[]).concat(t):r.doneCallbacks.push(t),r})}function An(t){return t.forEach(function(e){return e()})}function ki(){var t=function(){var e={};return{emit:function(r,n){(e[r]||[]).forEach(function(s){s(n)})},on:function(r,n){return e[r]=(e[r]||[]).concat(n),{off:function(){e[r]=(e[r]||[]).filter(function(s){return s!==n})}}}}}();return t.on(Fe.TEST_COMPLETED,function(e){if(!e.isCanceled()){e.done(),e=e.fieldName;var r=Ce().testCallbacks()[0].fieldCallbacks;e&&!Zt(e)&&Array.isArray(r[e])&&An(r[e]),Zt()||t.emit(Fe.ALL_RUNNING_TESTS_FINISHED)}}),t.on(Fe.SUITE_CALLBACK_DONE_RUNNING,function(){(function(){function e(n){r[n.fieldName]&&(n.omit(),oi(n.fieldName,function(s){return[s[0],!0]}))}if(!vt(Ce().optionalFields()[0])){var r={};dt(function(n){return Pr(n,function(s){if(Object.prototype.hasOwnProperty.call(r,s.fieldName))e(s);else{var o=Gr(s.fieldName);Be(o)&&(r[s.fieldName]=o(),e(s))}return s})})}})()}),t.on(Fe.ALL_RUNNING_TESTS_FINISHED,function(){An(Ce().testCallbacks()[0].doneCallbacks)}),t.on(Fe.REMOVE_FIELD,function(e){$e().forEach(function(r){tt(r,e)&&(r.cancel(),function(n){dt(function(s){return Pr(s,function(o){return n!==o?o:null})})}(r))})}),t.on(Fe.RESET_FIELD,function(e){$e().forEach(function(r){tt(r,e)&&r.reset()})}),t}function Rs(){var t=pe.useX();return pt(t.bus),t.bus}var Fe,bt=Fe||(Fe={});function Is(t){return Os(0,"tests",t)}function Os(t,e,r){var n=pe.useX("hook called outside of a running suite.");r&&[].concat(r).forEach(function(s){or(s)&&(n.exclusion[e][s]=t===0)})}function Sn(t){for(var e in t)if(t[e]===!0)return!0;return!1}function kn(){var t,e=pe.useX().exclusion;for(t in e.groups)if(e.groups[t])return!0;return!1}function Ni(t,e,r){if(r||arguments.length===2)for(var n,s=0,o=e.length;s<o;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))}function Nn(t){var e=t.asyncTest,r=t.message;if(e&&Be(e.then)){var n=Rs().emit,s=Ce(),o=pe.bind({stateRef:s},function(){Tr(),n(Fe.TEST_COMPLETED,t)});s=pe.bind({stateRef:s},function(a){t.isCanceled()||(t.message=or(a)?a:r,t.fail(),o())});try{e.then(o,s)}catch{s()}}}function Rn(t){var e=Ce().testObjects()[0].prev;if(vt(e))return qt(t),t;var r=Qt();if(e=Kt(e,r)[Vr(r)],!Ar(t.key)){e=t.key,(r=Je().keys.prev[e])&&(t=r),r=t;var n=Je().keys.current;return Ar(n[e])?n[e]=r:bn('Encountered the same test key "'.concat(e,`" twice. This may lead to tests overriding each other's results, or to tests being unexpectedly omitted.`)),qt(t),t}return!ar(r=e)||r.fieldName===t.fieldName&&r.groupName===t.groupName||(Je().type===ft.EACH||bn(`Vest Critical Error: Tests called in different order than previous run.
    expected: `.concat(e.fieldName,`
    received: `).concat(t.fieldName,`
    This can happen on one of two reasons:
    1. You're using if/else statements to conditionally select tests. Instead, use "skipWhen".
    2. You are iterating over a list of tests, and their order changed. Use "each" and a custom key prop so that Vest retains their state.`)),function(){var s=Je().cursor.current();dt(function(o){return o.splice(s),o})}(),e=null),qt(t=fs(e,t)),t}function qt(t){var e=Qt();dt(function(r){return Kt(r,e)[Vr(e)]=t,r})}function xs(t){var e=Je().cursor,r=Xt.EAGER;if(r=!(pe.useX().mode[0]!==r||!ys(Ue.ERRORS,t.fieldName)))return t.skip(),Rn(t),e.next(),t;if(r=Rn(t),pe.useX().omitted)return r.omit(),e.next(),r;if(function(s){var o=s.fieldName;if(s=s.groupName,pe.useX().skipped)return!0;var a=pe.useX(),l=a.exclusion;a=a.inclusion;var d=l.tests,b=d[o];if(b===!1)return!0;if(b=b===!0,s){var A=pe.useX().exclusion.groups;if(A=Object.prototype.hasOwnProperty.call(A,s)?A[s]===!1:kn())return!0;if(l.groups[s]===!0)return!(b||!Sn(d)&&d[o]!==!1)}return(s=!!kn()&&!s)||!b&&!!Sn(d)&&!ht(a[o])}(t))return r.skip(!!pe.useX().skipped),e.next(),r;if(t!==r&&r.fieldName===t.fieldName&&r.groupName===t.groupName&&r.isPending()&&r.cancel(),qt(t),t.isUntested()){r=Rs();var n=function(s){return pe.run({currentTest:s},function(){return s.run()})}(t);try{n&&Be(n.then)?(t.asyncTest=n,t.setPending(),Nn(t)):r.emit(Fe.TEST_COMPLETED,t)}catch(s){throw Error(`Unexpected error encountered during test registration.
      Test Object: `.concat(JSON.stringify(t),`.
      Error: `).concat(s,"."))}}else(r=t.asyncTest)&&Be(r.then)&&(t.setPending(),Nn(t));return e.next(),t}function In(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Be(e[1])?e:Ni([void 0],e,!0);e=n[0],r=n[1],n=n[2],pt(or(t),On("fieldName","string")),pt(Be(r),On("Test callback","function"));var s=pe.useX();return xs(e=new gs(t,r,{message:e,groupName:s.groupName,key:n}))}bt.TEST_COMPLETED="test_completed",bt.ALL_RUNNING_TESTS_FINISHED="all_running_tests_finished",bt.REMOVE_FIELD="remove_field",bt.RESET_FIELD="reset_field",bt.SUITE_CALLBACK_DONE_RUNNING="suite_callback_done_running",Is.group=function(t){return Os(0,"groups",t)};var mr=Xe(In,{memo:function(t){var e=ir(10);return function(r){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];s=Je().cursor.current();var o=(n=n.reverse())[0],a=n[1],l=n[2];return s=[Ce().suiteId()[0],r,s].concat(o),(n=e.get(s))===null?e(s,function(){return t(r,l,a)}):n[1].isCanceled()?(e.invalidate(s),e(s,function(){return t(r,l,a)})):xs(n[1])}}(In)});function On(t,e){return"Incompatible params passed to test function. ".concat(t," must be a ").concat(e)}function Ri(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(t=t.reverse())[0];t=t[1],pt(Be(r),"vest.create: Expected callback to be a function.");var n=ki(),s=ai();return t={stateRef:ui(s,{suiteId:hs(),suiteName:t}),bus:n},Xe(pe.bind(t,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return s.reset(),li({type:ft.SUITE},function(){r.apply(void 0,o)}),n.emit(Fe.SUITE_CALLBACK_DONE_RUNNING),Ns()}),{get:pe.bind(t,Jr),remove:pe.bind(t,function(o){n.emit(Fe.REMOVE_FIELD,o)}),reset:s.reset,resetField:pe.bind(t,function(o){n.emit(Fe.RESET_FIELD,o)})})}const zr={},Vt={};class ur{constructor(e,r){if(e!==zr)throw new TypeError("Options can only be created with the some or none functions");this._value=r}static some(e){return xe(e)}static none(){return Oe()}static from(e){return e!=null?xe(e):Oe()}static fromJSON(e){return ur.from(e)}isNone(){return this._value===Vt}isSome(){return!this.isNone()}expect(e){if(this.isSome())return this._value;throw new Error(typeof e=="function"?e():e)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(e){return this.isSome()?this._value:e}unwrapOrElse(e){return this.isSome()?this._value:e()}map(e){return this.isSome()?xe(e(this._value)):Oe()}mapOr(e,r){return this.isSome()?xe(e(this._value)):xe(r)}mapOrElse(e,r){return this.isSome()?xe(e(this._value)):xe(r())}flatMap(e){return this.isSome()?e(this._value):Oe()}flatMapOr(e,r){return this.isSome()?e(this._value):r}flatMapOrElse(e,r){return this.isSome()?e(this._value):r()}and(e){return this.isSome()?e:Oe()}andThen(e){return this.isSome()?e(this._value):Oe()}or(e){return this.isNone()?e:this}orElse(e){return this.isNone()?e():this}xor(e){const r=this.isSome(),n=e.isSome();return r&&!n?this:!r&&n?e:Oe()}filter(e){return this.isSome()&&e(this._value)?this:Oe()}getOrInsert(e){return this.isNone()&&(this._value=e),this}getOrInsertWith(e){return this.isNone()&&(this._value=e()),this}clear(){return this._value=Vt,this}take(){if(this.isSome()){const e=this._value;return this._value=Vt,xe(e)}else return Oe()}from(e){return e!=null?this._value=e:this.clear(),this}replace(e){return this._value=e,this}ifSome(e,r){return this.isSome()?e(this._value):r&&r(),this}ifNone(e,r){return this.isNone()?e():r&&r(this._value),this}toJSON(){return this.unwrapOr(null)}toJS(){return this.unwrapOr(null)}}const xe=t=>new ur(zr,t),Oe=()=>new ur(zr,Vt);class me{constructor(e){this._index=0,this._iter=e}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const e=this._iter.next();return e.done?e:{value:[e.value,this._index++]}}enumerate(){throw new Error("iter/Enumerate was not imported!")}peekable(){throw new Error("iter/Peekable was not imported!")}forEach(e){throw new Error("iter/ForEach was not imported!")}map(e){throw new Error("iter/Map was not imported!")}merge(e){throw new Error("iter/Merge was not imported!")}concat(e){return this.merge(e)}filter(e){throw new Error("iter/Filter was not imported!")}step(e){throw new Error("iter/Step was not imported!")}skip(e){throw new Error("iter/Skip was not imported!")}take(e){throw new Error("iter/Take was not imported!")}toMap(e,r){throw new Error("iter/ToMap was not imported!")}count(){return this.reduce(0,e=>e+1)}consume(){let e=this.next();for(;!e.done;)e=this.next();return this}toArray(){return this.reduce([],(e,r)=>(e.push(r),e))}join(e){return this.toArray().join(e)}indexOf(e){let r=this.next(),n=0;for(;!r.done;){if(r.value===e)return n;n++,r=this.next()}return-1}findIndex(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(e(n,s))return s;r=this.nextWithIndex()}return-1}find(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(e(n,s))return xe(n);r=this.nextWithIndex()}return Oe()}findAll(e){return this.filter(e)}nth(e=0){let r=this.next();for(e<0&&(e=0);!r.done;){if(e--<=0)return xe(r.value);r=this.next()}return Oe()}first(){return this.nth(0)}last(){let e=this.next();for(;!e.done;){const r=this.next();if(r.done)return xe(e.value);e=r}return Oe()}any(e){return this.findIndex(e)!==-1}some(e){return this.any(e)}none(e){return this.findIndex(e)===-1}all(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(!e(n,s))return!1;r=this.nextWithIndex()}return!0}unflatten(e){throw new Error("iter/Unflatten was not imported!")}reduce(e,r){let n=this.next();for(;!n.done;){const s=n.value;e=r(e,s,this._index-1),n=this.next()}return e}reverse(){return Gt(this.toArray().reverse())}}function Gt(t){return t!=null?typeof t[Symbol.iterator]=="function"?new me(t[Symbol.iterator]()):typeof t.next=="function"?t instanceof me?t:new me(t):Gt(typeof t=="object"?Object.entries(t):[t]):Gt([])}class Ii extends me{constructor(e){super(e)}next(){const e=super.nextWithIndex();return e.done?e:{value:Oi(e.value)}}}me.prototype.enumerate=function(){return new Ii(this)};function Oi(t){const e=t[0],r=t;return r[0]=t[1],r[1]=e,r}class xi extends me{constructor(e,r){super(e),this._fn=r}next(){let e=super.nextWithIndex();for(;!e.done;){const[r,n]=e.value;if(this._fn(r,n))return{done:!1,value:r};e=super.nextWithIndex()}return{done:!0,value:void 0}}}me.prototype.filter=function(e){return new xi(this,e)};class Ci extends me{constructor(e,r){super(e),this._fn=([n,s])=>(r(n,s),n)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}me.prototype.forEach=function(e){return new Ci(this,e)};class Mi extends me{constructor(e,r){super(e),this._fn=([n,s])=>r(n,s)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}me.prototype.map=function(e){return new Mi(this,e)};class Ui extends me{constructor(e,r){super(e),this._other=r}next(){const e=super.next();return e.done?this._other.next():e}}me.prototype.merge=function(e){return new Ui(this,e)};class Di extends me{constructor(){super(...arguments),this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?xe(this.peeked.shift()):Oe()}peek(e=0){if(e<this.peeked.length)return xe(this.peeked[e]);{let r=this.peeked.length-e-1,n=super.next();for(;!n.done&&(this.peeked.push(n.value),!(--r<=0));)n=super.next();return n.done?Oe():xe(n.value)}}next(){const e=this.unpeek();if(e.isSome())return{done:!1,value:e.unwrap()};const r=super.next();return r.done?r:{done:!1,value:r.value}}}me.prototype.peekable=function(){return new Di(this)};class ji extends me{constructor(e,r){super(e),this._skipped=0,this._skip=(r<=0?0:r)|0}next(){let e=super.next();for(;!e.done;)if(this._skipped<=this._skip)this._skipped+=1,e=super.next();else return e;return{done:!0,value:void 0}}}me.prototype.skip=function(t){return new ji(this,t)};class Fi extends me{constructor(e,r){super(e),this._stepped=0,this._step=r<=0?1:r|0}next(){let e=super.next();for(;!e.done;)if(this._stepped<this._step)this._stepped+=1,e=super.next();else return this._stepped=0,e;return{done:!0,value:void 0}}}me.prototype.step=function(t){return new Fi(this,t)};class Li extends me{constructor(e,r){super(e),this._taken=0,this._count=(r<=0?0:r)|0}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}me.prototype.take=function(e){return new Li(this,e)};const Bi=t=>t,$i=t=>t;class qi extends me{constructor(e,r=Bi,n=$i){super(e),this._map=([s,o])=>[r(s,o),n(s,o)]}toObject(){return this.reduce({},(e,r)=>(e[r[0]]=r[1],e))}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._map(e.value)}}}me.prototype.toMap=function(e,r){return new qi(this,e,r)};class Vi extends me{constructor(e,r){super(e),this._fn=r}next(){return this._fn(this._iter)}}me.prototype.unflatten=function(e){return new Vi(this,e)};var at;(function(t){t[t.Forward=0]="Forward",t[t.Backward=1]="Backward"})(at||(at={}));class Yr{constructor(e,r,n=1){this.start=e!==e?0:e,this.end=r!==r?this.start-1:r,this.step=n!==n?1:Math.abs(n),this.direction=e>r?at.Backward:at.Forward}static from(e,r,n=1){return new Yr(e,r,n)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(e){return this.start<=e&&e<=this.end}isEmpty(){return this.direction===at.Forward?this.start>this.end:this.start<this.end}iter(){return new me(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===at.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}const Gi=Yr.from;function Cs(t,e){return t[0]=(e&4278190080)>>24,t[1]=(e&16711680)>>16,t[2]=(e&65280)>>8,t[3]=e&255,t}const ze=Math.pow(2,31)-1|0;class Wi extends me{constructor(e){super(e),this.rng=e}iter(){return new me(this)}next(){return{done:!1,value:this.rng.nextFloat()}}}class Hi extends me{constructor(e,r=0,n=1){super(e),this.rng=e,this.min=r,this.max=n}iter(){return new me(this)}nextFloat(){return this.rng.nextFloatInRange(this.min,this.max)}next(){return{done:!1,value:this.nextFloat()}}}class Ji extends me{constructor(e,r=0,n=ze){super(e),this.rng=e,this.min=r|0,this.max=n|0}iter(){return new me(this)}nextInt(){return this.rng.nextIntInRange(this.min,this.max)}next(){return{done:!1,value:this.nextInt()}}}const zi=new Uint8Array(4);class Kr{nextFloat(){return this.nextInt()/ze}nextFloatInRange(e=0,r=1){return e+this.nextFloat()*(r-e)}nextIntInRange(e=0,r=ze){return Math.round(this.nextFloatInRange(e,r))}shuffle(e){const r=e.length;for(let n=0;n<r;n++){const s=n+this.nextIntInRange(0,r-n-1),o=e[n];e[n]=e[s],e[s]=o}return e}fromArray(e){return e.length?xe(e[this.nextIntInRange(0,e.length-1)]):Oe()}keyFromObject(e){return this.fromArray(Object.keys(e))}valueFromObject(e){return this.fromArray(Object.values(e))}fillBytes(e){const r=zi;for(let n=0,s=e.length;n<s;n++){const o=n%4;o===0&&Cs(r,this.nextInt()),e[n]=r[o]}return e}[Symbol.iterator](){return this}iter(){return new me(this)}next(){return{done:!1,value:this.nextInt()}}float(){return new Wi(this)}uniformFloat(e=0,r=1){return new Hi(this,e,r)}uniformInt(e=0,r=ze){return new Ji(this,e,r)}}let Wt,kr;if(typeof crypto!="undefined"&&crypto.getRandomValues){const t=new Uint32Array(1);Wt=()=>crypto.getRandomValues(t)[0]%ze,kr=e=>crypto.getRandomValues(Array.isArray(e)?new Uint8Array(e):e)}else{const t=new Uint8Array(4);Wt=()=>Math.random()*ze|0,kr=e=>{const r=t;for(let n=0,s=e.length;n<s;n++){const o=n%4;o===0&&Cs(r,Wt()),e[n]=r[o]}return e}}class Yi extends Kr{nextInt(){return Wt()}fillBytes(e){return kr(e)}}class Ms extends Kr{constructor(e=423257940){super(),this.seed=e}setSeed(e=423257940){return this.seed=e,this}nextInt(){return this.seed=Math.imul(48271,this.seed)|0%ze,this.seed&ze}}const Ki=new Ms;class Xr extends Kr{constructor(e,r,n,s){super(),this.x=423257940,this.y=2829571177,this.z=2541948421,this.w=289122235,this.set(e,r,n,s)}static fromSeed(e){return new Xr().setSeed(e)}setSeed(e){const r=Ki.setSeed(e);return this.set(r.nextInt(),r.nextInt(),r.nextInt(),r.nextInt())}set(e=423257940,r=2829571177,n=2541948421,s=289122235){return this.x=e|0,this.y=r|0,this.z=n|0,this.w=s|0,this}nextInt(){const e=this.x,r=e^e<<11;this.x=this.y,this.y=this.z,this.z=this.w;const n=this.w;return this.w=n^n>>19^(r^r>>8),this.w}}new Ms;new Xr;const Lt={length:16,includeSymbols:!0,excludeSimilarCharacters:!1,excludeAmbiguousCharacters:!1};function Xi(t={}){const e=Math.max(6,t.length||Lt.length),r=t.includeSymbols!=null?t.includeSymbols:Lt.includeSymbols,n=t.excludeSimilarCharacters!=null?t.excludeSimilarCharacters:Lt.excludeSimilarCharacters,s=t.excludeAmbiguousCharacters!=null?t.excludeAmbiguousCharacters:Lt.excludeAmbiguousCharacters,o=new Yi;return Gi(0,e).iter().map(()=>Nr(o,r,n,s)).join("")}const Qi="il1Lo0O".split(""),Zi="{}[]()/\\'\"`~,;:.<>".split("");function Nr(t,e,r,n){let s=e&&t.nextFloat()>.75?ta(t):na(t);return r&&Qi.includes(s)&&(s=Nr(t,e,r,n)),n&&Zi.includes(s)&&(s=Nr(t,e,r,n)),s}const ea="`~!@#$%^&*()-_+={}[]|:;<>,.\\/?".split("").sort(()=>Math.random()>.5?-1:1);function ta(t){return t.fromArray(ea).unwrap()}const ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("").sort(()=>Math.random()>.5?-1:1);function na(t){return t.fromArray(ra).unwrap()}function sa(t){let e;return{c(){e=Qe("path"),this.h()},l(r){e=Ze(r,"path",{d:!0}),ee(e).forEach(G),this.h()},h(){J(e,"d","M256 105c-101.8 0-188.4 62.4-224 151 35.6 88.6 122.2 151 224 151s188.4-62.4 224-151c-35.6-88.6-122.2-151-224-151zm0 251.7c-56 0-101.8-45.3-101.8-100.7S200 155.3 256 155.3 357.8 200.6 357.8 256 312 356.7 256 356.7zm0-161.1c-33.6 0-61.1 27.2-61.1 60.4s27.5 60.4 61.1 60.4 61.1-27.2 61.1-60.4-27.5-60.4-61.1-60.4z")},m(r,n){ne(r,e,n)},p:ke,d(r){r&&G(e)}}}function oa(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[sa]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)s=Me(s,n[o]);return e=new xt({props:s}),{c(){ye(e.$$.fragment)},l(o){ve(e.$$.fragment,o)},m(o,a){_e(e,o,a),r=!0},p(o,[a]){const l=a&1?It(n,[n[0],Ot(o[0])]):{};a&2&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){r||(ae(e.$$.fragment,o),r=!0)},o(o){ue(e.$$.fragment,o),r=!1},d(o){be(e,o)}}}function ia(t,e,r){return t.$$set=n=>{r(0,e=Me(Me({},e),Ve(n)))},e=Ve(e),[e]}class aa extends Ne{constructor(e){super(),Re(this,e,ia,oa,Ye,{})}}function ua(t){let e;return{c(){e=Qe("path"),this.h()},l(r){e=Ze(r,"path",{d:!0}),ee(e).forEach(G),this.h()},h(){J(e,"d","M256.1 144.8c56.2 0 101.9 45.3 101.9 101.1 0 13.1-2.6 25.5-7.3 37l59.5 59c30.8-25.5 55-58.4 69.9-96-35.3-88.7-122.3-151.6-224.2-151.6-28.5 0-55.8 5.1-81.1 14.1l44 43.7c11.6-4.6 24.1-7.3 37.3-7.3zM52.4 89.7l46.5 46.1 9.4 9.3c-33.9 26-60.4 60.8-76.3 100.8 35.2 88.7 122.2 151.6 224.1 151.6 31.6 0 61.7-6.1 89.2-17l8.6 8.5 59.7 59 25.9-25.7L78.2 64 52.4 89.7zM165 201.4l31.6 31.3c-1 4.2-1.6 8.7-1.6 13.1 0 33.5 27.3 60.6 61.1 60.6 4.5 0 9-.6 13.2-1.6l31.6 31.3c-13.6 6.7-28.7 10.7-44.8 10.7-56.2 0-101.9-45.3-101.9-101.1 0-15.8 4.1-30.7 10.8-44.3zm87.8-15.7l64.2 63.7.4-3.2c0-33.5-27.3-60.6-61.1-60.6l-3.5.1z")},m(r,n){ne(r,e,n)},p:ke,d(r){r&&G(e)}}}function la(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[ua]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)s=Me(s,n[o]);return e=new xt({props:s}),{c(){ye(e.$$.fragment)},l(o){ve(e.$$.fragment,o)},m(o,a){_e(e,o,a),r=!0},p(o,[a]){const l=a&1?It(n,[n[0],Ot(o[0])]):{};a&2&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){r||(ae(e.$$.fragment,o),r=!0)},o(o){ue(e.$$.fragment,o),r=!1},d(o){be(e,o)}}}function ca(t,e,r){return t.$$set=n=>{r(0,e=Me(Me({},e),Ve(n)))},e=Ve(e),[e]}class ha extends Ne{constructor(e){super(),Re(this,e,ca,la,Ye,{})}}function fa(t){let e,r,n,s,o;return{c(){e=Qe("path"),r=ce(),n=Qe("path"),s=ce(),o=Qe("path"),this.h()},l(a){e=Ze(a,"path",{d:!0}),ee(e).forEach(G),r=he(a),n=Ze(a,"path",{d:!0}),ee(n).forEach(G),s=he(a),o=Ze(a,"path",{d:!0}),ee(o).forEach(G),this.h()},h(){J(e,"d","M352 115h90c3.3 0 6-2.7 6-6 0-8.2-3.7-16-10-21.3l-77.1-64.2c-4.9-4.1-14.2-7.4-20.6-7.4-4.1 0-7.4 3.3-7.4 7.4V96c.1 10.5 8.6 19 19.1 19z"),J(n,"d","M307 96V16H176c-17.6 0-32 14.4-32 32v336c0 17.6 14.4 32 32 32h240c17.6 0 32-14.4 32-32V141h-96c-24.8 0-45-20.2-45-45z"),J(o,"d","M116 412V80H96c-17.6 0-32 14.4-32 32v352c0 17.6 14.4 32 32 32h256c17.6 0 32-14.4 32-32v-20H148c-17.6 0-32-14.4-32-32z")},m(a,l){ne(a,e,l),ne(a,r,l),ne(a,n,l),ne(a,s,l),ne(a,o,l)},p:ke,d(a){a&&G(e),a&&G(r),a&&G(n),a&&G(s),a&&G(o)}}}function da(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[fa]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)s=Me(s,n[o]);return e=new xt({props:s}),{c(){ye(e.$$.fragment)},l(o){ve(e.$$.fragment,o)},m(o,a){_e(e,o,a),r=!0},p(o,[a]){const l=a&1?It(n,[n[0],Ot(o[0])]):{};a&2&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){r||(ae(e.$$.fragment,o),r=!0)},o(o){ue(e.$$.fragment,o),r=!1},d(o){be(e,o)}}}function pa(t,e,r){return t.$$set=n=>{r(0,e=Me(Me({},e),Ve(n)))},e=Ve(e),[e]}class ma extends Ne{constructor(e){super(),Re(this,e,pa,da,Ye,{})}}function ga(t){let e,r,n;return{c(){e=Q("input"),this.h()},l(s){e=Z(s,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){J(e,"id",t[2]),J(e,"name",t[3]),J(e,"class","input flex-1"),J(e,"type","password"),J(e,"placeholder","Password")},m(s,o){ne(s,e,o),De(e,t[0]),r||(n=[we(e,"input",t[10]),we(e,"input",function(){er(t[4])&&t[4].apply(this,arguments)})],r=!0)},p(s,o){t=s,o&4&&J(e,"id",t[2]),o&8&&J(e,"name",t[3]),o&1&&e.value!==t[0]&&De(e,t[0])},d(s){s&&G(e),r=!1,gt(n)}}}function ya(t){let e,r,n;return{c(){e=Q("input"),this.h()},l(s){e=Z(s,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){J(e,"id",t[2]),J(e,"name",t[3]),J(e,"class","input flex-1"),J(e,"type","text"),J(e,"placeholder","Password")},m(s,o){ne(s,e,o),De(e,t[0]),r||(n=[we(e,"input",t[9]),we(e,"input",function(){er(t[4])&&t[4].apply(this,arguments)})],r=!0)},p(s,o){t=s,o&4&&J(e,"id",t[2]),o&8&&J(e,"name",t[3]),o&1&&e.value!==t[0]&&De(e,t[0])},d(s){s&&G(e),r=!1,gt(n)}}}function va(t){let e,r;return e=new ha({}),{c(){ye(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,s){_e(e,n,s),r=!0},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){ue(e.$$.fragment,n),r=!1},d(n){be(e,n)}}}function _a(t){let e,r;return e=new aa({}),{c(){ye(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,s){_e(e,n,s),r=!0},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){ue(e.$$.fragment,n),r=!1},d(n){be(e,n)}}}function ba(t){let e,r,n,s,o,a,l,d,b,A,_,S,v,g,y,T;function P(m,c){return m[1]?ya:ga}let C=P(t),N=C(t);d=new ma({});const $=[_a,va],x=[];function i(m,c){return m[1]?0:1}return S=i(t),v=x[S]=$[S](t),{c(){e=Q("div"),r=Q("textarea"),n=ce(),N.c(),s=ce(),o=Q("div"),a=Q("button"),l=Q("div"),ye(d.$$.fragment),b=ce(),A=Q("button"),_=Q("div"),v.c(),this.h()},l(m){e=Z(m,"DIV",{class:!0});var c=ee(e);r=Z(c,"TEXTAREA",{class:!0}),ee(r).forEach(G),n=he(c),N.l(c),s=he(c),o=Z(c,"DIV",{class:!0});var k=ee(o);a=Z(k,"BUTTON",{class:!0});var E=ee(a);l=Z(E,"DIV",{class:!0});var I=ee(l);ve(d.$$.fragment,I),I.forEach(G),E.forEach(G),b=he(k),A=Z(k,"BUTTON",{class:!0});var q=ee(A);_=Z(q,"DIV",{class:!0});var V=ee(_);v.l(V),V.forEach(G),q.forEach(G),k.forEach(G),c.forEach(G),this.h()},h(){J(r,"class","absolte hidden left-0 bottom-0"),r.value=t[0],J(l,"class","w-5 h-5"),J(a,"class","btn p-2"),J(_,"class","w-5 h-5"),J(A,"class","btn p-2"),J(o,"class","grow-0 flex-row flex"),J(e,"class","flex")},m(m,c){ne(m,e,c),K(e,r),t[8](r),K(e,n),N.m(e,null),K(e,s),K(e,o),K(o,a),K(a,l),_e(d,l,null),K(o,b),K(o,A),K(A,_),x[S].m(_,null),g=!0,y||(T=[we(a,"click",t[7]),we(A,"click",t[6])],y=!0)},p(m,[c]){(!g||c&1)&&(r.value=m[0]),C===(C=P(m))&&N?N.p(m,c):(N.d(1),N=C(m),N&&(N.c(),N.m(e,s)));let k=S;S=i(m),S!==k&&(rt(),ue(x[k],1,1,()=>{x[k]=null}),nt(),v=x[S],v||(v=x[S]=$[S](m),v.c()),ae(v,1),v.m(_,null))},i(m){g||(ae(d.$$.fragment,m),ae(v),g=!0)},o(m){ue(d.$$.fragment,m),ue(v),g=!1},d(m){m&&G(e),t[8](null),N.d(),be(d),x[S].d(),y=!1,gt(T)}}}function wa(t,e,r){let{id:n=void 0}=e,{name:s=void 0}=e,{password:o}=e,{onInput:a=()=>{}}=e,{show:l=!1}=e;function d(){r(1,l=!l)}let b;async function A(){b.select(),b.setSelectionRange(0,99999),navigator.clipboard.writeText(b.value),await Wn(),b.blur()}function _(g){ut[g?"unshift":"push"](()=>{b=g,r(5,b)})}function S(){o=this.value,r(0,o)}function v(){o=this.value,r(0,o)}return t.$$set=g=>{"id"in g&&r(2,n=g.id),"name"in g&&r(3,s=g.name),"password"in g&&r(0,o=g.password),"onInput"in g&&r(4,a=g.onInput),"show"in g&&r(1,l=g.show)},[o,l,n,s,a,b,d,A,_,S,v]}class Us extends Ne{constructor(e){super(),Re(this,e,wa,ba,We,{id:2,name:3,password:0,onInput:4,show:1})}}function xn(t,e,r){const n=t.slice();return n[1]=e[r],n}function Cn(t){let e,r=t[1]+"",n;return{c(){e=Q("li"),n=Pe(r),this.h()},l(s){e=Z(s,"LI",{class:!0});var o=ee(e);n=Te(o,r),o.forEach(G),this.h()},h(){J(e,"class","text-red-500")},m(s,o){ne(s,e,o),K(e,n)},p(s,o){o&1&&r!==(r=s[1]+"")&&lt(n,r)},d(s){s&&G(e)}}}function Ea(t){let e,r=t[0],n=[];for(let s=0;s<r.length;s+=1)n[s]=Cn(xn(t,r,s));return{c(){e=Q("ul");for(let s=0;s<n.length;s+=1)n[s].c()},l(s){e=Z(s,"UL",{});var o=ee(e);for(let a=0;a<n.length;a+=1)n[a].l(o);o.forEach(G)},m(s,o){ne(s,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null)},p(s,[o]){if(o&1){r=s[0];let a;for(a=0;a<r.length;a+=1){const l=xn(s,r,a);n[a]?n[a].p(l,o):(n[a]=Cn(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}},i:ke,o:ke,d(s){s&&G(e),Ws(n,s)}}}function Pa(t,e,r){let{messages:n=[]}=e;return t.$$set=s=>{"messages"in s&&r(0,n=s.messages)},[n]}class gr extends Ne{constructor(e){super(),Re(this,e,Pa,Ea,We,{messages:0})}}function Ta(t){let e,r,n,s,o,a,l,d,b,A,_,S,v,g,y,T,P,C,N,$,x,i,m,c,k,E,I,q,V,F,O,L,h,p,R,M,j,Y,H,z,se,oe,de,fe,ie,u,f,w,U,D;a=new gr({props:{messages:t[1].getErrors("url")}}),v=new gr({props:{messages:t[1].getErrors("username")}});function B(W){t[15](W)}let X={id:"password",name:"password",show:!0,onInput:t[11]};return t[3]!==void 0&&(X.password=t[3]),N=new Us({props:X}),ut.push(()=>St(N,"password",B)),i=new gr({props:{messages:t[1].getErrors("password")}}),{c(){e=Q("label"),r=Pe("Application or URL"),n=ce(),s=Q("input"),o=ce(),ye(a.$$.fragment),l=ce(),d=Q("label"),b=Pe("Username"),A=ce(),_=Q("input"),S=ce(),ye(v.$$.fragment),g=ce(),y=Q("div"),T=Q("label"),P=Pe("Password"),C=ce(),ye(N.$$.fragment),x=ce(),ye(i.$$.fragment),m=ce(),c=Q("div"),k=Q("label"),E=Pe("Symbols?"),I=ce(),q=Q("input"),V=ce(),F=Q("label"),O=Pe("Exclude Similar?"),L=ce(),h=Q("input"),p=ce(),R=Q("label"),M=Pe("Exclude Ambiguous?"),j=ce(),Y=Q("input"),H=ce(),z=Q("input"),se=ce(),oe=Q("div"),de=Q("button"),fe=Pe("Generate"),ie=ce(),u=Q("button"),f=Pe("Add"),this.h()},l(W){e=Z(W,"LABEL",{for:!0});var re=ee(e);r=Te(re,"Application or URL"),re.forEach(G),n=he(W),s=Z(W,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),o=he(W),ve(a.$$.fragment,W),l=he(W),d=Z(W,"LABEL",{for:!0});var le=ee(d);b=Te(le,"Username"),le.forEach(G),A=he(W),_=Z(W,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),S=he(W),ve(v.$$.fragment,W),g=he(W),y=Z(W,"DIV",{});var te=ee(y);T=Z(te,"LABEL",{for:!0});var Ae=ee(T);P=Te(Ae,"Password"),Ae.forEach(G),C=he(te),ve(N.$$.fragment,te),x=he(te),ve(i.$$.fragment,te),m=he(te),c=Z(te,"DIV",{});var ge=ee(c);k=Z(ge,"LABEL",{for:!0});var je=ee(k);E=Te(je,"Symbols?"),je.forEach(G),I=he(ge),q=Z(ge,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),V=he(ge),F=Z(ge,"LABEL",{for:!0});var He=ee(F);O=Te(He,"Exclude Similar?"),He.forEach(G),L=he(ge),h=Z(ge,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),p=he(ge),R=Z(ge,"LABEL",{for:!0});var ot=ee(R);M=Te(ot,"Exclude Ambiguous?"),ot.forEach(G),j=he(ge),Y=Z(ge,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),H=he(ge),z=Z(ge,"INPUT",{id:!0,class:!0,type:!0,minlength:!0,placeholder:!0}),ge.forEach(G),te.forEach(G),se=he(W),oe=Z(W,"DIV",{class:!0});var Mt=ee(oe);de=Z(Mt,"BUTTON",{class:!0});var Zr=ee(de);fe=Te(Zr,"Generate"),Zr.forEach(G),ie=he(Mt),u=Z(Mt,"BUTTON",{class:!0});var en=ee(u);f=Te(en,"Add"),en.forEach(G),Mt.forEach(G),this.h()},h(){J(e,"for","url"),J(s,"id","url"),J(s,"name","url"),J(s,"class","input"),J(s,"type","text"),J(s,"placeholder","Application or URL"),J(d,"for","username"),J(_,"id","username"),J(_,"name","username"),J(_,"class","input"),J(_,"type","text"),J(_,"placeholder","Username"),J(T,"for","password"),J(k,"for","includeSymbols"),J(q,"id","includeSymbols"),J(q,"type","checkbox"),J(q,"class","checkbox"),J(q,"placeholder","Length"),J(F,"for","excludeSimilarCharacters"),J(h,"id","excludeSimilarCharacters"),J(h,"type","checkbox"),J(h,"class","checkbox"),J(h,"placeholder","Length"),J(R,"for","excludeAmbiguousCharacters"),J(Y,"id","excludeAmbiguousCharacters"),J(Y,"type","checkbox"),J(Y,"class","checkbox"),J(Y,"placeholder","Length"),J(z,"id","length"),J(z,"class","input"),J(z,"type","number"),J(z,"minlength","6"),J(z,"placeholder","Length"),J(de,"class","btn primary"),J(u,"class","btn primary"),u.disabled=t[8],J(oe,"class","flex justify-between mt-6")},m(W,re){ne(W,e,re),K(e,r),ne(W,n,re),ne(W,s,re),De(s,t[0]),ne(W,o,re),_e(a,W,re),ne(W,l,re),ne(W,d,re),K(d,b),ne(W,A,re),ne(W,_,re),De(_,t[2]),ne(W,S,re),_e(v,W,re),ne(W,g,re),ne(W,y,re),K(y,T),K(T,P),K(y,C),_e(N,y,null),K(y,x),_e(i,y,null),K(y,m),K(y,c),K(c,k),K(k,E),K(c,I),K(c,q),q.checked=t[5],K(c,V),K(c,F),K(F,O),K(c,L),K(c,h),h.checked=t[6],K(c,p),K(c,R),K(R,M),K(c,j),K(c,Y),Y.checked=t[7],K(c,H),K(c,z),De(z,t[4]),ne(W,se,re),ne(W,oe,re),K(oe,de),K(de,fe),K(oe,ie),K(oe,u),K(u,f),w=!0,U||(D=[we(s,"input",t[13]),we(s,"input",t[11]),we(_,"input",t[14]),we(_,"input",t[11]),we(q,"change",t[16]),we(h,"change",t[17]),we(Y,"change",t[18]),we(z,"input",t[19]),we(de,"click",t[10]),we(u,"click",t[9])],U=!0)},p(W,[re]){re&1&&s.value!==W[0]&&De(s,W[0]);const le={};re&2&&(le.messages=W[1].getErrors("url")),a.$set(le),re&4&&_.value!==W[2]&&De(_,W[2]);const te={};re&2&&(te.messages=W[1].getErrors("username")),v.$set(te);const Ae={};!$&&re&8&&($=!0,Ae.password=W[3],kt(()=>$=!1)),N.$set(Ae);const ge={};re&2&&(ge.messages=W[1].getErrors("password")),i.$set(ge),re&32&&(q.checked=W[5]),re&64&&(h.checked=W[6]),re&128&&(Y.checked=W[7]),re&16&&Hn(z.value)!==W[4]&&De(z,W[4]),(!w||re&256)&&(u.disabled=W[8])},i(W){w||(ae(a.$$.fragment,W),ae(v.$$.fragment,W),ae(N.$$.fragment,W),ae(i.$$.fragment,W),w=!0)},o(W){ue(a.$$.fragment,W),ue(v.$$.fragment,W),ue(N.$$.fragment,W),ue(i.$$.fragment,W),w=!1},d(W){W&&G(e),W&&G(n),W&&G(s),W&&G(o),be(a,W),W&&G(l),W&&G(d),W&&G(A),W&&G(_),W&&G(S),be(v,W),W&&G(g),W&&G(y),be(N),be(i),W&&G(se),W&&G(oe),U=!1,gt(D)}}}const Mn=Ri((t={},e)=>{Is(e),mr("url","Application is required",()=>{hr(t.url).isNotBlank()}),mr("username","Username is required",()=>{hr(t.username).isNotBlank()}),mr("password","Password is required",()=>{hr(t.password).isNotBlank()})});function Aa(t,e,r){let n,{url:s=""}=e,{onAdd:o=()=>{}}=e,a,l;function d(){mo(s,a,l),o()}let b=16,A=!0,_=!1,S=!1;function v(){r(3,l=Xi({length:b,includeSymbols:A,excludeSimilarCharacters:_,excludeAmbiguousCharacters:S}))}let g=Mn.get();function y(m){r(1,g=Mn({url:s,username:a,password:l},m.currentTarget.name))}function T(){s=this.value,r(0,s)}function P(){a=this.value,r(2,a)}function C(m){l=m,r(3,l)}function N(){A=this.checked,r(5,A)}function $(){_=this.checked,r(6,_)}function x(){S=this.checked,r(7,S)}function i(){b=Hn(this.value),r(4,b)}return t.$$set=m=>{"url"in m&&r(0,s=m.url),"onAdd"in m&&r(12,o=m.onAdd)},t.$$.update=()=>{t.$$.dirty&2&&r(8,n=!g.isValid())},[s,g,a,l,b,A,_,S,n,d,v,y,o,T,P,C,N,$,x,i]}class Sa extends Ne{constructor(e){super(),Re(this,e,Aa,Ta,We,{url:0,onAdd:12})}}function ka(t){let e;return{c(){e=Qe("path"),this.h()},l(r){e=Ze(r,"path",{d:!0}),ee(e).forEach(G),this.h()},h(){J(e,"d","M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z")},m(r,n){ne(r,e,n)},p:ke,d(r){r&&G(e)}}}function Na(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[ka]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)s=Me(s,n[o]);return e=new xt({props:s}),{c(){ye(e.$$.fragment)},l(o){ve(e.$$.fragment,o)},m(o,a){_e(e,o,a),r=!0},p(o,[a]){const l=a&1?It(n,[n[0],Ot(o[0])]):{};a&2&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){r||(ae(e.$$.fragment,o),r=!0)},o(o){ue(e.$$.fragment,o),r=!1},d(o){be(e,o)}}}function Ra(t,e,r){return t.$$set=n=>{r(0,e=Me(Me({},e),Ve(n)))},e=Ve(e),[e]}class Ia extends Ne{constructor(e){super(),Re(this,e,Ra,Na,Ye,{})}}function Oa(t){let e;return{c(){e=Q("div"),this.h()},l(r){e=Z(r,"DIV",{class:!0}),ee(e).forEach(G),this.h()},h(){J(e,"class","h-1")},m(r,n){ne(r,e,n)},p:ke,i:ke,o:ke,d(r){r&&G(e)}}}function xa(t){let e,r,n,s,o,a,l,d,b;return s=new Ia({}),{c(){e=Q("div"),r=Q("div"),n=Q("div"),ye(s.$$.fragment),o=ce(),a=Q("span"),l=Pe(t[1]),this.h()},l(A){e=Z(A,"DIV",{});var _=ee(e);r=Z(_,"DIV",{class:!0});var S=ee(r);n=Z(S,"DIV",{class:!0});var v=ee(n);ve(s.$$.fragment,v),v.forEach(G),o=he(S),a=Z(S,"SPAN",{class:!0});var g=ee(a);l=Te(g,t[1]),g.forEach(G),S.forEach(G),_.forEach(G),this.h()},h(){J(n,"class","animate-bounce w-6 h-6"),J(a,"class","rounded-full bg-black text-white text-xs w-4 h-4 inline-block text-center leading-[1rem] absolute -bottom-1 -right-1"),J(r,"class","relative")},m(A,_){ne(A,e,_),K(e,r),K(r,n),_e(s,n,null),K(r,o),K(r,a),K(a,l),b=!0},p(A,_){(!b||_&2)&&lt(l,A[1])},i(A){b||(ae(s.$$.fragment,A),Jn(()=>{d||(d=nn(e,on,{},!0)),d.run(1)}),b=!0)},o(A){ue(s.$$.fragment,A),d||(d=nn(e,on,{},!1)),d.run(0),b=!1},d(A){A&&G(e),be(s),A&&d&&d.end()}}}function Ca(t){let e,r,n,s;const o=[xa,Oa],a=[];function l(d,b){return d[0]?0:1}return e=l(t),r=a[e]=o[e](t),{c(){r.c(),n=Ie()},l(d){r.l(d),n=Ie()},m(d,b){a[e].m(d,b),ne(d,n,b),s=!0},p(d,[b]){let A=e;e=l(d),e===A?a[e].p(d,b):(rt(),ue(a[A],1,1,()=>{a[A]=null}),nt(),r=a[e],r?r.p(d,b):(r=a[e]=o[e](d),r.c()),ae(r,1),r.m(n.parentNode,n))},i(d){s||(ae(r),s=!0)},o(d){ue(r),s=!1},d(d){a[e].d(d),d&&G(n)}}}function Ma(t,e,r){let n,s;ct(t,lo,l=>r(3,n=l)),ct(t,co,l=>r(1,s=l));let o=!1,a=Date.now();return t.$$.update=()=>{if(t.$$.dirty&12)if(n)r(0,o=!0),r(2,a=Date.now());else{const l=Date.now()-a;l<1e3?setTimeout(()=>{r(0,o=!1)},1e3-l):r(0,o=!1)}},[o,s,a,n]}class Ua extends Ne{constructor(e){super(),Re(this,e,Ma,Ca,Ye,{})}}function Ht(t,e,r=!1){const n=e.length,s=t.length;return s>n?!1:Da(r!==!0?t.toLowerCase():t,s,r!==!0?e.toLowerCase():e,n)}function Da(t,e,r,n){let s=0,o=0;e:for(;s<e;){const a=t.charAt(s++);for(;o<n;)if(r.charAt(o++)===a)continue e;return!1}return!0}const Un=()=>{};function ja(t,e=0,r={}){let n=null,s=!1;const o=r.before||Un,a=r.after||Un;function l(){n!=null&&(clearTimeout(n),n=null)}function d(){s=!1,l()}function b(){l(),A()}function A(...S){s=!1,t.apply(this,S),a()}const _=function(...v){s||(s=!0,o()),l(),!!r.isImmediate&&n==null?A(this,v):n=setTimeout(()=>{n=null,A(this,v)},e)};return _.cancel=d,_.flush=b,_}function Fa(t){let e,r,n,s,o,a,l,d,b,A,_,S,v,g,y,T,P,C;a=new Kn({});function N(i){t[6](i)}function $(i){t[7](i)}let x={onInput:t[3]};return t[0].password!==void 0&&(x.password=t[0].password),t[1]!==void 0&&(x.show=t[1]),v=new Us({props:x}),ut.push(()=>St(v,"password",N)),ut.push(()=>St(v,"show",$)),{c(){e=Q("div"),r=Q("div"),n=Q("div"),s=Q("button"),o=Q("div"),ye(a.$$.fragment),l=ce(),d=Q("div"),b=Q("input"),A=ce(),_=Q("div"),S=Q("div"),ye(v.$$.fragment),this.h()},l(i){e=Z(i,"DIV",{class:!0});var m=ee(e);r=Z(m,"DIV",{class:!0});var c=ee(r);n=Z(c,"DIV",{class:!0});var k=ee(n);s=Z(k,"BUTTON",{class:!0});var E=ee(s);o=Z(E,"DIV",{class:!0});var I=ee(o);ve(a.$$.fragment,I),I.forEach(G),E.forEach(G),k.forEach(G),l=he(c),d=Z(c,"DIV",{class:!0});var q=ee(d);b=Z(q,"INPUT",{class:!0,type:!0,placeholder:!0}),q.forEach(G),c.forEach(G),A=he(m),_=Z(m,"DIV",{class:!0});var V=ee(_);S=Z(V,"DIV",{class:!0});var F=ee(S);ve(v.$$.fragment,F),F.forEach(G),V.forEach(G),m.forEach(G),this.h()},h(){J(o,"class","w-6 h-6"),J(s,"class","btn danger h-full px-2 py-0"),J(n,"class","flex-grow-0"),J(b,"class","input"),J(b,"type","text"),J(b,"placeholder","Username"),J(d,"class","flex-1"),J(r,"class","flex"),J(S,"class","flex-1"),J(_,"class","flex"),J(e,"class","grid grid-cols-1 sm:grid-cols-2 mt-1")},m(i,m){ne(i,e,m),K(e,r),K(r,n),K(n,s),K(s,o),_e(a,o,null),K(r,l),K(r,d),K(d,b),De(b,t[0].username),K(e,A),K(e,_),K(_,S),_e(v,S,null),T=!0,P||(C=[we(s,"click",t[2]),we(b,"input",t[5]),we(b,"input",t[3])],P=!0)},p(i,[m]){m&1&&b.value!==i[0].username&&De(b,i[0].username);const c={};!g&&m&1&&(g=!0,c.password=i[0].password,kt(()=>g=!1)),!y&&m&2&&(y=!0,c.show=i[1],kt(()=>y=!1)),v.$set(c)},i(i){T||(ae(a.$$.fragment,i),ae(v.$$.fragment,i),T=!0)},o(i){ue(a.$$.fragment,i),ue(v.$$.fragment,i),T=!1},d(i){i&&G(e),be(a),be(v),P=!1,gt(C)}}}function La(t,e,r){let{password:n}=e,{onDelete:s=()=>{}}=e,o=!1;function a(){s(n)}async function l(){n.url&&n.username&&n.password&&await go(n.id,n)}const d=ja(l,1e3);function b(){n.username=this.value,r(0,n)}function A(S){t.$$.not_equal(n.password,S)&&(n.password=S,r(0,n))}function _(S){o=S,r(1,o)}return t.$$set=S=>{"password"in S&&r(0,n=S.password),"onDelete"in S&&r(4,s=S.onDelete)},[n,o,a,d,s,b,A,_]}class Ds extends Ne{constructor(e){super(),Re(this,e,La,Fa,We,{password:0,onDelete:4})}}function Dn(t,e,r){const n=t.slice();n[5]=e[r][0],n[6]=e[r][1];const s=n[0]?n[6].filter(o=>js(o,n[0])):n[6];return n[7]=s,n}function jn(t,e,r){const n=t.slice();return n[10]=e[r],n}function Fn(t,e){let r,n,s;return n=new Ds({props:{password:e[10],onDelete:e[1]}}),{key:t,first:null,c(){r=Ie(),ye(n.$$.fragment),this.h()},l(o){r=Ie(),ve(n.$$.fragment,o),this.h()},h(){this.first=r},m(o,a){ne(o,r,a),_e(n,o,a),s=!0},p(o,a){e=o;const l={};a&5&&(l.password=e[10]),a&2&&(l.onDelete=e[1]),n.$set(l)},i(o){s||(ae(n.$$.fragment,o),s=!0)},o(o){ue(n.$$.fragment,o),s=!1},d(o){o&&G(r),be(n,o)}}}function Ln(t,e){let r,n=e[5]+"",s,o,a=[],l=new Map,d,b,A=e[7];const _=S=>S[10].id;for(let S=0;S<A.length;S+=1){let v=jn(e,A,S),g=_(v);l.set(g,a[S]=Fn(g,v))}return{key:t,first:null,c(){r=Q("h2"),s=Pe(n),o=ce();for(let S=0;S<a.length;S+=1)a[S].c();d=Ie(),this.h()},l(S){r=Z(S,"H2",{class:!0});var v=ee(r);s=Te(v,n),v.forEach(G),o=he(S);for(let g=0;g<a.length;g+=1)a[g].l(S);d=Ie(),this.h()},h(){J(r,"class","my-1"),this.first=r},m(S,v){ne(S,r,v),K(r,s),ne(S,o,v);for(let g=0;g<a.length;g+=1)a[g].m(S,v);ne(S,d,v),b=!0},p(S,v){e=S,(!b||v&4)&&n!==(n=e[5]+"")&&lt(s,n),v&7&&(A=e[7],rt(),a=tr(a,v,_,1,e,A,l,d.parentNode,Rr,Fn,d,jn),nt())},i(S){if(!b){for(let v=0;v<A.length;v+=1)ae(a[v]);b=!0}},o(S){for(let v=0;v<a.length;v+=1)ue(a[v]);b=!1},d(S){S&&G(r),S&&G(o);for(let v=0;v<a.length;v+=1)a[v].d(S);S&&G(d)}}}function Ba(t){let e=[],r=new Map,n,s,o=t[2];const a=l=>l[5];for(let l=0;l<o.length;l+=1){let d=Dn(t,o,l),b=a(d);r.set(b,e[l]=Ln(b,d))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ie()},l(l){for(let d=0;d<e.length;d+=1)e[d].l(l);n=Ie()},m(l,d){for(let b=0;b<e.length;b+=1)e[b].m(l,d);ne(l,n,d),s=!0},p(l,[d]){d&7&&(o=l[2],rt(),e=tr(e,d,a,1,l,o,r,n.parentNode,Rr,Ln,n,Dn),nt())},i(l){if(!s){for(let d=0;d<o.length;d+=1)ae(e[d]);s=!0}},o(l){for(let d=0;d<e.length;d+=1)ue(e[d]);s=!1},d(l){for(let d=0;d<e.length;d+=1)e[d].d(l);l&&G(n)}}}function js(t,e){return Ht(e,t.url)||Ht(e,t.username)||Ht(e,t.password)}function $a(t,e,r){let n,s,o;ct(t,xr,d=>r(4,o=d));let{search:a=""}=e,{onDelete:l=()=>{}}=e;return t.$$set=d=>{"search"in d&&r(0,a=d.search),"onDelete"in d&&r(1,l=d.onDelete)},t.$$.update=()=>{t.$$.dirty&16&&r(3,n=Object.entries(o)),t.$$.dirty&9&&r(2,s=a?n.filter(([d,b])=>Ht(a,d)):n),t.$$.dirty&12&&s.length===0&&r(2,s=n)},[a,l,s,n,o]}class qa extends Ne{constructor(e){super(),Re(this,e,$a,Ba,We,{search:0,onDelete:1})}}function Bn(t,e,r){const n=t.slice();return n[6]=e[r],n}function $n(t,e){let r,n,s;return n=new Ds({props:{password:e[6],onDelete:e[0]}}),{key:t,first:null,c(){r=Ie(),ye(n.$$.fragment),this.h()},l(o){r=Ie(),ve(n.$$.fragment,o),this.h()},h(){this.first=r},m(o,a){ne(o,r,a),_e(n,o,a),s=!0},p(o,a){e=o;const l={};a&2&&(l.password=e[6]),a&1&&(l.onDelete=e[0]),n.$set(l)},i(o){s||(ae(n.$$.fragment,o),s=!0)},o(o){ue(n.$$.fragment,o),s=!1},d(o){o&&G(r),be(n,o)}}}function Va(t){let e=[],r=new Map,n,s,o=t[1];const a=l=>l[6].id;for(let l=0;l<o.length;l+=1){let d=Bn(t,o,l),b=a(d);r.set(b,e[l]=$n(b,d))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ie()},l(l){for(let d=0;d<e.length;d+=1)e[d].l(l);n=Ie()},m(l,d){for(let b=0;b<e.length;b+=1)e[b].m(l,d);ne(l,n,d),s=!0},p(l,[d]){d&3&&(o=l[1],rt(),e=tr(e,d,a,1,l,o,r,n.parentNode,Rr,$n,n,Bn),nt())},i(l){if(!s){for(let d=0;d<o.length;d+=1)ae(e[d]);s=!0}},o(l){for(let d=0;d<e.length;d+=1)ue(e[d]);s=!1},d(l){for(let d=0;d<e.length;d+=1)e[d].d(l);l&&G(n)}}}function Ga(t,e,r){let n,s,o;ct(t,xr,b=>r(5,o=b));let{url:a}=e,{search:l=""}=e,{onDelete:d=()=>{}}=e;return t.$$set=b=>{"url"in b&&r(2,a=b.url),"search"in b&&r(3,l=b.search),"onDelete"in b&&r(0,d=b.onDelete)},t.$$.update=()=>{t.$$.dirty&36&&r(4,n=o[a]||[]),t.$$.dirty&24&&r(1,s=l?n.filter(b=>js(b,l)):n)},[d,s,a,l,n,o]}class Wa extends Ne{constructor(e){super(),Re(this,e,Ga,Va,We,{url:2,search:3,onDelete:0})}}const Qr=Ir("disconnected"),Ha=yt(Qr,t=>t);Ke.on("connected",()=>{Qr.set("connected")});Ke.on("disconnected",()=>{Qr.set("disconnected")});function qn(t,e,r){const n=t.slice();return n[0]=e[r],n}function Ja(t){let e,r;return e=new Sa({props:{onAdd:t[10]}}),{c(){ye(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,s){_e(e,n,s),r=!0},p:ke,i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){ue(e.$$.fragment,n),r=!1},d(n){be(e,n)}}}function za(t){let e,r;return{c(){e=Q("h3"),r=Pe("Add Password"),this.h()},l(n){e=Z(n,"H3",{slot:!0});var s=ee(e);r=Te(s,"Add Password"),s.forEach(G),this.h()},h(){J(e,"slot","title")},m(n,s){ne(n,e,s),K(e,r)},p:ke,d(n){n&&G(e)}}}function Ya(t){var y,T;let e,r,n=((y=t[1])==null?void 0:y.url)+"",s,o,a=((T=t[1])==null?void 0:T.username)+"",l,d,b,A,_,S,v,g;return{c(){e=Q("p"),r=Pe("Delete "),s=Pe(n),o=ce(),l=Pe(a),d=Pe(" Password?"),b=ce(),A=Q("div"),_=Q("button"),S=Pe("Delete"),this.h()},l(P){e=Z(P,"P",{class:!0});var C=ee(e);r=Te(C,"Delete "),s=Te(C,n),o=he(C),l=Te(C,a),d=Te(C," Password?"),C.forEach(G),b=he(P),A=Z(P,"DIV",{class:!0});var N=ee(A);_=Z(N,"BUTTON",{class:!0});var $=ee(_);S=Te($,"Delete"),$.forEach(G),N.forEach(G),this.h()},h(){J(e,"class","mb-2"),J(_,"class","btn danger"),J(A,"class","flex justify-end")},m(P,C){ne(P,e,C),K(e,r),K(e,s),K(e,o),K(e,l),K(e,d),ne(P,b,C),ne(P,A,C),K(A,_),K(_,S),v||(g=we(_,"click",function(){er(t[6])&&t[6].apply(this,arguments)}),v=!0)},p(P,C){var N,$;t=P,C&2&&n!==(n=((N=t[1])==null?void 0:N.url)+"")&&lt(s,n),C&2&&a!==(a=(($=t[1])==null?void 0:$.username)+"")&&lt(l,a)},d(P){P&&G(e),P&&G(b),P&&G(A),v=!1,g()}}}function Ka(t){let e,r;return{c(){e=Q("h3"),r=Pe("Deleting Password"),this.h()},l(n){e=Z(n,"H3",{slot:!0});var s=ee(e);r=Te(s,"Deleting Password"),s.forEach(G),this.h()},h(){J(e,"slot","title")},m(n,s){ne(n,e,s),K(e,r)},p:ke,d(n){n&&G(e)}}}function Vn(t){let e,r,n,s,o=[],a=new Map,l,d,b,A,_,S,v,g,y,T,P,C,N,$,x=t[5];const i=E=>E[0];for(let E=0;E<x.length;E+=1){let I=qn(t,x,E),q=i(I);a.set(q,o[E]=Gn(q,I))}d=new Ua({});const m=[Qa,Xa],c=[];function k(E,I){return E[0]?0:1}return y=k(t),T=c[y]=m[y](t),{c(){e=Q("div"),r=Q("div"),n=Q("select"),s=Q("option");for(let E=0;E<o.length;E+=1)o[E].c();l=ce(),ye(d.$$.fragment),b=ce(),A=Q("button"),_=Pe("Add"),S=ce(),v=Q("input"),g=ce(),T.c(),P=Ie(),this.h()},l(E){e=Z(E,"DIV",{class:!0});var I=ee(e);r=Z(I,"DIV",{class:!0});var q=ee(r);n=Z(q,"SELECT",{class:!0});var V=ee(n);s=Z(V,"OPTION",{}),ee(s).forEach(G);for(let O=0;O<o.length;O+=1)o[O].l(V);V.forEach(G),l=he(q),ve(d.$$.fragment,q),q.forEach(G),b=he(I),A=Z(I,"BUTTON",{class:!0});var F=ee(A);_=Te(F,"Add"),F.forEach(G),I.forEach(G),S=he(E),v=Z(E,"INPUT",{class:!0,type:!0,placeholder:!0}),g=he(E),T.l(E),P=Ie(),this.h()},h(){s.__value="",s.value=s.__value,J(n,"class","input"),t[0]===void 0&&Jn(()=>t[14].call(n)),J(r,"class","flex flex-row"),J(A,"class","btn primary"),J(e,"class","flex justify-between"),J(v,"class","input my-2"),J(v,"type","text"),J(v,"placeholder","Search...")},m(E,I){ne(E,e,I),K(e,r),K(r,n),K(n,s);for(let q=0;q<o.length;q+=1)o[q].m(n,null);sn(n,t[0]),K(r,l),_e(d,r,null),K(e,b),K(e,A),K(A,_),ne(E,S,I),ne(E,v,I),De(v,t[3]),ne(E,g,I),c[y].m(E,I),ne(E,P,I),C=!0,N||($=[we(n,"change",t[14]),we(A,"click",t[9]),we(v,"input",t[15])],N=!0)},p(E,I){I&32&&(x=E[5],o=tr(o,I,i,1,E,x,a,n,Hs,Gn,null,qn)),I&33&&sn(n,E[0]),I&8&&v.value!==E[3]&&De(v,E[3]);let q=y;y=k(E),y===q?c[y].p(E,I):(rt(),ue(c[q],1,1,()=>{c[q]=null}),nt(),T=c[y],T?T.p(E,I):(T=c[y]=m[y](E),T.c()),ae(T,1),T.m(P.parentNode,P))},i(E){C||(ae(d.$$.fragment,E),ae(T),C=!0)},o(E){ue(d.$$.fragment,E),ue(T),C=!1},d(E){E&&G(e);for(let I=0;I<o.length;I+=1)o[I].d();be(d),E&&G(S),E&&G(v),E&&G(g),c[y].d(E),E&&G(P),N=!1,gt($)}}}function Gn(t,e){let r,n=e[0]+"",s,o;return{key:t,first:null,c(){r=Q("option"),s=Pe(n),this.h()},l(a){r=Z(a,"OPTION",{});var l=ee(r);s=Te(l,n),l.forEach(G),this.h()},h(){r.__value=o=e[0],r.value=r.__value,this.first=r},m(a,l){ne(a,r,l),K(r,s)},p(a,l){e=a,l&32&&n!==(n=e[0]+"")&&lt(s,n),l&32&&o!==(o=e[0])&&(r.__value=o,r.value=r.__value)},d(a){a&&G(r)}}}function Xa(t){let e,r;return e=new qa({props:{search:t[3],onDelete:t[7]}}),{c(){ye(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,s){_e(e,n,s),r=!0},p(n,s){const o={};s&8&&(o.search=n[3]),s&128&&(o.onDelete=n[7]),e.$set(o)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){ue(e.$$.fragment,n),r=!1},d(n){be(e,n)}}}function Qa(t){let e,r;return e=new Wa({props:{url:t[0],search:t[3],onDelete:t[7]}}),{c(){ye(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,s){_e(e,n,s),r=!0},p(n,s){const o={};s&1&&(o.url=n[0]),s&8&&(o.search=n[3]),s&128&&(o.onDelete=n[7]),e.$set(o)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){ue(e.$$.fragment,n),r=!1},d(n){be(e,n)}}}function Za(t){let e,r,n,s,o,a,l,d;function b(g){t[12](g)}let A={$$slots:{title:[za],default:[Ja]},$$scope:{ctx:t}};t[2]!==void 0&&(A.open=t[2]),e=new un({props:A}),ut.push(()=>St(e,"open",b));function _(g){t[13](g)}let S={$$slots:{title:[Ka],default:[Ya]},$$scope:{ctx:t}};t[4]!==void 0&&(S.open=t[4]),s=new un({props:S}),ut.push(()=>St(s,"open",_));let v=t[8]==="connected"&&Vn(t);return{c(){ye(e.$$.fragment),n=ce(),ye(s.$$.fragment),a=ce(),v&&v.c(),l=Ie()},l(g){ve(e.$$.fragment,g),n=he(g),ve(s.$$.fragment,g),a=he(g),v&&v.l(g),l=Ie()},m(g,y){_e(e,g,y),ne(g,n,y),_e(s,g,y),ne(g,a,y),v&&v.m(g,y),ne(g,l,y),d=!0},p(g,[y]){const T={};y&262144&&(T.$$scope={dirty:y,ctx:g}),!r&&y&4&&(r=!0,T.open=g[2],kt(()=>r=!1)),e.$set(T);const P={};y&262210&&(P.$$scope={dirty:y,ctx:g}),!o&&y&16&&(o=!0,P.open=g[4],kt(()=>o=!1)),s.$set(P),g[8]==="connected"?v?(v.p(g,y),y&256&&ae(v,1)):(v=Vn(g),v.c(),ae(v,1),v.m(l.parentNode,l)):v&&(rt(),ue(v,1,1,()=>{v=null}),nt())},i(g){d||(ae(e.$$.fragment,g),ae(s.$$.fragment,g),ae(v),d=!0)},o(g){ue(e.$$.fragment,g),ue(s.$$.fragment,g),ue(v),d=!1},d(g){be(e,g),g&&G(n),be(s,g),g&&G(a),v&&v.d(g),g&&G(l)}}}function eu(t,e,r){let n,s,o,a,l;ct(t,xr,N=>r(11,a=N)),ct(t,Ha,N=>r(8,l=N));let{url:d=""}=e,b=!1,A="";function _(){r(2,b=!b)}function S(){r(2,b=!1)}let v,g=!1;function y(N){b=N,r(2,b)}function T(N){g=N,r(4,g),r(1,v)}function P(){d=Js(this),r(0,d),r(5,o),r(11,a)}function C(){A=this.value,r(3,A)}return t.$$set=N=>{"url"in N&&r(0,d=N.url)},t.$$.update=()=>{t.$$.dirty&2&&r(6,s=()=>{v&&(yo(v.id),r(1,v=void 0),r(4,g=!1))}),t.$$.dirty&2048&&r(5,o=Object.keys(a))},r(7,n=N=>{r(1,v=N),r(4,g=!0)}),[d,v,b,A,g,o,s,n,l,_,S,a,y,T,P,C]}class tu extends Ne{constructor(e){super(),Re(this,e,eu,Za,We,{url:0})}}function ru(t){let e;return{c(){e=Q("div"),this.h()},l(r){e=Z(r,"DIV",{id:!0}),ee(e).forEach(G),this.h()},h(){J(e,"id",Fs)},m(r,n){ne(r,e,n)},p:ke,i:ke,o:ke,d(r){r&&G(e)}}}const Fs="remote-storage-widget";let yr;function nu(t,e,r){let{element:n=void 0}=e,{widget:s=void 0}=e;return zs(()=>{Ks(()=>import("../chunks/widget-bc58238e.js").then(function(o){return o.w}),[]).then(({default:o})=>{if(yr)r(1,s=yr),r(0,n=s.rsWidget);else{const a=new o(Ke);a.attach(Fs),yr=a,function l(){a.rsWidget?(r(1,s=a),r(0,n=a.rsWidget)):setTimeout(l,300)}()}})}),t.$$set=o=>{"element"in o&&r(0,n=o.element),"widget"in o&&r(1,s=o.widget)},[n,s]}class su extends Ne{constructor(e){super(),Re(this,e,nu,ru,We,{element:0,widget:1})}}function ou(t){let e,r,n;return r=new tu({}),{c(){e=Q("div"),ye(r.$$.fragment),this.h()},l(s){e=Z(s,"DIV",{class:!0});var o=ee(e);ve(r.$$.fragment,o),o.forEach(G),this.h()},h(){J(e,"class","container mx-auto p-4 mt-4 mb-8 bg-white")},m(s,o){ne(s,e,o),_e(r,e,null),n=!0},p:ke,i(s){n||(ae(r.$$.fragment,s),n=!0)},o(s){ue(r.$$.fragment,s),n=!1},d(s){s&&G(e),be(r)}}}function iu(t){let e,r,n,s,o;return e=new Ys({props:{$$slots:{default:[ou]},$$scope:{ctx:t}}}),s=new su({}),{c(){ye(e.$$.fragment),r=ce(),n=Q("div"),ye(s.$$.fragment),this.h()},l(a){ve(e.$$.fragment,a),r=he(a),n=Z(a,"DIV",{class:!0});var l=ee(n);ve(s.$$.fragment,l),l.forEach(G),this.h()},h(){J(n,"class","absolute left-0 bottom-0")},m(a,l){_e(e,a,l),ne(a,r,l),ne(a,n,l),_e(s,n,null),o=!0},p(a,[l]){const d={};l&1&&(d.$$scope={dirty:l,ctx:a}),e.$set(d)},i(a){o||(ae(e.$$.fragment,a),ae(s.$$.fragment,a),o=!0)},o(a){ue(e.$$.fragment,a),ue(s.$$.fragment,a),o=!1},d(a){be(e,a),a&&G(r),a&&G(n),be(s)}}}class fu extends Ne{constructor(e){super(),Re(this,e,null,iu,Ye,{})}}export{fu as default};
