import{N as Z2,S as Ee,i as ke,s as Vn,I as g0,e as At,c as St,a as kt,d as dt,g as Pt,O as Q2,J as b0,K as v0,L as w0,H as ki,q as xt,o as Mt,D as t3,C as Ce,w as Ht,x as Gt,y as Vt,z as ts,A as es,B as Yt,P as pr,Q as Ln,R as jn,b as ft,E as Pe,T as Ze,k as Ft,m as Lt,U as Dr,M as bt,V as Zt,n as Pr,p as xr,G as gr,W as Ue,t as Ae,h as Se,j as Ea,X as e3,Y as Lh,Z as Ar,_ as jh,$ as Uo,a0 as Ss,a1 as Do,a2 as qh,a3 as Lr,a4 as jr,l as Qe,a5 as _c,a6 as _0,a7 as gs,a8 as r3,v as n3}from"../chunks/index-919745c3.js";import{c as ka,I as rs,a as v1,b as $h,f as i3,s as Wh,L as s3}from"../chunks/Layout-b9598759.js";import{d as ns,w as Ka}from"../chunks/index-4459df0c.js";import{_ as a3}from"../chunks/preload-helper-91b3b7b7.js";var Ja,o3=new Uint8Array(16);function c3(){if(!Ja&&(Ja=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ja))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ja(o3)}var u3=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function l3(e){return typeof e=="string"&&u3.test(e)}var Le=[];for(var tu=0;tu<256;++tu)Le.push((tu+256).toString(16).substr(1));function h3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Le[e[t+0]]+Le[e[t+1]]+Le[e[t+2]]+Le[e[t+3]]+"-"+Le[e[t+4]]+Le[e[t+5]]+"-"+Le[e[t+6]]+Le[e[t+7]]+"-"+Le[e[t+8]]+Le[e[t+9]]+"-"+Le[e[t+10]]+Le[e[t+11]]+Le[e[t+12]]+Le[e[t+13]]+Le[e[t+14]]+Le[e[t+15]]).toLowerCase();if(!l3(r))throw TypeError("Stringified UUID is invalid");return r}function f3(e,t,r){e=e||{};var n=e.random||(e.rng||c3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return h3(n)}const d3="v21wdidfxjapm8b",p3="399181883347-3dfijgbemptplmueu01bsfga9jpkks6j.apps.googleusercontent.com";var m3=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function y3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hh={exports:{}};/*! remotestorage.js 2.0.0-beta.3, https://remotestorage.io, MIT licensed */(function(e,t){(function(r,n){e.exports=n()})(m3,function(){return function(r){var n={};function i(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return r[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=n,i.d=function(s,a,o){i.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:o})},i.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,a){if(1&a&&(s=i(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var c in s)i.d(o,c,function(u){return s[u]}.bind(null,c));return o},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=17)}([function(r,n,i){(function(s,a){Object.defineProperty(n,"__esModule",{value:!0}),n.applyMixins=n.toBase64=n.getTextFromArrayBuffer=n.shouldBeTreatedAsBinary=n.getJSONFromLocalStorage=n.localStorageAvailable=n.pathsFromRoot=n.deepClone=n.equal=n.bindAll=n.cleanPath=n.baseName=n.isDocument=n.isFolder=n.containingFolder=n.extend=n.getGlobalContext=n.globalContext=n.logError=void 0,n.logError=o=>{typeof o=="string"?console.error(o):console.error(o.message,o.stack)},n.globalContext=typeof window!="undefined"?window:typeof self=="object"?self:s,n.getGlobalContext=()=>typeof window!="undefined"?window:typeof self=="object"?self:s,n.extend=(...o)=>{const c=o[0];return Array.prototype.slice.call(o,1).forEach(function(u){for(const h in u)c[h]=u[h]}),c},n.containingFolder=o=>{if(o==="")return"/";if(!o)throw"Path not given!";return o.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},n.isFolder=o=>o.substr(-1)==="/",n.isDocument=o=>!n.isFolder(o),n.baseName=o=>{const c=o.split("/");return n.isFolder(o)?c[c.length-2]+"/":c[c.length-1]},n.cleanPath=o=>o.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27"),n.bindAll=o=>{for(const c in this)typeof o[c]=="function"&&(o[c]=o[c].bind(o))},n.equal=(o,c,u=[])=>{let h;if(typeof o!=typeof c)return!1;if(typeof o=="number"||typeof o=="boolean"||typeof o=="string")return o===c;if(typeof o=="function")return o.toString()===c.toString();if(o instanceof ArrayBuffer&&c instanceof ArrayBuffer&&(o=new Uint8Array(o),c=new Uint8Array(c)),o instanceof Array){if(o.length!==c.length)return!1;for(let f=0,p=o.length;f<p;f++)if(!n.equal(o[f],c[f],u))return!1}else{for(h in o)if(o.hasOwnProperty(h)&&!(h in c))return!1;for(h in c){if(!c.hasOwnProperty(h))continue;if(!(h in o))return!1;let f;if(typeof c[h]=="object"){if(u.indexOf(c[h])>=0)continue;f=u.slice(),f.push(c[h])}if(!n.equal(o[h],c[h],f))return!1}}return!0},n.deepClone=o=>{if(o!==void 0){const c=JSON.parse(JSON.stringify(o));return function u(h,f){if(typeof h=="object"&&!Array.isArray(h)&&h!==null){for(const p in h)if(typeof h[p]=="object"&&h[p]!==null)if(h[p].toString()==="[object ArrayBuffer]"){f[p]=new ArrayBuffer(h[p].byteLength);const d=new Int8Array(h[p]);new Int8Array(f[p]).set(d)}else u(h[p],f[p])}}(o,c),c}},n.pathsFromRoot=o=>{const c=[o],u=o.replace(/\/$/,"").split("/");for(;u.length>1;)u.pop(),c.push(u.join("/")+"/");return c},n.localStorageAvailable=()=>{const o=n.getGlobalContext();if(!("localStorage"in o))return!1;try{return o.localStorage.setItem("rs-check","1"),o.localStorage.removeItem("rs-check"),!0}catch{return!1}},n.getJSONFromLocalStorage=o=>{const c=n.getGlobalContext();try{return JSON.parse(c.localStorage.getItem(o))}catch{}},n.shouldBeTreatedAsBinary=(o,c)=>!!(c&&c.match(/charset=binary/)||/[\x00-\x08\x0E-\x1F\uFFFD]/.test(o)),n.getTextFromArrayBuffer=(o,c)=>new Promise(u=>{if(typeof Blob=="undefined"){const h=new a(new Uint8Array(o));u(h.toString(c))}else{let h;const f=n.globalContext;if(f.BlobBuilder=f.BlobBuilder||f.WebKitBlobBuilder,f.BlobBuilder!==void 0){const d=new f.BlobBuilder;d.append(o),h=d.getBlob()}else h=new Blob([o]);const p=new FileReader;typeof p.addEventListener=="function"?p.addEventListener("loadend",function(d){u(d.target.result)}):p.onloadend=function(d){u(d.target.result)},p.readAsText(h,c)}}),n.toBase64=o=>{const c=n.getGlobalContext();return"btoa"in c?c.btoa(o):a.from(o).toString("base64")},n.applyMixins=function(o,c){c.forEach(u=>{Object.getOwnPropertyNames(u.prototype).forEach(h=>{Object.defineProperty(o.prototype,h,Object.getOwnPropertyDescriptor(u.prototype,h))})})}}).call(this,i(5),i(19).Buffer)},function(r,n,i){const s=(this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}})(i(3));r.exports=function(...a){s.default.logging&&console.log(...a)}},function(r,n,i){const s=(this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}})(i(1));r.exports=class{addEvents(a){a.forEach(o=>this._addEvent(o))}addEventListener(a,o){if(typeof a!="string")throw new Error("Argument eventName should be a string");if(typeof o!="function")throw new Error("Argument handler should be a function");s.default("[EventHandling] Adding event listener",a),this._validateEvent(a),this._handlers[a].push(o)}on(a,o){return this.addEventListener(a,o)}removeEventListener(a,o){this._validateEvent(a);const c=this._handlers[a].length;for(let u=0;u<c;u++)if(this._handlers[a][u]===o)return void this._handlers[a].splice(u,1)}_emit(a,...o){this._validateEvent(a),this._handlers[a].slice().forEach(c=>{c.apply(this,o)})}_validateEvent(a){if(!(a in this._handlers))throw new Error("Unknown event: "+a)}_delegateEvent(a,o){o.on(a,c=>{this._emit(a,c)})}_addEvent(a){this._handlers===void 0&&(this._handlers={}),this._handlers[a]=[]}}},function(r,n,i){const s={cache:!0,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},cordovaRedirectUri:void 0,logging:!1,modules:[],backgroundSyncInterval:6e4,disableFeatures:[],discoveryTimeout:1e4,isBackground:!1,requestTimeout:3e4,syncInterval:1e4};r.exports=s},function(r,n,i){class s extends Error{constructor(o,c={}){super(),this.name="Unauthorized",this.message=o===void 0?"App authorization expired or revoked.":o,c.code!==void 0&&(this.code=c.code),this.stack=new Error().stack}}r.exports=s},function(r,n){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}r.exports=i},function(r,n,i){var s=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};const a=s(i(1)),o=i(0),c=s(i(4));let u;function h(p){const d=p||f.getLocation().href,S=d.indexOf("#");if(S===-1)return;const k=d.substring(S+1);return k.includes("=")?k.split("&").reduce(function(A,C){const B=C.split("=");if(B[0]==="state"&&B[1].match(/rsDiscovery/)){let R=decodeURIComponent(B[1]);const D=R.substr(R.indexOf("rsDiscovery=")).split("&")[0].split("=")[1];A.rsDiscovery=JSON.parse(atob(D)),R=R.replace(new RegExp("&?rsDiscovery="+D),""),R.length>0&&(A.state=R)}else A[decodeURIComponent(B[0])]=decodeURIComponent(B[1]);return A},{}):void 0}class f{static authorize(d,{authURL:S,scope:k,redirectUri:A,clientId:C}){if(a.default("[Authorize] authURL = ",S,"scope = ",k,"redirectUri = ",A,"clientId = ",C),!o.localStorageAvailable()&&d.backend==="remotestorage"){A+=A.indexOf("#")>0?"&":"#";const R={userAddress:d.remote.userAddress,href:d.remote.href,storageApi:d.remote.storageApi,properties:d.remote.properties};A+="rsDiscovery="+o.toBase64(JSON.stringify(R))}const B=function(R,D,L,g){const I=D.indexOf("#");let l=R;return l+=R.indexOf("?")>0?"&":"?",l+="redirect_uri="+encodeURIComponent(D.replace(/#.*$/,"")),l+="&scope="+encodeURIComponent(L),l+="&client_id="+encodeURIComponent(g),I!==-1&&I+1!==D.length&&(l+="&state="+encodeURIComponent(D.substring(I+1))),l+="&response_type=token",l}(S,A,k,C);o.globalContext.cordova?f.openWindow(B,A,"location=yes,clearsessioncache=yes,clearcache=yes").then(R=>{d.remote.configure({token:R.access_token})}):f.setLocation(B)}static setLocation(d){if(typeof d=="string")document.location.href=d;else{if(typeof d!="object")throw"Invalid location "+d;document.location=d}}static _rs_supported(){return typeof document!="undefined"}static _rs_cleanup(d){d.removeEventListener("features-loaded",u)}}f.IMPLIED_FAKE_TOKEN=!1,f.getLocation=function(){return document.location},f.openWindow=function(p,d,S){return new Promise((k,A)=>{const C=open(p,"_blank",S);if(!C||C.closed)return A("Authorization popup was blocked");function B(){return A("Authorization was canceled")}C.addEventListener("loadstart",function(R){if(R.url.indexOf(d)!==0)return;C.removeEventListener("exit",B),C.close();const D=h(R.url);return D?k(D):A("Authorization error")}),C.addEventListener("exit",B)})},f._rs_init=function(p){const d=h();let S;d&&(S=f.getLocation(),S.hash=""),u=function(){let k=!1;if(d){if(d.error)throw d.error==="access_denied"?new c.default("Authorization failed: access denied",{code:"access_denied"}):new c.default("Authorization failed: "+d.error);d.rsDiscovery&&p.remote.configure(d.rsDiscovery),d.access_token&&(p.remote.configure({token:d.access_token}),k=!0),d.remotestorage&&(p.connect(d.remotestorage),k=!0),d.state&&(S=f.getLocation(),f.setLocation(S.href.split("#")[0]+"#"+d.state)),k||p.remote.stopWaitingForToken()}else p.remote.stopWaitingForToken()},p.on("features-loaded",u)},r.exports=f},function(r,n,i){var s=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};const a=s(i(23)),o=s(i(24)),c=s(i(25)),u=s(i(2)),h=s(i(3)),f=i(0);class p{constructor(S,k){if(this.schemas={configurable:!0,get:function(){return p.Types.inScope(this.moduleName)}},k[k.length-1]!=="/")throw"Not a folder: "+k;k==="/"&&(this.makePath=C=>(C[0]==="/"?"":"/")+C),this.storage=S,this.base=k;const A=this.base.split("/");A.length>2?this.moduleName=A[1]:this.moduleName="root",this.addEvents(["change"]),this.on=this.on.bind(this),S.onChange(this.base,this._fireChange.bind(this))}scope(S){return new p(this.storage,this.makePath(S))}getListing(S,k){if(typeof S!="string")S="";else if(S.length>0&&S[S.length-1]!=="/")return Promise.reject("Not a folder: "+S);return this.storage.get(this.makePath(S),k).then(function(A){return A.statusCode===404?{}:A.body})}getAll(S,k){if(typeof S!="string")S="";else if(S.length>0&&S[S.length-1]!=="/")return Promise.reject("Not a folder: "+S);return this.storage.get(this.makePath(S),k).then(A=>{if(A.statusCode===404)return{};if(typeof A.body=="object"){const C=Object.keys(A.body);if(C.length===0)return{};const B=C.map(R=>this.storage.get(this.makePath(S+R),k).then(function(D){if(typeof D.body=="string")try{D.body=JSON.parse(D.body)}catch{}typeof D.body=="object"&&(A.body[R]=D.body)}));return Promise.all(B).then(function(){return A.body})}})}getFile(S,k){return typeof S!="string"?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(S),k).then(function(A){return{data:A.body,contentType:A.contentType,revision:A.revision}})}storeFile(S,k,A){return typeof S!="string"?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):typeof k!="string"?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):typeof A!="string"&&typeof A!="object"?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(k),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(k),A,S).then(C=>C.statusCode===200||C.statusCode===201?C.revision:Promise.reject("Request (PUT "+this.makePath(k)+") failed with status: "+C.statusCode)))}getObject(S,k){return typeof S!="string"?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(S),k).then(A=>{if(typeof A.body=="object")return A.body;if(typeof A.body=="string")try{return JSON.parse(A.body)}catch{throw new Error("Not valid JSON: "+this.makePath(S))}else if(A.body!==void 0&&A.statusCode===200)return Promise.reject("Not an object: "+this.makePath(S))})}storeObject(S,k,A){if(typeof S!="string")return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if(typeof k!="string")return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if(typeof A!="object")return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(A,S);try{const C=this.validate(A);if(!C.valid)return Promise.reject(C)}catch(C){return Promise.reject(C)}return this.storage.put(this.makePath(k),JSON.stringify(A),"application/json; charset=UTF-8").then(C=>C.statusCode===200||C.statusCode===201?C.revision:Promise.reject("Request (PUT "+this.makePath(k)+") failed with status: "+C.statusCode))}remove(S){return typeof S!="string"?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(S),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage.delete(this.makePath(S)))}getItemURL(S){if(typeof S!="string")throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(S=f.cleanPath(this.makePath(S)),this.storage.remote.href+S):void 0}cache(S,k="ALL"){if(typeof S!="string")throw"Argument 'path' of baseClient.cache must be a string";if(typeof k!="string")throw"Argument 'strategy' of baseClient.cache must be a string or undefined";if(k!=="FLUSH"&&k!=="SEEN"&&k!=="ALL")throw`Argument 'strategy' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]`;return this.storage.caching.set(this.makePath(S),k),this}flush(S){return this.storage.local.flush(S)}declareType(S,k,A){let C;A?C=k:(A=k,C=this._defaultTypeURI(S)),p.Types.declare(this.moduleName,S,C,A)}validate(S){const k=p.Types.getSchema(S["@context"]);if(k)return a.default.validateResult(S,k);throw new c.default(S["@context"])}_defaultTypeURI(S){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(S)}_attachType(S,k){S["@context"]=p.Types.resolveAlias(this.moduleName+"/"+k)||this._defaultTypeURI(k)}makePath(S){return this.base+(S||"")}_fireChange(S){h.default.changeEvents[S.origin]&&(["new","old","lastCommon"].forEach(function(k){if((!S[k+"ContentType"]||/^application\/(.*)json(.*)/.exec(S[k+"ContentType"]))&&typeof S[k+"Value"]=="string")try{S[k+"Value"]=JSON.parse(S[k+"Value"])}catch{}}),this._emit("change",S))}static _rs_init(){}}p.Types=o.default,f.applyMixins(p,[u.default]),r.exports=p},function(r,n,i){(function(s){var a=this&&this.__awaiter||function(L,g,I,l){return new(I||(I=Promise))(function(m,v){function y(O){try{N(l.next(O))}catch(W){v(W)}}function w(O){try{N(l.throw(O))}catch(W){v(W)}}function N(O){var W;O.done?m(O.value):(W=O.value,W instanceof I?W:new I(function(Z){Z(W)})).then(y,w)}N((l=l.apply(L,g||[])).next())})},o=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};const c=o(i(6)),u=o(i(2)),h=o(i(4)),f=o(i(3)),p=o(i(1)),d=i(0);let S;const k="remotestorage:wireclient",A={"draft-dejong-remotestorage-00":2,"draft-dejong-remotestorage-01":3,"draft-dejong-remotestorage-02":4,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":1};let C;if(typeof(s||window).ArrayBufferView=="function")C=function(L){return L&&L instanceof(s||window).ArrayBufferView};else{const L=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];C=function(g){for(let I=0;I<8;I++)if(g instanceof L[I])return!0;return!1}}function B(L){return typeof L!="string"?L:L==="*"?"*":'"'+L+'"'}function R(L){return typeof L!="string"?L:L.replace(/^["']|["']$/g,"")}class D{constructor(g){if(this._revisionCache={},S=d.localStorageAvailable(),this.rs=g,this.connected=!1,this.addEvents(["connected","not-connected"]),S){const I=function(){const l=d.getJSONFromLocalStorage(k)||{},{userAddress:m,href:v,storageApi:y,token:w,properties:N}=l;return{userAddress:m,href:v,storageApi:y,token:w,properties:N}}();I&&setTimeout(()=>{this.configure(I)},0)}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}get storageType(){if(this.storageApi){const g=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return g?g[1]:"2012.04"}}_request(g,I,l,m,v,y,w){return a(this,void 0,void 0,function*(){if(function(O,W){return(O==="PUT"||O==="DELETE")&&d.isFolder(W)}(g,I))return Promise.reject(`Don't use ${g} on directories!`);let N;return l!==c.default.IMPLIED_FAKE_TOKEN&&(m.Authorization="Bearer "+l),this.rs._emit("wire-busy",{method:g,isFolder:d.isFolder(I)}),D.request(g,I,{body:v,headers:m,responseType:"arraybuffer"}).then(O=>{if(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:g,isFolder:d.isFolder(I),success:!0}),W=O.status,[401,403,404,412].indexOf(W)>=0)return p.default("[WireClient] Error response status",O.status),N=y?R(O.getResponseHeader("ETag")):void 0,O.status===401&&this.rs._emit("error",new h.default),Promise.resolve({statusCode:O.status,revision:N});if(function(Z){return[201,204,304].indexOf(Z)>=0}(O.status)||O.status===200&&g!=="GET")return N=R(O.getResponseHeader("ETag")),p.default("[WireClient] Successful request",N),Promise.resolve({statusCode:O.status,revision:N});{const Z=O.getResponseHeader("Content-Type");N=y?R(O.getResponseHeader("ETag")):O.status===200?w:void 0;const b=function(U){let G,Q="UTF-8";return U&&(G=U.match(/charset=(.+)$/),G&&(Q=G[1])),Q}(Z);return d.shouldBeTreatedAsBinary(O.response,Z)?(p.default("[WireClient] Successful request with unknown or binary mime-type",N),Promise.resolve({statusCode:O.status,body:O.response,contentType:Z,revision:N})):d.getTextFromArrayBuffer(O.response,b).then(U=>(p.default("[WireClient] Successful request",N),Promise.resolve({statusCode:O.status,body:U,contentType:Z,revision:N})))}var W},O=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:g,isFolder:d.isFolder(I),success:!1}),Promise.reject(O)))})}configure(g){if(typeof g!="object")throw new Error("WireClient configure settings parameter should be an object");if(g.userAddress!==void 0&&(this.userAddress=g.userAddress),g.href!==void 0&&(this.href=g.href),g.storageApi!==void 0&&(this.storageApi=g.storageApi),g.token!==void 0&&(this.token=g.token),g.properties!==void 0&&(this.properties=g.properties),typeof this.storageApi=="string"){const I=A[this.storageApi]||5;this.supportsRevs=I>=2}this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,S&&(localStorage[k]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(g,I={}){if(!this.connected)return Promise.reject("not connected (path: "+g+")");const l={};return this.supportsRevs&&I.ifNoneMatch&&(l["If-None-Match"]=B(I.ifNoneMatch)),this._request("GET",this.href+d.cleanPath(g),this.token,l,void 0,this.supportsRevs,this._revisionCache[g]).then(m=>{if(!d.isFolder(g))return Promise.resolve(m);let v={};if(m.body!==void 0)try{m.body=JSON.parse(m.body)}catch{return Promise.reject("Folder description at "+this.href+d.cleanPath(g)+" is not JSON")}if(m.statusCode===200&&typeof m.body=="object"){if(Object.keys(m.body).length===0)m.statusCode=404;else if((y=m.body)["@context"]==="http://remotestorage.io/spec/folder-description"&&typeof y.items=="object"){for(const w in m.body.items)this._revisionCache[g+w]=m.body.items[w].ETag;v=m.body.items}else Object.keys(m.body).forEach(w=>{this._revisionCache[g+w]=m.body[w],v[w]={ETag:m.body[w]}});return m.body=v,Promise.resolve(m)}return Promise.resolve(m);var y})}put(g,I,l,m={}){if(!this.connected)return Promise.reject("not connected (path: "+g+")");!l.match(/charset=/)&&(I instanceof ArrayBuffer||C(I))&&(l+="; charset=binary");const v={"Content-Type":l};return this.supportsRevs&&(m.ifMatch&&(v["If-Match"]=B(m.ifMatch)),m.ifNoneMatch&&(v["If-None-Match"]=B(m.ifNoneMatch))),this._request("PUT",this.href+d.cleanPath(g),this.token,v,I,this.supportsRevs)}delete(g,I={}){if(!this.connected)throw new Error("not connected (path: "+g+")");I||(I={});const l={};return this.supportsRevs&&I.ifMatch&&(l["If-Match"]=B(I.ifMatch)),this._request("DELETE",this.href+d.cleanPath(g),this.token,l,void 0,this.supportsRevs)}static request(g,I,l){return a(this,void 0,void 0,function*(){return typeof fetch=="function"?D._fetchRequest(g,I,l):typeof XMLHttpRequest=="function"?D._xhrRequest(g,I,l):(p.default("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"),Promise.reject("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"))})}static _fetchRequest(g,I,l){let m;const v={};let y;typeof AbortController=="function"&&(y=new AbortController);const w=fetch(I,{method:g,headers:l.headers,body:l.body,signal:y?y.signal:void 0}).then(O=>{switch(p.default("[WireClient fetch]",O),O.headers.forEach((W,Z)=>{v[Z.toUpperCase()]=W}),m={readyState:4,status:O.status,statusText:O.statusText,response:void 0,getResponseHeader:W=>v[W.toUpperCase()]||null,responseType:l.responseType,responseURL:I},l.responseType){case"arraybuffer":return O.arrayBuffer();case"blob":return O.blob();case"json":return O.json();case void 0:case"":case"text":return O.text();default:throw new Error("responseType 'document' is not currently supported using fetch")}}).then(O=>(m.response=O,l.responseType&&l.responseType!=="text"||(m.responseText=O),m)),N=new Promise((O,W)=>{setTimeout(()=>{W("timeout"),y&&y.abort()},f.default.requestTimeout)});return Promise.race([w,N])}static _xhrRequest(g,I,l){return new Promise((m,v)=>{p.default("[WireClient]",g,I);let y=!1;const w=setTimeout(()=>{y=!0,v("timeout")},f.default.requestTimeout),N=new XMLHttpRequest;if(N.open(g,I,!0),l.responseType&&(N.responseType=l.responseType),l.headers)for(const W in l.headers)N.setRequestHeader(W,l.headers[W]);N.onload=()=>{y||(clearTimeout(w),m(N))},N.onerror=W=>{y||(clearTimeout(w),v(W))};let O=l.body;typeof O=="object"&&!C(O)&&O instanceof ArrayBuffer&&(O=new Uint8Array(O)),N.send(O)})}static _rs_init(g){g.remote=new D(g),g.remote.online=!0}static _rs_supported(){return typeof fetch=="function"||typeof XMLHttpRequest=="function"}static _rs_cleanup(){S&&delete localStorage[k]}}D.isArrayBufferView=C,d.applyMixins(D,[u.default]),r.exports=D}).call(this,i(5))},function(r,n,i){class s extends Error{constructor(o){super(),this.name="SyncError",this.message="Sync failed: ",typeof o=="string"?this.message+=o:(this.message+=o.message,this.stack=o.stack,this.originalError=o)}}r.exports=s},function(r,n,i){var s=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};const a=s(i(2)),o=s(i(3)),c=s(i(1)),u=i(0);class h{constructor(){this._updateNodesRunning=!1,this._updateNodesQueued=[]}get(A,C,B){return typeof C=="number"?this.getNodes(u.pathsFromRoot(A)).then(R=>{const D=f(R[A]);return p(R,C)?B(A):D?{statusCode:200,body:D.body||D.itemsMap,contentType:D.contentType}:{statusCode:404}}):this.getNodes([A]).then(R=>{const D=f(R[A]);if(D){if(u.isFolder(A))for(const L in D.itemsMap)D.itemsMap.hasOwnProperty(L)&&D.itemsMap[L]===!1&&delete D.itemsMap[L];return{statusCode:200,body:D.body||D.itemsMap,contentType:D.contentType}}return{statusCode:404}})}put(A,C,B){const R=u.pathsFromRoot(A);return this._updateNodes(R,function(D,L){try{for(let g=0,I=D.length;g<I;g++){const l=D[g];let m,v=L[l];v||(L[l]=v=d(l)),g===0?(m=f(v),v.local={body:C,contentType:B,previousBody:m?m.body:void 0,previousContentType:m?m.contentType:void 0}):v=S(v,D[g-1].substring(l.length))}return L}catch(g){throw c.default("[Cachinglayer] Error during PUT",L,g),g}})}delete(A){const C=u.pathsFromRoot(A);return this._updateNodes(C,function(B,R){for(let D=0,L=B.length;D<L;D++){const g=B[D],I=R[g];let l;if(I)if(D===0)l=f(I),I.local={body:!1,previousBody:l?l.body:void 0,previousContentType:l?l.contentType:void 0};else{I.local||(I.local=u.deepClone(I.common));const m=B[D-1].substring(g.length);if(delete I.local.itemsMap[m],Object.getOwnPropertyNames(I.local.itemsMap).length>0)break}else console.error("Cannot delete non-existing node "+g)}return R})}flush(A){return this._getAllDescendentPaths(A).then(C=>this.getNodes(C)).then(C=>{for(const B in C){const R=C[B];R&&R.common&&R.local&&this._emitChange({path:R.path,origin:"local",oldValue:R.local.body===!1?void 0:R.local.body,newValue:R.common.body===!1?void 0:R.common.body}),C[B]=void 0}return this.setNodes(C)})}_emitChange(A){o.default.changeEvents[A.origin]&&this._emit("change",A)}fireInitial(){o.default.changeEvents.local&&this.forAllNodes(A=>{if(u.isDocument(A.path)){const C=f(A);C&&this._emitChange({path:A.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:C.body,newContentType:C.contentType})}}).then(()=>{this._emit("local-events-done")})}onDiff(A){this.diffHandler=A}migrate(A){return typeof A!="object"||A.common||(A.common={},typeof A.path=="string"?A.path.substr(-1)==="/"&&typeof A.body=="object"&&(A.common.itemsMap=A.body):(A.local||(A.local={}),A.local.body=A.body,A.local.contentType=A.contentType)),A}_updateNodes(A,C){return new Promise((B,R)=>{this._doUpdateNodes(A,C,{resolve:B,reject:R})})}_doUpdateNodes(A,C,B){this._updateNodesRunning?this._updateNodesQueued.push({paths:A,cb:C,promise:B}):(this._updateNodesRunning=!0,this.getNodes(A).then(R=>{const D=u.deepClone(R),L=[];R=C(A,R);for(const g in R){const I=R[g];u.equal(I,D[g])?delete R[g]:u.isDocument(g)&&(u.equal(I.local.body,I.local.previousBody)&&I.local.contentType===I.local.previousContentType||L.push({path:g,origin:"window",oldValue:I.local.previousBody,newValue:I.local.body===!1?void 0:I.local.body,oldContentType:I.local.previousContentType,newContentType:I.local.contentType}),delete I.local.previousBody,delete I.local.previousContentType)}this.setNodes(R).then(()=>{this._emitChangeEvents(L),B.resolve({statusCode:200})})}).then(()=>Promise.resolve(),R=>{B.reject(R)}).then(()=>{this._updateNodesRunning=!1;const R=this._updateNodesQueued.shift();R&&this._doUpdateNodes(R.paths,R.cb,R.promise)}))}_emitChangeEvents(A){for(let C=0,B=A.length;C<B;C++)this._emitChange(A[C]),this.diffHandler&&this.diffHandler(A[C].path)}_getAllDescendentPaths(A){return u.isFolder(A)?this.getNodes([A]).then(C=>{const B=[A],R=f(C[A]),D=Object.keys(R.itemsMap).map(L=>this._getAllDescendentPaths(A+L).then(g=>{for(let I=0,l=g.length;I<l;I++)B.push(g[I])}));return Promise.all(D).then(()=>B)}):Promise.resolve([A])}_getInternals(){return{getLatest:f,makeNode:d,isOutdated:p}}}function f(k){if(typeof k=="object"&&typeof k.path=="string")if(u.isFolder(k.path)){if(k.local&&k.local.itemsMap)return k.local;if(k.common&&k.common.itemsMap)return k.common}else{if(k.local){if(k.local.body&&k.local.contentType)return k.local;if(k.local.body===!1)return}if(k.common&&k.common.body&&k.common.contentType)return k.common;if(k.body&&k.contentType)return{body:k.body,contentType:k.contentType}}}function p(k,A){for(const C in k){if(k[C]&&k[C].remote)return!0;const B=f(k[C]);if(B&&B.timestamp&&new Date().getTime()-B.timestamp<=A)return!1;if(!B)return!0}return!0}function d(k){const A={path:k,common:{}};return u.isFolder(k)&&(A.common.itemsMap={}),A}function S(k,A){return k.common||(k.common={itemsMap:{}}),k.common.itemsMap||(k.common.itemsMap={}),k.local||(k.local=u.deepClone(k.common)),k.local.itemsMap||(k.local.itemsMap=k.common.itemsMap),k.local.itemsMap[A]=!0,k}u.applyMixins(h,[a.default]),r.exports=h},function(r,n,i){r.exports=class{constructor(){this.reset()}static _rs_init(){}get scopes(){return Object.keys(this.scopeModeMap).map(s=>({name:s,mode:this.scopeModeMap[s]}))}get scopeParameter(){return this.scopes.map(s=>`${this._scopeNameForParameter(s)}:${s.mode}`).join(" ")}claim(s,a){if(typeof s!="string"||s.indexOf("/")!==-1||s.length===0)throw new Error("Scope should be a non-empty string without forward slashes");if(!a.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(s),this.scopeModeMap[s]=a}get(s){return this.scopeModeMap[s]}remove(s){const a={};for(const o in this.scopeModeMap)a[o]=this.scopeModeMap[o];this.reset(),delete a[s];for(const o in a)this.claim(o,a[o])}checkPermission(s,a){const o=this.get(s);return o&&(a==="r"||o==="rw")}checkPathPermission(s,a){if(this.checkPermission("*",a))return!0;const o=this._getModuleName(s);return!!this.checkPermission(o,a)}reset(){this.rootPaths=[],this.scopeModeMap={}}_getModuleName(s){if(s[0]!=="/")throw new Error("Path should start with a slash");const a=s.replace(/^\/public/,"").match(/^\/([^/]*)\//);return a?a[1]:"*"}_adjustRootPaths(s){"*"in this.scopeModeMap||s==="*"?this.rootPaths=["/"]:s in this.scopeModeMap||(this.rootPaths.push("/"+s+"/"),this.rootPaths.push("/public/"+s+"/"))}_scopeNameForParameter(s){if(s.name==="*"&&this.storageType){if(this.storageType==="2012.04")return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return s.name}setStorageType(s){this.storageType=s}}},function(r,n,i){var s=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};const a=i(0),o=s(i(1));r.exports=class{constructor(){this.pendingActivations=[],this.reset()}set(c,u){if(typeof c!="string")throw new Error("path should be a string");if(!a.isFolder(c))throw new Error("path should be a folder");if(!u.match(/^(FLUSH|SEEN|ALL)$/))throw new Error("strategy should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[c]=u,u==="ALL"&&(this.activateHandler?this.activateHandler(c):this.pendingActivations.push(c))}enable(c){this.set(c,"ALL")}disable(c){this.set(c,"FLUSH")}onActivate(c){o.default("[Caching] Setting activate handler",c,this.pendingActivations),this.activateHandler=c;for(let u=0;u<this.pendingActivations.length;u++)c(this.pendingActivations[u]);this.pendingActivations=[]}checkPath(c){return this._rootPaths[c]!==void 0?this._rootPaths[c]:c==="/"?"SEEN":this.checkPath(a.containingFolder(c))}reset(){this._rootPaths={}}static _rs_init(){}}},function(r,n,i){var s=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};const a=s(i(7)),o=s(i(8)),c=s(i(2)),u=i(0),h="https://www.googleapis.com",f="remotestorage:googledrive";let p;function d(D){return D.substr(-1)==="/"&&(D=D.substr(0,D.length-1)),decodeURIComponent(D)}function S(D){return D.replace(/[^\/]+\/?$/,"")}function k(D){const L=D.split("/");return D.substr(-1)==="/"?L[L.length-2]+"/":L[L.length-1]}function A(D){return u.cleanPath("/remotestorage/"+D)}function C(D){return D.replace(/^["'](.*)["']$/,"$1")}class B{constructor(L){this._items={},this.maxAge=L,this._items={}}get(L){const g=this._items[L],I=new Date().getTime();return g&&g.t>=I-this.maxAge?g.v:void 0}set(L,g){this._items[L]={v:g,t:new Date().getTime()}}}class R{constructor(L,g){if(this.connected=!1,this.online=!0,this.addEvents(["connected","not-connected"]),this.rs=L,this.clientId=g,this._fileIdCache=new B(300),p=u.localStorageAvailable(),p){const I=u.getJSONFromLocalStorage(f);I&&this.configure(I)}}configure(L){L.userAddress!==void 0&&(this.userAddress=L.userAddress),L.token!==void 0&&(this.token=L.token);const g=function(){p&&localStorage.setItem(f,JSON.stringify({userAddress:this.userAddress,token:this.token}))},I=function(){this.connected=!1,delete this.token,p&&localStorage.removeItem(f)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),g.apply(this)):this.info().then(l=>{this.userAddress=l.user.emailAddress,this._emit("connected"),g.apply(this)}).catch(()=>{I.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))})):I.apply(this)}connect(){this.rs.setBackend("googledrive"),this.rs.authorize({authURL:"https://accounts.google.com/o/oauth2/auth",scope:"https://www.googleapis.com/auth/drive",clientId:this.clientId})}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(L,g){return u.isFolder(L)?this._getFolder(A(L)):this._getFile(A(L),g)}put(L,g,I,l){const m=A(L);function v(y){if(y.status>=200&&y.status<300){const w=JSON.parse(y.responseText),N=C(w.etag);return Promise.resolve({statusCode:200,contentType:w.mimeType,revision:N})}return y.status===412?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+y.status+" ("+y.responseText+")")}return this._getFileId(m).then(y=>y?l&&l.ifNoneMatch==="*"?v({status:412}):this._updateFile(y,m,g,I,l).then(v):this._createFile(m,g,I).then(v))}delete(L,g){const I=A(L);return this._getFileId(I).then(l=>l?this._getMeta(l).then(m=>{let v;return typeof m=="object"&&typeof m.etag=="string"&&(v=C(m.etag)),g&&g.ifMatch&&g.ifMatch!==v?{statusCode:412,revision:v}:this._request("DELETE",h+"/drive/v2/files/"+l,{}).then(y=>y.status===200||y.status===204?{statusCode:200}:Promise.reject("Delete failed: "+y.status+" ("+y.responseText+")"))}):Promise.resolve({statusCode:200}))}info(){return this._request("GET","https://www.googleapis.com/drive/v2/about?fields=user",{}).then(function(L){try{const g=JSON.parse(L.responseText);return Promise.resolve(g)}catch(g){return Promise.reject(g)}})}_updateFile(L,g,I,l,m){const v={mimeType:l},y={"Content-Type":"application/json; charset=UTF-8"};return m&&m.ifMatch&&(y["If-Match"]='"'+m.ifMatch+'"'),this._request("PUT",h+"/upload/drive/v2/files/"+L+"?uploadType=resumable",{body:JSON.stringify(v),headers:y}).then(w=>w.status===412?w:this._request("PUT",w.getResponseHeader("Location"),{body:l.match(/^application\/json/)?JSON.stringify(I):I}))}_createFile(L,g,I){return this._getParentId(L).then(l=>{const m={title:d(k(L)),mimeType:I,parents:[{kind:"drive#fileLink",id:l}]};return this._request("POST",h+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(m),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(v=>this._request("POST",v.getResponseHeader("Location"),{body:I.match(/^application\/json/)?JSON.stringify(g):g}))})}_getFile(L,g){return this._getFileId(L).then(I=>this._getMeta(I).then(l=>{let m;if(typeof l=="object"&&typeof l.etag=="string"&&(m=C(l.etag)),g&&g.ifNoneMatch&&m===g.ifNoneMatch)return Promise.resolve({statusCode:304});if(!l.downloadUrl){if(!l.exportLinks||!l.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:l.mimeType,revision:m});l.mimeType+=";export=text/html",l.downloadUrl=l.exportLinks["text/html"]}return this._request("GET",l.downloadUrl,{responseType:"arraybuffer"}).then(v=>u.getTextFromArrayBuffer(v.response,"UTF-8").then(function(y){let w=y;if(l.mimeType.match(/^application\/json/))try{w=JSON.parse(w)}catch{}else u.shouldBeTreatedAsBinary(y,l.mimeType)&&(w=v.response);return{statusCode:200,body:w,contentType:l.mimeType,revision:m}}))}))}_getFolder(L){return this._getFileId(L).then(g=>{let I,l,m;if(!g)return Promise.resolve({statusCode:404});const v="'"+g+"' in parents";return this._request("GET",h+"/drive/v2/files?q="+encodeURIComponent(v)+"&fields="+encodeURIComponent("items(downloadUrl,etag,fileSize,id,mimeType,title,labels)")+"&maxResults=1000&trashed=false",{}).then(y=>{var w;if(y.status!==200)return Promise.reject("request failed or something: "+y.status);try{I=JSON.parse(y.responseText)}catch{return Promise.reject("non-JSON response from GoogleDrive")}m={};for(const N of I.items)!((w=N.labels)===null||w===void 0)&&w.trashed||(l=C(N.etag),N.mimeType==="application/vnd.google-apps.folder"?(this._fileIdCache.set(L+u.cleanPath(N.title)+"/",N.id),m[N.title+"/"]={ETag:l}):(this._fileIdCache.set(L+u.cleanPath(N.title),N.id),m[N.title]={ETag:l,"Content-Type":N.mimeType,"Content-Length":N.fileSize}));return Promise.resolve({statusCode:200,body:m,contentType:"application/json; charset=UTF-8",revision:void 0})})})}_getParentId(L){const g=S(L);return this._getFileId(g).then(I=>I?Promise.resolve(I):this._createFolder(g))}_createFolder(L){return this._getParentId(L).then(g=>this._request("POST",h+"/drive/v2/files",{body:JSON.stringify({title:d(k(L)),mimeType:"application/vnd.google-apps.folder",parents:[{id:g}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(I=>{const l=JSON.parse(I.responseText);return Promise.resolve(l.id)}))}_getFileId(L){let g;return L==="/"?Promise.resolve("root"):(g=this._fileIdCache.get(L))?Promise.resolve(g):this._getFolder(S(L)).then(()=>(g=this._fileIdCache.get(L),g?Promise.resolve(g):L.substr(-1)==="/"?this._createFolder(L).then(()=>this._getFileId(L)):Promise.resolve()))}_getMeta(L){return this._request("GET",h+"/drive/v2/files/"+L,{}).then(function(g){return g.status===200?Promise.resolve(JSON.parse(g.responseText)):Promise.reject("request (getting metadata for "+L+") failed with status: "+g.status)})}_request(L,g,I){return I.headers||(I.headers={}),I.headers.Authorization="Bearer "+this.token,this.rs._emit("wire-busy",{method:L,isFolder:u.isFolder(g)}),o.default.request.call(this,L,g,I).then(l=>l&&l.status===401?void this.connect():(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:L,isFolder:u.isFolder(g),success:!0}),Promise.resolve(l)),l=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:L,isFolder:u.isFolder(g),success:!1}),Promise.reject(l)))}static _rs_init(L){const g=L.apiKeys.googledrive;var I;g&&(L.googledrive=new R(L,g.clientId),L.backend==="googledrive"&&(L._origRemote=L.remote,L.remote=L.googledrive,(I=L)._origBaseClientGetItemURL||(I._origBaseClientGetItemURL=a.default.prototype.getItemURL,a.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Google Drive yet")})))}static _rs_supported(){return!0}static _rs_cleanup(L){var g;L.setBackend(void 0),L._origRemote&&(L.remote=L._origRemote,delete L._origRemote),(g=L)._origBaseClientGetItemURL&&(a.default.prototype.getItemURL=g._origBaseClientGetItemURL,delete g._origBaseClientGetItemURL)}}u.applyMixins(R,[c.default]),r.exports=R},function(r,n,i){var s=this&&this.__awaiter||function(I,l,m,v){return new(m||(m=Promise))(function(y,w){function N(Z){try{W(v.next(Z))}catch(b){w(b)}}function O(Z){try{W(v.throw(Z))}catch(b){w(b)}}function W(Z){var b;Z.done?y(Z.value):(b=Z.value,b instanceof m?b:new m(function(U){U(b)})).then(N,O)}W((v=v.apply(I,l||[])).next())})},a=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};const o=a(i(2)),c=a(i(8)),u=a(i(7)),h=a(i(26)),f=a(i(9)),p=a(i(4)),d=i(0);let S;const k="remotestorage:dropbox";function A(I){return d.cleanPath("/remotestorage/"+I).replace(/\/$/,"")}function C(I,l){return new RegExp("^"+l.join("\\/")+"(\\/|$)").test(I.error_summary)}function B(I){return I instanceof ArrayBuffer||c.default.isArrayBufferView(I)}class R{constructor(l){if(this.rs=l,this.connected=!1,this.online=!0,this._initialFetchDone=!1,this.addEvents(["connected","not-connected"]),this.clientId=l.apiKeys.dropbox.appKey,this._revCache=new h.default("rev"),this._fetchDeltaCursor=null,this._fetchDeltaPromise=null,this._itemRefs={},S=d.localStorageAvailable(),S){const m=d.getJSONFromLocalStorage(k);m&&this.configure(m),this._itemRefs=d.getJSONFromLocalStorage(k+":shares")||{}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}connect(){this.rs.setBackend("dropbox"),this.token?g(this.rs):this.rs.authorize({authURL:"https://www.dropbox.com/oauth2/authorize",scope:"",clientId:this.clientId})}configure(l){l.userAddress!==void 0&&(this.userAddress=l.userAddress),l.token!==void 0&&(this.token=l.token);const m=function(){S&&localStorage.setItem(k,JSON.stringify({userAddress:this.userAddress,token:this.token}))},v=function(){this.connected=!1,S&&localStorage.removeItem(k)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),m.apply(this)):this.info().then(function(y){this.userAddress=y.email,this._emit("connected"),m.apply(this)}.bind(this)).catch(function(){v.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))}.bind(this))):v.apply(this)}stopWaitingForToken(){this.connected||this._emit("not-connected")}_getFolder(l){const m=this._revCache,v=w=>{let N;if(w.status!==200&&w.status!==409)return Promise.reject("Unexpected response status: "+w.status);try{N=JSON.parse(w.responseText)}catch(W){return Promise.reject(W)}if(w.status===409)return C(N,["path","not_found"])?Promise.resolve({}):Promise.reject(new Error("API returned an error: "+N.error_summary));const O=N.entries.reduce((W,Z)=>{const b=Z[".tag"]==="folder",U=Z.path_lower.split("/").slice(-1)[0]+(b?"/":"");return b?W[U]={ETag:m.get(l+U)}:(W[U]={ETag:Z.rev},this._revCache.set(l+U,Z.rev)),W},{});return N.has_more?y(N.cursor).then(function(W){return Object.assign(O,W)}):Promise.resolve(O)},y=w=>{const N={body:{cursor:w}};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder/continue",N).then(v)};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder",{body:{path:A(l)}}).then(v).then(function(w){return Promise.resolve({statusCode:200,body:w,contentType:"application/json; charset=UTF-8",revision:m.get(l)})})}get(l,m){if(!this.connected)return Promise.reject("not connected (path: "+l+")");const v=this._revCache.get(l);if(v===null)return Promise.resolve({statusCode:404});if(m&&m.ifNoneMatch){if(!this._initialFetchDone)return this.fetchDelta().then(()=>this.get(l,m));if(v&&v===m.ifNoneMatch)return Promise.resolve({statusCode:304})}if(l.substr(-1)==="/")return this._getFolder(l);const y={headers:{"Dropbox-API-Arg":JSON.stringify({path:A(l)})},responseType:"arraybuffer"};return m&&m.ifNoneMatch&&(y.headers["If-None-Match"]=m.ifNoneMatch),this._request("GET","https://content.dropboxapi.com/2/files/download",y).then(w=>{const N=w.status;let O,W,Z,b;return N!==200&&N!==409?Promise.resolve({statusCode:N}):(O=w.getResponseHeader("Dropbox-API-Result"),d.getTextFromArrayBuffer(w.response,"UTF-8").then(U=>{W=U,N===409&&(O=W);try{O=JSON.parse(O)}catch(G){return Promise.reject(G)}if(N===409)return C(O,["path","not_found"])?{statusCode:404}:Promise.reject(new Error('API error while downloading file ("'+l+'"): '+O.error_summary));if(Z=w.getResponseHeader("Content-Type"),b=O.rev,this._revCache.set(l,b),this._shareIfNeeded(l),d.shouldBeTreatedAsBinary(U,Z))W=w.response;else try{W=JSON.parse(W),Z="application/json; charset=UTF-8"}catch{}return{statusCode:N,body:W,contentType:Z,revision:b}}))})}put(l,m,v,y){if(!this.connected)throw new Error("not connected (path: "+l+")");const w=this._revCache.get(l);if(y&&y.ifMatch&&w&&w!==y.ifMatch)return Promise.resolve({statusCode:412,revision:w});if(y&&y.ifNoneMatch==="*"&&w&&w!=="rev")return Promise.resolve({statusCode:412,revision:w});if(!v.match(/charset=/)&&B(m)&&(v+="; charset=binary"),m.length>157286400)return Promise.reject(new Error("Cannot upload file larger than 150MB"));let N;const O=y&&(y.ifMatch||y.ifNoneMatch==="*"),W={body:m,contentType:v,path:l};return N=O?this._getMetadata(l).then(Z=>y&&y.ifNoneMatch==="*"&&Z||y&&y.ifMatch&&Z&&Z.rev!==y.ifMatch?Promise.resolve({statusCode:412,revision:Z.rev}):this._uploadSimple(W)):this._uploadSimple(W),N.then(Z=>(this._shareIfNeeded(l),Z))}delete(l,m){if(!this.connected)throw new Error("not connected (path: "+l+")");const v=this._revCache.get(l);return m&&m.ifMatch&&v&&m.ifMatch!==v?Promise.resolve({statusCode:412,revision:v}):m&&m.ifMatch?this._getMetadata(l).then(y=>m&&m.ifMatch&&y&&y.rev!==m.ifMatch?Promise.resolve({statusCode:412,revision:y.rev}):this._deleteSimple(l)):this._deleteSimple(l)}_shareIfNeeded(l){l.match(/^\/public\/.*[^/]$/)&&this._itemRefs[l]===void 0&&this.share(l)}share(l){const m={body:{path:A(l)}};return this._request("POST","https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings",m).then(v=>{if(v.status!==200&&v.status!==409)return Promise.reject(new Error("Invalid response status:"+v.status));let y;try{y=JSON.parse(v.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+v.responseText))}return v.status===409?C(y,["shared_link_already_exists"])?this._getSharedLink(l):Promise.reject(new Error("API error: "+y.error_summary)):Promise.resolve(y.url)}).then(v=>(this._itemRefs[l]=v,S&&localStorage.setItem(k+":shares",JSON.stringify(this._itemRefs)),Promise.resolve(v)),v=>(v.message='Sharing Dropbox file or folder ("'+l+'") failed: '+v.message,Promise.reject(v)))}info(){return this._request("POST","https://api.dropboxapi.com/2/users/get_current_account",{}).then(function(l){let m=l.responseText;try{m=JSON.parse(m)}catch{return Promise.reject(new Error("Could not query current account info: Invalid API response: "+m))}return Promise.resolve({email:m.email})})}_request(l,m,v){return v.headers||(v.headers={}),v.headers.Authorization="Bearer "+this.token,typeof v.body!="object"||B(v.body)||(v.body=JSON.stringify(v.body),v.headers["Content-Type"]="application/json; charset=UTF-8"),this.rs._emit("wire-busy",{method:l,isFolder:d.isFolder(m)}),c.default.request.call(this,l,m,v).then(y=>y&&y.status===503?(this.online&&(this.online=!1,this.rs._emit("network-offline")),setTimeout(this._request(l,m,v),3210)):(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:l,isFolder:d.isFolder(m),success:!0}),Promise.resolve(y)),y=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:l,isFolder:d.isFolder(m),success:!1}),Promise.reject(y)))}fetchDelta(...l){if(this._fetchDeltaPromise)return this._fetchDeltaPromise;const m=v=>{let y,w="https://api.dropboxapi.com/2/files/list_folder";return typeof v=="string"?(w+="/continue",y={cursor:v}):y={path:"/remotestorage",recursive:!0,include_deleted:!0},this._request("POST",w,{body:y}).then(N=>{if(N.status===401)return this.rs._emit("error",new p.default),Promise.resolve(l);if(N.status!==200&&N.status!==409)return Promise.reject(new Error("Invalid response status: "+N.status));let O;try{O=JSON.parse(N.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+N.responseText))}if(N.status===409){if(!C(O,["path","not_found"]))return Promise.reject(new Error("API returned an error: "+O.error_summary));O={cursor:null,entries:[],has_more:!1}}if(v||this._revCache.deactivatePropagation(),O.entries.forEach(W=>{const Z=W.path_lower.substr(14);W[".tag"]==="deleted"?(this._revCache.delete(Z),this._revCache.delete(Z+"/")):W[".tag"]==="file"&&this._revCache.set(Z,W.rev)}),this._fetchDeltaCursor=O.cursor,O.has_more)return m(O.cursor);this._revCache.activatePropagation(),this._initialFetchDone=!0}).catch(N=>N==="timeout"||N instanceof ProgressEvent?Promise.resolve():Promise.reject(N))};return this._fetchDeltaPromise=m(this._fetchDeltaCursor).catch(v=>(typeof v=="object"&&"message"in v?v.message="Dropbox: fetchDelta: "+v.message:v="Dropbox: fetchDelta: "+v,this._fetchDeltaPromise=null,Promise.reject(v))).then(()=>(this._fetchDeltaPromise=null,Promise.resolve(l))),this._fetchDeltaPromise}_getMetadata(l){const m={path:A(l)};return this._request("POST","https://api.dropboxapi.com/2/files/get_metadata",{body:m}).then(v=>{if(v.status!==200&&v.status!==409)return Promise.reject(new Error("Invalid response status:"+v.status));let y;try{y=JSON.parse(v.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+v.responseText))}return v.status===409?C(y,["path","not_found"])?Promise.resolve():Promise.reject(new Error("API error: "+y.error_summary)):Promise.resolve(y)}).then(void 0,v=>(v.message='Could not load metadata for file or folder ("'+l+'"): '+v.message,Promise.reject(v)))}_uploadSimple(l){const m={path:A(l.path),mode:{".tag":"overwrite",update:void 0},mute:!0};return l.ifMatch&&(m.mode={".tag":"update",update:l.ifMatch}),this._request("POST","https://content.dropboxapi.com/2/files/upload",{body:l.body,headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":JSON.stringify(m)}}).then(v=>{if(v.status!==200&&v.status!==409)return Promise.resolve({statusCode:v.status});let y=v.responseText;try{y=JSON.parse(y)}catch{return Promise.reject(new Error("Invalid API result: "+y))}return v.status===409?C(y,["path","conflict"])?this._getMetadata(l.path).then(function(w){return Promise.resolve({statusCode:412,revision:w.rev})}):Promise.reject(new Error("API error: "+y.error_summary)):(this._revCache.set(l.path,y.rev),Promise.resolve({statusCode:v.status,revision:y.rev}))})}_deleteSimple(l){const m={path:A(l)};return this._request("POST","https://api.dropboxapi.com/2/files/delete",{body:m}).then(v=>{if(v.status!==200&&v.status!==409)return Promise.resolve({statusCode:v.status});let y=v.responseText;try{y=JSON.parse(y)}catch{return Promise.reject(new Error("Invalid response body: "+y))}return v.status===409?C(y,["path_lookup","not_found"])?Promise.resolve({statusCode:404}):Promise.reject(new Error("API error: "+y.error_summary)):Promise.resolve({statusCode:200})}).then(v=>(v.statusCode!==200&&v.statusCode!==404||(this._revCache.delete(l),delete this._itemRefs[l]),Promise.resolve(v)),v=>(v.message='Could not delete Dropbox file or folder ("'+l+'"): '+v.message,Promise.reject(v)))}_getSharedLink(l){return s(this,void 0,void 0,function*(){const m={body:{path:A(l),direct_only:!0}};return this._request("POST","https://api.dropbox.com/2/sharing/list_shared_links",m).then(v=>{if(v.status!==200&&v.status!==409)return Promise.reject(new Error("Invalid response status: "+v.status));let y;try{y=JSON.parse(v.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+v.responseText))}return v.status===409?Promise.reject(new Error("API error: "+v.error_summary)):y.links.length?Promise.resolve(y.links[0].url):Promise.reject(new Error("No links returned"))},v=>(v.message='Could not get link to a shared file or folder ("'+l+'"): '+v.message,Promise.reject(v)))})}static _rs_init(l){S=d.localStorageAvailable(),l.apiKeys.dropbox&&(l.dropbox=new R(l)),l.backend==="dropbox"&&g(l)}static _rs_supported(){return!0}static _rs_cleanup(l){(function(m){(function(v){v._origRemote&&(v.remote=v._origRemote,delete v._origRemote)})(m),function(v){!v._dropboxOrigSync||(v.sync.sync=v._dropboxOrigSync,delete v._dropboxOrigSync)}(m),function(v){!v._origBaseClientGetItemURL||(u.default.prototype.getItemURL=v._origBaseClientGetItemURL,delete v._origBaseClientGetItemURL)}(m),L(m)})(l),S&&localStorage.removeItem(k),l.setBackend(void 0)}}function D(I,...l){I._dropboxOrigSync||(I._dropboxOrigSync=I.sync.sync.bind(I.sync),I.sync.sync=function(){return this.dropbox.fetchDelta(I,...l).then(I._dropboxOrigSync,function(m){I._emit("error",new f.default(m)),I._emit("sync-done")})}.bind(I))}function L(I){I._dropboxOrigSyncCycle&&(I.syncCycle=I._dropboxOrigSyncCycle,delete I._dropboxOrigSyncCycle)}function g(I){(function(l){l._origRemote||(l._origRemote=l.remote,l.remote=l.dropbox)})(I),I.sync?D(I):function(l,...m){l._dropboxOrigSyncCycle||(l._dropboxOrigSyncCycle=l.syncCycle,l.syncCycle=()=>{if(!l.sync)throw new Error("expected sync to be initialized by now");D(l),l._dropboxOrigSyncCycle(l,...m),L(l)})}(I),function(l){l._origBaseClientGetItemURL||(l._origBaseClientGetItemURL=u.default.prototype.getItemURL,u.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Dropbox yet")})}(I)}d.applyMixins(R,[o.default]),r.exports=R},function(r,n,i){var s=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};const a=s(i(27)),o=s(i(1)),c=i(0);let u,h,f={};const p=function(d){return new Promise((S,k)=>d in f?S(f[d]):new a.default({tls_only:!1,uri_fallback:!0,request_timeout:5e3}).lookup(d,function(A,C){if(A)return k(A);if(typeof C.idx.links.remotestorage!="object"||typeof C.idx.links.remotestorage.length!="number"||C.idx.links.remotestorage.length<=0)return o.default("[Discover] WebFinger record for "+d+" does not have remotestorage defined in the links section ",JSON.stringify(C.json)),k("WebFinger record for "+d+" does not have remotestorage defined in the links section.");const B=C.idx.links.remotestorage[0],R=B.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||B.properties["auth-endpoint"],D=B.properties["http://remotestorage.io/spec/version"]||B.type;return f[d]={href:B.href,storageApi:D,authURL:R,properties:B.properties},h&&(localStorage["remotestorage:discover"]=JSON.stringify({cache:f})),S(f[d])}))};(p.DiscoveryError=function(d){this.name="DiscoveryError",this.message=d,this.stack=new Error().stack}).prototype=Object.create(Error.prototype),p.DiscoveryError.prototype.constructor=p.DiscoveryError,p._rs_init=function(){if(h=c.localStorageAvailable(),h)try{f=JSON.parse(localStorage["remotestorage:discover"]).cache}catch{}},p._rs_supported=function(){return u=Object.prototype.hasOwnProperty.call(c.globalContext,"XMLHttpRequest"),u},p._rs_cleanup=function(){h&&delete localStorage["remotestorage:discover"]},r.exports=p},function(r,n,i){const s=(this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}})(i(2)),a=i(0);class o{constructor(){this.addEvents(["background","foreground"]),this.mode=typeof window!="undefined"?"browser":"node",this.mode==="browser"&&(this.setBrowserPrefixedNames(),document.addEventListener(this.visibilityChangeEvent,this.setVisibility.bind(this),!1),this.setVisibility())}setBrowserPrefixedNames(){this.mode==="browser"&&(document.hidden!==void 0?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):document.mozHidden!==void 0?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange"):document.msHidden!==void 0?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):document.webkitHidden!==void 0&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"))}setVisibility(){document[this.hiddenProperty]?this.goBackground():this.goForeground()}isBrowser(){return this.mode==="browser"}isNode(){return this.mode==="node"}goBackground(){this._emit("background")}goForeground(){this._emit("foreground")}static _rs_init(){}static _rs_cleanup(){}}a.applyMixins(o,[s.default]),r.exports=o},function(r,n,i){r.exports=i(18)},function(r,n,i){var s=this&&this.__createBinding||(Object.create?function(O,W,Z,b){b===void 0&&(b=Z),Object.defineProperty(O,b,{enumerable:!0,get:function(){return W[Z]}})}:function(O,W,Z,b){b===void 0&&(b=Z),O[b]=W[Z]}),a=this&&this.__setModuleDefault||(Object.create?function(O,W){Object.defineProperty(O,"default",{enumerable:!0,value:W})}:function(O,W){O.default=W}),o=this&&this.__importStar||function(O){if(O&&O.__esModule)return O;var W={};if(O!=null)for(var Z in O)Z!=="default"&&Object.hasOwnProperty.call(O,Z)&&s(W,O,Z);return a(W,O),W},c=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};const u=c(i(3)),h=c(i(1)),f=i(0),p=c(i(11)),d=c(i(6)),S=c(i(7)),k=c(i(12)),A=c(i(2)),C=c(i(13)),B=c(i(14)),R=c(i(15)),D=c(i(9)),L=c(i(4)),g=c(i(29)),I=o(i(0)),l=f.getGlobalContext();let m;function v(O){return O.statusCode!==403&&O.statusCode!==401||this._emit("error",new L.default),Promise.resolve(O)}function y(O){return typeof O=="number"&&O>=2e3&&O<=36e5}class w{constructor(W){this._pending=[],this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this._init=g.default.loadFeatures,this.features=g.default.features,this.loadFeature=g.default.loadFeature,this.featureSupported=g.default.featureSupported,this.featureDone=g.default.featureDone,this.featuresDone=g.default.featuresDone,this.featuresLoaded=g.default.featuresLoaded,this.featureInitialized=g.default.featureInitialized,this.featureFailed=g.default.featureFailed,this.hasFeature=g.default.hasFeature,this._setCachingModule=g.default._setCachingModule,this._collectCleanupFunctions=g.default._collectCleanupFunctions,this._fireReady=g.default._fireReady,this.initFeature=g.default.initFeature,typeof W=="object"&&f.extend(u.default,W),this.addEvents(["ready","authing","connecting","connected","disconnected","not-connected","conflict","error","features-loaded","sync-interval-change","sync-req-done","sync-done","wire-busy","wire-done","network-offline","network-online"]),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")}),m=f.localStorageAvailable(),m&&(this.apiKeys=f.getJSONFromLocalStorage("remotestorage:api-keys")||{},this.setBackend(localStorage.getItem("remotestorage:backend")||"remotestorage"));const Z=this.on;this.on=function(b,U){if(this._allLoaded)switch(b){case"features-loaded":setTimeout(U,0);break;case"ready":this.remote&&setTimeout(U,0);break;case"connected":this.remote&&this.remote.connected&&setTimeout(U,0);break;case"not-connected":this.remote&&!this.remote.connected&&setTimeout(U,0)}return Z.call(this,b,U)},this._init(),this.fireInitial=function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}.bind(this),this.on("ready",this.fireInitial.bind(this)),this.loadModules()}get connected(){return this.remote.connected}loadModules(){u.default.modules.forEach(this.addModule.bind(this))}authorize(W){if(this.access.setStorageType(this.remote.storageApi),W.scope===void 0&&(W.scope=this.access.scopeParameter),l.cordova)W.redirectUri=u.default.cordovaRedirectUri;else{const Z=d.default.getLocation();let b=Z.origin;Z.pathname!=="/"&&(b+=Z.pathname),W.redirectUri=b}W.clientId===void 0&&(W.clientId=W.redirectUri.match(/^(https?:\/\/[^/]+)/)[0]),d.default.authorize(this,W)}impliedauth(W,Z){W=W||this.remote.storageApi,Z=Z||String(document.location),h.default("ImpliedAuth proceeding due to absent authURL; storageApi = "+W+" redirectUri = "+Z),this.remote.configure({token:d.default.IMPLIED_FAKE_TOKEN}),document.location.href=Z}connect(W,Z){if(this.setBackend("remotestorage"),W.indexOf("@")<0&&!W.match(/^(https?:\/\/)?[^\s\/$\.?#]+\.[^\s]*$/))return void this._emit("error",new w.DiscoveryError("Not a valid user address or URL."));if(W.indexOf("@")<0&&!W.match(/^https?:\/\//)&&(W="https://"+W),l.cordova){if(typeof u.default.cordovaRedirectUri!="string")return void this._emit("error",new w.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));if(!l.cordova.InAppBrowser)return void this._emit("error",new w.DiscoveryError("Please include the InAppBrowser Cordova plugin to enable OAuth"))}this.remote.configure({userAddress:W}),this._emit("connecting");const b=setTimeout(()=>{this._emit("error",new w.DiscoveryError("No storage information found for this user address."))},u.default.discoveryTimeout);R.default(W).then(U=>{if(clearTimeout(b),this._emit("authing"),U.userAddress=W,this.remote.configure(U),!this.remote.connected)if(U.authURL)if(Z===void 0)this.authorize({authURL:U.authURL});else{if(typeof Z!="string")throw new Error("Supplied bearer token must be a string");h.default("Skipping authorization sequence and connecting with known token"),this.remote.configure({token:Z})}else this.impliedauth()},()=>{clearTimeout(b),this._emit("error",new w.DiscoveryError("No storage information found for this user address."))})}reconnect(){this.remote.configure({token:null}),this.backend==="remotestorage"?this.connect(this.remote.userAddress):this.remote.connect()}disconnect(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")});const W=this._cleanups.length;let Z=0;const b=()=>{Z++,Z>=W&&(this._init(),this._emit("disconnected"))};W>0?this._cleanups.forEach(U=>{const G=U(this);typeof G=="object"&&typeof G.then=="function"?G.then(b):b()}):b()}setBackend(W){this.backend=W,m&&(W?localStorage.setItem("remotestorage:backend",W):localStorage.removeItem("remotestorage:backend"))}onChange(W,Z){this._pathHandlers.change[W]||(this._pathHandlers.change[W]=[]),this._pathHandlers.change[W].push(Z)}enableLog(){u.default.logging=!0}disableLog(){u.default.logging=!1}log(...W){h.default.apply(w,W)}setApiKeys(W){const Z=[N.GOOGLE,N.DROPBOX];if(typeof W!="object"||!Object.keys(W).every(b=>Z.includes(b)))return console.error("setApiKeys() was called with invalid arguments"),!1;Object.keys(W).forEach(b=>{const U=W[b];if(U){switch(b){case N.DROPBOX:this.apiKeys[N.DROPBOX]={appKey:U},this.dropbox!==void 0&&this.dropbox.clientId===U||B.default._rs_init(this);break;case N.GOOGLE:this.apiKeys[N.GOOGLE]={clientId:U},this.googledrive!==void 0&&this.googledrive.clientId===U||C.default._rs_init(this)}return!0}delete this.apiKeys[b]}),m&&localStorage.setItem("remotestorage:api-keys",JSON.stringify(this.apiKeys))}setCordovaRedirectUri(W){if(typeof W!="string"||!W.match(/http(s)?:\/\//))throw new Error("Cordova redirect URI must be a URI string");u.default.cordovaRedirectUri=W}_setGPD(W,Z){function b(U){return function(...G){return U.apply(Z,G).then(v.bind(this))}}this.get=b(W.get),this.put=b(W.put),this.delete=b(W.delete)}_pendingGPD(W){return(...Z)=>{const b=Array.prototype.slice.call(Z);return new Promise((U,G)=>{this._pending.push({method:W,args:b,promise:{resolve:U,reject:G}})})}}_processPending(){this._pending.forEach(W=>{try{this[W.method](...W.args).then(W.promise.resolve,W.promise.reject)}catch(Z){W.promise.reject(Z)}}),this._pending=[]}_bindChange(W){W.on("change",this._dispatchEvent.bind(this,"change"))}_dispatchEvent(W,Z){Object.keys(this._pathHandlers[W]).forEach(b=>{const U=b.length;Z.path.substr(0,U)===b&&this._pathHandlers[W][b].forEach(G=>{const Q={};for(const it in Z)Q[it]=Z[it];Q.relativePath=Z.path.replace(new RegExp("^"+b),"");try{G(Q)}catch(it){console.error("'change' handler failed: ",it,it.stack),this._emit("error",it)}})})}scope(W){if(typeof W!="string")throw"Argument 'path' of baseClient.scope must be a string";return this.access.checkPathPermission(W,"r")||console.warn("WARNING: Please use remoteStorage.access.claim() to ask for access permissions first: https://remotestoragejs.readthedocs.io/en/latest/js-api/access.html#claim"),new S.default(this,W)}getSyncInterval(){return u.default.syncInterval}setSyncInterval(W){if(!y(W))throw W+" is not a valid sync interval";const Z=u.default.syncInterval;u.default.syncInterval=W,this._emit("sync-interval-change",{oldValue:Z,newValue:W})}getBackgroundSyncInterval(){return u.default.backgroundSyncInterval}setBackgroundSyncInterval(W){if(!y(W))throw W+" is not a valid sync interval";const Z=u.default.backgroundSyncInterval;u.default.backgroundSyncInterval=W,this._emit("sync-interval-change",{oldValue:Z,newValue:W})}getCurrentSyncInterval(){return u.default.isBackground?u.default.backgroundSyncInterval:u.default.syncInterval}getRequestTimeout(){return u.default.requestTimeout}setRequestTimeout(W){if(typeof W!="number")throw W+" is not a valid request timeout";u.default.requestTimeout=W}syncCycle(){this.sync&&!this.sync.stopped&&(this.on("sync-done",()=>{this.sync&&!this.sync.stopped&&(this._syncTimer&&(clearTimeout(this._syncTimer),this._syncTimer=void 0),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}),this.sync.sync())}startSync(){return u.default.cache?(this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()):(console.warn("Nothing to sync, because caching is disabled."),Promise.resolve())}stopSync(){clearTimeout(this._syncTimer),this._syncTimer=void 0,this.sync?this.sync.stopped=!0:this.syncStopped=!0}addModule(W){const Z=W.name,b=W.builder;if(Object.defineProperty(this,Z,{configurable:!0,get:function(){const U=this._loadModule(Z,b);return Object.defineProperty(this,Z,{value:U}),U}}),Z.indexOf("-")!==-1){const U=Z.replace(/\-[a-z]/g,function(G){return G[1].toUpperCase()});Object.defineProperty(this,U,{get:function(){return this[Z]}})}}_loadModule(W,Z){if(Z)return Z(new S.default(this,"/"+W+"/"),new S.default(this,"/public/"+W+"/")).exports;throw"Unknown module: "+W}}var N;w.Authorize=d.default,w.SyncError=D.default,w.Unauthorized=L.default,w.DiscoveryError=R.default.DiscoveryError,w.util=I,Object.defineProperty(w.prototype,"access",{get:function(){const O=new p.default;return Object.defineProperty(this,"access",{value:O}),O},configurable:!0}),Object.defineProperty(w.prototype,"caching",{configurable:!0,get:function(){const O=new k.default;return Object.defineProperty(this,"caching",{value:O}),O}}),f.applyMixins(w,[A.default]),function(O){O.GOOGLE="googledrive",O.DROPBOX="dropbox"}(N||(N={})),r.exports=w},function(r,n,i){(function(s){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var a=i(20),o=i(21),c=i(22);function u(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function h(P,T){if(u()<T)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(P=new Uint8Array(T)).__proto__=f.prototype:(P===null&&(P=new f(T)),P.length=T),P}function f(P,T,z){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(P,T,z);if(typeof P=="number"){if(typeof T=="string")throw new Error("If encoding is specified then the first argument must be a string");return S(this,P)}return p(this,P,T,z)}function p(P,T,z,E){if(typeof T=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&T instanceof ArrayBuffer?function(_,M,K,X){if(M.byteLength,K<0||M.byteLength<K)throw new RangeError("'offset' is out of bounds");if(M.byteLength<K+(X||0))throw new RangeError("'length' is out of bounds");return M=K===void 0&&X===void 0?new Uint8Array(M):X===void 0?new Uint8Array(M,K):new Uint8Array(M,K,X),f.TYPED_ARRAY_SUPPORT?(_=M).__proto__=f.prototype:_=k(_,M),_}(P,T,z,E):typeof T=="string"?function(_,M,K){if(typeof K=="string"&&K!==""||(K="utf8"),!f.isEncoding(K))throw new TypeError('"encoding" must be a valid string encoding');var X=0|C(M,K),J=(_=h(_,X)).write(M,K);return J!==X&&(_=_.slice(0,J)),_}(P,T,z):function(_,M){if(f.isBuffer(M)){var K=0|A(M.length);return(_=h(_,K)).length===0||M.copy(_,0,0,K),_}if(M){if(typeof ArrayBuffer!="undefined"&&M.buffer instanceof ArrayBuffer||"length"in M)return typeof M.length!="number"||(X=M.length)!=X?h(_,0):k(_,M);if(M.type==="Buffer"&&c(M.data))return k(_,M.data)}var X;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(P,T)}function d(P){if(typeof P!="number")throw new TypeError('"size" argument must be a number');if(P<0)throw new RangeError('"size" argument must not be negative')}function S(P,T){if(d(T),P=h(P,T<0?0:0|A(T)),!f.TYPED_ARRAY_SUPPORT)for(var z=0;z<T;++z)P[z]=0;return P}function k(P,T){var z=T.length<0?0:0|A(T.length);P=h(P,z);for(var E=0;E<z;E+=1)P[E]=255&T[E];return P}function A(P){if(P>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|P}function C(P,T){if(f.isBuffer(P))return P.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(P)||P instanceof ArrayBuffer))return P.byteLength;typeof P!="string"&&(P=""+P);var z=P.length;if(z===0)return 0;for(var E=!1;;)switch(T){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":case void 0:return F(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return x(P).length;default:if(E)return F(P).length;T=(""+T).toLowerCase(),E=!0}}function B(P,T,z){var E=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0)<=(T>>>=0))return"";for(P||(P="utf8");;)switch(P){case"hex":return Z(this,T,z);case"utf8":case"utf-8":return N(this,T,z);case"ascii":return O(this,T,z);case"latin1":case"binary":return W(this,T,z);case"base64":return w(this,T,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,T,z);default:if(E)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),E=!0}}function R(P,T,z){var E=P[T];P[T]=P[z],P[z]=E}function D(P,T,z,E,_){if(P.length===0)return-1;if(typeof z=="string"?(E=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,isNaN(z)&&(z=_?0:P.length-1),z<0&&(z=P.length+z),z>=P.length){if(_)return-1;z=P.length-1}else if(z<0){if(!_)return-1;z=0}if(typeof T=="string"&&(T=f.from(T,E)),f.isBuffer(T))return T.length===0?-1:L(P,T,z,E,_);if(typeof T=="number")return T&=255,f.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?_?Uint8Array.prototype.indexOf.call(P,T,z):Uint8Array.prototype.lastIndexOf.call(P,T,z):L(P,[T],z,E,_);throw new TypeError("val must be string, number or Buffer")}function L(P,T,z,E,_){var M,K=1,X=P.length,J=T.length;if(E!==void 0&&((E=String(E).toLowerCase())==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(P.length<2||T.length<2)return-1;K=2,X/=2,J/=2,z/=2}function nt(et,rt){return K===1?et[rt]:et.readUInt16BE(rt*K)}if(_){var pt=-1;for(M=z;M<X;M++)if(nt(P,M)===nt(T,pt===-1?0:M-pt)){if(pt===-1&&(pt=M),M-pt+1===J)return pt*K}else pt!==-1&&(M-=M-pt),pt=-1}else for(z+J>X&&(z=X-J),M=z;M>=0;M--){for(var gt=!0,Et=0;Et<J;Et++)if(nt(P,M+Et)!==nt(T,Et)){gt=!1;break}if(gt)return M}return-1}function g(P,T,z,E){z=Number(z)||0;var _=P.length-z;E?(E=Number(E))>_&&(E=_):E=_;var M=T.length;if(M%2!=0)throw new TypeError("Invalid hex string");E>M/2&&(E=M/2);for(var K=0;K<E;++K){var X=parseInt(T.substr(2*K,2),16);if(isNaN(X))return K;P[z+K]=X}return K}function I(P,T,z,E){return Y(F(T,P.length-z),P,z,E)}function l(P,T,z,E){return Y(function(_){for(var M=[],K=0;K<_.length;++K)M.push(255&_.charCodeAt(K));return M}(T),P,z,E)}function m(P,T,z,E){return l(P,T,z,E)}function v(P,T,z,E){return Y(x(T),P,z,E)}function y(P,T,z,E){return Y(function(_,M){for(var K,X,J,nt=[],pt=0;pt<_.length&&!((M-=2)<0);++pt)K=_.charCodeAt(pt),X=K>>8,J=K%256,nt.push(J),nt.push(X);return nt}(T,P.length-z),P,z,E)}function w(P,T,z){return T===0&&z===P.length?a.fromByteArray(P):a.fromByteArray(P.slice(T,z))}function N(P,T,z){z=Math.min(P.length,z);for(var E=[],_=T;_<z;){var M,K,X,J,nt=P[_],pt=null,gt=nt>239?4:nt>223?3:nt>191?2:1;if(_+gt<=z)switch(gt){case 1:nt<128&&(pt=nt);break;case 2:(192&(M=P[_+1]))==128&&(J=(31&nt)<<6|63&M)>127&&(pt=J);break;case 3:M=P[_+1],K=P[_+2],(192&M)==128&&(192&K)==128&&(J=(15&nt)<<12|(63&M)<<6|63&K)>2047&&(J<55296||J>57343)&&(pt=J);break;case 4:M=P[_+1],K=P[_+2],X=P[_+3],(192&M)==128&&(192&K)==128&&(192&X)==128&&(J=(15&nt)<<18|(63&M)<<12|(63&K)<<6|63&X)>65535&&J<1114112&&(pt=J)}pt===null?(pt=65533,gt=1):pt>65535&&(pt-=65536,E.push(pt>>>10&1023|55296),pt=56320|1023&pt),E.push(pt),_+=gt}return function(Et){var et=Et.length;if(et<=4096)return String.fromCharCode.apply(String,Et);for(var rt="",ot=0;ot<et;)rt+=String.fromCharCode.apply(String,Et.slice(ot,ot+=4096));return rt}(E)}n.Buffer=f,n.SlowBuffer=function(P){return+P!=P&&(P=0),f.alloc(+P)},n.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=s.TYPED_ARRAY_SUPPORT!==void 0?s.TYPED_ARRAY_SUPPORT:function(){try{var P=new Uint8Array(1);return P.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},P.foo()===42&&typeof P.subarray=="function"&&P.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=u(),f.poolSize=8192,f._augment=function(P){return P.__proto__=f.prototype,P},f.from=function(P,T,z){return p(null,P,T,z)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(P,T,z){return function(E,_,M,K){return d(_),_<=0?h(E,_):M!==void 0?typeof K=="string"?h(E,_).fill(M,K):h(E,_).fill(M):h(E,_)}(null,P,T,z)},f.allocUnsafe=function(P){return S(null,P)},f.allocUnsafeSlow=function(P){return S(null,P)},f.isBuffer=function(P){return!(P==null||!P._isBuffer)},f.compare=function(P,T){if(!f.isBuffer(P)||!f.isBuffer(T))throw new TypeError("Arguments must be Buffers");if(P===T)return 0;for(var z=P.length,E=T.length,_=0,M=Math.min(z,E);_<M;++_)if(P[_]!==T[_]){z=P[_],E=T[_];break}return z<E?-1:E<z?1:0},f.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(P,T){if(!c(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return f.alloc(0);var z;if(T===void 0)for(T=0,z=0;z<P.length;++z)T+=P[z].length;var E=f.allocUnsafe(T),_=0;for(z=0;z<P.length;++z){var M=P[z];if(!f.isBuffer(M))throw new TypeError('"list" argument must be an Array of Buffers');M.copy(E,_),_+=M.length}return E},f.byteLength=C,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var T=0;T<P;T+=2)R(this,T,T+1);return this},f.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var T=0;T<P;T+=4)R(this,T,T+3),R(this,T+1,T+2);return this},f.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var T=0;T<P;T+=8)R(this,T,T+7),R(this,T+1,T+6),R(this,T+2,T+5),R(this,T+3,T+4);return this},f.prototype.toString=function(){var P=0|this.length;return P===0?"":arguments.length===0?N(this,0,P):B.apply(this,arguments)},f.prototype.equals=function(P){if(!f.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||f.compare(this,P)===0},f.prototype.inspect=function(){var P="",T=n.INSPECT_MAX_BYTES;return this.length>0&&(P=this.toString("hex",0,T).match(/.{2}/g).join(" "),this.length>T&&(P+=" ... ")),"<Buffer "+P+">"},f.prototype.compare=function(P,T,z,E,_){if(!f.isBuffer(P))throw new TypeError("Argument must be a Buffer");if(T===void 0&&(T=0),z===void 0&&(z=P?P.length:0),E===void 0&&(E=0),_===void 0&&(_=this.length),T<0||z>P.length||E<0||_>this.length)throw new RangeError("out of range index");if(E>=_&&T>=z)return 0;if(E>=_)return-1;if(T>=z)return 1;if(this===P)return 0;for(var M=(_>>>=0)-(E>>>=0),K=(z>>>=0)-(T>>>=0),X=Math.min(M,K),J=this.slice(E,_),nt=P.slice(T,z),pt=0;pt<X;++pt)if(J[pt]!==nt[pt]){M=J[pt],K=nt[pt];break}return M<K?-1:K<M?1:0},f.prototype.includes=function(P,T,z){return this.indexOf(P,T,z)!==-1},f.prototype.indexOf=function(P,T,z){return D(this,P,T,z,!0)},f.prototype.lastIndexOf=function(P,T,z){return D(this,P,T,z,!1)},f.prototype.write=function(P,T,z,E){if(T===void 0)E="utf8",z=this.length,T=0;else if(z===void 0&&typeof T=="string")E=T,z=this.length,T=0;else{if(!isFinite(T))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");T|=0,isFinite(z)?(z|=0,E===void 0&&(E="utf8")):(E=z,z=void 0)}var _=this.length-T;if((z===void 0||z>_)&&(z=_),P.length>0&&(z<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");for(var M=!1;;)switch(E){case"hex":return g(this,P,T,z);case"utf8":case"utf-8":return I(this,P,T,z);case"ascii":return l(this,P,T,z);case"latin1":case"binary":return m(this,P,T,z);case"base64":return v(this,P,T,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,P,T,z);default:if(M)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),M=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(P,T,z){var E="";z=Math.min(P.length,z);for(var _=T;_<z;++_)E+=String.fromCharCode(127&P[_]);return E}function W(P,T,z){var E="";z=Math.min(P.length,z);for(var _=T;_<z;++_)E+=String.fromCharCode(P[_]);return E}function Z(P,T,z){var E=P.length;(!T||T<0)&&(T=0),(!z||z<0||z>E)&&(z=E);for(var _="",M=T;M<z;++M)_+=tt(P[M]);return _}function b(P,T,z){for(var E=P.slice(T,z),_="",M=0;M<E.length;M+=2)_+=String.fromCharCode(E[M]+256*E[M+1]);return _}function U(P,T,z){if(P%1!=0||P<0)throw new RangeError("offset is not uint");if(P+T>z)throw new RangeError("Trying to access beyond buffer length")}function G(P,T,z,E,_,M){if(!f.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>_||T<M)throw new RangeError('"value" argument is out of bounds');if(z+E>P.length)throw new RangeError("Index out of range")}function Q(P,T,z,E){T<0&&(T=65535+T+1);for(var _=0,M=Math.min(P.length-z,2);_<M;++_)P[z+_]=(T&255<<8*(E?_:1-_))>>>8*(E?_:1-_)}function it(P,T,z,E){T<0&&(T=4294967295+T+1);for(var _=0,M=Math.min(P.length-z,4);_<M;++_)P[z+_]=T>>>8*(E?_:3-_)&255}function ht(P,T,z,E,_,M){if(z+E>P.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function ut(P,T,z,E,_){return _||ht(P,0,z,4),o.write(P,T,z,E,23,4),z+4}function lt(P,T,z,E,_){return _||ht(P,0,z,8),o.write(P,T,z,E,52,8),z+8}f.prototype.slice=function(P,T){var z,E=this.length;if((P=~~P)<0?(P+=E)<0&&(P=0):P>E&&(P=E),(T=T===void 0?E:~~T)<0?(T+=E)<0&&(T=0):T>E&&(T=E),T<P&&(T=P),f.TYPED_ARRAY_SUPPORT)(z=this.subarray(P,T)).__proto__=f.prototype;else{var _=T-P;z=new f(_,void 0);for(var M=0;M<_;++M)z[M]=this[M+P]}return z},f.prototype.readUIntLE=function(P,T,z){P|=0,T|=0,z||U(P,T,this.length);for(var E=this[P],_=1,M=0;++M<T&&(_*=256);)E+=this[P+M]*_;return E},f.prototype.readUIntBE=function(P,T,z){P|=0,T|=0,z||U(P,T,this.length);for(var E=this[P+--T],_=1;T>0&&(_*=256);)E+=this[P+--T]*_;return E},f.prototype.readUInt8=function(P,T){return T||U(P,1,this.length),this[P]},f.prototype.readUInt16LE=function(P,T){return T||U(P,2,this.length),this[P]|this[P+1]<<8},f.prototype.readUInt16BE=function(P,T){return T||U(P,2,this.length),this[P]<<8|this[P+1]},f.prototype.readUInt32LE=function(P,T){return T||U(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},f.prototype.readUInt32BE=function(P,T){return T||U(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},f.prototype.readIntLE=function(P,T,z){P|=0,T|=0,z||U(P,T,this.length);for(var E=this[P],_=1,M=0;++M<T&&(_*=256);)E+=this[P+M]*_;return E>=(_*=128)&&(E-=Math.pow(2,8*T)),E},f.prototype.readIntBE=function(P,T,z){P|=0,T|=0,z||U(P,T,this.length);for(var E=T,_=1,M=this[P+--E];E>0&&(_*=256);)M+=this[P+--E]*_;return M>=(_*=128)&&(M-=Math.pow(2,8*T)),M},f.prototype.readInt8=function(P,T){return T||U(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},f.prototype.readInt16LE=function(P,T){T||U(P,2,this.length);var z=this[P]|this[P+1]<<8;return 32768&z?4294901760|z:z},f.prototype.readInt16BE=function(P,T){T||U(P,2,this.length);var z=this[P+1]|this[P]<<8;return 32768&z?4294901760|z:z},f.prototype.readInt32LE=function(P,T){return T||U(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},f.prototype.readInt32BE=function(P,T){return T||U(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},f.prototype.readFloatLE=function(P,T){return T||U(P,4,this.length),o.read(this,P,!0,23,4)},f.prototype.readFloatBE=function(P,T){return T||U(P,4,this.length),o.read(this,P,!1,23,4)},f.prototype.readDoubleLE=function(P,T){return T||U(P,8,this.length),o.read(this,P,!0,52,8)},f.prototype.readDoubleBE=function(P,T){return T||U(P,8,this.length),o.read(this,P,!1,52,8)},f.prototype.writeUIntLE=function(P,T,z,E){P=+P,T|=0,z|=0,E||G(this,P,T,z,Math.pow(2,8*z)-1,0);var _=1,M=0;for(this[T]=255&P;++M<z&&(_*=256);)this[T+M]=P/_&255;return T+z},f.prototype.writeUIntBE=function(P,T,z,E){P=+P,T|=0,z|=0,E||G(this,P,T,z,Math.pow(2,8*z)-1,0);var _=z-1,M=1;for(this[T+_]=255&P;--_>=0&&(M*=256);)this[T+_]=P/M&255;return T+z},f.prototype.writeUInt8=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,1,255,0),f.TYPED_ARRAY_SUPPORT||(P=Math.floor(P)),this[T]=255&P,T+1},f.prototype.writeUInt16LE=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[T]=255&P,this[T+1]=P>>>8):Q(this,P,T,!0),T+2},f.prototype.writeUInt16BE=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[T]=P>>>8,this[T+1]=255&P):Q(this,P,T,!1),T+2},f.prototype.writeUInt32LE=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[T+3]=P>>>24,this[T+2]=P>>>16,this[T+1]=P>>>8,this[T]=255&P):it(this,P,T,!0),T+4},f.prototype.writeUInt32BE=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[T]=P>>>24,this[T+1]=P>>>16,this[T+2]=P>>>8,this[T+3]=255&P):it(this,P,T,!1),T+4},f.prototype.writeIntLE=function(P,T,z,E){if(P=+P,T|=0,!E){var _=Math.pow(2,8*z-1);G(this,P,T,z,_-1,-_)}var M=0,K=1,X=0;for(this[T]=255&P;++M<z&&(K*=256);)P<0&&X===0&&this[T+M-1]!==0&&(X=1),this[T+M]=(P/K>>0)-X&255;return T+z},f.prototype.writeIntBE=function(P,T,z,E){if(P=+P,T|=0,!E){var _=Math.pow(2,8*z-1);G(this,P,T,z,_-1,-_)}var M=z-1,K=1,X=0;for(this[T+M]=255&P;--M>=0&&(K*=256);)P<0&&X===0&&this[T+M+1]!==0&&(X=1),this[T+M]=(P/K>>0)-X&255;return T+z},f.prototype.writeInt8=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,1,127,-128),f.TYPED_ARRAY_SUPPORT||(P=Math.floor(P)),P<0&&(P=255+P+1),this[T]=255&P,T+1},f.prototype.writeInt16LE=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[T]=255&P,this[T+1]=P>>>8):Q(this,P,T,!0),T+2},f.prototype.writeInt16BE=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[T]=P>>>8,this[T+1]=255&P):Q(this,P,T,!1),T+2},f.prototype.writeInt32LE=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[T]=255&P,this[T+1]=P>>>8,this[T+2]=P>>>16,this[T+3]=P>>>24):it(this,P,T,!0),T+4},f.prototype.writeInt32BE=function(P,T,z){return P=+P,T|=0,z||G(this,P,T,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),f.TYPED_ARRAY_SUPPORT?(this[T]=P>>>24,this[T+1]=P>>>16,this[T+2]=P>>>8,this[T+3]=255&P):it(this,P,T,!1),T+4},f.prototype.writeFloatLE=function(P,T,z){return ut(this,P,T,!0,z)},f.prototype.writeFloatBE=function(P,T,z){return ut(this,P,T,!1,z)},f.prototype.writeDoubleLE=function(P,T,z){return lt(this,P,T,!0,z)},f.prototype.writeDoubleBE=function(P,T,z){return lt(this,P,T,!1,z)},f.prototype.copy=function(P,T,z,E){if(z||(z=0),E||E===0||(E=this.length),T>=P.length&&(T=P.length),T||(T=0),E>0&&E<z&&(E=z),E===z||P.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("sourceStart out of bounds");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),P.length-T<E-z&&(E=P.length-T+z);var _,M=E-z;if(this===P&&z<T&&T<E)for(_=M-1;_>=0;--_)P[_+T]=this[_+z];else if(M<1e3||!f.TYPED_ARRAY_SUPPORT)for(_=0;_<M;++_)P[_+T]=this[_+z];else Uint8Array.prototype.set.call(P,this.subarray(z,z+M),T);return M},f.prototype.fill=function(P,T,z,E){if(typeof P=="string"){if(typeof T=="string"?(E=T,T=0,z=this.length):typeof z=="string"&&(E=z,z=this.length),P.length===1){var _=P.charCodeAt(0);_<256&&(P=_)}if(E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!f.isEncoding(E))throw new TypeError("Unknown encoding: "+E)}else typeof P=="number"&&(P&=255);if(T<0||this.length<T||this.length<z)throw new RangeError("Out of range index");if(z<=T)return this;var M;if(T>>>=0,z=z===void 0?this.length:z>>>0,P||(P=0),typeof P=="number")for(M=T;M<z;++M)this[M]=P;else{var K=f.isBuffer(P)?P:F(new f(P,E).toString()),X=K.length;for(M=0;M<z-T;++M)this[M+T]=K[M%X]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function tt(P){return P<16?"0"+P.toString(16):P.toString(16)}function F(P,T){var z;T=T||1/0;for(var E=P.length,_=null,M=[],K=0;K<E;++K){if((z=P.charCodeAt(K))>55295&&z<57344){if(!_){if(z>56319){(T-=3)>-1&&M.push(239,191,189);continue}if(K+1===E){(T-=3)>-1&&M.push(239,191,189);continue}_=z;continue}if(z<56320){(T-=3)>-1&&M.push(239,191,189),_=z;continue}z=65536+(_-55296<<10|z-56320)}else _&&(T-=3)>-1&&M.push(239,191,189);if(_=null,z<128){if((T-=1)<0)break;M.push(z)}else if(z<2048){if((T-=2)<0)break;M.push(z>>6|192,63&z|128)}else if(z<65536){if((T-=3)<0)break;M.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((T-=4)<0)break;M.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return M}function x(P){return a.toByteArray(function(T){if((T=function(z){return z.trim?z.trim():z.replace(/^\s+|\s+$/g,"")}(T).replace(j,"")).length<2)return"";for(;T.length%4!=0;)T+="=";return T}(P))}function Y(P,T,z,E){for(var _=0;_<E&&!(_+z>=T.length||_>=P.length);++_)T[_+z]=P[_];return _}}).call(this,i(5))},function(r,n,i){n.byteLength=function(d){var S=f(d),k=S[0],A=S[1];return 3*(k+A)/4-A},n.toByteArray=function(d){var S,k,A=f(d),C=A[0],B=A[1],R=new o(function(g,I,l){return 3*(I+l)/4-l}(0,C,B)),D=0,L=B>0?C-4:C;for(k=0;k<L;k+=4)S=a[d.charCodeAt(k)]<<18|a[d.charCodeAt(k+1)]<<12|a[d.charCodeAt(k+2)]<<6|a[d.charCodeAt(k+3)],R[D++]=S>>16&255,R[D++]=S>>8&255,R[D++]=255&S;return B===2&&(S=a[d.charCodeAt(k)]<<2|a[d.charCodeAt(k+1)]>>4,R[D++]=255&S),B===1&&(S=a[d.charCodeAt(k)]<<10|a[d.charCodeAt(k+1)]<<4|a[d.charCodeAt(k+2)]>>2,R[D++]=S>>8&255,R[D++]=255&S),R},n.fromByteArray=function(d){for(var S,k=d.length,A=k%3,C=[],B=0,R=k-A;B<R;B+=16383)C.push(p(d,B,B+16383>R?R:B+16383));return A===1?(S=d[k-1],C.push(s[S>>2]+s[S<<4&63]+"==")):A===2&&(S=(d[k-2]<<8)+d[k-1],C.push(s[S>>10]+s[S>>4&63]+s[S<<2&63]+"=")),C.join("")};for(var s=[],a=[],o=typeof Uint8Array!="undefined"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,h=c.length;u<h;++u)s[u]=c[u],a[c.charCodeAt(u)]=u;function f(d){var S=d.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=d.indexOf("=");return k===-1&&(k=S),[k,k===S?0:4-k%4]}function p(d,S,k){for(var A,C,B=[],R=S;R<k;R+=3)A=(d[R]<<16&16711680)+(d[R+1]<<8&65280)+(255&d[R+2]),B.push(s[(C=A)>>18&63]+s[C>>12&63]+s[C>>6&63]+s[63&C]);return B.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(r,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(i,s,a,o,c){var u,h,f=8*c-o-1,p=(1<<f)-1,d=p>>1,S=-7,k=a?c-1:0,A=a?-1:1,C=i[s+k];for(k+=A,u=C&(1<<-S)-1,C>>=-S,S+=f;S>0;u=256*u+i[s+k],k+=A,S-=8);for(h=u&(1<<-S)-1,u>>=-S,S+=o;S>0;h=256*h+i[s+k],k+=A,S-=8);if(u===0)u=1-d;else{if(u===p)return h?NaN:1/0*(C?-1:1);h+=Math.pow(2,o),u-=d}return(C?-1:1)*h*Math.pow(2,u-o)},n.write=function(i,s,a,o,c,u){var h,f,p,d=8*u-c-1,S=(1<<d)-1,k=S>>1,A=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=o?0:u-1,B=o?1:-1,R=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(f=isNaN(s)?1:0,h=S):(h=Math.floor(Math.log(s)/Math.LN2),s*(p=Math.pow(2,-h))<1&&(h--,p*=2),(s+=h+k>=1?A/p:A*Math.pow(2,1-k))*p>=2&&(h++,p/=2),h+k>=S?(f=0,h=S):h+k>=1?(f=(s*p-1)*Math.pow(2,c),h+=k):(f=s*Math.pow(2,k-1)*Math.pow(2,c),h=0));c>=8;i[a+C]=255&f,C+=B,f/=256,c-=8);for(h=h<<c|f,d+=c;d>0;i[a+C]=255&h,C+=B,h/=256,d-=8);i[a+C-B]|=128*R}},function(r,n){var i={}.toString;r.exports=Array.isArray||function(s){return i.call(s)=="[object Array]"}},function(r,n,i){var s,a,o;a=[],(o=typeof(s=function(){var c,u,h,f;Object.keys||(Object.keys=(c=Object.prototype.hasOwnProperty,u=!{toString:null}.propertyIsEnumerable("toString"),f=(h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(b){if(typeof b!="object"&&typeof b!="function"||b===null)throw new TypeError("Object.keys called on non-object");var U=[];for(var G in b)c.call(b,G)&&U.push(G);if(u)for(var Q=0;Q<f;Q++)c.call(b,h[Q])&&U.push(h[Q]);return U})),Object.create||(Object.create=function(){function b(){}return function(U){if(arguments.length!==1)throw new Error("Object.create implementation only accepts one parameter.");return b.prototype=U,new b}}()),Array.isArray||(Array.isArray=function(b){return Object.prototype.toString.call(b)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(b){if(this===null)throw new TypeError;var U=Object(this),G=U.length>>>0;if(G===0)return-1;var Q=0;if(arguments.length>1&&((Q=Number(arguments[1]))!=Q?Q=0:Q!==0&&Q!==1/0&&Q!==-1/0&&(Q=(Q>0||-1)*Math.floor(Math.abs(Q)))),Q>=G)return-1;for(var it=Q>=0?Q:Math.max(G-Math.abs(Q),0);it<G;it++)if(it in U&&U[it]===b)return it;return-1}),Object.isFrozen||(Object.isFrozen=function(b){for(var U="tv4_test_frozen_key";b.hasOwnProperty(U);)U+=Math.random();try{return b[U]=!0,delete b[U],!1}catch{return!0}});var p={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},d={"*":!0};function S(b){return encodeURI(b).replace(/%25[0-9][0-9]/g,function(U){return"%"+U.substring(3)})}function k(b){var U="";p[b.charAt(0)]&&(U=b.charAt(0),b=b.substring(1));var G="",Q="",it=!0,ht=!1,ut=!1;U==="+"?it=!1:U==="."?(Q=".",G="."):U==="/"?(Q="/",G="/"):U==="#"?(Q="#",it=!1):U===";"?(Q=";",G=";",ht=!0,ut=!0):U==="?"?(Q="?",G="&",ht=!0):U==="&"&&(Q="&",G="&",ht=!0);for(var lt=[],j=b.split(","),tt=[],F={},x=0;x<j.length;x++){var Y=j[x],P=null;if(Y.indexOf(":")!==-1){var T=Y.split(":");Y=T[0],P=parseInt(T[1],10)}for(var z={};d[Y.charAt(Y.length-1)];)z[Y.charAt(Y.length-1)]=!0,Y=Y.substring(0,Y.length-1);var E={truncate:P,name:Y,suffices:z};tt.push(E),F[Y]=E,lt.push(Y)}var _=function(M){for(var K="",X=0,J=0;J<tt.length;J++){var nt=tt[J],pt=M(nt.name);if(pt==null||Array.isArray(pt)&&pt.length===0||typeof pt=="object"&&Object.keys(pt).length===0)X++;else if(K+=J===X?Q:G||",",Array.isArray(pt)){ht&&(K+=nt.name+"=");for(var gt=0;gt<pt.length;gt++)gt>0&&(K+=nt.suffices["*"]&&G||",",nt.suffices["*"]&&ht&&(K+=nt.name+"=")),K+=it?encodeURIComponent(pt[gt]).replace(/!/g,"%21"):S(pt[gt])}else if(typeof pt=="object"){ht&&!nt.suffices["*"]&&(K+=nt.name+"=");var Et=!0;for(var et in pt)Et||(K+=nt.suffices["*"]&&G||","),Et=!1,K+=it?encodeURIComponent(et).replace(/!/g,"%21"):S(et),K+=nt.suffices["*"]?"=":",",K+=it?encodeURIComponent(pt[et]).replace(/!/g,"%21"):S(pt[et])}else ht&&(K+=nt.name,ut&&pt===""||(K+="=")),nt.truncate!=null&&(pt=pt.substring(0,nt.truncate)),K+=it?encodeURIComponent(pt).replace(/!/g,"%21"):S(pt)}return K};return _.varNames=lt,{prefix:Q,substitution:_}}function A(b){if(!(this instanceof A))return new A(b);for(var U=b.split("{"),G=[U.shift()],Q=[],it=[],ht=[];U.length>0;){var ut=U.shift(),lt=ut.split("}")[0],j=ut.substring(lt.length+1),tt=k(lt);it.push(tt.substitution),Q.push(tt.prefix),G.push(j),ht=ht.concat(tt.substitution.varNames)}this.fill=function(F){for(var x=G[0],Y=0;Y<it.length;Y++)x+=(0,it[Y])(F),x+=G[Y+1];return x},this.varNames=ht,this.template=b}A.prototype={toString:function(){return this.template},fillFromObject:function(b){return this.fill(function(U){return b[U]})}};var C=function(b,U,G,Q,it){if(this.missing=[],this.missingMap={},this.formatValidators=b?Object.create(b.formatValidators):{},this.schemas=b?Object.create(b.schemas):{},this.collectMultiple=U,this.errors=[],this.handleError=U?this.collectError:this.returnError,Q&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),it&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=G||m("en"),typeof this.errorReporter=="string")throw new Error("debug");if(this.definedKeywords={},b)for(var ht in b.definedKeywords)this.definedKeywords[ht]=b.definedKeywords[ht].slice(0)};function B(b,U){if(b===U)return!0;if(b&&U&&typeof b=="object"&&typeof U=="object"){if(Array.isArray(b)!==Array.isArray(U))return!1;if(Array.isArray(b)){if(b.length!==U.length)return!1;for(var G=0;G<b.length;G++)if(!B(b[G],U[G]))return!1}else{var Q;for(Q in b)if(U[Q]===void 0&&b[Q]!==void 0)return!1;for(Q in U)if(b[Q]===void 0&&U[Q]!==void 0)return!1;for(Q in b)if(!B(b[Q],U[Q]))return!1}return!0}return!1}C.prototype.defineKeyword=function(b,U){this.definedKeywords[b]=this.definedKeywords[b]||[],this.definedKeywords[b].push(U)},C.prototype.createError=function(b,U,G,Q,it,ht,ut){var lt=new O(b,U,G,Q,it);return lt.message=this.errorReporter(lt,ht,ut),lt},C.prototype.returnError=function(b){return b},C.prototype.collectError=function(b){return b&&this.errors.push(b),null},C.prototype.prefixErrors=function(b,U,G){for(var Q=b;Q<this.errors.length;Q++)this.errors[Q]=this.errors[Q].prefixWith(U,G);return this},C.prototype.banUnknownProperties=function(b,U){for(var G in this.unknownPropertyPaths){var Q=this.createError(v.UNKNOWN_PROPERTY,{path:G},G,"",null,b,U),it=this.handleError(Q);if(it)return it}return null},C.prototype.addFormat=function(b,U){if(typeof b=="object"){for(var G in b)this.addFormat(G,b[G]);return this}this.formatValidators[b]=U},C.prototype.resolveRefs=function(b,U){if(b.$ref!==void 0){if((U=U||{})[b.$ref])return this.createError(v.CIRCULAR_REFERENCE,{urls:Object.keys(U).join(", ")},"","",null,void 0,b);U[b.$ref]=!0,b=this.getSchema(b.$ref,U)}return b},C.prototype.getSchema=function(b,U){var G;if(this.schemas[b]!==void 0)return G=this.schemas[b],this.resolveRefs(G,U);var Q=b,it="";if(b.indexOf("#")!==-1&&(it=b.substring(b.indexOf("#")+1),Q=b.substring(0,b.indexOf("#"))),typeof this.schemas[Q]=="object"){G=this.schemas[Q];var ht=decodeURIComponent(it);if(ht==="")return this.resolveRefs(G,U);if(ht.charAt(0)!=="/")return;for(var ut=ht.split("/").slice(1),lt=0;lt<ut.length;lt++){var j=ut[lt].replace(/~1/g,"/").replace(/~0/g,"~");if(G[j]===void 0){G=void 0;break}G=G[j]}if(G!==void 0)return this.resolveRefs(G,U)}this.missing[Q]===void 0&&(this.missing.push(Q),this.missing[Q]=Q,this.missingMap[Q]=Q)},C.prototype.searchSchemas=function(b,U){if(Array.isArray(b))for(var G=0;G<b.length;G++)this.searchSchemas(b[G],U);else if(b&&typeof b=="object"){for(var Q in typeof b.id=="string"&&function(ht,ut){if(ut.substring(0,ht.length)===ht){var lt=ut.substring(ht.length);if(ut.length>0&&ut.charAt(ht.length-1)==="/"||lt.charAt(0)==="#"||lt.charAt(0)==="?")return!0}return!1}(U,b.id)&&this.schemas[b.id]===void 0&&(this.schemas[b.id]=b),b)if(Q!=="enum"){if(typeof b[Q]=="object")this.searchSchemas(b[Q],U);else if(Q==="$ref"){var it=I(b[Q]);it&&this.schemas[it]===void 0&&this.missingMap[it]===void 0&&(this.missingMap[it]=it)}}}},C.prototype.addSchema=function(b,U){if(typeof b!="string"||U===void 0){if(typeof b!="object"||typeof b.id!="string")return;b=(U=b).id}b===I(b)+"#"&&(b=I(b)),this.schemas[b]=U,delete this.missingMap[b],l(U,b),this.searchSchemas(U,b)},C.prototype.getSchemaMap=function(){var b={};for(var U in this.schemas)b[U]=this.schemas[U];return b},C.prototype.getSchemaUris=function(b){var U=[];for(var G in this.schemas)b&&!b.test(G)||U.push(G);return U},C.prototype.getMissingUris=function(b){var U=[];for(var G in this.missingMap)b&&!b.test(G)||U.push(G);return U},C.prototype.dropSchemas=function(){this.schemas={},this.reset()},C.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},C.prototype.validateAll=function(b,U,G,Q,it){var ht;if(!(U=this.resolveRefs(U)))return null;if(U instanceof O)return this.errors.push(U),U;var ut,lt=this.errors.length,j=null,tt=null;if(this.checkRecursive&&b&&typeof b=="object"){if(ht=!this.scanned.length,b[this.validatedSchemasKey]){var F=b[this.validatedSchemasKey].indexOf(U);if(F!==-1)return this.errors=this.errors.concat(b[this.validationErrorsKey][F]),null}if(Object.isFrozen(b)&&(ut=this.scannedFrozen.indexOf(b))!==-1){var x=this.scannedFrozenSchemas[ut].indexOf(U);if(x!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[ut][x]),null}if(this.scanned.push(b),Object.isFrozen(b))ut===-1&&(ut=this.scannedFrozen.length,this.scannedFrozen.push(b),this.scannedFrozenSchemas.push([])),j=this.scannedFrozenSchemas[ut].length,this.scannedFrozenSchemas[ut][j]=U,this.scannedFrozenValidationErrors[ut][j]=[];else{if(!b[this.validatedSchemasKey])try{Object.defineProperty(b,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(b,this.validationErrorsKey,{value:[],configurable:!0})}catch{b[this.validatedSchemasKey]=[],b[this.validationErrorsKey]=[]}tt=b[this.validatedSchemasKey].length,b[this.validatedSchemasKey][tt]=U,b[this.validationErrorsKey][tt]=[]}}var Y=this.errors.length,P=this.validateBasic(b,U,it)||this.validateNumeric(b,U,it)||this.validateString(b,U,it)||this.validateArray(b,U,it)||this.validateObject(b,U,it)||this.validateCombinations(b,U,it)||this.validateHypermedia(b,U,it)||this.validateFormat(b,U,it)||this.validateDefinedKeywords(b,U,it)||null;if(ht){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(P||Y!==this.errors.length)for(;G&&G.length||Q&&Q.length;){var T=G&&G.length?""+G.pop():null,z=Q&&Q.length?""+Q.pop():null;P&&(P=P.prefixWith(T,z)),this.prefixErrors(Y,T,z)}return j!==null?this.scannedFrozenValidationErrors[ut][j]=this.errors.slice(lt):tt!==null&&(b[this.validationErrorsKey][tt]=this.errors.slice(lt)),this.handleError(P)},C.prototype.validateFormat=function(b,U){if(typeof U.format!="string"||!this.formatValidators[U.format])return null;var G=this.formatValidators[U.format].call(null,b,U);return typeof G=="string"||typeof G=="number"?this.createError(v.FORMAT_CUSTOM,{message:G},"","/format",null,b,U):G&&typeof G=="object"?this.createError(v.FORMAT_CUSTOM,{message:G.message||"?"},G.dataPath||"",G.schemaPath||"/format",null,b,U):null},C.prototype.validateDefinedKeywords=function(b,U,G){for(var Q in this.definedKeywords)if(U[Q]!==void 0)for(var it=this.definedKeywords[Q],ht=0;ht<it.length;ht++){var ut=(0,it[ht])(b,U[Q],U,G);if(typeof ut=="string"||typeof ut=="number")return this.createError(v.KEYWORD_CUSTOM,{key:Q,message:ut},"","",null,b,U).prefixWith(null,Q);if(ut&&typeof ut=="object"){var lt=ut.code;if(typeof lt=="string"){if(!v[lt])throw new Error("Undefined error code (use defineError): "+lt);lt=v[lt]}else typeof lt!="number"&&(lt=v.KEYWORD_CUSTOM);var j=typeof ut.message=="object"?ut.message:{key:Q,message:ut.message||"?"},tt=ut.schemaPath||"/"+Q.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(lt,j,ut.dataPath||null,tt,null,b,U)}}return null},C.prototype.validateBasic=function(b,U,G){var Q;return(Q=this.validateType(b,U,G))||(Q=this.validateEnum(b,U,G))?Q.prefixWith(null,"type"):null},C.prototype.validateType=function(b,U){if(U.type===void 0)return null;var G=typeof b;b===null?G="null":Array.isArray(b)&&(G="array");var Q=U.type;Array.isArray(Q)||(Q=[Q]);for(var it=0;it<Q.length;it++){var ht=Q[it];if(ht===G||ht==="integer"&&G==="number"&&b%1==0)return null}return this.createError(v.INVALID_TYPE,{type:G,expected:Q.join("/")},"","",null,b,U)},C.prototype.validateEnum=function(b,U){if(U.enum===void 0)return null;for(var G=0;G<U.enum.length;G++)if(B(b,U.enum[G]))return null;return this.createError(v.ENUM_MISMATCH,{value:typeof JSON!="undefined"?JSON.stringify(b):b},"","",null,b,U)},C.prototype.validateNumeric=function(b,U,G){return this.validateMultipleOf(b,U,G)||this.validateMinMax(b,U,G)||this.validateNaN(b,U,G)||null};var R=Math.pow(2,-51),D=1-R;function L(b){var U=String(b).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return U?{href:U[0]||"",protocol:U[1]||"",authority:U[2]||"",host:U[3]||"",hostname:U[4]||"",port:U[5]||"",pathname:U[6]||"",search:U[7]||"",hash:U[8]||""}:null}function g(b,U){return U=L(U||""),b=L(b||""),U&&b?(U.protocol||b.protocol)+(U.protocol||U.authority?U.authority:b.authority)+(G=U.protocol||U.authority||U.pathname.charAt(0)==="/"?U.pathname:U.pathname?(b.authority&&!b.pathname?"/":"")+b.pathname.slice(0,b.pathname.lastIndexOf("/")+1)+U.pathname:b.pathname,Q=[],G.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(it){it==="/.."?Q.pop():Q.push(it)}),Q.join("").replace(/^\//,G.charAt(0)==="/"?"/":""))+(U.protocol||U.authority||U.pathname?U.search:U.search||b.search)+U.hash:null;var G,Q}function I(b){return b.split("#")[0]}function l(b,U){if(b&&typeof b=="object")if(U===void 0?U=b.id:typeof b.id=="string"&&(U=g(U,b.id),b.id=U),Array.isArray(b))for(var G=0;G<b.length;G++)l(b[G],U);else for(var Q in typeof b.$ref=="string"&&(b.$ref=g(U,b.$ref)),b)Q!=="enum"&&l(b[Q],U)}function m(b){var U=W[b=b||"en"];return function(G){var Q=U[G.code]||N[G.code];if(typeof Q!="string")return"Unknown error code "+G.code+": "+JSON.stringify(G.messageParams);var it=G.params;return Q.replace(/\{([^{}]*)\}/g,function(ht,ut){var lt=it[ut];return typeof lt=="string"||typeof lt=="number"?lt:ht})}}C.prototype.validateMultipleOf=function(b,U){var G=U.multipleOf||U.divisibleBy;if(G===void 0)return null;if(typeof b=="number"){var Q=b/G%1;if(Q>=R&&Q<D)return this.createError(v.NUMBER_MULTIPLE_OF,{value:b,multipleOf:G},"","",null,b,U)}return null},C.prototype.validateMinMax=function(b,U){if(typeof b!="number")return null;if(U.minimum!==void 0){if(b<U.minimum)return this.createError(v.NUMBER_MINIMUM,{value:b,minimum:U.minimum},"","/minimum",null,b,U);if(U.exclusiveMinimum&&b===U.minimum)return this.createError(v.NUMBER_MINIMUM_EXCLUSIVE,{value:b,minimum:U.minimum},"","/exclusiveMinimum",null,b,U)}if(U.maximum!==void 0){if(b>U.maximum)return this.createError(v.NUMBER_MAXIMUM,{value:b,maximum:U.maximum},"","/maximum",null,b,U);if(U.exclusiveMaximum&&b===U.maximum)return this.createError(v.NUMBER_MAXIMUM_EXCLUSIVE,{value:b,maximum:U.maximum},"","/exclusiveMaximum",null,b,U)}return null},C.prototype.validateNaN=function(b,U){return typeof b!="number"?null:isNaN(b)===!0||b===1/0||b===-1/0?this.createError(v.NUMBER_NOT_A_NUMBER,{value:b},"","/type",null,b,U):null},C.prototype.validateString=function(b,U,G){return this.validateStringLength(b,U,G)||this.validateStringPattern(b,U,G)||null},C.prototype.validateStringLength=function(b,U){return typeof b!="string"?null:U.minLength!==void 0&&b.length<U.minLength?this.createError(v.STRING_LENGTH_SHORT,{length:b.length,minimum:U.minLength},"","/minLength",null,b,U):U.maxLength!==void 0&&b.length>U.maxLength?this.createError(v.STRING_LENGTH_LONG,{length:b.length,maximum:U.maxLength},"","/maxLength",null,b,U):null},C.prototype.validateStringPattern=function(b,U){if(typeof b!="string"||typeof U.pattern!="string"&&!(U.pattern instanceof RegExp))return null;var G;if(U.pattern instanceof RegExp)G=U.pattern;else{var Q,it="",ht=U.pattern.match(/^\/(.+)\/([img]*)$/);ht?(Q=ht[1],it=ht[2]):Q=U.pattern,G=new RegExp(Q,it)}return G.test(b)?null:this.createError(v.STRING_PATTERN,{pattern:U.pattern},"","/pattern",null,b,U)},C.prototype.validateArray=function(b,U,G){return Array.isArray(b)&&(this.validateArrayLength(b,U,G)||this.validateArrayUniqueItems(b,U,G)||this.validateArrayItems(b,U,G))||null},C.prototype.validateArrayLength=function(b,U){var G;return U.minItems!==void 0&&b.length<U.minItems&&(G=this.createError(v.ARRAY_LENGTH_SHORT,{length:b.length,minimum:U.minItems},"","/minItems",null,b,U),this.handleError(G))||U.maxItems!==void 0&&b.length>U.maxItems&&(G=this.createError(v.ARRAY_LENGTH_LONG,{length:b.length,maximum:U.maxItems},"","/maxItems",null,b,U),this.handleError(G))?G:null},C.prototype.validateArrayUniqueItems=function(b,U){if(U.uniqueItems){for(var G=0;G<b.length;G++)for(var Q=G+1;Q<b.length;Q++)if(B(b[G],b[Q])){var it=this.createError(v.ARRAY_UNIQUE,{match1:G,match2:Q},"","/uniqueItems",null,b,U);if(this.handleError(it))return it}}return null},C.prototype.validateArrayItems=function(b,U,G){if(U.items===void 0)return null;var Q,it;if(Array.isArray(U.items)){for(it=0;it<b.length;it++)if(it<U.items.length){if(Q=this.validateAll(b[it],U.items[it],[it],["items",it],G+"/"+it))return Q}else if(U.additionalItems!==void 0){if(typeof U.additionalItems=="boolean"){if(!U.additionalItems&&(Q=this.createError(v.ARRAY_ADDITIONAL_ITEMS,{},"/"+it,"/additionalItems",null,b,U),this.handleError(Q)))return Q}else if(Q=this.validateAll(b[it],U.additionalItems,[it],["additionalItems"],G+"/"+it))return Q}}else for(it=0;it<b.length;it++)if(Q=this.validateAll(b[it],U.items,[it],["items"],G+"/"+it))return Q;return null},C.prototype.validateObject=function(b,U,G){return typeof b!="object"||b===null||Array.isArray(b)?null:this.validateObjectMinMaxProperties(b,U,G)||this.validateObjectRequiredProperties(b,U,G)||this.validateObjectProperties(b,U,G)||this.validateObjectDependencies(b,U,G)||null},C.prototype.validateObjectMinMaxProperties=function(b,U){var G,Q=Object.keys(b);return U.minProperties!==void 0&&Q.length<U.minProperties&&(G=this.createError(v.OBJECT_PROPERTIES_MINIMUM,{propertyCount:Q.length,minimum:U.minProperties},"","/minProperties",null,b,U),this.handleError(G))||U.maxProperties!==void 0&&Q.length>U.maxProperties&&(G=this.createError(v.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:Q.length,maximum:U.maxProperties},"","/maxProperties",null,b,U),this.handleError(G))?G:null},C.prototype.validateObjectRequiredProperties=function(b,U){if(U.required!==void 0)for(var G=0;G<U.required.length;G++){var Q=U.required[G];if(b[Q]===void 0){var it=this.createError(v.OBJECT_REQUIRED,{key:Q},"","/required/"+G,null,b,U);if(this.handleError(it))return it}}return null},C.prototype.validateObjectProperties=function(b,U,G){var Q;for(var it in b){var ht=G+"/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),ut=!1;if(U.properties!==void 0&&U.properties[it]!==void 0&&(ut=!0,Q=this.validateAll(b[it],U.properties[it],[it],["properties",it],ht)))return Q;if(U.patternProperties!==void 0){for(var lt in U.patternProperties)if(new RegExp(lt).test(it)&&(ut=!0,Q=this.validateAll(b[it],U.patternProperties[lt],[it],["patternProperties",lt],ht)))return Q}if(ut)this.trackUnknownProperties&&(this.knownPropertyPaths[ht]=!0,delete this.unknownPropertyPaths[ht]);else if(U.additionalProperties!==void 0){if(this.trackUnknownProperties&&(this.knownPropertyPaths[ht]=!0,delete this.unknownPropertyPaths[ht]),typeof U.additionalProperties=="boolean"){if(!U.additionalProperties&&(Q=this.createError(v.OBJECT_ADDITIONAL_PROPERTIES,{key:it},"","/additionalProperties",null,b,U).prefixWith(it,null),this.handleError(Q)))return Q}else if(Q=this.validateAll(b[it],U.additionalProperties,[it],["additionalProperties"],ht))return Q}else this.trackUnknownProperties&&!this.knownPropertyPaths[ht]&&(this.unknownPropertyPaths[ht]=!0)}return null},C.prototype.validateObjectDependencies=function(b,U,G){var Q;if(U.dependencies!==void 0){for(var it in U.dependencies)if(b[it]!==void 0){var ht=U.dependencies[it];if(typeof ht=="string"){if(b[ht]===void 0&&(Q=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:it,missing:ht},"","",null,b,U).prefixWith(null,it).prefixWith(null,"dependencies"),this.handleError(Q)))return Q}else if(Array.isArray(ht))for(var ut=0;ut<ht.length;ut++){var lt=ht[ut];if(b[lt]===void 0&&(Q=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:it,missing:lt},"","/"+ut,null,b,U).prefixWith(null,it).prefixWith(null,"dependencies"),this.handleError(Q)))return Q}else if(Q=this.validateAll(b,ht,[],["dependencies",it],G))return Q}}return null},C.prototype.validateCombinations=function(b,U,G){return this.validateAllOf(b,U,G)||this.validateAnyOf(b,U,G)||this.validateOneOf(b,U,G)||this.validateNot(b,U,G)||null},C.prototype.validateAllOf=function(b,U,G){if(U.allOf===void 0)return null;for(var Q,it=0;it<U.allOf.length;it++){var ht=U.allOf[it];if(Q=this.validateAll(b,ht,[],["allOf",it],G))return Q}return null},C.prototype.validateAnyOf=function(b,U,G){if(U.anyOf===void 0)return null;var Q,it,ht=[],ut=this.errors.length;this.trackUnknownProperties&&(Q=this.unknownPropertyPaths,it=this.knownPropertyPaths);for(var lt=!0,j=0;j<U.anyOf.length;j++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var tt=U.anyOf[j],F=this.errors.length,x=this.validateAll(b,tt,[],["anyOf",j],G);if(x===null&&F===this.errors.length){if(this.errors=this.errors.slice(0,ut),this.trackUnknownProperties){for(var Y in this.knownPropertyPaths)it[Y]=!0,delete Q[Y];for(var P in this.unknownPropertyPaths)it[P]||(Q[P]=!0);lt=!1;continue}return null}x&&ht.push(x.prefixWith(null,""+j).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=Q,this.knownPropertyPaths=it),lt?(ht=ht.concat(this.errors.slice(ut)),this.errors=this.errors.slice(0,ut),this.createError(v.ANY_OF_MISSING,{},"","/anyOf",ht,b,U)):void 0},C.prototype.validateOneOf=function(b,U,G){if(U.oneOf===void 0)return null;var Q,it,ht=null,ut=[],lt=this.errors.length;this.trackUnknownProperties&&(Q=this.unknownPropertyPaths,it=this.knownPropertyPaths);for(var j=0;j<U.oneOf.length;j++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var tt=U.oneOf[j],F=this.errors.length,x=this.validateAll(b,tt,[],["oneOf",j],G);if(x===null&&F===this.errors.length){if(ht!==null)return this.errors=this.errors.slice(0,lt),this.createError(v.ONE_OF_MULTIPLE,{index1:ht,index2:j},"","/oneOf",null,b,U);if(ht=j,this.trackUnknownProperties){for(var Y in this.knownPropertyPaths)it[Y]=!0,delete Q[Y];for(var P in this.unknownPropertyPaths)it[P]||(Q[P]=!0)}}else x&&ut.push(x)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=Q,this.knownPropertyPaths=it),ht===null?(ut=ut.concat(this.errors.slice(lt)),this.errors=this.errors.slice(0,lt),this.createError(v.ONE_OF_MISSING,{},"","/oneOf",ut,b,U)):(this.errors=this.errors.slice(0,lt),null)},C.prototype.validateNot=function(b,U,G){if(U.not===void 0)return null;var Q,it,ht=this.errors.length;this.trackUnknownProperties&&(Q=this.unknownPropertyPaths,it=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var ut=this.validateAll(b,U.not,null,null,G),lt=this.errors.slice(ht);return this.errors=this.errors.slice(0,ht),this.trackUnknownProperties&&(this.unknownPropertyPaths=Q,this.knownPropertyPaths=it),ut===null&&lt.length===0?this.createError(v.NOT_PASSED,{},"","/not",null,b,U):null},C.prototype.validateHypermedia=function(b,U,G){if(!U.links)return null;for(var Q,it=0;it<U.links.length;it++){var ht=U.links[it];if(ht.rel==="describedby"){for(var ut=new A(ht.href),lt=!0,j=0;j<ut.varNames.length;j++)if(!(ut.varNames[j]in b)){lt=!1;break}if(lt){var tt={$ref:ut.fillFromObject(b)};if(Q=this.validateAll(b,tt,[],["links",it],G))return Q}}}};var v={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},y={};for(var w in v)y[v[w]]=w;var N={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function O(b,U,G,Q,it){if(Error.call(this),b===void 0)throw new Error("No error code supplied: "+Q);this.message="",this.params=U,this.code=b,this.dataPath=G||"",this.schemaPath=Q||"",this.subErrors=it||null;var ht=new Error(this.message);if(this.stack=ht.stack||ht.stacktrace,!this.stack)try{throw ht}catch(ut){this.stack=ut.stack||ut.stacktrace}}O.prototype=Object.create(Error.prototype),O.prototype.constructor=O,O.prototype.name="ValidationError",O.prototype.prefixWith=function(b,U){if(b!==null&&(b=b.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+b+this.dataPath),U!==null&&(U=U.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+U+this.schemaPath),this.subErrors!==null)for(var G=0;G<this.subErrors.length;G++)this.subErrors[G].prefixWith(b,U);return this};var W={},Z=function b(U){var G,Q,it=new C,ht={setErrorReporter:function(ut){return typeof ut=="string"?this.language(ut):(Q=ut,!0)},addFormat:function(){it.addFormat.apply(it,arguments)},language:function(ut){return ut?(W[ut]||(ut=ut.split("-")[0]),!!W[ut]&&(G=ut,ut)):G},addLanguage:function(ut,lt){var j;for(j in v)lt[j]&&!lt[v[j]]&&(lt[v[j]]=lt[j]);var tt=ut.split("-")[0];if(W[tt])for(j in W[ut]=Object.create(W[tt]),lt)W[tt][j]===void 0&&(W[tt][j]=lt[j]),W[ut][j]=lt[j];else W[ut]=lt,W[tt]=lt;return this},freshApi:function(ut){var lt=b();return ut&&lt.language(ut),lt},validate:function(ut,lt,j,tt){var F=m(G),x=new C(it,!1,Q?function(P,T,z){return Q(P,T,z)||F(P,T,z)}:F,j,tt);typeof lt=="string"&&(lt={$ref:lt}),x.addSchema("",lt);var Y=x.validateAll(ut,lt,null,null,"");return!Y&&tt&&(Y=x.banUnknownProperties(ut,lt)),this.error=Y,this.missing=x.missing,this.valid=Y===null,this.valid},validateResult:function(){var ut={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(ut,arguments),ut},validateMultiple:function(ut,lt,j,tt){var F=m(G),x=new C(it,!0,Q?function(P,T,z){return Q(P,T,z)||F(P,T,z)}:F,j,tt);typeof lt=="string"&&(lt={$ref:lt}),x.addSchema("",lt),x.validateAll(ut,lt,null,null,""),tt&&x.banUnknownProperties(ut,lt);var Y={toString:function(){return this.valid?"valid":this.error.message}};return Y.errors=x.errors,Y.missing=x.missing,Y.valid=Y.errors.length===0,Y},addSchema:function(){return it.addSchema.apply(it,arguments)},getSchema:function(){return it.getSchema.apply(it,arguments)},getSchemaMap:function(){return it.getSchemaMap.apply(it,arguments)},getSchemaUris:function(){return it.getSchemaUris.apply(it,arguments)},getMissingUris:function(){return it.getMissingUris.apply(it,arguments)},dropSchemas:function(){it.dropSchemas.apply(it,arguments)},defineKeyword:function(){it.defineKeyword.apply(it,arguments)},defineError:function(ut,lt,j){if(typeof ut!="string"||!/^[A-Z]+(_[A-Z]+)*$/.test(ut))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if(typeof lt!="number"||lt%1!=0||lt<1e4)throw new Error("Code number must be an integer > 10000");if(v[ut]!==void 0)throw new Error("Error already defined: "+ut+" as "+v[ut]);if(y[lt]!==void 0)throw new Error("Error code already used: "+y[lt]+" as "+lt);for(var tt in v[ut]=lt,y[lt]=ut,N[ut]=N[lt]=j,W){var F=W[tt];F[ut]&&(F[lt]=F[lt]||F[ut])}},reset:function(){it.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:l,resolveUrl:g,getDocumentUri:I,errorCodes:v};return ht.language(U||"en"),ht}();return Z.addLanguage("en-gb",N),Z.tv4=Z,Z})=="function"?s.apply(n,a):s)===void 0||(r.exports=o)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseClientTypes=void 0;class s{constructor(){this.uris={},this.schemas={},this.aliases={}}declare(c,u,h,f){const p=c+"/"+u;if(f.extends){const d=f.extends.split("/"),S=d.length===1?c+"/"+d.shift():d.join("/"),k=this.uris[S];if(!k)throw"Type '"+p+"' tries to extend unknown schema '"+S+"'";f.extends=this.schemas[k]}this.uris[p]=h,this.aliases[h]=p,this.schemas[h]=f}resolveAlias(c){return this.uris[c]}getSchema(c){return this.schemas[c]}inScope(c){const u=c.length,h={};for(const f in this.uris)if(f.substr(0,u+1)===c+"/"){const p=this.uris[f];h[p]=this.schemas[p]}return h}}n.BaseClientTypes=s;const a=new s;n.default=a},function(r,n,i){class s extends Error{constructor(o){super();const c=new Error("Schema not found: "+o);return c.name="SchemaNotFound",c}}r.exports=s},function(r,n,i){r.exports=class{constructor(s){this._itemsRev={},this._storage={},this._canPropagate=!1,this.defaultValue=s,this.activatePropagation()}get(s){s=s.toLowerCase();let a=this._storage[s];return a===void 0&&(a=this.defaultValue,this._storage[s]=a),a}set(s,a){return s=s.toLowerCase(),this._storage[s]===a||(this._storage[s]=a,a||delete this._itemsRev[s],this._updateParentFolderItemRev(s,a),this._canPropagate&&this._propagate(s)),a}delete(s){return this.set(s,null)}deactivatePropagation(){return this._canPropagate=!1,!0}activatePropagation(){return this._canPropagate||(this._generateFolderRev("/"),this._canPropagate=!0),!0}_hashCode(s){let a=0;if(s.length===0)return a;for(let o=0;o<s.length;o++)a=(a<<5)-a+s.charCodeAt(o),a|=0;return a}_generateHash(s){const a=s.sort().join("|");return""+this._hashCode(a)}_updateParentFolderItemRev(s,a){if(s!=="/"){const o=this._getParentFolder(s);this._itemsRev[o]||(this._itemsRev[o]={});const c=this._itemsRev[o];a?c[s]=a:delete c[s],this._updateParentFolderItemRev(o,this.defaultValue)}}_getParentFolder(s){return s.substr(0,s.lastIndexOf("/",s.length-2)+1)}_propagate(s){if(s!=="/"){const a=this._getParentFolder(s),o=this._itemsRev[a],c=[];for(const h in o)c.push(o[h]);const u=this._generateHash(c);this.set(a,u)}}_generateFolderRev(s){const a=this._itemsRev[s];let o=this.defaultValue;if(a){const c=[];for(const u in a){let h;h=u.substr(-1)==="/"?this._generateFolderRev(u):a[u],c.push(h)}c.length>0&&(o=this._generateHash(c))}return this.set(s,o),o}}},function(r,n,i){var s;/*!
 * webfinger.js
 *   version 2.7.0
 *   http://github.com/silverbucket/webfinger.js
 *
 * Developed and Maintained by:
 *   Nick Jennings <nick@silverbucket.net> 2012
 *
 * webfinger.js is released under the AGPL (see LICENSE).
 *
 * You don't have to do anything special to choose one license or the other and you don't
 * have to notify anyone which license you are using.
 * Please see the corresponding license file for details of these licenses.
 * You are free to use, modify and distribute this software, but all copyright
 * information must remain.
 *
 */typeof fetch!="function"&&typeof XMLHttpRequest!="function"&&(XMLHttpRequest=i(28)),function(a){var o={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage","http://tools.ietf.org/id/draft-dejong-remotestorage":"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},c={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camlistore:[]},u=["webfinger","host-meta","host-meta.json"];function h(p){return p.toString=function(){return this.message},p}function f(p){typeof p!="object"&&(p={}),this.config={tls_only:p.tls_only===void 0||p.tls_only,webfist_fallback:p.webfist_fallback!==void 0&&p.webfist_fallback,uri_fallback:p.uri_fallback!==void 0&&p.uri_fallback,request_timeout:p.request_timeout!==void 0?p.request_timeout:1e4}}f.prototype.__fetchJRD=function(p,d,S){if(typeof fetch=="function")return this.__fetchJRD_fetch(p,d,S);if(typeof XMLHttpRequest=="function")return this.__fetchJRD_XHR(p,d,S);throw new Error("add a polyfill for fetch or XMLHttpRequest")},f.prototype.__fetchJRD_fetch=function(p,d,S){var k,A=this;typeof AbortController=="function"&&(k=new AbortController);var C=fetch(p,{headers:{Accept:"application/jrd+json, application/json"},signal:k?k.signal:void 0}).then(function(R){if(R.ok)return R.text();throw R.status===404?h({message:"resource not found",url:p,status:R.status}):h({message:"error during request",url:p,status:R.status})},function(R){throw h({message:"error during request",url:p,status:void 0,err:R})}).then(function(R){if(A.__isValidJSON(R))return R;throw h({message:"invalid json",url:p,status:void 0})}),B=new Promise(function(R,D){setTimeout(function(){D(h({message:"request timed out",url:p,status:void 0})),k&&k.abort()},A.config.request_timeout)});Promise.race([C,B]).then(function(R){S(R)}).catch(function(R){d(R)})},f.prototype.__fetchJRD_XHR=function(p,d,S){var k=this,A=!1,C=new XMLHttpRequest;function B(){if(!A){if(A=!0,C.status===200)return k.__isValidJSON(C.responseText)?S(C.responseText):d(h({message:"invalid json",url:p,status:C.status}));if(C.status===404)return d(h({message:"resource not found",url:p,status:C.status}));if(C.status>=301&&C.status<=302){var D=C.getResponseHeader("Location");return function(L){return typeof L=="string"&&L.split("://")[0]==="https"}(D)?R():d(h({message:"no redirect URL found",url:p,status:C.status}))}return d(h({message:"error during request",url:p,status:C.status}))}}function R(){C.onreadystatechange=function(){C.readyState===4&&B()},C.onload=function(){B()},C.ontimeout=function(){return d(h({message:"request timed out",url:p,status:C.status}))},C.open("GET",p,!0),C.timeout=k.config.request_timeout,C.setRequestHeader("Accept","application/jrd+json, application/json"),C.send()}return R()},f.prototype.__isValidJSON=function(p){try{JSON.parse(p)}catch{return!1}return!0},f.prototype.__isLocalhost=function(p){return/^localhost(\.localdomain)?(\:[0-9]+)?$/.test(p)},f.prototype.__processJRD=function(p,d,S,k){var A=JSON.parse(d);if(typeof A!="object"||typeof A.links!="object")return A.error!==void 0?S(h({message:A.error,request:p})):S(h({message:"unknown response from server",request:p}));var C=A.links;Array.isArray(C)||(C=[]);var B={object:A,json:d,idx:{}};B.idx.properties={name:void 0},B.idx.links=JSON.parse(JSON.stringify(c)),C.map(function(L,g){if(o.hasOwnProperty(L.rel)&&B.idx.links[o[L.rel]]){var I={};Object.keys(L).map(function(l,m){I[l]=L[l]}),B.idx.links[o[L.rel]].push(I)}});var R=JSON.parse(d).properties;for(var D in R)R.hasOwnProperty(D)&&D==="http://packetizer.com/ns/name"&&(B.idx.properties.name=R[D]);return k(B)},f.prototype.lookup=function(p,d){if(typeof p!="string")throw new Error("first parameter must be a user address");if(typeof d!="function")throw new Error("second parameter must be a callback");var S=this,k="";k=p.indexOf("://")>-1?p.replace(/ /g,"").split("/")[2]:p.replace(/ /g,"").split("@")[1];var A=0,C="https";function B(){var L="";return p.split("://")[1]||(L="acct:"),C+"://"+k+"/.well-known/"+u[A]+"?resource="+L+p}function R(L){if(S.config.uri_fallback&&k!=="webfist.org"&&A!==u.length-1)return A+=1,D();if(!S.config.tls_only&&C==="https")return A=0,C="http",D();if(!S.config.webfist_fallback||k==="webfist.org")return d(L);A=0,C="http",k="webfist.org";var g=B();S.__fetchJRD(g,d,function(I){S.__processJRD(g,I,d,function(l){typeof l.idx.links.webfist=="object"&&typeof l.idx.links.webfist[0].href=="string"&&S.__fetchJRD(l.idx.links.webfist[0].href,d,function(m){S.__processJRD(g,m,d,function(v){return d(null,d)})})})})}function D(){var L=B();S.__fetchJRD(L,R,function(g){S.__processJRD(L,g,d,function(I){d(null,I)})})}return S.__isLocalhost(k)&&(C="http"),setTimeout(D,0)},f.prototype.lookupLink=function(p,d,S){if(!c.hasOwnProperty(d))return S("unsupported rel "+d);this.lookup(p,function(k,A){var C=A.idx.links[d];return k?S(k):C.length===0?S('no links found with rel="'+d+'"'):S(null,C[0])})},(s=function(){return f}.apply(n,[]))===void 0||(r.exports=s)}()},function(r,n){r.exports=XMLHttpRequest},function(r,n,i){var s=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};const a=s(i(3)),o=s(i(16)),c=s(i(1)),u=i(0),h=s(i(30)),f=s(i(11)),p=s(i(6)),d=s(i(15)),S=s(i(7)),k=s(i(13)),A=s(i(14)),C=s(i(8)),B=s(i(31)),R=s(i(12)),D=s(i(32)),L=s(i(33)),g=s(i(34)),I={features:[],featuresDone:0,readyFired:!1,loadFeatures(){this.features=[],this.featuresDone=0,this.readyFired=!1,this.featureModules={WireClient:C.default,Dropbox:A.default,GoogleDrive:k.default,Access:f.default,Discover:d.default,Authorize:p.default,BaseClient:S.default,Env:o.default},a.default.cache&&u.extend(this.featureModules,{Caching:R.default,IndexedDB:D.default,LocalStorage:L.default,InMemoryStorage:g.default,Sync:B.default}),a.default.disableFeatures.forEach(l=>{this.featureModules[l]&&delete this.featureModules[l]}),this._allLoaded=!1;for(const l in this.featureModules)this.loadFeature(l)},hasFeature(l){for(let m=this.features.length-1;m>=0;m--)if(this.features[m].name===l)return this.features[m].supported;return!1},loadFeature(l){const m=this.featureModules[l],v=!m._rs_supported||m._rs_supported();c.default(`[RemoteStorage] [FEATURE ${l}] initializing ...`),typeof v=="object"?v.then(()=>{this.featureSupported(l,!0),this.initFeature(l)},()=>{this.featureSupported(l,!1)}):typeof v=="boolean"?(this.featureSupported(l,v),v&&this.initFeature(l)):this.featureSupported(l,!1)},initFeature(l){const m=this.featureModules[l];let v;try{v=m._rs_init(this)}catch(y){return void this.featureFailed(l,y)}typeof v=="object"&&typeof v.then=="function"?v.then(()=>{this.featureInitialized(l)},y=>{this.featureFailed(l,y)}):this.featureInitialized(l)},featureFailed(l,m){c.default(`[RemoteStorage] [FEATURE ${l}] initialization failed (${m})`),this.featureDone()},featureSupported(l,m){c.default(`[RemoteStorage] [FEATURE ${l}]${m?"":"not "} supported`),m||this.featureDone()},featureInitialized(l){c.default(`[RemoteStorage] [FEATURE ${l}] initialized`),this.features.push({name:l,init:this.featureModules[l]._rs_init,supported:!0,cleanup:this.featureModules[l]._rs_cleanup}),this.featureDone()},featureDone(){this.featuresDone++,this.featuresDone===Object.keys(this.featureModules).length&&setTimeout(this.featuresLoaded.bind(this),0)},_setCachingModule(){["IndexedDB","LocalStorage","InMemoryStorage"].some(l=>{if(this.features.some(m=>m.name===l))return this.features.local=this.featureModules[l],!0})},_fireReady(){try{this.readyFired||(this._emit("ready"),this.readyFired=!0)}catch(l){console.error("'ready' failed: ",l,l.stack),this._emit("error",l)}},featuresLoaded(){c.default("[RemoteStorage] All features loaded"),this._setCachingModule(),this.local=a.default.cache&&this.features.local&&new this.features.local,this.local&&this.remote?(this._setGPD(h.default,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",()=>{this._fireReady(),this._emit("connected")}),this.remote.on("not-connected",()=>{this._fireReady(),this._emit("not-connected")}),this.remote.connected&&(this._fireReady(),this._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(l){u.logError(l),this._emit("error",l)}this._processPending()},_collectCleanupFunctions(){this._cleanups=[];for(let l=0;l<this.features.length;l++){const m=this.features[l].cleanup;typeof m=="function"&&this._cleanups.push(m)}}};r.exports=I},function(r,n,i){var s=this&&this.__awaiter||function(u,h,f,p){return new(f||(f=Promise))(function(d,S){function k(B){try{C(p.next(B))}catch(R){S(R)}}function A(B){try{C(p.throw(B))}catch(R){S(R)}}function C(B){var R;B.done?d(B.value):(R=B.value,R instanceof f?R:new f(function(D){D(R)})).then(k,A)}C((p=p.apply(u,h||[])).next())})};const a=(this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}})(i(1));function o(u){return this.backend==="dropbox"&&!!u.match(/^\/public\/.*[^\/]$/)}const c={get:function(u,h){if(this.local){if(h===void 0)h=typeof(f=this).remote=="object"&&f.remote.connected&&f.remote.online?2*f.getSyncInterval():(a.default("Not setting default maxAge, because remote is offline or not connected"),!1);else if(typeof h!="number"&&h!==!1)return Promise.reject("Argument 'maxAge' must be 'false' or a number");return this.local.get(u,h,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(u);var f},put:function(u,h,f){return o.bind(this)(u)?c._wrapBusyDone.call(this,this.remote.put(u,h,f)):this.local?this.local.put(u,h,f):c._wrapBusyDone.call(this,this.remote.put(u,h,f))},delete:function(u){return this.local?this.local.delete(u):c._wrapBusyDone.call(this,this.remote.delete(u))},_wrapBusyDone:function(u){return s(this,void 0,void 0,function*(){return this._emit("wire-busy"),u.then(h=>(this._emit("wire-done",{success:!0}),Promise.resolve(h)),h=>(this._emit("wire-done",{success:!1}),Promise.reject(h)))})}};r.exports=c},function(r,n,i){var s=this&&this.__awaiter||function(L,g,I,l){return new(I||(I=Promise))(function(m,v){function y(O){try{N(l.next(O))}catch(W){v(W)}}function w(O){try{N(l.throw(O))}catch(W){v(W)}}function N(O){var W;O.done?m(O.value):(W=O.value,W instanceof I?W:new I(function(Z){Z(W)})).then(y,w)}N((l=l.apply(L,g||[])).next())})},a=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};const o=a(i(3)),c=a(i(16)),u=a(i(2)),h=a(i(1)),f=a(i(6)),p=a(i(9)),d=a(i(4)),S=i(0);let k,A;function C(L,g,I){return{action:L,path:g,promise:I}}function B(L,g){return L.common.revision!==g&&(!L.remote||L.remote.revision!==g)}function R(L){return L.common&&L.common.revision}class D{constructor(g){this.rs=g,this._tasks={},this._running={},this._timeStarted={},this.numThreads=10,this.rs.local.onDiff(I=>{this.addTask(I),this.doTasks()}),this.rs.caching.onActivate(I=>{this.addTask(I),this.doTasks()}),this.addEvents(["done","req-done"])}now(){return new Date().getTime()}queueGetRequest(g){return new Promise((I,l)=>{this.rs.remote.connected?this.rs.remote.online?(this.addTask(g,function(){this.rs.local.get(g).then(m=>I(m))}.bind(this)),this.doTasks()):l("cannot fulfill maxAge requirement - remote is not online"):l("cannot fulfill maxAge requirement - remote is not connected")})}corruptServerItemsMap(g,I){if(typeof g!="object"||Array.isArray(g))return!0;for(const l in g){const m=g[l];if(typeof m!="object"||typeof m.ETag!="string")return!0;if(S.isFolder(l)){if(l.substring(0,l.length-1).indexOf("/")!==-1)return!0}else if(l.indexOf("/")!==-1||I&&(typeof m["Content-Type"]!="string"||typeof m["Content-Length"]!="number"))return!0}return!1}corruptItemsMap(g){if(typeof g!="object"||Array.isArray(g))return!0;for(const I in g)if(typeof g[I]!="boolean")return!0;return!1}corruptRevision(g){return typeof g!="object"||Array.isArray(g)||g.revision&&typeof g.revision!="string"||g.body&&typeof g.body!="string"&&typeof g.body!="object"||g.contentType&&typeof g.contentType!="string"||g.contentLength&&typeof g.contentLength!="number"||g.timestamp&&typeof g.timestamp!="number"||g.itemsMap&&this.corruptItemsMap(g.itemsMap)}isCorrupt(g){return typeof g!="object"||Array.isArray(g)||typeof g.path!="string"||this.corruptRevision(g.common)||g.local&&this.corruptRevision(g.local)||g.remote&&this.corruptRevision(g.remote)||g.push&&this.corruptRevision(g.push)}hasTasks(){return Object.getOwnPropertyNames(this._tasks).length>0}collectDiffTasks(){return s(this,void 0,void 0,function*(){let g=0;return this.rs.local.forAllNodes(I=>{g>100||(this.isCorrupt(I)?(h.default("[Sync] WARNING: corrupt node in local cache",I),typeof I=="object"&&I.path&&(this.addTask(I.path),g++)):(this.needsFetch(I)&&this.rs.access.checkPathPermission(I.path,"r")||S.isDocument(I.path)&&this.needsPush(I)&&this.rs.access.checkPathPermission(I.path,"rw"))&&(this.addTask(I.path),g++))}).then(()=>g).catch(I=>{throw I})})}inConflict(g){return g.local&&g.remote&&(g.remote.body!==void 0||g.remote.itemsMap)}needsRefresh(g){return!!g.common&&(!g.common.timestamp||this.now()-g.common.timestamp>o.default.syncInterval)}needsFetch(g){return!!this.inConflict(g)||!(!g.common||g.common.itemsMap!==void 0||g.common.body!==void 0)||!(!g.remote||g.remote.itemsMap!==void 0||g.remote.body!==void 0)}needsPush(g){return!this.inConflict(g)&&(!(!g.local||g.push)||void 0)}needsRemotePut(g){return g.local&&g.local.body}needsRemoteDelete(g){return g.local&&g.local.body===!1}getParentPath(g){const I=g.match(/^(.*\/)([^\/]+\/?)$/);if(I)return I[1];throw new Error('Not a valid path: "'+g+'"')}deleteChildPathsFromTasks(){for(const g in this._tasks){const I=S.pathsFromRoot(g);for(let l=1;l<I.length;l++)this._tasks[I[l]]&&(Array.isArray(this._tasks[g])&&this._tasks[g].length&&Array.prototype.push.apply(this._tasks[I[l]],this._tasks[g]),delete this._tasks[g])}}collectRefreshTasks(){return s(this,void 0,void 0,function*(){return this.rs.local.forAllNodes(g=>{let I;if(this.needsRefresh(g)){try{I=this.getParentPath(g.path)}catch{}I&&this.rs.access.checkPathPermission(I,"r")?this.addTask(I):this.rs.access.checkPathPermission(g.path,"r")&&this.addTask(g.path)}}).then(()=>this.deleteChildPathsFromTasks()).catch(g=>{throw g})})}flush(g){for(const I in g)this.rs.caching.checkPath(I)==="FLUSH"&&g[I]&&!g[I].local&&(h.default("[Sync] Flushing",I),g[I]=void 0);return g}doTask(g){return this.rs.local.getNodes([g]).then(I=>{const l=I[g];return l===void 0||function(m){return m.remote&&m.remote.revision&&!m.remote.itemsMap&&!m.remote.body}(l)?C("get",g,this.rs.remote.get(g)):this.needsRemotePut(l)?(l.push=S.deepClone(l.local),l.push.timestamp=this.now(),this.rs.local.setNodes(this.flush(I)).then(()=>{let m;return m=R(l)?{ifMatch:l.common.revision}:{ifNoneMatch:"*"},C("put",g,this.rs.remote.put(g,l.push.body,l.push.contentType,m))})):this.needsRemoteDelete(l)?(l.push={body:!1,timestamp:this.now()},this.rs.local.setNodes(this.flush(I)).then(()=>R(l)?C("delete",g,this.rs.remote.delete(g,{ifMatch:l.common.revision})):C("get",g,this.rs.remote.get(g)))):R(l)?C("get",g,this.rs.remote.get(g,{ifNoneMatch:l.common.revision})):C("get",g,this.rs.remote.get(g))})}autoMergeFolder(g){if(g.remote.itemsMap&&(g.common=g.remote,delete g.remote,g.common.itemsMap)){for(const I in g.common.itemsMap)g.local.itemsMap[I]||(g.local.itemsMap[I]=!1);S.equal(g.local.itemsMap,g.common.itemsMap)&&delete g.local}return g}autoMergeDocument(g){return function(I){return(!I.remote||!I.remote.revision||I.remote.revision===I.common.revision)&&(I.common.body===void 0&&I.remote.body===!1||I.remote.body===I.common.body&&I.remote.contentType===I.common.contentType)}(g)?delete(g=function(I){return I.remote&&I.remote.body===!1&&I.local&&I.local.body===!1&&delete I.local,I}(g)).remote:g.remote.body!==void 0&&(h.default("[Sync] Emitting keep/revert"),this.rs.local._emitChange({origin:"conflict",path:g.path,oldValue:g.local.body,newValue:g.remote.body,lastCommonValue:g.common.body,oldContentType:g.local.contentType,newContentType:g.remote.contentType,lastCommonContentType:g.common.contentType}),g.remote.body?g.common=g.remote:g.common={},delete g.remote,delete g.local),g}autoMerge(g){if(g.remote){if(g.local)return S.isFolder(g.path)?this.autoMergeFolder(g):this.autoMergeDocument(g);if(S.isFolder(g.path))g.remote.itemsMap!==void 0&&(g.common=g.remote,delete g.remote);else if(g.remote.body!==void 0){const I={origin:"remote",path:g.path,oldValue:g.common.body===!1?void 0:g.common.body,newValue:g.remote.body===!1?void 0:g.remote.body,oldContentType:g.common.contentType,newContentType:g.remote.contentType};if((I.oldValue||I.newValue)&&this.rs.local._emitChange(I),!g.remote.body)return;g.common=g.remote,delete g.remote}return g}g.common.body&&this.rs.local._emitChange({origin:"remote",path:g.path,oldValue:g.common.body,newValue:void 0,oldContentType:g.common.contentType,newContentType:void 0})}updateCommonTimestamp(g,I){return s(this,void 0,void 0,function*(){return this.rs.local.getNodes([g]).then(l=>(l[g]&&l[g].common&&l[g].common.revision===I&&(l[g].common.timestamp=this.now()),this.rs.local.setNodes(this.flush(l))))})}markChildren(g,I,l,m){return s(this,void 0,void 0,function*(){const v=[],y={},w={};for(const N in I)v.push(g+N),y[g+N]=I[N];for(const N in m)v.push(g+N);return this.rs.local.getNodes(v).then(N=>{let O,W;for(const Z in N)if(W=N[Z],y[Z])W&&W.common?B(W,y[Z].ETag)&&(l[Z]=S.deepClone(W),l[Z].remote={revision:y[Z].ETag,timestamp:this.now()},l[Z]=this.autoMerge(l[Z])):(O=this.rs.caching.checkPath(Z),O==="ALL"&&(l[Z]={path:Z,common:{timestamp:this.now()},remote:{revision:y[Z].ETag,timestamp:this.now()}})),l[Z]&&y[Z]["Content-Type"]&&(l[Z].remote.contentType=y[Z]["Content-Type"]),l[Z]&&y[Z]["Content-Length"]&&(l[Z].remote.contentLength=y[Z]["Content-Length"]);else if(m[Z.substring(g.length)]&&W&&W.common){if(W.common.itemsMap)for(const b in W.common.itemsMap)w[Z+b]=!0;if(W.local&&W.local.itemsMap)for(const b in W.local.itemsMap)w[Z+b]=!0;if(W.remote||S.isFolder(Z))l[Z]=void 0;else if(l[Z]=this.autoMerge(W),l[Z]===void 0){const b=this.getParentPath(Z),U=l[b],G=Z.substring(g.length);U&&U.local&&(delete U.local.itemsMap[G],S.equal(U.local.itemsMap,U.common.itemsMap)&&delete U.local)}}return this.deleteRemoteTrees(Object.keys(w),l).then(Z=>this.rs.local.setNodes(this.flush(Z)))})})}deleteRemoteTrees(g,I){return s(this,void 0,void 0,function*(){return g.length===0?Promise.resolve(I):this.rs.local.getNodes(g).then(l=>s(this,void 0,void 0,function*(){const m={};function v(y,w){if(y&&y.itemsMap)for(const N in y.itemsMap)m[w+N]=!0}for(const y in l){const w=l[y];w&&(S.isFolder(y)?(v(w.common,y),v(w.local,y)):w.common&&typeof w.common.body!==void 0&&(I[y]=S.deepClone(w),I[y].remote={body:!1,timestamp:this.now()},I[y]=this.autoMerge(I[y])))}return this.deleteRemoteTrees(Object.keys(m),I).then(y=>this.rs.local.setNodes(this.flush(y)))}))})}completeFetch(g,I,l,m){return s(this,void 0,void 0,function*(){let v,y;const w=S.pathsFromRoot(g);return S.isFolder(g)?v=[g]:(y=w[1],v=[g,y]),this.rs.local.getNodes(v).then(N=>{let O,W,Z=N[g];const b={};function U(G){if(G&&G.itemsMap)for(O in G.itemsMap)I[O]||(b[O]=!0)}if(typeof Z=="object"&&Z.path===g&&typeof Z.common=="object"||(Z={path:g,common:{}},N[g]=Z),Z.remote={revision:m,timestamp:this.now()},S.isFolder(g))for(O in U(Z.common),U(Z.remote),Z.remote.itemsMap={},I)Z.remote.itemsMap[O]=!0;else Z.remote.body=I,Z.remote.contentType=l,W=N[y],W&&W.local&&W.local.itemsMap&&(O=g.substring(y.length),W.local.itemsMap[O]=!0,S.equal(W.local.itemsMap,W.common.itemsMap)&&delete W.local);return N[g]=this.autoMerge(Z),{toBeSaved:N,missingChildren:b}})})}completePush(g,I,l,m){return s(this,void 0,void 0,function*(){return this.rs.local.getNodes([g]).then(v=>{const y=v[g];if(!y.push)throw this.stopped=!0,new Error("completePush called but no push version!");return l?(h.default("[Sync] We have a conflict"),y.remote&&y.remote.revision===m||(y.remote={revision:m||"conflict",timestamp:this.now()},delete y.push),v[g]=this.autoMerge(y)):(y.common={revision:m,timestamp:this.now()},I==="put"?(y.common.body=y.push.body,y.common.contentType=y.push.contentType,S.equal(y.local.body,y.push.body)&&y.local.contentType===y.push.contentType&&delete y.local,delete y.push):I==="delete"&&(y.local.body===!1?v[g]=void 0:delete y.push)),this.rs.local.setNodes(this.flush(v))})})}dealWithFailure(g){return s(this,void 0,void 0,function*(){return this.rs.local.getNodes([g]).then(I=>{if(I[g])return delete I[g].push,this.rs.local.setNodes(this.flush(I))})})}interpretStatus(g){const I={statusCode:g,successful:void 0,conflict:void 0,unAuth:void 0,notFound:void 0,changed:void 0,networkProblems:void 0};if(typeof g=="string"&&(g==="offline"||g==="timeout"))return I.successful=!1,I.networkProblems=!0,I;if(typeof g=="number"){const l=Math.floor(g/100);return I.successful=l===2||g===304||g===412||g===404,I.conflict=g===412,I.unAuth=g===401&&this.rs.remote.token!==f.default.IMPLIED_FAKE_TOKEN||g===402||g===403,I.notFound=g===404,I.changed=g!==304,I}}handleGetResponse(g,I,l,m,v){return s(this,void 0,void 0,function*(){return I.notFound&&(l=!!S.isFolder(g)&&{}),I.changed?this.completeFetch(g,l,m,v).then(y=>S.isFolder(g)?this.corruptServerItemsMap(l)?(h.default("[Sync] WARNING: Discarding corrupt folder description from server for "+g),!1):this.markChildren(g,l,y.toBeSaved,y.missingChildren).then(()=>!0):this.rs.local.setNodes(this.flush(y.toBeSaved)).then(()=>!0)):this.updateCommonTimestamp(g,v).then(()=>!0)})}handleResponse(g,I,l){const m=this.interpretStatus(l.statusCode);if(m.successful){if(I==="get")return this.handleGetResponse(g,m,l.body,l.contentType,l.revision);if(I==="put"||I==="delete")return this.completePush(g,I,m.conflict,l.revision).then(function(){return!0});throw new Error("cannot handle response for unknown action "+I)}{let v;return v=m.unAuth?new d.default:m.networkProblems?new p.default("Network request failed."):new Error("HTTP response code "+m.statusCode+" received."),this.dealWithFailure(g).then(()=>{throw this.rs._emit("error",v),v})}}finishTask(g){if(g.action!==void 0)return g.promise.then(I=>this.handleResponse(g.path,g.action,I),I=>(h.default("[Sync] wireclient rejects its promise!",g.path,g.action,I),this.handleResponse(g.path,g.action,{statusCode:"offline"}))).then(I=>{if(delete this._timeStarted[g.path],delete this._running[g.path],I&&this._tasks[g.path]){for(let l=0;l<this._tasks[g.path].length;l++)this._tasks[g.path][l]();delete this._tasks[g.path]}this.rs._emit("sync-req-done"),this.collectTasks(!1).then(()=>{!this.hasTasks()||this.stopped?(h.default("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(this._tasks).length,this.stopped),this.done||(this.done=!0,this.rs._emit("sync-done"))):setTimeout(()=>{this.doTasks()},10)})},I=>{h.default("[Sync] Error",I),delete this._timeStarted[g.path],delete this._running[g.path],this.rs._emit("sync-req-done"),this.done||(this.done=!0,this.rs._emit("sync-done"))});delete this._running[g.path]}doTasks(){let g,I,l=0;g=this.rs.remote.connected?this.rs.remote.online?this.numThreads:1:0;const m=g-Object.getOwnPropertyNames(this._running).length;if(m<=0)return!0;for(I in this._tasks)if(!this._running[I]&&(this._timeStarted[I]=this.now(),this._running[I]=this.doTask(I),this._running[I].then(this.finishTask.bind(this)),l++,l>=m))return!0;return l>=m}collectTasks(g){return s(this,void 0,void 0,function*(){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(I=>I||g===!1?Promise.resolve():this.collectRefreshTasks(),function(I){throw I})})}addTask(g,I){this._tasks[g]||(this._tasks[g]=[]),typeof I=="function"&&this._tasks[g].push(I)}sync(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(()=>{try{this.doTasks()}catch(g){h.default("[Sync] doTasks error",g)}},function(g){throw h.default("[Sync] Sync error",g),new Error("Local cache unavailable")})}static _rs_init(g){k=function(){h.default("[Sync] syncCycleCb calling syncCycle");const I=new c.default;I.isBrowser()&&function(l,m){function v(y){const w=m.getCurrentSyncInterval();o.default.isBackground=!y;const N=m.getCurrentSyncInterval();m._emit("sync-interval-change",{oldValue:w,newValue:N})}l.on("background",()=>v(!1)),l.on("foreground",()=>v(!0))}(I,g),g.sync||(g.sync=new D(g),g.syncStopped&&(h.default("[Sync] Instantiating sync stopped"),g.sync.stopped=!0,delete g.syncStopped)),h.default("[Sync] syncCycleCb calling syncCycle"),g.syncCycle()},A=function(){g.removeEventListener("connected",A),g.startSync()},g.on("ready",k),g.on("connected",A)}static _rs_cleanup(g){g.stopSync(),g.removeEventListener("ready",k),g.removeEventListener("connected",A),g.sync=void 0,delete g.sync}}S.applyMixins(D,[u.default]),r.exports=D},function(r,n,i){(function(s){var a=this&&this.__awaiter||function(S,k,A,C){return new(A||(A=Promise))(function(B,R){function D(I){try{g(C.next(I))}catch(l){R(l)}}function L(I){try{g(C.throw(I))}catch(l){R(l)}}function g(I){var l;I.done?B(I.value):(l=I.value,l instanceof A?l:new A(function(m){m(l)})).then(D,L)}g((C=C.apply(S,k||[])).next())})},o=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};const c=o(i(2)),u=o(i(10)),h=o(i(1)),f=i(0);let p;class d extends u.default{constructor(k){super(),this.addEvents(["change","local-events-done"]),this.db=k||p,this.db?(this.getsRunning=0,this.putsRunning=0,this.changesQueued={},this.changesRunning={},this.commitSlownessWarning=null):h.default("[IndexedDB] Failed to open DB")}getNodes(k){return a(this,void 0,void 0,function*(){const A=[],C={};for(let B=0,R=k.length;B<R;B++)this.changesQueued[k[B]]!==void 0?C[k[B]]=f.deepClone(this.changesQueued[k[B]]||void 0):this.changesRunning[k[B]]!==void 0?C[k[B]]=f.deepClone(this.changesRunning[k[B]]||void 0):A.push(k[B]);return A.length>0?this.getNodesFromDb(A).then(function(B){for(const R in C)B[R]=C[R];return B}):Promise.resolve(C)})}setNodes(k){return a(this,void 0,void 0,function*(){for(const A in k)this.changesQueued[A]=k[A]||!1;return this.maybeFlush(),Promise.resolve()})}maybeFlush(){this.putsRunning===0?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=s.setInterval(function(){console.warn("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))}flushChangesQueued(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))}getNodesFromDb(k){return new Promise((A,C)=>{const B=this.db.transaction(["nodes"],"readonly"),R=B.objectStore("nodes"),D={};this.getsRunning++,k.map(L=>{R.get(L).onsuccess=g=>{D[L]=g.target.result}}),B.oncomplete=()=>{A(D),this.getsRunning--},B.onerror=B.onabort=()=>{C("get transaction error/abort"),this.getsRunning--}})}setNodesInDb(k){return a(this,void 0,void 0,function*(){return new Promise((A,C)=>{const B=this.db.transaction(["nodes"],"readwrite"),R=B.objectStore("nodes"),D=new Date().getTime();this.putsRunning++,h.default("[IndexedDB] Starting put",k,this.putsRunning);for(const L in k){const g=k[L];if(typeof g=="object")try{R.put(g)}catch(I){throw h.default("[IndexedDB] Error while putting",g,I),I}else try{R.delete(L)}catch(I){throw h.default("[IndexedDB] Error while removing",R,g,I),I}}B.oncomplete=()=>{this.putsRunning--,h.default("[IndexedDB] Finished put",k,this.putsRunning,new Date().getTime()-D+"ms"),A()},B.onerror=()=>{this.putsRunning--,C("transaction error")},B.onabort=()=>{C("transaction abort"),this.putsRunning--}})})}reset(k){const A=this.db.name;this.db.close(),d.clean(this.db.name,()=>{d.open(A,(C,B)=>{C?h.default("[IndexedDB] Error while resetting local storage",C):this.db=B,typeof k=="function"&&k(self)})})}forAllNodes(k){return a(this,void 0,void 0,function*(){return new Promise(A=>{this.db.transaction(["nodes"],"readonly").objectStore("nodes").openCursor().onsuccess=C=>{const B=C.target.result;B?(k(this.migrate(B.value)),B.continue()):A()}})})}closeDB(){this.putsRunning===0?this.db.close():setTimeout(this.closeDB.bind(this),100)}static open(k,A){const C=setTimeout(function(){A("timeout trying to open db")},1e4);try{const B=indexedDB.open(k,2);B.onerror=function(){h.default("[IndexedDB] Opening DB failed",B),clearTimeout(C),A(B.error)},B.onupgradeneeded=function(R){const D=B.result;h.default("[IndexedDB] Upgrade: from ",R.oldVersion," to ",R.newVersion),R.oldVersion!==1&&(h.default("[IndexedDB] Creating object store: nodes"),D.createObjectStore("nodes",{keyPath:"path"})),h.default("[IndexedDB] Creating object store: changes"),D.createObjectStore("changes",{keyPath:"path"})},B.onsuccess=function(){clearTimeout(C);const R=B.result;if(!R.objectStoreNames.contains("nodes")||!R.objectStoreNames.contains("changes"))return h.default("[IndexedDB] Missing object store. Resetting the database."),void d.clean(k,function(){d.open(k,A)});A(null,B.result)}}catch(B){h.default("[IndexedDB] Failed to open database: "+B),h.default("[IndexedDB] Resetting database and trying again."),clearTimeout(C),d.clean(k,function(){d.open(k,A)})}}static clean(k,A){const C=indexedDB.deleteDatabase(k);C.onsuccess=function(){h.default("[IndexedDB] Done removing DB"),A()},C.onerror=C.onabort=function(B){console.error('Failed to remove database "'+k+'"',B)}}static _rs_init(k){return new Promise((A,C)=>{d.open("remotestorage",function(B,R){B?C(B):(p=R,R.onerror=()=>{k._emit("error",B)},A())})})}static _rs_supported(){return new Promise((k,A)=>{const C=f.getGlobalContext();let B=!1;if(typeof navigator!="undefined"&&navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(B=!0)),"indexedDB"in C&&!B)try{const R=indexedDB.open("rs-check");R.onerror=function(){A()},R.onsuccess=function(){R.result.close(),indexedDB.deleteDatabase("rs-check"),k()}}catch{A()}else A()})}static _rs_cleanup(k){return new Promise(A=>{k.local&&k.local.closeDB(),d.clean("remotestorage",A)})}diffHandler(){}}f.applyMixins(d,[c.default]),r.exports=d}).call(this,i(5))},function(r,n,i){var s=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};const a=s(i(10)),o=s(i(2)),c=s(i(1)),u=i(0),h="remotestorage:cache:nodes:";function f(d){return d.substr(0,h.length)===h||d.substr(0,28)==="remotestorage:cache:changes:"}class p extends a.default{constructor(){super(),this.addEvents(["change","local-events-done"])}diffHandler(...S){}getNodes(S){const k={};for(let A=0,C=S.length;A<C;A++)try{k[S[A]]=JSON.parse(localStorage[h+S[A]])}catch{k[S[A]]=void 0}return Promise.resolve(k)}setNodes(S){for(const k in S)localStorage[h+k]=JSON.stringify(S[k]);return Promise.resolve()}forAllNodes(S){let k;for(let A=0,C=localStorage.length;A<C;A++)if(localStorage.key(A).substr(0,h.length)===h){try{k=this.migrate(JSON.parse(localStorage[localStorage.key(A)]))}catch{k=void 0}k&&S(k)}return Promise.resolve()}static _rs_init(){}static _rs_supported(){return u.localStorageAvailable()}static _rs_cleanup(){const S=[];for(let k=0,A=localStorage.length;k<A;k++){const C=localStorage.key(k);f(C)&&S.push(C)}S.forEach(k=>{c.default("[LocalStorage] Removing",k),delete localStorage[k]})}}u.applyMixins(p,[o.default]),r.exports=p},function(r,n,i){var s=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};const a=s(i(2)),o=s(i(10)),c=i(0);class u extends o.default{constructor(){super(),this._storage={},this.addEvents(["change","local-events-done"])}getNodes(f){const p={};for(let d=0,S=f.length;d<S;d++)p[f[d]]=this._storage[f[d]];return Promise.resolve(p)}setNodes(f){for(const p in f)f[p]===void 0?delete this._storage[p]:this._storage[p]=f[p];return Promise.resolve()}forAllNodes(f){for(const p in this._storage)f(this.migrate(this._storage[p]));return Promise.resolve()}diffHandler(){}static _rs_init(){}static _rs_supported(){return!0}static _rs_cleanup(){}}c.applyMixins(u,[a.default]),r.exports=u}])})})(Hh);var g3=y3(Hh.exports);const Hr=new g3;Hr.setApiKeys({dropbox:d3,googledrive:p3});/*! OpenPGP.js v5.3.0 - 2022-06-08 - this is LGPL licensed code, see LICENSE/our website https://openpgpjs.org/ for more information. */const Sr=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},hs=Symbol("doneWritingPromise"),Gh=Symbol("doneWritingResolve"),Vh=Symbol("doneWritingReject"),Fs=Symbol("readingIndex");class pn extends Array{constructor(){super(),this[hs]=new Promise((t,r)=>{this[Gh]=t,this[Vh]=r}),this[hs].catch(()=>{})}}function xe(e){return e&&e.getReader&&Array.isArray(e)}function Vs(e){if(!xe(e)){const t=e.getWriter(),r=t.releaseLock;return t.releaseLock=()=>{t.closed.catch(function(){}),r.call(t)},t}this.stream=e}pn.prototype.getReader=function(){return this[Fs]===void 0&&(this[Fs]=0),{read:async()=>(await this[hs],this[Fs]===this.length?{value:void 0,done:!0}:{value:this[this[Fs]++],done:!1})}},pn.prototype.readToEnd=async function(e){await this[hs];const t=e(this.slice(this[Fs]));return this.length=0,t},pn.prototype.clone=function(){const e=new pn;return e[hs]=this[hs].then(()=>{e.push(...this)}),e},Vs.prototype.write=async function(e){this.stream.push(e)},Vs.prototype.close=async function(){this.stream[Gh]()},Vs.prototype.abort=async function(e){return this.stream[Vh](e),e},Vs.prototype.releaseLock=function(){};const Ac=typeof Sr.process=="object"&&typeof Sr.process.versions=="object",w1=Ac&&void 0;function mr(e){return xe(e)?"array":Sr.ReadableStream&&Sr.ReadableStream.prototype.isPrototypeOf(e)?"web":qn&&qn.prototype.isPrototypeOf(e)?"ponyfill":w1&&w1.prototype.isPrototypeOf(e)?"node":!(!e||!e.getReader)&&"web-like"}function Sc(e){return Uint8Array.prototype.isPrototypeOf(e)}function Yh(e){if(e.length===1)return e[0];let t=0;for(let i=0;i<e.length;i++){if(!Sc(e[i]))throw Error("concatUint8Array: Data must be in the form of a Uint8Array");t+=e[i].length}const r=new Uint8Array(t);let n=0;return e.forEach(function(i){r.set(i,n),n+=i.length}),r}const b3=Ac&&void 0,_1=Ac&&void 0;let Ec,A0;if(_1){Ec=function(t){let r=!1;return new qn({start(n){t.pause(),t.on("data",i=>{r||(b3.isBuffer(i)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),n.enqueue(i),t.pause())}),t.on("end",()=>{r||n.close()}),t.on("error",i=>n.error(i))},pull(){t.resume()},cancel(n){r=!0,t.destroy(n)}})};class e extends _1{constructor(r,n){super(n),this._reader=Pn(r)}async _read(r){try{for(;;){const{done:n,value:i}=await this._reader.read();if(n){this.push(null);break}if(!this.push(i)||this._cancelling){this._reading=!1;break}}}catch(n){this.emit("error",n)}}_destroy(r){this._reader.cancel(r)}}A0=function(t,r){return new e(t,r)}}const A1=new WeakSet,ye=Symbol("externalBuffer");function sn(e){if(this.stream=e,e[ye]&&(this[ye]=e[ye].slice()),xe(e)){const n=e.getReader();return this._read=n.read.bind(n),this._releaseLock=()=>{},void(this._cancel=()=>{})}let t=mr(e);if(t==="node"&&(e=Ec(e)),t){const n=e.getReader();return this._read=n.read.bind(n),this._releaseLock=()=>{n.closed.catch(function(){}),n.releaseLock()},void(this._cancel=n.cancel.bind(n))}let r=!1;this._read=async()=>r||A1.has(e)?{value:void 0,done:!0}:(r=!0,{value:e,done:!1}),this._releaseLock=()=>{if(r)try{A1.add(e)}catch{}}}sn.prototype.read=async function(){return this[ye]&&this[ye].length?{done:!1,value:this[ye].shift()}:this._read()},sn.prototype.releaseLock=function(){this[ye]&&(this.stream[ye]=this[ye]),this._releaseLock()},sn.prototype.cancel=function(e){return this._cancel(e)},sn.prototype.readLine=async function(){let e,t=[];for(;!e;){let{done:r,value:n}=await this.read();if(n+="",r)return t.length?dr(t):void 0;const i=n.indexOf(`
`)+1;i&&(e=dr(t.concat(n.substr(0,i))),t=[]),i!==n.length&&t.push(n.substr(i))}return this.unshift(...t),e},sn.prototype.readByte=async function(){const{done:e,value:t}=await this.read();if(e)return;const r=t[0];return this.unshift($e(t,1)),r},sn.prototype.readBytes=async function(e){const t=[];let r=0;for(;;){const{done:n,value:i}=await this.read();if(n)return t.length?dr(t):void 0;if(t.push(i),r+=i.length,r>=e){const s=dr(t);return this.unshift($e(s,e)),$e(s,0,e)}}},sn.prototype.peekBytes=async function(e){const t=await this.readBytes(e);return this.unshift(t),t},sn.prototype.unshift=function(...e){this[ye]||(this[ye]=[]),e.length===1&&Sc(e[0])&&this[ye].length&&e[0].length&&this[ye][0].byteOffset>=e[0].length?this[ye][0]=new Uint8Array(this[ye][0].buffer,this[ye][0].byteOffset-e[0].length,this[ye][0].byteLength+e[0].length):this[ye].unshift(...e.filter(t=>t&&t.length))},sn.prototype.readToEnd=async function(e=dr){const t=[];for(;;){const{done:r,value:n}=await this.read();if(r)break;t.push(n)}return e(t)};let Bu,Jh,{ReadableStream:qn,WritableStream:Xh,TransformStream:Es}=Sr;async function Zh(){if(Es)return;const[e,t]=await Promise.all([Promise.resolve().then(function(){return Jp}),Promise.resolve().then(function(){return e6})]);({ReadableStream:qn,WritableStream:Xh,TransformStream:Es}=e);const{createReadableStreamWrapper:r}=t;Sr.ReadableStream&&qn!==Sr.ReadableStream&&(Bu=r(qn),Jh=r(Sr.ReadableStream))}const la=Ac&&void 0;function Fa(e){let t=mr(e);return t==="node"?Ec(e):t==="web"&&Bu?Bu(e):t?e:new qn({start(r){r.enqueue(e),r.close()}})}function Qh(e){if(mr(e))return e;const t=new pn;return(async()=>{const r=yr(t);await r.write(e),await r.close()})(),t}function dr(e){return e.some(t=>mr(t)&&!xe(t))?function(t){t=t.map(Fa);const r=ef(async function(s){await Promise.all(i.map(a=>zu(a,s)))});let n=Promise.resolve();const i=t.map((s,a)=>$n(s,(o,c)=>(n=n.then(()=>_i(o,r.writable,{preventClose:a!==t.length-1})),n)));return r.readable}(e):e.some(t=>xe(t))?function(t){const r=new pn;let n=Promise.resolve();return t.forEach((i,s)=>(n=n.then(()=>_i(i,r,{preventClose:s!==t.length-1})),n)),r}(e):typeof e[0]=="string"?e.join(""):la&&la.isBuffer(e[0])?la.concat(e):Yh(e)}function Pn(e){return new sn(e)}function yr(e){return new Vs(e)}async function _i(e,t,{preventClose:r=!1,preventAbort:n=!1,preventCancel:i=!1}={}){if(mr(e)&&!xe(e)){e=Fa(e);try{if(e[ye]){const o=yr(t);for(let c=0;c<e[ye].length;c++)await o.ready,await o.write(e[ye][c]);o.releaseLock()}await e.pipeTo(t,{preventClose:r,preventAbort:n,preventCancel:i})}catch{}return}const s=Pn(e=Qh(e)),a=yr(t);try{for(;;){await a.ready;const{done:o,value:c}=await s.read();if(o){r||await a.close();break}await a.write(c)}}catch(o){n||await a.abort(o)}finally{s.releaseLock(),a.releaseLock()}}function tf(e,t){const r=new Es(t);return _i(e,r.writable),r.readable}function ef(e){let t,r,n=!1;return{readable:new qn({start(i){r=i},pull(){t?t():n=!0},cancel:e},{highWaterMark:0}),writable:new Xh({write:async function(i){r.enqueue(i),n?n=!1:(await new Promise(s=>{t=s}),t=null)},close:r.close.bind(r),abort:r.error.bind(r)})}}function _e(e,t=()=>{},r=()=>{}){if(xe(e)){const s=new pn;return(async()=>{const a=await Re(e),o=t(a),c=r();let u;u=o!==void 0&&c!==void 0?dr([o,c]):o!==void 0?o:c;const h=yr(s);await h.write(u),await h.close()})(),s}if(mr(e))return tf(e,{async transform(s,a){try{const o=await t(s);o!==void 0&&a.enqueue(o)}catch(o){a.error(o)}},async flush(s){try{const a=await r();a!==void 0&&s.enqueue(a)}catch(a){s.error(a)}}});const n=t(e),i=r();return n!==void 0&&i!==void 0?dr([n,i]):n!==void 0?n:i}function $n(e,t){if(mr(e)&&!xe(e)){let n;const i=new Es({start(o){n=o}}),s=_i(e,i.writable),a=ef(async function(o){n.error(o),await s,await new Promise(setTimeout)});return t(i.readable,a.writable),a.readable}e=Qh(e);const r=new pn;return t(e,r),r}function kc(e,t){let r;const n=$n(e,(i,s)=>{const a=Pn(i);a.remainder=()=>(a.releaseLock(),_i(i,s),n),r=t(a)});return r}function Gi(e){if(xe(e))return e.clone();if(mr(e)){const t=function(r){if(xe(r))throw Error("ArrayStream cannot be tee()d, use clone() instead");if(mr(r)){const n=Fa(r).tee();return n[0][ye]=n[1][ye]=r[ye],n}return[$e(r),$e(r)]}(e);return rf(e,t[0]),t[1]}return $e(e)}function bs(e){return xe(e)?Gi(e):mr(e)?new qn({start(t){const r=$n(e,async(n,i)=>{const s=Pn(n),a=yr(i);try{for(;;){await a.ready;const{done:o,value:c}=await s.read();if(o){try{t.close()}catch{}return void await a.close()}try{t.enqueue(c)}catch{}await a.write(c)}}catch(o){t.error(o),await a.abort(o)}});rf(e,r)}}):$e(e)}function rf(e,t){Object.entries(Object.getOwnPropertyDescriptors(e.constructor.prototype)).forEach(([r,n])=>{r!=="constructor"&&(n.value?n.value=n.value.bind(t):n.get=n.get.bind(t),Object.defineProperty(e,r,n))})}function $e(e,t=0,r=1/0){if(xe(e))throw Error("Not implemented");if(mr(e)){if(t>=0&&r>=0){let n=0;return tf(e,{transform(i,s){n<r?(n+i.length>=t&&s.enqueue($e(i,Math.max(t-n,0),r-n)),n+=i.length):s.terminate()}})}if(t<0&&(r<0||r===1/0)){let n=[];return _e(e,i=>{i.length>=-t?n=[i]:n.push(i)},()=>$e(dr(n),t,r))}if(t===0&&r<0){let n;return _e(e,i=>{const s=n?dr([n,i]):i;if(s.length>=-r)return n=$e(s,r),$e(s,t,r);n=s})}return console.warn(`stream.slice(input, ${t}, ${r}) not implemented efficiently.`),Pi(async()=>$e(await Re(e),t,r))}return e[ye]&&(e=dr(e[ye].concat([e]))),!Sc(e)||la&&la.isBuffer(e)?e.slice(t,r):(r===1/0&&(r=e.length),e.subarray(t,r))}async function Re(e,t=dr){return xe(e)?e.readToEnd(t):mr(e)?Pn(e).readToEnd(t):e}async function zu(e,t){if(mr(e)){if(e.cancel)return e.cancel(t);if(e.destroy)return e.destroy(t),await new Promise(setTimeout),t}}function Pi(e){const t=new pn;return(async()=>{const r=yr(t);try{await r.write(await e()),await r.close()}catch(n){await r.abort(n)}})(),t}class rr{constructor(t){if(t===void 0)throw Error("Invalid BigInteger input");if(t instanceof Uint8Array){const r=t,n=Array(r.length);for(let i=0;i<r.length;i++){const s=r[i].toString(16);n[i]=r[i]<=15?"0"+s:s}this.value=BigInt("0x0"+n.join(""))}else this.value=BigInt(t)}clone(){return new rr(this.value)}iinc(){return this.value++,this}inc(){return this.clone().iinc()}idec(){return this.value--,this}dec(){return this.clone().idec()}iadd(t){return this.value+=t.value,this}add(t){return this.clone().iadd(t)}isub(t){return this.value-=t.value,this}sub(t){return this.clone().isub(t)}imul(t){return this.value*=t.value,this}mul(t){return this.clone().imul(t)}imod(t){return this.value%=t.value,this.isNegative()&&this.iadd(t),this}mod(t){return this.clone().imod(t)}modExp(t,r){if(r.isZero())throw Error("Modulo cannot be zero");if(r.isOne())return new rr(0);if(t.isNegative())throw Error("Unsopported negative exponent");let n=t.value,i=this.value;i%=r.value;let s=BigInt(1);for(;n>BigInt(0);){const a=n&BigInt(1);n>>=BigInt(1);const o=s*i%r.value;s=a?o:s,i=i*i%r.value}return new rr(s)}modInv(t){const{gcd:r,x:n}=this._egcd(t);if(!r.isOne())throw Error("Inverse does not exist");return n.add(t).mod(t)}_egcd(t){let r=BigInt(0),n=BigInt(1),i=BigInt(1),s=BigInt(0),a=this.value;for(t=t.value;t!==BigInt(0);){const o=a/t;let c=r;r=i-o*r,i=c,c=n,n=s-o*n,s=c,c=t,t=a%t,a=c}return{x:new rr(i),y:new rr(s),gcd:new rr(a)}}gcd(t){let r=this.value;for(t=t.value;t!==BigInt(0);){const n=t;t=r%t,r=n}return new rr(r)}ileftShift(t){return this.value<<=t.value,this}leftShift(t){return this.clone().ileftShift(t)}irightShift(t){return this.value>>=t.value,this}rightShift(t){return this.clone().irightShift(t)}equal(t){return this.value===t.value}lt(t){return this.value<t.value}lte(t){return this.value<=t.value}gt(t){return this.value>t.value}gte(t){return this.value>=t.value}isZero(){return this.value===BigInt(0)}isOne(){return this.value===BigInt(1)}isNegative(){return this.value<BigInt(0)}isEven(){return!(this.value&BigInt(1))}abs(){const t=this.clone();return this.isNegative()&&(t.value=-t.value),t}toString(){return this.value.toString()}toNumber(){const t=Number(this.value);if(t>Number.MAX_SAFE_INTEGER)throw Error("Number can only safely store up to 53 bits");return t}getBit(t){return(this.value>>BigInt(t)&BigInt(1))===BigInt(0)?0:1}bitLength(){const t=new rr(0),r=new rr(1),n=new rr(-1),i=this.isNegative()?n:t;let s=1;const a=this.clone();for(;!a.irightShift(r).equal(i);)s++;return s}byteLength(){const t=new rr(0),r=new rr(-1),n=this.isNegative()?r:t,i=new rr(8);let s=1;const a=this.clone();for(;!a.irightShift(i).equal(n);)s++;return s}toUint8Array(t="be",r){let n=this.value.toString(16);n.length%2==1&&(n="0"+n);const i=n.length/2,s=new Uint8Array(r||i),a=r?r-i:0;let o=0;for(;o<i;)s[o+a]=parseInt(n.slice(2*o,2*o+2),16),o++;return t!=="be"&&s.reverse(),s}}const S1=(()=>{try{return!1}catch{}return!1})(),H={isString:function(e){return typeof e=="string"||String.prototype.isPrototypeOf(e)},isArray:function(e){return Array.prototype.isPrototypeOf(e)},isUint8Array:Sc,isStream:mr,readNumber:function(e){let t=0;for(let r=0;r<e.length;r++)t+=256**r*e[e.length-1-r];return t},writeNumber:function(e,t){const r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e>>8*(t-n-1)&255;return r},readDate:function(e){const t=H.readNumber(e);return new Date(1e3*t)},writeDate:function(e){const t=Math.floor(e.getTime()/1e3);return H.writeNumber(t,4)},normalizeDate:function(e=Date.now()){return e===null||e===1/0?e:new Date(1e3*Math.floor(+e/1e3))},readMPI:function(e){const t=(e[0]<<8|e[1])+7>>>3;return e.subarray(2,2+t)},leftPad(e,t){const r=new Uint8Array(t),n=t-e.length;return r.set(e,n),r},uint8ArrayToMPI:function(e){const t=H.uint8ArrayBitLength(e);if(t===0)throw Error("Zero MPI");const r=e.subarray(e.length-Math.ceil(t/8)),n=new Uint8Array([(65280&t)>>8,255&t]);return H.concatUint8Array([n,r])},uint8ArrayBitLength:function(e){let t;for(t=0;t<e.length&&e[t]===0;t++);if(t===e.length)return 0;const r=e.subarray(t);return 8*(r.length-1)+H.nbits(r[0])},hexToUint8Array:function(e){const t=new Uint8Array(e.length>>1);for(let r=0;r<e.length>>1;r++)t[r]=parseInt(e.substr(r<<1,2),16);return t},uint8ArrayToHex:function(e){const t=[],r=e.length;let n,i=0;for(;i<r;){for(n=e[i++].toString(16);n.length<2;)n="0"+n;t.push(""+n)}return t.join("")},stringToUint8Array:function(e){return _e(e,t=>{if(!H.isString(t))throw Error("stringToUint8Array: Data must be in the form of a string");const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r})},uint8ArrayToString:function(e){const t=[],n=(e=new Uint8Array(e)).length;for(let i=0;i<n;i+=16384)t.push(String.fromCharCode.apply(String,e.subarray(i,i+16384<n?i+16384:n)));return t.join("")},encodeUTF8:function(e){const t=new TextEncoder("utf-8");function r(n,i=!1){return t.encode(n,{stream:!i})}return _e(e,r,()=>r("",!0))},decodeUTF8:function(e){const t=new TextDecoder("utf-8");function r(n,i=!1){return t.decode(n,{stream:!i})}return _e(e,r,()=>r(new Uint8Array,!0))},concat:dr,concatUint8Array:Yh,equalsUint8Array:function(e,t){if(!H.isUint8Array(e)||!H.isUint8Array(t))throw Error("Data must be in the form of a Uint8Array");if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},writeChecksum:function(e){let t=0;for(let r=0;r<e.length;r++)t=t+e[r]&65535;return H.writeNumber(t,2)},printDebug:function(e){S1&&console.log(e)},printDebugError:function(e){S1&&console.error(e)},nbits:function(e){let t=1,r=e>>>16;return r!==0&&(e=r,t+=16),r=e>>8,r!==0&&(e=r,t+=8),r=e>>4,r!==0&&(e=r,t+=4),r=e>>2,r!==0&&(e=r,t+=2),r=e>>1,r!==0&&(e=r,t+=1),t},double:function(e){const t=new Uint8Array(e.length),r=e.length-1;for(let n=0;n<r;n++)t[n]=e[n]<<1^e[n+1]>>7;return t[r]=e[r]<<1^135*(e[0]>>7),t},shiftRight:function(e,t){if(t)for(let r=e.length-1;r>=0;r--)e[r]>>=t,r>0&&(e[r]|=e[r-1]<<8-t);return e},getWebCrypto:function(){return Sr!==void 0&&Sr.crypto&&Sr.crypto.subtle},detectBigInt:()=>typeof BigInt!="undefined",getBigInteger:async function(){if(H.detectBigInt())return rr;{const{default:e}=await Promise.resolve().then(function(){return r6});return e}},getNodeCrypto:function(){},getNodeZlib:function(){},getNodeBuffer:function(){return{}.Buffer},getHardwareConcurrency:function(){return typeof navigator!="undefined"?navigator.hardwareConcurrency||1:(void 0).cpus().length},isEmailAddress:function(e){return H.isString(e)?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+([a-zA-Z]{2,}|xn--[a-zA-Z\-0-9]+)))$/.test(e):!1},canonicalizeEOL:function(e){let t=!1;return _e(e,r=>{let n;t&&(r=H.concatUint8Array([new Uint8Array([13]),r])),r[r.length-1]===13?(t=!0,r=r.subarray(0,-1)):t=!1;const i=[];for(let o=0;n=r.indexOf(10,o)+1,n;o=n)r[n-2]!==13&&i.push(n);if(!i.length)return r;const s=new Uint8Array(r.length+i.length);let a=0;for(let o=0;o<i.length;o++){const c=r.subarray(i[o-1]||0,i[o]);s.set(c,a),a+=c.length,s[a-1]=13,s[a]=10,a++}return s.set(r.subarray(i[i.length-1]||0),a),s},()=>t?new Uint8Array([13]):void 0)},nativeEOL:function(e){let t=!1;return _e(e,r=>{let n;(r=t&&r[0]!==10?H.concatUint8Array([new Uint8Array([13]),r]):new Uint8Array(r))[r.length-1]===13?(t=!0,r=r.subarray(0,-1)):t=!1;let i=0;for(let s=0;s!==r.length;s=n){n=r.indexOf(13,s)+1,n||(n=r.length);const a=n-(r[n]===10?1:0);s&&r.copyWithin(i,s,a),i+=a-s}return r.subarray(0,i)},()=>t?new Uint8Array([13]):void 0)},removeTrailingSpaces:function(e){return e.split(`
`).map(t=>{let r=t.length-1;for(;r>=0&&(t[r]===" "||t[r]==="	");r--);return t.substr(0,r+1)}).join(`
`)},wrapError:function(e,t){if(!t)return Error(e);try{t.message=e+": "+t.message}catch{}return t},constructAllowedPackets:function(e){const t={};return e.forEach(r=>{if(!r.tag)throw Error("Invalid input: expected a packet class");t[r.tag]=r}),t},anyPromise:function(e){return new Promise(async(t,r)=>{let n;await Promise.all(e.map(async i=>{try{t(await i)}catch(s){n=s}})),r(n)})},selectUint8Array:function(e,t,r){const n=Math.max(t.length,r.length),i=new Uint8Array(n);let s=0;for(let a=0;a<i.length;a++)i[a]=t[a]&256-e|r[a]&255+e,s+=e&a<t.length|1-e&a<r.length;return i.subarray(0,s)},selectUint8:function(e,t,r){return t&256-e|r&255+e}},eu=H.getNodeBuffer();let Oo,No;function In(e){let t=new Uint8Array;return _e(e,r=>{t=H.concatUint8Array([t,r]);const n=[],i=Math.floor(t.length/45),s=45*i,a=Oo(t.subarray(0,s));for(let o=0;o<i;o++)n.push(a.substr(60*o,60)),n.push(`
`);return t=t.subarray(s),n.join("")},()=>t.length?Oo(t)+`
`:"")}function nf(e){let t="";return _e(e,r=>{t+=r;let n=0;const i=[" ","	","\r",`
`];for(let o=0;o<i.length;o++){const c=i[o];for(let u=t.indexOf(c);u!==-1;u=t.indexOf(c,u+1))n++}let s=t.length;for(;s>0&&(s-n)%4!=0;s--)i.includes(t[s])&&n--;const a=No(t.substr(0,s));return t=t.substr(s),a},()=>No(t))}function Dn(e){return nf(e.replace(/-/g,"+").replace(/_/g,"/"))}function wr(e,t){let r=In(e).replace(/[\r\n]/g,"");return t&&(r=r.replace(/[+]/g,"-").replace(/[/]/g,"_").replace(/[=]/g,"")),r}eu?(Oo=e=>eu.from(e).toString("base64"),No=e=>{const t=eu.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}):(Oo=e=>btoa(H.uint8ArrayToString(e)),No=e=>H.stringToUint8Array(atob(e)));const Ls=Symbol("byValue");var V={curve:{p256:"p256","P-256":"p256",secp256r1:"p256",prime256v1:"p256","1.2.840.10045.3.1.7":"p256","2a8648ce3d030107":"p256","2A8648CE3D030107":"p256",p384:"p384","P-384":"p384",secp384r1:"p384","1.3.132.0.34":"p384","2b81040022":"p384","2B81040022":"p384",p521:"p521","P-521":"p521",secp521r1:"p521","1.3.132.0.35":"p521","2b81040023":"p521","2B81040023":"p521",secp256k1:"secp256k1","1.3.132.0.10":"secp256k1","2b8104000a":"secp256k1","2B8104000A":"secp256k1",ED25519:"ed25519",ed25519:"ed25519",Ed25519:"ed25519","1.3.6.1.4.1.11591.15.1":"ed25519","2b06010401da470f01":"ed25519","2B06010401DA470F01":"ed25519",X25519:"curve25519",cv25519:"curve25519",curve25519:"curve25519",Curve25519:"curve25519","1.3.6.1.4.1.3029.1.5.1":"curve25519","2b060104019755010501":"curve25519","2B060104019755010501":"curve25519",brainpoolP256r1:"brainpoolP256r1","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1","2b2403030208010107":"brainpoolP256r1","2B2403030208010107":"brainpoolP256r1",brainpoolP384r1:"brainpoolP384r1","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1","2b240303020801010b":"brainpoolP384r1","2B240303020801010B":"brainpoolP384r1",brainpoolP512r1:"brainpoolP512r1","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1","2b240303020801010d":"brainpoolP512r1","2B240303020801010D":"brainpoolP512r1"},s2k:{simple:0,salted:1,iterated:3,gnu:101},publicKey:{rsaEncryptSign:1,rsaEncrypt:2,rsaSign:3,elgamal:16,dsa:17,ecdh:18,ecdsa:19,eddsa:22,aedh:23,aedsa:24},symmetric:{plaintext:0,idea:1,tripledes:2,cast5:3,blowfish:4,aes128:7,aes192:8,aes256:9,twofish:10},compression:{uncompressed:0,zip:1,zlib:2,bzip2:3},hash:{md5:1,sha1:2,ripemd:3,sha256:8,sha384:9,sha512:10,sha224:11},webHash:{"SHA-1":2,"SHA-256":8,"SHA-384":9,"SHA-512":10},aead:{eax:1,ocb:2,experimentalGCM:100},packet:{publicKeyEncryptedSessionKey:1,signature:2,symEncryptedSessionKey:3,onePassSignature:4,secretKey:5,publicKey:6,secretSubkey:7,compressedData:8,symmetricallyEncryptedData:9,marker:10,literalData:11,trust:12,userID:13,publicSubkey:14,userAttribute:17,symEncryptedIntegrityProtectedData:18,modificationDetectionCode:19,aeadEncryptedData:20},literal:{binary:98,text:116,utf8:117,mime:109},signature:{binary:0,text:1,standalone:2,certGeneric:16,certPersona:17,certCasual:18,certPositive:19,certRevocation:48,subkeyBinding:24,keyBinding:25,key:31,keyRevocation:32,subkeyRevocation:40,timestamp:64,thirdParty:80},signatureSubpacket:{signatureCreationTime:2,signatureExpirationTime:3,exportableCertification:4,trustSignature:5,regularExpression:6,revocable:7,keyExpirationTime:9,placeholderBackwardsCompatibility:10,preferredSymmetricAlgorithms:11,revocationKey:12,issuer:16,notationData:20,preferredHashAlgorithms:21,preferredCompressionAlgorithms:22,keyServerPreferences:23,preferredKeyServer:24,primaryUserID:25,policyURI:26,keyFlags:27,signersUserID:28,reasonForRevocation:29,features:30,signatureTarget:31,embeddedSignature:32,issuerFingerprint:33,preferredAEADAlgorithms:34},keyFlags:{certifyKeys:1,signData:2,encryptCommunication:4,encryptStorage:8,splitPrivateKey:16,authentication:32,sharedPrivateKey:128},armor:{multipartSection:0,multipartLast:1,signed:2,message:3,publicKey:4,privateKey:5,signature:6},reasonForRevocation:{noReason:0,keySuperseded:1,keyCompromised:2,keyRetired:3,userIDInvalid:32},features:{modificationDetection:1,aead:2,v5Keys:4},write:function(e,t){if(typeof t=="number"&&(t=this.read(e,t)),e[t]!==void 0)return e[t];throw Error("Invalid enum value.")},read:function(e,t){if(e[Ls]||(e[Ls]=[],Object.entries(e).forEach(([r,n])=>{e[Ls][n]=r})),e[Ls][t]!==void 0)return e[Ls][t];throw Error("Invalid enum value.")}},$t={preferredHashAlgorithm:V.hash.sha256,preferredSymmetricAlgorithm:V.symmetric.aes256,preferredCompressionAlgorithm:V.compression.uncompressed,deflateLevel:6,aeadProtect:!1,preferredAEADAlgorithm:V.aead.eax,aeadChunkSizeByte:12,v5Keys:!1,s2kIterationCountByte:224,allowUnauthenticatedMessages:!1,allowUnauthenticatedStream:!1,checksumRequired:!1,minRSABits:2047,passwordCollisionCheck:!1,revocationsExpire:!1,allowInsecureDecryptionWithSigningKeys:!1,allowInsecureVerificationWithReformattedKeys:!1,constantTimePKCS1Decryption:!1,constantTimePKCS1DecryptionSupportedSymmetricAlgorithms:new Set([V.symmetric.aes128,V.symmetric.aes192,V.symmetric.aes256]),minBytesForWebCrypto:1e3,ignoreUnsupportedPackets:!0,ignoreMalformedPackets:!1,showVersion:!1,showComment:!1,versionString:"OpenPGP.js 5.3.0",commentString:"https://openpgpjs.org",maxUserIDLength:5120,knownNotations:["preferred-email-encoding@pgp.com","pka-address@gnupg.org"],useIndutnyElliptic:!0,rejectHashAlgorithms:new Set([V.hash.md5,V.hash.ripemd]),rejectMessageHashAlgorithms:new Set([V.hash.md5,V.hash.ripemd,V.hash.sha1]),rejectPublicKeyAlgorithms:new Set([V.publicKey.elgamal,V.publicKey.dsa]),rejectCurves:new Set([V.curve.brainpoolP256r1,V.curve.brainpoolP384r1,V.curve.brainpoolP512r1,V.curve.secp256k1])};function v3(e){const t=e.match(/^-----BEGIN PGP (MESSAGE, PART \d+\/\d+|MESSAGE, PART \d+|SIGNED MESSAGE|MESSAGE|PUBLIC KEY BLOCK|PRIVATE KEY BLOCK|SIGNATURE)-----$/m);if(!t)throw Error("Unknown ASCII armor type");return/MESSAGE, PART \d+\/\d+/.test(t[1])?V.armor.multipartSection:/MESSAGE, PART \d+/.test(t[1])?V.armor.multipartLast:/SIGNED MESSAGE/.test(t[1])?V.armor.signed:/MESSAGE/.test(t[1])?V.armor.message:/PUBLIC KEY BLOCK/.test(t[1])?V.armor.publicKey:/PRIVATE KEY BLOCK/.test(t[1])?V.armor.privateKey:/SIGNATURE/.test(t[1])?V.armor.signature:void 0}function Ii(e,t){let r="";return t.showVersion&&(r+="Version: "+t.versionString+`
`),t.showComment&&(r+="Comment: "+t.commentString+`
`),e&&(r+="Comment: "+e+`
`),r+=`
`,r}function ni(e){return In(function(t){let r=13501623;return _e(t,n=>{const i=w3?Math.floor(n.length/4):0,s=new Uint32Array(n.buffer,n.byteOffset,i);for(let a=0;a<i;a++)r^=s[a],r=Ke[0][r>>24&255]^Ke[1][r>>16&255]^Ke[2][r>>8&255]^Ke[3][r>>0&255];for(let a=4*i;a<n.length;a++)r=r>>8^Ke[0][255&r^n[a]]},()=>new Uint8Array([r,r>>8,r>>16]))}(e))}const Ke=[Array(255),Array(255),Array(255),Array(255)];for(let e=0;e<=255;e++){let t=e<<16;for(let r=0;r<8;r++)t=t<<1^((8388608&t)!=0?8801531:0);Ke[0][e]=(16711680&t)>>16|65280&t|(255&t)<<16}for(let e=0;e<=255;e++)Ke[1][e]=Ke[0][e]>>8^Ke[0][255&Ke[0][e]];for(let e=0;e<=255;e++)Ke[2][e]=Ke[1][e]>>8^Ke[0][255&Ke[1][e]];for(let e=0;e<=255;e++)Ke[3][e]=Ke[2][e]>>8^Ke[0][255&Ke[2][e]];const w3=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,255,!0),new Int16Array(e)[0]===255}();function E1(e){for(let t=0;t<e.length;t++){if(!/^([^\s:]|[^\s:][^:]*[^\s:]): .+$/.test(e[t]))throw Error("Improperly formatted armor header: "+e[t]);/^(Version|Comment|MessageID|Hash|Charset): .+$/.test(e[t])||H.printDebugError(Error("Unknown header: "+e[t]))}}function _3(e){let t=e,r="";const n=e.lastIndexOf("=");return n>=0&&n!==e.length-1&&(t=e.slice(0,n),r=e.slice(n+1).substr(0,4)),{body:t,checksum:r}}function sf(e,t=$t){return new Promise(async(r,n)=>{try{const i=/^-----[^-]+-----$/m,s=/^[ \f\r\t\u00a0\u2000-\u200a\u202f\u205f\u3000]*$/;let a;const o=[];let c,u,h,f=o,p=[],d=nf($n(e,async(S,k)=>{const A=Pn(S);try{for(;;){let B=await A.readLine();if(B===void 0)throw Error("Misformed armored text");if(B=H.removeTrailingSpaces(B.replace(/[\r\n]/g,"")),a)if(c)u||a!==2||(i.test(B)?(p=p.join(`\r
`),u=!0,E1(f),f=[],c=!1):p.push(B.replace(/^- /,"")));else if(i.test(B)&&n(Error("Mandatory blank line missing between armor headers and armor data")),s.test(B)){if(E1(f),c=!0,u||a!==2){r({text:p,data:d,headers:o,type:a});break}}else f.push(B);else i.test(B)&&(a=v3(B))}}catch(B){return void n(B)}const C=yr(k);try{for(;;){await C.ready;const{done:B,value:R}=await A.read();if(B)throw Error("Misformed armored text");const D=R+"";if(D.indexOf("=")!==-1||D.indexOf("-")!==-1){let L=await A.readToEnd();L.length||(L=""),L=D+L,L=H.removeTrailingSpaces(L.replace(/\r/g,""));const g=L.split(i);if(g.length===1)throw Error("Misformed armored text");const I=_3(g[0].slice(0,-1));h=I.checksum,await C.write(I.body);break}await C.write(D)}await C.ready,await C.close()}catch(B){await C.abort(B)}}));d=$n(d,async(S,k)=>{const A=Re(ni(bs(S)));A.catch(()=>{}),await _i(S,k,{preventClose:!0});const C=yr(k);try{const B=(await A).replace(`
`,"");if(h!==B&&(h||t.checksumRequired))throw Error("Ascii armor integrity check failed");await C.ready,await C.close()}catch(B){await C.abort(B)}})}catch(i){n(i)}}).then(async r=>(xe(r.data)&&(r.data=await Re(r.data)),r))}function af(e,t,r,n,i,s=$t){let a,o;e===V.armor.signed&&(a=t.text,o=t.hash,t=t.data);const c=bs(t),u=[];switch(e){case V.armor.multipartSection:u.push("-----BEGIN PGP MESSAGE, PART "+r+"/"+n+`-----
`),u.push(Ii(i,s)),u.push(In(t)),u.push("=",ni(c)),u.push("-----END PGP MESSAGE, PART "+r+"/"+n+`-----
`);break;case V.armor.multipartLast:u.push("-----BEGIN PGP MESSAGE, PART "+r+`-----
`),u.push(Ii(i,s)),u.push(In(t)),u.push("=",ni(c)),u.push("-----END PGP MESSAGE, PART "+r+`-----
`);break;case V.armor.signed:u.push(`
-----BEGIN PGP SIGNED MESSAGE-----
`),u.push("Hash: "+o+`

`),u.push(a.replace(/^-/gm,"- -")),u.push(`
-----BEGIN PGP SIGNATURE-----
`),u.push(Ii(i,s)),u.push(In(t)),u.push("=",ni(c)),u.push(`-----END PGP SIGNATURE-----
`);break;case V.armor.message:u.push(`-----BEGIN PGP MESSAGE-----
`),u.push(Ii(i,s)),u.push(In(t)),u.push("=",ni(c)),u.push(`-----END PGP MESSAGE-----
`);break;case V.armor.publicKey:u.push(`-----BEGIN PGP PUBLIC KEY BLOCK-----
`),u.push(Ii(i,s)),u.push(In(t)),u.push("=",ni(c)),u.push(`-----END PGP PUBLIC KEY BLOCK-----
`);break;case V.armor.privateKey:u.push(`-----BEGIN PGP PRIVATE KEY BLOCK-----
`),u.push(Ii(i,s)),u.push(In(t)),u.push("=",ni(c)),u.push(`-----END PGP PRIVATE KEY BLOCK-----
`);break;case V.armor.signature:u.push(`-----BEGIN PGP SIGNATURE-----
`),u.push(Ii(i,s)),u.push(In(t)),u.push("=",ni(c)),u.push(`-----END PGP SIGNATURE-----
`)}return H.concat(u)}class Ai{constructor(){this.bytes=""}read(t){this.bytes=H.uint8ArrayToString(t.subarray(0,8))}write(){return H.stringToUint8Array(this.bytes)}toHex(){return H.uint8ArrayToHex(H.stringToUint8Array(this.bytes))}equals(t,r=!1){return r&&(t.isWildcard()||this.isWildcard())||this.bytes===t.bytes}isNull(){return this.bytes===""}isWildcard(){return/^0+$/.test(this.toHex())}static mapToHex(t){return t.toHex()}static fromID(t){const r=new Ai;return r.read(H.hexToUint8Array(t)),r}static wildcard(){const t=new Ai;return t.read(new Uint8Array(8)),t}}var ne=function(){var e,t,r=!1;function n(f,p){var d=e[(t[f]+t[p])%255];return f!==0&&p!==0||(d=0),d}var i,s,a,o,c=!1;function u(){function f(k){var A,C,B;for(C=B=function(R){var D=e[255-t[R]];return R===0&&(D=0),D}(k),A=0;A<4;A++)B^=C=255&(C<<1|C>>>7);return B^=99}r||function(){e=[],t=[];var k,A,C=1;for(k=0;k<255;k++)e[k]=C,A=128&C,C<<=1,C&=255,A===128&&(C^=27),C^=e[k],t[e[k]]=k;e[255]=e[0],t[0]=0,r=!0}(),i=[],s=[],a=[[],[],[],[]],o=[[],[],[],[]];for(var p=0;p<256;p++){var d=f(p);i[p]=d,s[d]=p,a[0][p]=n(2,d)<<24|d<<16|d<<8|n(3,d),o[0][d]=n(14,p)<<24|n(9,p)<<16|n(13,p)<<8|n(11,p);for(var S=1;S<4;S++)a[S][p]=a[S-1][p]>>>8|a[S-1][p]<<24,o[S][d]=o[S-1][d]>>>8|o[S-1][d]<<24}c=!0}var h=function(f,p){c||u();var d=new Uint32Array(p);d.set(i,512),d.set(s,768);for(var S=0;S<4;S++)d.set(a[S],4096+1024*S>>2),d.set(o[S],8192+1024*S>>2);var k=function(A,C,B){var R=0,D=0,L=0,g=0,I=0,l=0,m=0,v=0,y=0,w=0,N=0,O=0,W=0,Z=0,b=0,U=0,G=0,Q=0,it=0,ht=0,ut=0,lt=new A.Uint32Array(B),j=new A.Uint8Array(B);function tt($,q,_t,vt,Dt,ie,zt,Bt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,Dt=Dt|0,ie=ie|0,zt=zt|0,Bt=Bt|0;var pe=0,Qt=0,re=0,Te=0,Nt=0,jt=0,se=0,Ut=0;for(pe=_t|1024,Qt=_t|2048,re=_t|3072,Dt=Dt^lt[($|0)>>2],ie=ie^lt[($|4)>>2],zt=zt^lt[($|8)>>2],Bt=Bt^lt[($|12)>>2],Ut=16;(Ut|0)<=vt<<4;Ut=Ut+16|0)Te=lt[(_t|Dt>>22&1020)>>2]^lt[(pe|ie>>14&1020)>>2]^lt[(Qt|zt>>6&1020)>>2]^lt[(re|Bt<<2&1020)>>2]^lt[($|Ut|0)>>2],Nt=lt[(_t|ie>>22&1020)>>2]^lt[(pe|zt>>14&1020)>>2]^lt[(Qt|Bt>>6&1020)>>2]^lt[(re|Dt<<2&1020)>>2]^lt[($|Ut|4)>>2],jt=lt[(_t|zt>>22&1020)>>2]^lt[(pe|Bt>>14&1020)>>2]^lt[(Qt|Dt>>6&1020)>>2]^lt[(re|ie<<2&1020)>>2]^lt[($|Ut|8)>>2],se=lt[(_t|Bt>>22&1020)>>2]^lt[(pe|Dt>>14&1020)>>2]^lt[(Qt|ie>>6&1020)>>2]^lt[(re|zt<<2&1020)>>2]^lt[($|Ut|12)>>2],Dt=Te,ie=Nt,zt=jt,Bt=se;R=lt[(q|Dt>>22&1020)>>2]<<24^lt[(q|ie>>14&1020)>>2]<<16^lt[(q|zt>>6&1020)>>2]<<8^lt[(q|Bt<<2&1020)>>2]^lt[($|Ut|0)>>2],D=lt[(q|ie>>22&1020)>>2]<<24^lt[(q|zt>>14&1020)>>2]<<16^lt[(q|Bt>>6&1020)>>2]<<8^lt[(q|Dt<<2&1020)>>2]^lt[($|Ut|4)>>2],L=lt[(q|zt>>22&1020)>>2]<<24^lt[(q|Bt>>14&1020)>>2]<<16^lt[(q|Dt>>6&1020)>>2]<<8^lt[(q|ie<<2&1020)>>2]^lt[($|Ut|8)>>2],g=lt[(q|Bt>>22&1020)>>2]<<24^lt[(q|Dt>>14&1020)>>2]<<16^lt[(q|ie>>6&1020)>>2]<<8^lt[(q|zt<<2&1020)>>2]^lt[($|Ut|12)>>2]}function F($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,tt(0,2048,4096,ut,$,q,_t,vt)}function x($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0;var Dt=0;tt(1024,3072,8192,ut,$,vt,_t,q),Dt=D,D=g,g=Dt}function Y($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,tt(0,2048,4096,ut,I^$,l^q,m^_t,v^vt),I=R,l=D,m=L,v=g}function P($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0;var Dt=0;tt(1024,3072,8192,ut,$,vt,_t,q),Dt=D,D=g,g=Dt,R=R^I,D=D^l,L=L^m,g=g^v,I=$,l=q,m=_t,v=vt}function T($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,tt(0,2048,4096,ut,I,l,m,v),I=R=R^$,l=D=D^q,m=L=L^_t,v=g=g^vt}function z($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,tt(0,2048,4096,ut,I,l,m,v),R=R^$,D=D^q,L=L^_t,g=g^vt,I=$,l=q,m=_t,v=vt}function E($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,tt(0,2048,4096,ut,I,l,m,v),I=R,l=D,m=L,v=g,R=R^$,D=D^q,L=L^_t,g=g^vt}function _($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,tt(0,2048,4096,ut,y,w,N,O),O=~U&O|U&O+1,N=~b&N|b&N+((O|0)==0),w=~Z&w|Z&w+((N|0)==0),y=~W&y|W&y+((w|0)==0),R=R^$,D=D^q,L=L^_t,g=g^vt}function M($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0;var Dt=0,ie=0,zt=0,Bt=0,pe=0,Qt=0,re=0,Te=0,Nt=0,jt=0;for($=$^I,q=q^l,_t=_t^m,vt=vt^v,Dt=G|0,ie=Q|0,zt=it|0,Bt=ht|0;(Nt|0)<128;Nt=Nt+1|0)Dt>>>31&&(pe=pe^$,Qt=Qt^q,re=re^_t,Te=Te^vt),Dt=Dt<<1|ie>>>31,ie=ie<<1|zt>>>31,zt=zt<<1|Bt>>>31,Bt=Bt<<1,jt=vt&1,vt=vt>>>1|_t<<31,_t=_t>>>1|q<<31,q=q>>>1|$<<31,$=$>>>1,jt&&($=$^3774873600);I=pe,l=Qt,m=re,v=Te}function K($){$=$|0,ut=$}function X($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,R=$,D=q,L=_t,g=vt}function J($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,I=$,l=q,m=_t,v=vt}function nt($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,y=$,w=q,N=_t,O=vt}function pt($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,W=$,Z=q,b=_t,U=vt}function gt($,q,_t,vt){$=$|0,q=q|0,_t=_t|0,vt=vt|0,O=~U&O|U&vt,N=~b&N|b&_t,w=~Z&w|Z&q,y=~W&y|W&$}function Et($){return $=$|0,$&15?-1:(j[$|0]=R>>>24,j[$|1]=R>>>16&255,j[$|2]=R>>>8&255,j[$|3]=R&255,j[$|4]=D>>>24,j[$|5]=D>>>16&255,j[$|6]=D>>>8&255,j[$|7]=D&255,j[$|8]=L>>>24,j[$|9]=L>>>16&255,j[$|10]=L>>>8&255,j[$|11]=L&255,j[$|12]=g>>>24,j[$|13]=g>>>16&255,j[$|14]=g>>>8&255,j[$|15]=g&255,16)}function et($){return $=$|0,$&15?-1:(j[$|0]=I>>>24,j[$|1]=I>>>16&255,j[$|2]=I>>>8&255,j[$|3]=I&255,j[$|4]=l>>>24,j[$|5]=l>>>16&255,j[$|6]=l>>>8&255,j[$|7]=l&255,j[$|8]=m>>>24,j[$|9]=m>>>16&255,j[$|10]=m>>>8&255,j[$|11]=m&255,j[$|12]=v>>>24,j[$|13]=v>>>16&255,j[$|14]=v>>>8&255,j[$|15]=v&255,16)}function rt(){F(0,0,0,0),G=R,Q=D,it=L,ht=g}function ot($,q,_t){$=$|0,q=q|0,_t=_t|0;var vt=0;if(q&15)return-1;for(;(_t|0)>=16;)at[$&7](j[q|0]<<24|j[q|1]<<16|j[q|2]<<8|j[q|3],j[q|4]<<24|j[q|5]<<16|j[q|6]<<8|j[q|7],j[q|8]<<24|j[q|9]<<16|j[q|10]<<8|j[q|11],j[q|12]<<24|j[q|13]<<16|j[q|14]<<8|j[q|15]),j[q|0]=R>>>24,j[q|1]=R>>>16&255,j[q|2]=R>>>8&255,j[q|3]=R&255,j[q|4]=D>>>24,j[q|5]=D>>>16&255,j[q|6]=D>>>8&255,j[q|7]=D&255,j[q|8]=L>>>24,j[q|9]=L>>>16&255,j[q|10]=L>>>8&255,j[q|11]=L&255,j[q|12]=g>>>24,j[q|13]=g>>>16&255,j[q|14]=g>>>8&255,j[q|15]=g&255,vt=vt+16|0,q=q+16|0,_t=_t-16|0;return vt|0}function st($,q,_t){$=$|0,q=q|0,_t=_t|0;var vt=0;if(q&15)return-1;for(;(_t|0)>=16;)ct[$&1](j[q|0]<<24|j[q|1]<<16|j[q|2]<<8|j[q|3],j[q|4]<<24|j[q|5]<<16|j[q|6]<<8|j[q|7],j[q|8]<<24|j[q|9]<<16|j[q|10]<<8|j[q|11],j[q|12]<<24|j[q|13]<<16|j[q|14]<<8|j[q|15]),vt=vt+16|0,q=q+16|0,_t=_t-16|0;return vt|0}var at=[F,x,Y,P,T,z,E,_],ct=[Y,M];return{set_rounds:K,set_state:X,set_iv:J,set_nonce:nt,set_mask:pt,set_counter:gt,get_state:Et,get_iv:et,gcm_init:rt,cipher:ot,mac:st}}({Uint8Array,Uint32Array},f,p);return k.set_key=function(A,C,B,R,D,L,g,I,l){var m=d.subarray(0,60),v=d.subarray(256,316);m.set([C,B,R,D,L,g,I,l]);for(var y=A,w=1;y<4*A+28;y++){var N=m[y-1];(y%A==0||A===8&&y%A==4)&&(N=i[N>>>24]<<24^i[N>>>16&255]<<16^i[N>>>8&255]<<8^i[255&N]),y%A==0&&(N=N<<8^N>>>24^w<<24,w=w<<1^(128&w?27:0)),m[y]=m[y-A]^N}for(var O=0;O<y;O+=4)for(var W=0;W<4;W++)N=m[y-(4+O)+(4-W)%4],v[O+W]=O<4||O>=y-4?N:o[0][i[N>>>24]]^o[1][i[N>>>16&255]]^o[2][i[N>>>8&255]]^o[3][i[255&N]];k.set_rounds(A+5)},k};return h.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},h.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},h.MAC={CBC:0,GCM:1},h.HEAP_DATA=16384,h}();function k1(e){return e instanceof Uint8Array}function S0(e,t){const r=e?e.byteLength:t||65536;if(4095&r||r<=0)throw Error("heap size must be a positive integer and a multiple of 4096");return e=e||new Uint8Array(new ArrayBuffer(r))}function Fi(e,t,r,n,i){const s=e.length-t,a=s<i?s:i;return e.set(r.subarray(n,n+a),t),a}function Si(...e){const t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);let n=0;for(let i=0;i<e.length;i++)r.set(e[i],n),n+=e[i].length;return r}class Ku extends Error{constructor(...t){super(...t)}}class Bn extends Error{constructor(...t){super(...t)}}class Fu extends Error{constructor(...t){super(...t)}}const P1=[],x1=[];class La{constructor(t,r,n=!0,i,s,a){this.pos=0,this.len=0,this.mode=i,this.pos=0,this.len=0,this.key=t,this.iv=r,this.padding=n,this.acquire_asm(s,a)}acquire_asm(t,r){return this.heap!==void 0&&this.asm!==void 0||(this.heap=t||P1.pop()||S0().subarray(ne.HEAP_DATA),this.asm=r||x1.pop()||new ne(null,this.heap.buffer),this.reset(this.key,this.iv)),{heap:this.heap,asm:this.asm}}release_asm(){this.heap!==void 0&&this.asm!==void 0&&(P1.push(this.heap),x1.push(this.asm)),this.heap=void 0,this.asm=void 0}reset(t,r){const{asm:n}=this.acquire_asm(),i=t.length;if(i!==16&&i!==24&&i!==32)throw new Bn("illegal key size");const s=new DataView(t.buffer,t.byteOffset,t.byteLength);if(n.set_key(i>>2,s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12),i>16?s.getUint32(16):0,i>16?s.getUint32(20):0,i>24?s.getUint32(24):0,i>24?s.getUint32(28):0),r!==void 0){if(r.length!==16)throw new Bn("illegal iv size");let a=new DataView(r.buffer,r.byteOffset,r.byteLength);n.set_iv(a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12))}else n.set_iv(0,0,0,0)}AES_Encrypt_process(t){if(!k1(t))throw new TypeError("data isn't of expected type");let{heap:r,asm:n}=this.acquire_asm(),i=ne.ENC[this.mode],s=ne.HEAP_DATA,a=this.pos,o=this.len,c=0,u=t.length||0,h=0,f=0,p=new Uint8Array(o+u&-16);for(;u>0;)f=Fi(r,a+o,t,c,u),o+=f,c+=f,u-=f,f=n.cipher(i,s+a,o),f&&p.set(r.subarray(a,a+f),h),h+=f,f<o?(a+=f,o-=f):(a=0,o=0);return this.pos=a,this.len=o,p}AES_Encrypt_finish(){let{heap:t,asm:r}=this.acquire_asm(),n=ne.ENC[this.mode],i=ne.HEAP_DATA,s=this.pos,a=this.len,o=16-a%16,c=a;if(this.hasOwnProperty("padding")){if(this.padding){for(let h=0;h<o;++h)t[s+a+h]=o;a+=o,c=a}else if(a%16)throw new Bn("data length must be a multiple of the block size")}else a+=o;const u=new Uint8Array(c);return a&&r.cipher(n,i+s,a),c&&u.set(t.subarray(s,s+c)),this.pos=0,this.len=0,this.release_asm(),u}AES_Decrypt_process(t){if(!k1(t))throw new TypeError("data isn't of expected type");let{heap:r,asm:n}=this.acquire_asm(),i=ne.DEC[this.mode],s=ne.HEAP_DATA,a=this.pos,o=this.len,c=0,u=t.length||0,h=0,f=o+u&-16,p=0,d=0;this.padding&&(p=o+u-f||16,f-=p);const S=new Uint8Array(f);for(;u>0;)d=Fi(r,a+o,t,c,u),o+=d,c+=d,u-=d,d=n.cipher(i,s+a,o-(u?0:p)),d&&S.set(r.subarray(a,a+d),h),h+=d,d<o?(a+=d,o-=d):(a=0,o=0);return this.pos=a,this.len=o,S}AES_Decrypt_finish(){let{heap:t,asm:r}=this.acquire_asm(),n=ne.DEC[this.mode],i=ne.HEAP_DATA,s=this.pos,a=this.len,o=a;if(a>0){if(a%16){if(this.hasOwnProperty("padding"))throw new Bn("data length must be a multiple of the block size");a+=16-a%16}if(r.cipher(n,i+s,a),this.hasOwnProperty("padding")&&this.padding){let u=t[s+o-1];if(u<1||u>16||u>o)throw new Fu("bad padding");let h=0;for(let f=u;f>1;f--)h|=u^t[s+o-f];if(h)throw new Fu("bad padding");o-=u}}const c=new Uint8Array(o);return o>0&&c.set(t.subarray(s,s+o)),this.pos=0,this.len=0,this.release_asm(),c}}class Bo{static encrypt(t,r,n=!1){return new Bo(r,n).encrypt(t)}static decrypt(t,r,n=!1){return new Bo(r,n).decrypt(t)}constructor(t,r=!1,n){this.aes=n||new La(t,void 0,r,"ECB")}encrypt(t){return Si(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())}decrypt(t){return Si(this.aes.AES_Decrypt_process(t),this.aes.AES_Decrypt_finish())}}function E0(e){const t=function(r){const n=new Bo(r);this.encrypt=function(i){return n.encrypt(i)},this.decrypt=function(i){return n.decrypt(i)}};return t.blockSize=t.prototype.blockSize=16,t.keySize=t.prototype.keySize=e/8,t}function ha(e,t,r,n,i,s){const a=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],c=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],h=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],f=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],p=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];let S,k,A,C,B,R,D,L,g,I,l,m,v,y,w=0,N=t.length;const O=e.length===32?3:9;L=O===3?r?[0,32,2]:[30,-2,-2]:r?[0,32,2,62,30,-2,64,96,2]:[94,62,-2,32,64,2,30,-2,-2],r&&(N=(t=function(b,U){const G=8-b.length%8;let Q;if(U===2&&G<8)Q=32;else if(U===1)Q=G;else{if(U||!(G<8)){if(G===8)return b;throw Error("des: invalid padding")}Q=0}const it=new Uint8Array(b.length+G);for(let ht=0;ht<b.length;ht++)it[ht]=b[ht];for(let ht=0;ht<G;ht++)it[b.length+ht]=Q;return it}(t,s)).length);let W=new Uint8Array(N),Z=0;for(n===1&&(g=i[w++]<<24|i[w++]<<16|i[w++]<<8|i[w++],l=i[w++]<<24|i[w++]<<16|i[w++]<<8|i[w++],w=0);w<N;){for(R=t[w++]<<24|t[w++]<<16|t[w++]<<8|t[w++],D=t[w++]<<24|t[w++]<<16|t[w++]<<8|t[w++],n===1&&(r?(R^=g,D^=l):(I=g,m=l,g=R,l=D)),A=252645135&(R>>>4^D),D^=A,R^=A<<4,A=65535&(R>>>16^D),D^=A,R^=A<<16,A=858993459&(D>>>2^R),R^=A,D^=A<<2,A=16711935&(D>>>8^R),R^=A,D^=A<<8,A=1431655765&(R>>>1^D),D^=A,R^=A<<1,R=R<<1|R>>>31,D=D<<1|D>>>31,k=0;k<O;k+=3){for(v=L[k+1],y=L[k+2],S=L[k];S!==v;S+=y)C=D^e[S],B=(D>>>4|D<<28)^e[S+1],A=R,R=D,D=A^(o[C>>>24&63]|u[C>>>16&63]|f[C>>>8&63]|d[63&C]|a[B>>>24&63]|c[B>>>16&63]|h[B>>>8&63]|p[63&B]);A=R,R=D,D=A}R=R>>>1|R<<31,D=D>>>1|D<<31,A=1431655765&(R>>>1^D),D^=A,R^=A<<1,A=16711935&(D>>>8^R),R^=A,D^=A<<8,A=858993459&(D>>>2^R),R^=A,D^=A<<2,A=65535&(R>>>16^D),D^=A,R^=A<<16,A=252645135&(R>>>4^D),D^=A,R^=A<<4,n===1&&(r?(g=R,l=D):(R^=I,D^=m)),W[Z++]=R>>>24,W[Z++]=R>>>16&255,W[Z++]=R>>>8&255,W[Z++]=255&R,W[Z++]=D>>>24,W[Z++]=D>>>16&255,W[Z++]=D>>>8&255,W[Z++]=255&D}return r||(W=function(b,U){let G,Q=null;if(U===2)G=32;else if(U===1)Q=b[b.length-1];else{if(U)throw Error("des: invalid padding");G=0}if(!Q){for(Q=1;b[b.length-Q]===G;)Q++;Q--}return b.subarray(0,b.length-Q)}(W,s)),W}function fa(e){const t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],S=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],k=e.length>8?3:1,A=Array(32*k),C=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0];let B,R,D,L=0,g=0;for(let I=0;I<k;I++){let l=e[L++]<<24|e[L++]<<16|e[L++]<<8|e[L++],m=e[L++]<<24|e[L++]<<16|e[L++]<<8|e[L++];D=252645135&(l>>>4^m),m^=D,l^=D<<4,D=65535&(m>>>-16^l),l^=D,m^=D<<-16,D=858993459&(l>>>2^m),m^=D,l^=D<<2,D=65535&(m>>>-16^l),l^=D,m^=D<<-16,D=1431655765&(l>>>1^m),m^=D,l^=D<<1,D=16711935&(m>>>8^l),l^=D,m^=D<<8,D=1431655765&(l>>>1^m),m^=D,l^=D<<1,D=l<<8|m>>>20&240,l=m<<24|m<<8&16711680|m>>>8&65280|m>>>24&240,m=D;for(let v=0;v<16;v++)C[v]?(l=l<<2|l>>>26,m=m<<2|m>>>26):(l=l<<1|l>>>27,m=m<<1|m>>>27),l&=-15,m&=-15,B=t[l>>>28]|r[l>>>24&15]|n[l>>>20&15]|i[l>>>16&15]|s[l>>>12&15]|a[l>>>8&15]|o[l>>>4&15],R=c[m>>>28]|u[m>>>24&15]|h[m>>>20&15]|f[m>>>16&15]|p[m>>>12&15]|d[m>>>8&15]|S[m>>>4&15],D=65535&(R>>>16^B),A[g++]=B^D,A[g++]=R^D<<16}return A}function Ys(e){this.key=[];for(let t=0;t<3;t++)this.key.push(new Uint8Array(e.subarray(8*t,8*t+8)));this.encrypt=function(t){return ha(fa(this.key[2]),ha(fa(this.key[1]),ha(fa(this.key[0]),t,!0,0,null,null),!1,0,null,null),!0,0,null,null)}}function A3(){this.BlockSize=8,this.KeySize=16,this.setKey=function(a){if(this.masking=Array(16),this.rotate=Array(16),this.reset(),a.length!==this.KeySize)throw Error("CAST-128: keys must be 16 bytes");return this.keySchedule(a),!0},this.reset=function(){for(let a=0;a<16;a++)this.masking[a]=0,this.rotate[a]=0},this.getBlockSize=function(){return this.BlockSize},this.encrypt=function(a){const o=Array(a.length);for(let c=0;c<a.length;c+=8){let u,h=a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3],f=a[c+4]<<24|a[c+5]<<16|a[c+6]<<8|a[c+7];u=f,f=h^r(f,this.masking[0],this.rotate[0]),h=u,u=f,f=h^n(f,this.masking[1],this.rotate[1]),h=u,u=f,f=h^i(f,this.masking[2],this.rotate[2]),h=u,u=f,f=h^r(f,this.masking[3],this.rotate[3]),h=u,u=f,f=h^n(f,this.masking[4],this.rotate[4]),h=u,u=f,f=h^i(f,this.masking[5],this.rotate[5]),h=u,u=f,f=h^r(f,this.masking[6],this.rotate[6]),h=u,u=f,f=h^n(f,this.masking[7],this.rotate[7]),h=u,u=f,f=h^i(f,this.masking[8],this.rotate[8]),h=u,u=f,f=h^r(f,this.masking[9],this.rotate[9]),h=u,u=f,f=h^n(f,this.masking[10],this.rotate[10]),h=u,u=f,f=h^i(f,this.masking[11],this.rotate[11]),h=u,u=f,f=h^r(f,this.masking[12],this.rotate[12]),h=u,u=f,f=h^n(f,this.masking[13],this.rotate[13]),h=u,u=f,f=h^i(f,this.masking[14],this.rotate[14]),h=u,u=f,f=h^r(f,this.masking[15],this.rotate[15]),h=u,o[c]=f>>>24&255,o[c+1]=f>>>16&255,o[c+2]=f>>>8&255,o[c+3]=255&f,o[c+4]=h>>>24&255,o[c+5]=h>>>16&255,o[c+6]=h>>>8&255,o[c+7]=255&h}return o},this.decrypt=function(a){const o=Array(a.length);for(let c=0;c<a.length;c+=8){let u,h=a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3],f=a[c+4]<<24|a[c+5]<<16|a[c+6]<<8|a[c+7];u=f,f=h^r(f,this.masking[15],this.rotate[15]),h=u,u=f,f=h^i(f,this.masking[14],this.rotate[14]),h=u,u=f,f=h^n(f,this.masking[13],this.rotate[13]),h=u,u=f,f=h^r(f,this.masking[12],this.rotate[12]),h=u,u=f,f=h^i(f,this.masking[11],this.rotate[11]),h=u,u=f,f=h^n(f,this.masking[10],this.rotate[10]),h=u,u=f,f=h^r(f,this.masking[9],this.rotate[9]),h=u,u=f,f=h^i(f,this.masking[8],this.rotate[8]),h=u,u=f,f=h^n(f,this.masking[7],this.rotate[7]),h=u,u=f,f=h^r(f,this.masking[6],this.rotate[6]),h=u,u=f,f=h^i(f,this.masking[5],this.rotate[5]),h=u,u=f,f=h^n(f,this.masking[4],this.rotate[4]),h=u,u=f,f=h^r(f,this.masking[3],this.rotate[3]),h=u,u=f,f=h^i(f,this.masking[2],this.rotate[2]),h=u,u=f,f=h^n(f,this.masking[1],this.rotate[1]),h=u,u=f,f=h^r(f,this.masking[0],this.rotate[0]),h=u,o[c]=f>>>24&255,o[c+1]=f>>>16&255,o[c+2]=f>>>8&255,o[c+3]=255&f,o[c+4]=h>>>24&255,o[c+5]=h>>16&255,o[c+6]=h>>8&255,o[c+7]=255&h}return o};const e=[,,,,];e[0]=[,,,,],e[0][0]=[4,0,13,15,12,14,8],e[0][1]=[5,2,16,18,17,19,10],e[0][2]=[6,3,23,22,21,20,9],e[0][3]=[7,1,26,25,27,24,11],e[1]=[,,,,],e[1][0]=[0,6,21,23,20,22,16],e[1][1]=[1,4,0,2,1,3,18],e[1][2]=[2,5,7,6,5,4,17],e[1][3]=[3,7,10,9,11,8,19],e[2]=[,,,,],e[2][0]=[4,0,13,15,12,14,8],e[2][1]=[5,2,16,18,17,19,10],e[2][2]=[6,3,23,22,21,20,9],e[2][3]=[7,1,26,25,27,24,11],e[3]=[,,,,],e[3][0]=[0,6,21,23,20,22,16],e[3][1]=[1,4,0,2,1,3,18],e[3][2]=[2,5,7,6,5,4,17],e[3][3]=[3,7,10,9,11,8,19];const t=[,,,,];function r(a,o,c){const u=o+a,h=u<<c|u>>>32-c;return(s[0][h>>>24]^s[1][h>>>16&255])-s[2][h>>>8&255]+s[3][255&h]}function n(a,o,c){const u=o^a,h=u<<c|u>>>32-c;return s[0][h>>>24]-s[1][h>>>16&255]+s[2][h>>>8&255]^s[3][255&h]}function i(a,o,c){const u=o-a,h=u<<c|u>>>32-c;return(s[0][h>>>24]+s[1][h>>>16&255]^s[2][h>>>8&255])-s[3][255&h]}t[0]=[,,,,],t[0][0]=[24,25,23,22,18],t[0][1]=[26,27,21,20,22],t[0][2]=[28,29,19,18,25],t[0][3]=[30,31,17,16,28],t[1]=[,,,,],t[1][0]=[3,2,12,13,8],t[1][1]=[1,0,14,15,13],t[1][2]=[7,6,8,9,3],t[1][3]=[5,4,10,11,7],t[2]=[,,,,],t[2][0]=[19,18,28,29,25],t[2][1]=[17,16,30,31,28],t[2][2]=[23,22,24,25,18],t[2][3]=[21,20,26,27,22],t[3]=[,,,,],t[3][0]=[8,9,7,6,3],t[3][1]=[10,11,5,4,7],t[3][2]=[12,13,3,2,8],t[3][3]=[14,15,1,0,13],this.keySchedule=function(a){const o=[,,,,,,,,],c=Array(32);let u;for(let d=0;d<4;d++)u=4*d,o[d]=a[u]<<24|a[u+1]<<16|a[u+2]<<8|a[u+3];const h=[6,7,4,5];let f,p=0;for(let d=0;d<2;d++)for(let S=0;S<4;S++){for(u=0;u<4;u++){const k=e[S][u];f=o[k[1]],f^=s[4][o[k[2]>>>2]>>>24-8*(3&k[2])&255],f^=s[5][o[k[3]>>>2]>>>24-8*(3&k[3])&255],f^=s[6][o[k[4]>>>2]>>>24-8*(3&k[4])&255],f^=s[7][o[k[5]>>>2]>>>24-8*(3&k[5])&255],f^=s[h[u]][o[k[6]>>>2]>>>24-8*(3&k[6])&255],o[k[0]]=f}for(u=0;u<4;u++){const k=t[S][u];f=s[4][o[k[0]>>>2]>>>24-8*(3&k[0])&255],f^=s[5][o[k[1]>>>2]>>>24-8*(3&k[1])&255],f^=s[6][o[k[2]>>>2]>>>24-8*(3&k[2])&255],f^=s[7][o[k[3]>>>2]>>>24-8*(3&k[3])&255],f^=s[4+u][o[k[4]>>>2]>>>24-8*(3&k[4])&255],c[p]=f,p++}}for(let d=0;d<16;d++)this.masking[d]=c[d],this.rotate[d]=31&c[16+d]};const s=[,,,,,,,,];s[0]=[821772500,2678128395,1810681135,1059425402,505495343,2617265619,1610868032,3483355465,3218386727,2294005173,3791863952,2563806837,1852023008,365126098,3269944861,584384398,677919599,3229601881,4280515016,2002735330,1136869587,3744433750,2289869850,2731719981,2714362070,879511577,1639411079,575934255,717107937,2857637483,576097850,2731753936,1725645e3,2810460463,5111599,767152862,2543075244,1251459544,1383482551,3052681127,3089939183,3612463449,1878520045,1510570527,2189125840,2431448366,582008916,3163445557,1265446783,1354458274,3529918736,3202711853,3073581712,3912963487,3029263377,1275016285,4249207360,2905708351,3304509486,1442611557,3585198765,2712415662,2731849581,3248163920,2283946226,208555832,2766454743,1331405426,1447828783,3315356441,3108627284,2957404670,2981538698,3339933917,1669711173,286233437,1465092821,1782121619,3862771680,710211251,980974943,1651941557,430374111,2051154026,704238805,4128970897,3144820574,2857402727,948965521,3333752299,2227686284,718756367,2269778983,2731643755,718440111,2857816721,3616097120,1113355533,2478022182,410092745,1811985197,1944238868,2696854588,1415722873,1682284203,1060277122,1998114690,1503841958,82706478,2315155686,1068173648,845149890,2167947013,1768146376,1993038550,3566826697,3390574031,940016341,3355073782,2328040721,904371731,1205506512,4094660742,2816623006,825647681,85914773,2857843460,1249926541,1417871568,3287612,3211054559,3126306446,1975924523,1353700161,2814456437,2438597621,1800716203,722146342,2873936343,1151126914,4160483941,2877670899,458611604,2866078500,3483680063,770352098,2652916994,3367839148,3940505011,3585973912,3809620402,718646636,2504206814,2914927912,3631288169,2857486607,2860018678,575749918,2857478043,718488780,2069512688,3548183469,453416197,1106044049,3032691430,52586708,3378514636,3459808877,3211506028,1785789304,218356169,3571399134,3759170522,1194783844,1523787992,3007827094,1975193539,2555452411,1341901877,3045838698,3776907964,3217423946,2802510864,2889438986,1057244207,1636348243,3761863214,1462225785,2632663439,481089165,718503062,24497053,3332243209,3344655856,3655024856,3960371065,1195698900,2971415156,3710176158,2115785917,4027663609,3525578417,2524296189,2745972565,3564906415,1372086093,1452307862,2780501478,1476592880,3389271281,18495466,2378148571,901398090,891748256,3279637769,3157290713,2560960102,1447622437,4284372637,216884176,2086908623,1879786977,3588903153,2242455666,2938092967,3559082096,2810645491,758861177,1121993112,215018983,642190776,4169236812,1196255959,2081185372,3508738393,941322904,4124243163,2877523539,1848581667,2205260958,3180453958,2589345134,3694731276,550028657,2519456284,3789985535,2973870856,2093648313,443148163,46942275,2734146937,1117713533,1115362972,1523183689,3717140224,1551984063],s[1]=[522195092,4010518363,1776537470,960447360,4267822970,4005896314,1435016340,1929119313,2913464185,1310552629,3579470798,3724818106,2579771631,1594623892,417127293,2715217907,2696228731,1508390405,3994398868,3925858569,3695444102,4019471449,3129199795,3770928635,3520741761,990456497,4187484609,2783367035,21106139,3840405339,631373633,3783325702,532942976,396095098,3548038825,4267192484,2564721535,2011709262,2039648873,620404603,3776170075,2898526339,3612357925,4159332703,1645490516,223693667,1567101217,3362177881,1029951347,3470931136,3570957959,1550265121,119497089,972513919,907948164,3840628539,1613718692,3594177948,465323573,2659255085,654439692,2575596212,2699288441,3127702412,277098644,624404830,4100943870,2717858591,546110314,2403699828,3655377447,1321679412,4236791657,1045293279,4010672264,895050893,2319792268,494945126,1914543101,2777056443,3894764339,2219737618,311263384,4275257268,3458730721,669096869,3584475730,3835122877,3319158237,3949359204,2005142349,2713102337,2228954793,3769984788,569394103,3855636576,1425027204,108000370,2736431443,3671869269,3043122623,1750473702,2211081108,762237499,3972989403,2798899386,3061857628,2943854345,867476300,964413654,1591880597,1594774276,2179821409,552026980,3026064248,3726140315,2283577634,3110545105,2152310760,582474363,1582640421,1383256631,2043843868,3322775884,1217180674,463797851,2763038571,480777679,2718707717,2289164131,3118346187,214354409,200212307,3810608407,3025414197,2674075964,3997296425,1847405948,1342460550,510035443,4080271814,815934613,833030224,1620250387,1945732119,2703661145,3966000196,1388869545,3456054182,2687178561,2092620194,562037615,1356438536,3409922145,3261847397,1688467115,2150901366,631725691,3840332284,549916902,3455104640,394546491,837744717,2114462948,751520235,2221554606,2415360136,3999097078,2063029875,803036379,2702586305,821456707,3019566164,360699898,4018502092,3511869016,3677355358,2402471449,812317050,49299192,2570164949,3259169295,2816732080,3331213574,3101303564,2156015656,3705598920,3546263921,143268808,3200304480,1638124008,3165189453,3341807610,578956953,2193977524,3638120073,2333881532,807278310,658237817,2969561766,1641658566,11683945,3086995007,148645947,1138423386,4158756760,1981396783,2401016740,3699783584,380097457,2680394679,2803068651,3334260286,441530178,4016580796,1375954390,761952171,891809099,2183123478,157052462,3683840763,1592404427,341349109,2438483839,1417898363,644327628,2233032776,2353769706,2201510100,220455161,1815641738,182899273,2995019788,3627381533,3702638151,2890684138,1052606899,588164016,1681439879,4038439418,2405343923,4229449282,167996282,1336969661,1688053129,2739224926,1543734051,1046297529,1138201970,2121126012,115334942,1819067631,1902159161,1941945968,2206692869,1159982321],s[2]=[2381300288,637164959,3952098751,3893414151,1197506559,916448331,2350892612,2932787856,3199334847,4009478890,3905886544,1373570990,2450425862,4037870920,3778841987,2456817877,286293407,124026297,3001279700,1028597854,3115296800,4208886496,2691114635,2188540206,1430237888,1218109995,3572471700,308166588,570424558,2187009021,2455094765,307733056,1310360322,3135275007,1384269543,2388071438,863238079,2359263624,2801553128,3380786597,2831162807,1470087780,1728663345,4072488799,1090516929,532123132,2389430977,1132193179,2578464191,3051079243,1670234342,1434557849,2711078940,1241591150,3314043432,3435360113,3091448339,1812415473,2198440252,267246943,796911696,3619716990,38830015,1526438404,2806502096,374413614,2943401790,1489179520,1603809326,1920779204,168801282,260042626,2358705581,1563175598,2397674057,1356499128,2217211040,514611088,2037363785,2186468373,4022173083,2792511869,2913485016,1173701892,4200428547,3896427269,1334932762,2455136706,602925377,2835607854,1613172210,41346230,2499634548,2457437618,2188827595,41386358,4172255629,1313404830,2405527007,3801973774,2217704835,873260488,2528884354,2478092616,4012915883,2555359016,2006953883,2463913485,575479328,2218240648,2099895446,660001756,2341502190,3038761536,3888151779,3848713377,3286851934,1022894237,1620365795,3449594689,1551255054,15374395,3570825345,4249311020,4151111129,3181912732,310226346,1133119310,530038928,136043402,2476768958,3107506709,2544909567,1036173560,2367337196,1681395281,1758231547,3641649032,306774401,1575354324,3716085866,1990386196,3114533736,2455606671,1262092282,3124342505,2768229131,4210529083,1833535011,423410938,660763973,2187129978,1639812e3,3508421329,3467445492,310289298,272797111,2188552562,2456863912,310240523,677093832,1013118031,901835429,3892695601,1116285435,3036471170,1337354835,243122523,520626091,277223598,4244441197,4194248841,1766575121,594173102,316590669,742362309,3536858622,4176435350,3838792410,2501204839,1229605004,3115755532,1552908988,2312334149,979407927,3959474601,1148277331,176638793,3614686272,2083809052,40992502,1340822838,2731552767,3535757508,3560899520,1354035053,122129617,7215240,2732932949,3118912700,2718203926,2539075635,3609230695,3725561661,1928887091,2882293555,1988674909,2063640240,2491088897,1459647954,4189817080,2302804382,1113892351,2237858528,1927010603,4002880361,1856122846,1594404395,2944033133,3855189863,3474975698,1643104450,4054590833,3431086530,1730235576,2984608721,3084664418,2131803598,4178205752,267404349,1617849798,1616132681,1462223176,736725533,2327058232,551665188,2945899023,1749386277,2575514597,1611482493,674206544,2201269090,3642560800,728599968,1680547377,2620414464,1388111496,453204106,4156223445,1094905244,2754698257,2201108165,3757000246,2704524545,3922940700,3996465027],s[3]=[2645754912,532081118,2814278639,3530793624,1246723035,1689095255,2236679235,4194438865,2116582143,3859789411,157234593,2045505824,4245003587,1687664561,4083425123,605965023,672431967,1336064205,3376611392,214114848,4258466608,3232053071,489488601,605322005,3998028058,264917351,1912574028,756637694,436560991,202637054,135989450,85393697,2152923392,3896401662,2895836408,2145855233,3535335007,115294817,3147733898,1922296357,3464822751,4117858305,1037454084,2725193275,2127856640,1417604070,1148013728,1827919605,642362335,2929772533,909348033,1346338451,3547799649,297154785,1917849091,4161712827,2883604526,3968694238,1469521537,3780077382,3375584256,1763717519,136166297,4290970789,1295325189,2134727907,2798151366,1566297257,3672928234,2677174161,2672173615,965822077,2780786062,289653839,1133871874,3491843819,35685304,1068898316,418943774,672553190,642281022,2346158704,1954014401,3037126780,4079815205,2030668546,3840588673,672283427,1776201016,359975446,3750173538,555499703,2769985273,1324923,69110472,152125443,3176785106,3822147285,1340634837,798073664,1434183902,15393959,216384236,1303690150,3881221631,3711134124,3960975413,106373927,2578434224,1455997841,1801814300,1578393881,1854262133,3188178946,3258078583,2302670060,1539295533,3505142565,3078625975,2372746020,549938159,3278284284,2620926080,181285381,2865321098,3970029511,68876850,488006234,1728155692,2608167508,836007927,2435231793,919367643,3339422534,3655756360,1457871481,40520939,1380155135,797931188,234455205,2255801827,3990488299,397000196,739833055,3077865373,2871719860,4022553888,772369276,390177364,3853951029,557662966,740064294,1640166671,1699928825,3535942136,622006121,3625353122,68743880,1742502,219489963,1664179233,1577743084,1236991741,410585305,2366487942,823226535,1050371084,3426619607,3586839478,212779912,4147118561,1819446015,1911218849,530248558,3486241071,3252585495,2886188651,3410272728,2342195030,20547779,2982490058,3032363469,3631753222,312714466,1870521650,1493008054,3491686656,615382978,4103671749,2534517445,1932181,2196105170,278426614,6369430,3274544417,2913018367,697336853,2143000447,2946413531,701099306,1558357093,2805003052,3500818408,2321334417,3567135975,216290473,3591032198,23009561,1996984579,3735042806,2024298078,3739440863,569400510,2339758983,3016033873,3097871343,3639523026,3844324983,3256173865,795471839,2951117563,4101031090,4091603803,3603732598,971261452,534414648,428311343,3389027175,2844869880,694888862,1227866773,2456207019,3043454569,2614353370,3749578031,3676663836,459166190,4132644070,1794958188,51825668,2252611902,3084671440,2036672799,3436641603,1099053433,2469121526,3059204941,1323291266,2061838604,1018778475,2233344254,2553501054,334295216,3556750194,1065731521,183467730],s[4]=[2127105028,745436345,2601412319,2788391185,3093987327,500390133,1155374404,389092991,150729210,3891597772,3523549952,1935325696,716645080,946045387,2901812282,1774124410,3869435775,4039581901,3293136918,3438657920,948246080,363898952,3867875531,1286266623,1598556673,68334250,630723836,1104211938,1312863373,613332731,2377784574,1101634306,441780740,3129959883,1917973735,2510624549,3238456535,2544211978,3308894634,1299840618,4076074851,1756332096,3977027158,297047435,3790297736,2265573040,3621810518,1311375015,1667687725,47300608,3299642885,2474112369,201668394,1468347890,576830978,3594690761,3742605952,1958042578,1747032512,3558991340,1408974056,3366841779,682131401,1033214337,1545599232,4265137049,206503691,103024618,2855227313,1337551222,2428998917,2963842932,4015366655,3852247746,2796956967,3865723491,3747938335,247794022,3755824572,702416469,2434691994,397379957,851939612,2314769512,218229120,1380406772,62274761,214451378,3170103466,2276210409,3845813286,28563499,446592073,1693330814,3453727194,29968656,3093872512,220656637,2470637031,77972100,1667708854,1358280214,4064765667,2395616961,325977563,4277240721,4220025399,3605526484,3355147721,811859167,3069544926,3962126810,652502677,3075892249,4132761541,3498924215,1217549313,3250244479,3858715919,3053989961,1538642152,2279026266,2875879137,574252750,3324769229,2651358713,1758150215,141295887,2719868960,3515574750,4093007735,4194485238,1082055363,3417560400,395511885,2966884026,179534037,3646028556,3738688086,1092926436,2496269142,257381841,3772900718,1636087230,1477059743,2499234752,3811018894,2675660129,3285975680,90732309,1684827095,1150307763,1723134115,3237045386,1769919919,1240018934,815675215,750138730,2239792499,1234303040,1995484674,138143821,675421338,1145607174,1936608440,3238603024,2345230278,2105974004,323969391,779555213,3004902369,2861610098,1017501463,2098600890,2628620304,2940611490,2682542546,1171473753,3656571411,3687208071,4091869518,393037935,159126506,1662887367,1147106178,391545844,3452332695,1891500680,3016609650,1851642611,546529401,1167818917,3194020571,2848076033,3953471836,575554290,475796850,4134673196,450035699,2351251534,844027695,1080539133,86184846,1554234488,3692025454,1972511363,2018339607,1491841390,1141460869,1061690759,4244549243,2008416118,2351104703,2868147542,1598468138,722020353,1027143159,212344630,1387219594,1725294528,3745187956,2500153616,458938280,4129215917,1828119673,544571780,3503225445,2297937496,1241802790,267843827,2694610800,1397140384,1558801448,3782667683,1806446719,929573330,2234912681,400817706,616011623,4121520928,3603768725,1761550015,1968522284,4053731006,4192232858,4005120285,872482584,3140537016,3894607381,2287405443,1963876937,3663887957,1584857e3,2975024454,1833426440,4025083860],s[5]=[4143615901,749497569,1285769319,3795025788,2514159847,23610292,3974978748,844452780,3214870880,3751928557,2213566365,1676510905,448177848,3730751033,4086298418,2307502392,871450977,3222878141,4110862042,3831651966,2735270553,1310974780,2043402188,1218528103,2736035353,4274605013,2702448458,3936360550,2693061421,162023535,2827510090,687910808,23484817,3784910947,3371371616,779677500,3503626546,3473927188,4157212626,3500679282,4248902014,2466621104,3899384794,1958663117,925738300,1283408968,3669349440,1840910019,137959847,2679828185,1239142320,1315376211,1547541505,1690155329,739140458,3128809933,3933172616,3876308834,905091803,1548541325,4040461708,3095483362,144808038,451078856,676114313,2861728291,2469707347,993665471,373509091,2599041286,4025009006,4170239449,2149739950,3275793571,3749616649,2794760199,1534877388,572371878,2590613551,1753320020,3467782511,1405125690,4270405205,633333386,3026356924,3475123903,632057672,2846462855,1404951397,3882875879,3915906424,195638627,2385783745,3902872553,1233155085,3355999740,2380578713,2702246304,2144565621,3663341248,3894384975,2502479241,4248018925,3094885567,1594115437,572884632,3385116731,767645374,1331858858,1475698373,3793881790,3532746431,1321687957,619889600,1121017241,3440213920,2070816767,2833025776,1933951238,4095615791,890643334,3874130214,859025556,360630002,925594799,1764062180,3920222280,4078305929,979562269,2810700344,4087740022,1949714515,546639971,1165388173,3069891591,1495988560,922170659,1291546247,2107952832,1813327274,3406010024,3306028637,4241950635,153207855,2313154747,1608695416,1150242611,1967526857,721801357,1220138373,3691287617,3356069787,2112743302,3281662835,1111556101,1778980689,250857638,2298507990,673216130,2846488510,3207751581,3562756981,3008625920,3417367384,2198807050,529510932,3547516680,3426503187,2364944742,102533054,2294910856,1617093527,1204784762,3066581635,1019391227,1069574518,1317995090,1691889997,3661132003,510022745,3238594800,1362108837,1817929911,2184153760,805817662,1953603311,3699844737,120799444,2118332377,207536705,2282301548,4120041617,145305846,2508124933,3086745533,3261524335,1877257368,2977164480,3160454186,2503252186,4221677074,759945014,254147243,2767453419,3801518371,629083197,2471014217,907280572,3900796746,940896768,2751021123,2625262786,3161476951,3661752313,3260732218,1425318020,2977912069,1496677566,3988592072,2140652971,3126511541,3069632175,977771578,1392695845,1698528874,1411812681,1369733098,1343739227,3620887944,1142123638,67414216,3102056737,3088749194,1626167401,2546293654,3941374235,697522451,33404913,143560186,2595682037,994885535,1247667115,3859094837,2699155541,3547024625,4114935275,2968073508,3199963069,2732024527,1237921620,951448369,1898488916,1211705605,2790989240,2233243581,3598044975],s[6]=[2246066201,858518887,1714274303,3485882003,713916271,2879113490,3730835617,539548191,36158695,1298409750,419087104,1358007170,749914897,2989680476,1261868530,2995193822,2690628854,3443622377,3780124940,3796824509,2976433025,4259637129,1551479e3,512490819,1296650241,951993153,2436689437,2460458047,144139966,3136204276,310820559,3068840729,643875328,1969602020,1680088954,2185813161,3283332454,672358534,198762408,896343282,276269502,3014846926,84060815,197145886,376173866,3943890818,3813173521,3545068822,1316698879,1598252827,2633424951,1233235075,859989710,2358460855,3503838400,3409603720,1203513385,1193654839,2792018475,2060853022,207403770,1144516871,3068631394,1121114134,177607304,3785736302,326409831,1929119770,2983279095,4183308101,3474579288,3200513878,3228482096,119610148,1170376745,3378393471,3163473169,951863017,3337026068,3135789130,2907618374,1183797387,2015970143,4045674555,2182986399,2952138740,3928772205,384012900,2454997643,10178499,2879818989,2596892536,111523738,2995089006,451689641,3196290696,235406569,1441906262,3890558523,3013735005,4158569349,1644036924,376726067,1006849064,3664579700,2041234796,1021632941,1374734338,2566452058,371631263,4007144233,490221539,206551450,3140638584,1053219195,1853335209,3412429660,3562156231,735133835,1623211703,3104214392,2738312436,4096837757,3366392578,3110964274,3956598718,3196820781,2038037254,3877786376,2339753847,300912036,3766732888,2372630639,1516443558,4200396704,1574567987,4069441456,4122592016,2699739776,146372218,2748961456,2043888151,35287437,2596680554,655490400,1132482787,110692520,1031794116,2188192751,1324057718,1217253157,919197030,686247489,3261139658,1028237775,3135486431,3059715558,2460921700,986174950,2661811465,4062904701,2752986992,3709736643,367056889,1353824391,731860949,1650113154,1778481506,784341916,357075625,3608602432,1074092588,2480052770,3811426202,92751289,877911070,3600361838,1231880047,480201094,3756190983,3094495953,434011822,87971354,363687820,1717726236,1901380172,3926403882,2481662265,400339184,1490350766,2661455099,1389319756,2558787174,784598401,1983468483,30828846,3550527752,2716276238,3841122214,1765724805,1955612312,1277890269,1333098070,1564029816,2704417615,1026694237,3287671188,1260819201,3349086767,1016692350,1582273796,1073413053,1995943182,694588404,1025494639,3323872702,3551898420,4146854327,453260480,1316140391,1435673405,3038941953,3486689407,1622062951,403978347,817677117,950059133,4246079218,3278066075,1486738320,1417279718,481875527,2549965225,3933690356,760697757,1452955855,3897451437,1177426808,1702951038,4085348628,2447005172,1084371187,3516436277,3068336338,1073369276,1027665953,3284188590,1230553676,1368340146,2226246512,267243139,2274220762,4070734279,2497715176,2423353163,2504755875],s[7]=[3793104909,3151888380,2817252029,895778965,2005530807,3871412763,237245952,86829237,296341424,3851759377,3974600970,2475086196,709006108,1994621201,2972577594,937287164,3734691505,168608556,3189338153,2225080640,3139713551,3033610191,3025041904,77524477,185966941,1208824168,2344345178,1721625922,3354191921,1066374631,1927223579,1971335949,2483503697,1551748602,2881383779,2856329572,3003241482,48746954,1398218158,2050065058,313056748,4255789917,393167848,1912293076,940740642,3465845460,3091687853,2522601570,2197016661,1727764327,364383054,492521376,1291706479,3264136376,1474851438,1685747964,2575719748,1619776915,1814040067,970743798,1561002147,2925768690,2123093554,1880132620,3151188041,697884420,2550985770,2607674513,2659114323,110200136,1489731079,997519150,1378877361,3527870668,478029773,2766872923,1022481122,431258168,1112503832,897933369,2635587303,669726182,3383752315,918222264,163866573,3246985393,3776823163,114105080,1903216136,761148244,3571337562,1690750982,3166750252,1037045171,1888456500,2010454850,642736655,616092351,365016990,1185228132,4174898510,1043824992,2023083429,2241598885,3863320456,3279669087,3674716684,108438443,2132974366,830746235,606445527,4173263986,2204105912,1844756978,2532684181,4245352700,2969441100,3796921661,1335562986,4061524517,2720232303,2679424040,634407289,885462008,3294724487,3933892248,2094100220,339117932,4048830727,3202280980,1458155303,2689246273,1022871705,2464987878,3714515309,353796843,2822958815,4256850100,4052777845,551748367,618185374,3778635579,4020649912,1904685140,3069366075,2670879810,3407193292,2954511620,4058283405,2219449317,3135758300,1120655984,3447565834,1474845562,3577699062,550456716,3466908712,2043752612,881257467,869518812,2005220179,938474677,3305539448,3850417126,1315485940,3318264702,226533026,965733244,321539988,1136104718,804158748,573969341,3708209826,937399083,3290727049,2901666755,1461057207,4013193437,4066861423,3242773476,2421326174,1581322155,3028952165,786071460,3900391652,3918438532,1485433313,4023619836,3708277595,3678951060,953673138,1467089153,1930354364,1533292819,2492563023,1346121658,1685000834,1965281866,3765933717,4190206607,2052792609,3515332758,690371149,3125873887,2180283551,2903598061,3933952357,436236910,289419410,14314871,1242357089,2904507907,1616633776,2666382180,585885352,3471299210,2699507360,1432659641,277164553,3354103607,770115018,2303809295,3741942315,3177781868,2853364978,2269453327,3774259834,987383833,1290892879,225909803,1741533526,890078084,1496906255,1111072499,916028167,243534141,1252605537,2204162171,531204876,290011180,3916834213,102027703,237315147,209093447,1486785922,220223953,2758195998,4175039106,82940208,3127791296,2569425252,518464269,1353887104,3941492737,2377294467,3935040926]}function Js(e){this.cast5=new A3,this.cast5.setKey(e),this.encrypt=function(t){return this.cast5.encrypt(t)}}Ys.keySize=Ys.prototype.keySize=24,Ys.blockSize=Ys.prototype.blockSize=8,Js.blockSize=Js.prototype.blockSize=8,Js.keySize=Js.prototype.keySize=16;const Rr=4294967295;function en(e,t){return(e<<t|e>>>32-t)&Rr}function Rn(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function ei(e,t,r){e.splice(t,4,255&r,r>>>8&255,r>>>16&255,r>>>24&255)}function te(e,t){return e>>>8*t&255}function Xs(e){this.tf=function(){let t=null,r=null,n=-1,i=[],s=[[],[],[],[]];function a(h){return s[0][te(h,0)]^s[1][te(h,1)]^s[2][te(h,2)]^s[3][te(h,3)]}function o(h){return s[0][te(h,3)]^s[1][te(h,0)]^s[2][te(h,1)]^s[3][te(h,2)]}function c(h,f){let p=a(f[0]),d=o(f[1]);f[2]=en(f[2]^p+d+i[4*h+8]&Rr,31),f[3]=en(f[3],1)^p+2*d+i[4*h+9]&Rr,p=a(f[2]),d=o(f[3]),f[0]=en(f[0]^p+d+i[4*h+10]&Rr,31),f[1]=en(f[1],1)^p+2*d+i[4*h+11]&Rr}function u(h,f){let p=a(f[0]),d=o(f[1]);f[2]=en(f[2],1)^p+d+i[4*h+10]&Rr,f[3]=en(f[3]^p+2*d+i[4*h+11]&Rr,31),p=a(f[2]),d=o(f[3]),f[0]=en(f[0],1)^p+d+i[4*h+8]&Rr,f[1]=en(f[1]^p+2*d+i[4*h+9]&Rr,31)}return{name:"twofish",blocksize:16,open:function(h){let f,p,d,S,k;t=h;const A=[],C=[],B=[];let R;const D=[];let L,g,I;const l=[[8,1,7,13,6,15,3,2,0,11,5,9,14,12,10,4],[2,8,11,13,15,7,6,14,3,1,9,4,0,10,12,5]],m=[[14,12,11,8,1,2,3,5,15,4,10,6,7,0,9,13],[1,14,2,11,4,12,3,7,6,13,10,5,15,9,0,8]],v=[[11,10,5,14,6,13,9,0,12,8,15,3,2,4,7,1],[4,12,7,5,1,6,9,10,0,14,13,8,2,11,3,15]],y=[[13,7,15,4,1,2,6,14,9,11,3,0,8,5,12,10],[11,9,5,1,12,3,13,14,6,4,7,15,2,0,8,10]],w=[0,8,1,9,2,10,3,11,4,12,5,13,6,14,7,15],N=[0,9,2,11,4,13,6,15,8,1,10,3,12,5,14,7],O=[[],[]],W=[[],[],[],[]];function Z(it){return it^it>>2^[0,90,180,238][3&it]}function b(it){return it^it>>1^it>>2^[0,238,180,90][3&it]}function U(it,ht){let ut,lt,j;for(ut=0;ut<8;ut++)lt=ht>>>24,ht=ht<<8&Rr|it>>>24,it=it<<8&Rr,j=lt<<1,128&lt&&(j^=333),ht^=lt^j<<16,j^=lt>>>1,1&lt&&(j^=166),ht^=j<<24|j<<8;return ht}function G(it,ht){const ut=ht>>4,lt=15&ht,j=l[it][ut^lt],tt=m[it][w[lt]^N[ut]];return y[it][w[tt]^N[j]]<<4|v[it][j^tt]}function Q(it,ht){let ut=te(it,0),lt=te(it,1),j=te(it,2),tt=te(it,3);switch(R){case 4:ut=O[1][ut]^te(ht[3],0),lt=O[0][lt]^te(ht[3],1),j=O[0][j]^te(ht[3],2),tt=O[1][tt]^te(ht[3],3);case 3:ut=O[1][ut]^te(ht[2],0),lt=O[1][lt]^te(ht[2],1),j=O[0][j]^te(ht[2],2),tt=O[0][tt]^te(ht[2],3);case 2:ut=O[0][O[0][ut]^te(ht[1],0)]^te(ht[0],0),lt=O[0][O[1][lt]^te(ht[1],1)]^te(ht[0],1),j=O[1][O[0][j]^te(ht[1],2)]^te(ht[0],2),tt=O[1][O[1][tt]^te(ht[1],3)]^te(ht[0],3)}return W[0][ut]^W[1][lt]^W[2][j]^W[3][tt]}for(t=t.slice(0,32),f=t.length;f!==16&&f!==24&&f!==32;)t[f++]=0;for(f=0;f<t.length;f+=4)B[f>>2]=Rn(t,f);for(f=0;f<256;f++)O[0][f]=G(0,f),O[1][f]=G(1,f);for(f=0;f<256;f++)L=O[1][f],g=Z(L),I=b(L),W[0][f]=L+(g<<8)+(I<<16)+(I<<24),W[2][f]=g+(I<<8)+(L<<16)+(I<<24),L=O[0][f],g=Z(L),I=b(L),W[1][f]=I+(I<<8)+(g<<16)+(L<<24),W[3][f]=g+(L<<8)+(I<<16)+(g<<24);for(R=B.length/2,f=0;f<R;f++)p=B[f+f],A[f]=p,d=B[f+f+1],C[f]=d,D[R-f-1]=U(p,d);for(f=0;f<40;f+=2)p=16843009*f,d=p+16843009,p=Q(p,A),d=en(Q(d,C),8),i[f]=p+d&Rr,i[f+1]=en(p+2*d,9);for(f=0;f<256;f++)switch(p=d=S=k=f,R){case 4:p=O[1][p]^te(D[3],0),d=O[0][d]^te(D[3],1),S=O[0][S]^te(D[3],2),k=O[1][k]^te(D[3],3);case 3:p=O[1][p]^te(D[2],0),d=O[1][d]^te(D[2],1),S=O[0][S]^te(D[2],2),k=O[0][k]^te(D[2],3);case 2:s[0][f]=W[0][O[0][O[0][p]^te(D[1],0)]^te(D[0],0)],s[1][f]=W[1][O[0][O[1][d]^te(D[1],1)]^te(D[0],1)],s[2][f]=W[2][O[1][O[0][S]^te(D[1],2)]^te(D[0],2)],s[3][f]=W[3][O[1][O[1][k]^te(D[1],3)]^te(D[0],3)]}},close:function(){i=[],s=[[],[],[],[]]},encrypt:function(h,f){r=h,n=f;const p=[Rn(r,n)^i[0],Rn(r,n+4)^i[1],Rn(r,n+8)^i[2],Rn(r,n+12)^i[3]];for(let d=0;d<8;d++)c(d,p);return ei(r,n,p[2]^i[4]),ei(r,n+4,p[3]^i[5]),ei(r,n+8,p[0]^i[6]),ei(r,n+12,p[1]^i[7]),n+=16,r},decrypt:function(h,f){r=h,n=f;const p=[Rn(r,n)^i[4],Rn(r,n+4)^i[5],Rn(r,n+8)^i[6],Rn(r,n+12)^i[7]];for(let d=7;d>=0;d--)u(d,p);ei(r,n,p[2]^i[0]),ei(r,n+4,p[3]^i[1]),ei(r,n+8,p[0]^i[2]),ei(r,n+12,p[1]^i[3]),n+=16},finalize:function(){return r}}}(),this.tf.open(Array.from(e),0),this.encrypt=function(t){return this.tf.encrypt(Array.from(t),0)}}function Br(){}function Zs(e){this.bf=new Br,this.bf.init(e),this.encrypt=function(t){return this.bf.encryptBlock(t)}}Xs.keySize=Xs.prototype.keySize=32,Xs.blockSize=Xs.prototype.blockSize=16,Br.prototype.BLOCKSIZE=8,Br.prototype.SBOXES=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],Br.prototype.PARRAY=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Br.prototype.NN=16,Br.prototype._clean=function(e){return e<0&&(e=(2147483647&e)+2147483648),e},Br.prototype._F=function(e){let t;const r=255&e,n=255&(e>>>=8),i=255&(e>>>=8),s=255&(e>>>=8);return t=this.sboxes[0][s]+this.sboxes[1][i],t^=this.sboxes[2][n],t+=this.sboxes[3][r],t},Br.prototype._encryptBlock=function(e){let t,r=e[0],n=e[1];for(t=0;t<this.NN;++t){r^=this.parray[t],n=this._F(r)^n;const i=r;r=n,n=i}r^=this.parray[this.NN+0],n^=this.parray[this.NN+1],e[0]=this._clean(n),e[1]=this._clean(r)},Br.prototype.encryptBlock=function(e){let t;const r=[0,0],n=this.BLOCKSIZE/2;for(t=0;t<this.BLOCKSIZE/2;++t)r[0]=r[0]<<8|255&e[t+0],r[1]=r[1]<<8|255&e[t+n];this._encryptBlock(r);const i=[];for(t=0;t<this.BLOCKSIZE/2;++t)i[t+0]=r[0]>>>24-8*t&255,i[t+n]=r[1]>>>24-8*t&255;return i},Br.prototype._decryptBlock=function(e){let t,r=e[0],n=e[1];for(t=this.NN+1;t>1;--t){r^=this.parray[t],n=this._F(r)^n;const i=r;r=n,n=i}r^=this.parray[1],n^=this.parray[0],e[0]=this._clean(n),e[1]=this._clean(r)},Br.prototype.init=function(e){let t,r=0;for(this.parray=[],t=0;t<this.NN+2;++t){let i=0;for(let s=0;s<4;++s)i=i<<8|255&e[r],++r>=e.length&&(r=0);this.parray[t]=this.PARRAY[t]^i}for(this.sboxes=[],t=0;t<4;++t)for(this.sboxes[t]=[],r=0;r<256;++r)this.sboxes[t][r]=this.SBOXES[t][r];const n=[0,0];for(t=0;t<this.NN+2;t+=2)this._encryptBlock(n),this.parray[t+0]=n[0],this.parray[t+1]=n[1];for(t=0;t<4;++t)for(r=0;r<256;r+=2)this._encryptBlock(n),this.sboxes[t][r+0]=n[0],this.sboxes[t][r+1]=n[1]},Zs.keySize=Zs.prototype.keySize=16,Zs.blockSize=Zs.prototype.blockSize=8;const S3=E0(128),E3=E0(192),k3=E0(256);var Vi=Object.freeze({__proto__:null,aes128:S3,aes192:E3,aes256:k3,des:function(e){this.key=e,this.encrypt=function(t,r){return ha(fa(this.key),t,!0,0,null,r)},this.decrypt=function(t,r){return ha(fa(this.key),t,!1,0,null,r)}},tripledes:Ys,cast5:Js,twofish:Xs,blowfish:Zs,idea:function(){throw Error("IDEA symmetric-key algorithm not implemented")}}),of=function(e,t,r){var n=0,i=0,s=0,a=0,o=0,c=0,u=0,h=0,f=0,p=0,d=0,S=0,k=0,A=0,C=0,B=0,R=0,D=new e.Uint8Array(r);function L(b,U,G,Q,it,ht,ut,lt,j,tt,F,x,Y,P,T,z){b=b|0,U=U|0,G=G|0,Q=Q|0,it=it|0,ht=ht|0,ut=ut|0,lt=lt|0,j=j|0,tt=tt|0,F=F|0,x=x|0,Y=Y|0,P=P|0,T=T|0,z=z|0;var E=0,_=0,M=0,K=0,X=0,J=0,nt=0,pt=0,gt=0,Et=0,et=0,rt=0,ot=0,st=0,at=0,ct=0,$=0,q=0,_t=0,vt=0,Dt=0,ie=0,zt=0,Bt=0,pe=0,Qt=0,re=0,Te=0,Nt=0,jt=0,se=0,Ut=0,Jt=0,fe=0,qt=0,mt=0,yt=0,wt=0,Tt=0,Kt=0,Ot=0,It=0,ce=0,Xt=0,le=0,tr=0,er=0,ur=0,Vr=0,Yr=0,Jr=0,Xr=0,Zr=0,Qr=0,tn=0,Mn=0,Tn=0,Yn=0,Jn=0,Xn=0,Zn=0,Qn=0,ti=0,Ci=0,Jc=0,Xc=0,Zc=0,Qc=0,y1=0,g1=0,b1=0;E=n,_=i,M=s,K=a,X=o,nt=b+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=U+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=G+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=Q+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=it+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=ht+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=ut+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=lt+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=j+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=tt+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=F+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=x+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=Y+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=P+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=T+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,nt=z+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=P^j^G^b,pt=J<<1|J>>>31,nt=pt+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=T^tt^Q^U,gt=J<<1|J>>>31,nt=gt+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=z^F^it^G,Et=J<<1|J>>>31,nt=Et+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=pt^x^ht^Q,et=J<<1|J>>>31,nt=et+(E<<5|E>>>27)+X+(_&M|~_&K)+1518500249|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=gt^Y^ut^it,rt=J<<1|J>>>31,nt=rt+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Et^P^lt^ht,ot=J<<1|J>>>31,nt=ot+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=et^T^j^ut,st=J<<1|J>>>31,nt=st+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=rt^z^tt^lt,at=J<<1|J>>>31,nt=at+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=ot^pt^F^j,ct=J<<1|J>>>31,nt=ct+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=st^gt^x^tt,$=J<<1|J>>>31,nt=$+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=at^Et^Y^F,q=J<<1|J>>>31,nt=q+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=ct^et^P^x,_t=J<<1|J>>>31,nt=_t+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=$^rt^T^Y,vt=J<<1|J>>>31,nt=vt+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=q^ot^z^P,Dt=J<<1|J>>>31,nt=Dt+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=_t^st^pt^T,ie=J<<1|J>>>31,nt=ie+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=vt^at^gt^z,zt=J<<1|J>>>31,nt=zt+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Dt^ct^Et^pt,Bt=J<<1|J>>>31,nt=Bt+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=ie^$^et^gt,pe=J<<1|J>>>31,nt=pe+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=zt^q^rt^Et,Qt=J<<1|J>>>31,nt=Qt+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Bt^_t^ot^et,re=J<<1|J>>>31,nt=re+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=pe^vt^st^rt,Te=J<<1|J>>>31,nt=Te+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Qt^Dt^at^ot,Nt=J<<1|J>>>31,nt=Nt+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=re^ie^ct^st,jt=J<<1|J>>>31,nt=jt+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Te^zt^$^at,se=J<<1|J>>>31,nt=se+(E<<5|E>>>27)+X+(_^M^K)+1859775393|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Nt^Bt^q^ct,Ut=J<<1|J>>>31,nt=Ut+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=jt^pe^_t^$,Jt=J<<1|J>>>31,nt=Jt+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=se^Qt^vt^q,fe=J<<1|J>>>31,nt=fe+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Ut^re^Dt^_t,qt=J<<1|J>>>31,nt=qt+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Jt^Te^ie^vt,mt=J<<1|J>>>31,nt=mt+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=fe^Nt^zt^Dt,yt=J<<1|J>>>31,nt=yt+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=qt^jt^Bt^ie,wt=J<<1|J>>>31,nt=wt+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=mt^se^pe^zt,Tt=J<<1|J>>>31,nt=Tt+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=yt^Ut^Qt^Bt,Kt=J<<1|J>>>31,nt=Kt+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=wt^Jt^re^pe,Ot=J<<1|J>>>31,nt=Ot+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Tt^fe^Te^Qt,It=J<<1|J>>>31,nt=It+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Kt^qt^Nt^re,ce=J<<1|J>>>31,nt=ce+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Ot^mt^jt^Te,Xt=J<<1|J>>>31,nt=Xt+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=It^yt^se^Nt,le=J<<1|J>>>31,nt=le+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=ce^wt^Ut^jt,tr=J<<1|J>>>31,nt=tr+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Xt^Tt^Jt^se,er=J<<1|J>>>31,nt=er+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=le^Kt^fe^Ut,ur=J<<1|J>>>31,nt=ur+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=tr^Ot^qt^Jt,Vr=J<<1|J>>>31,nt=Vr+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=er^It^mt^fe,Yr=J<<1|J>>>31,nt=Yr+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=ur^ce^yt^qt,Jr=J<<1|J>>>31,nt=Jr+(E<<5|E>>>27)+X+(_&M|_&K|M&K)-1894007588|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Vr^Xt^wt^mt,Xr=J<<1|J>>>31,nt=Xr+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Yr^le^Tt^yt,Zr=J<<1|J>>>31,nt=Zr+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Jr^tr^Kt^wt,Qr=J<<1|J>>>31,nt=Qr+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Xr^er^Ot^Tt,tn=J<<1|J>>>31,nt=tn+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Zr^ur^It^Kt,Mn=J<<1|J>>>31,nt=Mn+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Qr^Vr^ce^Ot,Tn=J<<1|J>>>31,nt=Tn+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=tn^Yr^Xt^It,Yn=J<<1|J>>>31,nt=Yn+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Mn^Jr^le^ce,Jn=J<<1|J>>>31,nt=Jn+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Tn^Xr^tr^Xt,Xn=J<<1|J>>>31,nt=Xn+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Yn^Zr^er^le,Zn=J<<1|J>>>31,nt=Zn+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Jn^Qr^ur^tr,Qn=J<<1|J>>>31,nt=Qn+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Xn^tn^Vr^er,ti=J<<1|J>>>31,nt=ti+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Zn^Mn^Yr^ur,Ci=J<<1|J>>>31,nt=Ci+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Qn^Tn^Jr^Vr,Jc=J<<1|J>>>31,nt=Jc+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=ti^Yn^Xr^Yr,Xc=J<<1|J>>>31,nt=Xc+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Ci^Jn^Zr^Jr,Zc=J<<1|J>>>31,nt=Zc+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Jc^Xn^Qr^Xr,Qc=J<<1|J>>>31,nt=Qc+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Xc^Zn^tn^Zr,y1=J<<1|J>>>31,nt=y1+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Zc^Qn^Mn^Qr,g1=J<<1|J>>>31,nt=g1+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,J=Qc^ti^Tn^tn,b1=J<<1|J>>>31,nt=b1+(E<<5|E>>>27)+X+(_^M^K)-899497514|0,X=K,K=M,M=_<<30|_>>>2,_=E,E=nt,n=n+E|0,i=i+_|0,s=s+M|0,a=a+K|0,o=o+X|0}function g(b){b=b|0,L(D[b|0]<<24|D[b|1]<<16|D[b|2]<<8|D[b|3],D[b|4]<<24|D[b|5]<<16|D[b|6]<<8|D[b|7],D[b|8]<<24|D[b|9]<<16|D[b|10]<<8|D[b|11],D[b|12]<<24|D[b|13]<<16|D[b|14]<<8|D[b|15],D[b|16]<<24|D[b|17]<<16|D[b|18]<<8|D[b|19],D[b|20]<<24|D[b|21]<<16|D[b|22]<<8|D[b|23],D[b|24]<<24|D[b|25]<<16|D[b|26]<<8|D[b|27],D[b|28]<<24|D[b|29]<<16|D[b|30]<<8|D[b|31],D[b|32]<<24|D[b|33]<<16|D[b|34]<<8|D[b|35],D[b|36]<<24|D[b|37]<<16|D[b|38]<<8|D[b|39],D[b|40]<<24|D[b|41]<<16|D[b|42]<<8|D[b|43],D[b|44]<<24|D[b|45]<<16|D[b|46]<<8|D[b|47],D[b|48]<<24|D[b|49]<<16|D[b|50]<<8|D[b|51],D[b|52]<<24|D[b|53]<<16|D[b|54]<<8|D[b|55],D[b|56]<<24|D[b|57]<<16|D[b|58]<<8|D[b|59],D[b|60]<<24|D[b|61]<<16|D[b|62]<<8|D[b|63])}function I(b){b=b|0,D[b|0]=n>>>24,D[b|1]=n>>>16&255,D[b|2]=n>>>8&255,D[b|3]=n&255,D[b|4]=i>>>24,D[b|5]=i>>>16&255,D[b|6]=i>>>8&255,D[b|7]=i&255,D[b|8]=s>>>24,D[b|9]=s>>>16&255,D[b|10]=s>>>8&255,D[b|11]=s&255,D[b|12]=a>>>24,D[b|13]=a>>>16&255,D[b|14]=a>>>8&255,D[b|15]=a&255,D[b|16]=o>>>24,D[b|17]=o>>>16&255,D[b|18]=o>>>8&255,D[b|19]=o&255}function l(){n=1732584193,i=4023233417,s=2562383102,a=271733878,o=3285377520,c=u=0}function m(b,U,G,Q,it,ht,ut){b=b|0,U=U|0,G=G|0,Q=Q|0,it=it|0,ht=ht|0,ut=ut|0,n=b,i=U,s=G,a=Q,o=it,c=ht,u=ut}function v(b,U){b=b|0,U=U|0;var G=0;if(b&63)return-1;for(;(U|0)>=64;)g(b),b=b+64|0,U=U-64|0,G=G+64|0;return c=c+G|0,c>>>0<G>>>0&&(u=u+1|0),G|0}function y(b,U,G){b=b|0,U=U|0,G=G|0;var Q=0,it=0;if(b&63||~G&&G&31)return-1;if((U|0)>=64){if(Q=v(b,U)|0,(Q|0)==-1)return-1;b=b+Q|0,U=U-Q|0}if(Q=Q+U|0,c=c+U|0,c>>>0<U>>>0&&(u=u+1|0),D[b|U]=128,(U|0)>=56){for(it=U+1|0;(it|0)<64;it=it+1|0)D[b|it]=0;g(b),U=0,D[b|0]=0}for(it=U+1|0;(it|0)<59;it=it+1|0)D[b|it]=0;return D[b|56]=u>>>21&255,D[b|57]=u>>>13&255,D[b|58]=u>>>5&255,D[b|59]=u<<3&255|c>>>29,D[b|60]=c>>>21&255,D[b|61]=c>>>13&255,D[b|62]=c>>>5&255,D[b|63]=c<<3&255,g(b),~G&&I(G),Q|0}function w(){n=h,i=f,s=p,a=d,o=S,c=64,u=0}function N(){n=k,i=A,s=C,a=B,o=R,c=64,u=0}function O(b,U,G,Q,it,ht,ut,lt,j,tt,F,x,Y,P,T,z){b=b|0,U=U|0,G=G|0,Q=Q|0,it=it|0,ht=ht|0,ut=ut|0,lt=lt|0,j=j|0,tt=tt|0,F=F|0,x=x|0,Y=Y|0,P=P|0,T=T|0,z=z|0,l(),L(b^1549556828,U^1549556828,G^1549556828,Q^1549556828,it^1549556828,ht^1549556828,ut^1549556828,lt^1549556828,j^1549556828,tt^1549556828,F^1549556828,x^1549556828,Y^1549556828,P^1549556828,T^1549556828,z^1549556828),k=n,A=i,C=s,B=a,R=o,l(),L(b^909522486,U^909522486,G^909522486,Q^909522486,it^909522486,ht^909522486,ut^909522486,lt^909522486,j^909522486,tt^909522486,F^909522486,x^909522486,Y^909522486,P^909522486,T^909522486,z^909522486),h=n,f=i,p=s,d=a,S=o,c=64,u=0}function W(b,U,G){b=b|0,U=U|0,G=G|0;var Q=0,it=0,ht=0,ut=0,lt=0,j=0;return b&63||~G&&G&31?-1:(j=y(b,U,-1)|0,Q=n,it=i,ht=s,ut=a,lt=o,N(),L(Q,it,ht,ut,lt,2147483648,0,0,0,0,0,0,0,0,0,672),~G&&I(G),j|0)}function Z(b,U,G,Q,it){b=b|0,U=U|0,G=G|0,Q=Q|0,it=it|0;var ht=0,ut=0,lt=0,j=0,tt=0,F=0,x=0,Y=0,P=0,T=0;if(b&63||~it&&it&31)return-1;for(D[b+U|0]=G>>>24,D[b+U+1|0]=G>>>16&255,D[b+U+2|0]=G>>>8&255,D[b+U+3|0]=G&255,W(b,U+4|0,-1)|0,ht=F=n,ut=x=i,lt=Y=s,j=P=a,tt=T=o,Q=Q-1|0;(Q|0)>0;)w(),L(F,x,Y,P,T,2147483648,0,0,0,0,0,0,0,0,0,672),F=n,x=i,Y=s,P=a,T=o,N(),L(F,x,Y,P,T,2147483648,0,0,0,0,0,0,0,0,0,672),F=n,x=i,Y=s,P=a,T=o,ht=ht^n,ut=ut^i,lt=lt^s,j=j^a,tt=tt^o,Q=Q-1|0;return n=ht,i=ut,s=lt,a=j,o=tt,~it&&I(it),0}return{reset:l,init:m,process:v,finish:y,hmac_reset:w,hmac_init:O,hmac_finish:W,pbkdf2_generate_block:Z}};class cf{constructor(){this.pos=0,this.len=0}reset(){const{asm:t}=this.acquire_asm();return this.result=null,this.pos=0,this.len=0,t.reset(),this}process(t){if(this.result!==null)throw new Ku("state must be reset before processing new data");const{asm:r,heap:n}=this.acquire_asm();let i=this.pos,s=this.len,a=0,o=t.length,c=0;for(;o>0;)c=Fi(n,i+s,t,a,o),s+=c,a+=c,o-=c,c=r.process(i,s),i+=c,s-=c,s||(i=0);return this.pos=i,this.len=s,this}finish(){if(this.result!==null)throw new Ku("state must be reset before processing new data");const{asm:t,heap:r}=this.acquire_asm();return t.finish(this.pos,this.len,0),this.result=new Uint8Array(this.HASH_SIZE),this.result.set(r.subarray(0,this.HASH_SIZE)),this.pos=0,this.len=0,this.release_asm(),this}}const M1=[],T1=[];class Li extends cf{constructor(){super(),this.NAME="sha1",this.BLOCK_SIZE=64,this.HASH_SIZE=20,this.acquire_asm()}acquire_asm(){return this.heap!==void 0&&this.asm!==void 0||(this.heap=M1.pop()||S0(),this.asm=T1.pop()||of({Uint8Array},null,this.heap.buffer),this.reset()),{heap:this.heap,asm:this.asm}}release_asm(){this.heap!==void 0&&this.asm!==void 0&&(M1.push(this.heap),T1.push(this.asm)),this.heap=void 0,this.asm=void 0}static bytes(t){return new Li().process(t).finish().result}}Li.NAME="sha1",Li.heap_pool=[],Li.asm_pool=[],Li.asm_function=of;const R1=[],C1=[];class Pc extends cf{constructor(){super(),this.NAME="sha256",this.BLOCK_SIZE=64,this.HASH_SIZE=32,this.acquire_asm()}acquire_asm(){return this.heap!==void 0&&this.asm!==void 0||(this.heap=R1.pop()||S0(),this.asm=C1.pop()||function(t,r,n){var i=0,s=0,a=0,o=0,c=0,u=0,h=0,f=0,p=0,d=0,S=0,k=0,A=0,C=0,B=0,R=0,D=0,L=0,g=0,I=0,l=0,m=0,v=0,y=0,w=0,N=0,O=new t.Uint8Array(n);function W(F,x,Y,P,T,z,E,_,M,K,X,J,nt,pt,gt,Et){F=F|0,x=x|0,Y=Y|0,P=P|0,T=T|0,z=z|0,E=E|0,_=_|0,M=M|0,K=K|0,X=X|0,J=J|0,nt=nt|0,pt=pt|0,gt=gt|0,Et=Et|0;var et=0,rt=0,ot=0,st=0,at=0,ct=0,$=0,q=0;et=i,rt=s,ot=a,st=o,at=c,ct=u,$=h,q=f,q=F+q+(at>>>6^at>>>11^at>>>25^at<<26^at<<21^at<<7)+($^at&(ct^$))+1116352408|0,st=st+q|0,q=q+(et&rt^ot&(et^rt))+(et>>>2^et>>>13^et>>>22^et<<30^et<<19^et<<10)|0,$=x+$+(st>>>6^st>>>11^st>>>25^st<<26^st<<21^st<<7)+(ct^st&(at^ct))+1899447441|0,ot=ot+$|0,$=$+(q&et^rt&(q^et))+(q>>>2^q>>>13^q>>>22^q<<30^q<<19^q<<10)|0,ct=Y+ct+(ot>>>6^ot>>>11^ot>>>25^ot<<26^ot<<21^ot<<7)+(at^ot&(st^at))+3049323471|0,rt=rt+ct|0,ct=ct+($&q^et&($^q))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0,at=P+at+(rt>>>6^rt>>>11^rt>>>25^rt<<26^rt<<21^rt<<7)+(st^rt&(ot^st))+3921009573|0,et=et+at|0,at=at+(ct&$^q&(ct^$))+(ct>>>2^ct>>>13^ct>>>22^ct<<30^ct<<19^ct<<10)|0,st=T+st+(et>>>6^et>>>11^et>>>25^et<<26^et<<21^et<<7)+(ot^et&(rt^ot))+961987163|0,q=q+st|0,st=st+(at&ct^$&(at^ct))+(at>>>2^at>>>13^at>>>22^at<<30^at<<19^at<<10)|0,ot=z+ot+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(rt^q&(et^rt))+1508970993|0,$=$+ot|0,ot=ot+(st&at^ct&(st^at))+(st>>>2^st>>>13^st>>>22^st<<30^st<<19^st<<10)|0,rt=E+rt+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(et^$&(q^et))+2453635748|0,ct=ct+rt|0,rt=rt+(ot&st^at&(ot^st))+(ot>>>2^ot>>>13^ot>>>22^ot<<30^ot<<19^ot<<10)|0,et=_+et+(ct>>>6^ct>>>11^ct>>>25^ct<<26^ct<<21^ct<<7)+(q^ct&($^q))+2870763221|0,at=at+et|0,et=et+(rt&ot^st&(rt^ot))+(rt>>>2^rt>>>13^rt>>>22^rt<<30^rt<<19^rt<<10)|0,q=M+q+(at>>>6^at>>>11^at>>>25^at<<26^at<<21^at<<7)+($^at&(ct^$))+3624381080|0,st=st+q|0,q=q+(et&rt^ot&(et^rt))+(et>>>2^et>>>13^et>>>22^et<<30^et<<19^et<<10)|0,$=K+$+(st>>>6^st>>>11^st>>>25^st<<26^st<<21^st<<7)+(ct^st&(at^ct))+310598401|0,ot=ot+$|0,$=$+(q&et^rt&(q^et))+(q>>>2^q>>>13^q>>>22^q<<30^q<<19^q<<10)|0,ct=X+ct+(ot>>>6^ot>>>11^ot>>>25^ot<<26^ot<<21^ot<<7)+(at^ot&(st^at))+607225278|0,rt=rt+ct|0,ct=ct+($&q^et&($^q))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0,at=J+at+(rt>>>6^rt>>>11^rt>>>25^rt<<26^rt<<21^rt<<7)+(st^rt&(ot^st))+1426881987|0,et=et+at|0,at=at+(ct&$^q&(ct^$))+(ct>>>2^ct>>>13^ct>>>22^ct<<30^ct<<19^ct<<10)|0,st=nt+st+(et>>>6^et>>>11^et>>>25^et<<26^et<<21^et<<7)+(ot^et&(rt^ot))+1925078388|0,q=q+st|0,st=st+(at&ct^$&(at^ct))+(at>>>2^at>>>13^at>>>22^at<<30^at<<19^at<<10)|0,ot=pt+ot+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(rt^q&(et^rt))+2162078206|0,$=$+ot|0,ot=ot+(st&at^ct&(st^at))+(st>>>2^st>>>13^st>>>22^st<<30^st<<19^st<<10)|0,rt=gt+rt+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(et^$&(q^et))+2614888103|0,ct=ct+rt|0,rt=rt+(ot&st^at&(ot^st))+(ot>>>2^ot>>>13^ot>>>22^ot<<30^ot<<19^ot<<10)|0,et=Et+et+(ct>>>6^ct>>>11^ct>>>25^ct<<26^ct<<21^ct<<7)+(q^ct&($^q))+3248222580|0,at=at+et|0,et=et+(rt&ot^st&(rt^ot))+(rt>>>2^rt>>>13^rt>>>22^rt<<30^rt<<19^rt<<10)|0,F=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(gt>>>17^gt>>>19^gt>>>10^gt<<15^gt<<13)+F+K|0,q=F+q+(at>>>6^at>>>11^at>>>25^at<<26^at<<21^at<<7)+($^at&(ct^$))+3835390401|0,st=st+q|0,q=q+(et&rt^ot&(et^rt))+(et>>>2^et>>>13^et>>>22^et<<30^et<<19^et<<10)|0,x=(Y>>>7^Y>>>18^Y>>>3^Y<<25^Y<<14)+(Et>>>17^Et>>>19^Et>>>10^Et<<15^Et<<13)+x+X|0,$=x+$+(st>>>6^st>>>11^st>>>25^st<<26^st<<21^st<<7)+(ct^st&(at^ct))+4022224774|0,ot=ot+$|0,$=$+(q&et^rt&(q^et))+(q>>>2^q>>>13^q>>>22^q<<30^q<<19^q<<10)|0,Y=(P>>>7^P>>>18^P>>>3^P<<25^P<<14)+(F>>>17^F>>>19^F>>>10^F<<15^F<<13)+Y+J|0,ct=Y+ct+(ot>>>6^ot>>>11^ot>>>25^ot<<26^ot<<21^ot<<7)+(at^ot&(st^at))+264347078|0,rt=rt+ct|0,ct=ct+($&q^et&($^q))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0,P=(T>>>7^T>>>18^T>>>3^T<<25^T<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+P+nt|0,at=P+at+(rt>>>6^rt>>>11^rt>>>25^rt<<26^rt<<21^rt<<7)+(st^rt&(ot^st))+604807628|0,et=et+at|0,at=at+(ct&$^q&(ct^$))+(ct>>>2^ct>>>13^ct>>>22^ct<<30^ct<<19^ct<<10)|0,T=(z>>>7^z>>>18^z>>>3^z<<25^z<<14)+(Y>>>17^Y>>>19^Y>>>10^Y<<15^Y<<13)+T+pt|0,st=T+st+(et>>>6^et>>>11^et>>>25^et<<26^et<<21^et<<7)+(ot^et&(rt^ot))+770255983|0,q=q+st|0,st=st+(at&ct^$&(at^ct))+(at>>>2^at>>>13^at>>>22^at<<30^at<<19^at<<10)|0,z=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(P>>>17^P>>>19^P>>>10^P<<15^P<<13)+z+gt|0,ot=z+ot+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(rt^q&(et^rt))+1249150122|0,$=$+ot|0,ot=ot+(st&at^ct&(st^at))+(st>>>2^st>>>13^st>>>22^st<<30^st<<19^st<<10)|0,E=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(T>>>17^T>>>19^T>>>10^T<<15^T<<13)+E+Et|0,rt=E+rt+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(et^$&(q^et))+1555081692|0,ct=ct+rt|0,rt=rt+(ot&st^at&(ot^st))+(ot>>>2^ot>>>13^ot>>>22^ot<<30^ot<<19^ot<<10)|0,_=(M>>>7^M>>>18^M>>>3^M<<25^M<<14)+(z>>>17^z>>>19^z>>>10^z<<15^z<<13)+_+F|0,et=_+et+(ct>>>6^ct>>>11^ct>>>25^ct<<26^ct<<21^ct<<7)+(q^ct&($^q))+1996064986|0,at=at+et|0,et=et+(rt&ot^st&(rt^ot))+(rt>>>2^rt>>>13^rt>>>22^rt<<30^rt<<19^rt<<10)|0,M=(K>>>7^K>>>18^K>>>3^K<<25^K<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+M+x|0,q=M+q+(at>>>6^at>>>11^at>>>25^at<<26^at<<21^at<<7)+($^at&(ct^$))+2554220882|0,st=st+q|0,q=q+(et&rt^ot&(et^rt))+(et>>>2^et>>>13^et>>>22^et<<30^et<<19^et<<10)|0,K=(X>>>7^X>>>18^X>>>3^X<<25^X<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+K+Y|0,$=K+$+(st>>>6^st>>>11^st>>>25^st<<26^st<<21^st<<7)+(ct^st&(at^ct))+2821834349|0,ot=ot+$|0,$=$+(q&et^rt&(q^et))+(q>>>2^q>>>13^q>>>22^q<<30^q<<19^q<<10)|0,X=(J>>>7^J>>>18^J>>>3^J<<25^J<<14)+(M>>>17^M>>>19^M>>>10^M<<15^M<<13)+X+P|0,ct=X+ct+(ot>>>6^ot>>>11^ot>>>25^ot<<26^ot<<21^ot<<7)+(at^ot&(st^at))+2952996808|0,rt=rt+ct|0,ct=ct+($&q^et&($^q))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0,J=(nt>>>7^nt>>>18^nt>>>3^nt<<25^nt<<14)+(K>>>17^K>>>19^K>>>10^K<<15^K<<13)+J+T|0,at=J+at+(rt>>>6^rt>>>11^rt>>>25^rt<<26^rt<<21^rt<<7)+(st^rt&(ot^st))+3210313671|0,et=et+at|0,at=at+(ct&$^q&(ct^$))+(ct>>>2^ct>>>13^ct>>>22^ct<<30^ct<<19^ct<<10)|0,nt=(pt>>>7^pt>>>18^pt>>>3^pt<<25^pt<<14)+(X>>>17^X>>>19^X>>>10^X<<15^X<<13)+nt+z|0,st=nt+st+(et>>>6^et>>>11^et>>>25^et<<26^et<<21^et<<7)+(ot^et&(rt^ot))+3336571891|0,q=q+st|0,st=st+(at&ct^$&(at^ct))+(at>>>2^at>>>13^at>>>22^at<<30^at<<19^at<<10)|0,pt=(gt>>>7^gt>>>18^gt>>>3^gt<<25^gt<<14)+(J>>>17^J>>>19^J>>>10^J<<15^J<<13)+pt+E|0,ot=pt+ot+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(rt^q&(et^rt))+3584528711|0,$=$+ot|0,ot=ot+(st&at^ct&(st^at))+(st>>>2^st>>>13^st>>>22^st<<30^st<<19^st<<10)|0,gt=(Et>>>7^Et>>>18^Et>>>3^Et<<25^Et<<14)+(nt>>>17^nt>>>19^nt>>>10^nt<<15^nt<<13)+gt+_|0,rt=gt+rt+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(et^$&(q^et))+113926993|0,ct=ct+rt|0,rt=rt+(ot&st^at&(ot^st))+(ot>>>2^ot>>>13^ot>>>22^ot<<30^ot<<19^ot<<10)|0,Et=(F>>>7^F>>>18^F>>>3^F<<25^F<<14)+(pt>>>17^pt>>>19^pt>>>10^pt<<15^pt<<13)+Et+M|0,et=Et+et+(ct>>>6^ct>>>11^ct>>>25^ct<<26^ct<<21^ct<<7)+(q^ct&($^q))+338241895|0,at=at+et|0,et=et+(rt&ot^st&(rt^ot))+(rt>>>2^rt>>>13^rt>>>22^rt<<30^rt<<19^rt<<10)|0,F=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(gt>>>17^gt>>>19^gt>>>10^gt<<15^gt<<13)+F+K|0,q=F+q+(at>>>6^at>>>11^at>>>25^at<<26^at<<21^at<<7)+($^at&(ct^$))+666307205|0,st=st+q|0,q=q+(et&rt^ot&(et^rt))+(et>>>2^et>>>13^et>>>22^et<<30^et<<19^et<<10)|0,x=(Y>>>7^Y>>>18^Y>>>3^Y<<25^Y<<14)+(Et>>>17^Et>>>19^Et>>>10^Et<<15^Et<<13)+x+X|0,$=x+$+(st>>>6^st>>>11^st>>>25^st<<26^st<<21^st<<7)+(ct^st&(at^ct))+773529912|0,ot=ot+$|0,$=$+(q&et^rt&(q^et))+(q>>>2^q>>>13^q>>>22^q<<30^q<<19^q<<10)|0,Y=(P>>>7^P>>>18^P>>>3^P<<25^P<<14)+(F>>>17^F>>>19^F>>>10^F<<15^F<<13)+Y+J|0,ct=Y+ct+(ot>>>6^ot>>>11^ot>>>25^ot<<26^ot<<21^ot<<7)+(at^ot&(st^at))+1294757372|0,rt=rt+ct|0,ct=ct+($&q^et&($^q))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0,P=(T>>>7^T>>>18^T>>>3^T<<25^T<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+P+nt|0,at=P+at+(rt>>>6^rt>>>11^rt>>>25^rt<<26^rt<<21^rt<<7)+(st^rt&(ot^st))+1396182291|0,et=et+at|0,at=at+(ct&$^q&(ct^$))+(ct>>>2^ct>>>13^ct>>>22^ct<<30^ct<<19^ct<<10)|0,T=(z>>>7^z>>>18^z>>>3^z<<25^z<<14)+(Y>>>17^Y>>>19^Y>>>10^Y<<15^Y<<13)+T+pt|0,st=T+st+(et>>>6^et>>>11^et>>>25^et<<26^et<<21^et<<7)+(ot^et&(rt^ot))+1695183700|0,q=q+st|0,st=st+(at&ct^$&(at^ct))+(at>>>2^at>>>13^at>>>22^at<<30^at<<19^at<<10)|0,z=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(P>>>17^P>>>19^P>>>10^P<<15^P<<13)+z+gt|0,ot=z+ot+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(rt^q&(et^rt))+1986661051|0,$=$+ot|0,ot=ot+(st&at^ct&(st^at))+(st>>>2^st>>>13^st>>>22^st<<30^st<<19^st<<10)|0,E=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(T>>>17^T>>>19^T>>>10^T<<15^T<<13)+E+Et|0,rt=E+rt+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(et^$&(q^et))+2177026350|0,ct=ct+rt|0,rt=rt+(ot&st^at&(ot^st))+(ot>>>2^ot>>>13^ot>>>22^ot<<30^ot<<19^ot<<10)|0,_=(M>>>7^M>>>18^M>>>3^M<<25^M<<14)+(z>>>17^z>>>19^z>>>10^z<<15^z<<13)+_+F|0,et=_+et+(ct>>>6^ct>>>11^ct>>>25^ct<<26^ct<<21^ct<<7)+(q^ct&($^q))+2456956037|0,at=at+et|0,et=et+(rt&ot^st&(rt^ot))+(rt>>>2^rt>>>13^rt>>>22^rt<<30^rt<<19^rt<<10)|0,M=(K>>>7^K>>>18^K>>>3^K<<25^K<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+M+x|0,q=M+q+(at>>>6^at>>>11^at>>>25^at<<26^at<<21^at<<7)+($^at&(ct^$))+2730485921|0,st=st+q|0,q=q+(et&rt^ot&(et^rt))+(et>>>2^et>>>13^et>>>22^et<<30^et<<19^et<<10)|0,K=(X>>>7^X>>>18^X>>>3^X<<25^X<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+K+Y|0,$=K+$+(st>>>6^st>>>11^st>>>25^st<<26^st<<21^st<<7)+(ct^st&(at^ct))+2820302411|0,ot=ot+$|0,$=$+(q&et^rt&(q^et))+(q>>>2^q>>>13^q>>>22^q<<30^q<<19^q<<10)|0,X=(J>>>7^J>>>18^J>>>3^J<<25^J<<14)+(M>>>17^M>>>19^M>>>10^M<<15^M<<13)+X+P|0,ct=X+ct+(ot>>>6^ot>>>11^ot>>>25^ot<<26^ot<<21^ot<<7)+(at^ot&(st^at))+3259730800|0,rt=rt+ct|0,ct=ct+($&q^et&($^q))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0,J=(nt>>>7^nt>>>18^nt>>>3^nt<<25^nt<<14)+(K>>>17^K>>>19^K>>>10^K<<15^K<<13)+J+T|0,at=J+at+(rt>>>6^rt>>>11^rt>>>25^rt<<26^rt<<21^rt<<7)+(st^rt&(ot^st))+3345764771|0,et=et+at|0,at=at+(ct&$^q&(ct^$))+(ct>>>2^ct>>>13^ct>>>22^ct<<30^ct<<19^ct<<10)|0,nt=(pt>>>7^pt>>>18^pt>>>3^pt<<25^pt<<14)+(X>>>17^X>>>19^X>>>10^X<<15^X<<13)+nt+z|0,st=nt+st+(et>>>6^et>>>11^et>>>25^et<<26^et<<21^et<<7)+(ot^et&(rt^ot))+3516065817|0,q=q+st|0,st=st+(at&ct^$&(at^ct))+(at>>>2^at>>>13^at>>>22^at<<30^at<<19^at<<10)|0,pt=(gt>>>7^gt>>>18^gt>>>3^gt<<25^gt<<14)+(J>>>17^J>>>19^J>>>10^J<<15^J<<13)+pt+E|0,ot=pt+ot+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(rt^q&(et^rt))+3600352804|0,$=$+ot|0,ot=ot+(st&at^ct&(st^at))+(st>>>2^st>>>13^st>>>22^st<<30^st<<19^st<<10)|0,gt=(Et>>>7^Et>>>18^Et>>>3^Et<<25^Et<<14)+(nt>>>17^nt>>>19^nt>>>10^nt<<15^nt<<13)+gt+_|0,rt=gt+rt+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(et^$&(q^et))+4094571909|0,ct=ct+rt|0,rt=rt+(ot&st^at&(ot^st))+(ot>>>2^ot>>>13^ot>>>22^ot<<30^ot<<19^ot<<10)|0,Et=(F>>>7^F>>>18^F>>>3^F<<25^F<<14)+(pt>>>17^pt>>>19^pt>>>10^pt<<15^pt<<13)+Et+M|0,et=Et+et+(ct>>>6^ct>>>11^ct>>>25^ct<<26^ct<<21^ct<<7)+(q^ct&($^q))+275423344|0,at=at+et|0,et=et+(rt&ot^st&(rt^ot))+(rt>>>2^rt>>>13^rt>>>22^rt<<30^rt<<19^rt<<10)|0,F=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(gt>>>17^gt>>>19^gt>>>10^gt<<15^gt<<13)+F+K|0,q=F+q+(at>>>6^at>>>11^at>>>25^at<<26^at<<21^at<<7)+($^at&(ct^$))+430227734|0,st=st+q|0,q=q+(et&rt^ot&(et^rt))+(et>>>2^et>>>13^et>>>22^et<<30^et<<19^et<<10)|0,x=(Y>>>7^Y>>>18^Y>>>3^Y<<25^Y<<14)+(Et>>>17^Et>>>19^Et>>>10^Et<<15^Et<<13)+x+X|0,$=x+$+(st>>>6^st>>>11^st>>>25^st<<26^st<<21^st<<7)+(ct^st&(at^ct))+506948616|0,ot=ot+$|0,$=$+(q&et^rt&(q^et))+(q>>>2^q>>>13^q>>>22^q<<30^q<<19^q<<10)|0,Y=(P>>>7^P>>>18^P>>>3^P<<25^P<<14)+(F>>>17^F>>>19^F>>>10^F<<15^F<<13)+Y+J|0,ct=Y+ct+(ot>>>6^ot>>>11^ot>>>25^ot<<26^ot<<21^ot<<7)+(at^ot&(st^at))+659060556|0,rt=rt+ct|0,ct=ct+($&q^et&($^q))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0,P=(T>>>7^T>>>18^T>>>3^T<<25^T<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+P+nt|0,at=P+at+(rt>>>6^rt>>>11^rt>>>25^rt<<26^rt<<21^rt<<7)+(st^rt&(ot^st))+883997877|0,et=et+at|0,at=at+(ct&$^q&(ct^$))+(ct>>>2^ct>>>13^ct>>>22^ct<<30^ct<<19^ct<<10)|0,T=(z>>>7^z>>>18^z>>>3^z<<25^z<<14)+(Y>>>17^Y>>>19^Y>>>10^Y<<15^Y<<13)+T+pt|0,st=T+st+(et>>>6^et>>>11^et>>>25^et<<26^et<<21^et<<7)+(ot^et&(rt^ot))+958139571|0,q=q+st|0,st=st+(at&ct^$&(at^ct))+(at>>>2^at>>>13^at>>>22^at<<30^at<<19^at<<10)|0,z=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(P>>>17^P>>>19^P>>>10^P<<15^P<<13)+z+gt|0,ot=z+ot+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(rt^q&(et^rt))+1322822218|0,$=$+ot|0,ot=ot+(st&at^ct&(st^at))+(st>>>2^st>>>13^st>>>22^st<<30^st<<19^st<<10)|0,E=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(T>>>17^T>>>19^T>>>10^T<<15^T<<13)+E+Et|0,rt=E+rt+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(et^$&(q^et))+1537002063|0,ct=ct+rt|0,rt=rt+(ot&st^at&(ot^st))+(ot>>>2^ot>>>13^ot>>>22^ot<<30^ot<<19^ot<<10)|0,_=(M>>>7^M>>>18^M>>>3^M<<25^M<<14)+(z>>>17^z>>>19^z>>>10^z<<15^z<<13)+_+F|0,et=_+et+(ct>>>6^ct>>>11^ct>>>25^ct<<26^ct<<21^ct<<7)+(q^ct&($^q))+1747873779|0,at=at+et|0,et=et+(rt&ot^st&(rt^ot))+(rt>>>2^rt>>>13^rt>>>22^rt<<30^rt<<19^rt<<10)|0,M=(K>>>7^K>>>18^K>>>3^K<<25^K<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+M+x|0,q=M+q+(at>>>6^at>>>11^at>>>25^at<<26^at<<21^at<<7)+($^at&(ct^$))+1955562222|0,st=st+q|0,q=q+(et&rt^ot&(et^rt))+(et>>>2^et>>>13^et>>>22^et<<30^et<<19^et<<10)|0,K=(X>>>7^X>>>18^X>>>3^X<<25^X<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+K+Y|0,$=K+$+(st>>>6^st>>>11^st>>>25^st<<26^st<<21^st<<7)+(ct^st&(at^ct))+2024104815|0,ot=ot+$|0,$=$+(q&et^rt&(q^et))+(q>>>2^q>>>13^q>>>22^q<<30^q<<19^q<<10)|0,X=(J>>>7^J>>>18^J>>>3^J<<25^J<<14)+(M>>>17^M>>>19^M>>>10^M<<15^M<<13)+X+P|0,ct=X+ct+(ot>>>6^ot>>>11^ot>>>25^ot<<26^ot<<21^ot<<7)+(at^ot&(st^at))+2227730452|0,rt=rt+ct|0,ct=ct+($&q^et&($^q))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0,J=(nt>>>7^nt>>>18^nt>>>3^nt<<25^nt<<14)+(K>>>17^K>>>19^K>>>10^K<<15^K<<13)+J+T|0,at=J+at+(rt>>>6^rt>>>11^rt>>>25^rt<<26^rt<<21^rt<<7)+(st^rt&(ot^st))+2361852424|0,et=et+at|0,at=at+(ct&$^q&(ct^$))+(ct>>>2^ct>>>13^ct>>>22^ct<<30^ct<<19^ct<<10)|0,nt=(pt>>>7^pt>>>18^pt>>>3^pt<<25^pt<<14)+(X>>>17^X>>>19^X>>>10^X<<15^X<<13)+nt+z|0,st=nt+st+(et>>>6^et>>>11^et>>>25^et<<26^et<<21^et<<7)+(ot^et&(rt^ot))+2428436474|0,q=q+st|0,st=st+(at&ct^$&(at^ct))+(at>>>2^at>>>13^at>>>22^at<<30^at<<19^at<<10)|0,pt=(gt>>>7^gt>>>18^gt>>>3^gt<<25^gt<<14)+(J>>>17^J>>>19^J>>>10^J<<15^J<<13)+pt+E|0,ot=pt+ot+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(rt^q&(et^rt))+2756734187|0,$=$+ot|0,ot=ot+(st&at^ct&(st^at))+(st>>>2^st>>>13^st>>>22^st<<30^st<<19^st<<10)|0,gt=(Et>>>7^Et>>>18^Et>>>3^Et<<25^Et<<14)+(nt>>>17^nt>>>19^nt>>>10^nt<<15^nt<<13)+gt+_|0,rt=gt+rt+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(et^$&(q^et))+3204031479|0,ct=ct+rt|0,rt=rt+(ot&st^at&(ot^st))+(ot>>>2^ot>>>13^ot>>>22^ot<<30^ot<<19^ot<<10)|0,Et=(F>>>7^F>>>18^F>>>3^F<<25^F<<14)+(pt>>>17^pt>>>19^pt>>>10^pt<<15^pt<<13)+Et+M|0,et=Et+et+(ct>>>6^ct>>>11^ct>>>25^ct<<26^ct<<21^ct<<7)+(q^ct&($^q))+3329325298|0,at=at+et|0,et=et+(rt&ot^st&(rt^ot))+(rt>>>2^rt>>>13^rt>>>22^rt<<30^rt<<19^rt<<10)|0,i=i+et|0,s=s+rt|0,a=a+ot|0,o=o+st|0,c=c+at|0,u=u+ct|0,h=h+$|0,f=f+q|0}function Z(F){F=F|0,W(O[F|0]<<24|O[F|1]<<16|O[F|2]<<8|O[F|3],O[F|4]<<24|O[F|5]<<16|O[F|6]<<8|O[F|7],O[F|8]<<24|O[F|9]<<16|O[F|10]<<8|O[F|11],O[F|12]<<24|O[F|13]<<16|O[F|14]<<8|O[F|15],O[F|16]<<24|O[F|17]<<16|O[F|18]<<8|O[F|19],O[F|20]<<24|O[F|21]<<16|O[F|22]<<8|O[F|23],O[F|24]<<24|O[F|25]<<16|O[F|26]<<8|O[F|27],O[F|28]<<24|O[F|29]<<16|O[F|30]<<8|O[F|31],O[F|32]<<24|O[F|33]<<16|O[F|34]<<8|O[F|35],O[F|36]<<24|O[F|37]<<16|O[F|38]<<8|O[F|39],O[F|40]<<24|O[F|41]<<16|O[F|42]<<8|O[F|43],O[F|44]<<24|O[F|45]<<16|O[F|46]<<8|O[F|47],O[F|48]<<24|O[F|49]<<16|O[F|50]<<8|O[F|51],O[F|52]<<24|O[F|53]<<16|O[F|54]<<8|O[F|55],O[F|56]<<24|O[F|57]<<16|O[F|58]<<8|O[F|59],O[F|60]<<24|O[F|61]<<16|O[F|62]<<8|O[F|63])}function b(F){F=F|0,O[F|0]=i>>>24,O[F|1]=i>>>16&255,O[F|2]=i>>>8&255,O[F|3]=i&255,O[F|4]=s>>>24,O[F|5]=s>>>16&255,O[F|6]=s>>>8&255,O[F|7]=s&255,O[F|8]=a>>>24,O[F|9]=a>>>16&255,O[F|10]=a>>>8&255,O[F|11]=a&255,O[F|12]=o>>>24,O[F|13]=o>>>16&255,O[F|14]=o>>>8&255,O[F|15]=o&255,O[F|16]=c>>>24,O[F|17]=c>>>16&255,O[F|18]=c>>>8&255,O[F|19]=c&255,O[F|20]=u>>>24,O[F|21]=u>>>16&255,O[F|22]=u>>>8&255,O[F|23]=u&255,O[F|24]=h>>>24,O[F|25]=h>>>16&255,O[F|26]=h>>>8&255,O[F|27]=h&255,O[F|28]=f>>>24,O[F|29]=f>>>16&255,O[F|30]=f>>>8&255,O[F|31]=f&255}function U(){i=1779033703,s=3144134277,a=1013904242,o=2773480762,c=1359893119,u=2600822924,h=528734635,f=1541459225,p=d=0}function G(F,x,Y,P,T,z,E,_,M,K){F=F|0,x=x|0,Y=Y|0,P=P|0,T=T|0,z=z|0,E=E|0,_=_|0,M=M|0,K=K|0,i=F,s=x,a=Y,o=P,c=T,u=z,h=E,f=_,p=M,d=K}function Q(F,x){F=F|0,x=x|0;var Y=0;if(F&63)return-1;for(;(x|0)>=64;)Z(F),F=F+64|0,x=x-64|0,Y=Y+64|0;return p=p+Y|0,p>>>0<Y>>>0&&(d=d+1|0),Y|0}function it(F,x,Y){F=F|0,x=x|0,Y=Y|0;var P=0,T=0;if(F&63||~Y&&Y&31)return-1;if((x|0)>=64){if(P=Q(F,x)|0,(P|0)==-1)return-1;F=F+P|0,x=x-P|0}if(P=P+x|0,p=p+x|0,p>>>0<x>>>0&&(d=d+1|0),O[F|x]=128,(x|0)>=56){for(T=x+1|0;(T|0)<64;T=T+1|0)O[F|T]=0;Z(F),x=0,O[F|0]=0}for(T=x+1|0;(T|0)<59;T=T+1|0)O[F|T]=0;return O[F|56]=d>>>21&255,O[F|57]=d>>>13&255,O[F|58]=d>>>5&255,O[F|59]=d<<3&255|p>>>29,O[F|60]=p>>>21&255,O[F|61]=p>>>13&255,O[F|62]=p>>>5&255,O[F|63]=p<<3&255,Z(F),~Y&&b(Y),P|0}function ht(){i=S,s=k,a=A,o=C,c=B,u=R,h=D,f=L,p=64,d=0}function ut(){i=g,s=I,a=l,o=m,c=v,u=y,h=w,f=N,p=64,d=0}function lt(F,x,Y,P,T,z,E,_,M,K,X,J,nt,pt,gt,Et){F=F|0,x=x|0,Y=Y|0,P=P|0,T=T|0,z=z|0,E=E|0,_=_|0,M=M|0,K=K|0,X=X|0,J=J|0,nt=nt|0,pt=pt|0,gt=gt|0,Et=Et|0,U(),W(F^1549556828,x^1549556828,Y^1549556828,P^1549556828,T^1549556828,z^1549556828,E^1549556828,_^1549556828,M^1549556828,K^1549556828,X^1549556828,J^1549556828,nt^1549556828,pt^1549556828,gt^1549556828,Et^1549556828),g=i,I=s,l=a,m=o,v=c,y=u,w=h,N=f,U(),W(F^909522486,x^909522486,Y^909522486,P^909522486,T^909522486,z^909522486,E^909522486,_^909522486,M^909522486,K^909522486,X^909522486,J^909522486,nt^909522486,pt^909522486,gt^909522486,Et^909522486),S=i,k=s,A=a,C=o,B=c,R=u,D=h,L=f,p=64,d=0}function j(F,x,Y){F=F|0,x=x|0,Y=Y|0;var P=0,T=0,z=0,E=0,_=0,M=0,K=0,X=0,J=0;return F&63||~Y&&Y&31?-1:(J=it(F,x,-1)|0,P=i,T=s,z=a,E=o,_=c,M=u,K=h,X=f,ut(),W(P,T,z,E,_,M,K,X,2147483648,0,0,0,0,0,0,768),~Y&&b(Y),J|0)}function tt(F,x,Y,P,T){F=F|0,x=x|0,Y=Y|0,P=P|0,T=T|0;var z=0,E=0,_=0,M=0,K=0,X=0,J=0,nt=0,pt=0,gt=0,Et=0,et=0,rt=0,ot=0,st=0,at=0;if(F&63||~T&&T&31)return-1;for(O[F+x|0]=Y>>>24,O[F+x+1|0]=Y>>>16&255,O[F+x+2|0]=Y>>>8&255,O[F+x+3|0]=Y&255,j(F,x+4|0,-1)|0,z=pt=i,E=gt=s,_=Et=a,M=et=o,K=rt=c,X=ot=u,J=st=h,nt=at=f,P=P-1|0;(P|0)>0;)ht(),W(pt,gt,Et,et,rt,ot,st,at,2147483648,0,0,0,0,0,0,768),pt=i,gt=s,Et=a,et=o,rt=c,ot=u,st=h,at=f,ut(),W(pt,gt,Et,et,rt,ot,st,at,2147483648,0,0,0,0,0,0,768),pt=i,gt=s,Et=a,et=o,rt=c,ot=u,st=h,at=f,z=z^i,E=E^s,_=_^a,M=M^o,K=K^c,X=X^u,J=J^h,nt=nt^f,P=P-1|0;return i=z,s=E,a=_,o=M,c=K,u=X,h=J,f=nt,~T&&b(T),0}return{reset:U,init:G,process:Q,finish:it,hmac_reset:ht,hmac_init:lt,hmac_finish:j,pbkdf2_generate_block:tt}}({Uint8Array},null,this.heap.buffer),this.reset()),{heap:this.heap,asm:this.asm}}release_asm(){this.heap!==void 0&&this.asm!==void 0&&(R1.push(this.heap),C1.push(this.asm)),this.heap=void 0,this.asm=void 0}static bytes(t){return new Pc().process(t).finish().result}}Pc.NAME="sha256";var xi=uf;function uf(e,t){if(!e)throw Error(t||"Assertion failed")}uf.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)};var P3=Sr!==void 0?Sr:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function xn(e,t){return e(t={exports:{}},t.exports),t.exports}var bi=xn(function(e){e.exports=typeof Object.create=="function"?function(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}});function I1(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function U1(e){return e.length===1?"0"+e:e}function D1(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}var ee={inherits:bi,toArray:function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e=="string")if(t){if(t==="hex")for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,a=255&i;s?r.push(s,a):r.push(a)}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r},toHex:function(e){for(var t="",r=0;r<e.length;r++)t+=U1(e[r].toString(16));return t},htonl:I1,toHex32:function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];t==="little"&&(i=I1(i)),r+=D1(i.toString(16))}return r},zero2:U1,zero8:D1,join32:function(e,t,r,n){var i=r-t;xi(i%4==0);for(var s=Array(i/4),a=0,o=t;a<s.length;a++,o+=4){var c;c=n==="big"?e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3]:e[o+3]<<24|e[o+2]<<16|e[o+1]<<8|e[o],s[a]=c>>>0}return s},split32:function(e,t){for(var r=Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];t==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},rotr32:function(e,t){return e>>>t|e<<32-t},rotl32:function(e,t){return e<<t|e>>>32-t},sum32:function(e,t){return e+t>>>0},sum32_3:function(e,t,r){return e+t+r>>>0},sum32_4:function(e,t,r,n){return e+t+r+n>>>0},sum32_5:function(e,t,r,n,i){return e+t+r+n+i>>>0},sum64:function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,a=(s<n?1:0)+r+i;e[t]=a>>>0,e[t+1]=s},sum64_hi:function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},sum64_lo:function(e,t,r,n){return t+n>>>0},sum64_4_hi:function(e,t,r,n,i,s,a,o){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+s>>>0)<s?1:0,e+r+i+a+(c+=(u=u+o>>>0)<o?1:0)>>>0},sum64_4_lo:function(e,t,r,n,i,s,a,o){return t+n+s+o>>>0},sum64_5_hi:function(e,t,r,n,i,s,a,o,c,u){var h=0,f=t;return h+=(f=f+n>>>0)<t?1:0,h+=(f=f+s>>>0)<s?1:0,h+=(f=f+o>>>0)<o?1:0,e+r+i+a+c+(h+=(f=f+u>>>0)<u?1:0)>>>0},sum64_5_lo:function(e,t,r,n,i,s,a,o,c,u){return t+n+s+o+u>>>0},rotr64_hi:function(e,t,r){return(t<<32-r|e>>>r)>>>0},rotr64_lo:function(e,t,r){return(e<<32-r|t>>>r)>>>0},shr64_hi:function(e,t,r){return e>>>r},shr64_lo:function(e,t,r){return(e<<32-r|t>>>r)>>>0}};function vo(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var x3=vo;vo.prototype.update=function(e,t){if(e=ee.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=ee.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},vo.prototype.digest=function(e){return this.update(this._pad()),xi(this.pending===null),this._digest(e)},vo.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n};var ja={BlockHash:x3},rn=ee.rotr32;function O1(e,t,r){return e&t^~e&r}function N1(e,t,r){return e&t^e&r^t&r}function B1(e,t,r){return e^t^r}var is={ft_1:function(e,t,r,n){return e===0?O1(t,r,n):e===1||e===3?B1(t,r,n):e===2?N1(t,r,n):void 0},ch32:O1,maj32:N1,p32:B1,s0_256:function(e){return rn(e,2)^rn(e,13)^rn(e,22)},s1_256:function(e){return rn(e,6)^rn(e,11)^rn(e,25)},g0_256:function(e){return rn(e,7)^rn(e,18)^e>>>3},g1_256:function(e){return rn(e,17)^rn(e,19)^e>>>10}},Nr=ee.sum32,M3=ee.sum32_4,T3=ee.sum32_5,R3=is.ch32,C3=is.maj32,I3=is.s0_256,U3=is.s1_256,D3=is.g0_256,O3=is.g1_256,lf=ja.BlockHash,N3=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function cn(){if(!(this instanceof cn))return new cn;lf.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=N3,this.W=Array(64)}ee.inherits(cn,lf);var k0=cn;function On(){if(!(this instanceof On))return new On;k0.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}cn.blockSize=512,cn.outSize=256,cn.hmacStrength=192,cn.padLength=64,cn.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=M3(O3(r[n-2]),r[n-7],D3(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],c=this.h[4],u=this.h[5],h=this.h[6],f=this.h[7];for(xi(this.k.length===r.length),n=0;n<r.length;n++){var p=T3(f,U3(c),R3(c,u,h),this.k[n],r[n]),d=Nr(I3(i),C3(i,s,a));f=h,h=u,u=c,c=Nr(o,p),o=a,a=s,s=i,i=Nr(p,d)}this.h[0]=Nr(this.h[0],i),this.h[1]=Nr(this.h[1],s),this.h[2]=Nr(this.h[2],a),this.h[3]=Nr(this.h[3],o),this.h[4]=Nr(this.h[4],c),this.h[5]=Nr(this.h[5],u),this.h[6]=Nr(this.h[6],h),this.h[7]=Nr(this.h[7],f)},cn.prototype._digest=function(e){return e==="hex"?ee.toHex32(this.h,"big"):ee.split32(this.h,"big")},ee.inherits(On,k0);var hf=On;On.blockSize=512,On.outSize=224,On.hmacStrength=192,On.padLength=64,On.prototype._digest=function(e){return e==="hex"?ee.toHex32(this.h.slice(0,7),"big"):ee.split32(this.h.slice(0,7),"big")};var gn=ee.rotr64_hi,bn=ee.rotr64_lo,ff=ee.shr64_hi,df=ee.shr64_lo,ri=ee.sum64,ru=ee.sum64_hi,nu=ee.sum64_lo,B3=ee.sum64_4_hi,z3=ee.sum64_4_lo,K3=ee.sum64_5_hi,F3=ee.sum64_5_lo,pf=ja.BlockHash,L3=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function zr(){if(!(this instanceof zr))return new zr;pf.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=L3,this.W=Array(160)}ee.inherits(zr,pf);var qa=zr;function j3(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function q3(e,t,r,n,i,s){var a=t&n^~t&s;return a<0&&(a+=4294967296),a}function $3(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function W3(e,t,r,n,i,s){var a=t&n^t&s^n&s;return a<0&&(a+=4294967296),a}function H3(e,t){var r=gn(e,t,28)^gn(t,e,2)^gn(t,e,7);return r<0&&(r+=4294967296),r}function G3(e,t){var r=bn(e,t,28)^bn(t,e,2)^bn(t,e,7);return r<0&&(r+=4294967296),r}function V3(e,t){var r=gn(e,t,14)^gn(e,t,18)^gn(t,e,9);return r<0&&(r+=4294967296),r}function Y3(e,t){var r=bn(e,t,14)^bn(e,t,18)^bn(t,e,9);return r<0&&(r+=4294967296),r}function J3(e,t){var r=gn(e,t,1)^gn(e,t,8)^ff(e,t,7);return r<0&&(r+=4294967296),r}function X3(e,t){var r=bn(e,t,1)^bn(e,t,8)^df(e,t,7);return r<0&&(r+=4294967296),r}function Z3(e,t){var r=gn(e,t,19)^gn(t,e,29)^ff(e,t,6);return r<0&&(r+=4294967296),r}function Q3(e,t){var r=bn(e,t,19)^bn(t,e,29)^df(e,t,6);return r<0&&(r+=4294967296),r}function Nn(){if(!(this instanceof Nn))return new Nn;qa.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}zr.blockSize=1024,zr.outSize=512,zr.hmacStrength=192,zr.padLength=128,zr.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=Z3(r[n-4],r[n-3]),s=Q3(r[n-4],r[n-3]),a=r[n-14],o=r[n-13],c=J3(r[n-30],r[n-29]),u=X3(r[n-30],r[n-29]),h=r[n-32],f=r[n-31];r[n]=B3(i,s,a,o,c,u,h,f),r[n+1]=z3(i,s,a,o,c,u,h,f)}},zr.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],o=this.h[4],c=this.h[5],u=this.h[6],h=this.h[7],f=this.h[8],p=this.h[9],d=this.h[10],S=this.h[11],k=this.h[12],A=this.h[13],C=this.h[14],B=this.h[15];xi(this.k.length===r.length);for(var R=0;R<r.length;R+=2){var D=C,L=B,g=V3(f,p),I=Y3(f,p),l=j3(f,p,d,S,k),m=q3(f,p,d,S,k,A),v=this.k[R],y=this.k[R+1],w=r[R],N=r[R+1],O=K3(D,L,g,I,l,m,v,y,w,N),W=F3(D,L,g,I,l,m,v,y,w,N);D=H3(n,i),L=G3(n,i),g=$3(n,i,s,a,o),I=W3(n,i,s,a,o,c);var Z=ru(D,L,g,I),b=nu(D,L,g,I);C=k,B=A,k=d,A=S,d=f,S=p,f=ru(u,h,O,W),p=nu(h,h,O,W),u=o,h=c,o=s,c=a,s=n,a=i,n=ru(O,W,Z,b),i=nu(O,W,Z,b)}ri(this.h,0,n,i),ri(this.h,2,s,a),ri(this.h,4,o,c),ri(this.h,6,u,h),ri(this.h,8,f,p),ri(this.h,10,d,S),ri(this.h,12,k,A),ri(this.h,14,C,B)},zr.prototype._digest=function(e){return e==="hex"?ee.toHex32(this.h,"big"):ee.split32(this.h,"big")},ee.inherits(Nn,qa);var mf=Nn;Nn.blockSize=1024,Nn.outSize=384,Nn.hmacStrength=192,Nn.padLength=128,Nn.prototype._digest=function(e){return e==="hex"?ee.toHex32(this.h.slice(0,12),"big"):ee.split32(this.h.slice(0,12),"big")};var Xa=ee.rotl32,z1=ee.sum32,js=ee.sum32_3,K1=ee.sum32_4,yf=ja.BlockHash;function un(){if(!(this instanceof un))return new un;yf.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}ee.inherits(un,yf);var gf=un;function F1(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function t5(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function e5(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}un.blockSize=512,un.outSize=160,un.hmacStrength=192,un.padLength=64,un.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],s=this.h[3],a=this.h[4],o=r,c=n,u=i,h=s,f=a,p=0;p<80;p++){var d=z1(Xa(K1(r,F1(p,n,i,s),e[r5[p]+t],t5(p)),i5[p]),a);r=a,a=s,s=Xa(i,10),i=n,n=d,d=z1(Xa(K1(o,F1(79-p,c,u,h),e[n5[p]+t],e5(p)),s5[p]),f),o=f,f=h,h=Xa(u,10),u=c,c=d}d=js(this.h[1],i,h),this.h[1]=js(this.h[2],s,f),this.h[2]=js(this.h[3],a,o),this.h[3]=js(this.h[4],r,c),this.h[4]=js(this.h[0],n,u),this.h[0]=d},un.prototype._digest=function(e){return e==="hex"?ee.toHex32(this.h,"little"):ee.split32(this.h,"little")};var r5=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n5=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],i5=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],s5=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],a5={ripemd160:gf};function iu(e,t){let r=e[0],n=e[1],i=e[2],s=e[3];r=We(r,n,i,s,t[0],7,-680876936),s=We(s,r,n,i,t[1],12,-389564586),i=We(i,s,r,n,t[2],17,606105819),n=We(n,i,s,r,t[3],22,-1044525330),r=We(r,n,i,s,t[4],7,-176418897),s=We(s,r,n,i,t[5],12,1200080426),i=We(i,s,r,n,t[6],17,-1473231341),n=We(n,i,s,r,t[7],22,-45705983),r=We(r,n,i,s,t[8],7,1770035416),s=We(s,r,n,i,t[9],12,-1958414417),i=We(i,s,r,n,t[10],17,-42063),n=We(n,i,s,r,t[11],22,-1990404162),r=We(r,n,i,s,t[12],7,1804603682),s=We(s,r,n,i,t[13],12,-40341101),i=We(i,s,r,n,t[14],17,-1502002290),n=We(n,i,s,r,t[15],22,1236535329),r=He(r,n,i,s,t[1],5,-165796510),s=He(s,r,n,i,t[6],9,-1069501632),i=He(i,s,r,n,t[11],14,643717713),n=He(n,i,s,r,t[0],20,-373897302),r=He(r,n,i,s,t[5],5,-701558691),s=He(s,r,n,i,t[10],9,38016083),i=He(i,s,r,n,t[15],14,-660478335),n=He(n,i,s,r,t[4],20,-405537848),r=He(r,n,i,s,t[9],5,568446438),s=He(s,r,n,i,t[14],9,-1019803690),i=He(i,s,r,n,t[3],14,-187363961),n=He(n,i,s,r,t[8],20,1163531501),r=He(r,n,i,s,t[13],5,-1444681467),s=He(s,r,n,i,t[2],9,-51403784),i=He(i,s,r,n,t[7],14,1735328473),n=He(n,i,s,r,t[12],20,-1926607734),r=Ge(r,n,i,s,t[5],4,-378558),s=Ge(s,r,n,i,t[8],11,-2022574463),i=Ge(i,s,r,n,t[11],16,1839030562),n=Ge(n,i,s,r,t[14],23,-35309556),r=Ge(r,n,i,s,t[1],4,-1530992060),s=Ge(s,r,n,i,t[4],11,1272893353),i=Ge(i,s,r,n,t[7],16,-155497632),n=Ge(n,i,s,r,t[10],23,-1094730640),r=Ge(r,n,i,s,t[13],4,681279174),s=Ge(s,r,n,i,t[0],11,-358537222),i=Ge(i,s,r,n,t[3],16,-722521979),n=Ge(n,i,s,r,t[6],23,76029189),r=Ge(r,n,i,s,t[9],4,-640364487),s=Ge(s,r,n,i,t[12],11,-421815835),i=Ge(i,s,r,n,t[15],16,530742520),n=Ge(n,i,s,r,t[2],23,-995338651),r=Ve(r,n,i,s,t[0],6,-198630844),s=Ve(s,r,n,i,t[7],10,1126891415),i=Ve(i,s,r,n,t[14],15,-1416354905),n=Ve(n,i,s,r,t[5],21,-57434055),r=Ve(r,n,i,s,t[12],6,1700485571),s=Ve(s,r,n,i,t[3],10,-1894986606),i=Ve(i,s,r,n,t[10],15,-1051523),n=Ve(n,i,s,r,t[1],21,-2054922799),r=Ve(r,n,i,s,t[8],6,1873313359),s=Ve(s,r,n,i,t[15],10,-30611744),i=Ve(i,s,r,n,t[6],15,-1560198380),n=Ve(n,i,s,r,t[13],21,1309151649),r=Ve(r,n,i,s,t[4],6,-145523070),s=Ve(s,r,n,i,t[11],10,-1120210379),i=Ve(i,s,r,n,t[2],15,718787259),n=Ve(n,i,s,r,t[9],21,-343485551),e[0]=di(r,e[0]),e[1]=di(n,e[1]),e[2]=di(i,e[2]),e[3]=di(s,e[3])}function xc(e,t,r,n,i,s){return t=di(di(t,e),di(n,s)),di(t<<i|t>>>32-i,r)}function We(e,t,r,n,i,s,a){return xc(t&r|~t&n,e,t,i,s,a)}function He(e,t,r,n,i,s,a){return xc(t&n|r&~n,e,t,i,s,a)}function Ge(e,t,r,n,i,s,a){return xc(t^r^n,e,t,i,s,a)}function Ve(e,t,r,n,i,s,a){return xc(r^(t|~n),e,t,i,s,a)}function o5(e){const t=[];let r;for(r=0;r<64;r+=4)t[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24);return t}const L1="0123456789abcdef".split("");function c5(e){let t="",r=0;for(;r<4;r++)t+=L1[e>>8*r+4&15]+L1[e>>8*r&15];return t}function di(e,t){return e+t&4294967295}const zo=H.getWebCrypto(),bf=H.getNodeCrypto();function Ui(e){return async function(t){const r=bf.createHash(e);return _e(t,n=>{r.update(n)},()=>new Uint8Array(r.digest()))}}function Za(e,t){return async function(r,n=$t){if(xe(r)&&(r=await Re(r)),!H.isStream(r)&&zo&&t&&r.length>=n.minBytesForWebCrypto)return new Uint8Array(await zo.digest(t,r));const i=e();return _e(r,s=>{i.update(s)},()=>new Uint8Array(i.digest()))}}function j1(e,t){return async function(r,n=$t){if(xe(r)&&(r=await Re(r)),H.isStream(r)){const i=new e;return _e(r,s=>{i.process(s)},()=>i.finish().result)}return zo&&t&&r.length>=n.minBytesForWebCrypto?new Uint8Array(await zo.digest(t,r)):e.bytes(r)}}let ii;ii=bf?{md5:Ui("md5"),sha1:Ui("sha1"),sha224:Ui("sha224"),sha256:Ui("sha256"),sha384:Ui("sha384"),sha512:Ui("sha512"),ripemd:Ui("ripemd160")}:{md5:async function(e){const t=function(r){const n=r.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=r.length;s+=64)iu(i,o5(r.substring(s-64,s)));r=r.substring(s-64);const a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<r.length;s++)a[s>>2]|=r.charCodeAt(s)<<(s%4<<3);if(a[s>>2]|=128<<(s%4<<3),s>55)for(iu(i,a),s=0;s<16;s++)a[s]=0;return a[14]=8*n,iu(i,a),i}(H.uint8ArrayToString(e));return H.hexToUint8Array(function(r){for(let n=0;n<r.length;n++)r[n]=c5(r[n]);return r.join("")}(t))},sha1:j1(Li,"SHA-1"),sha224:Za(hf),sha256:j1(Pc,"SHA-256"),sha384:Za(mf,"SHA-384"),sha512:Za(qa,"SHA-512"),ripemd:Za(gf)};var ks={md5:ii.md5,sha1:ii.sha1,sha224:ii.sha224,sha256:ii.sha256,sha384:ii.sha384,sha512:ii.sha512,ripemd:ii.ripemd,digest:function(e,t){switch(e){case V.hash.md5:return this.md5(t);case V.hash.sha1:return this.sha1(t);case V.hash.ripemd:return this.ripemd(t);case V.hash.sha256:return this.sha256(t);case V.hash.sha384:return this.sha384(t);case V.hash.sha512:return this.sha512(t);case V.hash.sha224:return this.sha224(t);default:throw Error("Invalid hash function.")}},getHashByteLength:function(e){switch(e){case V.hash.md5:return 16;case V.hash.sha1:case V.hash.ripemd:return 20;case V.hash.sha256:return 32;case V.hash.sha384:return 48;case V.hash.sha512:return 64;case V.hash.sha224:return 28;default:throw Error("Invalid hash algorithm.")}}};class vs{static encrypt(t,r,n){return new vs(r,n).encrypt(t)}static decrypt(t,r,n){return new vs(r,n).decrypt(t)}constructor(t,r,n){this.aes=n||new La(t,r,!0,"CFB"),delete this.aes.padding}encrypt(t){return Si(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())}decrypt(t){return Si(this.aes.AES_Decrypt_process(t),this.aes.AES_Decrypt_finish())}}var vn=xn(function(e){(function(t){var r=function(j){var tt,F=new Float64Array(16);if(j)for(tt=0;tt<j.length;tt++)F[tt]=j[tt];return F},n=function(){throw Error("no PRNG")},i=new Uint8Array(32);i[0]=9;var s=r(),a=r([1]),o=r([56129,1]),c=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(j,tt,F,x){return function(Y,P,T,z,E){var _,M=0;for(_=0;_<E;_++)M|=Y[P+_]^T[z+_];return(1&M-1>>>8)-1}(j,tt,F,x,32)}function S(j,tt){var F;for(F=0;F<16;F++)j[F]=0|tt[F]}function k(j){var tt,F,x=1;for(tt=0;tt<16;tt++)F=j[tt]+x+65535,x=Math.floor(F/65536),j[tt]=F-65536*x;j[0]+=x-1+37*(x-1)}function A(j,tt,F){for(var x,Y=~(F-1),P=0;P<16;P++)x=Y&(j[P]^tt[P]),j[P]^=x,tt[P]^=x}function C(j,tt){var F,x,Y,P=r(),T=r();for(F=0;F<16;F++)T[F]=tt[F];for(k(T),k(T),k(T),x=0;x<2;x++){for(P[0]=T[0]-65517,F=1;F<15;F++)P[F]=T[F]-65535-(P[F-1]>>16&1),P[F-1]&=65535;P[15]=T[15]-32767-(P[14]>>16&1),Y=P[15]>>16&1,P[14]&=65535,A(T,P,1-Y)}for(F=0;F<16;F++)j[2*F]=255&T[F],j[2*F+1]=T[F]>>8}function B(j,tt){var F=new Uint8Array(32),x=new Uint8Array(32);return C(F,j),C(x,tt),d(F,0,x,0)}function R(j){var tt=new Uint8Array(32);return C(tt,j),1&tt[0]}function D(j,tt){var F;for(F=0;F<16;F++)j[F]=tt[2*F]+(tt[2*F+1]<<8);j[15]&=32767}function L(j,tt,F){for(var x=0;x<16;x++)j[x]=tt[x]+F[x]}function g(j,tt,F){for(var x=0;x<16;x++)j[x]=tt[x]-F[x]}function I(j,tt,F){var x,Y,P=0,T=0,z=0,E=0,_=0,M=0,K=0,X=0,J=0,nt=0,pt=0,gt=0,Et=0,et=0,rt=0,ot=0,st=0,at=0,ct=0,$=0,q=0,_t=0,vt=0,Dt=0,ie=0,zt=0,Bt=0,pe=0,Qt=0,re=0,Te=0,Nt=F[0],jt=F[1],se=F[2],Ut=F[3],Jt=F[4],fe=F[5],qt=F[6],mt=F[7],yt=F[8],wt=F[9],Tt=F[10],Kt=F[11],Ot=F[12],It=F[13],ce=F[14],Xt=F[15];P+=(x=tt[0])*Nt,T+=x*jt,z+=x*se,E+=x*Ut,_+=x*Jt,M+=x*fe,K+=x*qt,X+=x*mt,J+=x*yt,nt+=x*wt,pt+=x*Tt,gt+=x*Kt,Et+=x*Ot,et+=x*It,rt+=x*ce,ot+=x*Xt,T+=(x=tt[1])*Nt,z+=x*jt,E+=x*se,_+=x*Ut,M+=x*Jt,K+=x*fe,X+=x*qt,J+=x*mt,nt+=x*yt,pt+=x*wt,gt+=x*Tt,Et+=x*Kt,et+=x*Ot,rt+=x*It,ot+=x*ce,st+=x*Xt,z+=(x=tt[2])*Nt,E+=x*jt,_+=x*se,M+=x*Ut,K+=x*Jt,X+=x*fe,J+=x*qt,nt+=x*mt,pt+=x*yt,gt+=x*wt,Et+=x*Tt,et+=x*Kt,rt+=x*Ot,ot+=x*It,st+=x*ce,at+=x*Xt,E+=(x=tt[3])*Nt,_+=x*jt,M+=x*se,K+=x*Ut,X+=x*Jt,J+=x*fe,nt+=x*qt,pt+=x*mt,gt+=x*yt,Et+=x*wt,et+=x*Tt,rt+=x*Kt,ot+=x*Ot,st+=x*It,at+=x*ce,ct+=x*Xt,_+=(x=tt[4])*Nt,M+=x*jt,K+=x*se,X+=x*Ut,J+=x*Jt,nt+=x*fe,pt+=x*qt,gt+=x*mt,Et+=x*yt,et+=x*wt,rt+=x*Tt,ot+=x*Kt,st+=x*Ot,at+=x*It,ct+=x*ce,$+=x*Xt,M+=(x=tt[5])*Nt,K+=x*jt,X+=x*se,J+=x*Ut,nt+=x*Jt,pt+=x*fe,gt+=x*qt,Et+=x*mt,et+=x*yt,rt+=x*wt,ot+=x*Tt,st+=x*Kt,at+=x*Ot,ct+=x*It,$+=x*ce,q+=x*Xt,K+=(x=tt[6])*Nt,X+=x*jt,J+=x*se,nt+=x*Ut,pt+=x*Jt,gt+=x*fe,Et+=x*qt,et+=x*mt,rt+=x*yt,ot+=x*wt,st+=x*Tt,at+=x*Kt,ct+=x*Ot,$+=x*It,q+=x*ce,_t+=x*Xt,X+=(x=tt[7])*Nt,J+=x*jt,nt+=x*se,pt+=x*Ut,gt+=x*Jt,Et+=x*fe,et+=x*qt,rt+=x*mt,ot+=x*yt,st+=x*wt,at+=x*Tt,ct+=x*Kt,$+=x*Ot,q+=x*It,_t+=x*ce,vt+=x*Xt,J+=(x=tt[8])*Nt,nt+=x*jt,pt+=x*se,gt+=x*Ut,Et+=x*Jt,et+=x*fe,rt+=x*qt,ot+=x*mt,st+=x*yt,at+=x*wt,ct+=x*Tt,$+=x*Kt,q+=x*Ot,_t+=x*It,vt+=x*ce,Dt+=x*Xt,nt+=(x=tt[9])*Nt,pt+=x*jt,gt+=x*se,Et+=x*Ut,et+=x*Jt,rt+=x*fe,ot+=x*qt,st+=x*mt,at+=x*yt,ct+=x*wt,$+=x*Tt,q+=x*Kt,_t+=x*Ot,vt+=x*It,Dt+=x*ce,ie+=x*Xt,pt+=(x=tt[10])*Nt,gt+=x*jt,Et+=x*se,et+=x*Ut,rt+=x*Jt,ot+=x*fe,st+=x*qt,at+=x*mt,ct+=x*yt,$+=x*wt,q+=x*Tt,_t+=x*Kt,vt+=x*Ot,Dt+=x*It,ie+=x*ce,zt+=x*Xt,gt+=(x=tt[11])*Nt,Et+=x*jt,et+=x*se,rt+=x*Ut,ot+=x*Jt,st+=x*fe,at+=x*qt,ct+=x*mt,$+=x*yt,q+=x*wt,_t+=x*Tt,vt+=x*Kt,Dt+=x*Ot,ie+=x*It,zt+=x*ce,Bt+=x*Xt,Et+=(x=tt[12])*Nt,et+=x*jt,rt+=x*se,ot+=x*Ut,st+=x*Jt,at+=x*fe,ct+=x*qt,$+=x*mt,q+=x*yt,_t+=x*wt,vt+=x*Tt,Dt+=x*Kt,ie+=x*Ot,zt+=x*It,Bt+=x*ce,pe+=x*Xt,et+=(x=tt[13])*Nt,rt+=x*jt,ot+=x*se,st+=x*Ut,at+=x*Jt,ct+=x*fe,$+=x*qt,q+=x*mt,_t+=x*yt,vt+=x*wt,Dt+=x*Tt,ie+=x*Kt,zt+=x*Ot,Bt+=x*It,pe+=x*ce,Qt+=x*Xt,rt+=(x=tt[14])*Nt,ot+=x*jt,st+=x*se,at+=x*Ut,ct+=x*Jt,$+=x*fe,q+=x*qt,_t+=x*mt,vt+=x*yt,Dt+=x*wt,ie+=x*Tt,zt+=x*Kt,Bt+=x*Ot,pe+=x*It,Qt+=x*ce,re+=x*Xt,ot+=(x=tt[15])*Nt,T+=38*(at+=x*se),z+=38*(ct+=x*Ut),E+=38*($+=x*Jt),_+=38*(q+=x*fe),M+=38*(_t+=x*qt),K+=38*(vt+=x*mt),X+=38*(Dt+=x*yt),J+=38*(ie+=x*wt),nt+=38*(zt+=x*Tt),pt+=38*(Bt+=x*Kt),gt+=38*(pe+=x*Ot),Et+=38*(Qt+=x*It),et+=38*(re+=x*ce),rt+=38*(Te+=x*Xt),P=(x=(P+=38*(st+=x*jt))+(Y=1)+65535)-65536*(Y=Math.floor(x/65536)),T=(x=T+Y+65535)-65536*(Y=Math.floor(x/65536)),z=(x=z+Y+65535)-65536*(Y=Math.floor(x/65536)),E=(x=E+Y+65535)-65536*(Y=Math.floor(x/65536)),_=(x=_+Y+65535)-65536*(Y=Math.floor(x/65536)),M=(x=M+Y+65535)-65536*(Y=Math.floor(x/65536)),K=(x=K+Y+65535)-65536*(Y=Math.floor(x/65536)),X=(x=X+Y+65535)-65536*(Y=Math.floor(x/65536)),J=(x=J+Y+65535)-65536*(Y=Math.floor(x/65536)),nt=(x=nt+Y+65535)-65536*(Y=Math.floor(x/65536)),pt=(x=pt+Y+65535)-65536*(Y=Math.floor(x/65536)),gt=(x=gt+Y+65535)-65536*(Y=Math.floor(x/65536)),Et=(x=Et+Y+65535)-65536*(Y=Math.floor(x/65536)),et=(x=et+Y+65535)-65536*(Y=Math.floor(x/65536)),rt=(x=rt+Y+65535)-65536*(Y=Math.floor(x/65536)),ot=(x=ot+Y+65535)-65536*(Y=Math.floor(x/65536)),P=(x=(P+=Y-1+37*(Y-1))+(Y=1)+65535)-65536*(Y=Math.floor(x/65536)),T=(x=T+Y+65535)-65536*(Y=Math.floor(x/65536)),z=(x=z+Y+65535)-65536*(Y=Math.floor(x/65536)),E=(x=E+Y+65535)-65536*(Y=Math.floor(x/65536)),_=(x=_+Y+65535)-65536*(Y=Math.floor(x/65536)),M=(x=M+Y+65535)-65536*(Y=Math.floor(x/65536)),K=(x=K+Y+65535)-65536*(Y=Math.floor(x/65536)),X=(x=X+Y+65535)-65536*(Y=Math.floor(x/65536)),J=(x=J+Y+65535)-65536*(Y=Math.floor(x/65536)),nt=(x=nt+Y+65535)-65536*(Y=Math.floor(x/65536)),pt=(x=pt+Y+65535)-65536*(Y=Math.floor(x/65536)),gt=(x=gt+Y+65535)-65536*(Y=Math.floor(x/65536)),Et=(x=Et+Y+65535)-65536*(Y=Math.floor(x/65536)),et=(x=et+Y+65535)-65536*(Y=Math.floor(x/65536)),rt=(x=rt+Y+65535)-65536*(Y=Math.floor(x/65536)),ot=(x=ot+Y+65535)-65536*(Y=Math.floor(x/65536)),P+=Y-1+37*(Y-1),j[0]=P,j[1]=T,j[2]=z,j[3]=E,j[4]=_,j[5]=M,j[6]=K,j[7]=X,j[8]=J,j[9]=nt,j[10]=pt,j[11]=gt,j[12]=Et,j[13]=et,j[14]=rt,j[15]=ot}function l(j,tt){I(j,tt,tt)}function m(j,tt){var F,x=r();for(F=0;F<16;F++)x[F]=tt[F];for(F=253;F>=0;F--)l(x,x),F!==2&&F!==4&&I(x,x,tt);for(F=0;F<16;F++)j[F]=x[F]}function v(j,tt,F){var x,Y,P=new Uint8Array(32),T=new Float64Array(80),z=r(),E=r(),_=r(),M=r(),K=r(),X=r();for(Y=0;Y<31;Y++)P[Y]=tt[Y];for(P[31]=127&tt[31]|64,P[0]&=248,D(T,F),Y=0;Y<16;Y++)E[Y]=T[Y],M[Y]=z[Y]=_[Y]=0;for(z[0]=M[0]=1,Y=254;Y>=0;--Y)A(z,E,x=P[Y>>>3]>>>(7&Y)&1),A(_,M,x),L(K,z,_),g(z,z,_),L(_,E,M),g(E,E,M),l(M,K),l(X,z),I(z,_,z),I(_,E,K),L(K,z,_),g(z,z,_),l(E,z),g(_,M,X),I(z,_,o),L(z,z,M),I(_,_,z),I(z,M,X),I(M,E,T),l(E,K),A(z,E,x),A(_,M,x);for(Y=0;Y<16;Y++)T[Y+16]=z[Y],T[Y+32]=_[Y],T[Y+48]=E[Y],T[Y+64]=M[Y];var J=T.subarray(32),nt=T.subarray(16);return m(J,J),I(nt,nt,J),C(j,nt),0}function y(j,tt){return v(j,tt,i)}function w(j,tt){var F=r(),x=r(),Y=r(),P=r(),T=r(),z=r(),E=r(),_=r(),M=r();g(F,j[1],j[0]),g(M,tt[1],tt[0]),I(F,F,M),L(x,j[0],j[1]),L(M,tt[0],tt[1]),I(x,x,M),I(Y,j[3],tt[3]),I(Y,Y,u),I(P,j[2],tt[2]),L(P,P,P),g(T,x,F),g(z,P,Y),L(E,P,Y),L(_,x,F),I(j[0],T,z),I(j[1],_,E),I(j[2],E,z),I(j[3],T,_)}function N(j,tt,F){var x;for(x=0;x<4;x++)A(j[x],tt[x],F)}function O(j,tt){var F=r(),x=r(),Y=r();m(Y,tt[2]),I(F,tt[0],Y),I(x,tt[1],Y),C(j,x),j[31]^=R(F)<<7}function W(j,tt,F){var x,Y;for(S(j[0],s),S(j[1],a),S(j[2],a),S(j[3],s),Y=255;Y>=0;--Y)N(j,tt,x=F[Y/8|0]>>(7&Y)&1),w(tt,j),w(j,j),N(j,tt,x)}function Z(j,tt){var F=[r(),r(),r(),r()];S(F[0],h),S(F[1],f),S(F[2],a),I(F[3],h,f),W(j,F,tt)}function b(j,tt,F){var x,Y,P=[r(),r(),r(),r()];for(F||n(tt,32),(x=t.hash(tt.subarray(0,32)))[0]&=248,x[31]&=127,x[31]|=64,Z(P,x),O(j,P),Y=0;Y<32;Y++)tt[Y+32]=j[Y];return 0}var U=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function G(j,tt){var F,x,Y,P;for(x=63;x>=32;--x){for(F=0,Y=x-32,P=x-12;Y<P;++Y)tt[Y]+=F-16*tt[x]*U[Y-(x-32)],F=Math.floor((tt[Y]+128)/256),tt[Y]-=256*F;tt[Y]+=F,tt[x]=0}for(F=0,Y=0;Y<32;Y++)tt[Y]+=F-(tt[31]>>4)*U[Y],F=tt[Y]>>8,tt[Y]&=255;for(Y=0;Y<32;Y++)tt[Y]-=F*U[Y];for(x=0;x<32;x++)tt[x+1]+=tt[x]>>8,j[x]=255&tt[x]}function Q(j){var tt,F=new Float64Array(64);for(tt=0;tt<64;tt++)F[tt]=j[tt];for(tt=0;tt<64;tt++)j[tt]=0;G(j,F)}function it(j,tt){var F=r(),x=r(),Y=r(),P=r(),T=r(),z=r(),E=r();return S(j[2],a),D(j[1],tt),l(Y,j[1]),I(P,Y,c),g(Y,Y,j[2]),L(P,j[2],P),l(T,P),l(z,T),I(E,z,T),I(F,E,Y),I(F,F,P),function(_,M){var K,X=r();for(K=0;K<16;K++)X[K]=M[K];for(K=250;K>=0;K--)l(X,X),K!==1&&I(X,X,M);for(K=0;K<16;K++)_[K]=X[K]}(F,F),I(F,F,Y),I(F,F,P),I(F,F,P),I(j[0],F,P),l(x,j[0]),I(x,x,P),B(x,Y)&&I(j[0],j[0],p),l(x,j[0]),I(x,x,P),B(x,Y)?-1:(R(j[0])===tt[31]>>7&&g(j[0],s,j[0]),I(j[3],j[0],j[1]),0)}var ht=64;function ut(){for(var j=0;j<arguments.length;j++)if(!(arguments[j]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function lt(j){for(var tt=0;tt<j.length;tt++)j[tt]=0}t.scalarMult=function(j,tt){if(ut(j,tt),j.length!==32)throw Error("bad n size");if(tt.length!==32)throw Error("bad p size");var F=new Uint8Array(32);return v(F,j,tt),F},t.box={},t.box.keyPair=function(){var j,tt,F=new Uint8Array(32),x=new Uint8Array(32);return j=F,n(tt=x,32),y(j,tt),{publicKey:F,secretKey:x}},t.box.keyPair.fromSecretKey=function(j){if(ut(j),j.length!==32)throw Error("bad secret key size");var tt=new Uint8Array(32);return y(tt,j),{publicKey:tt,secretKey:new Uint8Array(j)}},t.sign=function(j,tt){if(ut(j,tt),tt.length!==64)throw Error("bad secret key size");var F=new Uint8Array(ht+j.length);return function(x,Y,P,T){var z,E,_,M,K,X=new Float64Array(64),J=[r(),r(),r(),r()];(z=t.hash(T.subarray(0,32)))[0]&=248,z[31]&=127,z[31]|=64;var nt=P+64;for(M=0;M<P;M++)x[64+M]=Y[M];for(M=0;M<32;M++)x[32+M]=z[32+M];for(Q(_=t.hash(x.subarray(32,nt))),Z(J,_),O(x,J),M=32;M<64;M++)x[M]=T[M];for(Q(E=t.hash(x.subarray(0,nt))),M=0;M<64;M++)X[M]=0;for(M=0;M<32;M++)X[M]=_[M];for(M=0;M<32;M++)for(K=0;K<32;K++)X[M+K]+=E[M]*z[K];G(x.subarray(32),X)}(F,j,j.length,tt),F},t.sign.detached=function(j,tt){for(var F=t.sign(j,tt),x=new Uint8Array(ht),Y=0;Y<x.length;Y++)x[Y]=F[Y];return x},t.sign.detached.verify=function(j,tt,F){if(ut(j,tt,F),tt.length!==ht)throw Error("bad signature size");if(F.length!==32)throw Error("bad public key size");var x,Y=new Uint8Array(ht+j.length),P=new Uint8Array(ht+j.length);for(x=0;x<ht;x++)Y[x]=tt[x];for(x=0;x<j.length;x++)Y[x+ht]=j[x];return function(T,z,E,_){var M,K,X=new Uint8Array(32),J=[r(),r(),r(),r()],nt=[r(),r(),r(),r()];if(E<64||it(nt,_))return-1;for(M=0;M<E;M++)T[M]=z[M];for(M=0;M<32;M++)T[M+32]=_[M];if(Q(K=t.hash(T.subarray(0,E))),W(J,nt,K),Z(nt,z.subarray(32)),w(J,nt),O(X,J),E-=64,d(z,0,X,0)){for(M=0;M<E;M++)T[M]=0;return-1}for(M=0;M<E;M++)T[M]=z[M+64];return E}(P,Y,Y.length,F)>=0},t.sign.keyPair=function(){var j=new Uint8Array(32),tt=new Uint8Array(64);return b(j,tt),{publicKey:j,secretKey:tt}},t.sign.keyPair.fromSecretKey=function(j){if(ut(j),j.length!==64)throw Error("bad secret key size");for(var tt=new Uint8Array(32),F=0;F<tt.length;F++)tt[F]=j[32+F];return{publicKey:tt,secretKey:new Uint8Array(j)}},t.sign.keyPair.fromSeed=function(j){if(ut(j),j.length!==32)throw Error("bad seed size");for(var tt=new Uint8Array(32),F=new Uint8Array(64),x=0;x<32;x++)F[x]=j[x];return b(tt,F,!0),{publicKey:tt,secretKey:F}},t.setPRNG=function(j){n=j},function(){var j=typeof self!="undefined"?self.crypto||self.msCrypto:null;j&&j.getRandomValues?t.setPRNG(function(tt,F){var x,Y=new Uint8Array(F);for(x=0;x<F;x+=65536)j.getRandomValues(Y.subarray(x,x+Math.min(F-x,65536)));for(x=0;x<F;x++)tt[x]=Y[x];lt(Y)}):(j=void 0)&&j.randomBytes&&t.setPRNG(function(tt,F){var x,Y=j.randomBytes(F);for(x=0;x<F;x++)tt[x]=Y[x];lt(Y)})}()})(e.exports?e.exports:self.nacl=self.nacl||{})});const q1=H.getNodeCrypto();async function wn(e){const t=new Uint8Array(e);if(typeof crypto!="undefined"&&crypto.getRandomValues)crypto.getRandomValues(t);else if(q1){const r=q1.randomBytes(t.length);t.set(r)}else{if(!Lu.buffer)throw Error("No secure random number generator available.");await Lu.get(t)}return t}async function Wn(e,t){const r=await H.getBigInteger();if(t.lt(e))throw Error("Illegal parameter value: max <= min");const n=t.sub(e),i=n.byteLength();return new r(await wn(i+8)).mod(n).add(e)}const Lu=new class{constructor(){this.buffer=null,this.size=null,this.callback=null}init(e,t){this.buffer=new Uint8Array(e),this.size=0,this.callback=t}set(e){if(!this.buffer)throw Error("RandomBuffer is not initialized");if(!(e instanceof Uint8Array))throw Error("Invalid type: buf not an Uint8Array");const t=this.buffer.length-this.size;e.length>t&&(e=e.subarray(0,t)),this.buffer.set(e,this.size),this.size+=e.length}async get(e){if(!this.buffer)throw Error("RandomBuffer is not initialized");if(!(e instanceof Uint8Array))throw Error("Invalid type: buf not an Uint8Array");if(this.size<e.length){if(!this.callback)throw Error("Random number buffer depleted");return await this.callback(),this.get(e)}for(let t=0;t<e.length;t++)e[t]=this.buffer[--this.size],this.buffer[this.size]=0}};var u5=Object.freeze({__proto__:null,getRandomBytes:wn,getRandomBigInteger:Wn,randomBuffer:Lu});async function $1(e,t,r){const n=await H.getBigInteger(),i=new n(1),s=i.leftShift(new n(e-1)),a=new n(30),o=[1,6,5,4,3,2,1,4,3,2,1,2,1,4,3,2,1,2,1,4,3,2,1,6,5,4,3,2,1,2],c=await Wn(s,s.leftShift(i));let u=c.mod(a).toNumber();do c.iadd(new n(o[u])),u=(u+o[u])%o.length,c.bitLength()>e&&(c.imod(s.leftShift(i)).iadd(s),u=c.mod(a).toNumber());while(!await vf(c,t,r));return c}async function vf(e,t,r){return!(t&&!e.dec().gcd(t).isOne())&&!!await async function(n){const i=await H.getBigInteger();return l5.every(s=>n.mod(new i(s))!==0)}(e)&&!!await async function(n,i){const s=await H.getBigInteger();return(i=i||new s(2)).modExp(n.dec(),n).isOne()}(e)&&!!await async function(n,i,s){const a=await H.getBigInteger(),o=n.bitLength();i||(i=Math.max(1,o/48|0));const c=n.dec();let u=0;for(;!c.getBit(u);)u++;const h=n.rightShift(new a(u));for(;i>0;i--){let f,p=(s?s():await Wn(new a(2),c)).modExp(h,n);if(!p.isOne()&&!p.equal(c)){for(f=1;f<u;f++){if(p=p.mul(p).mod(n),p.isOne())return!1;if(p.equal(c))break}if(f===u)return!1}}return!0}(e,r)}const l5=[7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999],on=[];async function P0(e,t){const r=e.length;if(r>t-11)throw Error("Message too long");const n=await async function(s){const a=new Uint8Array(s);let o=0;for(;o<s;){const c=await wn(s-o);for(let u=0;u<c.length;u++)c[u]!==0&&(a[o++]=c[u])}return a}(t-r-3),i=new Uint8Array(t);return i[1]=2,i.set(n,2),i.set(e,t-r),i}function x0(e,t){let r=2,n=1;for(let o=r;o<e.length;o++)n&=e[o]!==0,r+=n;const i=r-2,s=e.subarray(r+1),a=e[0]===0&e[1]===2&i>=8&!n;if(t)return H.selectUint8Array(a,s,t);if(a)return s;throw Error("Decryption error")}async function ju(e,t,r){let n;if(t.length!==ks.getHashByteLength(e))throw Error("Invalid hash length");const i=new Uint8Array(on[e].length);for(n=0;n<on[e].length;n++)i[n]=on[e][n];const s=i.length+t.length;if(r<s+11)throw Error("Intended encoded message length too short");const a=new Uint8Array(r-s-3).fill(255),o=new Uint8Array(r);return o[1]=1,o.set(a,2),o.set(i,r-s),o.set(t,r-t.length),o}on[1]=[48,32,48,12,6,8,42,134,72,134,247,13,2,5,5,0,4,16],on[2]=[48,33,48,9,6,5,43,14,3,2,26,5,0,4,20],on[3]=[48,33,48,9,6,5,43,36,3,2,1,5,0,4,20],on[8]=[48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32],on[9]=[48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48],on[10]=[48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64],on[11]=[48,45,48,13,6,9,96,134,72,1,101,3,4,2,4,5,0,4,28];var h5=Object.freeze({__proto__:null,emeEncode:P0,emeDecode:x0,emsaEncode:ju});const as=H.getWebCrypto(),Je=H.getNodeCrypto(),wf=void 0,os=Je?wf.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}):void 0,Qa=Je?wf.define("RSAPubliceKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}):void 0;var f5=Object.freeze({__proto__:null,sign:async function(e,t,r,n,i,s,a,o,c){if(t&&!H.isStream(t)){if(H.getWebCrypto())try{return await async function(u,h,f,p,d,S,k,A){const C=await async function(D,L,g,I,l,m){const v=await H.getBigInteger(),y=new v(I),w=new v(l),N=new v(g);let O=N.mod(w.dec()),W=N.mod(y.dec());return W=W.toUint8Array(),O=O.toUint8Array(),{kty:"RSA",n:wr(D,!0),e:wr(L,!0),d:wr(g,!0),p:wr(l,!0),q:wr(I,!0),dp:wr(O,!0),dq:wr(W,!0),qi:wr(m,!0),ext:!0}}(f,p,d,S,k,A),B={name:"RSASSA-PKCS1-v1_5",hash:{name:u}},R=await as.importKey("jwk",C,B,!1,["sign"]);return new Uint8Array(await as.sign("RSASSA-PKCS1-v1_5",R,h))}(V.read(V.webHash,e),t,r,n,i,s,a,o)}catch(u){H.printDebugError(u)}else if(H.getNodeCrypto())return async function(u,h,f,p,d,S,k,A){const{default:C}=await Promise.resolve().then(function(){return aa}),B=new C(S),R=new C(k),D=new C(d),L=D.mod(R.subn(1)),g=D.mod(B.subn(1)),I=Je.createSign(V.read(V.hash,u));I.write(h),I.end();const l={version:0,modulus:new C(f),publicExponent:new C(p),privateExponent:new C(d),prime1:new C(k),prime2:new C(S),exponent1:L,exponent2:g,coefficient:new C(A)};if(Je.createPrivateKey!==void 0){const v=os.encode(l,"der");return new Uint8Array(I.sign({key:v,format:"der",type:"pkcs1"}))}const m=os.encode(l,"pem",{label:"RSA PRIVATE KEY"});return new Uint8Array(I.sign(m))}(e,t,r,n,i,s,a,o)}return async function(u,h,f,p){const d=await H.getBigInteger();h=new d(h);const S=new d(await ju(u,p,h.byteLength()));if(f=new d(f),S.gte(h))throw Error("Message size cannot exceed modulus size");return S.modExp(f,h).toUint8Array("be",h.byteLength())}(e,r,i,c)},verify:async function(e,t,r,n,i,s){if(t&&!H.isStream(t)){if(H.getWebCrypto())try{return await async function(a,o,c,u,h){const f=function(d,S){return{kty:"RSA",n:wr(d,!0),e:wr(S,!0),ext:!0}}(u,h),p=await as.importKey("jwk",f,{name:"RSASSA-PKCS1-v1_5",hash:{name:a}},!1,["verify"]);return as.verify("RSASSA-PKCS1-v1_5",p,c,o)}(V.read(V.webHash,e),t,r,n,i)}catch(a){H.printDebugError(a)}else if(H.getNodeCrypto())return async function(a,o,c,u,h){const{default:f}=await Promise.resolve().then(function(){return aa}),p=Je.createVerify(V.read(V.hash,a));p.write(o),p.end();const d={modulus:new f(u),publicExponent:new f(h)};let S;Je.createPrivateKey!==void 0?S={key:Qa.encode(d,"der"),format:"der",type:"pkcs1"}:S=Qa.encode(d,"pem",{label:"RSA PUBLIC KEY"});try{return await p.verify(S,c)}catch{return!1}}(e,t,r,n,i)}return async function(a,o,c,u,h){const f=await H.getBigInteger();if(c=new f(c),o=new f(o),u=new f(u),o.gte(c))throw Error("Signature size cannot exceed modulus size");const p=o.modExp(u,c).toUint8Array("be",c.byteLength()),d=await ju(a,h,c.byteLength());return H.equalsUint8Array(p,d)}(e,r,n,i,s)},encrypt:async function(e,t,r){return H.getNodeCrypto()?async function(n,i,s){const{default:a}=await Promise.resolve().then(function(){return aa}),o={modulus:new a(i),publicExponent:new a(s)};let c;return Je.createPrivateKey!==void 0?c={key:Qa.encode(o,"der"),format:"der",type:"pkcs1",padding:Je.constants.RSA_PKCS1_PADDING}:c={key:Qa.encode(o,"pem",{label:"RSA PUBLIC KEY"}),padding:Je.constants.RSA_PKCS1_PADDING},new Uint8Array(Je.publicEncrypt(c,n))}(e,t,r):async function(n,i,s){const a=await H.getBigInteger();if(i=new a(i),n=new a(await P0(n,i.byteLength())),s=new a(s),n.gte(i))throw Error("Message size cannot exceed modulus size");return n.modExp(s,i).toUint8Array("be",i.byteLength())}(e,t,r)},decrypt:async function(e,t,r,n,i,s,a,o){return H.getNodeCrypto()?async function(c,u,h,f,p,d,S,k){const{default:A}=await Promise.resolve().then(function(){return aa}),C=new A(p),B=new A(d),R=new A(f),D=R.mod(B.subn(1)),L=R.mod(C.subn(1)),g={version:0,modulus:new A(u),publicExponent:new A(h),privateExponent:new A(f),prime1:new A(d),prime2:new A(p),exponent1:D,exponent2:L,coefficient:new A(S)};let I;Je.createPrivateKey!==void 0?I={key:os.encode(g,"der"),format:"der",type:"pkcs1",padding:Je.constants.RSA_PKCS1_PADDING}:I={key:os.encode(g,"pem",{label:"RSA PRIVATE KEY"}),padding:Je.constants.RSA_PKCS1_PADDING};try{return new Uint8Array(Je.privateDecrypt(I,c))}catch{if(k)return k;throw Error("Decryption error")}}(e,t,r,n,i,s,a,o):async function(c,u,h,f,p,d,S,k){const A=await H.getBigInteger();if(c=new A(c),u=new A(u),h=new A(h),f=new A(f),p=new A(p),d=new A(d),S=new A(S),c.gte(u))throw Error("Data too large.");const C=f.mod(d.dec()),B=f.mod(p.dec()),R=(await Wn(new A(2),u)).mod(u),D=R.modInv(u).modExp(h,u),L=(c=c.mul(D).mod(u)).modExp(B,p),g=c.modExp(C,d);let I=S.mul(g.sub(L)).mod(d).mul(p).add(L);return I=I.mul(R).mod(u),x0(I.toUint8Array("be",u.byteLength()),k)}(e,t,r,n,i,s,a,o)},generate:async function(e,t){if(t=new(await H.getBigInteger())(t),H.getWebCrypto()){const a={name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:t.toUint8Array(),hash:{name:"SHA-1"}},o=await as.generateKey(a,!0,["sign","verify"]),c=await as.exportKey("jwk",o.privateKey);return{n:Dn(c.n),e:t.toUint8Array(),d:Dn(c.d),p:Dn(c.q),q:Dn(c.p),u:Dn(c.qi)}}if(H.getNodeCrypto()&&Je.generateKeyPair&&os){const a={modulusLength:e,publicExponent:t.toNumber(),publicKeyEncoding:{type:"pkcs1",format:"der"},privateKeyEncoding:{type:"pkcs1",format:"der"}},o=await new Promise((c,u)=>Je.generateKeyPair("rsa",a,(h,f,p)=>{h?u(h):c(os.decode(p,"der"))}));return{n:o.modulus.toArrayLike(Uint8Array),e:o.publicExponent.toArrayLike(Uint8Array),d:o.privateExponent.toArrayLike(Uint8Array),p:o.prime2.toArrayLike(Uint8Array),q:o.prime1.toArrayLike(Uint8Array),u:o.coefficient.toArrayLike(Uint8Array)}}let r,n,i;do n=await $1(e-(e>>1),t,40),r=await $1(e>>1,t,40),i=r.mul(n);while(i.bitLength()!==e);const s=r.dec().imul(n.dec());return n.lt(r)&&([r,n]=[n,r]),{n:i.toUint8Array(),e:t.toUint8Array(),d:t.modInv(s).toUint8Array(),p:r.toUint8Array(),q:n.toUint8Array(),u:r.modInv(n).toUint8Array()}},validateParams:async function(e,t,r,n,i,s){const a=await H.getBigInteger();if(e=new a(e),n=new a(n),i=new a(i),!n.mul(i).equal(e))return!1;const o=new a(2);if(s=new a(s),!n.mul(s).mod(i).isOne())return!1;t=new a(t),r=new a(r);const c=new a(Math.floor(e.bitLength()/3)),u=await Wn(o,o.leftShift(c)),h=u.mul(r).mul(t);return!(!h.mod(n.dec()).equal(u)||!h.mod(i.dec()).equal(u))}}),d5=Object.freeze({__proto__:null,encrypt:async function(e,t,r,n){const i=await H.getBigInteger();t=new i(t),r=new i(r),n=new i(n);const s=new i(await P0(e,t.byteLength())),a=await Wn(new i(1),t.dec());return{c1:r.modExp(a,t).toUint8Array(),c2:n.modExp(a,t).imul(s).imod(t).toUint8Array()}},decrypt:async function(e,t,r,n,i){const s=await H.getBigInteger();return e=new s(e),t=new s(t),r=new s(r),n=new s(n),x0(e.modExp(n,r).modInv(r).imul(t).imod(r).toUint8Array("be",r.byteLength()),i)},validateParams:async function(e,t,r,n){const i=await H.getBigInteger();e=new i(e),t=new i(t),r=new i(r);const s=new i(1);if(t.lte(s)||t.gte(e))return!1;const a=new i(e.bitLength()),o=new i(1023);if(a.lt(o)||!t.modExp(e.dec(),e).isOne())return!1;let c=t;const u=new i(1),h=new i(2).leftShift(new i(17));for(;u.lt(h);){if(c=c.mul(t).imod(e),c.isOne())return!1;u.iinc()}n=new i(n);const f=new i(2),p=await Wn(f.leftShift(a.dec()),f.leftShift(a)),d=e.dec().imul(p).iadd(n);return!!r.equal(t.modExp(d,e))}});class ln{constructor(t){if(t instanceof ln)this.oid=t.oid;else if(H.isArray(t)||H.isUint8Array(t)){if((t=new Uint8Array(t))[0]===6){if(t[1]!==t.length-2)throw Error("Length mismatch in DER encoded oid");t=t.subarray(2)}this.oid=t}else this.oid=""}read(t){if(t.length>=1){const r=t[0];if(t.length>=1+r)return this.oid=t.subarray(1,1+r),1+this.oid.length}throw Error("Invalid oid")}write(){return H.concatUint8Array([new Uint8Array([this.oid.length]),this.oid])}toHex(){return H.uint8ArrayToHex(this.oid)}getName(){const t=this.toHex();if(V.curve[t])return V.write(V.curve,t);throw Error("Unknown curve object identifier.")}}function Mc(e,t){return e.keyPair({priv:t})}function Tc(e,t){const r=e.keyPair({pub:t});if(r.validate().result!==!0)throw Error("Invalid elliptic public key");return r}async function Ds(e){if(!$t.useIndutnyElliptic)throw Error("This curve is only supported in the full build of OpenPGP.js");const{default:t}=await Promise.resolve().then(function(){return E6});return new t.ec(e)}function p5(e){let t,r=0;const n=e[0];return n<192?([r]=e,t=1):n<255?(r=(e[0]-192<<8)+e[1]+192,t=2):n===255&&(r=H.readNumber(e.subarray(1,5)),t=5),{len:r,offset:t}}function Rc(e){return e<192?new Uint8Array([e]):e>191&&e<8384?new Uint8Array([192+(e-192>>8),e-192&255]):H.concatUint8Array([new Uint8Array([255]),H.writeNumber(e,4)])}function m5(e){if(e<0||e>30)throw Error("Partial Length power must be between 1 and 30");return new Uint8Array([224+e])}function _f(e){return new Uint8Array([192|e])}function W1(e,t){return H.concatUint8Array([_f(e),Rc(t)])}function wo(e){return[V.packet.literalData,V.packet.compressedData,V.packet.symmetricallyEncryptedData,V.packet.symEncryptedIntegrityProtectedData,V.packet.aeadEncryptedData].includes(e)}async function y5(e,t){const r=Pn(e);let n,i;try{const s=await r.peekBytes(2);if(!s||s.length<2||(128&s[0])==0)throw Error("Error during parsing. This message / key probably does not conform to a valid OpenPGP format.");const a=await r.readByte();let o,c,u=-1,h=-1;h=0,(64&a)!=0&&(h=1),h?u=63&a:(u=(63&a)>>2,c=3&a);const f=wo(u);let p,d=null;if(f){if(H.isStream(e)==="array"){const k=new pn;n=yr(k),d=k}else{const k=new Es;n=yr(k.writable),d=k.readable}i=t({tag:u,packet:d})}else d=[];do{if(h){const k=await r.readByte();if(p=!1,k<192)o=k;else if(k>=192&&k<224)o=(k-192<<8)+await r.readByte()+192;else if(k>223&&k<255){if(o=1<<(31&k),p=!0,!f)throw new TypeError("This packet type does not support partial lengths.")}else o=await r.readByte()<<24|await r.readByte()<<16|await r.readByte()<<8|await r.readByte()}else switch(c){case 0:o=await r.readByte();break;case 1:o=await r.readByte()<<8|await r.readByte();break;case 2:o=await r.readByte()<<24|await r.readByte()<<16|await r.readByte()<<8|await r.readByte();break;default:o=1/0}if(o>0){let k=0;for(;;){n&&await n.ready;const{done:A,value:C}=await r.read();if(A){if(o===1/0)break;throw Error("Unexpected end of packet")}const B=o===1/0?C:C.subarray(0,o-k);if(n?await n.write(B):d.push(B),k+=C.length,k>=o){r.unshift(C.subarray(o-k+C.length));break}}}}while(p);const S=await r.peekBytes(f?1/0:2);return n?(await n.ready,await n.close()):(d=H.concatUint8Array(d),await t({tag:u,packet:d})),!S||!S.length}catch(s){if(n)return await n.abort(s),!0;throw s}finally{n&&await i,r.releaseLock()}}class De extends Error{constructor(...t){super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,De),this.name="UnsupportedError"}}class H1{constructor(t,r){this.tag=t,this.rawContent=r}write(){return this.rawContent}}const su=H.getWebCrypto(),Ko=H.getNodeCrypto(),_n={p256:"P-256",p384:"P-384",p521:"P-521"},Cn=Ko?Ko.getCurves():[],si=Ko?{secp256k1:Cn.includes("secp256k1")?"secp256k1":void 0,p256:Cn.includes("prime256v1")?"prime256v1":void 0,p384:Cn.includes("secp384r1")?"secp384r1":void 0,p521:Cn.includes("secp521r1")?"secp521r1":void 0,ed25519:Cn.includes("ED25519")?"ED25519":void 0,curve25519:Cn.includes("X25519")?"X25519":void 0,brainpoolP256r1:Cn.includes("brainpoolP256r1")?"brainpoolP256r1":void 0,brainpoolP384r1:Cn.includes("brainpoolP384r1")?"brainpoolP384r1":void 0,brainpoolP512r1:Cn.includes("brainpoolP512r1")?"brainpoolP512r1":void 0}:{},_o={p256:{oid:[6,8,42,134,72,206,61,3,1,7],keyType:V.publicKey.ecdsa,hash:V.hash.sha256,cipher:V.symmetric.aes128,node:si.p256,web:_n.p256,payloadSize:32,sharedSize:256},p384:{oid:[6,5,43,129,4,0,34],keyType:V.publicKey.ecdsa,hash:V.hash.sha384,cipher:V.symmetric.aes192,node:si.p384,web:_n.p384,payloadSize:48,sharedSize:384},p521:{oid:[6,5,43,129,4,0,35],keyType:V.publicKey.ecdsa,hash:V.hash.sha512,cipher:V.symmetric.aes256,node:si.p521,web:_n.p521,payloadSize:66,sharedSize:528},secp256k1:{oid:[6,5,43,129,4,0,10],keyType:V.publicKey.ecdsa,hash:V.hash.sha256,cipher:V.symmetric.aes128,node:si.secp256k1,payloadSize:32},ed25519:{oid:[6,9,43,6,1,4,1,218,71,15,1],keyType:V.publicKey.eddsa,hash:V.hash.sha512,node:!1,payloadSize:32},curve25519:{oid:[6,10,43,6,1,4,1,151,85,1,5,1],keyType:V.publicKey.ecdh,hash:V.hash.sha256,cipher:V.symmetric.aes128,node:!1,payloadSize:32},brainpoolP256r1:{oid:[6,9,43,36,3,3,2,8,1,1,7],keyType:V.publicKey.ecdsa,hash:V.hash.sha256,cipher:V.symmetric.aes128,node:si.brainpoolP256r1,payloadSize:32},brainpoolP384r1:{oid:[6,9,43,36,3,3,2,8,1,1,11],keyType:V.publicKey.ecdsa,hash:V.hash.sha384,cipher:V.symmetric.aes192,node:si.brainpoolP384r1,payloadSize:48},brainpoolP512r1:{oid:[6,9,43,36,3,3,2,8,1,1,13],keyType:V.publicKey.ecdsa,hash:V.hash.sha512,cipher:V.symmetric.aes256,node:si.brainpoolP512r1,payloadSize:64}};class Hn{constructor(t,r){try{(H.isArray(t)||H.isUint8Array(t))&&(t=new ln(t)),t instanceof ln&&(t=t.getName()),this.name=V.write(V.curve,t)}catch{throw new De("Unknown curve")}r=r||_o[this.name],this.keyType=r.keyType,this.oid=r.oid,this.hash=r.hash,this.cipher=r.cipher,this.node=r.node&&_o[this.name],this.web=r.web&&_o[this.name],this.payloadSize=r.payloadSize,this.web&&H.getWebCrypto()?this.type="web":this.node&&H.getNodeCrypto()?this.type="node":this.name==="curve25519"?this.type="curve25519":this.name==="ed25519"&&(this.type="ed25519")}async genKeyPair(){let t;switch(this.type){case"web":try{return await async function(n){const i=await su.generateKey({name:"ECDSA",namedCurve:_n[n]},!0,["sign","verify"]),s=await su.exportKey("jwk",i.privateKey);return{publicKey:Sf(await su.exportKey("jwk",i.publicKey)),privateKey:Dn(s.d)}}(this.name)}catch(n){H.printDebugError("Browser did not support generating ec key "+n.message);break}case"node":return async function(n){const i=Ko.createECDH(si[n]);return await i.generateKeys(),{publicKey:new Uint8Array(i.getPublicKey()),privateKey:new Uint8Array(i.getPrivateKey())}}(this.name);case"curve25519":{const n=await wn(32);n[0]=127&n[0]|64,n[31]&=248;const i=n.slice().reverse();return t=vn.box.keyPair.fromSecretKey(i),{publicKey:H.concatUint8Array([new Uint8Array([64]),t.publicKey]),privateKey:n}}case"ed25519":{const n=await wn(32),i=vn.sign.keyPair.fromSeed(n);return{publicKey:H.concatUint8Array([new Uint8Array([64]),i.publicKey]),privateKey:n}}}return t=await(await Ds(this.name)).genKeyPair({entropy:H.uint8ArrayToString(await wn(32))}),{publicKey:new Uint8Array(t.getPublic("array",!1)),privateKey:t.getPrivate().toArrayLike(Uint8Array)}}}async function Af(e,t,r,n){const i={p256:!0,p384:!0,p521:!0,secp256k1:!0,curve25519:e===V.publicKey.ecdh,brainpoolP256r1:!0,brainpoolP384r1:!0,brainpoolP512r1:!0},s=t.getName();if(!i[s])return!1;if(s==="curve25519"){n=n.slice().reverse();const{publicKey:o}=vn.box.keyPair.fromSecretKey(n);r=new Uint8Array(r);const c=new Uint8Array([64,...o]);return!!H.equalsUint8Array(c,r)}const a=await Ds(s);try{r=Tc(a,r).getPublic()}catch{return!1}return!!Mc(a,n).getPublic().eq(r)}function Sf(e){const t=Dn(e.x),r=Dn(e.y),n=new Uint8Array(t.length+r.length+1);return n[0]=4,n.set(t,1),n.set(r,t.length+1),n}function Cc(e,t,r){const n=e,i=r.slice(1,n+1),s=r.slice(n+1,2*n+1);return{kty:"EC",crv:t,x:wr(i,!0),y:wr(s,!0),ext:!0}}function Ef(e,t,r,n){const i=Cc(e,t,r);return i.d=wr(n,!0),i}const Fo=H.getWebCrypto(),Os=H.getNodeCrypto();async function G1(e,t,r,n,i,s){const a=new Hn(e);if(r&&!H.isStream(r)){const o={publicKey:n,privateKey:i};switch(a.type){case"web":try{return await async function(c,u,h,f){const p=c.payloadSize,d=Ef(c.payloadSize,_n[c.name],f.publicKey,f.privateKey),S=await Fo.importKey("jwk",d,{name:"ECDSA",namedCurve:_n[c.name],hash:{name:V.read(V.webHash,c.hash)}},!1,["sign"]),k=new Uint8Array(await Fo.sign({name:"ECDSA",namedCurve:_n[c.name],hash:{name:V.read(V.webHash,u)}},S,h));return{r:k.slice(0,p),s:k.slice(p,p<<1)}}(a,t,r,o)}catch(c){if(a.name!=="p521"&&(c.name==="DataError"||c.name==="OperationError"))throw c;H.printDebugError("Browser did not support signing: "+c.message)}break;case"node":{const c=await async function(u,h,f,p){const d=Os.createSign(V.read(V.hash,h));d.write(f),d.end();const S=g5.encode({version:1,parameters:u.oid,privateKey:Array.from(p.privateKey),publicKey:{unused:0,data:Array.from(p.publicKey)}},"pem",{label:"EC PRIVATE KEY"});return kf.decode(d.sign(S),"der")}(a,t,r,o);return{r:c.r.toArrayLike(Uint8Array),s:c.s.toArrayLike(Uint8Array)}}}}return async function(o,c,u){const h=await Ds(o.name),f=Mc(h,u).sign(c);return{r:f.r.toArrayLike(Uint8Array),s:f.s.toArrayLike(Uint8Array)}}(a,s,i)}async function V1(e,t,r,n,i,s){const a=new Hn(e);if(n&&!H.isStream(n))switch(a.type){case"web":try{return await async function(o,c,{r:u,s:h},f,p){const d=Cc(o.payloadSize,_n[o.name],p),S=await Fo.importKey("jwk",d,{name:"ECDSA",namedCurve:_n[o.name],hash:{name:V.read(V.webHash,o.hash)}},!1,["verify"]),k=H.concatUint8Array([u,h]).buffer;return Fo.verify({name:"ECDSA",namedCurve:_n[o.name],hash:{name:V.read(V.webHash,c)}},S,k,f)}(a,t,r,n,i)}catch(o){if(a.name!=="p521"&&(o.name==="DataError"||o.name==="OperationError"))throw o;H.printDebugError("Browser did not support verifying: "+o.message)}break;case"node":return async function(o,c,{r:u,s:h},f,p){const{default:d}=await Promise.resolve().then(function(){return aa}),S=Os.createVerify(V.read(V.hash,c));S.write(f),S.end();const k=v5.encode({algorithm:{algorithm:[1,2,840,10045,2,1],parameters:o.oid},subjectPublicKey:{unused:0,data:Array.from(p)}},"pem",{label:"PUBLIC KEY"}),A=kf.encode({r:new d(u),s:new d(h)},"der");try{return S.verify(k,A)}catch{return!1}}(a,t,r,n,i)}return async function(o,c,u,h){const f=await Ds(o.name);return Tc(f,h).verify(u,c)}(a,r,t===void 0?n:s,i)}const Ic=void 0,kf=Os?Ic.define("ECDSASignature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}):void 0,g5=Os?Ic.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().any(),this.key("publicKey").explicit(1).optional().bitstr())}):void 0,b5=Os?Ic.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}):void 0,v5=Os?Ic.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(b5),this.key("subjectPublicKey").bitstr())}):void 0;var w5=Object.freeze({__proto__:null,sign:G1,verify:V1,validateParams:async function(e,t,r){const n=new Hn(e);if(n.keyType!==V.publicKey.ecdsa)return!1;switch(n.type){case"web":case"node":{const i=await wn(8),s=V.hash.sha256,a=await ks.digest(s,i);try{const o=await G1(e,s,i,t,r,a);return await V1(e,s,o,i,t,a)}catch{return!1}}default:return Af(V.publicKey.ecdsa,e,t,r)}}});vn.hash=e=>new Uint8Array(qa().update(e).digest());var _5=Object.freeze({__proto__:null,sign:async function(e,t,r,n,i,s){if(ks.getHashByteLength(t)<ks.getHashByteLength(V.hash.sha256))throw Error("Hash algorithm too weak: sha256 or stronger is required for EdDSA.");const a=H.concatUint8Array([i,n.subarray(1)]),o=vn.sign.detached(s,a);return{r:o.subarray(0,32),s:o.subarray(32)}},verify:async function(e,t,{r,s:n},i,s,a){const o=H.concatUint8Array([r,n]);return vn.sign.detached.verify(a,o,s.subarray(1))},validateParams:async function(e,t,r){if(e.getName()!=="ed25519")return!1;const{publicKey:n}=vn.sign.keyPair.fromSeed(r),i=new Uint8Array([64,...n]);return H.equalsUint8Array(t,i)}});function Pf(e,t){const r=new Vi["aes"+8*e.length](e),n=new Uint32Array([2795939494,2795939494]),i=Lo(t);let s=n;const a=i,o=i.length/2,c=new Uint32Array([0,0]);let u=new Uint32Array(4);for(let h=0;h<=5;++h)for(let f=0;f<o;++f)c[1]=o*h+(1+f),u[0]=s[0],u[1]=s[1],u[2]=a[2*f],u[3]=a[2*f+1],u=Lo(r.encrypt(jo(u))),s=u.subarray(0,2),s[0]^=c[0],s[1]^=c[1],a[2*f]=u[2],a[2*f+1]=u[3];return jo(s,a)}function xf(e,t){const r=new Vi["aes"+8*e.length](e),n=new Uint32Array([2795939494,2795939494]),i=Lo(t);let s=i.subarray(0,2);const a=i.subarray(2),o=i.length/2-1,c=new Uint32Array([0,0]);let u=new Uint32Array(4);for(let h=5;h>=0;--h)for(let f=o-1;f>=0;--f)c[1]=o*h+(f+1),u[0]=s[0]^c[0],u[1]=s[1]^c[1],u[2]=a[2*f],u[3]=a[2*f+1],u=Lo(r.decrypt(jo(u))),s=u.subarray(0,2),a[2*f]=u[2],a[2*f+1]=u[3];if(s[0]===n[0]&&s[1]===n[1])return jo(a);throw Error("Key Data Integrity failed")}function Lo(e){const{length:t}=e,r=function(s){if(H.isString(s)){const{length:a}=s,o=new ArrayBuffer(a),c=new Uint8Array(o);for(let u=0;u<a;++u)c[u]=s.charCodeAt(u);return o}return new Uint8Array(s).buffer}(e),n=new DataView(r),i=new Uint32Array(t/4);for(let s=0;s<t/4;++s)i[s]=n.getUint32(4*s);return i}function jo(){let e=0;for(let i=0;i<arguments.length;++i)e+=4*arguments[i].length;const t=new ArrayBuffer(e),r=new DataView(t);let n=0;for(let i=0;i<arguments.length;++i){for(let s=0;s<arguments[i].length;++s)r.setUint32(n+4*s,arguments[i][s]);n+=4*arguments[i].length}return new Uint8Array(t)}var A5=Object.freeze({__proto__:null,wrap:Pf,unwrap:xf});function Mf(e){const t=8-e.length%8,r=new Uint8Array(e.length+t).fill(t);return r.set(e),r}function Tf(e){const t=e.length;if(t>0){const r=e[t-1];if(r>=1){const n=e.subarray(t-r),i=new Uint8Array(r).fill(r);if(H.equalsUint8Array(n,i))return e.subarray(0,t-r)}}throw Error("Invalid padding")}var S5=Object.freeze({__proto__:null,encode:Mf,decode:Tf});const pi=H.getWebCrypto(),Rf=H.getNodeCrypto();function Y1(e,t,r,n){return H.concatUint8Array([t.write(),new Uint8Array([e]),r.write(),H.stringToUint8Array("Anonymous Sender    "),n.subarray(0,20)])}async function J1(e,t,r,n,i=!1,s=!1){let a;if(i){for(a=0;a<t.length&&t[a]===0;a++);t=t.subarray(a)}if(s){for(a=t.length-1;a>=0&&t[a]===0;a--);t=t.subarray(0,a+1)}return(await ks.digest(e,H.concatUint8Array([new Uint8Array([0,0,0,1]),t,n]))).subarray(0,r)}async function E5(e,t){switch(e.type){case"curve25519":{const r=await wn(32),{secretKey:n,sharedKey:i}=await Cf(e,t,null,r);let{publicKey:s}=vn.box.keyPair.fromSecretKey(n);return s=H.concatUint8Array([new Uint8Array([64]),s]),{publicKey:s,sharedKey:i}}case"web":if(e.web&&H.getWebCrypto())try{return await async function(r,n){const i=Cc(r.payloadSize,r.web.web,n);let s=pi.generateKey({name:"ECDH",namedCurve:r.web.web},!0,["deriveKey","deriveBits"]),a=pi.importKey("jwk",i,{name:"ECDH",namedCurve:r.web.web},!1,[]);[s,a]=await Promise.all([s,a]);let o=pi.deriveBits({name:"ECDH",namedCurve:r.web.web,public:a},s.privateKey,r.web.sharedSize),c=pi.exportKey("jwk",s.publicKey);[o,c]=await Promise.all([o,c]);const u=new Uint8Array(o);return{publicKey:new Uint8Array(Sf(c)),sharedKey:u}}(e,t)}catch(r){H.printDebugError(r)}break;case"node":return async function(r,n){const i=Rf.createECDH(r.node.node);i.generateKeys();const s=new Uint8Array(i.computeSecret(n));return{publicKey:new Uint8Array(i.getPublicKey()),sharedKey:s}}(e,t)}return async function(r,n){const i=await Ds(r.name),s=await r.genKeyPair();n=Tc(i,n);const a=Mc(i,s.privateKey),o=s.publicKey,c=a.derive(n.getPublic()),u=i.curve.p.byteLength(),h=c.toArrayLike(Uint8Array,"be",u);return{publicKey:o,sharedKey:h}}(e,t)}async function Cf(e,t,r,n){if(n.length!==e.payloadSize){const i=new Uint8Array(e.payloadSize);i.set(n,e.payloadSize-n.length),n=i}switch(e.type){case"curve25519":{const i=n.slice().reverse();return{secretKey:i,sharedKey:vn.scalarMult(i,t.subarray(1))}}case"web":if(e.web&&H.getWebCrypto())try{return await async function(i,s,a,o){const c=Ef(i.payloadSize,i.web.web,a,o);let u=pi.importKey("jwk",c,{name:"ECDH",namedCurve:i.web.web},!0,["deriveKey","deriveBits"]);const h=Cc(i.payloadSize,i.web.web,s);let f=pi.importKey("jwk",h,{name:"ECDH",namedCurve:i.web.web},!0,[]);[u,f]=await Promise.all([u,f]);let p=pi.deriveBits({name:"ECDH",namedCurve:i.web.web,public:f},u,i.web.sharedSize),d=pi.exportKey("jwk",u);[p,d]=await Promise.all([p,d]);const S=new Uint8Array(p);return{secretKey:Dn(d.d),sharedKey:S}}(e,t,r,n)}catch(i){H.printDebugError(i)}break;case"node":return async function(i,s,a){const o=Rf.createECDH(i.node.node);o.setPrivateKey(a);const c=new Uint8Array(o.computeSecret(s));return{secretKey:new Uint8Array(o.getPrivateKey()),sharedKey:c}}(e,t,n)}return async function(i,s,a){const o=await Ds(i.name);s=Tc(o,s),a=Mc(o,a);const c=new Uint8Array(a.getPrivate()),u=a.derive(s.getPublic()),h=o.curve.p.byteLength(),f=u.toArrayLike(Uint8Array,"be",h);return{secretKey:c,sharedKey:f}}(e,t,n)}var k5=Object.freeze({__proto__:null,validateParams:async function(e,t,r){return Af(V.publicKey.ecdh,e,t,r)},encrypt:async function(e,t,r,n,i){const s=Mf(r),a=new Hn(e),{publicKey:o,sharedKey:c}=await E5(a,n),u=Y1(V.publicKey.ecdh,e,t,i),{keySize:h}=ws(t.cipher);return{publicKey:o,wrappedKey:Pf(await J1(t.hash,c,h,u),s)}},decrypt:async function(e,t,r,n,i,s,a){const o=new Hn(e),{sharedKey:c}=await Cf(o,r,i,s),u=Y1(V.publicKey.ecdh,e,t,a),{keySize:h}=ws(t.cipher);let f;for(let p=0;p<3;p++)try{return Tf(xf(await J1(t.hash,c,h,u,p===1,p===2),n))}catch(d){f=d}throw f}}),be={rsa:f5,elgamal:d5,elliptic:Object.freeze({__proto__:null,Curve:Hn,ecdh:k5,ecdsa:w5,eddsa:_5,generate:async function(e){const t=await H.getBigInteger();e=new Hn(e);const r=await e.genKeyPair(),n=new t(r.publicKey).toUint8Array(),i=new t(r.privateKey).toUint8Array("be",e.payloadSize);return{oid:e.oid,Q:n,secret:i,hash:e.hash,cipher:e.cipher}},getPreferredHashAlgo:function(e){return _o[V.write(V.curve,e.toHex())].hash}}),dsa:Object.freeze({__proto__:null,sign:async function(e,t,r,n,i,s){const a=await H.getBigInteger(),o=new a(1);let c,u,h,f;n=new a(n),i=new a(i),r=new a(r),s=new a(s),r=r.mod(n),s=s.mod(i);const p=new a(t.subarray(0,i.byteLength())).mod(i);for(;;){if(c=await Wn(o,i),u=r.modExp(c,n).imod(i),u.isZero())continue;const d=s.mul(u).imod(i);if(f=p.add(d).imod(i),h=c.modInv(i).imul(f).imod(i),!h.isZero())break}return{r:u.toUint8Array("be",i.byteLength()),s:h.toUint8Array("be",i.byteLength())}},verify:async function(e,t,r,n,i,s,a,o){const c=await H.getBigInteger(),u=new c(0);if(t=new c(t),r=new c(r),s=new c(s),a=new c(a),i=new c(i),o=new c(o),t.lte(u)||t.gte(a)||r.lte(u)||r.gte(a))return H.printDebug("invalid DSA Signature"),!1;const h=new c(n.subarray(0,a.byteLength())).imod(a),f=r.modInv(a);if(f.isZero())return H.printDebug("invalid DSA Signature"),!1;i=i.mod(s),o=o.mod(s);const p=h.mul(f).imod(a),d=t.mul(f).imod(a),S=i.modExp(p,s),k=o.modExp(d,s);return S.mul(k).imod(s).imod(a).equal(t)},validateParams:async function(e,t,r,n,i){const s=await H.getBigInteger();e=new s(e),t=new s(t),r=new s(r),n=new s(n);const a=new s(1);if(r.lte(a)||r.gte(e)||!e.dec().mod(t).isZero()||!r.modExp(t,e).isOne())return!1;const o=new s(t.bitLength()),c=new s(150);if(o.lt(c)||!await vf(t,null,32))return!1;i=new s(i);const u=new s(2),h=await Wn(u.leftShift(o.dec()),u.leftShift(o)),f=t.mul(h).add(i);return!!n.equal(r.modExp(f,e))}}),nacl:vn};class X1{constructor(t){t=t===void 0?new Uint8Array([]):H.isString(t)?H.stringToUint8Array(t):new Uint8Array(t),this.data=t}read(t){if(t.length>=1){const r=t[0];if(t.length>=1+r)return this.data=t.subarray(1,1+r),1+this.data.length}throw Error("Invalid symmetric key")}write(){return H.concatUint8Array([new Uint8Array([this.data.length]),this.data])}}class Z1{constructor(t){if(t){const{hash:r,cipher:n}=t;this.hash=r,this.cipher=n}else this.hash=null,this.cipher=null}read(t){if(t.length<4||t[0]!==3||t[1]!==1)throw Error("Cannot read KDFParams");return this.hash=t[2],this.cipher=t[3],4}write(){return new Uint8Array([3,1,this.hash,this.cipher])}}function ws(e){const t=V.read(V.symmetric,e);return Vi[t]}function au(e){try{e.getName()}catch{throw new De("Unknown curve OID")}}var P5=Object.freeze({__proto__:null,publicKeyEncrypt:async function(e,t,r,n){switch(e){case V.publicKey.rsaEncrypt:case V.publicKey.rsaEncryptSign:{const{n:i,e:s}=t;return{c:await be.rsa.encrypt(r,i,s)}}case V.publicKey.elgamal:{const{p:i,g:s,y:a}=t;return be.elgamal.encrypt(r,i,s,a)}case V.publicKey.ecdh:{const{oid:i,Q:s,kdfParams:a}=t,{publicKey:o,wrappedKey:c}=await be.elliptic.ecdh.encrypt(i,a,r,s,n);return{V:o,C:new X1(c)}}default:return[]}},publicKeyDecrypt:async function(e,t,r,n,i,s){switch(e){case V.publicKey.rsaEncryptSign:case V.publicKey.rsaEncrypt:{const{c:a}=n,{n:o,e:c}=t,{d:u,p:h,q:f,u:p}=r;return be.rsa.decrypt(a,o,c,u,h,f,p,s)}case V.publicKey.elgamal:{const{c1:a,c2:o}=n,c=t.p,u=r.x;return be.elgamal.decrypt(a,o,c,u,s)}case V.publicKey.ecdh:{const{oid:a,Q:o,kdfParams:c}=t,{d:u}=r,{V:h,C:f}=n;return be.elliptic.ecdh.decrypt(a,c,h,f.data,o,u,i)}default:throw Error("Unknown public key encryption algorithm.")}},parsePublicKeyParams:function(e,t){let r=0;switch(e){case V.publicKey.rsaEncrypt:case V.publicKey.rsaEncryptSign:case V.publicKey.rsaSign:{const n=H.readMPI(t.subarray(r));r+=n.length+2;const i=H.readMPI(t.subarray(r));return r+=i.length+2,{read:r,publicParams:{n,e:i}}}case V.publicKey.dsa:{const n=H.readMPI(t.subarray(r));r+=n.length+2;const i=H.readMPI(t.subarray(r));r+=i.length+2;const s=H.readMPI(t.subarray(r));r+=s.length+2;const a=H.readMPI(t.subarray(r));return r+=a.length+2,{read:r,publicParams:{p:n,q:i,g:s,y:a}}}case V.publicKey.elgamal:{const n=H.readMPI(t.subarray(r));r+=n.length+2;const i=H.readMPI(t.subarray(r));r+=i.length+2;const s=H.readMPI(t.subarray(r));return r+=s.length+2,{read:r,publicParams:{p:n,g:i,y:s}}}case V.publicKey.ecdsa:{const n=new ln;r+=n.read(t),au(n);const i=H.readMPI(t.subarray(r));return r+=i.length+2,{read:r,publicParams:{oid:n,Q:i}}}case V.publicKey.eddsa:{const n=new ln;r+=n.read(t),au(n);let i=H.readMPI(t.subarray(r));return r+=i.length+2,i=H.leftPad(i,33),{read:r,publicParams:{oid:n,Q:i}}}case V.publicKey.ecdh:{const n=new ln;r+=n.read(t),au(n);const i=H.readMPI(t.subarray(r));r+=i.length+2;const s=new Z1;return r+=s.read(t.subarray(r)),{read:r,publicParams:{oid:n,Q:i,kdfParams:s}}}default:throw new De("Unknown public key encryption algorithm.")}},parsePrivateKeyParams:function(e,t,r){let n=0;switch(e){case V.publicKey.rsaEncrypt:case V.publicKey.rsaEncryptSign:case V.publicKey.rsaSign:{const i=H.readMPI(t.subarray(n));n+=i.length+2;const s=H.readMPI(t.subarray(n));n+=s.length+2;const a=H.readMPI(t.subarray(n));n+=a.length+2;const o=H.readMPI(t.subarray(n));return n+=o.length+2,{read:n,privateParams:{d:i,p:s,q:a,u:o}}}case V.publicKey.dsa:case V.publicKey.elgamal:{const i=H.readMPI(t.subarray(n));return n+=i.length+2,{read:n,privateParams:{x:i}}}case V.publicKey.ecdsa:case V.publicKey.ecdh:{const i=new Hn(r.oid);let s=H.readMPI(t.subarray(n));return n+=s.length+2,s=H.leftPad(s,i.payloadSize),{read:n,privateParams:{d:s}}}case V.publicKey.eddsa:{const i=new Hn(r.oid);let s=H.readMPI(t.subarray(n));return n+=s.length+2,s=H.leftPad(s,i.payloadSize),{read:n,privateParams:{seed:s}}}default:throw new De("Unknown public key encryption algorithm.")}},parseEncSessionKeyParams:function(e,t){let r=0;switch(e){case V.publicKey.rsaEncrypt:case V.publicKey.rsaEncryptSign:return{c:H.readMPI(t.subarray(r))};case V.publicKey.elgamal:{const n=H.readMPI(t.subarray(r));return r+=n.length+2,{c1:n,c2:H.readMPI(t.subarray(r))}}case V.publicKey.ecdh:{const n=H.readMPI(t.subarray(r));r+=n.length+2;const i=new X1;return i.read(t.subarray(r)),{V:n,C:i}}default:throw new De("Unknown public key encryption algorithm.")}},serializeParams:function(e,t){const r=Object.keys(t).map(n=>{const i=t[n];return H.isUint8Array(i)?H.uint8ArrayToMPI(i):i.write()});return H.concatUint8Array(r)},generateParams:function(e,t,r){switch(e){case V.publicKey.rsaEncrypt:case V.publicKey.rsaEncryptSign:case V.publicKey.rsaSign:return be.rsa.generate(t,65537).then(({n,e:i,d:s,p:a,q:o,u:c})=>({privateParams:{d:s,p:a,q:o,u:c},publicParams:{n,e:i}}));case V.publicKey.ecdsa:return be.elliptic.generate(r).then(({oid:n,Q:i,secret:s})=>({privateParams:{d:s},publicParams:{oid:new ln(n),Q:i}}));case V.publicKey.eddsa:return be.elliptic.generate(r).then(({oid:n,Q:i,secret:s})=>({privateParams:{seed:s},publicParams:{oid:new ln(n),Q:i}}));case V.publicKey.ecdh:return be.elliptic.generate(r).then(({oid:n,Q:i,secret:s,hash:a,cipher:o})=>({privateParams:{d:s},publicParams:{oid:new ln(n),Q:i,kdfParams:new Z1({hash:a,cipher:o})}}));case V.publicKey.dsa:case V.publicKey.elgamal:throw Error("Unsupported algorithm for key generation.");default:throw Error("Unknown public key algorithm.")}},validateParams:async function(e,t,r){if(!t||!r)throw Error("Missing key parameters");switch(e){case V.publicKey.rsaEncrypt:case V.publicKey.rsaEncryptSign:case V.publicKey.rsaSign:{const{n,e:i}=t,{d:s,p:a,q:o,u:c}=r;return be.rsa.validateParams(n,i,s,a,o,c)}case V.publicKey.dsa:{const{p:n,q:i,g:s,y:a}=t,{x:o}=r;return be.dsa.validateParams(n,i,s,a,o)}case V.publicKey.elgamal:{const{p:n,g:i,y:s}=t,{x:a}=r;return be.elgamal.validateParams(n,i,s,a)}case V.publicKey.ecdsa:case V.publicKey.ecdh:{const n=be.elliptic[V.read(V.publicKey,e)],{oid:i,Q:s}=t,{d:a}=r;return n.validateParams(i,s,a)}case V.publicKey.eddsa:{const{oid:n,Q:i}=t,{seed:s}=r;return be.elliptic.eddsa.validateParams(n,i,s)}default:throw Error("Unknown public key algorithm.")}},getPrefixRandom:async function(e){const{blockSize:t}=ws(e),r=await wn(t),n=new Uint8Array([r[r.length-2],r[r.length-1]]);return H.concat([r,n])},generateSessionKey:function(e){const{keySize:t}=ws(e);return wn(t)},getAEADMode:function(e){const t=V.read(V.aead,e);return If[t]},getCipher:ws});const Q1=H.getWebCrypto(),qo=H.getNodeCrypto(),Di=qo?qo.getCiphers():[],to={idea:Di.includes("idea-cfb")?"idea-cfb":void 0,tripledes:Di.includes("des-ede3-cfb")?"des-ede3-cfb":void 0,cast5:Di.includes("cast5-cfb")?"cast5-cfb":void 0,blowfish:Di.includes("bf-cfb")?"bf-cfb":void 0,aes128:Di.includes("aes-128-cfb")?"aes-128-cfb":void 0,aes192:Di.includes("aes-192-cfb")?"aes-192-cfb":void 0,aes256:Di.includes("aes-256-cfb")?"aes-256-cfb":void 0};var x5=Object.freeze({__proto__:null,encrypt:async function(e,t,r,n,i){const s=V.read(V.symmetric,e);if(H.getNodeCrypto()&&to[s])return function(f,p,d,S){const k=V.read(V.symmetric,f),A=new qo.createCipheriv(to[k],p,S);return _e(d,C=>new Uint8Array(A.update(C)))}(e,t,r,n);if(s.substr(0,3)==="aes")return function(f,p,d,S,k){if(H.getWebCrypto()&&p.length!==24&&!H.isStream(d)&&d.length>=3e3*k.minBytesForWebCrypto)return async function(C,B,R,D){const L="AES-CBC",g=await Q1.importKey("raw",B,{name:L},!1,["encrypt"]),{blockSize:I}=ws(C),l=H.concatUint8Array([new Uint8Array(I),R]),m=new Uint8Array(await Q1.encrypt({name:L,iv:D},g,l)).subarray(0,R.length);return function(v,y){for(let w=0;w<v.length;w++)v[w]=v[w]^y[w]}(m,R),m}(f,p,d,S);const A=new vs(p,S);return _e(d,C=>A.aes.AES_Encrypt_process(C),()=>A.aes.AES_Encrypt_finish())}(e,t,r,n,i);const a=new Vi[s](t),o=a.blockSize,c=n.slice();let u=new Uint8Array;const h=f=>{f&&(u=H.concatUint8Array([u,f]));const p=new Uint8Array(u.length);let d,S=0;for(;f?u.length>=o:u.length;){const k=a.encrypt(c);for(d=0;d<o;d++)c[d]=u[d]^k[d],p[S++]=c[d];u=u.subarray(o)}return p.subarray(0,S)};return _e(r,h,h)},decrypt:async function(e,t,r,n){const i=V.read(V.symmetric,e);if(H.getNodeCrypto()&&to[i])return function(h,f,p,d){const S=V.read(V.symmetric,h),k=new qo.createDecipheriv(to[S],f,d);return _e(p,A=>new Uint8Array(k.update(A)))}(e,t,r,n);if(i.substr(0,3)==="aes")return function(h,f,p,d){if(H.isStream(p)){const S=new vs(f,d);return _e(p,k=>S.aes.AES_Decrypt_process(k),()=>S.aes.AES_Decrypt_finish())}return vs.decrypt(p,f,d)}(0,t,r,n);const s=new Vi[i](t),a=s.blockSize;let o=n,c=new Uint8Array;const u=h=>{h&&(c=H.concatUint8Array([c,h]));const f=new Uint8Array(c.length);let p,d=0;for(;h?c.length>=a:c.length;){const S=s.encrypt(o);for(o=c,p=0;p<a;p++)f[d++]=o[p]^S[p];c=c.subarray(a)}return f.subarray(0,d)};return _e(r,u,u)}});class $o{static encrypt(t,r,n){return new $o(r,n).encrypt(t)}static decrypt(t,r,n){return new $o(r,n).encrypt(t)}constructor(t,r,n){this.aes=n||new La(t,void 0,!1,"CTR"),delete this.aes.padding,this.AES_CTR_set_options(r)}encrypt(t){return Si(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())}decrypt(t){return Si(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())}AES_CTR_set_options(t,r,n){let{asm:i}=this.aes.acquire_asm();if(n!==void 0){if(n<8||n>48)throw new Bn("illegal counter size");let s=Math.pow(2,n)-1;i.set_mask(0,0,s/4294967296|0,0|s)}else n=48,i.set_mask(0,0,65535,4294967295);if(t===void 0)throw Error("nonce is required");{let s=t.length;if(!s||s>16)throw new Bn("illegal nonce size");let a=new DataView(new ArrayBuffer(16));new Uint8Array(a.buffer).set(t),i.set_nonce(a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12))}if(r!==void 0){if(r<0||r>=Math.pow(2,n))throw new Bn("illegal counter value");i.set_counter(0,0,r/4294967296|0,0|r)}}}class Wo{static encrypt(t,r,n=!0,i){return new Wo(r,i,n).encrypt(t)}static decrypt(t,r,n=!0,i){return new Wo(r,i,n).decrypt(t)}constructor(t,r,n=!0,i){this.aes=i||new La(t,r,n,"CBC")}encrypt(t){return Si(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())}decrypt(t){return Si(this.aes.AES_Decrypt_process(t),this.aes.AES_Decrypt_finish())}}const tl=H.getWebCrypto(),M5=H.getNodeCrypto();function el(e,t){const r=e.length-16;for(let n=0;n<16;n++)e[n+r]^=t[n];return e}const eo=new Uint8Array(16);async function T5(e){const t=await async function(i){return H.getWebCrypto()&&i.length!==24?(i=await tl.importKey("raw",i,{name:"AES-CBC",length:8*i.length},!1,["encrypt"]),async function(s){const a=await tl.encrypt({name:"AES-CBC",iv:eo,length:128},i,s);return new Uint8Array(a).subarray(0,a.byteLength-16)}):H.getNodeCrypto()?async function(s){const a=new M5.createCipheriv("aes-"+8*i.length+"-cbc",i,eo).update(s);return new Uint8Array(a)}:async function(s){return Wo.encrypt(s,i,!1,eo)}}(e),r=H.double(await t(eo)),n=H.double(r);return async function(i){return(await t(function(s,a,o){if(s.length&&s.length%16==0)return el(s,a);const c=new Uint8Array(s.length+(16-s.length%16));return c.set(s),c[s.length]=128,el(c,o)}(i,r,n))).subarray(-16)}}const rl=H.getWebCrypto(),R5=H.getNodeCrypto(),C5=H.getNodeBuffer(),nl=new Uint8Array(16),qu=new Uint8Array(16);qu[15]=1;const $u=new Uint8Array(16);async function I5(e){const t=await T5(e);return function(r,n){return t(H.concatUint8Array([r,n]))}}async function U5(e){return H.getWebCrypto()&&e.length!==24?(e=await rl.importKey("raw",e,{name:"AES-CTR",length:8*e.length},!1,["encrypt"]),async function(t,r){const n=await rl.encrypt({name:"AES-CTR",counter:r,length:128},e,t);return new Uint8Array(n)}):H.getNodeCrypto()?async function(t,r){const n=new R5.createCipheriv("aes-"+8*e.length+"-ctr",e,r),i=C5.concat([n.update(t),n.final()]);return new Uint8Array(i)}:async function(t,r){return $o.encrypt(t,e,r)}}async function Qs(e,t){if(e!==V.symmetric.aes128&&e!==V.symmetric.aes192&&e!==V.symmetric.aes256)throw Error("EAX mode supports only AES cipher");const[r,n]=await Promise.all([I5(t),U5(t)]);return{encrypt:async function(i,s,a){const[o,c]=await Promise.all([r(nl,s),r(qu,a)]),u=await n(i,o),h=await r($u,u);for(let f=0;f<16;f++)h[f]^=c[f]^o[f];return H.concatUint8Array([u,h])},decrypt:async function(i,s,a){if(i.length<16)throw Error("Invalid EAX ciphertext");const o=i.subarray(0,-16),c=i.subarray(-16),[u,h,f]=await Promise.all([r(nl,s),r(qu,a),r($u,o)]),p=f;for(let d=0;d<16;d++)p[d]^=h[d]^u[d];if(!H.equalsUint8Array(c,p))throw Error("Authentication tag mismatch");return await n(o,u)}}}$u[15]=2,Qs.getNonce=function(e,t){const r=e.slice();for(let n=0;n<t.length;n++)r[8+n]^=t[n];return r},Qs.blockLength=16,Qs.ivLength=16,Qs.tagLength=16;function il(e){let t=0;for(let r=1;(e&r)==0;r<<=1)t++;return t}function lr(e,t){for(let r=0;r<e.length;r++)e[r]^=t[r];return e}function ro(e,t){return lr(e.slice(),t)}const ou=new Uint8Array(16),D5=new Uint8Array([1]);async function ta(e,t){let r,n,i,s=0;function a(o,c,u,h){const f=c.length/16|0;(function(g,I){const l=H.nbits(Math.max(g.length,I.length)/16|0)-1;for(let m=s+1;m<=l;m++)i[m]=H.double(i[m-1]);s=l})(c,h);const p=H.concatUint8Array([ou.subarray(0,15-u.length),D5,u]),d=63&p[15];p[15]&=192;const S=r(p),k=H.concatUint8Array([S,ro(S.subarray(0,8),S.subarray(1,9))]),A=H.shiftRight(k.subarray(0+(d>>3),17+(d>>3)),8-(7&d)).subarray(1),C=new Uint8Array(16),B=new Uint8Array(c.length+16);let R,D=0;for(R=0;R<f;R++)lr(A,i[il(R+1)]),B.set(lr(o(ro(A,c)),A),D),lr(C,o===r?c:B.subarray(D)),c=c.subarray(16),D+=16;if(c.length){lr(A,i.x);const g=r(A);B.set(ro(c,g),D);const I=new Uint8Array(16);I.set(o===r?c:B.subarray(D,-16),0),I[c.length]=128,lr(C,I),D+=c.length}const L=lr(r(lr(lr(C,A),i.$)),function(g){if(!g.length)return ou;const I=g.length/16|0,l=new Uint8Array(16),m=new Uint8Array(16);for(let v=0;v<I;v++)lr(l,i[il(v+1)]),lr(m,r(ro(l,g))),g=g.subarray(16);if(g.length){lr(l,i.x);const v=new Uint8Array(16);v.set(g,0),v[g.length]=128,lr(v,l),lr(m,r(v))}return m}(h));return B.set(L,D),B}return function(o,c){const u=V.read(V.symmetric,o),h=new Vi[u](c);r=h.encrypt.bind(h),n=h.decrypt.bind(h);const f=r(ou),p=H.double(f);i=[],i[0]=H.double(p),i.x=f,i.$=p}(e,t),{encrypt:async function(o,c,u){return a(r,o,c,u)},decrypt:async function(o,c,u){if(o.length<16)throw Error("Invalid OCB ciphertext");const h=o.subarray(-16);o=o.subarray(0,-16);const f=a(n,o,c,u);if(H.equalsUint8Array(h,f.subarray(-16)))return f.subarray(0,-16);throw Error("Authentication tag mismatch")}}}ta.getNonce=function(e,t){const r=e.slice();for(let n=0;n<t.length;n++)r[7+n]^=t[n];return r},ta.blockLength=16,ta.ivLength=15,ta.tagLength=16;class ji{constructor(t,r,n,i=16,s){this.tagSize=i,this.gamma0=0,this.counter=1,this.aes=s||new La(t,void 0,!1,"CTR");let{asm:a,heap:o}=this.aes.acquire_asm();if(a.gcm_init(),this.tagSize<4||this.tagSize>16)throw new Bn("illegal tagSize value");const c=r.length||0,u=new Uint8Array(16);c!==12?(this._gcm_mac_process(r),o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=0,o[11]=c>>>29,o[12]=c>>>21&255,o[13]=c>>>13&255,o[14]=c>>>5&255,o[15]=c<<3&255,a.mac(ne.MAC.GCM,ne.HEAP_DATA,16),a.get_iv(ne.HEAP_DATA),a.set_iv(0,0,0,0),u.set(o.subarray(0,16))):(u.set(r),u[15]=1);const h=new DataView(u.buffer);if(this.gamma0=h.getUint32(12),a.set_nonce(h.getUint32(0),h.getUint32(4),h.getUint32(8),0),a.set_mask(0,0,0,4294967295),n!==void 0){if(n.length>68719476704)throw new Bn("illegal adata length");n.length?(this.adata=n,this._gcm_mac_process(n)):this.adata=void 0}else this.adata=void 0;if(this.counter<1||this.counter>4294967295)throw new RangeError("counter must be a positive 32-bit integer");a.set_counter(0,0,0,this.gamma0+this.counter|0)}static encrypt(t,r,n,i,s){return new ji(r,n,i,s).encrypt(t)}static decrypt(t,r,n,i,s){return new ji(r,n,i,s).decrypt(t)}encrypt(t){return this.AES_GCM_encrypt(t)}decrypt(t){return this.AES_GCM_decrypt(t)}AES_GCM_Encrypt_process(t){let r=0,n=t.length||0,{asm:i,heap:s}=this.aes.acquire_asm(),a=this.counter,o=this.aes.pos,c=this.aes.len,u=0,h=c+n&-16,f=0;if((a-1<<4)+c+n>68719476704)throw new RangeError("counter overflow");const p=new Uint8Array(h);for(;n>0;)f=Fi(s,o+c,t,r,n),c+=f,r+=f,n-=f,f=i.cipher(ne.ENC.CTR,ne.HEAP_DATA+o,c),f=i.mac(ne.MAC.GCM,ne.HEAP_DATA+o,f),f&&p.set(s.subarray(o,o+f),u),a+=f>>>4,u+=f,f<c?(o+=f,c-=f):(o=0,c=0);return this.counter=a,this.aes.pos=o,this.aes.len=c,p}AES_GCM_Encrypt_finish(){let{asm:t,heap:r}=this.aes.acquire_asm(),n=this.counter,i=this.tagSize,s=this.adata,a=this.aes.pos,o=this.aes.len;const c=new Uint8Array(o+i);t.cipher(ne.ENC.CTR,ne.HEAP_DATA+a,o+15&-16),o&&c.set(r.subarray(a,a+o));let u=o;for(;15&u;u++)r[a+u]=0;t.mac(ne.MAC.GCM,ne.HEAP_DATA+a,u);const h=s!==void 0?s.length:0,f=(n-1<<4)+o;return r[0]=0,r[1]=0,r[2]=0,r[3]=h>>>29,r[4]=h>>>21,r[5]=h>>>13&255,r[6]=h>>>5&255,r[7]=h<<3&255,r[8]=r[9]=r[10]=0,r[11]=f>>>29,r[12]=f>>>21&255,r[13]=f>>>13&255,r[14]=f>>>5&255,r[15]=f<<3&255,t.mac(ne.MAC.GCM,ne.HEAP_DATA,16),t.get_iv(ne.HEAP_DATA),t.set_counter(0,0,0,this.gamma0),t.cipher(ne.ENC.CTR,ne.HEAP_DATA,16),c.set(r.subarray(0,i),o),this.counter=1,this.aes.pos=0,this.aes.len=0,c}AES_GCM_Decrypt_process(t){let r=0,n=t.length||0,{asm:i,heap:s}=this.aes.acquire_asm(),a=this.counter,o=this.tagSize,c=this.aes.pos,u=this.aes.len,h=0,f=u+n>o?u+n-o&-16:0,p=u+n-f,d=0;if((a-1<<4)+u+n>68719476704)throw new RangeError("counter overflow");const S=new Uint8Array(f);for(;n>p;)d=Fi(s,c+u,t,r,n-p),u+=d,r+=d,n-=d,d=i.mac(ne.MAC.GCM,ne.HEAP_DATA+c,d),d=i.cipher(ne.DEC.CTR,ne.HEAP_DATA+c,d),d&&S.set(s.subarray(c,c+d),h),a+=d>>>4,h+=d,c=0,u=0;return n>0&&(u+=Fi(s,0,t,r,n)),this.counter=a,this.aes.pos=c,this.aes.len=u,S}AES_GCM_Decrypt_finish(){let{asm:t,heap:r}=this.aes.acquire_asm(),n=this.tagSize,i=this.adata,s=this.counter,a=this.aes.pos,o=this.aes.len,c=o-n;if(o<n)throw new Ku("authentication tag not found");const u=new Uint8Array(c),h=new Uint8Array(r.subarray(a+c,a+o));let f=c;for(;15&f;f++)r[a+f]=0;t.mac(ne.MAC.GCM,ne.HEAP_DATA+a,f),t.cipher(ne.DEC.CTR,ne.HEAP_DATA+a,f),c&&u.set(r.subarray(a,a+c));const p=i!==void 0?i.length:0,d=(s-1<<4)+o-n;r[0]=0,r[1]=0,r[2]=0,r[3]=p>>>29,r[4]=p>>>21,r[5]=p>>>13&255,r[6]=p>>>5&255,r[7]=p<<3&255,r[8]=r[9]=r[10]=0,r[11]=d>>>29,r[12]=d>>>21&255,r[13]=d>>>13&255,r[14]=d>>>5&255,r[15]=d<<3&255,t.mac(ne.MAC.GCM,ne.HEAP_DATA,16),t.get_iv(ne.HEAP_DATA),t.set_counter(0,0,0,this.gamma0),t.cipher(ne.ENC.CTR,ne.HEAP_DATA,16);let S=0;for(let k=0;k<n;++k)S|=h[k]^r[k];if(S)throw new Fu("data integrity check failed");return this.counter=1,this.aes.pos=0,this.aes.len=0,u}AES_GCM_decrypt(t){const r=this.AES_GCM_Decrypt_process(t),n=this.AES_GCM_Decrypt_finish(),i=new Uint8Array(r.length+n.length);return r.length&&i.set(r),n.length&&i.set(n,r.length),i}AES_GCM_encrypt(t){const r=this.AES_GCM_Encrypt_process(t),n=this.AES_GCM_Encrypt_finish(),i=new Uint8Array(r.length+n.length);return r.length&&i.set(r),n.length&&i.set(n,r.length),i}_gcm_mac_process(t){let{asm:r,heap:n}=this.aes.acquire_asm(),i=0,s=t.length||0,a=0;for(;s>0;){for(a=Fi(n,0,t,i,s),i+=a,s-=a;15&a;)n[a++]=0;r.mac(ne.MAC.GCM,ne.HEAP_DATA,a)}}}const cu=H.getWebCrypto(),sl=H.getNodeCrypto(),al=H.getNodeBuffer();async function fs(e,t){if(e!==V.symmetric.aes128&&e!==V.symmetric.aes192&&e!==V.symmetric.aes256)throw Error("GCM mode supports only AES cipher");if(H.getWebCrypto()&&t.length!==24){const r=await cu.importKey("raw",t,{name:"AES-GCM"},!1,["encrypt","decrypt"]);return{encrypt:async function(n,i,s=new Uint8Array){if(!n.length)return ji.encrypt(n,t,i,s);const a=await cu.encrypt({name:"AES-GCM",iv:i,additionalData:s,tagLength:128},r,n);return new Uint8Array(a)},decrypt:async function(n,i,s=new Uint8Array){if(n.length===16)return ji.decrypt(n,t,i,s);const a=await cu.decrypt({name:"AES-GCM",iv:i,additionalData:s,tagLength:128},r,n);return new Uint8Array(a)}}}return H.getNodeCrypto()?{encrypt:async function(r,n,i=new Uint8Array){const s=new sl.createCipheriv("aes-"+8*t.length+"-gcm",t,n);s.setAAD(i);const a=al.concat([s.update(r),s.final(),s.getAuthTag()]);return new Uint8Array(a)},decrypt:async function(r,n,i=new Uint8Array){const s=new sl.createDecipheriv("aes-"+8*t.length+"-gcm",t,n);s.setAAD(i),s.setAuthTag(r.slice(r.length-16,r.length));const a=al.concat([s.update(r.slice(0,r.length-16)),s.final()]);return new Uint8Array(a)}}:{encrypt:async function(r,n,i){return ji.encrypt(r,t,n,i)},decrypt:async function(r,n,i){return ji.decrypt(r,t,n,i)}}}fs.getNonce=function(e,t){const r=e.slice();for(let n=0;n<t.length;n++)r[4+n]^=t[n];return r},fs.blockLength=16,fs.ivLength=12,fs.tagLength=16;var If={cfb:x5,gcm:fs,experimentalGCM:fs,eax:Qs,ocb:ta},O5=Object.freeze({__proto__:null,parseSignatureParams:function(e,t){let r=0;switch(e){case V.publicKey.rsaEncryptSign:case V.publicKey.rsaEncrypt:case V.publicKey.rsaSign:return{s:H.readMPI(t.subarray(r))};case V.publicKey.dsa:case V.publicKey.ecdsa:{const n=H.readMPI(t.subarray(r));return r+=n.length+2,{r:n,s:H.readMPI(t.subarray(r))}}case V.publicKey.eddsa:{let n=H.readMPI(t.subarray(r));r+=n.length+2,n=H.leftPad(n,32);let i=H.readMPI(t.subarray(r));return i=H.leftPad(i,32),{r:n,s:i}}default:throw new De("Unknown signature algorithm.")}},verify:async function(e,t,r,n,i,s){switch(e){case V.publicKey.rsaEncryptSign:case V.publicKey.rsaEncrypt:case V.publicKey.rsaSign:{const{n:a,e:o}=n,c=H.leftPad(r.s,a.length);return be.rsa.verify(t,i,c,a,o,s)}case V.publicKey.dsa:{const{g:a,p:o,q:c,y:u}=n,{r:h,s:f}=r;return be.dsa.verify(t,h,f,s,a,o,c,u)}case V.publicKey.ecdsa:{const{oid:a,Q:o}=n,c=new be.elliptic.Curve(a).payloadSize,u=H.leftPad(r.r,c),h=H.leftPad(r.s,c);return be.elliptic.ecdsa.verify(a,t,{r:u,s:h},i,o,s)}case V.publicKey.eddsa:{const{oid:a,Q:o}=n;return be.elliptic.eddsa.verify(a,t,r,i,o,s)}default:throw Error("Unknown signature algorithm.")}},sign:async function(e,t,r,n,i,s){if(!r||!n)throw Error("Missing key parameters");switch(e){case V.publicKey.rsaEncryptSign:case V.publicKey.rsaEncrypt:case V.publicKey.rsaSign:{const{n:a,e:o}=r,{d:c,p:u,q:h,u:f}=n;return{s:await be.rsa.sign(t,i,a,o,c,u,h,f,s)}}case V.publicKey.dsa:{const{g:a,p:o,q:c}=r,{x:u}=n;return be.dsa.sign(t,s,a,o,c,u)}case V.publicKey.elgamal:throw Error("Signing with Elgamal is not defined in the OpenPGP standard.");case V.publicKey.ecdsa:{const{oid:a,Q:o}=r,{d:c}=n;return be.elliptic.ecdsa.sign(a,t,i,o,c,s)}case V.publicKey.eddsa:{const{oid:a,Q:o}=r,{seed:c}=n;return be.elliptic.eddsa.sign(a,t,i,o,c,s)}default:throw Error("Unknown signature algorithm.")}}});const Ct={cipher:Vi,hash:ks,mode:If,publicKey:be,signature:O5,random:u5,pkcs1:h5,pkcs5:S5,aesKW:A5};Object.assign(Ct,P5);var $a=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function Uf(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)}const Df={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(let s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){let t,r,n,i,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;const a=new Uint8Array(n);for(i=0,t=0,r=e.length;t<r;t++)s=e[t],a.set(s,i),i+=s.length;return a}},Of={arraySet:function(e,t,r,n,i){for(let s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};let mn=$a?Uint8Array:Array,Ur=$a?Uint16Array:Array,Ho=$a?Int32Array:Array,Nf=$a?Df.flattenChunks:Of.flattenChunks,An=$a?Df.arraySet:Of.arraySet;function Ns(e){let t=e.length;for(;--t>=0;)e[t]=0}const Wu=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ao=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N5=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ol=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Un=Array(576);Ns(Un);const da=Array(60);Ns(da);const Pa=Array(512);Ns(Pa);const xa=Array(256);Ns(xa);const M0=Array(29);Ns(M0);const Go=Array(30);function uu(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let cl,ul,ll;function lu(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Bf(e){return e<256?Pa[e]:Pa[256+(e>>>7)]}function Ma(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function fr(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Ma(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function fn(e,t,r){fr(e,r[2*t],r[2*t+1])}function zf(e,t){let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1}function Kf(e,t,r){const n=Array(16);let i,s,a=0;for(i=1;i<=15;i++)n[i]=a=a+r[i-1]<<1;for(s=0;s<=t;s++){const o=e[2*s+1];o!==0&&(e[2*s]=zf(n[o]++,o))}}function Ff(e){let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Lf(e){e.bi_valid>8?Ma(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function hl(e,t,r,n){const i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function hu(e,t,r){const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&hl(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!hl(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function fl(e,t,r){let n,i,s,a,o=0;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,n===0?fn(e,i,t):(s=xa[i],fn(e,s+256+1,t),a=Wu[s],a!==0&&(i-=M0[s],fr(e,i,a)),n--,s=Bf(n),fn(e,s,r),a=Ao[s],a!==0&&(n-=Go[s],fr(e,n,a)));while(o<e.last_lit);fn(e,256,t)}function fu(e,t){const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let a,o,c,u=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<s;a++)r[2*a]!==0?(e.heap[++e.heap_len]=u=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=u,a=e.heap_len>>1;a>=1;a--)hu(e,r,a);c=s;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],hu(e,r,1),o=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=o,r[2*c]=r[2*a]+r[2*o],e.depth[c]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1,r[2*a+1]=r[2*o+1]=c,e.heap[1]=c++,hu(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(h,f){const p=f.dyn_tree,d=f.max_code,S=f.stat_desc.static_tree,k=f.stat_desc.has_stree,A=f.stat_desc.extra_bits,C=f.stat_desc.extra_base,B=f.stat_desc.max_length;let R,D,L,g,I,l,m=0;for(g=0;g<=15;g++)h.bl_count[g]=0;for(p[2*h.heap[h.heap_max]+1]=0,R=h.heap_max+1;R<573;R++)D=h.heap[R],g=p[2*p[2*D+1]+1]+1,g>B&&(g=B,m++),p[2*D+1]=g,D>d||(h.bl_count[g]++,I=0,D>=C&&(I=A[D-C]),l=p[2*D],h.opt_len+=l*(g+I),k&&(h.static_len+=l*(S[2*D+1]+I)));if(m!==0){do{for(g=B-1;h.bl_count[g]===0;)g--;h.bl_count[g]--,h.bl_count[g+1]+=2,h.bl_count[B]--,m-=2}while(m>0);for(g=B;g!==0;g--)for(D=h.bl_count[g];D!==0;)L=h.heap[--R],L>d||(p[2*L+1]!==g&&(h.opt_len+=(g-p[2*L+1])*p[2*L],p[2*L+1]=g),D--)}}(e,t),Kf(r,u,e.bl_count)}function dl(e,t,r){let n,i,s=-1,a=t[1],o=0,c=7,u=4;for(a===0&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++o<c&&i===a||(o<u?e.bl_tree[2*i]+=o:i!==0?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=i,a===0?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))}function pl(e,t,r){let n,i,s=-1,a=t[1],o=0,c=7,u=4;for(a===0&&(c=138,u=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++o<c&&i===a)){if(o<u)do fn(e,i,e.bl_tree);while(--o!=0);else i!==0?(i!==s&&(fn(e,i,e.bl_tree),o--),fn(e,16,e.bl_tree),fr(e,o-3,2)):o<=10?(fn(e,17,e.bl_tree),fr(e,o-3,3)):(fn(e,18,e.bl_tree),fr(e,o-11,7));o=0,s=i,a===0?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4)}}Ns(Go);let ml=!1;function B5(e){ml||(function(){let t,r,n,i,s;const a=Array(16);for(n=0,i=0;i<28;i++)for(M0[i]=n,t=0;t<1<<Wu[i];t++)xa[n++]=i;for(xa[n-1]=i,s=0,i=0;i<16;i++)for(Go[i]=s,t=0;t<1<<Ao[i];t++)Pa[s++]=i;for(s>>=7;i<30;i++)for(Go[i]=s<<7,t=0;t<1<<Ao[i]-7;t++)Pa[256+s++]=i;for(r=0;r<=15;r++)a[r]=0;for(t=0;t<=143;)Un[2*t+1]=8,t++,a[8]++;for(;t<=255;)Un[2*t+1]=9,t++,a[9]++;for(;t<=279;)Un[2*t+1]=7,t++,a[7]++;for(;t<=287;)Un[2*t+1]=8,t++,a[8]++;for(Kf(Un,287,a),t=0;t<30;t++)da[2*t+1]=5,da[2*t]=zf(t,5);cl=new uu(Un,Wu,257,286,15),ul=new uu(da,Ao,0,30,15),ll=new uu([],N5,0,19,7)}(),ml=!0),e.l_desc=new lu(e.dyn_ltree,cl),e.d_desc=new lu(e.dyn_dtree,ul),e.bl_desc=new lu(e.bl_tree,ll),e.bi_buf=0,e.bi_valid=0,Ff(e)}function jf(e,t,r,n){fr(e,0+(n?1:0),3),function(i,s,a,o){Lf(i),o&&(Ma(i,a),Ma(i,~a)),An(i.pending_buf,i.window,s,a,i.pending),i.pending+=a}(e,t,r,!0)}function z5(e){fr(e,2,3),fn(e,256,Un),function(t){t.bi_valid===16?(Ma(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(e)}function K5(e,t,r,n){let i,s,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=function(o){let c,u=4093624447;for(c=0;c<=31;c++,u>>>=1)if(1&u&&o.dyn_ltree[2*c]!==0)return 0;if(o.dyn_ltree[18]!==0||o.dyn_ltree[20]!==0||o.dyn_ltree[26]!==0)return 1;for(c=32;c<256;c++)if(o.dyn_ltree[2*c]!==0)return 1;return 0}(e)),fu(e,e.l_desc),fu(e,e.d_desc),a=function(o){let c;for(dl(o,o.dyn_ltree,o.l_desc.max_code),dl(o,o.dyn_dtree,o.d_desc.max_code),fu(o,o.bl_desc),c=18;c>=3&&o.bl_tree[2*ol[c]+1]===0;c--);return o.opt_len+=3*(c+1)+5+5+4,c}(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&t!==-1?jf(e,t,r,n):e.strategy===4||s===i?(fr(e,2+(n?1:0),3),fl(e,Un,da)):(fr(e,4+(n?1:0),3),function(o,c,u,h){let f;for(fr(o,c-257,5),fr(o,u-1,5),fr(o,h-4,4),f=0;f<h;f++)fr(o,o.bl_tree[2*ol[f]+1],3);pl(o,o.dyn_ltree,c-1),pl(o,o.dyn_dtree,u-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),fl(e,e.dyn_ltree,e.dyn_dtree)),Ff(e),n&&Lf(e)}function vi(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,t===0?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(xa[r]+256+1)]++,e.dyn_dtree[2*Bf(t)]++),e.last_lit===e.lit_bufsize-1}function Ta(e,t,r,n){let i=65535&e|0,s=e>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+t[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0}const F5=function(){let e;const t=[];for(let r=0;r<256;r++){e=r;for(let n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();function ze(e,t,r,n){const i=F5,s=n+r;e^=-1;for(let a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}var Ra={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function mi(e,t){return e.msg=Ra[t],t}function yl(e){return(e<<1)-(e>4?9:0)}function hi(e){let t=e.length;for(;--t>=0;)e[t]=0}function ai(e){const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(An(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function qe(e,t){K5(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ai(e.strm)}function he(e,t){e.pending_buf[e.pending++]=t}function qs(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L5(e,t,r,n){let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,An(t,e.input,e.next_in,i,r),e.state.wrap===1?e.adler=Ta(e.adler,t,i,r):e.state.wrap===2&&(e.adler=ze(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function qf(e,t){let r,n,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match;const c=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,u=e.window,h=e.w_mask,f=e.prev,p=e.strstart+258;let d=u[s+a-1],S=u[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do if(r=t,u[r+a]===S&&u[r+a-1]===d&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do;while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<p);if(n=258-(p-s),s=p-258,n>a){if(e.match_start=t,a=n,n>=o)break;d=u[s+a-1],S=u[s+a]}}while((t=f[t&h])>c&&--i!=0);return a<=e.lookahead?a:e.lookahead}function Yi(e){const t=e.w_size;let r,n,i,s,a;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)){An(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);s+=t}if(e.strm.avail_in===0)break;if(n=L5(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=n,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+3-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&e.strm.avail_in!==0)}function du(e,t){let r,n;for(;;){if(e.lookahead<262){if(Yi(e),e.lookahead<262&&t===0)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-262&&(e.match_length=qf(e,r)),e.match_length>=3)if(n=vi(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=vi(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(qe(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,t===4?(qe(e,!0),e.strm.avail_out===0?3:4):e.last_lit&&(qe(e,!1),e.strm.avail_out===0)?1:2}function cs(e,t){let r,n,i;for(;;){if(e.lookahead<262){if(Yi(e),e.lookahead<262&&t===0)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=qf(e,r),e.match_length<=5&&(e.strategy===1||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=vi(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(qe(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(n=vi(e,0,e.window[e.strstart-1]),n&&qe(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=vi(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===4?(qe(e,!0),e.strm.avail_out===0?3:4):e.last_lit&&(qe(e,!1),e.strm.avail_out===0)?1:2}class nn{constructor(t,r,n,i,s){this.good_length=t,this.max_lazy=r,this.nice_length=n,this.max_chain=i,this.func=s}}const ea=[new nn(0,0,0,0,function(e,t){let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Yi(e),e.lookahead===0&&t===0)return 1;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,qe(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-262&&(qe(e,!1),e.strm.avail_out===0))return 1}return e.insert=0,t===4?(qe(e,!0),e.strm.avail_out===0?3:4):(e.strstart>e.block_start&&(qe(e,!1),e.strm.avail_out),1)}),new nn(4,4,8,4,du),new nn(4,5,16,8,du),new nn(4,6,32,32,du),new nn(4,4,16,16,cs),new nn(8,16,32,32,cs),new nn(8,16,128,128,cs),new nn(8,32,128,256,cs),new nn(32,128,258,1024,cs),new nn(32,258,258,4096,cs)];class j5{constructor(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ur(1146),this.dyn_dtree=new Ur(122),this.bl_tree=new Ur(78),hi(this.dyn_ltree),hi(this.dyn_dtree),hi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ur(16),this.heap=new Ur(573),hi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ur(573),hi(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}}function q5(e){const t=function(r){let n;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=2,n=r.state,n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:113,r.adler=n.wrap===2?0:1,n.last_flush=0,B5(n),0):mi(r,-2)}(e);return t===0&&function(r){r.window_size=2*r.w_size,hi(r.head),r.max_lazy_match=ea[r.level].max_lazy,r.good_match=ea[r.level].good_length,r.nice_match=ea[r.level].nice_length,r.max_chain_length=ea[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0}(e.state),t}function $5(e,t){let r,n,i,s;if(!e||!e.state||t>5||t<0)return e?mi(e,-2):-2;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===666&&t!==4)return mi(e,e.avail_out===0?-5:-2);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===42)if(n.wrap===2)e.adler=0,he(n,31),he(n,139),he(n,8),n.gzhead?(he(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),he(n,255&n.gzhead.time),he(n,n.gzhead.time>>8&255),he(n,n.gzhead.time>>16&255),he(n,n.gzhead.time>>24&255),he(n,n.level===9?2:n.strategy>=2||n.level<2?4:0),he(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(he(n,255&n.gzhead.extra.length),he(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ze(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(he(n,0),he(n,0),he(n,0),he(n,0),he(n,0),he(n,n.level===9?2:n.strategy>=2||n.level<2?4:0),he(n,3),n.status=113);else{let o=8+(n.w_bits-8<<4)<<8,c=-1;c=n.strategy>=2||n.level<2?0:n.level<6?1:n.level===6?2:3,o|=c<<6,n.strstart!==0&&(o|=32),o+=31-o%31,n.status=113,qs(n,o),n.strstart!==0&&(qs(n,e.adler>>>16),qs(n,65535&e.adler)),e.adler=1}if(n.status===69)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=ze(e.adler,n.pending_buf,n.pending-i,i)),ai(e),i=n.pending,n.pending!==n.pending_buf_size));)he(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=ze(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(n.status===73)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=ze(e.adler,n.pending_buf,n.pending-i,i)),ai(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}s=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,he(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=ze(e.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.gzindex=0,n.status=91)}else n.status=91;if(n.status===91)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=ze(e.adler,n.pending_buf,n.pending-i,i)),ai(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}s=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,he(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=ze(e.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.status=103)}else n.status=103;if(n.status===103&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&ai(e),n.pending+2<=n.pending_buf_size&&(he(n,255&e.adler),he(n,e.adler>>8&255),e.adler=0,n.status=113)):n.status=113),n.pending!==0){if(ai(e),e.avail_out===0)return n.last_flush=-1,0}else if(e.avail_in===0&&yl(t)<=yl(r)&&t!==4)return mi(e,-5);if(n.status===666&&e.avail_in!==0)return mi(e,-5);if(e.avail_in!==0||n.lookahead!==0||t!==0&&n.status!==666){var a=n.strategy===2?function(o,c){let u;for(;;){if(o.lookahead===0&&(Yi(o),o.lookahead===0)){if(c===0)return 1;break}if(o.match_length=0,u=vi(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,u&&(qe(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,c===4?(qe(o,!0),o.strm.avail_out===0?3:4):o.last_lit&&(qe(o,!1),o.strm.avail_out===0)?1:2}(n,t):n.strategy===3?function(o,c){let u,h,f,p;const d=o.window;for(;;){if(o.lookahead<=258){if(Yi(o),o.lookahead<=258&&c===0)return 1;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=3&&o.strstart>0&&(f=o.strstart-1,h=d[f],h===d[++f]&&h===d[++f]&&h===d[++f])){p=o.strstart+258;do;while(h===d[++f]&&h===d[++f]&&h===d[++f]&&h===d[++f]&&h===d[++f]&&h===d[++f]&&h===d[++f]&&h===d[++f]&&f<p);o.match_length=258-(p-f),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=3?(u=vi(o,1,o.match_length-3),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(u=vi(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),u&&(qe(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,c===4?(qe(o,!0),o.strm.avail_out===0?3:4):o.last_lit&&(qe(o,!1),o.strm.avail_out===0)?1:2}(n,t):ea[n.level].func(n,t);if(a!==3&&a!==4||(n.status=666),a===1||a===3)return e.avail_out===0&&(n.last_flush=-1),0;if(a===2&&(t===1?z5(n):t!==5&&(jf(n,0,0,!1),t===3&&(hi(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),ai(e),e.avail_out===0))return n.last_flush=-1,0}return t!==4?0:n.wrap<=0?1:(n.wrap===2?(he(n,255&e.adler),he(n,e.adler>>8&255),he(n,e.adler>>16&255),he(n,e.adler>>24&255),he(n,255&e.total_in),he(n,e.total_in>>8&255),he(n,e.total_in>>16&255),he(n,e.total_in>>24&255)):(qs(n,e.adler>>>16),qs(n,65535&e.adler)),ai(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?0:1)}try{String.fromCharCode.call(null,0)}catch{}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const Hu=new mn(256);for(let e=0;e<256;e++)Hu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;function Gu(e){let t,r,n,i,s=0;const a=e.length;for(n=0;n<a;n++)t=e.charCodeAt(n),(64512&t)==55296&&n+1<a&&(r=e.charCodeAt(n+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),n++)),s+=t<128?1:t<2048?2:t<65536?3:4;const o=new mn(s);for(i=0,n=0;i<s;n++)t=e.charCodeAt(n),(64512&t)==55296&&n+1<a&&(r=e.charCodeAt(n+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),n++)),t<128?o[i++]=t:t<2048?(o[i++]=192|t>>>6,o[i++]=128|63&t):t<65536?(o[i++]=224|t>>>12,o[i++]=128|t>>>6&63,o[i++]=128|63&t):(o[i++]=240|t>>>18,o[i++]=128|t>>>12&63,o[i++]=128|t>>>6&63,o[i++]=128|63&t);return o}Hu[254]=Hu[254]=1;class $f{constructor(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}}class Vu{constructor(t){this.options={level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,...t||{}};const r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $f,this.strm.avail_out=0;var n,i,s=function(a,o,c,u,h,f){if(!a)return-2;let p=1;if(o===-1&&(o=6),u<0?(p=0,u=-u):u>15&&(p=2,u-=16),h<1||h>9||c!==8||u<8||u>15||o<0||o>9||f<0||f>4)return mi(a,-2);u===8&&(u=9);const d=new j5;return a.state=d,d.strm=a,d.wrap=p,d.gzhead=null,d.w_bits=u,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=h+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+3-1)/3),d.window=new mn(2*d.w_size),d.head=new Ur(d.hash_size),d.prev=new Ur(d.w_size),d.lit_bufsize=1<<h+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new mn(d.pending_buf_size),d.d_buf=1*d.lit_bufsize,d.l_buf=3*d.lit_bufsize,d.level=o,d.strategy=f,d.method=c,q5(a)}(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(s!==0)throw Error(Ra[s]);if(r.header&&(n=this.strm,i=r.header,n&&n.state&&(n.state.wrap!==2||(n.state.gzhead=i))),r.dictionary){let a;if(a=typeof r.dictionary=="string"?Gu(r.dictionary):r.dictionary instanceof ArrayBuffer?new Uint8Array(r.dictionary):r.dictionary,(s=function(o,c){let u,h,f,p,d,S,k,A,C=c.length;if(!o||!o.state||(u=o.state,p=u.wrap,p===2||p===1&&u.status!==42||u.lookahead))return-2;for(p===1&&(o.adler=Ta(o.adler,c,C,0)),u.wrap=0,C>=u.w_size&&(p===0&&(hi(u.head),u.strstart=0,u.block_start=0,u.insert=0),A=new mn(u.w_size),An(A,c,C-u.w_size,u.w_size,0),c=A,C=u.w_size),d=o.avail_in,S=o.next_in,k=o.input,o.avail_in=C,o.next_in=0,o.input=c,Yi(u);u.lookahead>=3;){h=u.strstart,f=u.lookahead-2;do u.ins_h=(u.ins_h<<u.hash_shift^u.window[h+3-1])&u.hash_mask,u.prev[h&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=h,h++;while(--f);u.strstart=h,u.lookahead=2,Yi(u)}return u.strstart+=u.lookahead,u.block_start=u.strstart,u.insert=u.lookahead,u.lookahead=0,u.match_length=u.prev_length=2,u.match_available=0,o.next_in=S,o.input=k,o.avail_in=d,u.wrap=p,0}(this.strm,a))!==0)throw Error(Ra[s]);this._dict_set=!0}}push(t,r){const{strm:n,options:{chunkSize:i}}=this;var s,a;if(this.ended)return!1;a=r===~~r?r:r===!0?4:0,typeof t=="string"?n.input=Gu(t):t instanceof ArrayBuffer?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new mn(i),n.next_out=0,n.avail_out=i),(s=$5(n,a))!==1&&s!==0)return this.onEnd(s),this.ended=!0,!1;n.avail_out!==0&&(n.avail_in!==0||a!==4&&a!==2)||this.onData(Uf(n.output,n.next_out))}while((n.avail_in>0||n.avail_out===0)&&s!==1);return a===4?(s=function(o){let c;return o&&o.state?(c=o.state.status,c!==42&&c!==69&&c!==73&&c!==91&&c!==103&&c!==113&&c!==666?mi(o,-2):(o.state=null,c===113?mi(o,-3):0)):-2}(this.strm),this.onEnd(s),this.ended=!0,s===0):a!==2||(this.onEnd(0),n.avail_out=0,!0)}onData(t){this.chunks.push(t)}onEnd(t){t===0&&(this.result=Nf(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg}}function W5(e,t){let r,n,i,s,a,o,c,u,h,f;const p=e.state;r=e.next_in;const d=e.input,S=r+(e.avail_in-5);n=e.next_out;const k=e.output,A=n-(t-e.avail_out),C=n+(e.avail_out-257),B=p.dmax,R=p.wsize,D=p.whave,L=p.wnext,g=p.window;i=p.hold,s=p.bits;const I=p.lencode,l=p.distcode,m=(1<<p.lenbits)-1,v=(1<<p.distbits)-1;t:do{s<15&&(i+=d[r++]<<s,s+=8,i+=d[r++]<<s,s+=8),a=I[i&m];e:for(;;){if(o=a>>>24,i>>>=o,s-=o,o=a>>>16&255,o===0)k[n++]=65535&a;else{if(!(16&o)){if((64&o)==0){a=I[(65535&a)+(i&(1<<o)-1)];continue e}if(32&o){p.mode=12;break t}e.msg="invalid literal/length code",p.mode=30;break t}c=65535&a,o&=15,o&&(s<o&&(i+=d[r++]<<s,s+=8),c+=i&(1<<o)-1,i>>>=o,s-=o),s<15&&(i+=d[r++]<<s,s+=8,i+=d[r++]<<s,s+=8),a=l[i&v];r:for(;;){if(o=a>>>24,i>>>=o,s-=o,o=a>>>16&255,!(16&o)){if((64&o)==0){a=l[(65535&a)+(i&(1<<o)-1)];continue r}e.msg="invalid distance code",p.mode=30;break t}if(u=65535&a,o&=15,s<o&&(i+=d[r++]<<s,s+=8,s<o&&(i+=d[r++]<<s,s+=8)),u+=i&(1<<o)-1,u>B){e.msg="invalid distance too far back",p.mode=30;break t}if(i>>>=o,s-=o,o=n-A,u>o){if(o=u-o,o>D&&p.sane){e.msg="invalid distance too far back",p.mode=30;break t}if(h=0,f=g,L===0){if(h+=R-o,o<c){c-=o;do k[n++]=g[h++];while(--o);h=n-u,f=k}}else if(L<o){if(h+=R+L-o,o-=L,o<c){c-=o;do k[n++]=g[h++];while(--o);if(h=0,L<c){o=L,c-=o;do k[n++]=g[h++];while(--o);h=n-u,f=k}}}else if(h+=L-o,o<c){c-=o;do k[n++]=g[h++];while(--o);h=n-u,f=k}for(;c>2;)k[n++]=f[h++],k[n++]=f[h++],k[n++]=f[h++],c-=3;c&&(k[n++]=f[h++],c>1&&(k[n++]=f[h++]))}else{h=n-u;do k[n++]=k[h++],k[n++]=k[h++],k[n++]=k[h++],c-=3;while(c>2);c&&(k[n++]=k[h++],c>1&&(k[n++]=k[h++]))}break}}break}}while(r<S&&n<C);c=s>>3,r-=c,s-=c<<3,i&=(1<<s)-1,e.next_in=r,e.next_out=n,e.avail_in=r<S?S-r+5:5-(r-S),e.avail_out=n<C?C-n+257:257-(n-C),p.hold=i,p.bits=s}const H5=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],G5=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],V5=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Y5=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function pa(e,t,r,n,i,s,a,o){const c=o.bits;let u,h,f,p,d,S=0,k=0,A=0,C=0,B=0,R=0,D=0,L=0,g=0,I=0,l=null,m=0;const v=new Ur(16),y=new Ur(16);let w,N,O,W=null,Z=0;for(S=0;S<=15;S++)v[S]=0;for(k=0;k<n;k++)v[t[r+k]]++;for(B=c,C=15;C>=1&&v[C]===0;C--);if(B>C&&(B=C),C===0)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(A=1;A<C&&v[A]===0;A++);for(B<A&&(B=A),L=1,S=1;S<=15;S++)if(L<<=1,L-=v[S],L<0)return-1;if(L>0&&(e===0||C!==1))return-1;for(y[1]=0,S=1;S<15;S++)y[S+1]=y[S]+v[S];for(k=0;k<n;k++)t[r+k]!==0&&(a[y[t[r+k]]++]=k);e===0?(l=W=a,d=19):e===1?(l=H5,m-=257,W=G5,Z-=257,d=256):(l=V5,W=Y5,d=-1),I=0,k=0,S=A,p=s,R=B,D=0,f=-1,g=1<<B;const b=g-1;if(e===1&&g>852||e===2&&g>592)return 1;for(;;){w=S-D,a[k]<d?(N=0,O=a[k]):a[k]>d?(N=W[Z+a[k]],O=l[m+a[k]]):(N=96,O=0),u=1<<S-D,h=1<<R,A=h;do h-=u,i[p+(I>>D)+h]=w<<24|N<<16|O|0;while(h!==0);for(u=1<<S-1;I&u;)u>>=1;if(u!==0?(I&=u-1,I+=u):I=0,k++,--v[S]==0){if(S===C)break;S=t[r+a[k]]}if(S>B&&(I&b)!==f){for(D===0&&(D=B),p+=A,R=S-D,L=1<<R;R+D<C&&(L-=v[R+D],!(L<=0));)R++,L<<=1;if(g+=1<<R,e===1&&g>852||e===2&&g>592)return 1;f=I&b,i[f]=B<<24|R<<16|p-s|0}}return I!==0&&(i[p+I]=S-D<<24|64<<16|0),o.bits=B,0}function gl(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}class J5{constructor(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ur(320),this.work=new Ur(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}}function X5(e){let t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,function(r){let n;return r&&r.state?(n=r.state,r.total_in=r.total_out=n.total=0,r.msg="",n.wrap&&(r.adler=1&n.wrap),n.mode=1,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Ho(852),n.distcode=n.distdyn=new Ho(592),n.sane=1,n.back=-1,0):-2}(e)):-2}function Z5(e,t){let r,n;return e?(n=new J5,e.state=n,n.window=null,r=function(i,s){let a,o;return i&&i.state?(o=i.state,s<0?(a=0,s=-s):(a=1+(s>>4),s<48&&(s&=15)),s&&(s<8||s>15)?-2:(o.window!==null&&o.wbits!==s&&(o.window=null),o.wrap=a,o.wbits=s,X5(i))):-2}(e,t),r!==0&&(e.state=null),r):-2}let pu,mu,bl=!0;function Q5(e){if(bl){let t;for(pu=new Ho(512),mu=new Ho(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(pa(1,e.lens,0,288,pu,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;pa(2,e.lens,0,32,mu,0,e.work,{bits:5}),bl=!1}e.lencode=pu,e.lenbits=9,e.distcode=mu,e.distbits=5}function Wf(e,t,r,n){let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new mn(s.wsize)),n>=s.wsize?(An(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),An(s.window,t,r-n,i,s.wnext),(n-=i)?(An(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function tp(e,t){let r,n,i,s,a,o,c,u,h,f,p,d,S,k,A,C,B,R,D,L,g,I,l,m,v=0,y=new mn(4);const w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return-2;r=e.state,r.mode===12&&(r.mode=13),a=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,u=r.hold,h=r.bits,f=o,p=c,I=0;t:for(;;)switch(r.mode){case 1:if(r.wrap===0){r.mode=13;break}for(;h<16;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if(2&r.wrap&&u===35615){r.check=0,y[0]=255&u,y[1]=u>>>8&255,r.check=ze(r.check,y,2,0),u=0,h=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=30;break}if((15&u)!=8){e.msg="unknown compression method",r.mode=30;break}if(u>>>=4,h-=4,g=8+(15&u),r.wbits===0)r.wbits=g;else if(g>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<g,e.adler=r.check=1,r.mode=512&u?10:12,u=0,h=0;break;case 2:for(;h<16;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if(r.flags=u,(255&r.flags)!=8){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(y[0]=255&u,y[1]=u>>>8&255,r.check=ze(r.check,y,2,0)),u=0,h=0,r.mode=3;case 3:for(;h<32;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}r.head&&(r.head.time=u),512&r.flags&&(y[0]=255&u,y[1]=u>>>8&255,y[2]=u>>>16&255,y[3]=u>>>24&255,r.check=ze(r.check,y,4,0)),u=0,h=0,r.mode=4;case 4:for(;h<16;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(y[0]=255&u,y[1]=u>>>8&255,r.check=ze(r.check,y,2,0)),u=0,h=0,r.mode=5;case 5:if(1024&r.flags){for(;h<16;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(y[0]=255&u,y[1]=u>>>8&255,r.check=ze(r.check,y,2,0)),u=0,h=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d=r.length,d>o&&(d=o),d&&(r.head&&(g=r.head.extra_len-r.length,r.head.extra||(r.head.extra=Array(r.head.extra_len)),An(r.head.extra,n,s,d,g)),512&r.flags&&(r.check=ze(r.check,n,d,s)),o-=d,s+=d,r.length-=d),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(o===0)break t;d=0;do g=n[s+d++],r.head&&g&&r.length<65536&&(r.head.name+=String.fromCharCode(g));while(g&&d<o);if(512&r.flags&&(r.check=ze(r.check,n,d,s)),o-=d,s+=d,g)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(o===0)break t;d=0;do g=n[s+d++],r.head&&g&&r.length<65536&&(r.head.comment+=String.fromCharCode(g));while(g&&d<o);if(512&r.flags&&(r.check=ze(r.check,n,d,s)),o-=d,s+=d,g)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;h<16;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if(u!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}u=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;h<32;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}e.adler=r.check=gl(u),u=0,h=0,r.mode=11;case 11:if(r.havedict===0)return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=h,2;e.adler=r.check=1,r.mode=12;case 12:if(t===5||t===6)break t;case 13:if(r.last){u>>>=7&h,h-=7&h,r.mode=27;break}for(;h<3;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}switch(r.last=1&u,u>>>=1,h-=1,3&u){case 0:r.mode=14;break;case 1:if(Q5(r),r.mode=20,t===6){u>>>=2,h-=2;break t}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}u>>>=2,h-=2;break;case 14:for(u>>>=7&h,h-=7&h;h<32;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&u,u=0,h=0,r.mode=15,t===6)break t;case 15:r.mode=16;case 16:if(d=r.length,d){if(d>o&&(d=o),d>c&&(d=c),d===0)break t;An(i,n,s,d,a),o-=d,s+=d,c-=d,a+=d,r.length-=d;break}r.mode=12;break;case 17:for(;h<14;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if(r.nlen=257+(31&u),u>>>=5,h-=5,r.ndist=1+(31&u),u>>>=5,h-=5,r.ncode=4+(15&u),u>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;h<3;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}r.lens[w[r.have++]]=7&u,u>>>=3,h-=3}for(;r.have<19;)r.lens[w[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,l={bits:r.lenbits},I=pa(0,r.lens,0,19,r.lencode,0,r.work,l),r.lenbits=l.bits,I){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;v=r.lencode[u&(1<<r.lenbits)-1],A=v>>>24,C=v>>>16&255,B=65535&v,!(A<=h);){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if(B<16)u>>>=A,h-=A,r.lens[r.have++]=B;else{if(B===16){for(m=A+2;h<m;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if(u>>>=A,h-=A,r.have===0){e.msg="invalid bit length repeat",r.mode=30;break}g=r.lens[r.have-1],d=3+(3&u),u>>>=2,h-=2}else if(B===17){for(m=A+3;h<m;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}u>>>=A,h-=A,g=0,d=3+(7&u),u>>>=3,h-=3}else{for(m=A+7;h<m;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}u>>>=A,h-=A,g=0,d=11+(127&u),u>>>=7,h-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=g}}if(r.mode===30)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,l={bits:r.lenbits},I=pa(1,r.lens,0,r.nlen,r.lencode,0,r.work,l),r.lenbits=l.bits,I){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,l={bits:r.distbits},I=pa(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,l),r.distbits=l.bits,I){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,t===6)break t;case 20:r.mode=21;case 21:if(o>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=h,W5(e,p),a=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,u=r.hold,h=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;v=r.lencode[u&(1<<r.lenbits)-1],A=v>>>24,C=v>>>16&255,B=65535&v,!(A<=h);){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if(C&&(240&C)==0){for(R=A,D=C,L=B;v=r.lencode[L+((u&(1<<R+D)-1)>>R)],A=v>>>24,C=v>>>16&255,B=65535&v,!(R+A<=h);){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}u>>>=R,h-=R,r.back+=R}if(u>>>=A,h-=A,r.back+=A,r.length=B,C===0){r.mode=26;break}if(32&C){r.back=-1,r.mode=12;break}if(64&C){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&C,r.mode=22;case 22:if(r.extra){for(m=r.extra;h<m;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;v=r.distcode[u&(1<<r.distbits)-1],A=v>>>24,C=v>>>16&255,B=65535&v,!(A<=h);){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if((240&C)==0){for(R=A,D=C,L=B;v=r.distcode[L+((u&(1<<R+D)-1)>>R)],A=v>>>24,C=v>>>16&255,B=65535&v,!(R+A<=h);){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}u>>>=R,h-=R,r.back+=R}if(u>>>=A,h-=A,r.back+=A,64&C){e.msg="invalid distance code",r.mode=30;break}r.offset=B,r.extra=15&C,r.mode=24;case 24:if(r.extra){for(m=r.extra;h<m;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(c===0)break t;if(d=p-c,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}d>r.wnext?(d-=r.wnext,S=r.wsize-d):S=r.wnext-d,d>r.length&&(d=r.length),k=r.window}else k=i,S=a-r.offset,d=r.length;d>c&&(d=c),c-=d,r.length-=d;do i[a++]=k[S++];while(--d);r.length===0&&(r.mode=21);break;case 26:if(c===0)break t;i[a++]=r.length,c--,r.mode=21;break;case 27:if(r.wrap){for(;h<32;){if(o===0)break t;o--,u|=n[s++]<<h,h+=8}if(p-=c,e.total_out+=p,r.total+=p,p&&(e.adler=r.check=r.flags?ze(r.check,i,p,a-p):Ta(r.check,i,p,a-p)),p=c,(r.flags?u:gl(u))!==r.check){e.msg="incorrect data check",r.mode=30;break}u=0,h=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;h<32;){if(o===0)break t;o--,u+=n[s++]<<h,h+=8}if(u!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}u=0,h=0}r.mode=29;case 29:I=1;break t;case 30:I=-3;break t;case 32:default:return-2}return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=h,(r.wsize||p!==e.avail_out&&r.mode<30&&(r.mode<27||t!==4))&&Wf(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&&p&&(e.adler=r.check=r.flags?ze(r.check,i,p,e.next_out-p):Ta(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(f===0&&p===0||t===4)&&I===0&&(I=-5),I}function vl(e,t){const r=t.length;let n,i;return e&&e.state?(n=e.state,n.wrap!==0&&n.mode!==11?-2:n.mode===11&&(i=1,i=Ta(i,t,r,0),i!==n.check)?-3:(Wf(e,t,r,r),n.havedict=1,0)):-2}class ep{constructor(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}class wl{constructor(t){this.options={chunkSize:16384,windowBits:0,...t||{}};const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),!(r.windowBits>=0&&r.windowBits<16)||t&&t.windowBits||(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(15&r.windowBits)==0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $f,this.strm.avail_out=0;let n=Z5(this.strm,r.windowBits);if(n!==0||(this.header=new ep,function(i,s){let a;i&&i.state&&(a=i.state,(2&a.wrap)==0||(a.head=s,s.done=!1))}(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=Gu(r.dictionary):r.dictionary instanceof ArrayBuffer&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(n=vl(this.strm,r.dictionary),n!==0))))throw Error(Ra[n])}push(t,r){const{strm:n,options:{chunkSize:i,dictionary:s}}=this;let a,o,c=!1;if(this.ended)return!1;o=r===~~r?r:r===!0?4:0,typeof t=="string"?n.input=function(u){const h=new mn(u.length);for(let f=0,p=h.length;f<p;f++)h[f]=u.charCodeAt(f);return h}(t):t instanceof ArrayBuffer?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new mn(i),n.next_out=0,n.avail_out=i),a=tp(n,0),a===2&&s&&(a=vl(this.strm,s)),a===-5&&c===!0&&(a=0,c=!1),a!==1&&a!==0)return this.onEnd(a),this.ended=!0,!1;n.next_out&&(n.avail_out!==0&&a!==1&&(n.avail_in!==0||o!==4&&o!==2)||this.onData(Uf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(c=!0)}while((n.avail_in>0||n.avail_out===0)&&a!==1);return a===1&&(o=4),o===4?(a=function(u){if(!u||!u.state)return-2;const h=u.state;return h.window&&(h.window=null),u.state=null,0}(this.strm),this.onEnd(a),this.ended=!0,a===0):o!==2||(this.onEnd(0),n.avail_out=0,!0)}onData(t){this.chunks.push(t)}onEnd(t){t===0&&(this.result=Nf(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg}}var _l=[0,1,3,7,15,31,63,127,255],ra=function(e){this.stream=e,this.bitOffset=0,this.curByte=0,this.hasByte=!1};ra.prototype._ensureByte=function(){this.hasByte||(this.curByte=this.stream.readByte(),this.hasByte=!0)},ra.prototype.read=function(e){for(var t=0;e>0;){this._ensureByte();var r=8-this.bitOffset;if(e>=r)t<<=r,t|=_l[r]&this.curByte,this.hasByte=!1,this.bitOffset=0,e-=r;else{t<<=e;var n=r-e;t|=(this.curByte&_l[e]<<n)>>n,this.bitOffset+=e,e=0}}return t},ra.prototype.seek=function(e){var t=e%8,r=(e-t)/8;this.bitOffset=t,this.stream.seek(r),this.hasByte=!1},ra.prototype.pi=function(){var e,t=new Uint8Array(6);for(e=0;e<t.length;e++)t[e]=this.read(8);return function(r){return Array.prototype.map.call(r,n=>("00"+n.toString(16)).slice(-2)).join("")}(t)};var rp=ra,zi=function(){};zi.prototype.readByte=function(){throw Error("abstract method readByte() not implemented")},zi.prototype.read=function(e,t,r){for(var n=0;n<r;){var i=this.readByte();if(i<0)return n===0?-1:n;e[t++]=i,n++}return n},zi.prototype.seek=function(e){throw Error("abstract method seek() not implemented")},zi.prototype.writeByte=function(e){throw Error("abstract method readByte() not implemented")},zi.prototype.write=function(e,t,r){var n;for(n=0;n<r;n++)this.writeByte(e[t++]);return r},zi.prototype.flush=function(){};var yu,Hf=zi,np=(yu=new Uint32Array([0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188]),function(){var e=4294967295;this.getCRC=function(){return~e>>>0},this.updateCRC=function(t){e=e<<8^yu[255&(e>>>24^t)]},this.updateCRCRun=function(t,r){for(;r-- >0;)e=e<<8^yu[255&(e>>>24^t)]}}),Al=function(e,t){var r,n=e[t];for(r=t;r>0;r--)e[r]=e[r-1];return e[0]=n,n},we={OK:0,LAST_BLOCK:-1,NOT_BZIP_DATA:-2,UNEXPECTED_INPUT_EOF:-3,UNEXPECTED_OUTPUT_EOF:-4,DATA_ERROR:-5,OUT_OF_MEMORY:-6,OBSOLETE_INPUT:-7,END_OF_BLOCK:-8},oi={};oi[we.LAST_BLOCK]="Bad file checksum",oi[we.NOT_BZIP_DATA]="Not bzip data",oi[we.UNEXPECTED_INPUT_EOF]="Unexpected input EOF",oi[we.UNEXPECTED_OUTPUT_EOF]="Unexpected output EOF",oi[we.DATA_ERROR]="Data error",oi[we.OUT_OF_MEMORY]="Out of memory",oi[we.OBSOLETE_INPUT]="Obsolete (pre 0.9.5) bzip format not supported.";var je=function(e,t){var r=oi[e]||"unknown error";t&&(r+=": "+t);var n=new TypeError(r);throw n.errorCode=e,n},na=function(e,t){this.writePos=this.writeCurrent=this.writeCount=0,this._start_bunzip(e,t)};na.prototype._init_block=function(){return this._get_next_block()?(this.blockCRC=new np,!0):(this.writeCount=-1,!1)},na.prototype._start_bunzip=function(e,t){var r=new Uint8Array(4);e.read(r,0,4)===4&&String.fromCharCode(r[0],r[1],r[2])==="BZh"||je(we.NOT_BZIP_DATA,"bad magic");var n=r[3]-48;(n<1||n>9)&&je(we.NOT_BZIP_DATA,"level out of range"),this.reader=new rp(e),this.dbufSize=1e5*n,this.nextoutput=0,this.outputStream=t,this.streamCRC=0},na.prototype._get_next_block=function(){var e,t,r,n=this.reader,i=n.pi();if(i==="177245385090")return!1;i!=="314159265359"&&je(we.NOT_BZIP_DATA),this.targetBlockCRC=n.read(32)>>>0,this.streamCRC=(this.targetBlockCRC^(this.streamCRC<<1|this.streamCRC>>>31))>>>0,n.read(1)&&je(we.OBSOLETE_INPUT);var s=n.read(24);s>this.dbufSize&&je(we.DATA_ERROR,"initial position out of bounds");var a=n.read(16),o=new Uint8Array(256),c=0;for(e=0;e<16;e++)if(a&1<<15-e){var u=16*e;for(r=n.read(16),t=0;t<16;t++)r&1<<15-t&&(o[c++]=u+t)}var h=n.read(3);(h<2||h>6)&&je(we.DATA_ERROR);var f=n.read(15);f===0&&je(we.DATA_ERROR);var p=new Uint8Array(256);for(e=0;e<h;e++)p[e]=e;var d=new Uint8Array(f);for(e=0;e<f;e++){for(t=0;n.read(1);t++)t>=h&&je(we.DATA_ERROR);d[e]=Al(p,t)}var S,k=c+2,A=[];for(t=0;t<h;t++){var C,B,R=new Uint8Array(k),D=new Uint16Array(21);for(a=n.read(5),e=0;e<k;e++){for(;(a<1||a>20)&&je(we.DATA_ERROR),n.read(1);)n.read(1)?a--:a++;R[e]=a}for(C=B=R[0],e=1;e<k;e++)R[e]>B?B=R[e]:R[e]<C&&(C=R[e]);S={},A.push(S),S.permute=new Uint16Array(258),S.limit=new Uint32Array(22),S.base=new Uint32Array(21),S.minLen=C,S.maxLen=B;var L=0;for(e=C;e<=B;e++)for(D[e]=S.limit[e]=0,a=0;a<k;a++)R[a]===e&&(S.permute[L++]=a);for(e=0;e<k;e++)D[R[e]]++;for(L=a=0,e=C;e<B;e++)L+=D[e],S.limit[e]=L-1,L<<=1,a+=D[e],S.base[e+1]=L-a;S.limit[B+1]=Number.MAX_VALUE,S.limit[B]=L+D[B]-1,S.base[C]=0}var g=new Uint32Array(256);for(e=0;e<256;e++)p[e]=e;var I,l=0,m=0,v=0,y=this.dbuf=new Uint32Array(this.dbufSize);for(k=0;;){for(k--||(k=49,v>=f&&je(we.DATA_ERROR),S=A[d[v++]]),e=S.minLen,t=n.read(e);e>S.maxLen&&je(we.DATA_ERROR),!(t<=S.limit[e]);e++)t=t<<1|n.read(1);((t-=S.base[e])<0||t>=258)&&je(we.DATA_ERROR);var w=S.permute[t];if(w!==0&&w!==1){if(l)for(l=0,m+a>this.dbufSize&&je(we.DATA_ERROR),g[I=o[p[0]]]+=a;a--;)y[m++]=I;if(w>c)break;m>=this.dbufSize&&je(we.DATA_ERROR),g[I=o[I=Al(p,e=w-1)]]++,y[m++]=I}else l||(l=1,a=0),a+=w===0?l:2*l,l<<=1}for((s<0||s>=m)&&je(we.DATA_ERROR),t=0,e=0;e<256;e++)r=t+g[e],g[e]=t,t=r;for(e=0;e<m;e++)y[g[I=255&y[e]]]|=e<<8,g[I]++;var N=0,O=0,W=0;return m&&(O=255&(N=y[s]),N>>=8,W=-1),this.writePos=N,this.writeCurrent=O,this.writeCount=m,this.writeRun=W,!0},na.prototype._read_bunzip=function(e,t){var r,n,i;if(this.writeCount<0)return 0;var s=this.dbuf,a=this.writePos,o=this.writeCurrent,c=this.writeCount;this.outputsize;for(var u=this.writeRun;c;){for(c--,n=o,o=255&(a=s[a]),a>>=8,u++==3?(r=o,i=n,o=-1):(r=1,i=o),this.blockCRC.updateCRCRun(i,r);r--;)this.outputStream.writeByte(i),this.nextoutput++;o!=n&&(u=0)}return this.writeCount=c,this.blockCRC.getCRC()!==this.targetBlockCRC&&je(we.DATA_ERROR,"Bad block CRC (got "+this.blockCRC.getCRC().toString(16)+" expected "+this.targetBlockCRC.toString(16)+")"),this.nextoutput};var ip=function(e){if("readByte"in e)return e;var t=new Hf;return t.pos=0,t.readByte=function(){return e[this.pos++]},t.seek=function(r){this.pos=r},t.eof=function(){return this.pos>=e.length},t},sp=function(e){var t=new Hf,r=!0;if(e)if(typeof e=="number")t.buffer=new Uint8Array(e),r=!1;else{if("writeByte"in e)return e;t.buffer=e,r=!1}else t.buffer=new Uint8Array(16384);return t.pos=0,t.writeByte=function(n){if(r&&this.pos>=this.buffer.length){var i=new Uint8Array(2*this.buffer.length);i.set(this.buffer),this.buffer=i}this.buffer[this.pos++]=n},t.getBuffer=function(){if(this.pos!==this.buffer.length){if(!r)throw new TypeError("outputsize does not match decoded input");var n=new Uint8Array(this.pos);n.set(this.buffer.subarray(0,this.pos)),this.buffer=n}return this.buffer},t._coerced=!0,t},Sl=function(e,t,r){for(var n=ip(e),i=sp(t),s=new na(n,i);!("eof"in n)||!n.eof();)if(s._init_block())s._read_bunzip();else{var a=s.reader.read(32)>>>0;if(a!==s.streamCRC&&je(we.DATA_ERROR,"Bad stream CRC (got "+s.streamCRC.toString(16)+" expected "+a.toString(16)+")"),!r||!("eof"in n)||n.eof())break;s._start_bunzip(n,i)}if("getBuffer"in i)return i.getBuffer()};class Bs{static get tag(){return V.packet.literalData}constructor(t=new Date){this.format=V.literal.utf8,this.date=H.normalizeDate(t),this.text=null,this.data=null,this.filename=""}setText(t,r=V.literal.utf8){this.format=r,this.text=t,this.data=null}getText(t=!1){return(this.text===null||H.isStream(this.text))&&(this.text=H.decodeUTF8(H.nativeEOL(this.getBytes(t)))),this.text}setBytes(t,r){this.format=r,this.data=t,this.text=null}getBytes(t=!1){return this.data===null&&(this.data=H.canonicalizeEOL(H.encodeUTF8(this.text))),t?bs(this.data):this.data}setFilename(t){this.filename=t}getFilename(){return this.filename}async read(t){await kc(t,async r=>{const n=await r.readByte(),i=await r.readByte();this.filename=H.decodeUTF8(await r.readBytes(i)),this.date=H.readDate(await r.readBytes(4));let s=r.remainder();xe(s)&&(s=await Re(s)),this.setBytes(s,n)})}writeHeader(){const t=H.encodeUTF8(this.filename),r=new Uint8Array([t.length]),n=new Uint8Array([this.format]),i=H.writeDate(this.date);return H.concatUint8Array([n,r,t,i])}write(){const t=this.writeHeader(),r=this.getBytes();return H.concat([t,r])}}const $s=Symbol("verified"),ap=new Set([V.signatureSubpacket.issuer,V.signatureSubpacket.issuerFingerprint,V.signatureSubpacket.embeddedSignature]);class Er{static get tag(){return V.packet.signature}constructor(){this.version=null,this.signatureType=null,this.hashAlgorithm=null,this.publicKeyAlgorithm=null,this.signatureData=null,this.unhashedSubpackets=[],this.signedHashValue=null,this.created=null,this.signatureExpirationTime=null,this.signatureNeverExpires=!0,this.exportable=null,this.trustLevel=null,this.trustAmount=null,this.regularExpression=null,this.revocable=null,this.keyExpirationTime=null,this.keyNeverExpires=null,this.preferredSymmetricAlgorithms=null,this.revocationKeyClass=null,this.revocationKeyAlgorithm=null,this.revocationKeyFingerprint=null,this.issuerKeyID=new Ai,this.rawNotations=[],this.notations={},this.preferredHashAlgorithms=null,this.preferredCompressionAlgorithms=null,this.keyServerPreferences=null,this.preferredKeyServer=null,this.isPrimaryUserID=null,this.policyURI=null,this.keyFlags=null,this.signersUserID=null,this.reasonForRevocationFlag=null,this.reasonForRevocationString=null,this.features=null,this.signatureTargetPublicKeyAlgorithm=null,this.signatureTargetHashAlgorithm=null,this.signatureTargetHash=null,this.embeddedSignature=null,this.issuerKeyVersion=null,this.issuerFingerprint=null,this.preferredAEADAlgorithms=null,this.revoked=null,this[$s]=null}read(t){let r=0;if(this.version=t[r++],this.version!==4&&this.version!==5)throw new De(`Version ${this.version} of the signature packet is unsupported.`);if(this.signatureType=t[r++],this.publicKeyAlgorithm=t[r++],this.hashAlgorithm=t[r++],r+=this.readSubPackets(t.subarray(r,t.length),!0),!this.created)throw Error("Missing signature creation time subpacket.");this.signatureData=t.subarray(0,r),r+=this.readSubPackets(t.subarray(r,t.length),!1),this.signedHashValue=t.subarray(r,r+2),r+=2,this.params=Ct.signature.parseSignatureParams(this.publicKeyAlgorithm,t.subarray(r,t.length))}writeParams(){return this.params instanceof Promise?Pi(async()=>Ct.serializeParams(this.publicKeyAlgorithm,await this.params)):Ct.serializeParams(this.publicKeyAlgorithm,this.params)}write(){const t=[];return t.push(this.signatureData),t.push(this.writeUnhashedSubPackets()),t.push(this.signedHashValue),t.push(this.writeParams()),H.concat(t)}async sign(t,r,n=new Date,i=!1){t.version===5?this.version=5:this.version=4;const s=[new Uint8Array([this.version,this.signatureType,this.publicKeyAlgorithm,this.hashAlgorithm])];this.created=H.normalizeDate(n),this.issuerKeyVersion=t.version,this.issuerFingerprint=t.getFingerprintBytes(),this.issuerKeyID=t.getKeyID(),s.push(this.writeHashedSubPackets()),this.signatureData=H.concat(s);const a=this.toHash(this.signatureType,r,i),o=await this.hash(this.signatureType,r,a,i);this.signedHashValue=$e(Gi(o),0,2);const c=async()=>Ct.signature.sign(this.publicKeyAlgorithm,this.hashAlgorithm,t.publicParams,t.privateParams,a,await Re(o));H.isStream(o)?this.params=c():(this.params=await c(),this[$s]=!0)}writeHashedSubPackets(){const t=V.signatureSubpacket,r=[];let n;if(this.created===null)throw Error("Missing signature creation time");r.push(ge(t.signatureCreationTime,H.writeDate(this.created))),this.signatureExpirationTime!==null&&r.push(ge(t.signatureExpirationTime,H.writeNumber(this.signatureExpirationTime,4))),this.exportable!==null&&r.push(ge(t.exportableCertification,new Uint8Array([this.exportable?1:0]))),this.trustLevel!==null&&(n=new Uint8Array([this.trustLevel,this.trustAmount]),r.push(ge(t.trustSignature,n))),this.regularExpression!==null&&r.push(ge(t.regularExpression,this.regularExpression)),this.revocable!==null&&r.push(ge(t.revocable,new Uint8Array([this.revocable?1:0]))),this.keyExpirationTime!==null&&r.push(ge(t.keyExpirationTime,H.writeNumber(this.keyExpirationTime,4))),this.preferredSymmetricAlgorithms!==null&&(n=H.stringToUint8Array(H.uint8ArrayToString(this.preferredSymmetricAlgorithms)),r.push(ge(t.preferredSymmetricAlgorithms,n))),this.revocationKeyClass!==null&&(n=new Uint8Array([this.revocationKeyClass,this.revocationKeyAlgorithm]),n=H.concat([n,this.revocationKeyFingerprint]),r.push(ge(t.revocationKey,n))),this.rawNotations.forEach(([{name:a,value:o,humanReadable:c}])=>{n=[new Uint8Array([c?128:0,0,0,0])],n.push(H.writeNumber(a.length,2)),n.push(H.writeNumber(o.length,2)),n.push(H.stringToUint8Array(a)),n.push(o),n=H.concat(n),r.push(ge(t.notationData,n))}),this.preferredHashAlgorithms!==null&&(n=H.stringToUint8Array(H.uint8ArrayToString(this.preferredHashAlgorithms)),r.push(ge(t.preferredHashAlgorithms,n))),this.preferredCompressionAlgorithms!==null&&(n=H.stringToUint8Array(H.uint8ArrayToString(this.preferredCompressionAlgorithms)),r.push(ge(t.preferredCompressionAlgorithms,n))),this.keyServerPreferences!==null&&(n=H.stringToUint8Array(H.uint8ArrayToString(this.keyServerPreferences)),r.push(ge(t.keyServerPreferences,n))),this.preferredKeyServer!==null&&r.push(ge(t.preferredKeyServer,H.stringToUint8Array(this.preferredKeyServer))),this.isPrimaryUserID!==null&&r.push(ge(t.primaryUserID,new Uint8Array([this.isPrimaryUserID?1:0]))),this.policyURI!==null&&r.push(ge(t.policyURI,H.stringToUint8Array(this.policyURI))),this.keyFlags!==null&&(n=H.stringToUint8Array(H.uint8ArrayToString(this.keyFlags)),r.push(ge(t.keyFlags,n))),this.signersUserID!==null&&r.push(ge(t.signersUserID,H.stringToUint8Array(this.signersUserID))),this.reasonForRevocationFlag!==null&&(n=H.stringToUint8Array(String.fromCharCode(this.reasonForRevocationFlag)+this.reasonForRevocationString),r.push(ge(t.reasonForRevocation,n))),this.features!==null&&(n=H.stringToUint8Array(H.uint8ArrayToString(this.features)),r.push(ge(t.features,n))),this.signatureTargetPublicKeyAlgorithm!==null&&(n=[new Uint8Array([this.signatureTargetPublicKeyAlgorithm,this.signatureTargetHashAlgorithm])],n.push(H.stringToUint8Array(this.signatureTargetHash)),n=H.concat(n),r.push(ge(t.signatureTarget,n))),this.preferredAEADAlgorithms!==null&&(n=H.stringToUint8Array(H.uint8ArrayToString(this.preferredAEADAlgorithms)),r.push(ge(t.preferredAEADAlgorithms,n)));const i=H.concat(r),s=H.writeNumber(i.length,2);return H.concat([s,i])}writeUnhashedSubPackets(){const t=V.signatureSubpacket,r=[];let n;this.issuerKeyID.isNull()||this.issuerKeyVersion===5||r.push(ge(t.issuer,this.issuerKeyID.write())),this.embeddedSignature!==null&&r.push(ge(t.embeddedSignature,this.embeddedSignature.write())),this.issuerFingerprint!==null&&(n=[new Uint8Array([this.issuerKeyVersion]),this.issuerFingerprint],n=H.concat(n),r.push(ge(t.issuerFingerprint,n))),this.unhashedSubpackets.forEach(a=>{r.push(Rc(a.length)),r.push(a)});const i=H.concat(r),s=H.writeNumber(i.length,2);return H.concat([s,i])}readSubPacket(t,r=!0){let n=0;const i=128&t[n],s=127&t[n];if(r||ap.has(s))switch(n++,s){case V.signatureSubpacket.signatureCreationTime:this.created=H.readDate(t.subarray(n,t.length));break;case V.signatureSubpacket.signatureExpirationTime:{const a=H.readNumber(t.subarray(n,t.length));this.signatureNeverExpires=a===0,this.signatureExpirationTime=a;break}case V.signatureSubpacket.exportableCertification:this.exportable=t[n++]===1;break;case V.signatureSubpacket.trustSignature:this.trustLevel=t[n++],this.trustAmount=t[n++];break;case V.signatureSubpacket.regularExpression:this.regularExpression=t[n];break;case V.signatureSubpacket.revocable:this.revocable=t[n++]===1;break;case V.signatureSubpacket.keyExpirationTime:{const a=H.readNumber(t.subarray(n,t.length));this.keyExpirationTime=a,this.keyNeverExpires=a===0;break}case V.signatureSubpacket.preferredSymmetricAlgorithms:this.preferredSymmetricAlgorithms=[...t.subarray(n,t.length)];break;case V.signatureSubpacket.revocationKey:this.revocationKeyClass=t[n++],this.revocationKeyAlgorithm=t[n++],this.revocationKeyFingerprint=t.subarray(n,n+20);break;case V.signatureSubpacket.issuer:this.issuerKeyID.read(t.subarray(n,t.length));break;case V.signatureSubpacket.notationData:{const a=!!(128&t[n]);n+=4;const o=H.readNumber(t.subarray(n,n+2));n+=2;const c=H.readNumber(t.subarray(n,n+2));n+=2;const u=H.uint8ArrayToString(t.subarray(n,n+o)),h=t.subarray(n+o,n+o+c);this.rawNotations.push({name:u,humanReadable:a,value:h,critical:i}),a&&(this.notations[u]=H.uint8ArrayToString(h));break}case V.signatureSubpacket.preferredHashAlgorithms:this.preferredHashAlgorithms=[...t.subarray(n,t.length)];break;case V.signatureSubpacket.preferredCompressionAlgorithms:this.preferredCompressionAlgorithms=[...t.subarray(n,t.length)];break;case V.signatureSubpacket.keyServerPreferences:this.keyServerPreferences=[...t.subarray(n,t.length)];break;case V.signatureSubpacket.preferredKeyServer:this.preferredKeyServer=H.uint8ArrayToString(t.subarray(n,t.length));break;case V.signatureSubpacket.primaryUserID:this.isPrimaryUserID=t[n++]!==0;break;case V.signatureSubpacket.policyURI:this.policyURI=H.uint8ArrayToString(t.subarray(n,t.length));break;case V.signatureSubpacket.keyFlags:this.keyFlags=[...t.subarray(n,t.length)];break;case V.signatureSubpacket.signersUserID:this.signersUserID=H.uint8ArrayToString(t.subarray(n,t.length));break;case V.signatureSubpacket.reasonForRevocation:this.reasonForRevocationFlag=t[n++],this.reasonForRevocationString=H.uint8ArrayToString(t.subarray(n,t.length));break;case V.signatureSubpacket.features:this.features=[...t.subarray(n,t.length)];break;case V.signatureSubpacket.signatureTarget:{this.signatureTargetPublicKeyAlgorithm=t[n++],this.signatureTargetHashAlgorithm=t[n++];const a=Ct.getHashByteLength(this.signatureTargetHashAlgorithm);this.signatureTargetHash=H.uint8ArrayToString(t.subarray(n,n+a));break}case V.signatureSubpacket.embeddedSignature:this.embeddedSignature=new Er,this.embeddedSignature.read(t.subarray(n,t.length));break;case V.signatureSubpacket.issuerFingerprint:this.issuerKeyVersion=t[n++],this.issuerFingerprint=t.subarray(n,t.length),this.issuerKeyVersion===5?this.issuerKeyID.read(this.issuerFingerprint):this.issuerKeyID.read(this.issuerFingerprint.subarray(-8));break;case V.signatureSubpacket.preferredAEADAlgorithms:this.preferredAEADAlgorithms=[...t.subarray(n,t.length)];break;default:{const a=Error("Unknown signature subpacket type "+s);if(i)throw a;H.printDebug(a)}}else this.unhashedSubpackets.push(t.subarray(n,t.length))}readSubPackets(t,r=!0,n){const i=H.readNumber(t.subarray(0,2));let s=2;for(;s<2+i;){const a=p5(t.subarray(s,t.length));s+=a.offset,this.readSubPacket(t.subarray(s,s+a.len),r,n),s+=a.len}return s}toSign(t,r){const n=V.signature;switch(t){case n.binary:return r.text!==null?H.encodeUTF8(r.getText(!0)):r.getBytes(!0);case n.text:{const i=r.getBytes(!0);return H.canonicalizeEOL(i)}case n.standalone:return new Uint8Array(0);case n.certGeneric:case n.certPersona:case n.certCasual:case n.certPositive:case n.certRevocation:{let i,s;if(r.userID)s=180,i=r.userID;else{if(!r.userAttribute)throw Error("Either a userID or userAttribute packet needs to be supplied for certification.");s=209,i=r.userAttribute}const a=i.write();return H.concat([this.toSign(n.key,r),new Uint8Array([s]),H.writeNumber(a.length,4),a])}case n.subkeyBinding:case n.subkeyRevocation:case n.keyBinding:return H.concat([this.toSign(n.key,r),this.toSign(n.key,{key:r.bind})]);case n.key:if(r.key===void 0)throw Error("Key packet is required for this signature.");return r.key.writeForHash(this.version);case n.keyRevocation:return this.toSign(n.key,r);case n.timestamp:return new Uint8Array(0);case n.thirdParty:throw Error("Not implemented");default:throw Error("Unknown signature type.")}}calculateTrailer(t,r){let n=0;return _e(Gi(this.signatureData),i=>{n+=i.length},()=>{const i=[];return this.version!==5||this.signatureType!==V.signature.binary&&this.signatureType!==V.signature.text||(r?i.push(new Uint8Array(6)):i.push(t.writeHeader())),i.push(new Uint8Array([this.version,255])),this.version===5&&i.push(new Uint8Array(4)),i.push(H.writeNumber(n,4)),H.concat(i)})}toHash(t,r,n=!1){const i=this.toSign(t,r);return H.concat([i,this.signatureData,this.calculateTrailer(r,n)])}async hash(t,r,n,i=!1){return n||(n=this.toHash(t,r,i)),Ct.hash.digest(this.hashAlgorithm,n)}async verify(t,r,n,i=new Date,s=!1,a=$t){if(!this.issuerKeyID.equals(t.getKeyID()))throw Error("Signature was not issued by the given public key");if(this.publicKeyAlgorithm!==t.algorithm)throw Error("Public key algorithm used to sign signature does not match issuer key algorithm.");const o=r===V.signature.binary||r===V.signature.text;if(!(this[$s]&&!o)){let u,h;if(this.hashed?h=await this.hashed:(u=this.toHash(r,n,s),h=await this.hash(r,n,u)),h=await Re(h),this.signedHashValue[0]!==h[0]||this.signedHashValue[1]!==h[1])throw Error("Signed digest did not match");if(this.params=await this.params,this[$s]=await Ct.signature.verify(this.publicKeyAlgorithm,this.hashAlgorithm,this.params,t.publicParams,u,h),!this[$s])throw Error("Signature verification failed")}const c=H.normalizeDate(i);if(c&&this.created>c)throw Error("Signature creation time is in the future");if(c&&c>=this.getExpirationTime())throw Error("Signature is expired");if(a.rejectHashAlgorithms.has(this.hashAlgorithm))throw Error("Insecure hash algorithm: "+V.read(V.hash,this.hashAlgorithm).toUpperCase());if(a.rejectMessageHashAlgorithms.has(this.hashAlgorithm)&&[V.signature.binary,V.signature.text].includes(this.signatureType))throw Error("Insecure message hash algorithm: "+V.read(V.hash,this.hashAlgorithm).toUpperCase());if(this.rawNotations.forEach(({name:u,critical:h})=>{if(h&&a.knownNotations.indexOf(u)<0)throw Error("Unknown critical notation: "+u)}),this.revocationKeyClass!==null)throw Error("This key is intended to be revoked with an authorized key, which OpenPGP.js does not support.")}isExpired(t=new Date){const r=H.normalizeDate(t);return r!==null&&!(this.created<=r&&r<this.getExpirationTime())}getExpirationTime(){return this.signatureNeverExpires?1/0:new Date(this.created.getTime()+1e3*this.signatureExpirationTime)}}function ge(e,t){const r=[];return r.push(Rc(t.length+1)),r.push(new Uint8Array([e])),r.push(t),H.concat(r)}class qr{static get tag(){return V.packet.onePassSignature}constructor(){this.version=null,this.signatureType=null,this.hashAlgorithm=null,this.publicKeyAlgorithm=null,this.issuerKeyID=null,this.flags=null}read(t){let r=0;if(this.version=t[r++],this.version!==3)throw new De(`Version ${this.version} of the one-pass signature packet is unsupported.`);return this.signatureType=t[r++],this.hashAlgorithm=t[r++],this.publicKeyAlgorithm=t[r++],this.issuerKeyID=new Ai,this.issuerKeyID.read(t.subarray(r,r+8)),r+=8,this.flags=t[r++],this}write(){const t=new Uint8Array([3,this.signatureType,this.hashAlgorithm,this.publicKeyAlgorithm]),r=new Uint8Array([this.flags]);return H.concatUint8Array([t,this.issuerKeyID.write(),r])}calculateTrailer(...t){return Pi(async()=>Er.prototype.calculateTrailer.apply(await this.correspondingSig,t))}async verify(){const t=await this.correspondingSig;if(!t||t.constructor.tag!==V.packet.signature)throw Error("Corresponding signature packet missing");if(t.signatureType!==this.signatureType||t.hashAlgorithm!==this.hashAlgorithm||t.publicKeyAlgorithm!==this.publicKeyAlgorithm||!t.issuerKeyID.equals(this.issuerKeyID))throw Error("Corresponding signature packet does not match one-pass signature packet");return t.hashed=this.hashed,t.verify.apply(t,arguments)}}function op(e,t){if(!t[e]){let r;try{r=V.read(V.packet,e)}catch{throw new De("Unknown packet type with tag: "+e)}throw Error("Packet not allowed in this context: "+r)}return new t[e]}qr.prototype.hash=Er.prototype.hash,qr.prototype.toHash=Er.prototype.toHash,qr.prototype.toSign=Er.prototype.toSign;class Ie extends Array{static async fromBinary(t,r,n=$t){const i=new Ie;return await i.read(t,r,n),i}async read(t,r,n=$t){this.stream=$n(t,async(s,a)=>{const o=yr(a);try{for(;;)if(await o.ready,await y5(s,async c=>{try{if(c.tag===V.packet.marker||c.tag===V.packet.trust)return;const u=op(c.tag,r);u.packets=new Ie,u.fromStream=H.isStream(c.packet),await u.read(c.packet,n),await o.write(u)}catch(u){const h=!n.ignoreUnsupportedPackets&&u instanceof De,f=!(n.ignoreMalformedPackets||u instanceof De);if(h||f||wo(c.tag))await o.abort(u);else{const p=new H1(c.tag,c.packet);await o.write(p)}H.printDebugError(u)}}))return await o.ready,void await o.close()}catch(c){await o.abort(c)}});const i=Pn(this.stream);for(;;){const{done:s,value:a}=await i.read();if(s?this.stream=null:this.push(a),s||wo(a.constructor.tag))break}i.releaseLock()}write(){const t=[];for(let r=0;r<this.length;r++){const n=this[r]instanceof H1?this[r].tag:this[r].constructor.tag,i=this[r].write();if(H.isStream(i)&&wo(this[r].constructor.tag)){let s=[],a=0;const o=512;t.push(_f(n)),t.push(_e(i,c=>{if(s.push(c),a+=c.length,a>=o){const u=Math.min(Math.log(a)/Math.LN2|0,30),h=2**u,f=H.concat([m5(u)].concat(s));return s=[f.subarray(1+h)],a=s[0].length,f.subarray(0,1+h)}},()=>H.concat([Rc(a)].concat(s))))}else{if(H.isStream(i)){let s=0;t.push(_e(Gi(i),a=>{s+=a.length},()=>W1(n,s)))}else t.push(W1(n,i.length));t.push(i)}}return H.concat(t)}filterByTag(...t){const r=new Ie,n=i=>s=>i===s;for(let i=0;i<this.length;i++)t.some(n(this[i].constructor.tag))&&r.push(this[i]);return r}findPacket(t){return this.find(r=>r.constructor.tag===t)}indexOfTag(...t){const r=[],n=this,i=s=>a=>s===a;for(let s=0;s<this.length;s++)t.some(i(n[s].constructor.tag))&&r.push(s);return r}}const cp=H.constructAllowedPackets([Bs,qr,Er]);class Wa{static get tag(){return V.packet.compressedData}constructor(t=$t){this.packets=null,this.algorithm=t.preferredCompressionAlgorithm,this.compressed=null,this.deflateLevel=t.deflateLevel}async read(t,r=$t){await kc(t,async n=>{this.algorithm=await n.readByte(),this.compressed=n.remainder(),await this.decompress(r)})}write(){return this.compressed===null&&this.compress(),H.concat([new Uint8Array([this.algorithm]),this.compressed])}async decompress(t=$t){const r=V.read(V.compression,this.algorithm),n=lp[r];if(!n)throw Error(r+" decompression not supported");this.packets=await Ie.fromBinary(n(this.compressed),cp,t)}compress(){const t=V.read(V.compression,this.algorithm),r=up[t];if(!r)throw Error(t+" compression not supported");this.compressed=r(this.packets.write(),this.deflateLevel)}}const dn=H.getNodeZlib();function El(e){return e}function Vo(e,t,r={}){return function(n){return!H.isStream(n)||xe(n)?Pi(()=>Re(n).then(i=>new Promise((s,a)=>{e(i,r,(o,c)=>{if(o)return a(o);s(c)})}))):Ec(A0(n).pipe(t(r)))}}function Yo(e,t={}){return function(r){const n=new e(t);return _e(r,i=>{if(i.length)return n.push(i,2),n.result},()=>{if(e===Vu)return n.push([],4),n.result})}}function kl(e){return function(t){return Pi(async()=>e(await Re(t)))}}const up=dn?{zip:(e,t)=>Vo(dn.deflateRaw,dn.createDeflateRaw,{level:t})(e),zlib:(e,t)=>Vo(dn.deflate,dn.createDeflate,{level:t})(e)}:{zip:(e,t)=>Yo(Vu,{raw:!0,level:t})(e),zlib:(e,t)=>Yo(Vu,{level:t})(e)},lp=dn?{uncompressed:El,zip:Vo(dn.inflateRaw,dn.createInflateRaw),zlib:Vo(dn.inflate,dn.createInflate),bzip2:kl(Sl)}:{uncompressed:El,zip:Yo(wl,{raw:!0}),zlib:Yo(wl),bzip2:kl(Sl)},hp=H.constructAllowedPackets([Bs,Wa,qr,Er]);class Gf{static get tag(){return V.packet.symEncryptedIntegrityProtectedData}constructor(){this.version=1,this.encrypted=null,this.packets=null}async read(t){await kc(t,async r=>{const n=await r.readByte();if(n!==1)throw new De(`Version ${n} of the SEIP packet is unsupported.`);this.encrypted=r.remainder()})}write(){return H.concat([new Uint8Array([1]),this.encrypted])}async encrypt(t,r,n=$t){const{blockSize:i}=Ct.getCipher(t);let s=this.packets.write();xe(s)&&(s=await Re(s));const a=await Ct.getPrefixRandom(t),o=new Uint8Array([211,20]),c=H.concat([a,s,o]),u=await Ct.hash.sha1(bs(c)),h=H.concat([c,u]);return this.encrypted=await Ct.mode.cfb.encrypt(t,r,h,new Uint8Array(i),n),!0}async decrypt(t,r,n=$t){const{blockSize:i}=Ct.getCipher(t);let s=Gi(this.encrypted);xe(s)&&(s=await Re(s));const a=await Ct.mode.cfb.decrypt(t,r,s,new Uint8Array(i)),o=$e(bs(a),-20),c=$e(a,0,-20),u=Promise.all([Re(await Ct.hash.sha1(bs(c))),Re(o)]).then(([p,d])=>{if(!H.equalsUint8Array(p,d))throw Error("Modification detected.");return new Uint8Array}),h=$e(c,i+2);let f=$e(h,0,-2);return f=dr([f,Pi(()=>u)]),H.isStream(s)&&n.allowUnauthenticatedStream||(f=await Re(f)),this.packets=await Ie.fromBinary(f,hp,n),!0}}const fp=H.constructAllowedPackets([Bs,Wa,qr,Er]);class Uc{static get tag(){return V.packet.aeadEncryptedData}constructor(){this.version=1,this.cipherAlgorithm=null,this.aeadAlgorithm=V.aead.eax,this.chunkSizeByte=null,this.iv=null,this.encrypted=null,this.packets=null}async read(t){await kc(t,async r=>{const n=await r.readByte();if(n!==1)throw new De(`Version ${n} of the AEAD-encrypted data packet is not supported.`);this.cipherAlgorithm=await r.readByte(),this.aeadAlgorithm=await r.readByte(),this.chunkSizeByte=await r.readByte();const i=Ct.getAEADMode(this.aeadAlgorithm);this.iv=await r.readBytes(i.ivLength),this.encrypted=r.remainder()})}write(){return H.concat([new Uint8Array([this.version,this.cipherAlgorithm,this.aeadAlgorithm,this.chunkSizeByte]),this.iv,this.encrypted])}async decrypt(t,r,n=$t){this.packets=await Ie.fromBinary(await this.crypt("decrypt",r,Gi(this.encrypted)),fp,n)}async encrypt(t,r,n=$t){this.cipherAlgorithm=t;const{ivLength:i}=Ct.getAEADMode(this.aeadAlgorithm);this.iv=await Ct.random.getRandomBytes(i),this.chunkSizeByte=n.aeadChunkSizeByte;const s=this.packets.write();this.encrypted=await this.crypt("encrypt",r,s)}async crypt(t,r,n){const i=Ct.getAEADMode(this.aeadAlgorithm),s=await i(this.cipherAlgorithm,r),a=t==="decrypt"?i.tagLength:0,o=t==="encrypt"?i.tagLength:0,c=2**(this.chunkSizeByte+6)+a,u=new ArrayBuffer(21),h=new Uint8Array(u,0,13),f=new Uint8Array(u),p=new DataView(u),d=new Uint8Array(u,5,8);h.set([192|Uc.tag,this.version,this.cipherAlgorithm,this.aeadAlgorithm,this.chunkSizeByte],0);let S=0,k=Promise.resolve(),A=0,C=0;const B=this.iv;return $n(n,async(R,D)=>{if(H.isStream(R)!=="array"){const I=new Es({},{highWaterMark:H.getHardwareConcurrency()*2**(this.chunkSizeByte+6),size:l=>l.length});_i(I.readable,D),D=I.writable}const L=Pn(R),g=yr(D);try{for(;;){let I=await L.readBytes(c+a)||new Uint8Array;const l=I.subarray(I.length-a);let m,v;if(I=I.subarray(0,I.length-a),!S||I.length?(L.unshift(l),m=s[t](I,i.getNonce(B,d),h),C+=I.length-a+o):(p.setInt32(17,A),m=s[t](l,i.getNonce(B,d),f),C+=o,v=!0),A+=I.length-a,k=k.then(()=>m).then(async y=>{await g.ready,await g.write(y),C-=y.length}).catch(y=>g.abort(y)),(v||C>g.desiredSize)&&await k,v){await g.close();break}p.setInt32(9,++S)}}catch(I){await g.abort(I)}})}}class Yu{static get tag(){return V.packet.publicKeyEncryptedSessionKey}constructor(){this.version=3,this.publicKeyID=new Ai,this.publicKeyAlgorithm=null,this.sessionKey=null,this.sessionKeyAlgorithm=null,this.encrypted={}}read(t){if(this.version=t[0],this.version!==3)throw new De(`Version ${this.version} of the PKESK packet is unsupported.`);this.publicKeyID.read(t.subarray(1,t.length)),this.publicKeyAlgorithm=t[9],this.encrypted=Ct.parseEncSessionKeyParams(this.publicKeyAlgorithm,t.subarray(10))}write(){const t=[new Uint8Array([this.version]),this.publicKeyID.write(),new Uint8Array([this.publicKeyAlgorithm]),Ct.serializeParams(this.publicKeyAlgorithm,this.encrypted)];return H.concatUint8Array(t)}async encrypt(t){const r=H.concatUint8Array([new Uint8Array([V.write(V.symmetric,this.sessionKeyAlgorithm)]),this.sessionKey,H.writeChecksum(this.sessionKey)]),n=V.write(V.publicKey,this.publicKeyAlgorithm);this.encrypted=await Ct.publicKeyEncrypt(n,t.publicParams,r,t.getFingerprintBytes())}async decrypt(t,r){if(this.publicKeyAlgorithm!==t.algorithm)throw Error("Decryption error");const n=r?H.concatUint8Array([new Uint8Array([r.sessionKeyAlgorithm]),r.sessionKey,H.writeChecksum(r.sessionKey)]):null,i=await Ct.publicKeyDecrypt(this.publicKeyAlgorithm,t.publicParams,t.privateParams,this.encrypted,t.getFingerprintBytes(),n),s=i[0],a=i.subarray(1,i.length-2),o=i.subarray(i.length-2),c=H.writeChecksum(a),u=c[0]===o[0]&c[1]===o[1];if(r){const h=u&s===r.sessionKeyAlgorithm&a.length===r.sessionKey.length;this.sessionKeyAlgorithm=H.selectUint8(h,s,r.sessionKeyAlgorithm),this.sessionKey=H.selectUint8Array(h,a,r.sessionKey)}else{if(!(u&&V.read(V.symmetric,s)))throw Error("Decryption error");this.sessionKey=a,this.sessionKeyAlgorithm=s}}}class ma{constructor(t=$t){this.algorithm=V.hash.sha256,this.type="iterated",this.c=t.s2kIterationCountByte,this.salt=null}getCount(){return 16+(15&this.c)<<6+(this.c>>4)}read(t){let r=0;switch(this.type=V.read(V.s2k,t[r++]),this.algorithm=t[r++],this.type){case"simple":break;case"salted":this.salt=t.subarray(r,r+8),r+=8;break;case"iterated":this.salt=t.subarray(r,r+8),r+=8,this.c=t[r++];break;case"gnu":if(H.uint8ArrayToString(t.subarray(r,r+3))!=="GNU")throw Error("Unknown s2k type.");if(r+=3,1e3+t[r++]!==1001)throw Error("Unknown s2k gnu protection mode.");this.type="gnu-dummy";break;default:throw Error("Unknown s2k type.")}return r}write(){if(this.type==="gnu-dummy")return new Uint8Array([101,0,...H.stringToUint8Array("GNU"),1]);const t=[new Uint8Array([V.write(V.s2k,this.type),this.algorithm])];switch(this.type){case"simple":break;case"salted":t.push(this.salt);break;case"iterated":t.push(this.salt),t.push(new Uint8Array([this.c]));break;case"gnu":throw Error("GNU s2k type not supported.");default:throw Error("Unknown s2k type.")}return H.concatUint8Array(t)}async produceKey(t,r){t=H.encodeUTF8(t);const n=[];let i=0,s=0;for(;i<r;){let a;switch(this.type){case"simple":a=H.concatUint8Array([new Uint8Array(s),t]);break;case"salted":a=H.concatUint8Array([new Uint8Array(s),this.salt,t]);break;case"iterated":{const c=H.concatUint8Array([this.salt,t]);let u=c.length;const h=Math.max(this.getCount(),u);a=new Uint8Array(s+h),a.set(c,s);for(let f=s+u;f<h;f+=u,u*=2)a.copyWithin(f,s,f);break}case"gnu":throw Error("GNU s2k type not supported.");default:throw Error("Unknown s2k type.")}const o=await Ct.hash.digest(this.algorithm,a);n.push(o),i+=o.length,s++}return H.concatUint8Array(n).subarray(0,r)}}class Ps{static get tag(){return V.packet.symEncryptedSessionKey}constructor(t=$t){this.version=t.aeadProtect?5:4,this.sessionKey=null,this.sessionKeyEncryptionAlgorithm=null,this.sessionKeyAlgorithm=V.symmetric.aes256,this.aeadAlgorithm=V.write(V.aead,t.preferredAEADAlgorithm),this.encrypted=null,this.s2k=null,this.iv=null}read(t){let r=0;if(this.version=t[r++],this.version!==4&&this.version!==5)throw new De(`Version ${this.version} of the SKESK packet is unsupported.`);const n=t[r++];if(this.version===5&&(this.aeadAlgorithm=t[r++]),this.s2k=new ma,r+=this.s2k.read(t.subarray(r,t.length)),this.version===5){const i=Ct.getAEADMode(this.aeadAlgorithm);this.iv=t.subarray(r,r+=i.ivLength)}this.version===5||r<t.length?(this.encrypted=t.subarray(r,t.length),this.sessionKeyEncryptionAlgorithm=n):this.sessionKeyAlgorithm=n}write(){const t=this.encrypted===null?this.sessionKeyAlgorithm:this.sessionKeyEncryptionAlgorithm;let r;return this.version===5?r=H.concatUint8Array([new Uint8Array([this.version,t,this.aeadAlgorithm]),this.s2k.write(),this.iv,this.encrypted]):(r=H.concatUint8Array([new Uint8Array([this.version,t]),this.s2k.write()]),this.encrypted!==null&&(r=H.concatUint8Array([r,this.encrypted]))),r}async decrypt(t){const r=this.sessionKeyEncryptionAlgorithm!==null?this.sessionKeyEncryptionAlgorithm:this.sessionKeyAlgorithm,{blockSize:n,keySize:i}=Ct.getCipher(r),s=await this.s2k.produceKey(t,i);if(this.version===5){const a=Ct.getAEADMode(this.aeadAlgorithm),o=new Uint8Array([192|Ps.tag,this.version,this.sessionKeyEncryptionAlgorithm,this.aeadAlgorithm]),c=await a(r,s);this.sessionKey=await c.decrypt(this.encrypted,this.iv,o)}else if(this.encrypted!==null){const a=await Ct.mode.cfb.decrypt(r,s,this.encrypted,new Uint8Array(n));this.sessionKeyAlgorithm=V.write(V.symmetric,a[0]),this.sessionKey=a.subarray(1,a.length)}else this.sessionKey=s}async encrypt(t,r=$t){const n=this.sessionKeyEncryptionAlgorithm!==null?this.sessionKeyEncryptionAlgorithm:this.sessionKeyAlgorithm;this.sessionKeyEncryptionAlgorithm=n,this.s2k=new ma(r),this.s2k.salt=await Ct.random.getRandomBytes(8);const{blockSize:i,keySize:s}=Ct.getCipher(n),a=await this.s2k.produceKey(t,s);if(this.sessionKey===null&&(this.sessionKey=await Ct.generateSessionKey(this.sessionKeyAlgorithm)),this.version===5){const o=Ct.getAEADMode(this.aeadAlgorithm);this.iv=await Ct.random.getRandomBytes(o.ivLength);const c=new Uint8Array([192|Ps.tag,this.version,this.sessionKeyEncryptionAlgorithm,this.aeadAlgorithm]),u=await o(n,a);this.encrypted=await u.encrypt(this.sessionKey,this.iv,c)}else{const o=H.concatUint8Array([new Uint8Array([this.sessionKeyAlgorithm]),this.sessionKey]);this.encrypted=await Ct.mode.cfb.encrypt(n,a,o,new Uint8Array(i),r)}}}class zn{static get tag(){return V.packet.publicKey}constructor(t=new Date,r=$t){this.version=r.v5Keys?5:4,this.created=H.normalizeDate(t),this.algorithm=null,this.publicParams=null,this.expirationTimeV3=0,this.fingerprint=null,this.keyID=null}static fromSecretKeyPacket(t){const r=new zn,{version:n,created:i,algorithm:s,publicParams:a,keyID:o,fingerprint:c}=t;return r.version=n,r.created=i,r.algorithm=s,r.publicParams=a,r.keyID=o,r.fingerprint=c,r}async read(t){let r=0;if(this.version=t[r++],this.version===4||this.version===5){this.created=H.readDate(t.subarray(r,r+4)),r+=4,this.algorithm=t[r++],this.version===5&&(r+=4);const{read:n,publicParams:i}=Ct.parsePublicKeyParams(this.algorithm,t.subarray(r));return this.publicParams=i,r+=n,await this.computeFingerprintAndKeyID(),r}throw new De(`Version ${this.version} of the key packet is unsupported.`)}write(){const t=[];t.push(new Uint8Array([this.version])),t.push(H.writeDate(this.created)),t.push(new Uint8Array([this.algorithm]));const r=Ct.serializeParams(this.algorithm,this.publicParams);return this.version===5&&t.push(H.writeNumber(r.length,4)),t.push(r),H.concatUint8Array(t)}writeForHash(t){const r=this.writePublicKey();return t===5?H.concatUint8Array([new Uint8Array([154]),H.writeNumber(r.length,4),r]):H.concatUint8Array([new Uint8Array([153]),H.writeNumber(r.length,2),r])}isDecrypted(){return null}getCreationTime(){return this.created}getKeyID(){return this.keyID}async computeFingerprintAndKeyID(){if(await this.computeFingerprint(),this.keyID=new Ai,this.version===5)this.keyID.read(this.fingerprint.subarray(0,8));else{if(this.version!==4)throw Error("Unsupported key version");this.keyID.read(this.fingerprint.subarray(12,20))}}async computeFingerprint(){const t=this.writeForHash(this.version);if(this.version===5)this.fingerprint=await Ct.hash.sha256(t);else{if(this.version!==4)throw Error("Unsupported key version");this.fingerprint=await Ct.hash.sha1(t)}}getFingerprintBytes(){return this.fingerprint}getFingerprint(){return H.uint8ArrayToHex(this.getFingerprintBytes())}hasSameFingerprintAs(t){return this.version===t.version&&H.equalsUint8Array(this.writePublicKey(),t.writePublicKey())}getAlgorithmInfo(){const t={};t.algorithm=V.read(V.publicKey,this.algorithm);const r=this.publicParams.n||this.publicParams.p;return r?t.bits=H.uint8ArrayBitLength(r):t.curve=this.publicParams.oid.getName(),t}}zn.prototype.readPublicKey=zn.prototype.read,zn.prototype.writePublicKey=zn.prototype.write;const dp=H.constructAllowedPackets([Bs,Wa,qr,Er]);class pp{static get tag(){return V.packet.symmetricallyEncryptedData}constructor(){this.encrypted=null,this.packets=null}read(t){this.encrypted=t}write(){return this.encrypted}async decrypt(t,r,n=$t){if(!n.allowUnauthenticatedMessages)throw Error("Message is not authenticated.");const{blockSize:i}=Ct.getCipher(t),s=await Re(Gi(this.encrypted)),a=await Ct.mode.cfb.decrypt(t,r,s.subarray(i+2),s.subarray(2,i+2));this.packets=await Ie.fromBinary(a,dp,n)}async encrypt(t,r,n=$t){const i=this.packets.write(),{blockSize:s}=Ct.getCipher(t),a=await Ct.getPrefixRandom(t),o=await Ct.mode.cfb.encrypt(t,r,a,new Uint8Array(s),n),c=await Ct.mode.cfb.encrypt(t,r,i,o.subarray(2),n);this.encrypted=H.concat([o,c])}}class T0 extends zn{static get tag(){return V.packet.publicSubkey}constructor(t,r){super(t,r)}static fromSecretSubkeyPacket(t){const r=new T0,{version:n,created:i,algorithm:s,publicParams:a,keyID:o,fingerprint:c}=t;return r.version=n,r.created=i,r.algorithm=s,r.publicParams=a,r.keyID=o,r.fingerprint=c,r}}class Vf extends zn{static get tag(){return V.packet.secretKey}constructor(t=new Date,r=$t){super(t,r),this.keyMaterial=null,this.isEncrypted=null,this.s2kUsage=0,this.s2k=null,this.symmetric=null,this.aead=null,this.privateParams=null}async read(t){let r=await this.readPublicKey(t);if(this.s2kUsage=t[r++],this.version===5&&r++,this.s2kUsage===255||this.s2kUsage===254||this.s2kUsage===253){if(this.symmetric=t[r++],this.s2kUsage===253&&(this.aead=t[r++]),this.s2k=new ma,r+=this.s2k.read(t.subarray(r,t.length)),this.s2k.type==="gnu-dummy")return}else this.s2kUsage&&(this.symmetric=this.s2kUsage);if(this.s2kUsage&&(this.iv=t.subarray(r,r+Ct.getCipher(this.symmetric).blockSize),r+=this.iv.length),this.version===5&&(r+=4),this.keyMaterial=t.subarray(r),this.isEncrypted=!!this.s2kUsage,!this.isEncrypted){const n=this.keyMaterial.subarray(0,-2);if(!H.equalsUint8Array(H.writeChecksum(n),this.keyMaterial.subarray(-2)))throw Error("Key checksum mismatch");try{const{privateParams:i}=Ct.parsePrivateKeyParams(this.algorithm,n,this.publicParams);this.privateParams=i}catch(i){throw i instanceof De?i:Error("Error reading MPIs")}}}write(){const t=[this.writePublicKey()];t.push(new Uint8Array([this.s2kUsage]));const r=[];return this.s2kUsage!==255&&this.s2kUsage!==254&&this.s2kUsage!==253||(r.push(this.symmetric),this.s2kUsage===253&&r.push(this.aead),r.push(...this.s2k.write())),this.s2kUsage&&this.s2k.type!=="gnu-dummy"&&r.push(...this.iv),this.version===5&&t.push(new Uint8Array([r.length])),t.push(new Uint8Array(r)),this.isDummy()||(this.s2kUsage||(this.keyMaterial=Ct.serializeParams(this.algorithm,this.privateParams)),this.version===5&&t.push(H.writeNumber(this.keyMaterial.length,4)),t.push(this.keyMaterial),this.s2kUsage||t.push(H.writeChecksum(this.keyMaterial))),H.concatUint8Array(t)}isDecrypted(){return this.isEncrypted===!1}isDummy(){return!(!this.s2k||this.s2k.type!=="gnu-dummy")}makeDummy(t=$t){this.isDummy()||(this.isDecrypted()&&this.clearPrivateParams(),this.isEncrypted=null,this.keyMaterial=null,this.s2k=new ma(t),this.s2k.algorithm=0,this.s2k.c=0,this.s2k.type="gnu-dummy",this.s2kUsage=254,this.symmetric=V.symmetric.aes256)}async encrypt(t,r=$t){if(this.isDummy())return;if(!this.isDecrypted())throw Error("Key packet is already encrypted");if(!t)throw Error("A non-empty passphrase is required for key encryption.");this.s2k=new ma(r),this.s2k.salt=await Ct.random.getRandomBytes(8);const n=Ct.serializeParams(this.algorithm,this.privateParams);this.symmetric=V.symmetric.aes256;const i=await Pl(this.s2k,t,this.symmetric),{blockSize:s}=Ct.getCipher(this.symmetric);if(this.iv=await Ct.random.getRandomBytes(s),r.aeadProtect){this.s2kUsage=253,this.aead=V.aead.eax;const a=Ct.getAEADMode(this.aead),o=await a(this.symmetric,i);this.keyMaterial=await o.encrypt(n,this.iv.subarray(0,a.ivLength),new Uint8Array)}else this.s2kUsage=254,this.keyMaterial=await Ct.mode.cfb.encrypt(this.symmetric,i,H.concatUint8Array([n,await Ct.hash.sha1(n,r)]),this.iv,r)}async decrypt(t){if(this.isDummy())return!1;if(this.isDecrypted())throw Error("Key packet is already decrypted.");let r,n;if(this.s2kUsage!==254&&this.s2kUsage!==253)throw this.s2kUsage===255?Error("Encrypted private key is authenticated using an insecure two-byte hash"):Error("Private key is encrypted using an insecure S2K function: unsalted MD5");if(r=await Pl(this.s2k,t,this.symmetric),this.s2kUsage===253){const i=Ct.getAEADMode(this.aead),s=await i(this.symmetric,r);try{n=await s.decrypt(this.keyMaterial,this.iv.subarray(0,i.ivLength),new Uint8Array)}catch(a){throw a.message==="Authentication tag mismatch"?Error("Incorrect key passphrase: "+a.message):a}}else{const i=await Ct.mode.cfb.decrypt(this.symmetric,r,this.keyMaterial,this.iv);n=i.subarray(0,-20);const s=await Ct.hash.sha1(n);if(!H.equalsUint8Array(s,i.subarray(-20)))throw Error("Incorrect key passphrase")}try{const{privateParams:i}=Ct.parsePrivateKeyParams(this.algorithm,n,this.publicParams);this.privateParams=i}catch{throw Error("Error reading MPIs")}this.isEncrypted=!1,this.keyMaterial=null,this.s2kUsage=0}async validate(){if(this.isDummy())return;if(!this.isDecrypted())throw Error("Key is not decrypted");let t;try{t=await Ct.validateParams(this.algorithm,this.publicParams,this.privateParams)}catch{t=!1}if(!t)throw Error("Key is invalid")}async generate(t,r){const{privateParams:n,publicParams:i}=await Ct.generateParams(this.algorithm,t,r);this.privateParams=n,this.publicParams=i,this.isEncrypted=!1}clearPrivateParams(){this.isDummy()||(Object.keys(this.privateParams).forEach(t=>{this.privateParams[t].fill(0),delete this.privateParams[t]}),this.privateParams=null,this.isEncrypted=!0)}}async function Pl(e,t,r){const{keySize:n}=Ct.getCipher(r);return e.produceKey(t,n)}xn(function(e){(function(t){function r(i){function s(){return Ut<Jt}function a(){return Ut}function o(mt){Ut=mt}function c(){Ut=0,Jt=se.length}function u(mt,yt){return{name:mt,tokens:yt||"",semantic:yt||"",children:[]}}function h(mt,yt){var wt;return yt===null?null:((wt=u(mt)).tokens=yt.tokens,wt.semantic=yt.semantic,wt.children.push(yt),wt)}function f(mt,yt){return yt!==null&&(mt.tokens+=yt.tokens,mt.semantic+=yt.semantic),mt.children.push(yt),mt}function p(mt){var yt;return s()&&mt(yt=se[Ut])?(Ut+=1,u("token",yt)):null}function d(mt){return function(){return h("literal",p(function(yt){return yt===mt}))}}function S(){var mt=arguments;return function(){var yt,wt,Tt,Kt;for(Kt=a(),wt=u("and"),yt=0;yt<mt.length;yt+=1){if((Tt=mt[yt]())===null)return o(Kt),null;f(wt,Tt)}return wt}}function k(){var mt=arguments;return function(){var yt,wt,Tt;for(Tt=a(),yt=0;yt<mt.length;yt+=1){if((wt=mt[yt]())!==null)return wt;o(Tt)}return null}}function A(mt){return function(){var yt,wt;return wt=a(),(yt=mt())!==null?yt:(o(wt),u("opt"))}}function C(mt){return function(){var yt=mt();return yt!==null&&(yt.semantic=""),yt}}function B(mt){return function(){var yt=mt();return yt!==null&&yt.semantic.length>0&&(yt.semantic=" "),yt}}function R(mt,yt){return function(){var wt,Tt,Kt,Ot,It;for(Ot=a(),wt=u("star"),Kt=0,It=yt===void 0?0:yt;(Tt=mt())!==null;)Kt+=1,f(wt,Tt);return Kt>=It?wt:(o(Ot),null)}}function D(mt){return mt.charCodeAt(0)>=128}function L(){return h("cr",d("\r")())}function g(){return h("crlf",S(L,m)())}function I(){return h("dquote",d('"')())}function l(){return h("htab",d("	")())}function m(){return h("lf",d(`
`)())}function v(){return h("sp",d(" ")())}function y(){return h("vchar",p(function(mt){var yt=mt.charCodeAt(0),wt=33<=yt&&yt<=126;return i.rfc6532&&(wt=wt||D(mt)),wt}))}function w(){return h("wsp",k(v,l)())}function N(){var mt=h("quoted-pair",k(S(d("\\"),k(y,w)),rt)());return mt===null?null:(mt.semantic=mt.semantic[1],mt)}function O(){return h("fws",k(st,S(A(S(R(w),C(g))),R(w,1)))())}function W(){return h("ctext",k(function(){return p(function(mt){var yt=mt.charCodeAt(0),wt=33<=yt&&yt<=39||42<=yt&&yt<=91||93<=yt&&yt<=126;return i.rfc6532&&(wt=wt||D(mt)),wt})},Et)())}function Z(){return h("ccontent",k(W,N,b)())}function b(){return h("comment",S(d("("),R(S(A(O),Z)),A(O),d(")"))())}function U(){return h("cfws",k(S(R(S(A(O),b),1),A(O)),O)())}function G(){return h("atext",p(function(mt){var yt="a"<=mt&&mt<="z"||"A"<=mt&&mt<="Z"||"0"<=mt&&mt<="9"||["!","#","$","%","&","'","*","+","-","/","=","?","^","_","`","{","|","}","~"].indexOf(mt)>=0;return i.rfc6532&&(yt=yt||D(mt)),yt}))}function Q(){return h("atom",S(B(A(U)),R(G,1),B(A(U)))())}function it(){var mt,yt;return(mt=h("dot-atom-text",R(G,1)()))===null||(yt=R(S(d("."),R(G,1)))())!==null&&f(mt,yt),mt}function ht(){return h("dot-atom",S(C(A(U)),it,C(A(U)))())}function ut(){return h("qtext",k(function(){return p(function(mt){var yt=mt.charCodeAt(0),wt=yt===33||35<=yt&&yt<=91||93<=yt&&yt<=126;return i.rfc6532&&(wt=wt||D(mt)),wt})},et)())}function lt(){return h("qcontent",k(ut,N)())}function j(){return h("quoted-string",S(C(A(U)),C(I),R(S(A(B(O)),lt)),A(C(O)),C(I),C(A(U)))())}function tt(){return h("word",k(Q,j)())}function F(){return h("address",k(x,T)())}function x(){return h("mailbox",k(Y,pt)())}function Y(){return h("name-addr",S(A(z),P)())}function P(){return h("angle-addr",k(S(C(A(U)),d("<"),pt,d(">"),C(A(U))),at)())}function T(){return h("group",S(z,d(":"),A(M),d(";"),C(A(U)))())}function z(){return h("display-name",((mt=h("phrase",k(ot,R(tt,1))()))!==null&&(mt.semantic=function(yt){return yt.replace(/([ \t]|\r\n)+/g," ").replace(/^\s*/,"").replace(/\s*$/,"")}(mt.semantic)),mt));var mt}function E(){return h("mailbox-list",k(S(x,R(S(d(","),x))),q)())}function _(){return h("address-list",k(S(F,R(S(d(","),F))),_t)())}function M(){return h("group-list",k(E,C(U),vt)())}function K(){return h("local-part",k(Dt,ht,j)())}function X(){return h("dtext",k(function(){return p(function(mt){var yt=mt.charCodeAt(0),wt=33<=yt&&yt<=90||94<=yt&&yt<=126;return i.rfc6532&&(wt=wt||D(mt)),wt})},zt)())}function J(){return h("domain-literal",S(C(A(U)),d("["),R(S(A(O),X)),A(O),d("]"),C(A(U)))())}function nt(){return h("domain",(mt=k(ie,ht,J)(),i.rejectTLD&&mt&&mt.semantic&&mt.semantic.indexOf(".")<0?null:(mt&&(mt.semantic=mt.semantic.replace(/\s+/g,"")),mt)));var mt}function pt(){return h("addr-spec",S(K,d("@"),nt)())}function gt(){return i.strict?null:h("obs-NO-WS-CTL",p(function(mt){var yt=mt.charCodeAt(0);return 1<=yt&&yt<=8||yt===11||yt===12||14<=yt&&yt<=31||yt===127}))}function Et(){return i.strict?null:h("obs-ctext",gt())}function et(){return i.strict?null:h("obs-qtext",gt())}function rt(){return i.strict?null:h("obs-qp",S(d("\\"),k(d("\0"),gt,m,L))())}function ot(){return i.strict?null:i.atInDisplayName?h("obs-phrase",S(tt,R(k(tt,d("."),d("@"),B(U))))()):h("obs-phrase",S(tt,R(k(tt,d("."),B(U))))())}function st(){return i.strict?null:h("obs-FWS",R(S(C(A(g)),w),1)())}function at(){return i.strict?null:h("obs-angle-addr",S(C(A(U)),d("<"),ct,pt,d(">"),C(A(U)))())}function ct(){return i.strict?null:h("obs-route",S($,d(":"))())}function $(){return i.strict?null:h("obs-domain-list",S(R(k(C(U),d(","))),d("@"),nt,R(S(d(","),C(A(U)),A(S(d("@"),nt)))))())}function q(){return i.strict?null:h("obs-mbox-list",S(R(S(C(A(U)),d(","))),x,R(S(d(","),A(S(x,C(U))))))())}function _t(){return i.strict?null:h("obs-addr-list",S(R(S(C(A(U)),d(","))),F,R(S(d(","),A(S(F,C(U))))))())}function vt(){return i.strict?null:h("obs-group-list",S(R(S(C(A(U)),d(",")),1),C(A(U)))())}function Dt(){return i.strict?null:h("obs-local-part",S(tt,R(S(d("."),tt)))())}function ie(){return i.strict?null:h("obs-domain",S(Q,R(S(d("."),Q)))())}function zt(){return i.strict?null:h("obs-dtext",k(gt,N)())}function Bt(mt,yt){var wt,Tt,Kt;if(yt==null)return null;for(Tt=[yt];Tt.length>0;){if((Kt=Tt.pop()).name===mt)return Kt;for(wt=Kt.children.length-1;wt>=0;wt-=1)Tt.push(Kt.children[wt])}return null}function pe(mt,yt){var wt,Tt,Kt,Ot,It;if(yt==null)return null;for(Tt=[yt],Ot=[],It={},wt=0;wt<mt.length;wt+=1)It[mt[wt]]=!0;for(;Tt.length>0;)if((Kt=Tt.pop()).name in It)Ot.push(Kt);else for(wt=Kt.children.length-1;wt>=0;wt-=1)Tt.push(Kt.children[wt]);return Ot}function Qt(mt){var yt,wt,Tt,Kt,Ot;if(mt===null)return null;for(yt=[],wt=pe(["group","mailbox"],mt),Tt=0;Tt<wt.length;Tt+=1)(Kt=wt[Tt]).name==="group"?yt.push(re(Kt)):Kt.name==="mailbox"&&yt.push(Te(Kt));return Ot={ast:mt,addresses:yt},i.simple&&(Ot=function(It){var ce;if(It&&It.addresses)for(ce=0;ce<It.addresses.length;ce+=1)delete It.addresses[ce].node;return It}(Ot)),i.oneResult?function(It){return!It||!i.partial&&It.addresses.length>1?null:It.addresses&&It.addresses[0]}(Ot):i.simple?Ot&&Ot.addresses:Ot}function re(mt){var yt,wt=Bt("display-name",mt),Tt=[],Kt=pe(["mailbox"],mt);for(yt=0;yt<Kt.length;yt+=1)Tt.push(Te(Kt[yt]));return{node:mt,parts:{name:wt},type:mt.name,name:Nt(wt),addresses:Tt}}function Te(mt){var yt=Bt("display-name",mt),wt=Bt("addr-spec",mt),Tt=function(ce,Xt){var le,tr,er,ur;if(Xt==null)return null;for(tr=[Xt],ur=[];tr.length>0;)for((er=tr.pop()).name===ce&&ur.push(er),le=er.children.length-1;le>=0;le-=1)tr.push(er.children[le]);return ur}("cfws",mt),Kt=pe(["comment"],mt),Ot=Bt("local-part",wt),It=Bt("domain",wt);return{node:mt,parts:{name:yt,address:wt,local:Ot,domain:It,comments:Tt},type:mt.name,name:Nt(yt),address:Nt(wt),local:Nt(Ot),domain:Nt(It),comments:jt(Kt),groupName:Nt(mt.groupName)}}function Nt(mt){return mt!=null?mt.semantic:null}function jt(mt){var yt="";if(mt)for(var wt=0;wt<mt.length;wt+=1)yt+=Nt(mt[wt]);return yt}var se,Ut,Jt,fe,qt;if((i=n(i,{}))===null)return null;if(se=i.input,qt={address:F,"address-list":_,"angle-addr":P,from:function(){return h("from",k(E,_)())},group:T,mailbox:x,"mailbox-list":E,"reply-to":function(){return h("reply-to",_())},sender:function(){return h("sender",k(x,F)())}}[i.startAt]||_,!i.strict){if(c(),i.strict=!0,fe=qt(se),i.partial||!s())return Qt(fe);i.strict=!1}return c(),fe=qt(se),!i.partial&&s()?null:Qt(fe)}function n(i,s){function a(h){return Object.prototype.toString.call(h)==="[object String]"}function o(h){return h==null}var c,u;if(a(i))i={input:i};else if(!function(h){return h===Object(h)}(i))return null;if(!a(i.input)||!s)return null;for(u in c={oneResult:!1,partial:!1,rejectTLD:!1,rfc6532:!1,simple:!1,startAt:"address-list",strict:!1,atInDisplayName:!1})o(i[u])&&(i[u]=o(s[u])?c[u]:s[u]);return i}r.parseOneAddress=function(i){return r(n(i,{oneResult:!0,rfc6532:!0,simple:!0,startAt:"address-list"}))},r.parseAddressList=function(i){return r(n(i,{rfc6532:!0,simple:!0,startAt:"address-list"}))},r.parseFrom=function(i){return r(n(i,{rfc6532:!0,simple:!0,startAt:"from"}))},r.parseSender=function(i){return r(n(i,{oneResult:!0,rfc6532:!0,simple:!0,startAt:"sender"}))},r.parseReplyTo=function(i){return r(n(i,{rfc6532:!0,simple:!0,startAt:"reply-to"}))},e.exports=r})()});class mp extends Vf{static get tag(){return V.packet.secretSubkey}constructor(t=new Date,r=$t){super(t,r)}}class Yf{constructor(t){this.packets=t||new Ie}write(){return this.packets.write()}armor(t=$t){return af(V.armor.signature,this.write(),void 0,void 0,void 0,t)}getSigningKeyIDs(){return this.packets.map(t=>t.issuerKeyID)}}async function Jf(e,t,r=new Date,n={},i){let s=i.preferredHashAlgorithm,a=s;if(e){const o=await e.getPrimaryUser(r,n,i);o.selfCertification.preferredHashAlgorithms&&([a]=o.selfCertification.preferredHashAlgorithms,s=Ct.hash.getHashByteLength(s)<=Ct.hash.getHashByteLength(a)?a:s)}switch(Object.getPrototypeOf(t)){case Vf.prototype:case zn.prototype:case mp.prototype:case T0.prototype:switch(t.algorithm){case V.publicKey.ecdh:case V.publicKey.ecdsa:case V.publicKey.eddsa:a=Ct.publicKey.elliptic.getPreferredHashAlgo(t.publicParams.oid)}}return Ct.hash.getHashByteLength(s)<=Ct.hash.getHashByteLength(a)?a:s}async function Ju(e,t=[],r=new Date,n=[],i=$t){const s={symmetric:V.symmetric.aes128,aead:V.aead.eax,compression:V.compression.uncompressed}[e],a={symmetric:i.preferredSymmetricAlgorithm,aead:i.preferredAEADAlgorithm,compression:i.preferredCompressionAlgorithm}[e],o={symmetric:"preferredSymmetricAlgorithms",aead:"preferredAEADAlgorithms",compression:"preferredCompressionAlgorithms"}[e];return(await Promise.all(t.map(async function(c,u){const h=(await c.getPrimaryUser(r,n[u],i)).selfCertification[o];return!!h&&h.indexOf(a)>=0}))).every(Boolean)?a:s}async function yp(e,t,r,n,i,s,a=!1,o){if(r.isDummy())throw Error("Cannot sign with a gnu-dummy key.");if(!r.isDecrypted())throw Error("Signing key is not decrypted.");const c=new Er;return Object.assign(c,n),c.publicKeyAlgorithm=r.algorithm,c.hashAlgorithm=await Jf(t,r,i,s,o),await c.sign(r,e,i,a),c}V.packet.publicKey,V.packet.privateKey;V.packet.publicKey,V.packet.privateKey,V.packet.publicSubkey,V.packet.privateSubkey;const gp=H.constructAllowedPackets([Bs,Wa,Uc,Gf,pp,Yu,Ps,qr,Er]),bp=H.constructAllowedPackets([Ps]),vp=H.constructAllowedPackets([Er]);class Ir{constructor(t){this.packets=t||new Ie}getEncryptionKeyIDs(){const t=[];return this.packets.filterByTag(V.packet.publicKeyEncryptedSessionKey).forEach(function(r){t.push(r.publicKeyID)}),t}getSigningKeyIDs(){const t=this.unwrapCompressed(),r=t.packets.filterByTag(V.packet.onePassSignature);return r.length>0?r.map(n=>n.issuerKeyID):t.packets.filterByTag(V.packet.signature).map(n=>n.issuerKeyID)}async decrypt(t,r,n,i=new Date,s=$t){const a=n||await this.decryptSessionKeys(t,r,i,s),o=this.packets.filterByTag(V.packet.symmetricallyEncryptedData,V.packet.symEncryptedIntegrityProtectedData,V.packet.aeadEncryptedData);if(o.length===0)throw Error("No encrypted data found");const c=o[0];let u=null;const h=Promise.all(a.map(async({algorithm:p,data:d})=>{if(!H.isUint8Array(d)||!H.isString(p))throw Error("Invalid session key for decryption.");try{const S=V.write(V.symmetric,p);await c.decrypt(S,d,s)}catch(S){H.printDebugError(S),u=S}}));if(zu(c.encrypted),c.encrypted=null,await h,!c.packets||!c.packets.length)throw u||Error("Decryption failed.");const f=new Ir(c.packets);return c.packets=new Ie,f}async decryptSessionKeys(t,r,n=new Date,i=$t){let s,a=[];if(r){const o=this.packets.filterByTag(V.packet.symEncryptedSessionKey);if(o.length===0)throw Error("No symmetrically encrypted session key packet found.");await Promise.all(r.map(async function(c,u){let h;h=u?await Ie.fromBinary(o.write(),bp,i):o,await Promise.all(h.map(async function(f){try{await f.decrypt(c),a.push(f)}catch(p){H.printDebugError(p)}}))}))}else{if(!t)throw Error("No key or password specified.");{const o=this.packets.filterByTag(V.packet.publicKeyEncryptedSessionKey);if(o.length===0)throw Error("No public key encrypted session key packet found.");await Promise.all(o.map(async function(c){await Promise.all(t.map(async function(u){let h=[V.symmetric.aes256,V.symmetric.aes128,V.symmetric.tripledes,V.symmetric.cast5];try{const p=await u.getPrimaryUser(n,void 0,i);p.selfCertification.preferredSymmetricAlgorithms&&(h=h.concat(p.selfCertification.preferredSymmetricAlgorithms))}catch{}const f=(await u.getDecryptionKeys(c.publicKeyID,null,void 0,i)).map(p=>p.keyPacket);await Promise.all(f.map(async function(p){if(!(!p||p.isDummy())){if(!p.isDecrypted())throw Error("Decryption key is not decrypted.");if(i.constantTimePKCS1Decryption&&(c.publicKeyAlgorithm===V.publicKey.rsaEncrypt||c.publicKeyAlgorithm===V.publicKey.rsaEncryptSign||c.publicKeyAlgorithm===V.publicKey.rsaSign||c.publicKeyAlgorithm===V.publicKey.elgamal)){const d=c.write();await Promise.all(Array.from(i.constantTimePKCS1DecryptionSupportedSymmetricAlgorithms).map(async S=>{const k=new Yu;k.read(d);const A={sessionKeyAlgorithm:S,sessionKey:await Ct.generateSessionKey(S)};try{await k.decrypt(p,A),a.push(k)}catch(C){H.printDebugError(C),s=C}}))}else try{if(await c.decrypt(p),!h.includes(V.write(V.symmetric,c.sessionKeyAlgorithm)))throw Error("A non-preferred symmetric algorithm was used.");a.push(c)}catch(d){H.printDebugError(d),s=d}}}))})),zu(c.encrypted),c.encrypted=null}))}}if(a.length>0){if(a.length>1){const o=new Set;a=a.filter(c=>{const u=c.sessionKeyAlgorithm+H.uint8ArrayToString(c.sessionKey);return!o.has(u)&&(o.add(u),!0)})}return a.map(o=>({data:o.sessionKey,algorithm:V.read(V.symmetric,o.sessionKeyAlgorithm)}))}throw s||Error("Session key decryption failed.")}getLiteralData(){const t=this.unwrapCompressed().packets.findPacket(V.packet.literalData);return t&&t.getBytes()||null}getFilename(){const t=this.unwrapCompressed().packets.findPacket(V.packet.literalData);return t&&t.getFilename()||null}getText(){const t=this.unwrapCompressed().packets.findPacket(V.packet.literalData);return t?t.getText():null}static async generateSessionKey(t=[],r=new Date,n=[],i=$t){const s=await Ju("symmetric",t,r,n,i),a=V.read(V.symmetric,s),o=i.aeadProtect&&await async function(c,u=new Date,h=[],f=$t){let p=!0;return await Promise.all(c.map(async function(d,S){const k=await d.getPrimaryUser(u,h[S],f);k.selfCertification.features&&k.selfCertification.features[0]&V.features.aead||(p=!1)})),p}(t,r,n,i)?V.read(V.aead,await Ju("aead",t,r,n,i)):void 0;return{data:await Ct.generateSessionKey(s),algorithm:a,aeadAlgorithm:o}}async encrypt(t,r,n,i=!1,s=[],a=new Date,o=[],c=$t){if(n){if(!H.isUint8Array(n.data)||!H.isString(n.algorithm))throw Error("Invalid session key for encryption.")}else if(t&&t.length)n=await Ir.generateSessionKey(t,a,o,c);else{if(!r||!r.length)throw Error("No keys, passwords, or session key provided.");n=await Ir.generateSessionKey(void 0,void 0,void 0,c)}const{data:u,algorithm:h,aeadAlgorithm:f}=n,p=await Ir.encryptSessionKey(u,h,f,t,r,i,s,a,o,c);let d;f?(d=new Uc,d.aeadAlgorithm=V.write(V.aead,f)):d=new Gf,d.packets=this.packets;const S=V.write(V.symmetric,h);return await d.encrypt(S,u,c),p.packets.push(d),d.packets=new Ie,p}static async encryptSessionKey(t,r,n,i,s,a=!1,o=[],c=new Date,u=[],h=$t){const f=new Ie,p=V.write(V.symmetric,r),d=n&&V.write(V.aead,n);if(i){const S=await Promise.all(i.map(async function(k,A){const C=await k.getEncryptionKey(o[A],c,u,h),B=new Yu;return B.publicKeyID=a?Ai.wildcard():C.getKeyID(),B.publicKeyAlgorithm=C.keyPacket.algorithm,B.sessionKey=t,B.sessionKeyAlgorithm=p,await B.encrypt(C.keyPacket),delete B.sessionKey,B}));f.push(...S)}if(s){const S=async function(B,R){try{return await B.decrypt(R),1}catch{return 0}},k=(B,R)=>B+R,A=async function(B,R,D,L){const g=new Ps(h);return g.sessionKey=B,g.sessionKeyAlgorithm=R,D&&(g.aeadAlgorithm=D),await g.encrypt(L,h),h.passwordCollisionCheck&&(await Promise.all(s.map(I=>S(g,I)))).reduce(k)!==1?A(B,R,L):(delete g.sessionKey,g)},C=await Promise.all(s.map(B=>A(t,p,d,B)));f.push(...C)}return new Ir(f)}async sign(t=[],r=null,n=[],i=new Date,s=[],a=$t){const o=new Ie,c=this.packets.findPacket(V.packet.literalData);if(!c)throw Error("No literal data packet to sign.");let u,h;const f=c.text===null?V.signature.binary:V.signature.text;if(r)for(h=r.packets.filterByTag(V.packet.signature),u=h.length-1;u>=0;u--){const p=h[u],d=new qr;d.signatureType=p.signatureType,d.hashAlgorithm=p.hashAlgorithm,d.publicKeyAlgorithm=p.publicKeyAlgorithm,d.issuerKeyID=p.issuerKeyID,t.length||u!==0||(d.flags=1),o.push(d)}return await Promise.all(Array.from(t).reverse().map(async function(p,d){if(!p.isPrivate())throw Error("Need private key for signing");const S=n[t.length-1-d],k=await p.getSigningKey(S,i,s,a),A=new qr;return A.signatureType=f,A.hashAlgorithm=await Jf(p,k.keyPacket,i,s,a),A.publicKeyAlgorithm=k.keyPacket.algorithm,A.issuerKeyID=k.getKeyID(),d===t.length-1&&(A.flags=1),A})).then(p=>{p.forEach(d=>o.push(d))}),o.push(c),o.push(...await xl(c,t,r,n,i,s,!1,a)),new Ir(o)}compress(t,r=$t){if(t===V.compression.uncompressed)return this;const n=new Wa(r);n.algorithm=t,n.packets=this.packets;const i=new Ie;return i.push(n),new Ir(i)}async signDetached(t=[],r=null,n=[],i=new Date,s=[],a=$t){const o=this.packets.findPacket(V.packet.literalData);if(!o)throw Error("No literal data packet to sign.");return new Yf(await xl(o,t,r,n,i,s,!0,a))}async verify(t,r=new Date,n=$t){const i=this.unwrapCompressed(),s=i.packets.filterByTag(V.packet.literalData);if(s.length!==1)throw Error("Can only verify message with one literal data packet.");xe(i.packets.stream)&&i.packets.push(...await Re(i.packets.stream,c=>c||[]));const a=i.packets.filterByTag(V.packet.onePassSignature).reverse(),o=i.packets.filterByTag(V.packet.signature);return a.length&&!o.length&&H.isStream(i.packets.stream)&&!xe(i.packets.stream)?(await Promise.all(a.map(async c=>{c.correspondingSig=new Promise((u,h)=>{c.correspondingSigResolve=u,c.correspondingSigReject=h}),c.signatureData=Pi(async()=>(await c.correspondingSig).signatureData),c.hashed=Re(await c.hash(c.signatureType,s[0],void 0,!1)),c.hashed.catch(()=>{})})),i.packets.stream=$n(i.packets.stream,async(c,u)=>{const h=Pn(c),f=yr(u);try{for(let p=0;p<a.length;p++){const{value:d}=await h.read();a[p].correspondingSigResolve(d)}await h.readToEnd(),await f.ready,await f.close()}catch(p){a.forEach(d=>{d.correspondingSigReject(p)}),await f.abort(p)}}),gu(a,s,t,r,!1,n)):gu(o,s,t,r,!1,n)}verifyDetached(t,r,n=new Date,i=$t){const s=this.unwrapCompressed().packets.filterByTag(V.packet.literalData);if(s.length!==1)throw Error("Can only verify message with one literal data packet.");return gu(t.packets,s,r,n,!0,i)}unwrapCompressed(){const t=this.packets.filterByTag(V.packet.compressedData);return t.length?new Ir(t[0].packets):this}async appendSignature(t,r=$t){await this.packets.read(H.isUint8Array(t)?t:(await sf(t)).data,vp,r)}write(){return this.packets.write()}armor(t=$t){return af(V.armor.message,this.write(),null,null,null,t)}}async function xl(e,t,r=null,n=[],i=new Date,s=[],a=!1,o=$t){const c=new Ie,u=e.text===null?V.signature.binary:V.signature.text;if(await Promise.all(t.map(async(h,f)=>{const p=s[f];if(!h.isPrivate())throw Error("Need private key for signing");const d=await h.getSigningKey(n[f],i,p,o);return yp(e,h,d.keyPacket,{signatureType:u},i,p,a,o)})).then(h=>{c.push(...h)}),r){const h=r.packets.filterByTag(V.packet.signature);c.push(...h)}return c}async function gu(e,t,r,n=new Date,i=!1,s=$t){return Promise.all(e.filter(function(a){return["text","binary"].includes(V.read(V.signature,a.signatureType))}).map(async function(a){return async function(o,c,u,h=new Date,f=!1,p=$t){let d,S;for(const C of u){const B=C.getKeys(o.issuerKeyID);if(B.length>0){d=C,S=B[0];break}}const k=o instanceof qr?o.correspondingSig:o,A={keyID:o.issuerKeyID,verified:(async()=>{if(!S)throw Error("Could not find signing key with key ID "+o.issuerKeyID.toHex());await o.verify(S.keyPacket,o.signatureType,c[0],h,f,p);const C=await k;if(S.getCreationTime()>C.created)throw Error("Key is newer than the signature");try{await d.getSigningKey(S.getKeyID(),C.created,void 0,p)}catch(B){if(!p.allowInsecureVerificationWithReformattedKeys||!B.message.match(/Signature creation time is in the future/))throw B;await d.getSigningKey(S.getKeyID(),h,void 0,p)}return!0})(),signature:(async()=>{const C=await k,B=new Ie;return C&&B.push(C),new Yf(B)})()};return A.signature.catch(()=>{}),A.verified.catch(()=>{}),A}(a,t,r,n,i,s)}))}async function wp({armoredMessage:e,binaryMessage:t,config:r,...n}){r={...$t,...r};let i=e||t;if(!i)throw Error("readMessage: must pass options object containing `armoredMessage` or `binaryMessage`");if(e&&!H.isString(e)&&!H.isStream(e))throw Error("readMessage: options.armoredMessage must be a string or stream");if(t&&!H.isUint8Array(t)&&!H.isStream(t))throw Error("readMessage: options.binaryMessage must be a Uint8Array or stream");const s=Object.keys(n);if(s.length>0)throw Error("Unknown option: "+s.join(", "));const a=H.isStream(i);if(a&&(await Zh(),i=Fa(i)),e){const{type:u,data:h}=await sf(i,r);if(u!==V.armor.message)throw Error("Armored text not of type message");i=h}const o=await Ie.fromBinary(i,gp,r),c=new Ir(o);return c.fromStream=a,c}async function _p({text:e,binary:t,filename:r,date:n=new Date,format:i=e!==void 0?"utf8":"binary",...s}){let a=e!==void 0?e:t;if(a===void 0)throw Error("createMessage: must pass options object containing `text` or `binary`");if(e&&!H.isString(e)&&!H.isStream(e))throw Error("createMessage: options.text must be a string or stream");if(t&&!H.isUint8Array(t)&&!H.isStream(t))throw Error("createMessage: options.binary must be a Uint8Array or stream");const o=Object.keys(s);if(o.length>0)throw Error("Unknown option: "+o.join(", "));const c=H.isStream(a);c&&(await Zh(),a=Fa(a));const u=new Bs(n);e!==void 0?u.setText(a,V.write(V.literal,i)):u.setBytes(a,V.write(V.literal,i)),r!==void 0&&u.setFilename(r);const h=new Ie;h.push(u);const f=new Ir(h);return f.fromStream=c,f}async function Ap({message:e,encryptionKeys:t,signingKeys:r,passwords:n,sessionKey:i,format:s="armored",signature:a=null,wildcard:o=!1,signingKeyIDs:c=[],encryptionKeyIDs:u=[],date:h=new Date,signingUserIDs:f=[],encryptionUserIDs:p=[],config:d,...S}){if(Zf(d={...$t,...d}),Xf(e),Ep(s),t=Kr(t),r=Kr(r),n=Kr(n),c=Kr(c),u=Kr(u),f=Kr(f),p=Kr(p),S.detached)throw Error("The `detached` option has been removed from openpgp.encrypt, separately call openpgp.sign instead. Don't forget to remove the `privateKeys` option as well.");if(S.publicKeys)throw Error("The `publicKeys` option has been removed from openpgp.encrypt, pass `encryptionKeys` instead");if(S.privateKeys)throw Error("The `privateKeys` option has been removed from openpgp.encrypt, pass `signingKeys` instead");if(S.armor!==void 0)throw Error("The `armor` option has been removed from openpgp.encrypt, pass `format` instead.");const k=Object.keys(S);if(k.length>0)throw Error("Unknown option: "+k.join(", "));r||(r=[]);const A=e.fromStream;try{if((r.length||a)&&(e=await e.sign(r,a,c,h,f,d)),e=e.compress(await Ju("compression",t,h,p,d),d),e=await e.encrypt(t,n,i,o,u,h,p,d),s==="object")return e;const C=s==="armored";return Qf(C?e.armor(d):e.write(),A,C?"utf8":"binary")}catch(C){throw H.wrapError("Error encrypting message",C)}}async function Sp({message:e,decryptionKeys:t,passwords:r,sessionKeys:n,verificationKeys:i,expectSigned:s=!1,format:a="utf8",signature:o=null,date:c=new Date,config:u,...h}){if(Zf(u={...$t,...u}),Xf(e),i=Kr(i),t=Kr(t),r=Kr(r),n=Kr(n),h.privateKeys)throw Error("The `privateKeys` option has been removed from openpgp.decrypt, pass `decryptionKeys` instead");if(h.publicKeys)throw Error("The `publicKeys` option has been removed from openpgp.decrypt, pass `verificationKeys` instead");const f=Object.keys(h);if(f.length>0)throw Error("Unknown option: "+f.join(", "));try{const p=await e.decrypt(t,r,n,c,u);i||(i=[]);const d={};if(d.signatures=o?await p.verifyDetached(o,i,c,u):await p.verify(i,c,u),d.data=a==="binary"?p.getLiteralData():p.getText(),d.filename=p.getFilename(),Pp(d,e),s){if(i.length===0)throw Error("Verification keys are required to verify message signatures");if(d.signatures.length===0)throw Error("Message is not signed");d.data=dr([d.data,Pi(async()=>{await H.anyPromise(d.signatures.map(S=>S.verified))})])}return d.data=await Qf(d.data,e.fromStream,a),d}catch(p){throw H.wrapError("Error decrypting message",p)}}function Xf(e){if(!(e instanceof Ir))throw Error("Parameter [message] needs to be of type Message")}function Ep(e){if(e!=="armored"&&e!=="binary"&&e!=="object")throw Error("Unsupported format "+e)}const kp=Object.keys($t).length;function Zf(e){const t=Object.keys(e);if(t.length!==kp){for(const r of t)if($t[r]===void 0)throw Error("Unknown config property: "+r)}}function Kr(e){return e&&!H.isArray(e)&&(e=[e]),e}async function Qf(e,t,r="utf8"){const n=H.isStream(e);return n==="array"?Re(e):t==="node"?(e=A0(e),r!=="binary"&&e.setEncoding(r),e):t==="web"&&n==="ponyfill"?Jh(e):e}function Pp(e,t){e.data=$n(t.packets.stream,async(r,n)=>{await _i(e.data,n,{preventClose:!0});const i=yr(n);try{await Re(r,s=>s),await i.close()}catch(s){await i.abort(s)}})}const ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function R0(){}const Ml=typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:void 0;function br(e){return typeof e=="object"&&e!==null||typeof e=="function"}const td=R0,C0=Promise,xp=Promise.prototype.then,Mp=Promise.resolve.bind(C0),Tp=Promise.reject.bind(C0);function sr(e){return new C0(e)}function ve(e){return Mp(e)}function Wt(e){return Tp(e)}function Kn(e,t,r){return xp.call(e,t,r)}function Wr(e,t,r){Kn(Kn(e,t,r),void 0,td)}function bu(e,t){Wr(e,t)}function ed(e,t){Wr(e,void 0,t)}function Wi(e,t,r){return Kn(e,t,r)}function Ha(e){Kn(e,void 0,td)}const rd=(()=>{const e=Ml&&Ml.queueMicrotask;if(typeof e=="function")return e;const t=ve(void 0);return r=>Kn(t,r)})();function Dc(e,t,r){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function ss(e,t,r){try{return ve(Dc(e,t,r))}catch(n){return Wt(n)}}class En{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){const r=this._back;let n=r;r._elements.length===16383&&(n={_elements:[],_next:void 0}),r._elements.push(t),n!==r&&(this._back=n,r._next=n),++this._size}shift(){const t=this._front;let r=t;const n=this._cursor;let i=n+1;const s=t._elements,a=s[n];return i===16384&&(r=t._next,i=0),--this._size,this._cursor=i,t!==r&&(this._front=r),s[n]=void 0,a}forEach(t){let r=this._cursor,n=this._front,i=n._elements;for(;!(r===i.length&&n._next===void 0||r===i.length&&(n=n._next,i=n._elements,r=0,i.length===0));)t(i[r]),++r}peek(){const t=this._front,r=this._cursor;return t._elements[r]}}function nd(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Xu(e):t._state==="closed"?function(r){Xu(r),sd(r)}(e):id(e,t._storedError)}function I0(e,t){return Hi(e._ownerReadableStream,t)}function qi(e){e._ownerReadableStream._state==="readable"?U0(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,r){id(t,r)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function xs(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Xu(e){e._closedPromise=sr((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function id(e,t){Xu(e),U0(e,t)}function U0(e,t){e._closedPromise_reject!==void 0&&(Ha(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function sd(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const ad=ae("[[AbortSteps]]"),od=ae("[[ErrorSteps]]"),D0=ae("[[CancelSteps]]"),O0=ae("[[PullSteps]]"),Tl=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Rp=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Fn(e,t){if(e!==void 0&&typeof(r=e)!="object"&&typeof r!="function")throw new TypeError(t+" is not an object.");var r}function Gr(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function.")}function cd(e,t){if(!function(r){return typeof r=="object"&&r!==null||typeof r=="function"}(e))throw new TypeError(t+" is not an object.")}function Gn(e,t,r){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function Zu(e,t,r){if(e===void 0)throw new TypeError(`${t} is required in '${r}'.`)}function N0(e){return Number(e)}function Rl(e){return e===0?0:e}function ud(e,t){const r=Number.MAX_SAFE_INTEGER;let n=Number(e);if(n=Rl(n),!Tl(n))throw new TypeError(t+" is not a finite number");if(n=function(i){return Rl(Rp(i))}(n),n<0||n>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return Tl(n)&&n!==0?n:0}function B0(e,t){if(!ci(e))throw new TypeError(t+" is not a ReadableStream.")}function So(e){return new Jo(e)}function ld(e,t){e._reader._readRequests.push(t)}function z0(e,t,r){const n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function Oc(e){return e._reader._readRequests.length}function hd(e){const t=e._reader;return t!==void 0&&!!$i(t)}class Jo{constructor(t){if(Gn(t,1,"ReadableStreamDefaultReader"),B0(t,"First parameter"),yi(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");nd(this,t),this._readRequests=new En}get closed(){return $i(this)?this._closedPromise:Wt(no("closed"))}cancel(t){return $i(this)?this._ownerReadableStream===void 0?Wt(xs("cancel")):I0(this,t):Wt(no("cancel"))}read(){if(!$i(this))return Wt(no("read"));if(this._ownerReadableStream===void 0)return Wt(xs("read from"));let t,r;const n=sr((i,s)=>{t=i,r=s});return Nc(this,{_chunkSteps:i=>t({value:i,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:i=>r(i)}),n}releaseLock(){if(!$i(this))throw no("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");qi(this)}}}function $i(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")}function Nc(e,t){const r=e._ownerReadableStream;r._disturbed=!0,r._state==="closed"?t._closeSteps():r._state==="errored"?t._errorSteps(r._storedError):r._readableStreamController[O0](t)}function no(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Xo;Object.defineProperties(Jo.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(Jo.prototype,ae.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),typeof ae.asyncIterator=="symbol"&&(Xo={[ae.asyncIterator](){return this}},Object.defineProperty(Xo,ae.asyncIterator,{enumerable:!1}));class Cp{constructor(t,r){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=r}next(){const t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?Wi(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){const r=()=>this._returnSteps(t);return this._ongoingPromise?Wi(this._ongoingPromise,r,r):r()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const t=this._reader;if(t._ownerReadableStream===void 0)return Wt(xs("iterate"));let r,n;const i=sr((s,a)=>{r=s,n=a});return Nc(t,{_chunkSteps:s=>{this._ongoingPromise=void 0,rd(()=>r({value:s,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,qi(t),r({value:void 0,done:!0})},_errorSteps:s=>{this._ongoingPromise=void 0,this._isFinished=!0,qi(t),n(s)}}),i}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;const r=this._reader;if(r._ownerReadableStream===void 0)return Wt(xs("finish iterating"));if(!this._preventCancel){const n=I0(r,t);return qi(r),Wi(n,()=>({value:t,done:!0}))}return qi(r),ve({value:t,done:!0})}}const fd={next(){return Cl(this)?this._asyncIteratorImpl.next():Wt(Il("next"))},return(e){return Cl(this)?this._asyncIteratorImpl.return(e):Wt(Il("return"))}};function Cl(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl")}function Il(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}Xo!==void 0&&Object.setPrototypeOf(fd,Xo);const dd=Number.isNaN||function(e){return e!=e};function pd(e){return!!function(t){return!(typeof t!="number"||dd(t)||t<0)}(e)&&e!==1/0}function Qu(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function K0(e,t,r){if(!pd(r=Number(r)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function Mi(e){e._queue=new En,e._queueTotalSize=0}function vu(e){return e.slice()}class Zo{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!wu(this))throw _u("view");return this._view}respond(t){if(!wu(this))throw _u("respond");if(Gn(t,1,"respond"),t=ud(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,function(r,n){if(!pd(n=Number(n)))throw new RangeError("bytesWritten must be a finite");Ul(r,n)}(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!wu(this))throw _u("respondWithNewView");if(Gn(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");(function(r,n){const i=r._pendingPullIntos.peek();if(i.byteOffset+i.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==n.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=n.buffer,Ul(r,n.byteLength)})(this._associatedReadableByteStreamController,t)}}Object.defineProperties(Zo.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(Zo.prototype,ae.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Qo{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ls(this))throw Ws("byobRequest");if(this._byobRequest===null&&this._pendingPullIntos.length>0){const t=this._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(Zo.prototype);(function(i,s,a){i._associatedReadableByteStreamController=s,i._view=a})(n,this,r),this._byobRequest=n}return this._byobRequest}get desiredSize(){if(!ls(this))throw Ws("desiredSize");return wd(this)}close(){if(!ls(this))throw Ws("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);(function(r){const n=r._controlledReadableByteStream;if(!(r._closeRequested||n._state!=="readable")){if(r._queueTotalSize>0)return void(r._closeRequested=!0);if(r._pendingPullIntos.length>0&&r._pendingPullIntos.peek().bytesFilled>0){const i=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ca(r,i),i}tc(r),Ga(n)}})(this)}enqueue(t){if(!ls(this))throw Ws("enqueue");if(Gn(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError(`The stream (in ${r} state) is not in the readable state and cannot be enqueued to`);(function(n,i){const s=n._controlledReadableByteStream;if(n._closeRequested||s._state!=="readable")return;const a=i.buffer,o=i.byteOffset,c=i.byteLength,u=a;hd(s)?Oc(s)===0?Eo(n,u,o,c):z0(s,new Uint8Array(u,o,c),!1):L0(s)?(Eo(n,u,o,c),vd(n)):Eo(n,u,o,c),Ji(n)})(this,t)}error(t){if(!ls(this))throw Ws("error");Ca(this,t)}[D0](t){this._pendingPullIntos.length>0&&(this._pendingPullIntos.peek().bytesFilled=0),Mi(this);const r=this._cancelAlgorithm(t);return tc(this),r}[O0](t){const r=this._controlledReadableByteStream;if(this._queueTotalSize>0){const i=this._queue.shift();this._queueTotalSize-=i.byteLength,bd(this);const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return void t._chunkSteps(s)}const n=this._autoAllocateChunkSize;if(n!==void 0){let i;try{i=new ArrayBuffer(n)}catch(a){return void t._errorSteps(a)}const s={buffer:i,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(s)}ld(r,t),Ji(this)}}function ls(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")}function wu(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")}function Ji(e){if(!!function(t){const r=t._controlledReadableByteStream;return r._state!=="readable"||t._closeRequested||!t._started?!1:!!(hd(r)&&Oc(r)>0||L0(r)&&_d(r)>0||wd(t)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Wr(e._pullAlgorithm(),()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ji(e))},t=>{Ca(e,t)})}}function t0(e,t){let r=!1;e._state==="closed"&&(r=!0);const n=md(t);t.readerType==="default"?z0(e,n,r):function(i,s,a){const o=i._reader._readIntoRequests.shift();a?o._closeSteps(s):o._chunkSteps(s)}(e,n,r)}function md(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Eo(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function yd(e,t){const r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,i=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),s=t.bytesFilled+i,a=s-s%r;let o=i,c=!1;a>n&&(o=a-t.bytesFilled,c=!0);const u=e._queue;for(;o>0;){const k=u.peek(),A=Math.min(o,k.byteLength),C=t.byteOffset+t.bytesFilled;h=t.buffer,f=C,p=k.buffer,d=k.byteOffset,S=A,new Uint8Array(h).set(new Uint8Array(p,d,S),f),k.byteLength===A?u.shift():(k.byteOffset+=A,k.byteLength-=A),e._queueTotalSize-=A,gd(e,A,t),o-=A}var h,f,p,d,S;return c}function gd(e,t,r){F0(e),r.bytesFilled+=t}function bd(e){e._queueTotalSize===0&&e._closeRequested?(tc(e),Ga(e._controlledReadableByteStream)):Ji(e)}function F0(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function vd(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;const t=e._pendingPullIntos.peek();yd(e,t)&&(e0(e),t0(e._controlledReadableByteStream,t))}}function Ul(e,t){const r=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");(function(n,i){i.buffer=i.buffer;const s=n._controlledReadableByteStream;if(L0(s))for(;_d(s)>0;)t0(s,e0(n))})(e,r)}else(function(n,i,s){if(s.bytesFilled+i>s.byteLength)throw new RangeError("bytesWritten out of range");if(gd(n,i,s),s.bytesFilled<s.elementSize)return;e0(n);const a=s.bytesFilled%s.elementSize;if(a>0){const o=s.byteOffset+s.bytesFilled,c=s.buffer.slice(o-a,o);Eo(n,c,0,c.byteLength)}s.buffer=s.buffer,s.bytesFilled-=a,t0(n._controlledReadableByteStream,s),vd(n)})(e,t,r);Ji(e)}function e0(e){const t=e._pendingPullIntos.shift();return F0(e),t}function tc(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ca(e,t){const r=e._controlledReadableByteStream;r._state==="readable"&&(function(n){F0(n),n._pendingPullIntos=new En}(e),Mi(e),tc(e),Fd(r,t))}function wd(e){const t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ip(e,t,r){const n=Object.create(Qo.prototype);let i=()=>{},s=()=>ve(void 0),a=()=>ve(void 0);t.start!==void 0&&(i=()=>t.start(n)),t.pull!==void 0&&(s=()=>t.pull(n)),t.cancel!==void 0&&(a=c=>t.cancel(c));const o=t.autoAllocateChunkSize;if(o===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");(function(c,u,h,f,p,d,S){u._controlledReadableByteStream=c,u._pullAgain=!1,u._pulling=!1,u._byobRequest=null,u._queue=u._queueTotalSize=void 0,Mi(u),u._closeRequested=!1,u._started=!1,u._strategyHWM=d,u._pullAlgorithm=f,u._cancelAlgorithm=p,u._autoAllocateChunkSize=S,u._pendingPullIntos=new En,c._readableStreamController=u,Wr(ve(h()),()=>{u._started=!0,Ji(u)},k=>{Ca(u,k)})})(e,n,i,s,a,r,o)}function _u(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ws(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Dl(e,t){e._reader._readIntoRequests.push(t)}function _d(e){return e._reader._readIntoRequests.length}function L0(e){const t=e._reader;return t!==void 0&&!!ia(t)}Object.defineProperties(Qo.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(Qo.prototype,ae.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class ec{constructor(t){if(Gn(t,1,"ReadableStreamBYOBReader"),B0(t,"First parameter"),yi(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ls(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");nd(this,t),this._readIntoRequests=new En}get closed(){return ia(this)?this._closedPromise:Wt(io("closed"))}cancel(t){return ia(this)?this._ownerReadableStream===void 0?Wt(xs("cancel")):I0(this,t):Wt(io("cancel"))}read(t){if(!ia(this))return Wt(io("read"));if(!ArrayBuffer.isView(t))return Wt(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return Wt(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return Wt(new TypeError("view's buffer must have non-zero byteLength"));if(this._ownerReadableStream===void 0)return Wt(xs("read from"));let r,n;const i=sr((s,a)=>{r=s,n=a});return function(s,a,o){const c=s._ownerReadableStream;c._disturbed=!0,c._state==="errored"?o._errorSteps(c._storedError):function(u,h,f){const p=u._controlledReadableByteStream;let d=1;h.constructor!==DataView&&(d=h.constructor.BYTES_PER_ELEMENT);const S=h.constructor,k={buffer:h.buffer,byteOffset:h.byteOffset,byteLength:h.byteLength,bytesFilled:0,elementSize:d,viewConstructor:S,readerType:"byob"};if(u._pendingPullIntos.length>0)return u._pendingPullIntos.push(k),void Dl(p,f);if(p._state!=="closed"){if(u._queueTotalSize>0){if(yd(u,k)){const A=md(k);return bd(u),void f._chunkSteps(A)}if(u._closeRequested){const A=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ca(u,A),void f._errorSteps(A)}}u._pendingPullIntos.push(k),Dl(p,f),Ji(u)}else{const A=new S(k.buffer,k.byteOffset,0);f._closeSteps(A)}}(c._readableStreamController,a,o)}(this,t,{_chunkSteps:s=>r({value:s,done:!1}),_closeSteps:s=>r({value:s,done:!0}),_errorSteps:s=>n(s)}),i}releaseLock(){if(!ia(this))throw io("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");qi(this)}}}function ia(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")}function io(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Ia(e,t){const{highWaterMark:r}=e;if(r===void 0)return t;if(dd(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function rc(e){const{size:t}=e;return t||(()=>1)}function nc(e,t){Fn(e,t);const r=e==null?void 0:e.highWaterMark,n=e==null?void 0:e.size;return{highWaterMark:r===void 0?void 0:N0(r),size:n===void 0?void 0:Up(n,t+" has member 'size' that")}}function Up(e,t){return Gr(e,t),r=>N0(e(r))}function Dp(e,t,r){return Gr(e,r),n=>ss(e,t,[n])}function Op(e,t,r){return Gr(e,r),()=>ss(e,t,[])}function Np(e,t,r){return Gr(e,r),n=>Dc(e,t,[n])}function Bp(e,t,r){return Gr(e,r),(n,i)=>ss(e,t,[n,i])}function Ad(e,t){if(!ds(e))throw new TypeError(t+" is not a WritableStream.")}Object.defineProperties(ec.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(ec.prototype,ae.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});class ic{constructor(t={},r={}){t===void 0?t=null:cd(t,"First parameter");const n=nc(r,"Second parameter"),i=function(a,o){Fn(a,o);const c=a==null?void 0:a.abort,u=a==null?void 0:a.close,h=a==null?void 0:a.start,f=a==null?void 0:a.type,p=a==null?void 0:a.write;return{abort:c===void 0?void 0:Dp(c,a,o+" has member 'abort' that"),close:u===void 0?void 0:Op(u,a,o+" has member 'close' that"),start:h===void 0?void 0:Np(h,a,o+" has member 'start' that"),write:p===void 0?void 0:Bp(p,a,o+" has member 'write' that"),type:f}}(t,"First parameter");if(Ed(this),i.type!==void 0)throw new RangeError("Invalid type is specified");const s=rc(n);(function(a,o,c,u){const h=Object.create(Ua.prototype);let f=()=>{},p=()=>ve(void 0),d=()=>ve(void 0),S=()=>ve(void 0);o.start!==void 0&&(f=()=>o.start(h)),o.write!==void 0&&(p=k=>o.write(k,h)),o.close!==void 0&&(d=()=>o.close()),o.abort!==void 0&&(S=k=>o.abort(k)),Cd(a,h,f,p,d,S,c,u)})(this,i,Ia(n,1),s)}get locked(){if(!ds(this))throw ao("locked");return _s(this)}abort(t){return ds(this)?_s(this)?Wt(new TypeError("Cannot abort a stream that already has a writer")):sc(this,t):Wt(ao("abort"))}close(){return ds(this)?_s(this)?Wt(new TypeError("Cannot close a stream that already has a writer")):yn(this)?Wt(new TypeError("Cannot close an already-closing stream")):kd(this):Wt(ao("close"))}getWriter(){if(!ds(this))throw ao("getWriter");return Sd(this)}}function Sd(e){return new ac(e)}function Ed(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new En,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ds(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")}function _s(e){return e._writer!==void 0}function sc(e,t){const r=e._state;if(r==="closed"||r==="errored")return ve(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let n=!1;r==="erroring"&&(n=!0,t=void 0);const i=sr((s,a)=>{e._pendingAbortRequest={_promise:void 0,_resolve:s,_reject:a,_reason:t,_wasAlreadyErroring:n}});return e._pendingAbortRequest._promise=i,n||j0(e,t),i}function kd(e){const t=e._state;if(t==="closed"||t==="errored")return Wt(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=sr((s,a)=>{const o={_resolve:s,_reject:a};e._closeRequest=o}),n=e._writer;var i;return n!==void 0&&e._backpressure&&t==="writable"&&G0(n),K0(i=e._writableStreamController,Rd,0),Bc(i),r}function r0(e,t){e._state!=="writable"?q0(e):j0(e,t)}function j0(e,t){const r=e._writableStreamController;e._state="erroring",e._storedError=t;const n=e._writer;n!==void 0&&xd(n,t),!function(i){return!(i._inFlightWriteRequest===void 0&&i._inFlightCloseRequest===void 0)}(e)&&r._started&&q0(e)}function q0(e){e._state="errored",e._writableStreamController[od]();const t=e._storedError;if(e._writeRequests.forEach(n=>{n._reject(t)}),e._writeRequests=new En,e._pendingAbortRequest===void 0)return void so(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void so(e);Wr(e._writableStreamController[ad](r._reason),()=>{r._resolve(),so(e)},n=>{r._reject(n),so(e)})}function yn(e){return e._closeRequest!==void 0||e._inFlightCloseRequest!==void 0}function so(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;t!==void 0&&H0(t,e._storedError)}function $0(e,t){const r=e._writer;r!==void 0&&t!==e._backpressure&&(t?function(n){zc(n)}(r):G0(r)),e._backpressure=t}Object.defineProperties(ic.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(ic.prototype,ae.toStringTag,{value:"WritableStream",configurable:!0});class ac{constructor(t){if(Gn(t,1,"WritableStreamDefaultWriter"),Ad(t,"First parameter"),_s(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;const r=t._state;if(r==="writable")!yn(t)&&t._backpressure?zc(this):Ol(this),ko(this);else if(r==="erroring")i0(this,t._storedError),ko(this);else if(r==="closed")Ol(this),ko(n=this),Od(n);else{const i=t._storedError;i0(this,i),Dd(this,i)}var n}get closed(){return Oi(this)?this._closedPromise:Wt(Ni("closed"))}get desiredSize(){if(!Oi(this))throw Ni("desiredSize");if(this._ownerWritableStream===void 0)throw sa("desiredSize");return function(t){const r=t._ownerWritableStream,n=r._state;return n==="errored"||n==="erroring"?null:n==="closed"?0:Id(r._writableStreamController)}(this)}get ready(){return Oi(this)?this._readyPromise:Wt(Ni("ready"))}abort(t){return Oi(this)?this._ownerWritableStream===void 0?Wt(sa("abort")):function(r,n){return sc(r._ownerWritableStream,n)}(this,t):Wt(Ni("abort"))}close(){if(!Oi(this))return Wt(Ni("close"));const t=this._ownerWritableStream;return t===void 0?Wt(sa("close")):yn(t)?Wt(new TypeError("Cannot close an already-closing stream")):Pd(this)}releaseLock(){if(!Oi(this))throw Ni("releaseLock");this._ownerWritableStream!==void 0&&Md(this)}write(t){return Oi(this)?this._ownerWritableStream===void 0?Wt(sa("write to")):Td(this,t):Wt(Ni("write"))}}function Oi(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")}function Pd(e){return kd(e._ownerWritableStream)}function zp(e,t){e._closedPromiseState==="pending"?H0(e,t):function(r,n){Dd(r,n)}(e,t)}function xd(e,t){e._readyPromiseState==="pending"?Nd(e,t):function(r,n){i0(r,n)}(e,t)}function Md(e){const t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");xd(e,r),zp(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function Td(e,t){const r=e._ownerWritableStream,n=r._writableStreamController,i=function(o,c){try{return o._strategySizeAlgorithm(c)}catch(u){return n0(o,u),1}}(n,t);if(r!==e._ownerWritableStream)return Wt(sa("write to"));const s=r._state;if(s==="errored")return Wt(r._storedError);if(yn(r)||s==="closed")return Wt(new TypeError("The stream is closing or closed and cannot be written to"));if(s==="erroring")return Wt(r._storedError);const a=function(o){return sr((c,u)=>{const h={_resolve:c,_reject:u};o._writeRequests.push(h)})}(r);return function(o,c,u){try{K0(o,c,u)}catch(f){return void n0(o,f)}const h=o._controlledWritableStream;!yn(h)&&h._state==="writable"&&$0(h,W0(o)),Bc(o)}(n,t,i),a}Object.defineProperties(ac.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(ac.prototype,ae.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const Rd={};class Ua{constructor(){throw new TypeError("Illegal constructor")}error(t){if(!function(r){return!(!br(r)||!Object.prototype.hasOwnProperty.call(r,"_controlledWritableStream"))}(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");this._controlledWritableStream._state==="writable"&&Ud(this,t)}[ad](t){const r=this._abortAlgorithm(t);return oc(this),r}[od](){Mi(this)}}function Cd(e,t,r,n,i,s,a,o){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Mi(t),t._started=!1,t._strategySizeAlgorithm=o,t._strategyHWM=a,t._writeAlgorithm=n,t._closeAlgorithm=i,t._abortAlgorithm=s;const c=W0(t);$0(e,c),Wr(ve(r()),()=>{t._started=!0,Bc(t)},u=>{t._started=!0,r0(e,u)})}function oc(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Id(e){return e._strategyHWM-e._queueTotalSize}function Bc(e){const t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring")return void q0(t);if(e._queue.length===0)return;const r=e._queue.peek().value;r===Rd?function(n){const i=n._controlledWritableStream;(function(a){a._inFlightCloseRequest=a._closeRequest,a._closeRequest=void 0})(i),Qu(n);const s=n._closeAlgorithm();oc(n),Wr(s,()=>{(function(a){a._inFlightCloseRequest._resolve(void 0),a._inFlightCloseRequest=void 0,a._state==="erroring"&&(a._storedError=void 0,a._pendingAbortRequest!==void 0&&(a._pendingAbortRequest._resolve(),a._pendingAbortRequest=void 0)),a._state="closed";const o=a._writer;o!==void 0&&Od(o)})(i)},a=>{(function(o,c){o._inFlightCloseRequest._reject(c),o._inFlightCloseRequest=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._reject(c),o._pendingAbortRequest=void 0),r0(o,c)})(i,a)})}(e):function(n,i){const s=n._controlledWritableStream;(function(a){a._inFlightWriteRequest=a._writeRequests.shift()})(s),Wr(n._writeAlgorithm(i),()=>{(function(o){o._inFlightWriteRequest._resolve(void 0),o._inFlightWriteRequest=void 0})(s);const a=s._state;if(Qu(n),!yn(s)&&a==="writable"){const o=W0(n);$0(s,o)}Bc(n)},a=>{s._state==="writable"&&oc(n),function(o,c){o._inFlightWriteRequest._reject(c),o._inFlightWriteRequest=void 0,r0(o,c)}(s,a)})}(e,r)}function n0(e,t){e._controlledWritableStream._state==="writable"&&Ud(e,t)}function W0(e){return Id(e)<=0}function Ud(e,t){const r=e._controlledWritableStream;oc(e),j0(r,t)}function ao(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Ni(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function sa(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function ko(e){e._closedPromise=sr((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"})}function Dd(e,t){ko(e),H0(e,t)}function H0(e,t){e._closedPromise_reject!==void 0&&(Ha(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Od(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function zc(e){e._readyPromise=sr((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState="pending"}function i0(e,t){zc(e),Nd(e,t)}function Ol(e){zc(e),G0(e)}function Nd(e,t){e._readyPromise_reject!==void 0&&(Ha(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function G0(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Ua.prototype,{error:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(Ua.prototype,ae.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Nl=typeof DOMException!="undefined"?DOMException:void 0,Kp=function(e){if(typeof e!="function"&&typeof e!="object")return!1;try{return new e,!0}catch{return!1}}(Nl)?Nl:function(){const e=function(t,r){this.message=t||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return Object.defineProperty(e.prototype=Object.create(Error.prototype),"constructor",{value:e,writable:!0,configurable:!0}),e}();function Bl(e,t,r,n,i,s){const a=So(e),o=Sd(t);e._disturbed=!0;let c=!1,u=ve(void 0);return sr((h,f)=>{let p;if(s!==void 0){if(p=()=>{const B=new Kp("Aborted","AbortError"),R=[];n||R.push(()=>t._state==="writable"?sc(t,B):ve(void 0)),i||R.push(()=>e._state==="readable"?Hi(e,B):ve(void 0)),k(()=>Promise.all(R.map(D=>D())),!0,B)},s.aborted)return void p();s.addEventListener("abort",p)}if(S(e,a._closedPromise,B=>{n?A(!0,B):k(()=>sc(t,B),!0,B)}),S(t,o._closedPromise,B=>{i?A(!0,B):k(()=>Hi(e,B),!0,B)}),function(B,R,D){B._state==="closed"?D():bu(R,D)}(e,a._closedPromise,()=>{r?A():k(()=>function(B){const R=B._ownerWritableStream,D=R._state;return yn(R)||D==="closed"?ve(void 0):D==="errored"?Wt(R._storedError):Pd(B)}(o))}),yn(t)||t._state==="closed"){const B=new TypeError("the destination writable stream closed before all data could be piped to it");i?A(!0,B):k(()=>Hi(e,B),!0,B)}function d(){const B=u;return Kn(u,()=>B!==u?d():void 0)}function S(B,R,D){B._state==="errored"?D(B._storedError):ed(R,D)}function k(B,R,D){function L(){Wr(B(),()=>C(R,D),g=>C(!0,g))}c||(c=!0,t._state!=="writable"||yn(t)?L():bu(d(),L))}function A(B,R){c||(c=!0,t._state!=="writable"||yn(t)?C(B,R):bu(d(),()=>C(B,R)))}function C(B,R){Md(o),qi(a),s!==void 0&&s.removeEventListener("abort",p),B?f(R):h(void 0)}Ha(sr((B,R)=>{(function D(L){L?B():Kn(c?ve(!0):Kn(o._readyPromise,()=>sr((g,I)=>{Nc(a,{_chunkSteps:l=>{u=Kn(Td(o,l),void 0,R0),g(!1)},_closeSteps:()=>g(!0),_errorSteps:I})})),D,R)})(!1)}))})}class Da{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!oo(this))throw co("desiredSize");return V0(this)}close(){if(!oo(this))throw co("close");if(!Ms(this))throw new TypeError("The stream is not in a state that permits close");Na(this)}enqueue(t){if(!oo(this))throw co("enqueue");if(!Ms(this))throw new TypeError("The stream is not in a state that permits enqueue");return uc(this,t)}error(t){if(!oo(this))throw co("error");Ei(this,t)}[D0](t){Mi(this);const r=this._cancelAlgorithm(t);return cc(this),r}[O0](t){const r=this._controlledReadableStream;if(this._queue.length>0){const n=Qu(this);this._closeRequested&&this._queue.length===0?(cc(this),Ga(r)):Oa(this),t._chunkSteps(n)}else ld(r,t),Oa(this)}}function oo(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")}function Oa(e){if(!!Bd(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Wr(e._pullAlgorithm(),()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Oa(e))},t=>{Ei(e,t)})}}function Bd(e){const t=e._controlledReadableStream;return!Ms(e)||!e._started?!1:yi(t)&&Oc(t)>0?!0:V0(e)>0}function cc(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Na(e){if(!Ms(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(cc(e),Ga(t))}function uc(e,t){if(!Ms(e))return;const r=e._controlledReadableStream;if(yi(r)&&Oc(r)>0)z0(r,t,!1);else{let n;try{n=e._strategySizeAlgorithm(t)}catch(i){throw Ei(e,i),i}try{K0(e,t,n)}catch(i){throw Ei(e,i),i}}Oa(e)}function Ei(e,t){const r=e._controlledReadableStream;r._state==="readable"&&(Mi(e),cc(e),Fd(r,t))}function V0(e){const t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ms(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function zd(e,t,r,n,i,s,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Mi(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=s,t._pullAlgorithm=n,t._cancelAlgorithm=i,e._readableStreamController=t,Wr(ve(r()),()=>{t._started=!0,Oa(t)},o=>{Ei(t,o)})}function co(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Fp(e,t,r){return Gr(e,r),n=>ss(e,t,[n])}function Lp(e,t,r){return Gr(e,r),n=>ss(e,t,[n])}function jp(e,t,r){return Gr(e,r),n=>Dc(e,t,[n])}function qp(e,t){if((e=""+e)!="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function $p(e,t){if((e=""+e)!="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function zl(e,t){Fn(e,t);const r=e==null?void 0:e.preventAbort,n=e==null?void 0:e.preventCancel,i=e==null?void 0:e.preventClose,s=e==null?void 0:e.signal;return s!==void 0&&function(a,o){if(!function(c){if(typeof c!="object"||c===null)return!1;try{return typeof c.aborted=="boolean"}catch{return!1}}(a))throw new TypeError(o+" is not an AbortSignal.")}(s,t+" has member 'signal' that"),{preventAbort:!!r,preventCancel:!!n,preventClose:!!i,signal:s}}Object.defineProperties(Da.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(Da.prototype,ae.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class ps{constructor(t={},r={}){t===void 0?t=null:cd(t,"First parameter");const n=nc(r,"Second parameter"),i=function(s,a){Fn(s,a);const o=s,c=o==null?void 0:o.autoAllocateChunkSize,u=o==null?void 0:o.cancel,h=o==null?void 0:o.pull,f=o==null?void 0:o.start,p=o==null?void 0:o.type;return{autoAllocateChunkSize:c===void 0?void 0:ud(c,a+" has member 'autoAllocateChunkSize' that"),cancel:u===void 0?void 0:Fp(u,o,a+" has member 'cancel' that"),pull:h===void 0?void 0:Lp(h,o,a+" has member 'pull' that"),start:f===void 0?void 0:jp(f,o,a+" has member 'start' that"),type:p===void 0?void 0:qp(p,a+" has member 'type' that")}}(t,"First parameter");if(Kd(this),i.type==="bytes"){if(n.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");Ip(this,i,Ia(n,0))}else{const s=rc(n);(function(a,o,c,u){const h=Object.create(Da.prototype);let f=()=>{},p=()=>ve(void 0),d=()=>ve(void 0);o.start!==void 0&&(f=()=>o.start(h)),o.pull!==void 0&&(p=()=>o.pull(h)),o.cancel!==void 0&&(d=S=>o.cancel(S)),zd(a,h,f,p,d,c,u)})(this,i,Ia(n,1),s)}}get locked(){if(!ci(this))throw Bi("locked");return yi(this)}cancel(t){return ci(this)?yi(this)?Wt(new TypeError("Cannot cancel a stream that already has a reader")):Hi(this,t):Wt(Bi("cancel"))}getReader(t){if(!ci(this))throw Bi("getReader");return function(r,n){Fn(r,n);const i=r==null?void 0:r.mode;return{mode:i===void 0?void 0:$p(i,n+" has member 'mode' that")}}(t,"First parameter").mode===void 0?So(this):function(r){return new ec(r)}(this)}pipeThrough(t,r={}){if(!ci(this))throw Bi("pipeThrough");Gn(t,1,"pipeThrough");const n=function(s,a){Fn(s,a);const o=s==null?void 0:s.readable;Zu(o,"readable","ReadableWritablePair"),B0(o,a+" has member 'readable' that");const c=s==null?void 0:s.writable;return Zu(c,"writable","ReadableWritablePair"),Ad(c,a+" has member 'writable' that"),{readable:o,writable:c}}(t,"First parameter"),i=zl(r,"Second parameter");if(yi(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(_s(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return Ha(Bl(this,n.writable,i.preventClose,i.preventAbort,i.preventCancel,i.signal)),n.readable}pipeTo(t,r={}){if(!ci(this))return Wt(Bi("pipeTo"));if(t===void 0)return Wt("Parameter 1 is required in 'pipeTo'.");if(!ds(t))return Wt(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let n;try{n=zl(r,"Second parameter")}catch(i){return Wt(i)}return yi(this)?Wt(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):_s(t)?Wt(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Bl(this,t,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!ci(this))throw Bi("tee");const t=function(r,n){const i=So(r);let s,a,o,c,u,h=!1,f=!1,p=!1;const d=sr(A=>{u=A});function S(){return h||(h=!0,Nc(i,{_chunkSteps:A=>{rd(()=>{h=!1;const C=A,B=A;f||uc(o._readableStreamController,C),p||uc(c._readableStreamController,B)})},_closeSteps:()=>{h=!1,f||Na(o._readableStreamController),p||Na(c._readableStreamController),f&&p||u(void 0)},_errorSteps:()=>{h=!1}})),ve(void 0)}function k(){}return o=s0(k,S,function(A){if(f=!0,s=A,p){const C=vu([s,a]),B=Hi(r,C);u(B)}return d}),c=s0(k,S,function(A){if(p=!0,a=A,f){const C=vu([s,a]),B=Hi(r,C);u(B)}return d}),ed(i._closedPromise,A=>{Ei(o._readableStreamController,A),Ei(c._readableStreamController,A),f&&p||u(void 0)}),[o,c]}(this);return vu(t)}values(t){if(!ci(this))throw Bi("values");return function(r,n){const i=So(r),s=new Cp(i,n),a=Object.create(fd);return a._asyncIteratorImpl=s,a}(this,function(r,n){return Fn(r,n),{preventCancel:!!(r!=null&&r.preventCancel)}}(t,"First parameter").preventCancel)}}function s0(e,t,r,n=1,i=()=>1){const s=Object.create(ps.prototype);return Kd(s),zd(s,Object.create(Da.prototype),e,t,r,n,i),s}function Kd(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function ci(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")}function yi(e){return e._reader!==void 0}function Hi(e,t){return e._disturbed=!0,e._state==="closed"?ve(void 0):e._state==="errored"?Wt(e._storedError):(Ga(e),Wi(e._readableStreamController[D0](t),R0))}function Ga(e){e._state="closed";const t=e._reader;t!==void 0&&(sd(t),$i(t)&&(t._readRequests.forEach(r=>{r._closeSteps()}),t._readRequests=new En))}function Fd(e,t){e._state="errored",e._storedError=t;const r=e._reader;r!==void 0&&(U0(r,t),$i(r)?(r._readRequests.forEach(n=>{n._errorSteps(t)}),r._readRequests=new En):(r._readIntoRequests.forEach(n=>{n._errorSteps(t)}),r._readIntoRequests=new En))}function Bi(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ld(e,t){Fn(e,t);const r=e==null?void 0:e.highWaterMark;return Zu(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:N0(r)}}Object.defineProperties(ps.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(ps.prototype,ae.toStringTag,{value:"ReadableStream",configurable:!0}),typeof ae.asyncIterator=="symbol"&&Object.defineProperty(ps.prototype,ae.asyncIterator,{value:ps.prototype.values,writable:!0,configurable:!0});const Wp=function(e){return e.byteLength};class a0{constructor(t){Gn(t,1,"ByteLengthQueuingStrategy"),t=Ld(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Fl(this))throw Kl("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Fl(this))throw Kl("size");return Wp}}function Kl(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Fl(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")}Object.defineProperties(a0.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(a0.prototype,ae.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const Hp=function(){return 1};class o0{constructor(t){Gn(t,1,"CountQueuingStrategy"),t=Ld(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!jl(this))throw Ll("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!jl(this))throw Ll("size");return Hp}}function Ll(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function jl(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")}function Gp(e,t,r){return Gr(e,r),n=>ss(e,t,[n])}function Vp(e,t,r){return Gr(e,r),n=>Dc(e,t,[n])}function Yp(e,t,r){return Gr(e,r),(n,i)=>ss(e,t,[n,i])}Object.defineProperties(o0.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(o0.prototype,ae.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class c0{constructor(t={},r={},n={}){t===void 0&&(t=null);const i=nc(r,"Second parameter"),s=nc(n,"Third parameter"),a=function(p,d){Fn(p,d);const S=p==null?void 0:p.flush,k=p==null?void 0:p.readableType,A=p==null?void 0:p.start,C=p==null?void 0:p.transform,B=p==null?void 0:p.writableType;return{flush:S===void 0?void 0:Gp(S,p,d+" has member 'flush' that"),readableType:k,start:A===void 0?void 0:Vp(A,p,d+" has member 'start' that"),transform:C===void 0?void 0:Yp(C,p,d+" has member 'transform' that"),writableType:B}}(t,"First parameter");if(a.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(a.writableType!==void 0)throw new RangeError("Invalid writableType specified");const o=Ia(s,0),c=rc(s),u=Ia(i,1),h=rc(i);let f;(function(p,d,S,k,A,C){function B(){return d}function R(l){return function(m,v){const y=m._transformStreamController;return m._backpressure?Wi(m._backpressureChangePromise,()=>{const w=m._writable;if(w._state==="erroring")throw w._storedError;return $l(y,v)}):$l(y,v)}(p,l)}function D(l){return function(m,v){return lc(m,v),ve(void 0)}(p,l)}function L(){return function(l){const m=l._readable,v=l._transformStreamController,y=v._flushAlgorithm();return jd(v),Wi(y,()=>{if(m._state==="errored")throw m._storedError;Na(m._readableStreamController)},w=>{throw lc(l,w),m._storedError})}(p)}function g(){return function(l){return hc(l,!1),l._backpressureChangePromise}(p)}function I(l){return Kc(p,l),ve(void 0)}p._writable=function(l,m,v,y,w=1,N=()=>1){const O=Object.create(ic.prototype);return Ed(O),Cd(O,Object.create(Ua.prototype),l,m,v,y,w,N),O}(B,R,L,D,S,k),p._readable=s0(B,g,I,A,C),p._backpressure=void 0,p._backpressureChangePromise=void 0,p._backpressureChangePromise_resolve=void 0,hc(p,!0),p._transformStreamController=void 0})(this,sr(p=>{f=p}),u,h,o,c),function(p,d){const S=Object.create(fc.prototype);let k=C=>{try{return qd(S,C),ve(void 0)}catch(B){return Wt(B)}},A=()=>ve(void 0);d.transform!==void 0&&(k=C=>d.transform(C,S)),d.flush!==void 0&&(A=()=>d.flush(S)),function(C,B,R,D){B._controlledTransformStream=C,C._transformStreamController=B,B._transformAlgorithm=R,B._flushAlgorithm=D}(p,S,k,A)}(this,a),a.start!==void 0?f(a.start(this._transformStreamController)):f(void 0)}get readable(){if(!ql(this))throw Wl("readable");return this._readable}get writable(){if(!ql(this))throw Wl("writable");return this._writable}}function ql(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")}function lc(e,t){Ei(e._readable._readableStreamController,t),Kc(e,t)}function Kc(e,t){jd(e._transformStreamController),n0(e._writable._writableStreamController,t),e._backpressure&&hc(e,!1)}function hc(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=sr(r=>{e._backpressureChangePromise_resolve=r}),e._backpressure=t}Object.defineProperties(c0.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(c0.prototype,ae.toStringTag,{value:"TransformStream",configurable:!0});class fc{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!uo(this))throw lo("desiredSize");return V0(this._controlledTransformStream._readable._readableStreamController)}enqueue(t){if(!uo(this))throw lo("enqueue");qd(this,t)}error(t){if(!uo(this))throw lo("error");var r;r=t,lc(this._controlledTransformStream,r)}terminate(){if(!uo(this))throw lo("terminate");(function(t){const r=t._controlledTransformStream;Na(r._readable._readableStreamController),Kc(r,new TypeError("TransformStream terminated"))})(this)}}function uo(e){return!!br(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")}function jd(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function qd(e,t){const r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!Ms(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{uc(n,t)}catch(i){throw Kc(r,i),r._readable._storedError}(function(i){return!Bd(i)})(n)!==r._backpressure&&hc(r,!0)}function $l(e,t){return Wi(e._transformAlgorithm(t),void 0,r=>{throw lc(e._controlledTransformStream,r),r})}function lo(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Wl(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(fc.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof ae.toStringTag=="symbol"&&Object.defineProperty(fc.prototype,ae.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var Jp=Object.freeze({__proto__:null,ByteLengthQueuingStrategy:a0,CountQueuingStrategy:o0,ReadableByteStreamController:Qo,ReadableStream:ps,ReadableStreamBYOBReader:ec,ReadableStreamBYOBRequest:Zo,ReadableStreamDefaultController:Da,ReadableStreamDefaultReader:Jo,TransformStream:c0,TransformStreamDefaultController:fc,WritableStream:ic,WritableStreamDefaultController:Ua,WritableStreamDefaultWriter:ac}),$d=function(e,t){return($d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(e,t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Wd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+t+" is not a constructor or null");function r(){this.constructor=e}$d(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function kr(e){if(!e)throw new TypeError("Assertion failed")}function ya(){}function Y0(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Au(e){if(typeof e!="function")return!1;var t=!1;try{new e({start:function(){t=!0}})}catch{}return t}function J0(e){return!!Y0(e)&&typeof e.getReader=="function"}function X0(e){return!!Y0(e)&&typeof e.getWriter=="function"}function Hd(e){return!!Y0(e)&&!!J0(e.readable)&&!!X0(e.writable)}function Gd(e){try{return e.getReader({mode:"byob"}).releaseLock(),!0}catch{return!1}}function Su(e,t){var r=(t===void 0?{}:t).type;return kr(J0(e)),kr(e.locked===!1),(r=Vd(r))==="bytes"?new Zp(e):new Xp(e)}function Vd(e){var t=e+"";if(t==="bytes")return t;if(e===void 0)return e;throw new RangeError("Invalid type is specified")}var Yd=function(){function e(t){this._underlyingReader=void 0,this._readerMode=void 0,this._readableStreamController=void 0,this._pendingRead=void 0,this._underlyingStream=t,this._attachDefaultReader()}return e.prototype.start=function(t){this._readableStreamController=t},e.prototype.cancel=function(t){return kr(this._underlyingReader!==void 0),this._underlyingReader.cancel(t)},e.prototype._attachDefaultReader=function(){if(this._readerMode!=="default"){this._detachReader();var t=this._underlyingStream.getReader();this._readerMode="default",this._attachReader(t)}},e.prototype._attachReader=function(t){var r=this;kr(this._underlyingReader===void 0),this._underlyingReader=t;var n=this._underlyingReader.closed;n&&n.then(function(){return r._finishPendingRead()}).then(function(){t===r._underlyingReader&&r._readableStreamController.close()},function(i){t===r._underlyingReader&&r._readableStreamController.error(i)}).catch(ya)},e.prototype._detachReader=function(){this._underlyingReader!==void 0&&(this._underlyingReader.releaseLock(),this._underlyingReader=void 0,this._readerMode=void 0)},e.prototype._pullWithDefaultReader=function(){var t=this;this._attachDefaultReader();var r=this._underlyingReader.read().then(function(n){var i=t._readableStreamController;n.done?t._tryClose():i.enqueue(n.value)});return this._setPendingRead(r),r},e.prototype._tryClose=function(){try{this._readableStreamController.close()}catch{}},e.prototype._setPendingRead=function(t){var r,n=this,i=function(){n._pendingRead===r&&(n._pendingRead=void 0)};this._pendingRead=r=t.then(i,i)},e.prototype._finishPendingRead=function(){var t=this;if(this._pendingRead){var r=function(){return t._finishPendingRead()};return this._pendingRead.then(r,r)}},e}(),Xp=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Wd(t,e),t.prototype.pull=function(){return this._pullWithDefaultReader()},t}(Yd);function Hl(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}var Zp=function(e){function t(r){var n=this,i=Gd(r);return(n=e.call(this,r)||this)._supportsByob=i,n}return Wd(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"bytes"},enumerable:!1,configurable:!0}),t.prototype._attachByobReader=function(){if(this._readerMode!=="byob"){kr(this._supportsByob),this._detachReader();var r=this._underlyingStream.getReader({mode:"byob"});this._readerMode="byob",this._attachReader(r)}},t.prototype.pull=function(){if(this._supportsByob){var r=this._readableStreamController.byobRequest;if(r)return this._pullWithByobRequest(r)}return this._pullWithDefaultReader()},t.prototype._pullWithByobRequest=function(r){var n=this;this._attachByobReader();var i=new Uint8Array(r.view.byteLength),s=this._underlyingReader.read(i).then(function(a){var o,c,u;n._readableStreamController,a.done?(n._tryClose(),r.respond(0)):(o=a.value,c=r.view,u=Hl(o),Hl(c).set(u,0),r.respond(a.value.byteLength))});return this._setPendingRead(s),s},t}(Yd);function Gl(e){kr(X0(e)),kr(e.locked===!1);var t=e.getWriter();return new Qp(t)}var Qp=function(){function e(t){var r=this;this._writableStreamController=void 0,this._pendingWrite=void 0,this._state="writable",this._storedError=void 0,this._underlyingWriter=t,this._errorPromise=new Promise(function(n,i){r._errorPromiseReject=i}),this._errorPromise.catch(ya)}return e.prototype.start=function(t){var r=this;this._writableStreamController=t,this._underlyingWriter.closed.then(function(){r._state="closed"}).catch(function(n){return r._finishErroring(n)})},e.prototype.write=function(t){var r=this,n=this._underlyingWriter;if(n.desiredSize===null)return n.ready;var i=n.write(t);i.catch(function(a){return r._finishErroring(a)}),n.ready.catch(function(a){return r._startErroring(a)});var s=Promise.race([i,this._errorPromise]);return this._setPendingWrite(s),s},e.prototype.close=function(){var t=this;return this._pendingWrite===void 0?this._underlyingWriter.close():this._finishPendingWrite().then(function(){return t.close()})},e.prototype.abort=function(t){if(this._state!=="errored")return this._underlyingWriter.abort(t)},e.prototype._setPendingWrite=function(t){var r,n=this,i=function(){n._pendingWrite===r&&(n._pendingWrite=void 0)};this._pendingWrite=r=t.then(i,i)},e.prototype._finishPendingWrite=function(){var t=this;if(this._pendingWrite===void 0)return Promise.resolve();var r=function(){return t._finishPendingWrite()};return this._pendingWrite.then(r,r)},e.prototype._startErroring=function(t){var r=this;if(this._state==="writable"){this._state="erroring",this._storedError=t;var n=function(){return r._finishErroring(t)};this._pendingWrite===void 0?n():this._finishPendingWrite().then(n,n),this._writableStreamController.error(t)}},e.prototype._finishErroring=function(t){this._state==="writable"&&this._startErroring(t),this._state==="erroring"&&(this._state="errored",this._errorPromiseReject(this._storedError))},e}();function Vl(e){kr(Hd(e));var t=e.readable,r=e.writable;kr(t.locked===!1),kr(r.locked===!1);var n,i=t.getReader();try{n=r.getWriter()}catch(s){throw i.releaseLock(),s}return new t6(i,n)}var t6=function(){function e(t,r){var n=this;this._transformStreamController=void 0,this._onRead=function(i){if(!i.done)return n._transformStreamController.enqueue(i.value),n._reader.read().then(n._onRead)},this._onError=function(i){n._flushReject(i),n._transformStreamController.error(i),n._reader.cancel(i).catch(ya),n._writer.abort(i).catch(ya)},this._onTerminate=function(){n._flushResolve(),n._transformStreamController.terminate();var i=new TypeError("TransformStream terminated");n._writer.abort(i).catch(ya)},this._reader=t,this._writer=r,this._flushPromise=new Promise(function(i,s){n._flushResolve=i,n._flushReject=s})}return e.prototype.start=function(t){this._transformStreamController=t,this._reader.read().then(this._onRead).then(this._onTerminate,this._onError);var r=this._reader.closed;r&&r.then(this._onTerminate,this._onError)},e.prototype.transform=function(t){return this._writer.write(t)},e.prototype.flush=function(){var t=this;return this._writer.close().then(function(){return t._flushPromise})},e}(),e6=Object.freeze({__proto__:null,createReadableStreamWrapper:function(e){kr(function(r){return!!Au(r)&&!!J0(new r)}(e));var t=function(r){try{return new r({type:"bytes"}),!0}catch{return!1}}(e);return function(r,n){var i=(n===void 0?{}:n).type;if((i=Vd(i))!=="bytes"||t||(i=void 0),r.constructor===e&&(i!=="bytes"||Gd(r)))return r;if(i==="bytes"){var s=Su(r,{type:i});return new e(s)}return s=Su(r),new e(s)}},createTransformStreamWrapper:function(e){return kr(function(t){return!!Au(t)&&!!Hd(new t)}(e)),function(t){if(t.constructor===e)return t;var r=Vl(t);return new e(r)}},createWrappingReadableSource:Su,createWrappingTransformer:Vl,createWrappingWritableSink:Gl,createWritableStreamWrapper:function(e){return kr(function(t){return!!Au(t)&&!!X0(new t)}(e)),function(t){if(t.constructor===e)return t;var r=Gl(t);return new e(r)}}}),Rt=xn(function(e){(function(t,r){function n(l,m){if(!l)throw Error(m||"Assertion failed")}function i(l,m){l.super_=m;var v=function(){};v.prototype=m.prototype,l.prototype=new v,l.prototype.constructor=l}function s(l,m,v){if(s.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,l!==null&&(m!=="le"&&m!=="be"||(v=m,m=10),this._init(l||0,m||10,v||"be"))}var a;typeof t=="object"?t.exports=s:r.BN=s,s.BN=s,s.wordSize=26;try{a=void 0}catch{}function o(l,m,v){for(var y=0,w=Math.min(l.length,v),N=m;N<w;N++){var O=l.charCodeAt(N)-48;y<<=4,y|=O>=49&&O<=54?O-49+10:O>=17&&O<=22?O-17+10:15&O}return y}function c(l,m,v,y){for(var w=0,N=Math.min(l.length,v),O=m;O<N;O++){var W=l.charCodeAt(O)-48;w*=y,w+=W>=49?W-49+10:W>=17?W-17+10:W}return w}s.isBN=function(l){return l instanceof s||l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,m){return l.cmp(m)>0?l:m},s.min=function(l,m){return l.cmp(m)<0?l:m},s.prototype._init=function(l,m,v){if(typeof l=="number")return this._initNumber(l,m,v);if(typeof l=="object")return this._initArray(l,m,v);m==="hex"&&(m=16),n(m===(0|m)&&m>=2&&m<=36);var y=0;(l=l.toString().replace(/\s+/g,""))[0]==="-"&&y++,m===16?this._parseHex(l,y):this._parseBase(l,m,y),l[0]==="-"&&(this.negative=1),this.strip(),v==="le"&&this._initArray(this.toArray(),m,v)},s.prototype._initNumber=function(l,m,v){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[67108863&l],this.length=1):l<4503599627370496?(this.words=[67108863&l,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[67108863&l,l/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),m,v)},s.prototype._initArray=function(l,m,v){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var w,N,O=0;if(v==="be")for(y=l.length-1,w=0;y>=0;y-=3)N=l[y]|l[y-1]<<8|l[y-2]<<16,this.words[w]|=N<<O&67108863,this.words[w+1]=N>>>26-O&67108863,(O+=24)>=26&&(O-=26,w++);else if(v==="le")for(y=0,w=0;y<l.length;y+=3)N=l[y]|l[y+1]<<8|l[y+2]<<16,this.words[w]|=N<<O&67108863,this.words[w+1]=N>>>26-O&67108863,(O+=24)>=26&&(O-=26,w++);return this.strip()},s.prototype._parseHex=function(l,m){this.length=Math.ceil((l.length-m)/6),this.words=Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var y,w,N=0;for(v=l.length-6,y=0;v>=m;v-=6)w=o(l,v,v+6),this.words[y]|=w<<N&67108863,this.words[y+1]|=w>>>26-N&4194303,(N+=24)>=26&&(N-=26,y++);v+6!==m&&(w=o(l,m,v+6),this.words[y]|=w<<N&67108863,this.words[y+1]|=w>>>26-N&4194303),this.strip()},s.prototype._parseBase=function(l,m,v){this.words=[0],this.length=1;for(var y=0,w=1;w<=67108863;w*=m)y++;y--,w=w/m|0;for(var N=l.length-v,O=N%y,W=Math.min(N,N-O)+v,Z=0,b=v;b<W;b+=y)Z=c(l,b,b+y,m),this.imuln(w),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z);if(O!==0){var U=1;for(Z=c(l,b,l.length,m),b=0;b<O;b++)U*=m;this.imuln(U),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z)}},s.prototype.copy=function(l){l.words=Array(this.length);for(var m=0;m<this.length;m++)l.words[m]=this.words[m];l.length=this.length,l.negative=this.negative,l.red=this.red},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(l,m,v){v.negative=m.negative^l.negative;var y=l.length+m.length|0;v.length=y,y=y-1|0;var w=0|l.words[0],N=0|m.words[0],O=w*N,W=67108863&O,Z=O/67108864|0;v.words[0]=W;for(var b=1;b<y;b++){for(var U=Z>>>26,G=67108863&Z,Q=Math.min(b,m.length-1),it=Math.max(0,b-l.length+1);it<=Q;it++){var ht=b-it|0;U+=(O=(w=0|l.words[ht])*(N=0|m.words[it])+G)/67108864|0,G=67108863&O}v.words[b]=0|G,Z=0|U}return Z!==0?v.words[b]=0|Z:v.length--,v.strip()}s.prototype.toString=function(l,m){var v;if(m=0|m||1,(l=l||10)===16||l==="hex"){v="";for(var y=0,w=0,N=0;N<this.length;N++){var O=this.words[N],W=(16777215&(O<<y|w)).toString(16);v=(w=O>>>24-y&16777215)!==0||N!==this.length-1?u[6-W.length]+W+v:W+v,(y+=2)>=26&&(y-=26,N--)}for(w!==0&&(v=w.toString(16)+v);v.length%m!=0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(l===(0|l)&&l>=2&&l<=36){var Z=h[l],b=f[l];v="";var U=this.clone();for(U.negative=0;!U.isZero();){var G=U.modn(b).toString(l);v=(U=U.idivn(b)).isZero()?G+v:u[Z-G.length]+G+v}for(this.isZero()&&(v="0"+v);v.length%m!=0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=67108864*this.words[1]:this.length===3&&this.words[2]===1?l+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(l,m){return n(a!==void 0),this.toArrayLike(a,l,m)},s.prototype.toArray=function(l,m){return this.toArrayLike(Array,l,m)},s.prototype.toArrayLike=function(l,m,v){var y=this.byteLength(),w=v||Math.max(1,y);n(y<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0"),this.strip();var N,O,W=m==="le",Z=new l(w),b=this.clone();if(W){for(O=0;!b.isZero();O++)N=b.andln(255),b.iushrn(8),Z[O]=N;for(;O<w;O++)Z[O]=0}else{for(O=0;O<w-y;O++)Z[O]=0;for(O=0;!b.isZero();O++)N=b.andln(255),b.iushrn(8),Z[w-O-1]=N}return Z},s.prototype._countBits=Math.clz32?function(l){return 32-Math.clz32(l)}:function(l){var m=l,v=0;return m>=4096&&(v+=13,m>>>=13),m>=64&&(v+=7,m>>>=7),m>=8&&(v+=4,m>>>=4),m>=2&&(v+=2,m>>>=2),v+m},s.prototype._zeroBits=function(l){if(l===0)return 26;var m=l,v=0;return(8191&m)==0&&(v+=13,m>>>=13),(127&m)==0&&(v+=7,m>>>=7),(15&m)==0&&(v+=4,m>>>=4),(3&m)==0&&(v+=2,m>>>=2),(1&m)==0&&v++,v},s.prototype.bitLength=function(){var l=this.words[this.length-1],m=this._countBits(l);return 26*(this.length-1)+m},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,m=0;m<this.length;m++){var v=this._zeroBits(this.words[m]);if(l+=v,v!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var m=0;m<l.length;m++)this.words[m]=this.words[m]|l.words[m];return this.strip()},s.prototype.ior=function(l){return n((this.negative|l.negative)==0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var m;m=this.length>l.length?l:this;for(var v=0;v<m.length;v++)this.words[v]=this.words[v]&l.words[v];return this.length=m.length,this.strip()},s.prototype.iand=function(l){return n((this.negative|l.negative)==0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var m,v;this.length>l.length?(m=this,v=l):(m=l,v=this);for(var y=0;y<v.length;y++)this.words[y]=m.words[y]^v.words[y];if(this!==m)for(;y<m.length;y++)this.words[y]=m.words[y];return this.length=m.length,this.strip()},s.prototype.ixor=function(l){return n((this.negative|l.negative)==0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var m=0|Math.ceil(l/26),v=l%26;this._expand(m),v>0&&m--;for(var y=0;y<m;y++)this.words[y]=67108863&~this.words[y];return v>0&&(this.words[y]=~this.words[y]&67108863>>26-v),this.strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,m){n(typeof l=="number"&&l>=0);var v=l/26|0,y=l%26;return this._expand(v+1),this.words[v]=m?this.words[v]|1<<y:this.words[v]&~(1<<y),this.strip()},s.prototype.iadd=function(l){var m,v,y;if(this.negative!==0&&l.negative===0)return this.negative=0,m=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,m=this.isub(l),l.negative=1,m._normSign();this.length>l.length?(v=this,y=l):(v=l,y=this);for(var w=0,N=0;N<y.length;N++)m=(0|v.words[N])+(0|y.words[N])+w,this.words[N]=67108863&m,w=m>>>26;for(;w!==0&&N<v.length;N++)m=(0|v.words[N])+w,this.words[N]=67108863&m,w=m>>>26;if(this.length=v.length,w!==0)this.words[this.length]=w,this.length++;else if(v!==this)for(;N<v.length;N++)this.words[N]=v.words[N];return this},s.prototype.add=function(l){var m;return l.negative!==0&&this.negative===0?(l.negative=0,m=this.sub(l),l.negative^=1,m):l.negative===0&&this.negative!==0?(this.negative=0,m=l.sub(this),this.negative=1,m):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var m=this.iadd(l);return l.negative=1,m._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var v,y,w=this.cmp(l);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;w>0?(v=this,y=l):(v=l,y=this);for(var N=0,O=0;O<y.length;O++)N=(m=(0|v.words[O])-(0|y.words[O])+N)>>26,this.words[O]=67108863&m;for(;N!==0&&O<v.length;O++)N=(m=(0|v.words[O])+N)>>26,this.words[O]=67108863&m;if(N===0&&O<v.length&&v!==this)for(;O<v.length;O++)this.words[O]=v.words[O];return this.length=Math.max(this.length,O),v!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(l){return this.clone().isub(l)};var d=function(l,m,v){var y,w,N,O=l.words,W=m.words,Z=v.words,b=0,U=0|O[0],G=8191&U,Q=U>>>13,it=0|O[1],ht=8191&it,ut=it>>>13,lt=0|O[2],j=8191&lt,tt=lt>>>13,F=0|O[3],x=8191&F,Y=F>>>13,P=0|O[4],T=8191&P,z=P>>>13,E=0|O[5],_=8191&E,M=E>>>13,K=0|O[6],X=8191&K,J=K>>>13,nt=0|O[7],pt=8191&nt,gt=nt>>>13,Et=0|O[8],et=8191&Et,rt=Et>>>13,ot=0|O[9],st=8191&ot,at=ot>>>13,ct=0|W[0],$=8191&ct,q=ct>>>13,_t=0|W[1],vt=8191&_t,Dt=_t>>>13,ie=0|W[2],zt=8191&ie,Bt=ie>>>13,pe=0|W[3],Qt=8191&pe,re=pe>>>13,Te=0|W[4],Nt=8191&Te,jt=Te>>>13,se=0|W[5],Ut=8191&se,Jt=se>>>13,fe=0|W[6],qt=8191&fe,mt=fe>>>13,yt=0|W[7],wt=8191&yt,Tt=yt>>>13,Kt=0|W[8],Ot=8191&Kt,It=Kt>>>13,ce=0|W[9],Xt=8191&ce,le=ce>>>13;v.negative=l.negative^m.negative,v.length=19;var tr=(b+(y=Math.imul(G,$))|0)+((8191&(w=(w=Math.imul(G,q))+Math.imul(Q,$)|0))<<13)|0;b=((N=Math.imul(Q,q))+(w>>>13)|0)+(tr>>>26)|0,tr&=67108863,y=Math.imul(ht,$),w=(w=Math.imul(ht,q))+Math.imul(ut,$)|0,N=Math.imul(ut,q);var er=(b+(y=y+Math.imul(G,vt)|0)|0)+((8191&(w=(w=w+Math.imul(G,Dt)|0)+Math.imul(Q,vt)|0))<<13)|0;b=((N=N+Math.imul(Q,Dt)|0)+(w>>>13)|0)+(er>>>26)|0,er&=67108863,y=Math.imul(j,$),w=(w=Math.imul(j,q))+Math.imul(tt,$)|0,N=Math.imul(tt,q),y=y+Math.imul(ht,vt)|0,w=(w=w+Math.imul(ht,Dt)|0)+Math.imul(ut,vt)|0,N=N+Math.imul(ut,Dt)|0;var ur=(b+(y=y+Math.imul(G,zt)|0)|0)+((8191&(w=(w=w+Math.imul(G,Bt)|0)+Math.imul(Q,zt)|0))<<13)|0;b=((N=N+Math.imul(Q,Bt)|0)+(w>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(x,$),w=(w=Math.imul(x,q))+Math.imul(Y,$)|0,N=Math.imul(Y,q),y=y+Math.imul(j,vt)|0,w=(w=w+Math.imul(j,Dt)|0)+Math.imul(tt,vt)|0,N=N+Math.imul(tt,Dt)|0,y=y+Math.imul(ht,zt)|0,w=(w=w+Math.imul(ht,Bt)|0)+Math.imul(ut,zt)|0,N=N+Math.imul(ut,Bt)|0;var Vr=(b+(y=y+Math.imul(G,Qt)|0)|0)+((8191&(w=(w=w+Math.imul(G,re)|0)+Math.imul(Q,Qt)|0))<<13)|0;b=((N=N+Math.imul(Q,re)|0)+(w>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,y=Math.imul(T,$),w=(w=Math.imul(T,q))+Math.imul(z,$)|0,N=Math.imul(z,q),y=y+Math.imul(x,vt)|0,w=(w=w+Math.imul(x,Dt)|0)+Math.imul(Y,vt)|0,N=N+Math.imul(Y,Dt)|0,y=y+Math.imul(j,zt)|0,w=(w=w+Math.imul(j,Bt)|0)+Math.imul(tt,zt)|0,N=N+Math.imul(tt,Bt)|0,y=y+Math.imul(ht,Qt)|0,w=(w=w+Math.imul(ht,re)|0)+Math.imul(ut,Qt)|0,N=N+Math.imul(ut,re)|0;var Yr=(b+(y=y+Math.imul(G,Nt)|0)|0)+((8191&(w=(w=w+Math.imul(G,jt)|0)+Math.imul(Q,Nt)|0))<<13)|0;b=((N=N+Math.imul(Q,jt)|0)+(w>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,y=Math.imul(_,$),w=(w=Math.imul(_,q))+Math.imul(M,$)|0,N=Math.imul(M,q),y=y+Math.imul(T,vt)|0,w=(w=w+Math.imul(T,Dt)|0)+Math.imul(z,vt)|0,N=N+Math.imul(z,Dt)|0,y=y+Math.imul(x,zt)|0,w=(w=w+Math.imul(x,Bt)|0)+Math.imul(Y,zt)|0,N=N+Math.imul(Y,Bt)|0,y=y+Math.imul(j,Qt)|0,w=(w=w+Math.imul(j,re)|0)+Math.imul(tt,Qt)|0,N=N+Math.imul(tt,re)|0,y=y+Math.imul(ht,Nt)|0,w=(w=w+Math.imul(ht,jt)|0)+Math.imul(ut,Nt)|0,N=N+Math.imul(ut,jt)|0;var Jr=(b+(y=y+Math.imul(G,Ut)|0)|0)+((8191&(w=(w=w+Math.imul(G,Jt)|0)+Math.imul(Q,Ut)|0))<<13)|0;b=((N=N+Math.imul(Q,Jt)|0)+(w>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,y=Math.imul(X,$),w=(w=Math.imul(X,q))+Math.imul(J,$)|0,N=Math.imul(J,q),y=y+Math.imul(_,vt)|0,w=(w=w+Math.imul(_,Dt)|0)+Math.imul(M,vt)|0,N=N+Math.imul(M,Dt)|0,y=y+Math.imul(T,zt)|0,w=(w=w+Math.imul(T,Bt)|0)+Math.imul(z,zt)|0,N=N+Math.imul(z,Bt)|0,y=y+Math.imul(x,Qt)|0,w=(w=w+Math.imul(x,re)|0)+Math.imul(Y,Qt)|0,N=N+Math.imul(Y,re)|0,y=y+Math.imul(j,Nt)|0,w=(w=w+Math.imul(j,jt)|0)+Math.imul(tt,Nt)|0,N=N+Math.imul(tt,jt)|0,y=y+Math.imul(ht,Ut)|0,w=(w=w+Math.imul(ht,Jt)|0)+Math.imul(ut,Ut)|0,N=N+Math.imul(ut,Jt)|0;var Xr=(b+(y=y+Math.imul(G,qt)|0)|0)+((8191&(w=(w=w+Math.imul(G,mt)|0)+Math.imul(Q,qt)|0))<<13)|0;b=((N=N+Math.imul(Q,mt)|0)+(w>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,y=Math.imul(pt,$),w=(w=Math.imul(pt,q))+Math.imul(gt,$)|0,N=Math.imul(gt,q),y=y+Math.imul(X,vt)|0,w=(w=w+Math.imul(X,Dt)|0)+Math.imul(J,vt)|0,N=N+Math.imul(J,Dt)|0,y=y+Math.imul(_,zt)|0,w=(w=w+Math.imul(_,Bt)|0)+Math.imul(M,zt)|0,N=N+Math.imul(M,Bt)|0,y=y+Math.imul(T,Qt)|0,w=(w=w+Math.imul(T,re)|0)+Math.imul(z,Qt)|0,N=N+Math.imul(z,re)|0,y=y+Math.imul(x,Nt)|0,w=(w=w+Math.imul(x,jt)|0)+Math.imul(Y,Nt)|0,N=N+Math.imul(Y,jt)|0,y=y+Math.imul(j,Ut)|0,w=(w=w+Math.imul(j,Jt)|0)+Math.imul(tt,Ut)|0,N=N+Math.imul(tt,Jt)|0,y=y+Math.imul(ht,qt)|0,w=(w=w+Math.imul(ht,mt)|0)+Math.imul(ut,qt)|0,N=N+Math.imul(ut,mt)|0;var Zr=(b+(y=y+Math.imul(G,wt)|0)|0)+((8191&(w=(w=w+Math.imul(G,Tt)|0)+Math.imul(Q,wt)|0))<<13)|0;b=((N=N+Math.imul(Q,Tt)|0)+(w>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,y=Math.imul(et,$),w=(w=Math.imul(et,q))+Math.imul(rt,$)|0,N=Math.imul(rt,q),y=y+Math.imul(pt,vt)|0,w=(w=w+Math.imul(pt,Dt)|0)+Math.imul(gt,vt)|0,N=N+Math.imul(gt,Dt)|0,y=y+Math.imul(X,zt)|0,w=(w=w+Math.imul(X,Bt)|0)+Math.imul(J,zt)|0,N=N+Math.imul(J,Bt)|0,y=y+Math.imul(_,Qt)|0,w=(w=w+Math.imul(_,re)|0)+Math.imul(M,Qt)|0,N=N+Math.imul(M,re)|0,y=y+Math.imul(T,Nt)|0,w=(w=w+Math.imul(T,jt)|0)+Math.imul(z,Nt)|0,N=N+Math.imul(z,jt)|0,y=y+Math.imul(x,Ut)|0,w=(w=w+Math.imul(x,Jt)|0)+Math.imul(Y,Ut)|0,N=N+Math.imul(Y,Jt)|0,y=y+Math.imul(j,qt)|0,w=(w=w+Math.imul(j,mt)|0)+Math.imul(tt,qt)|0,N=N+Math.imul(tt,mt)|0,y=y+Math.imul(ht,wt)|0,w=(w=w+Math.imul(ht,Tt)|0)+Math.imul(ut,wt)|0,N=N+Math.imul(ut,Tt)|0;var Qr=(b+(y=y+Math.imul(G,Ot)|0)|0)+((8191&(w=(w=w+Math.imul(G,It)|0)+Math.imul(Q,Ot)|0))<<13)|0;b=((N=N+Math.imul(Q,It)|0)+(w>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,y=Math.imul(st,$),w=(w=Math.imul(st,q))+Math.imul(at,$)|0,N=Math.imul(at,q),y=y+Math.imul(et,vt)|0,w=(w=w+Math.imul(et,Dt)|0)+Math.imul(rt,vt)|0,N=N+Math.imul(rt,Dt)|0,y=y+Math.imul(pt,zt)|0,w=(w=w+Math.imul(pt,Bt)|0)+Math.imul(gt,zt)|0,N=N+Math.imul(gt,Bt)|0,y=y+Math.imul(X,Qt)|0,w=(w=w+Math.imul(X,re)|0)+Math.imul(J,Qt)|0,N=N+Math.imul(J,re)|0,y=y+Math.imul(_,Nt)|0,w=(w=w+Math.imul(_,jt)|0)+Math.imul(M,Nt)|0,N=N+Math.imul(M,jt)|0,y=y+Math.imul(T,Ut)|0,w=(w=w+Math.imul(T,Jt)|0)+Math.imul(z,Ut)|0,N=N+Math.imul(z,Jt)|0,y=y+Math.imul(x,qt)|0,w=(w=w+Math.imul(x,mt)|0)+Math.imul(Y,qt)|0,N=N+Math.imul(Y,mt)|0,y=y+Math.imul(j,wt)|0,w=(w=w+Math.imul(j,Tt)|0)+Math.imul(tt,wt)|0,N=N+Math.imul(tt,Tt)|0,y=y+Math.imul(ht,Ot)|0,w=(w=w+Math.imul(ht,It)|0)+Math.imul(ut,Ot)|0,N=N+Math.imul(ut,It)|0;var tn=(b+(y=y+Math.imul(G,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(G,le)|0)+Math.imul(Q,Xt)|0))<<13)|0;b=((N=N+Math.imul(Q,le)|0)+(w>>>13)|0)+(tn>>>26)|0,tn&=67108863,y=Math.imul(st,vt),w=(w=Math.imul(st,Dt))+Math.imul(at,vt)|0,N=Math.imul(at,Dt),y=y+Math.imul(et,zt)|0,w=(w=w+Math.imul(et,Bt)|0)+Math.imul(rt,zt)|0,N=N+Math.imul(rt,Bt)|0,y=y+Math.imul(pt,Qt)|0,w=(w=w+Math.imul(pt,re)|0)+Math.imul(gt,Qt)|0,N=N+Math.imul(gt,re)|0,y=y+Math.imul(X,Nt)|0,w=(w=w+Math.imul(X,jt)|0)+Math.imul(J,Nt)|0,N=N+Math.imul(J,jt)|0,y=y+Math.imul(_,Ut)|0,w=(w=w+Math.imul(_,Jt)|0)+Math.imul(M,Ut)|0,N=N+Math.imul(M,Jt)|0,y=y+Math.imul(T,qt)|0,w=(w=w+Math.imul(T,mt)|0)+Math.imul(z,qt)|0,N=N+Math.imul(z,mt)|0,y=y+Math.imul(x,wt)|0,w=(w=w+Math.imul(x,Tt)|0)+Math.imul(Y,wt)|0,N=N+Math.imul(Y,Tt)|0,y=y+Math.imul(j,Ot)|0,w=(w=w+Math.imul(j,It)|0)+Math.imul(tt,Ot)|0,N=N+Math.imul(tt,It)|0;var Mn=(b+(y=y+Math.imul(ht,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(ht,le)|0)+Math.imul(ut,Xt)|0))<<13)|0;b=((N=N+Math.imul(ut,le)|0)+(w>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,y=Math.imul(st,zt),w=(w=Math.imul(st,Bt))+Math.imul(at,zt)|0,N=Math.imul(at,Bt),y=y+Math.imul(et,Qt)|0,w=(w=w+Math.imul(et,re)|0)+Math.imul(rt,Qt)|0,N=N+Math.imul(rt,re)|0,y=y+Math.imul(pt,Nt)|0,w=(w=w+Math.imul(pt,jt)|0)+Math.imul(gt,Nt)|0,N=N+Math.imul(gt,jt)|0,y=y+Math.imul(X,Ut)|0,w=(w=w+Math.imul(X,Jt)|0)+Math.imul(J,Ut)|0,N=N+Math.imul(J,Jt)|0,y=y+Math.imul(_,qt)|0,w=(w=w+Math.imul(_,mt)|0)+Math.imul(M,qt)|0,N=N+Math.imul(M,mt)|0,y=y+Math.imul(T,wt)|0,w=(w=w+Math.imul(T,Tt)|0)+Math.imul(z,wt)|0,N=N+Math.imul(z,Tt)|0,y=y+Math.imul(x,Ot)|0,w=(w=w+Math.imul(x,It)|0)+Math.imul(Y,Ot)|0,N=N+Math.imul(Y,It)|0;var Tn=(b+(y=y+Math.imul(j,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(j,le)|0)+Math.imul(tt,Xt)|0))<<13)|0;b=((N=N+Math.imul(tt,le)|0)+(w>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,y=Math.imul(st,Qt),w=(w=Math.imul(st,re))+Math.imul(at,Qt)|0,N=Math.imul(at,re),y=y+Math.imul(et,Nt)|0,w=(w=w+Math.imul(et,jt)|0)+Math.imul(rt,Nt)|0,N=N+Math.imul(rt,jt)|0,y=y+Math.imul(pt,Ut)|0,w=(w=w+Math.imul(pt,Jt)|0)+Math.imul(gt,Ut)|0,N=N+Math.imul(gt,Jt)|0,y=y+Math.imul(X,qt)|0,w=(w=w+Math.imul(X,mt)|0)+Math.imul(J,qt)|0,N=N+Math.imul(J,mt)|0,y=y+Math.imul(_,wt)|0,w=(w=w+Math.imul(_,Tt)|0)+Math.imul(M,wt)|0,N=N+Math.imul(M,Tt)|0,y=y+Math.imul(T,Ot)|0,w=(w=w+Math.imul(T,It)|0)+Math.imul(z,Ot)|0,N=N+Math.imul(z,It)|0;var Yn=(b+(y=y+Math.imul(x,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(x,le)|0)+Math.imul(Y,Xt)|0))<<13)|0;b=((N=N+Math.imul(Y,le)|0)+(w>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,y=Math.imul(st,Nt),w=(w=Math.imul(st,jt))+Math.imul(at,Nt)|0,N=Math.imul(at,jt),y=y+Math.imul(et,Ut)|0,w=(w=w+Math.imul(et,Jt)|0)+Math.imul(rt,Ut)|0,N=N+Math.imul(rt,Jt)|0,y=y+Math.imul(pt,qt)|0,w=(w=w+Math.imul(pt,mt)|0)+Math.imul(gt,qt)|0,N=N+Math.imul(gt,mt)|0,y=y+Math.imul(X,wt)|0,w=(w=w+Math.imul(X,Tt)|0)+Math.imul(J,wt)|0,N=N+Math.imul(J,Tt)|0,y=y+Math.imul(_,Ot)|0,w=(w=w+Math.imul(_,It)|0)+Math.imul(M,Ot)|0,N=N+Math.imul(M,It)|0;var Jn=(b+(y=y+Math.imul(T,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(T,le)|0)+Math.imul(z,Xt)|0))<<13)|0;b=((N=N+Math.imul(z,le)|0)+(w>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,y=Math.imul(st,Ut),w=(w=Math.imul(st,Jt))+Math.imul(at,Ut)|0,N=Math.imul(at,Jt),y=y+Math.imul(et,qt)|0,w=(w=w+Math.imul(et,mt)|0)+Math.imul(rt,qt)|0,N=N+Math.imul(rt,mt)|0,y=y+Math.imul(pt,wt)|0,w=(w=w+Math.imul(pt,Tt)|0)+Math.imul(gt,wt)|0,N=N+Math.imul(gt,Tt)|0,y=y+Math.imul(X,Ot)|0,w=(w=w+Math.imul(X,It)|0)+Math.imul(J,Ot)|0,N=N+Math.imul(J,It)|0;var Xn=(b+(y=y+Math.imul(_,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(_,le)|0)+Math.imul(M,Xt)|0))<<13)|0;b=((N=N+Math.imul(M,le)|0)+(w>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,y=Math.imul(st,qt),w=(w=Math.imul(st,mt))+Math.imul(at,qt)|0,N=Math.imul(at,mt),y=y+Math.imul(et,wt)|0,w=(w=w+Math.imul(et,Tt)|0)+Math.imul(rt,wt)|0,N=N+Math.imul(rt,Tt)|0,y=y+Math.imul(pt,Ot)|0,w=(w=w+Math.imul(pt,It)|0)+Math.imul(gt,Ot)|0,N=N+Math.imul(gt,It)|0;var Zn=(b+(y=y+Math.imul(X,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(X,le)|0)+Math.imul(J,Xt)|0))<<13)|0;b=((N=N+Math.imul(J,le)|0)+(w>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,y=Math.imul(st,wt),w=(w=Math.imul(st,Tt))+Math.imul(at,wt)|0,N=Math.imul(at,Tt),y=y+Math.imul(et,Ot)|0,w=(w=w+Math.imul(et,It)|0)+Math.imul(rt,Ot)|0,N=N+Math.imul(rt,It)|0;var Qn=(b+(y=y+Math.imul(pt,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(pt,le)|0)+Math.imul(gt,Xt)|0))<<13)|0;b=((N=N+Math.imul(gt,le)|0)+(w>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,y=Math.imul(st,Ot),w=(w=Math.imul(st,It))+Math.imul(at,Ot)|0,N=Math.imul(at,It);var ti=(b+(y=y+Math.imul(et,Xt)|0)|0)+((8191&(w=(w=w+Math.imul(et,le)|0)+Math.imul(rt,Xt)|0))<<13)|0;b=((N=N+Math.imul(rt,le)|0)+(w>>>13)|0)+(ti>>>26)|0,ti&=67108863;var Ci=(b+(y=Math.imul(st,Xt))|0)+((8191&(w=(w=Math.imul(st,le))+Math.imul(at,Xt)|0))<<13)|0;return b=((N=Math.imul(at,le))+(w>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,Z[0]=tr,Z[1]=er,Z[2]=ur,Z[3]=Vr,Z[4]=Yr,Z[5]=Jr,Z[6]=Xr,Z[7]=Zr,Z[8]=Qr,Z[9]=tn,Z[10]=Mn,Z[11]=Tn,Z[12]=Yn,Z[13]=Jn,Z[14]=Xn,Z[15]=Zn,Z[16]=Qn,Z[17]=ti,Z[18]=Ci,b!==0&&(Z[19]=b,v.length++),v};function S(l,m,v){return new k().mulp(l,m,v)}function k(l,m){this.x=l,this.y=m}Math.imul||(d=p),s.prototype.mulTo=function(l,m){var v=this.length+l.length;return this.length===10&&l.length===10?d(this,l,m):v<63?p(this,l,m):v<1024?function(y,w,N){N.negative=w.negative^y.negative,N.length=y.length+w.length;for(var O=0,W=0,Z=0;Z<N.length-1;Z++){var b=W;W=0;for(var U=67108863&O,G=Math.min(Z,w.length-1),Q=Math.max(0,Z-y.length+1);Q<=G;Q++){var it=Z-Q,ht=(0|y.words[it])*(0|w.words[Q]),ut=67108863&ht;U=67108863&(ut=ut+U|0),W+=(b=(b=b+(ht/67108864|0)|0)+(ut>>>26)|0)>>>26,b&=67108863}N.words[Z]=U,O=b,b=W}return O!==0?N.words[Z]=O:N.length--,N.strip()}(this,l,m):S(this,l,m)},k.prototype.makeRBT=function(l){for(var m=Array(l),v=s.prototype._countBits(l)-1,y=0;y<l;y++)m[y]=this.revBin(y,v,l);return m},k.prototype.revBin=function(l,m,v){if(l===0||l===v-1)return l;for(var y=0,w=0;w<m;w++)y|=(1&l)<<m-w-1,l>>=1;return y},k.prototype.permute=function(l,m,v,y,w,N){for(var O=0;O<N;O++)y[O]=m[l[O]],w[O]=v[l[O]]},k.prototype.transform=function(l,m,v,y,w,N){this.permute(N,l,m,v,y,w);for(var O=1;O<w;O<<=1)for(var W=O<<1,Z=Math.cos(2*Math.PI/W),b=Math.sin(2*Math.PI/W),U=0;U<w;U+=W)for(var G=Z,Q=b,it=0;it<O;it++){var ht=v[U+it],ut=y[U+it],lt=v[U+it+O],j=y[U+it+O],tt=G*lt-Q*j;j=G*j+Q*lt,lt=tt,v[U+it]=ht+lt,y[U+it]=ut+j,v[U+it+O]=ht-lt,y[U+it+O]=ut-j,it!==W&&(tt=Z*G-b*Q,Q=Z*Q+b*G,G=tt)}},k.prototype.guessLen13b=function(l,m){var v=1|Math.max(m,l),y=1&v,w=0;for(v=v/2|0;v;v>>>=1)w++;return 1<<w+1+y},k.prototype.conjugate=function(l,m,v){if(!(v<=1))for(var y=0;y<v/2;y++){var w=l[y];l[y]=l[v-y-1],l[v-y-1]=w,w=m[y],m[y]=-m[v-y-1],m[v-y-1]=-w}},k.prototype.normalize13b=function(l,m){for(var v=0,y=0;y<m/2;y++){var w=8192*Math.round(l[2*y+1]/m)+Math.round(l[2*y]/m)+v;l[y]=67108863&w,v=w<67108864?0:w/67108864|0}return l},k.prototype.convert13b=function(l,m,v,y){for(var w=0,N=0;N<m;N++)w+=0|l[N],v[2*N]=8191&w,w>>>=13,v[2*N+1]=8191&w,w>>>=13;for(N=2*m;N<y;++N)v[N]=0;n(w===0),n((-8192&w)==0)},k.prototype.stub=function(l){for(var m=Array(l),v=0;v<l;v++)m[v]=0;return m},k.prototype.mulp=function(l,m,v){var y=2*this.guessLen13b(l.length,m.length),w=this.makeRBT(y),N=this.stub(y),O=Array(y),W=Array(y),Z=Array(y),b=Array(y),U=Array(y),G=Array(y),Q=v.words;Q.length=y,this.convert13b(l.words,l.length,O,y),this.convert13b(m.words,m.length,b,y),this.transform(O,N,W,Z,y,w),this.transform(b,N,U,G,y,w);for(var it=0;it<y;it++){var ht=W[it]*U[it]-Z[it]*G[it];Z[it]=W[it]*G[it]+Z[it]*U[it],W[it]=ht}return this.conjugate(W,Z,y),this.transform(W,Z,Q,N,y,w),this.conjugate(Q,N,y),this.normalize13b(Q,y),v.negative=l.negative^m.negative,v.length=l.length+m.length,v.strip()},s.prototype.mul=function(l){var m=new s(null);return m.words=Array(this.length+l.length),this.mulTo(l,m)},s.prototype.mulf=function(l){var m=new s(null);return m.words=Array(this.length+l.length),S(this,l,m)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){n(typeof l=="number"),n(l<67108864);for(var m=0,v=0;v<this.length;v++){var y=(0|this.words[v])*l,w=(67108863&y)+(67108863&m);m>>=26,m+=y/67108864|0,m+=w>>>26,this.words[v]=67108863&w}return m!==0&&(this.words[v]=m,this.length++),this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var m=function(N){for(var O=Array(N.bitLength()),W=0;W<O.length;W++){var Z=W/26|0,b=W%26;O[W]=(N.words[Z]&1<<b)>>>b}return O}(l);if(m.length===0)return new s(1);for(var v=this,y=0;y<m.length&&m[y]===0;y++,v=v.sqr());if(++y<m.length)for(var w=v.sqr();y<m.length;y++,w=w.sqr())m[y]!==0&&(v=v.mul(w));return v},s.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var m,v=l%26,y=(l-v)/26,w=67108863>>>26-v<<26-v;if(v!==0){var N=0;for(m=0;m<this.length;m++){var O=this.words[m]&w,W=(0|this.words[m])-O<<v;this.words[m]=W|N,N=O>>>26-v}N&&(this.words[m]=N,this.length++)}if(y!==0){for(m=this.length-1;m>=0;m--)this.words[m+y]=this.words[m];for(m=0;m<y;m++)this.words[m]=0;this.length+=y}return this.strip()},s.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,m,v){var y;n(typeof l=="number"&&l>=0),y=m?(m-m%26)/26:0;var w=l%26,N=Math.min((l-w)/26,this.length),O=67108863^67108863>>>w<<w,W=v;if(y=Math.max(0,y-=N),W){for(var Z=0;Z<N;Z++)W.words[Z]=this.words[Z];W.length=N}if(N!==0)if(this.length>N)for(this.length-=N,Z=0;Z<this.length;Z++)this.words[Z]=this.words[Z+N];else this.words[0]=0,this.length=1;var b=0;for(Z=this.length-1;Z>=0&&(b!==0||Z>=y);Z--){var U=0|this.words[Z];this.words[Z]=b<<26-w|U>>>w,b=U&O}return W&&b!==0&&(W.words[W.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(l,m,v){return n(this.negative===0),this.iushrn(l,m,v)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var m=l%26,v=(l-m)/26,y=1<<m;return!(this.length<=v)&&!!(this.words[v]&y)},s.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var m=l%26,v=(l-m)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(m!==0&&v++,this.length=Math.min(v,this.length),m!==0){var y=67108863^67108863>>>m<<m;this.words[this.length-1]&=y}return this.strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(0|this.words[0])<l?(this.words[0]=l-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},s.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,m,v){var y,w,N=l.length+v;this._expand(N);var O=0;for(y=0;y<l.length;y++){w=(0|this.words[y+v])+O;var W=(0|l.words[y])*m;O=((w-=67108863&W)>>26)-(W/67108864|0),this.words[y+v]=67108863&w}for(;y<this.length-v;y++)O=(w=(0|this.words[y+v])+O)>>26,this.words[y+v]=67108863&w;if(O===0)return this.strip();for(n(O===-1),O=0,y=0;y<this.length;y++)O=(w=-(0|this.words[y])+O)>>26,this.words[y]=67108863&w;return this.negative=1,this.strip()},s.prototype._wordDiv=function(l,m){var v=(this.length,l.length),y=this.clone(),w=l,N=0|w.words[w.length-1];(v=26-this._countBits(N))!==0&&(w=w.ushln(v),y.iushln(v),N=0|w.words[w.length-1]);var O,W=y.length-w.length;if(m!=="mod"){(O=new s(null)).length=W+1,O.words=Array(O.length);for(var Z=0;Z<O.length;Z++)O.words[Z]=0}var b=y.clone()._ishlnsubmul(w,1,W);b.negative===0&&(y=b,O&&(O.words[W]=1));for(var U=W-1;U>=0;U--){var G=67108864*(0|y.words[w.length+U])+(0|y.words[w.length+U-1]);for(G=Math.min(G/N|0,67108863),y._ishlnsubmul(w,G,U);y.negative!==0;)G--,y.negative=0,y._ishlnsubmul(w,1,U),y.isZero()||(y.negative^=1);O&&(O.words[U]=G)}return O&&O.strip(),y.strip(),m!=="div"&&v!==0&&y.iushrn(v),{div:O||null,mod:y}},s.prototype.divmod=function(l,m,v){return n(!l.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:this.negative!==0&&l.negative===0?(N=this.neg().divmod(l,m),m!=="mod"&&(y=N.div.neg()),m!=="div"&&(w=N.mod.neg(),v&&w.negative!==0&&w.iadd(l)),{div:y,mod:w}):this.negative===0&&l.negative!==0?(N=this.divmod(l.neg(),m),m!=="mod"&&(y=N.div.neg()),{div:y,mod:N.mod}):(this.negative&l.negative)!=0?(N=this.neg().divmod(l.neg(),m),m!=="div"&&(w=N.mod.neg(),v&&w.negative!==0&&w.isub(l)),{div:N.div,mod:w}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?m==="div"?{div:this.divn(l.words[0]),mod:null}:m==="mod"?{div:null,mod:new s(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modn(l.words[0]))}:this._wordDiv(l,m);var y,w,N},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var m=this.divmod(l);if(m.mod.isZero())return m.div;var v=m.div.negative!==0?m.mod.isub(l):m.mod,y=l.ushrn(1),w=l.andln(1),N=v.cmp(y);return N<0||w===1&&N===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},s.prototype.modn=function(l){n(l<=67108863);for(var m=(1<<26)%l,v=0,y=this.length-1;y>=0;y--)v=(m*v+(0|this.words[y]))%l;return v},s.prototype.idivn=function(l){n(l<=67108863);for(var m=0,v=this.length-1;v>=0;v--){var y=(0|this.words[v])+67108864*m;this.words[v]=y/l|0,m=y%l}return this.strip()},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var m=this,v=l.clone();m=m.negative!==0?m.umod(l):m.clone();for(var y=new s(1),w=new s(0),N=new s(0),O=new s(1),W=0;m.isEven()&&v.isEven();)m.iushrn(1),v.iushrn(1),++W;for(var Z=v.clone(),b=m.clone();!m.isZero();){for(var U=0,G=1;(m.words[0]&G)==0&&U<26;++U,G<<=1);if(U>0)for(m.iushrn(U);U-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(Z),w.isub(b)),y.iushrn(1),w.iushrn(1);for(var Q=0,it=1;(v.words[0]&it)==0&&Q<26;++Q,it<<=1);if(Q>0)for(v.iushrn(Q);Q-- >0;)(N.isOdd()||O.isOdd())&&(N.iadd(Z),O.isub(b)),N.iushrn(1),O.iushrn(1);m.cmp(v)>=0?(m.isub(v),y.isub(N),w.isub(O)):(v.isub(m),N.isub(y),O.isub(w))}return{a:N,b:O,gcd:v.iushln(W)}},s.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var m=this,v=l.clone();m=m.negative!==0?m.umod(l):m.clone();for(var y,w=new s(1),N=new s(0),O=v.clone();m.cmpn(1)>0&&v.cmpn(1)>0;){for(var W=0,Z=1;(m.words[0]&Z)==0&&W<26;++W,Z<<=1);if(W>0)for(m.iushrn(W);W-- >0;)w.isOdd()&&w.iadd(O),w.iushrn(1);for(var b=0,U=1;(v.words[0]&U)==0&&b<26;++b,U<<=1);if(b>0)for(v.iushrn(b);b-- >0;)N.isOdd()&&N.iadd(O),N.iushrn(1);m.cmp(v)>=0?(m.isub(v),w.isub(N)):(v.isub(m),N.isub(w))}return(y=m.cmpn(1)===0?w:N).cmpn(0)<0&&y.iadd(l),y},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var m=this.clone(),v=l.clone();m.negative=0,v.negative=0;for(var y=0;m.isEven()&&v.isEven();y++)m.iushrn(1),v.iushrn(1);for(;;){for(;m.isEven();)m.iushrn(1);for(;v.isEven();)v.iushrn(1);var w=m.cmp(v);if(w<0){var N=m;m=v,v=N}else if(w===0||v.cmpn(1)===0)break;m.isub(v)}return v.iushln(y)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){n(typeof l=="number");var m=l%26,v=(l-m)/26,y=1<<m;if(this.length<=v)return this._expand(v+1),this.words[v]|=y,this;for(var w=y,N=v;w!==0&&N<this.length;N++){var O=0|this.words[N];w=(O+=w)>>>26,O&=67108863,this.words[N]=O}return w!==0&&(this.words[N]=w,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var m,v=l<0;if(this.negative!==0&&!v)return-1;if(this.negative===0&&v)return 1;if(this.strip(),this.length>1)m=1;else{v&&(l=-l),n(l<=67108863,"Number is too big");var y=0|this.words[0];m=y===l?0:y<l?-1:1}return this.negative!==0?0|-m:m},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var m=this.ucmp(l);return this.negative!==0?0|-m:m},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var m=0,v=this.length-1;v>=0;v--){var y=0|this.words[v],w=0|l.words[v];if(y!==w){y<w?m=-1:y>w&&(m=1);break}}return m},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new g(l)},s.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var A={k256:null,p224:null,p192:null,p25519:null};function C(l,m){this.name=l,this.p=new s(m,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function R(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function D(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function L(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function g(l){if(typeof l=="string"){var m=s._prime(l);this.m=m.p,this.prime=m}else n(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}function I(l){g.call(this,l),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}C.prototype._tmp=function(){var l=new s(null);return l.words=Array(Math.ceil(this.n/13)),l},C.prototype.ireduce=function(l){var m,v=l;do this.split(v,this.tmp),m=(v=(v=this.imulK(v)).iadd(this.tmp)).bitLength();while(m>this.n);var y=m<this.n?-1:v.ucmp(this.p);return y===0?(v.words[0]=0,v.length=1):y>0?v.isub(this.p):v.strip(),v},C.prototype.split=function(l,m){l.iushrn(this.n,0,m)},C.prototype.imulK=function(l){return l.imul(this.k)},i(B,C),B.prototype.split=function(l,m){for(var v=4194303,y=Math.min(l.length,9),w=0;w<y;w++)m.words[w]=l.words[w];if(m.length=y,l.length<=9)return l.words[0]=0,void(l.length=1);var N=l.words[9];for(m.words[m.length++]=N&v,w=10;w<l.length;w++){var O=0|l.words[w];l.words[w-10]=(O&v)<<4|N>>>22,N=O}N>>>=22,l.words[w-10]=N,N===0&&l.length>10?l.length-=10:l.length-=9},B.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var m=0,v=0;v<l.length;v++){var y=0|l.words[v];m+=977*y,l.words[v]=67108863&m,m=64*y+(m/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l},i(R,C),i(D,C),i(L,C),L.prototype.imulK=function(l){for(var m=0,v=0;v<l.length;v++){var y=19*(0|l.words[v])+m,w=67108863&y;y>>>=26,l.words[v]=w,m=y}return m!==0&&(l.words[l.length++]=m),l},s._prime=function(l){if(A[l])return A[l];var m;if(l==="k256")m=new B;else if(l==="p224")m=new R;else if(l==="p192")m=new D;else{if(l!=="p25519")throw Error("Unknown prime "+l);m=new L}return A[l]=m,m},g.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},g.prototype._verify2=function(l,m){n((l.negative|m.negative)==0,"red works only with positives"),n(l.red&&l.red===m.red,"red works only with red numbers")},g.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},g.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},g.prototype.add=function(l,m){this._verify2(l,m);var v=l.add(m);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},g.prototype.iadd=function(l,m){this._verify2(l,m);var v=l.iadd(m);return v.cmp(this.m)>=0&&v.isub(this.m),v},g.prototype.sub=function(l,m){this._verify2(l,m);var v=l.sub(m);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},g.prototype.isub=function(l,m){this._verify2(l,m);var v=l.isub(m);return v.cmpn(0)<0&&v.iadd(this.m),v},g.prototype.shl=function(l,m){return this._verify1(l),this.imod(l.ushln(m))},g.prototype.imul=function(l,m){return this._verify2(l,m),this.imod(l.imul(m))},g.prototype.mul=function(l,m){return this._verify2(l,m),this.imod(l.mul(m))},g.prototype.isqr=function(l){return this.imul(l,l.clone())},g.prototype.sqr=function(l){return this.mul(l,l)},g.prototype.sqrt=function(l){if(l.isZero())return l.clone();var m=this.m.andln(3);if(n(m%2==1),m===3){var v=this.m.add(new s(1)).iushrn(2);return this.pow(l,v)}for(var y=this.m.subn(1),w=0;!y.isZero()&&y.andln(1)===0;)w++,y.iushrn(1);n(!y.isZero());var N=new s(1).toRed(this),O=N.redNeg(),W=this.m.subn(1).iushrn(1),Z=this.m.bitLength();for(Z=new s(2*Z*Z).toRed(this);this.pow(Z,W).cmp(O)!==0;)Z.redIAdd(O);for(var b=this.pow(Z,y),U=this.pow(l,y.addn(1).iushrn(1)),G=this.pow(l,y),Q=w;G.cmp(N)!==0;){for(var it=G,ht=0;it.cmp(N)!==0;ht++)it=it.redSqr();n(ht<Q);var ut=this.pow(b,new s(1).iushln(Q-ht-1));U=U.redMul(ut),b=ut.redSqr(),G=G.redMul(b),Q=ht}return U},g.prototype.invm=function(l){var m=l._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},g.prototype.pow=function(l,m){if(m.isZero())return new s(1).toRed(this);if(m.cmpn(1)===0)return l.clone();var v=Array(16);v[0]=new s(1).toRed(this),v[1]=l;for(var y=2;y<v.length;y++)v[y]=this.mul(v[y-1],l);var w=v[0],N=0,O=0,W=m.bitLength()%26;for(W===0&&(W=26),y=m.length-1;y>=0;y--){for(var Z=m.words[y],b=W-1;b>=0;b--){var U=Z>>b&1;w!==v[0]&&(w=this.sqr(w)),U!==0||N!==0?(N<<=1,N|=U,(++O===4||y===0&&b===0)&&(w=this.mul(w,v[N]),O=0,N=0)):O=0}W=26}return w},g.prototype.convertTo=function(l){var m=l.umod(this.m);return m===l?m.clone():m},g.prototype.convertFrom=function(l){var m=l.clone();return m.red=null,m},s.mont=function(l){return new I(l)},i(I,g),I.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},I.prototype.convertFrom=function(l){var m=this.imod(l.mul(this.rinv));return m.red=null,m},I.prototype.imul=function(l,m){if(l.isZero()||m.isZero())return l.words[0]=0,l.length=1,l;var v=l.imul(m),y=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=v.isub(y).iushrn(this.shift),N=w;return w.cmp(this.m)>=0?N=w.isub(this.m):w.cmpn(0)<0&&(N=w.iadd(this.m)),N._forceRed(this)},I.prototype.mul=function(l,m){if(l.isZero()||m.isZero())return new s(0)._forceRed(this);var v=l.mul(m),y=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=v.isub(y).iushrn(this.shift),N=w;return w.cmp(this.m)>=0?N=w.isub(this.m):w.cmpn(0)<0&&(N=w.iadd(this.m)),N._forceRed(this)},I.prototype.invm=function(l){return this.imod(l._invmp(this.m).mul(this.r2))._forceRed(this)}})(e,P3)}),aa=Object.freeze({__proto__:null,default:Rt,__moduleExports:Rt});class ga{constructor(t){if(t===void 0)throw Error("Invalid BigInteger input");this.value=new Rt(t)}clone(){const t=new ga(null);return this.value.copy(t.value),t}iinc(){return this.value.iadd(new Rt(1)),this}inc(){return this.clone().iinc()}idec(){return this.value.isub(new Rt(1)),this}dec(){return this.clone().idec()}iadd(t){return this.value.iadd(t.value),this}add(t){return this.clone().iadd(t)}isub(t){return this.value.isub(t.value),this}sub(t){return this.clone().isub(t)}imul(t){return this.value.imul(t.value),this}mul(t){return this.clone().imul(t)}imod(t){return this.value=this.value.umod(t.value),this}mod(t){return this.clone().imod(t)}modExp(t,r){const n=r.isEven()?Rt.red(r.value):Rt.mont(r.value),i=this.clone();return i.value=i.value.toRed(n).redPow(t.value).fromRed(),i}modInv(t){if(!this.gcd(t).isOne())throw Error("Inverse does not exist");return new ga(this.value.invm(t.value))}gcd(t){return new ga(this.value.gcd(t.value))}ileftShift(t){return this.value.ishln(t.value.toNumber()),this}leftShift(t){return this.clone().ileftShift(t)}irightShift(t){return this.value.ishrn(t.value.toNumber()),this}rightShift(t){return this.clone().irightShift(t)}equal(t){return this.value.eq(t.value)}lt(t){return this.value.lt(t.value)}lte(t){return this.value.lte(t.value)}gt(t){return this.value.gt(t.value)}gte(t){return this.value.gte(t.value)}isZero(){return this.value.isZero()}isOne(){return this.value.eq(new Rt(1))}isNegative(){return this.value.isNeg()}isEven(){return this.value.isEven()}abs(){const t=this.clone();return t.value=t.value.abs(),t}toString(){return this.value.toString()}toNumber(){return this.value.toNumber()}getBit(t){return this.value.testn(t)?1:0}bitLength(){return this.value.bitLength()}byteLength(){return this.value.byteLength()}toUint8Array(t="be",r){return this.value.toArrayLike(Uint8Array,t,r)}}var Eu,r6=Object.freeze({__proto__:null,default:ga}),Fr=xn(function(e,t){var r=t;function n(s){return s.length===1?"0"+s:s}function i(s){for(var a="",o=0;o<s.length;o++)a+=n(s[o].toString(16));return a}r.toArray=function(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var o=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)o[c]=0|s[c];return o}if(a==="hex")for((s=s.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(s="0"+s),c=0;c<s.length;c+=2)o.push(parseInt(s[c]+s[c+1],16));else for(c=0;c<s.length;c++){var u=s.charCodeAt(c),h=u>>8,f=255&u;h?o.push(h,f):o.push(f)}return o},r.zero2=n,r.toHex=i,r.encode=function(s,a){return a==="hex"?i(s):s}}),de=xn(function(e,t){var r=t;r.assert=xi,r.toArray=Fr.toArray,r.zero2=Fr.zero2,r.toHex=Fr.toHex,r.encode=Fr.encode,r.getNAF=function(n,i){for(var s=[],a=1<<i+1,o=n.clone();o.cmpn(1)>=0;){var c;if(o.isOdd()){var u=o.andln(a-1);c=u>(a>>1)-1?(a>>1)-u:u,o.isubn(c)}else c=0;s.push(c);for(var h=o.cmpn(0)!==0&&o.andln(a-1)===0?i+1:1,f=1;f<h;f++)s.push(0);o.iushrn(h)}return s},r.getJSF=function(n,i){var s=[[],[]];n=n.clone(),i=i.clone();for(var a=0,o=0;n.cmpn(-a)>0||i.cmpn(-o)>0;){var c,u,h,f=n.andln(3)+a&3,p=i.andln(3)+o&3;f===3&&(f=-1),p===3&&(p=-1),(1&f)==0?c=0:c=(h=n.andln(7)+a&7)!==3&&h!==5||p!==2?f:-f,s[0].push(c),(1&p)==0?u=0:u=(h=i.andln(7)+o&7)!==3&&h!==5||f!==2?p:-p,s[1].push(u),2*a===c+1&&(a=1-a),2*o===u+1&&(o=1-o),n.iushrn(1),i.iushrn(1)}return s},r.cachedProperty=function(n,i,s){var a="_"+i;n.prototype[i]=function(){return this[a]!==void 0?this[a]:this[a]=s.call(this)}},r.parseBytes=function(n){return typeof n=="string"?r.toArray(n,"hex"):n},r.intFromLE=function(n){return new Rt(n,"hex","le")}}),Fc=function(e){return Eu||(Eu=new li(null)),Eu.generate(e)};function li(e){this.rand=e}var n6=li;if(li.prototype.generate=function(e){return this._rand(e)},li.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},typeof self=="object")self.crypto&&self.crypto.getRandomValues?li.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?li.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(li.prototype._rand=function(){throw Error("Not implemented yet")});else try{if(typeof(void 0).randomBytes!="function")throw Error("Not supported");li.prototype._rand=function(e){return(void 0).randomBytes(e)}}catch{}Fc.Rand=n6;var ho=de.getNAF,i6=de.getJSF,fo=de.assert;function ui(e,t){this.type=e,this.p=new Rt(t.p,16),this.red=t.prime?Rt.red(t.prime):Rt.mont(this.p),this.zero=new Rt(0).toRed(this.red),this.one=new Rt(1).toRed(this.red),this.two=new Rt(2).toRed(this.red),this.n=t.n&&new Rt(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,];var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ar=ui;function Mr(e,t){this.curve=e,this.type=t,this.precomputed=null}ui.prototype.point=function(){throw Error("Not implemented")},ui.prototype.validate=function(){throw Error("Not implemented")},ui.prototype._fixedNafMul=function(e,t){fo(e.precomputed);var r=e._getDoubles(),n=ho(t,1),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var s=[],a=0;a<n.length;a+=r.step){var o=0;for(t=a+r.step-1;t>=a;t--)o=(o<<1)+n[t];s.push(o)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),h=i;h>0;h--){for(a=0;a<s.length;a++)(o=s[a])===h?u=u.mixedAdd(r.points[a]):o===-h&&(u=u.mixedAdd(r.points[a].neg()));c=c.add(u)}return c.toP()},ui.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=ho(t,r),a=this.jpoint(null,null,null),o=s.length-1;o>=0;o--){for(t=0;o>=0&&s[o]===0;o--)t++;if(o>=0&&t++,a=a.dblp(t),o<0)break;var c=s[o];fo(c!==0),a=e.type==="affine"?c>0?a.mixedAdd(i[c-1>>1]):a.mixedAdd(i[-c-1>>1].neg()):c>0?a.add(i[c-1>>1]):a.add(i[-c-1>>1].neg())}return e.type==="affine"?a.toP():a},ui.prototype._wnafMulAdd=function(e,t,r,n,i){for(var s=this._wnafT1,a=this._wnafT2,o=this._wnafT3,c=0,u=0;u<n;u++){var h=(I=t[u])._getNAFPoints(e);s[u]=h.wnd,a[u]=h.points}for(u=n-1;u>=1;u-=2){var f=u-1,p=u;if(s[f]===1&&s[p]===1){var d=[t[f],null,null,t[p]];t[f].y.cmp(t[p].y)===0?(d[1]=t[f].add(t[p]),d[2]=t[f].toJ().mixedAdd(t[p].neg())):t[f].y.cmp(t[p].y.redNeg())===0?(d[1]=t[f].toJ().mixedAdd(t[p]),d[2]=t[f].add(t[p].neg())):(d[1]=t[f].toJ().mixedAdd(t[p]),d[2]=t[f].toJ().mixedAdd(t[p].neg()));var S=[-3,-1,-5,-7,0,7,5,1,3],k=i6(r[f],r[p]);c=Math.max(k[0].length,c),o[f]=Array(c),o[p]=Array(c);for(var A=0;A<c;A++){var C=0|k[0][A],B=0|k[1][A];o[f][A]=S[3*(C+1)+(B+1)],o[p][A]=0,a[f]=d}}else o[f]=ho(r[f],s[f]),o[p]=ho(r[p],s[p]),c=Math.max(o[f].length,c),c=Math.max(o[p].length,c)}var R=this.jpoint(null,null,null),D=this._wnafT4;for(u=c;u>=0;u--){for(var L=0;u>=0;){var g=!0;for(A=0;A<n;A++)D[A]=0|o[A][u],D[A]!==0&&(g=!1);if(!g)break;L++,u--}if(u>=0&&L++,R=R.dblp(L),u<0)break;for(A=0;A<n;A++){var I,l=D[A];l!==0&&(l>0?I=a[A][l-1>>1]:l<0&&(I=a[A][-l-1>>1].neg()),R=I.type==="affine"?R.mixedAdd(I):R.add(I))}}for(u=0;u<n;u++)a[u]=null;return i?R:R.toP()},ui.BasePoint=Mr,Mr.prototype.eq=function(){throw Error("Not implemented")},Mr.prototype.validate=function(){return this.curve.validate(this)},ui.prototype.decodePoint=function(e,t){e=de.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*r)return e[0]===6?fo(e[e.length-1]%2==0):e[0]===7&&fo(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw Error("Unknown point format")},Mr.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Mr.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},Mr.prototype.encode=function(e,t){return de.encode(this._encode(t),e)},Mr.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Mr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Mr.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)n=n.dbl();r.push(n)}return{step:e,points:r}},Mr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=r===1?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},Mr.prototype._getBeta=function(){return null},Mr.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var s6=de.assert;function Cr(e){ar.call(this,"short",e),this.a=new Rt(e.a,16).toRed(this.red),this.b=new Rt(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}bi(Cr,ar);var a6=Cr;function Oe(e,t,r,n){ar.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Rt(t,16),this.y=new Rt(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Fe(e,t,r,n){ar.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Rt(0)):(this.x=new Rt(t,16),this.y=new Rt(r,16),this.z=new Rt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}function ms(e){ar.call(this,"mont",e),this.a=new Rt(e.a,16).toRed(this.red),this.b=new Rt(e.b,16).toRed(this.red),this.i4=new Rt(4).toRed(this.red).redInvm(),this.two=new Rt(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Cr.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var t,r;if(e.beta)t=new Rt(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new Rt(e.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))===0?r=i[0]:(r=i[1],s6(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(s){return{a:new Rt(s.a,16),b:new Rt(s.b,16)}}):this._getEndoBasis(r)}}},Cr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Rt.mont(e),r=new Rt(2).toRed(t).redInvm(),n=r.redNeg(),i=new Rt(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},Cr.prototype._getEndoBasis=function(e){for(var t,r,n,i,s,a,o,c,u,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=e,p=this.n.clone(),d=new Rt(1),S=new Rt(0),k=new Rt(0),A=new Rt(1),C=0;f.cmpn(0)!==0;){var B=p.div(f);c=p.sub(B.mul(f)),u=k.sub(B.mul(d));var R=A.sub(B.mul(S));if(!n&&c.cmp(h)<0)t=o.neg(),r=d,n=c.neg(),i=u;else if(n&&++C==2)break;o=c,p=f,f=c,k=d,d=u,A=S,S=R}s=c.neg(),a=u;var D=n.sqr().add(i.sqr());return s.sqr().add(a.sqr()).cmp(D)>=0&&(s=t,a=r),n.negative&&(n=n.neg(),i=i.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:i},{a:s,b:a}]},Cr.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),a=i.mul(r.a),o=s.mul(n.a),c=i.mul(r.b),u=s.mul(n.b);return{k1:e.sub(a).sub(o),k2:c.add(u).neg()}},Cr.prototype.pointFromX=function(e,t){(e=new Rt(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(n.redSqr().redSub(r).cmp(this.zero)!==0)throw Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},Cr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return r.redSqr().redISub(i).cmpn(0)===0},Cr.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(t[s]),o=e[s],c=o._getBeta();a.k1.negative&&(a.k1.ineg(),o=o.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),n[2*s]=o,n[2*s+1]=c,i[2*s]=a.k1,i[2*s+1]=a.k2}for(var u=this._wnafMulAdd(1,n,i,2*s,r),h=0;h<2*s;h++)n[h]=null,i[h]=null;return u},bi(Oe,ar.BasePoint),Cr.prototype.point=function(e,t,r){return new Oe(this,e,t,r)},Cr.prototype.pointFromJSON=function(e,t){return Oe.fromJSON(this,e,t)},Oe.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(i){return r.point(i.x.redMul(r.endo.beta),i.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Oe.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Oe.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(a){return e.point(a[0],a[1],r)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},Oe.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Oe.prototype.isInfinity=function(){return this.inf},Oe.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Oe.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)},Oe.prototype.getX=function(){return this.x.fromRed()},Oe.prototype.getY=function(){return this.y.fromRed()},Oe.prototype.mul=function(e){return e=new Rt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Oe.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Oe.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Oe.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},Oe.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(i){return i.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Oe.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},bi(Fe,ar.BasePoint),Cr.prototype.jpoint=function(e,t,r){return new Fe(this,e,t,r)},Fe.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},Fe.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Fe.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),o=n.redSub(i),c=s.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),h=u.redMul(o),f=n.redMul(u),p=c.redSqr().redIAdd(h).redISub(f).redISub(f),d=c.redMul(f.redISub(p)).redISub(s.redMul(h)),S=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(p,d,S)},Fe.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),a=r.redSub(n),o=i.redSub(s);if(a.cmpn(0)===0)return o.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),h=r.redMul(c),f=o.redSqr().redIAdd(u).redISub(h).redISub(h),p=o.redMul(h.redISub(f)).redISub(i.redMul(u)),d=this.z.redMul(a);return this.curve.jpoint(f,p,d)},Fe.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var n=this.curve.a,i=this.curve.tinv,s=this.x,a=this.y,o=this.z,c=o.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var h=s.redSqr(),f=u.redSqr(),p=f.redSqr(),d=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),S=s.redMul(f),k=d.redSqr().redISub(S.redAdd(S)),A=S.redISub(k),C=d.redMul(A);C=C.redIAdd(C).redISub(p);var B=u.redMul(o);r+1<e&&(c=c.redMul(p)),s=k,o=B,u=C}return this.curve.jpoint(s,u.redMul(i),o)},Fe.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Fe.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var o=n.redAdd(n).redIAdd(n),c=o.redSqr().redISub(a).redISub(a),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=o.redMul(a.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),f=this.y.redSqr(),p=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(h).redISub(p);d=d.redIAdd(d);var S=h.redAdd(h).redIAdd(h),k=S.redSqr(),A=p.redIAdd(p);A=(A=A.redIAdd(A)).redIAdd(A),e=k.redISub(d).redISub(d),t=S.redMul(d.redISub(e)).redISub(A),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},Fe.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var o=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=o.redSqr().redISub(a).redISub(a);e=c;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=o.redMul(a.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),f=this.y.redSqr(),p=this.x.redMul(f),d=this.x.redSub(h).redMul(this.x.redAdd(h));d=d.redAdd(d).redIAdd(d);var S=p.redIAdd(p),k=(S=S.redIAdd(S)).redAdd(S);e=d.redSqr().redISub(k),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(h);var A=f.redSqr();A=(A=(A=A.redIAdd(A)).redIAdd(A)).redIAdd(A),t=d.redMul(S.redISub(e)).redISub(A)}return this.curve.jpoint(e,t,r)},Fe.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=t.redSqr(),a=r.redSqr(),o=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(a),h=o.redSqr().redISub(u.redAdd(u)),f=u.redISub(h),p=a.redSqr();p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);var d=o.redMul(f).redISub(p),S=r.redAdd(r).redMul(n);return this.curve.jpoint(h,d,S)},Fe.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n),o=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(s)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(a).redSqr().redISub(s).redISub(o).redISub(c),h=t.redMul(u);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.x.redMul(o).redISub(h);f=(f=f.redIAdd(f)).redIAdd(f);var p=this.y.redMul(u.redMul(c.redISub(u)).redISub(a.redMul(o)));p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);var d=this.z.redAdd(a).redSqr().redISub(r).redISub(o);return this.curve.jpoint(f,p,d)},Fe.prototype.mul=function(e,t){return e=new Rt(e,t),this.curve._wnafMul(this,e)},Fe.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)===0},Fe.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}},Fe.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Fe.prototype.isInfinity=function(){return this.z.cmpn(0)===0},bi(ms,ar);var o6=ms;function Ne(e,t,r){ar.BasePoint.call(this,e,"projective"),t===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Rt(t,16),this.z=new Rt(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}ms.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return n.redSqrt().redSqr().cmp(n)===0},bi(Ne,ar.BasePoint),ms.prototype.decodePoint=function(e,t){if((e=de.toArray(e,t)).length===33&&e[0]===64&&(e=e.slice(1,33).reverse()),e.length!==32)throw Error("Unknown point compression format");return this.point(e,1)},ms.prototype.point=function(e,t){return new Ne(this,e,t)},ms.prototype.pointFromJSON=function(e){return Ne.fromJSON(this,e)},Ne.prototype.precompute=function(){},Ne.prototype._encode=function(e){var t=this.curve.p.byteLength();return e?[64].concat(this.getX().toArray("le",t)):this.getX().toArray("be",t)},Ne.fromJSON=function(e,t){return new Ne(e,t[0],t[1]||e.one)},Ne.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Ne.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Ne.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},Ne.prototype.add=function(){throw Error("Not supported on Montgomery curve")},Ne.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),s=e.x.redSub(e.z).redMul(r),a=i.redMul(n),o=t.z.redMul(s.redAdd(a).redSqr()),c=t.x.redMul(s.redISub(a).redSqr());return this.curve.point(o,c)},Ne.prototype.mul=function(e){for(var t=(e=new Rt(e,16)).clone(),r=this,n=this.curve.point(null,null),i=[];t.cmpn(0)!==0;t.iushrn(1))i.push(t.andln(1));for(var s=i.length-1;s>=0;s--)i[s]===0?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},Ne.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},Ne.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},Ne.prototype.eq=function(e){return this.getX().cmp(e.getX())===0},Ne.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Ne.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var c6=de.assert;function an(e){this.twisted=(0|e.a)!=1,this.mOneA=this.twisted&&(0|e.a)==-1,this.extended=this.mOneA,ar.call(this,"edwards",e),this.a=new Rt(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Rt(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Rt(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c6(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|e.c)==1}bi(an,ar);var u6=an;function me(e,t,r,n,i){ar.BasePoint.call(this,e,"projective"),t===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Rt(t,16),this.y=new Rt(r,16),this.z=n?new Rt(n,16):this.curve.one,this.t=i&&new Rt(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}an.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},an.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},an.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},an.prototype.pointFromX=function(e,t){(e=new Rt(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(i.redInvm()),a=s.redSqrt();if(a.redSqr().redSub(s).cmp(this.zero)!==0)throw Error("invalid point");var o=a.fromRed().isOdd();return(t&&!o||!t&&o)&&(a=a.redNeg()),this.point(e,a)},an.prototype.pointFromY=function(e,t){(e=new Rt(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=n.redMul(i.redInvm());if(s.cmp(this.zero)===0){if(t)throw Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(a.redSqr().redSub(s).cmp(this.zero)!==0)throw Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},an.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return n.cmp(i)===0},bi(me,ar.BasePoint),an.prototype.pointFromJSON=function(e){return me.fromJSON(this,e)},an.prototype.point=function(e,t,r,n){return new me(this,e,t,r,n)},me.fromJSON=function(e,t){return new me(e,t[0],t[1],t[2])},me.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},me.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},me.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=n.redAdd(t),a=s.redSub(r),o=n.redSub(t),c=i.redMul(a),u=s.redMul(o),h=i.redMul(o),f=a.redMul(s);return this.curve.point(c,u,f,h)},me.prototype._projDbl=function(){var e,t,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),s=this.y.redSqr();if(this.curve.twisted){var a=(u=this.curve._mulA(i)).redAdd(s);if(this.zOne)e=n.redSub(i).redSub(s).redMul(a.redSub(this.curve.two)),t=a.redMul(u.redSub(s)),r=a.redSqr().redSub(a).redSub(a);else{var o=this.z.redSqr(),c=a.redSub(o).redISub(o);e=n.redSub(i).redISub(s).redMul(c),t=a.redMul(u.redSub(s)),r=a.redMul(c)}}else{var u=i.redAdd(s);o=this.curve._mulC(this.z).redSqr(),c=u.redSub(o).redSub(o),e=this.curve._mulC(n.redISub(u)).redMul(c),t=this.curve._mulC(u).redMul(i.redISub(s)),r=u.redMul(c)}return this.curve.point(e,t,r)},me.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},me.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(t),a=i.redSub(n),o=i.redAdd(n),c=r.redAdd(t),u=s.redMul(a),h=o.redMul(c),f=s.redMul(c),p=a.redMul(o);return this.curve.point(u,h,p,f)},me.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),s=this.x.redMul(e.x),a=this.y.redMul(e.y),o=this.curve.d.redMul(s).redMul(a),c=i.redSub(o),u=i.redAdd(o),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(a),f=n.redMul(c).redMul(h);return this.curve.twisted?(t=n.redMul(u).redMul(a.redSub(this.curve._mulA(s))),r=c.redMul(u)):(t=n.redMul(u).redMul(a.redSub(s)),r=this.curve._mulC(c).redMul(u)),this.curve.point(f,t,r)},me.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},me.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},me.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},me.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},me.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},me.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},me.prototype.getX=function(){return this.normalize(),this.x.fromRed()},me.prototype.getY=function(){return this.normalize(),this.y.fromRed()},me.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0},me.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),this.x.cmp(t)===0)return!0}},me.prototype.toP=me.prototype.normalize,me.prototype.mixedAdd=me.prototype.add;var Po=xn(function(e,t){var r=t;r.base=ar,r.short=a6,r.mont=o6,r.edwards=u6}),ku=ee.rotl32,Hs=ee.sum32,l6=ee.sum32_5,h6=is.ft_1,Jd=ja.BlockHash,f6=[1518500249,1859775393,2400959708,3395469782];function hn(){if(!(this instanceof hn))return new hn;Jd.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}ee.inherits(hn,Jd);var d6=hn;hn.blockSize=512,hn.outSize=160,hn.hmacStrength=80,hn.padLength=64,hn.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=ku(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),h=l6(ku(i,5),h6(u,s,a,o),c,r[n],f6[u]);c=o,o=a,a=ku(s,30),s=i,i=h}this.h[0]=Hs(this.h[0],i),this.h[1]=Hs(this.h[1],s),this.h[2]=Hs(this.h[2],a),this.h[3]=Hs(this.h[3],o),this.h[4]=Hs(this.h[4],c)},hn.prototype._digest=function(e){return e==="hex"?ee.toHex32(this.h,"big"):ee.split32(this.h,"big")};var p6={sha1:d6,sha224:hf,sha256:k0,sha384:mf,sha512:qa};function As(e,t,r){if(!(this instanceof As))return new As(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(ee.toArray(t,r))}var m6=As;As.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),xi(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)},As.prototype.update=function(e,t){return this.inner.update(e,t),this},As.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};var vr=xn(function(e,t){var r=t;r.utils=ee,r.common=ja,r.sha=p6,r.ripemd=a5,r.hmac=m6,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}),y6={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},ba=xn(function(e,t){var r,n=t,i=de.assert;function s(o){if(o.type==="short")this.curve=new Po.short(o);else if(o.type==="edwards")this.curve=new Po.edwards(o);else{if(o.type!=="mont")throw Error("Unknown curve type.");this.curve=new Po.mont(o)}this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, n*G != O")}function a(o,c){Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:function(){var u=new s(c);return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,value:u}),u}})}n.PresetCurve=s,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:vr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:vr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:vr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:vr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:vr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",cofactor:"8",hash:vr.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",cofactor:"8",hash:vr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),a("brainpoolP256r1",{type:"short",prime:null,p:"A9FB57DB A1EEA9BC 3E660A90 9D838D72 6E3BF623 D5262028 2013481D 1F6E5377",a:"7D5A0975 FC2C3057 EEF67530 417AFFE7 FB8055C1 26DC5C6C E94A4B44 F330B5D9",b:"26DC5C6C E94A4B44 F330B5D9 BBD77CBF 95841629 5CF7E1CE 6BCCDC18 FF8C07B6",n:"A9FB57DB A1EEA9BC 3E660A90 9D838D71 8C397AA3 B561A6F7 901E0E82 974856A7",hash:vr.sha256,gRed:!1,g:["8BD2AEB9CB7E57CB2C4B482FFC81B7AFB9DE27E1E3BD23C23A4453BD9ACE3262","547EF835C3DAC4FD97F8461A14611DC9C27745132DED8E545C1D54C72F046997"]}),a("brainpoolP384r1",{type:"short",prime:null,p:"8CB91E82 A3386D28 0F5D6F7E 50E641DF 152F7109 ED5456B4 12B1DA19 7FB71123ACD3A729 901D1A71 87470013 3107EC53",a:"7BC382C6 3D8C150C 3C72080A CE05AFA0 C2BEA28E 4FB22787 139165EF BA91F90F8AA5814A 503AD4EB 04A8C7DD 22CE2826",b:"04A8C7DD 22CE2826 8B39B554 16F0447C 2FB77DE1 07DCD2A6 2E880EA5 3EEB62D57CB43902 95DBC994 3AB78696 FA504C11",n:"8CB91E82 A3386D28 0F5D6F7E 50E641DF 152F7109 ED5456B3 1F166E6C AC0425A7CF3AB6AF 6B7FC310 3B883202 E9046565",hash:vr.sha384,gRed:!1,g:["1D1C64F068CF45FFA2A63A81B7C13F6B8847A3E77EF14FE3DB7FCAFE0CBD10E8E826E03436D646AAEF87B2E247D4AF1E","8ABE1D7520F9C2A45CB1EB8E95CFD55262B70B29FEEC5864E19C054FF99129280E4646217791811142820341263C5315"]}),a("brainpoolP512r1",{type:"short",prime:null,p:"AADD9DB8 DBE9C48B 3FD4E6AE 33C9FC07 CB308DB3 B3C9D20E D6639CCA 703308717D4D9B00 9BC66842 AECDA12A E6A380E6 2881FF2F 2D82C685 28AA6056 583A48F3",a:"7830A331 8B603B89 E2327145 AC234CC5 94CBDD8D 3DF91610 A83441CA EA9863BC2DED5D5A A8253AA1 0A2EF1C9 8B9AC8B5 7F1117A7 2BF2C7B9 E7C1AC4D 77FC94CA",b:"3DF91610 A83441CA EA9863BC 2DED5D5A A8253AA1 0A2EF1C9 8B9AC8B5 7F1117A72BF2C7B9 E7C1AC4D 77FC94CA DC083E67 984050B7 5EBAE5DD 2809BD63 8016F723",n:"AADD9DB8 DBE9C48B 3FD4E6AE 33C9FC07 CB308DB3 B3C9D20E D6639CCA 70330870553E5C41 4CA92619 41866119 7FAC1047 1DB1D381 085DDADD B5879682 9CA90069",hash:vr.sha512,gRed:!1,g:["81AEE4BDD82ED9645A21322E9C4C6A9385ED9F70B5D916C1B43B62EEF4D0098EFF3B1F78E2D0D48D50D1687B93B97D5F7C6D5047406A5E688B352209BCB9F822","7DDE385D566332ECC0EABFA9CF7822FDF209F70024A57B1AA000C55B881F8111B2DCDE494A5F485E5BCA4BD88A2763AED1CA2B2FA8F0540678CD1E0F3AD80892"]});try{r=y6}catch{r=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:vr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function fi(e){if(!(this instanceof fi))return new fi(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Fr.toArray(e.entropy,e.entropyEnc||"hex"),r=Fr.toArray(e.nonce,e.nonceEnc||"hex"),n=Fr.toArray(e.pers,e.persEnc||"hex");xi(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var u0=fi;fi.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},fi.prototype._hmac=function(){return new vr.hmac(this.hash,this.K)},fi.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},fi.prototype.reseed=function(e,t,r,n){typeof t!="string"&&(n=r,r=t,t=null),e=Fr.toArray(e,t),r=Fr.toArray(r,n),xi(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},fi.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");typeof t!="string"&&(n=r,r=t,t=null),r&&(r=Fr.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(r),this._reseed++,Fr.encode(s,t)};var Yl=de.assert;function Ye(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Pu=Ye;Ye.fromPublic=function(e,t,r){return t instanceof Ye?t:new Ye(e,{pub:t,pubEnc:r})},Ye.fromPrivate=function(e,t,r){return t instanceof Ye?t:new Ye(e,{priv:t,privEnc:r})},Ye.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ye.prototype.getPublic=function(e,t){return this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Ye.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Ye.prototype._importPrivate=function(e,t){if(this.priv=new Rt(e,t||16),this.ec.curve.type==="mont"){var r=this.ec.curve.one,n=r.ushln(252).sub(r).ushln(3);this.priv=this.priv.or(r.ushln(254)),this.priv=this.priv.and(n)}else this.priv=this.priv.umod(this.ec.curve.n)},Ye.prototype._importPublic=function(e,t){if(e.x||e.y)return this.ec.curve.type==="mont"?Yl(e.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||Yl(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Ye.prototype.derive=function(e){return e.mul(this.priv).getX()},Ye.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Ye.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},Ye.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var g6=de.assert;function dc(e,t){if(e instanceof dc)return e;this._importDER(e,t)||(g6(e.r&&e.s,"Signature without r or s"),this.r=new Rt(e.r,16),this.s=new Rt(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var po=dc;function b6(){this.place=0}function xu(e,t){var r=e[t.place++];if(!(128&r))return r;for(var n=15&r,i=0,s=0,a=t.place;s<n;s++,a++)i<<=8,i|=e[a];return t.place=a,i}function Jl(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return t===0?e:e.slice(t)}function Mu(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}dc.prototype._importDER=function(e,t){e=de.toArray(e,t);var r=new b6;if(e[r.place++]!==48||xu(e,r)+r.place!==e.length||e[r.place++]!==2)return!1;var n=xu(e,r),i=e.slice(r.place,n+r.place);if(r.place+=n,e[r.place++]!==2)return!1;var s=xu(e,r);if(e.length!==s+r.place)return!1;var a=e.slice(r.place,s+r.place);return i[0]===0&&128&i[1]&&(i=i.slice(1)),a[0]===0&&128&a[1]&&(a=a.slice(1)),this.r=new Rt(i),this.s=new Rt(a),this.recoveryParam=null,!0},dc.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=Jl(t),r=Jl(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Mu(n,t.length),(n=n.concat(t)).push(2),Mu(n,r.length);var i=n.concat(r),s=[48];return Mu(s,i.length),s=s.concat(i),de.encode(s,e)};var Xd=de.assert;function hr(e){if(!(this instanceof hr))return new hr(e);typeof e=="string"&&(Xd(ba.hasOwnProperty(e),"Unknown curve "+e),e=ba[e]),e instanceof ba.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var v6=hr;hr.prototype.keyPair=function(e){return new Pu(this,e)},hr.prototype.keyFromPrivate=function(e,t){return Pu.fromPrivate(this,e,t)},hr.prototype.keyFromPublic=function(e,t){return Pu.fromPublic(this,e,t)},hr.prototype.genKeyPair=function(e){e||(e={});var t=new u0({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Fc(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()});if(this.curve.type==="mont"){var r=new Rt(t.generate(32));return this.keyFromPrivate(r)}for(var n=this.n.byteLength(),i=this.n.sub(new Rt(2));;)if(!((r=new Rt(t.generate(n))).cmp(i)>0))return r.iaddn(1),this.keyFromPrivate(r)},hr.prototype._truncateToN=function(e,t,r){var n=(r=r||8*e.byteLength())-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},hr.prototype.truncateMsg=function(e){var t;return e instanceof Uint8Array?(t=8*e.byteLength,e=this._truncateToN(new Rt(e,16),!1,t)):typeof e=="string"?(t=4*e.length,e=this._truncateToN(new Rt(e,16),!1,t)):e=this._truncateToN(new Rt(e,16)),e},hr.prototype.sign=function(e,t,r,n){typeof r=="object"&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this.truncateMsg(e);for(var i=this.n.byteLength(),s=t.getPrivate().toArray("be",i),a=e.toArray("be",i),o=new u0({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new Rt(1)),u=0;;u++){var h=n.k?n.k(u):new Rt(o.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(c)>=0)){var f=this.g.mul(h);if(!f.isInfinity()){var p=f.getX(),d=p.umod(this.n);if(d.cmpn(0)!==0){var S=h.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e));if((S=S.umod(this.n)).cmpn(0)!==0){var k=(f.getY().isOdd()?1:0)|(p.cmp(d)!==0?2:0);return n.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),k^=1),new po({r:d,s:S,recoveryParam:k})}}}}}},hr.prototype.verify=function(e,t,r,n){return r=this.keyFromPublic(r,n),t=new po(t,"hex"),this._verify(this.truncateMsg(e),t,r)||this._verify(this._truncateToN(new Rt(e,16)),t,r)},hr.prototype._verify=function(e,t,r){var n=t.r,i=t.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;var s,a=i.invm(this.n),o=a.mul(e).umod(this.n),c=a.mul(n).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(o,r.getPublic(),c)).isInfinity()&&s.eqXToP(n):!(s=this.g.mulAdd(o,r.getPublic(),c)).isInfinity()&&s.getX().umod(this.n).cmp(n)===0},hr.prototype.recoverPubKey=function(e,t,r,n){Xd((3&r)===r,"The recovery param is more than two bits"),t=new po(t,n);var i=this.n,s=new Rt(e),a=t.r,o=t.s,c=1&r,u=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw Error("Unable to find sencond key candinate");a=u?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var h=t.r.invm(i),f=i.sub(s).mul(h).umod(i),p=o.mul(h).umod(i);return this.g.mulAdd(f,a,p)},hr.prototype.getKeyRecoveryParam=function(e,t,r,n){if((t=new po(t,n)).recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch{continue}if(s.eq(r))return i}throw Error("Unable to find valid recovery factor")};var Xl=de.assert,Zl=de.parseBytes,us=de.cachedProperty;function Be(e,t){if(this.eddsa=e,t.hasOwnProperty("secret")&&(this._secret=Zl(t.secret)),e.isPoint(t.pub))this._pub=t.pub;else if(this._pubBytes=Zl(t.pub),this._pubBytes&&this._pubBytes.length===33&&this._pubBytes[0]===64&&(this._pubBytes=this._pubBytes.slice(1,33)),this._pubBytes&&this._pubBytes.length!==32)throw Error("Unknown point compression format")}Be.fromPublic=function(e,t){return t instanceof Be?t:new Be(e,{pub:t})},Be.fromSecret=function(e,t){return t instanceof Be?t:new Be(e,{secret:t})},Be.prototype.secret=function(){return this._secret},us(Be,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),us(Be,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),us(Be,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),us(Be,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),us(Be,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),us(Be,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),Be.prototype.sign=function(e){return Xl(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},Be.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},Be.prototype.getSecret=function(e){return Xl(this._secret,"KeyPair is public only"),de.encode(this.secret(),e)},Be.prototype.getPublic=function(e,t){return de.encode((t?[64]:[]).concat(this.pubBytes()),e)};var Tu=Be,w6=de.assert,mo=de.cachedProperty,_6=de.parseBytes;function Ki(e,t){this.eddsa=e,typeof t!="object"&&(t=_6(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),w6(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof Rt&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}mo(Ki,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),mo(Ki,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),mo(Ki,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),mo(Ki,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Ki.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Ki.prototype.toHex=function(){return de.encode(this.toBytes(),"hex").toUpperCase()};var Ql=Ki,A6=de.assert,th=de.parseBytes;function Xe(e){if(A6(e==="ed25519","only tested with ed25519 so far"),!(this instanceof Xe))return new Xe(e);e=ba[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=vr.sha512}var S6=Xe;Xe.prototype.sign=function(e,t){e=th(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),s=this.encodePoint(i),a=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),o=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:o,Rencoded:s})},Xe.prototype.verify=function(e,t,r){e=th(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),s=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(s)},Xe.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return de.intFromLE(e.digest()).umod(this.curve.n)},Xe.prototype.keyPair=function(e){return new Tu(this,e)},Xe.prototype.keyFromPublic=function(e){return Tu.fromPublic(this,e)},Xe.prototype.keyFromSecret=function(e){return Tu.fromSecret(this,e)},Xe.prototype.genKeyPair=function(e){e||(e={});var t=new u0({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Fc(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.curve.n.toArray()});return this.keyFromSecret(t.generate(32))},Xe.prototype.makeSignature=function(e){return e instanceof Ql?e:new Ql(this,e)},Xe.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},Xe.prototype.decodePoint=function(e){var t=(e=de.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=(128&e[t])!=0,i=de.intFromLE(r);return this.curve.pointFromY(i,n)},Xe.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},Xe.prototype.decodeInt=function(e){return de.intFromLE(e)},Xe.prototype.isPoint=function(e){return e instanceof this.pointClass};var eh=xn(function(e,t){var r=t;r.utils=de,r.rand=Fc,r.curve=Po,r.curves=ba,r.ec=v6,r.eddsa=S6}),E6=Object.freeze({__proto__:null,default:eh,__moduleExports:eh}),Zd={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function s(c,u,h,f,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var d=new i(h,f||c,p),S=r?r+u:u;return c._events[S]?c._events[S].fn?c._events[S]=[c._events[S],d]:c._events[S].push(d):(c._events[S]=d,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)t.call(h,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=r?r+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,d=f.length,S=new Array(d);p<d;p++)S[p]=f[p].fn;return S},o.prototype.listenerCount=function(u){var h=r?r+u:u,f=this._events[h];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,h,f,p,d,S){var k=r?r+u:u;if(!this._events[k])return!1;var A=this._events[k],C=arguments.length,B,R;if(A.fn){switch(A.once&&this.removeListener(u,A.fn,void 0,!0),C){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,f),!0;case 4:return A.fn.call(A.context,h,f,p),!0;case 5:return A.fn.call(A.context,h,f,p,d),!0;case 6:return A.fn.call(A.context,h,f,p,d,S),!0}for(R=1,B=new Array(C-1);R<C;R++)B[R-1]=arguments[R];A.fn.apply(A.context,B)}else{var D=A.length,L;for(R=0;R<D;R++)switch(A[R].once&&this.removeListener(u,A[R].fn,void 0,!0),C){case 1:A[R].fn.call(A[R].context);break;case 2:A[R].fn.call(A[R].context,h);break;case 3:A[R].fn.call(A[R].context,h,f);break;case 4:A[R].fn.call(A[R].context,h,f,p);break;default:if(!B)for(L=1,B=new Array(C-1);L<C;L++)B[L-1]=arguments[L];A[R].fn.apply(A[R].context,B)}}return!0},o.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},o.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},o.prototype.removeListener=function(u,h,f,p){var d=r?r+u:u;if(!this._events[d])return this;if(!h)return a(this,d),this;var S=this._events[d];if(S.fn)S.fn===h&&(!p||S.once)&&(!f||S.context===f)&&a(this,d);else{for(var k=0,A=[],C=S.length;k<C;k++)(S[k].fn!==h||p&&!S[k].once||f&&S[k].context!==f)&&A.push(S[k]);A.length?this._events[d]=A.length===1?A[0]:A:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(Zd);var k6=Zd.exports;const va=new k6.EventEmitter,Lc=Ka(null),P6=ns(Lc,e=>e),wa=Ka(!1);function x6(e){Lc.set(e),va.emit("password",e)}function M6(){Lc.set(null)}Hr.on("disconnected",M6);function T6(){va.emit("cancel"),wa.set(!1)}async function Qd(){return new Promise((e,t)=>{const r=Z2(P6);r?e(r):(wa.set(!0),va.once("password",e),va.once("cancel",()=>{t(new Error("Cancelled"))}),va.once("error",t))})}async function t2(e){const t=await Qd(),r=await _p({text:e,format:"utf8"});return await Ap({passwords:[t],message:r,format:"armored"})}async function R6(e){try{const t=await Qd(),r=await wp({armoredMessage:e});return(await Sp({passwords:[t],message:r})).data}catch(t){throw Lc.set(null),t}}const jc=Ka(0);ns(jc,e=>e);const C6=ns(jc,e=>e!==0);async function e2(e){return I6(),e.finally(U6)}function I6(){jc.update(e=>e+1)}function U6(){jc.update(e=>e-1)}Hr.access.claim("secrets","rw");Hr.caching.enable("/secrets/");const r2="secret",qc=Hr.scope("/secrets/");qc.declareType(r2,{type:"object",properties:{id:{type:"string",format:"uuid"},type:{type:"string",enum:["password","text"]},application:{type:"string",format:{type:"oneOf",items:[{type:"uri"},{type:"string"}]}},username:{type:"string"},encryptedSecret:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","type","application","username","encryptedSecret","createdAt","updatedAt"]});function D6(e){return{id:e.id,type:e.type,application:e.application,username:e.username,encryptedSecret:e.encryptedSecret,createdAt:e.createdAt.toJSON(),updatedAt:e.updatedAt.toJSON()}}function O6(e){return{id:e.id,type:e.type,application:e.application,username:e.username,encryptedSecret:e.encryptedSecret,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}}const Ti=Ka({});ns(Ti,e=>Object.values(e));ns(Ti,e=>e);const Z0=ns(Ti,e=>Object.values(e).reduce((t,r)=>((t[r.application]||(t[r.application]=[])).push(r),t),{}));async function N6(e){const r={id:f3(),type:e.type,application:ka(e.application),username:e.username,secret:e.secret,encryptedSecret:await t2(e.secret),createdAt:new Date,updatedAt:new Date};let n;Ti.update(i=>{const s={...i,[r.id]:r};return n=n2(r),s}),n&&await n}async function B6(e,t){let r;const n=await t2(t.secret);Ti.update(i=>{const s=i[e];if(s){const a={...s,...t,id:e,updatedAt:new Date};a.application=ka(a.application),a.encryptedSecret=n;const o={...i,[e]:a};return r=n2(a),o}else return i}),r&&await r}async function z6(e){if(!e.secret){const t=await R6(e.encryptedSecret);Ti.update(r=>{const n=r[e.id];if(e){const i={...n};return i.secret=t,{...r,[n.id]:i}}else return r})}}async function K6(e){let t;Ti.update(r=>{const n={...r};return delete n[e],t=F6(e),n}),t&&await t}async function n2(e){await e2(qc.storeObject(r2,`${e.id}.json`,D6(e)))}async function F6(e){await e2(qc.remove(`${e}.json`))}async function L6(){const e=await qc.getAll("",!1);Ti.update(t=>{const r={...t};return Object.values(e).forEach(n=>{const i=r[n.id],s=O6(n);(!i||i.updatedAt<s.updatedAt)&&(r[n.id]=s)}),r})}Hr.on("sync-done",L6);function j6(e){let t,r,n,i,s;const a=e[2].default,o=g0(a,e,e[1],null);return{c(){t=At("div"),o&&o.c(),this.h()},l(c){t=St(c,"DIV",{});var u=kt(t);o&&o.l(u),u.forEach(dt),this.h()},h(){t.hidden=!0},m(c,u){Pt(c,t,u),o&&o.m(t,null),n=!0,i||(s=Q2(r=q6.call(null,t,e[0])),i=!0)},p(c,[u]){o&&o.p&&(!n||u&2)&&b0(o,a,c,c[1],n?w0(a,c[1],u,null):v0(c[1]),null),r&&ki(r.update)&&u&1&&r.update.call(null,c[0])},i(c){n||(xt(o,c),n=!0)},o(c){Mt(o,c),n=!1},d(c){c&&dt(t),o&&o.d(c),i=!1,s()}}}function q6(e,t="body"){let r;async function n(s){if(t=s,typeof t=="string"){if(r=document.querySelector(t),r===null&&(await t3(),r=document.querySelector(t)),r===null)throw new Error(`No element found matching css selector: "${t}"`)}else if(t instanceof HTMLElement)r=t;else throw new TypeError(`Unknown portal target type: ${t===null?"null":typeof t}. Allowed types: string (CSS selector) or HTMLElement.`);r.appendChild(e),e.hidden=!1}function i(){e.parentNode&&e.parentNode.removeChild(e)}return n(t),{update:n,destroy:i}}function $6(e,t,r){let{$$slots:n={},$$scope:i}=t,{target:s="body"}=t;return e.$$set=a=>{"target"in a&&r(0,s=a.target),"$$scope"in a&&r(1,i=a.$$scope)},[s,i,n]}class W6 extends Ee{constructor(t){super(),ke(this,t,$6,j6,Vn,{target:0})}}function H6(e){let t;return{c(){t=Ln("path"),this.h()},l(r){t=jn(r,"path",{d:!0}),kt(t).forEach(dt),this.h()},h(){ft(t,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z")},m(r,n){Pt(r,t,n)},p:Pe,d(r){r&&dt(t)}}}function G6(e){let t,r;const n=[{viewBox:"0 0 24 24"},e[0]];let i={$$slots:{default:[H6]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)i=Ce(i,n[s]);return t=new rs({props:i}),{c(){Ht(t.$$.fragment)},l(s){Gt(t.$$.fragment,s)},m(s,a){Vt(t,s,a),r=!0},p(s,[a]){const o=a&1?ts(n,[n[0],es(s[0])]):{};a&2&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(xt(t.$$.fragment,s),r=!0)},o(s){Mt(t.$$.fragment,s),r=!1},d(s){Yt(t,s)}}}function V6(e,t,r){return e.$$set=n=>{r(0,t=Ce(Ce({},t),pr(n)))},t=pr(t),[t]}class i2 extends Ee{constructor(t){super(),ke(this,t,V6,G6,Vn,{})}}const Y6=e=>({}),rh=e=>({});function nh(e){let t;const r=e[5].title,n=g0(r,e,e[6],rh);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),t=!0},p(i,s){n&&n.p&&(!t||s&64)&&b0(n,r,i,i[6],t?w0(r,i[6],s,Y6):v0(i[6]),rh)},i(i){t||(xt(n,i),t=!0)},o(i){Mt(n,i),t=!1},d(i){n&&n.d(i)}}}function ih(e){let t;const r=e[5].default,n=g0(r,e,e[6],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,s){n&&n.m(i,s),t=!0},p(i,s){n&&n.p&&(!t||s&64)&&b0(n,r,i,i[6],t?w0(r,i[6],s,null):v0(i[6]),null)},i(i){t||(xt(n,i),t=!0)},o(i){Mt(n,i),t=!1},d(i){n&&n.d(i)}}}function J6(e){let t,r,n,i,s,a,o,c,u=e[1],h,f,p,d,S,k,A=e[1],C,B,R,D=nh(e);d=new i2({});let L=ih(e);return{c(){t=At("div"),r=At("div"),n=Ft(),i=At("div"),s=At("div"),a=At("div"),o=At("div"),c=At("div"),D.c(),h=Ft(),f=At("button"),p=At("div"),Ht(d.$$.fragment),S=Ft(),k=At("div"),L.c(),this.h()},l(g){t=St(g,"DIV",{class:!0,role:!0,"aria-modal":!0});var I=kt(t);r=St(I,"DIV",{class:!0}),kt(r).forEach(dt),n=Lt(I),i=St(I,"DIV",{class:!0});var l=kt(i);s=St(l,"DIV",{class:!0});var m=kt(s);a=St(m,"DIV",{class:!0});var v=kt(a);o=St(v,"DIV",{class:!0});var y=kt(o);c=St(y,"DIV",{class:!0});var w=kt(c);D.l(w),w.forEach(dt),h=Lt(y),f=St(y,"BUTTON",{class:!0});var N=kt(f);p=St(N,"DIV",{class:!0});var O=kt(p);Gt(d.$$.fragment,O),O.forEach(dt),N.forEach(dt),y.forEach(dt),S=Lt(v),k=St(v,"DIV",{class:!0});var W=kt(k);L.l(W),W.forEach(dt),v.forEach(dt),m.forEach(dt),l.forEach(dt),I.forEach(dt),this.h()},h(){ft(r,"class","as-fixed as-inset-0 as-bg-gray-500 as-bg-opacity-25"),Dr(r,"as-hidden",!e[0]),ft(c,"class","as-flex-grow"),ft(p,"class","as-w-6 as-h-6"),ft(f,"class","as-bg-transparent as-border-0 as-text-black as-outline-none focus:as-outline-none"),ft(o,"class","as-flex as-items-start as-justify-between as-px-4 as-pt-4"),ft(k,"class","as-relative as-p-4 as-flex-auto"),ft(a,"class","as-relative as-bg-white as-text-left as-overflow-hidden as-shadow-xl sm:as-my-8 sm:as-container"),ft(s,"class","as-flex as-items-end sm:as-items-center as-justify-center as-min-h-full as-p-4 as-text-center sm:as-p-0"),ft(i,"class","as-fixed as-z-10 as-inset-0 as-overflow-y-auto"),Dr(i,"as-hidden",!e[0]),ft(t,"class","as-relative as-z-10"),ft(t,"role","dialog"),ft(t,"aria-modal","true")},m(g,I){Pt(g,t,I),bt(t,r),bt(t,n),bt(t,i),bt(i,s),bt(s,a),bt(a,o),bt(o,c),D.m(c,null),bt(o,h),bt(o,f),bt(f,p),Vt(d,p,null),bt(a,S),bt(a,k),L.m(k,null),C=!0,B||(R=Zt(f,"click",e[2]),B=!0)},p(g,I){I&1&&Dr(r,"as-hidden",!g[0]),I&2&&Ze(u,u=g[1])?(Pr(),Mt(D,1,1,Pe),xr(),D=nh(g),D.c(),xt(D,1),D.m(c,null)):D.p(g,I),I&2&&Ze(A,A=g[1])?(Pr(),Mt(L,1,1,Pe),xr(),L=ih(g),L.c(),xt(L,1),L.m(k,null)):L.p(g,I),I&1&&Dr(i,"as-hidden",!g[0])},i(g){C||(xt(D),xt(d.$$.fragment,g),xt(L),C=!0)},o(g){Mt(D),Mt(d.$$.fragment,g),Mt(L),C=!1},d(g){g&&dt(t),D.d(g),Yt(d),L.d(g),B=!1,R()}}}function X6(e){let t,r;return t=new W6({props:{$$slots:{default:[J6]},$$scope:{ctx:e}}}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},p(n,[i]){const s={};i&67&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function Z6(e,t,r){let{$$slots:n={},$$scope:i}=t,{onClose:s=()=>{}}=t,{open:a=!1}=t,o=v1(),c;function u(){r(0,a=!1),s()}return e.$$set=h=>{"onClose"in h&&r(3,s=h.onClose),"open"in h&&r(0,a=h.open),"$$scope"in h&&r(6,i=h.$$scope)},e.$$.update=()=>{e.$$.dirty&17&&c!==a&&(r(1,o=v1()),r(4,c=a))},[a,o,u,s,c,n,i]}class Ru extends Ee{constructor(t){super(),ke(this,t,Z6,X6,Ze,{onClose:3,open:0})}}var Q6=Object.assign;function yo(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,t):e}function s2(e){function t(i,s){var a,o,c=r();return i=Q6({},c||{},(a=yo(e,i,c))!==null&&a!==void 0?a:i),a=n.ctx=Object.freeze(i),n.ancestry.unshift(a),s=s(a),n.ancestry.shift(),n.ctx=(o=n.ancestry[0])!==null&&o!==void 0?o:null,s}function r(){return n.ctx}var n={ancestry:[]};return{bind:function(i,s){return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return t(i,function(){return s.apply(void 0,a)})}},run:t,use:r,useX:function(i){var s,a=r();if(i=(s=yo(i))!==null&&s!==void 0?s:yo("Context was used after it was closed"),!a)throw i instanceof String?i.valueOf():Error(i&&yo(i));return a}}}var _a=Object.assign;function Q0(e){return typeof e=="function"}function Me(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return!e.apply(void 0,t)}}function a2(e){return e===null}var t4=Me(a2);function t1(e){return e===void 0}var e4=Me(t1);function Va(e){return e===null||t1(e)}var r4=Me(Va);function kn(e){return String(e)===e}function o2(e,t){return kn(e)&&kn(t)&&e.endsWith(t)}var n4=Me(o2);function c2(e,t){return e===t}var i4=Me(c2);function Sn(e){var t=Number(e);return!(isNaN(parseFloat(String(e)))||isNaN(Number(e))||!isFinite(t))}var s4=Me(Sn);function oa(e,t){return Sn(e)&&Sn(t)&&Number(e)>Number(t)}function Ya(e,t){return Sn(e)&&Sn(t)&&Number(e)===Number(t)}var a4=Me(Ya);function xo(e,t){return Ya(e,t)||oa(e,t)}function e1(e){return!!Array.isArray(e)}var o4=Me(e1);function u2(e,t){return!!(e1(t)||kn(t)&&kn(e))&&t.indexOf(e)!==-1}var c4=Me(u2);function ca(e,t){return Sn(e)&&Sn(t)&&Number(e)<Number(t)}function Mo(e,t){return Ya(e,t)||ca(e,t)}function l2(e,t,r){return xo(e,t)&&Mo(e,r)}var u4=Me(l2);function h2(e){return Va(e)||kn(e)&&!e.trim()}var l4=Me(h2);function Aa(e){return!!e===e}var h4=Me(Aa);function pc(e,t){return Ya(e.length,t)}var f4=Me(pc);function f2(e){return!e||(Object.prototype.hasOwnProperty.call(e,"length")?pc(e,0):typeof e=="object"&&pc(Object.keys(e),0))}var d4=Me(f2);function d2(e,t){return e in t}var p4=Me(d2);function p2(e){return Number.isNaN(e)}var m4=Me(p2);function m2(e){return typeof e=="number"}var y4=Me(m2),g4=Me(kn);function y2(e){return!!e}var b4=Me(y2);function g2(e,t){if(Va(t))return!1;for(var r in t)if(t[r]===e)return!0;return!1}var v4=Me(g2);function b2(e,t){return t instanceof RegExp?t.test(e):!!kn(t)&&new RegExp(t).test(e)}var w4=Me(b2);function sh(e,t){return kn(e)&&kn(t)&&e.startsWith(t)}var Xi={condition:function(e,t){try{return t(e)}catch{return!1}},doesNotEndWith:n4,doesNotStartWith:Me(sh),endsWith:o2,equals:c2,greaterThan:oa,greaterThanOrEquals:xo,gt:oa,gte:xo,inside:u2,isArray:e1,isBetween:l2,isBlank:h2,isBoolean:Aa,isEmpty:f2,isEven:function(e){return!!Sn(e)&&e%2==0},isFalsy:b4,isKeyOf:d2,isNaN:p2,isNegative:function(e){return ca(e,0)},isNotArray:o4,isNotBetween:u4,isNotBlank:l4,isNotBoolean:h4,isNotEmpty:d4,isNotKeyOf:p4,isNotNaN:m4,isNotNull:t4,isNotNullish:r4,isNotNumber:y4,isNotNumeric:s4,isNotString:g4,isNotUndefined:e4,isNotValueOf:v4,isNull:a2,isNullish:Va,isNumber:m2,isNumeric:Sn,isOdd:function(e){return!!Sn(e)&&e%2!=0},isPositive:function(e){return oa(e,0)},isString:kn,isTruthy:y2,isUndefined:t1,isValueOf:g2,lengthEquals:pc,lengthNotEquals:f4,lessThan:ca,lessThanOrEquals:Mo,longerThan:function(e,t){return oa(e.length,t)},longerThanOrEquals:function(e,t){return xo(e.length,t)},lt:ca,lte:Mo,matches:b2,notEquals:i4,notInside:c4,notMatches:w4,numberEquals:Ya,numberNotEquals:a4,shorterThan:function(e,t){return ca(e.length,t)},shorterThanOrEquals:function(e,t){return Mo(e.length,t)},startsWith:sh};function r1(e){for(var t in Xi){var r=Xi[t];Q0(r)&&e(t,r)}}var n1=s2(function(e,t){var r={value:e.value,meta:e.meta||{}};return t?e.set?_a(r,{parent:function(){return t&&{value:t.value,meta:t.meta,parent:t.parent}}}):t:_a(r,{parent:_4})});function _4(){return null}function Ba(e,t,r){if(r||arguments.length===2)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function Ts(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Q0(e)?e.apply(void 0,t):e}function v2(e,t){if(!e)throw t instanceof String?t.valueOf():Error(t&&Ts(t))}function i1(){try{return Q0(Proxy)}catch{return!1}}function A4(e,t){var r;return(r=Ts(e))!==null&&r!==void 0?r:Ts(t)}function mc(e,t){return e={pass:e},t&&(e.message=t),e}function w2(e,t,r){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return v2(Aa(e)||e&&Aa(e.pass),"Incorrect return value for rule: "+JSON.stringify(e)),Aa(e)?mc(e):mc(e.pass,Ts.apply(void 0,Ba([e.message,t,r],n,!1)))}function ah(e){function t(i,s,a){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return v2((c=n1.run({value:e},function(){return w2.apply(void 0,Ba([s.apply(void 0,Ba([e],o,!1)),a,e],o,!1))})).pass,Va(c.message)?"enforce/".concat(a," failed with ").concat(JSON.stringify(e)):new String(Ts(c.message))),i}}var r={};if(!i1())return r1(function(i,s){r[i]=t(r,s,i)}),r;var n=new Proxy(r,{get:function(i,s){if(i=Xi[s])return t(n,i,s)}});return n}function S4(e,t){function r(a,o){a&&(n=!0,i=o)}for(var n=!1,i=null,s=0;s<e.length;s++)if(t(e[s],r,s),n)return i}function oh(e){var t,r=[];return function n(i){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=Xi[i];r.push(function(u){return w2.apply(void 0,Ba([o.apply(void 0,Ba([u],s,!1)),i,u],s,!1))});var c={run:function(u){return A4(S4(r,function(h,f){var p,d=n1.run({value:u},function(){return h(u)});f(!d.pass,mc(!!d.pass,(p=Ts(t,u,d.message))!==null&&p!==void 0?p:d.message))}),mc(!0))},test:function(u){return c.run(u).pass},message:function(u){return u&&(t=u),c}};return i1()?c=new Proxy(c,{get:function(u,h){return Xi[h]?n(h):u[h]}}):(r1(function(u){c[u]=n(u)}),c)}}(e)}var Cu=function(){function e(){if(!i1())return r1(function(r){t[r]=oh(r)}),_a(ah,t)}var t={context:function(){return n1.useX()},extend:function(r){_a(Xi,r),e()}};return e(),new Proxy(_a(ah,t),{get:function(r,n){return n in r?r[n]:Xi[n]?oh(n):void 0}})}(),ch,_2=(ch=0,function(){return"".concat(ch++)});function $c(e){return String(e)===e}function s1(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return!e.apply(void 0,t)}}var Ri=Object.assign;function yc(e){var t=Number(e);return!(isNaN(parseFloat(String(e)))||isNaN(Number(e))||!isFinite(t))}function l0(e,t){return yc(e)&&yc(t)&&Number(e)===Number(t)}function za(e,t){return yc(e)&&yc(t)&&Number(e)>Number(t)}function Wc(e){function t(i,s){var a=t.get(i);return a?a[1]:(s=s(),n.unshift([i.concat(),s]),za(n.length,e)&&(n.length=e),s)}function r(i){return n.findIndex(function(s){var a=s[0];return l0(i.length,a.length)&&i.every(function(o,c){return o===a[c]})})}e===void 0&&(e=1);var n=[];return t.invalidate=function(i){-1<(i=r(i))&&n.splice(i,1)},t.get=function(i){return n[r(i)]||null},t}var E4=s1(function(e){return e===null});function Or(e){return typeof e=="function"}function Zi(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Or(e)?e.apply(void 0,t):e}function A2(e,t){var r;return(r=Zi(e))!==null&&r!==void 0?r:Zi(t)}function a1(e){return(e=[].concat(e))[e.length-1]}function h0(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n];Array.isArray(i)?r.push(h0(i,t)):(i=t(i),E4(i)&&r.push(i))}return r}function S2(e){return[].concat(e).reduce(function(t,r){return Array.isArray(r)?t.concat(S2(r)):[].concat(t).concat(r)},[])}function gc(e,t){var r=0;for(t=t.slice(0,-1);r<t.length;r++){var n=t[r];e[n]=A2(e[n],[]),e=e[n]}return e}var Rs,Tr=Rs||(Rs={});Tr[Tr.DEFAULT=0]="DEFAULT",Tr[Tr.SUITE=1]="SUITE",Tr[Tr.EACH=2]="EACH",Tr[Tr.SKIP_WHEN=3]="SKIP_WHEN",Tr[Tr.OMIT_WHEN=4]="OMIT_WHEN",Tr[Tr.GROUP=5]="GROUP";var bc,go=bc||(bc={});function k4(){var e=0;return{current:function(){return e},next:function(){e++}}}function E2(e,t){return t===void 0&&(t=[]),{cursor:k4(),keys:{current:{},prev:{}},path:t,type:e}}go[go.ALL=0]="ALL",go[go.EAGER=1]="EAGER";var oe=s2(function(e,t){return t?null:Ri({},{exclusion:{tests:{},groups:{}},inclusion:{},isolate:E2(Rs.DEFAULT),mode:[bc.ALL]},e)});function or(){return oe.useX().stateRef}function k2(e){return or().optionalFields()[0][e]}function P4(e,t){(0,or().optionalFields()[1])(function(r){var n;return Ri(r,((n={})[e]=Zi(t,r[e]),n))})}function o1(e){var t;return(t=k2(e))===null||t===void 0?void 0:t[0]}function f0(){Cs(function(e){return e})}function Cs(e){(0,or().testObjects()[1])(function(t){return{prev:t.prev,current:[].concat(e(t.current))}})}function c1(){return $r().filter(function(e){return e.isPending()})}var x4=Wc();function $r(){var e=or().testObjects()[0].current;return x4([e],function(){return S2(e)})}var Sa,uh=Sa||(Sa={});uh.Error="error",uh.Warning="warning";var P2=function(){function e(t,r,n){var i=n===void 0?{}:n;n=i.message;var s=i.groupName;i=i.key,this.key=null,this.id=_2(),this.severity=Sa.Error,this.status=Iu,this.fieldName=t,this.testFn=r,s&&(this.groupName=s),n&&(this.message=n),i&&(this.key=i)}return e.prototype.run=function(){try{var t=this.testFn()}catch(r){t=r,this.message===void 0&&$c(t)&&(this.message=r),t=!1}return t===!1&&this.fail(),t},e.prototype.setStatus=function(t){this.isFinalStatus()&&t!==Uu||(this.status=t)},e.prototype.warns=function(){return this.severity===Sa.Warning},e.prototype.setPending=function(){this.setStatus(ph)},e.prototype.fail=function(){this.setStatus(this.warns()?fh:hh)},e.prototype.done=function(){this.isFinalStatus()||this.setStatus(dh)},e.prototype.warn=function(){this.severity=Sa.Warning},e.prototype.isFinalStatus=function(){return this.hasFailures()||this.isCanceled()||this.isPassing()},e.prototype.skip=function(t){this.isPending()&&!t||this.setStatus(lh)},e.prototype.cancel=function(){this.setStatus(mh),f0()},e.prototype.reset=function(){this.status=Iu,f0()},e.prototype.omit=function(){this.setStatus(Uu)},e.prototype.valueOf=function(){return!this.isFailing()},e.prototype.hasFailures=function(){return this.isFailing()||this.isWarning()},e.prototype.isNonActionable=function(){return this.isSkipped()||this.isOmitted()||this.isCanceled()},e.prototype.isPending=function(){return this.statusEquals(ph)},e.prototype.isTested=function(){return this.hasFailures()||this.isPassing()},e.prototype.isOmitted=function(){return this.statusEquals(Uu)},e.prototype.isUntested=function(){return this.statusEquals(Iu)},e.prototype.isFailing=function(){return this.statusEquals(hh)},e.prototype.isCanceled=function(){return this.statusEquals(mh)},e.prototype.isSkipped=function(){return this.statusEquals(lh)},e.prototype.isPassing=function(){return this.statusEquals(dh)},e.prototype.isWarning=function(){return this.statusEquals(fh)},e.prototype.statusEquals=function(t){return this.status===t},e}(),Iu="UNTESTED",lh="SKIPPED",hh="FAILED",fh="WARNING",dh="PASSING",ph="PENDING",mh="CANCELED",Uu="OMITTED";function Is(e,t){if(!e)throw t instanceof String?t.valueOf():Error(t&&Zi(t))}function M4(e){function t(s,a,o){return n.references.push(),r(s,Zi(a,o)),function(){return[n.references[s],function(c){return r(s,Zi(c,n.references[s]))}]}}function r(s,a){var o=n.references[s];n.references[s]=a,Or(s=i[s][1])&&s(a,o),Or(e)&&e()}var n={references:[]},i=[];return{registerStateKey:function(s,a){var o=i.length;return i.push([s,a]),t(o,s)},reset:function(){var s=n.references;n.references=[],i.forEach(function(a,o){return t(o,a[0],s[o])})}}}function T4(e,t){var r=t.suiteId;return t=t.suiteName,{optionalFields:e.registerStateKey(function(){return{}}),suiteId:e.registerStateKey(r),suiteName:e.registerStateKey(t),testCallbacks:e.registerStateKey(function(){return{fieldCallbacks:{},doneCallbacks:[]}}),testObjects:e.registerStateKey(function(n){return{prev:n?n.current:[],current:[]}})}}function d0(e){return e==null}function yh(e){setTimeout(function(){throw Error(e)},0)}function R4(e,t){e=(e=e.type)===void 0?Rs.DEFAULT:e,Is(Or(t));var r=E2(e,vc());return e=oe.run({isolate:r},function(){return r.keys.prev=function(){var n=or().testObjects()[0].prev;return[].concat(gc(n,vc())).reduce(function(i,s){return s instanceof P2&&!d0(s.key)&&(i[s.key]=s),i},{})}(),Cs(function(n){var i=r.path;return gc(n,i)[a1(i)]=[],n}),t()}),gi().cursor.next(),e}function gi(){return oe.useX().isolate}function vc(){var e=gi();return e.path.concat(e.cursor.current())}var cr,gh=cr||(cr={});gh.WARNINGS="warnings",gh.ERRORS="errors";var Us,bh=Us||(Us={});function u1(e){return e===cr.ERRORS?Us.ERROR_COUNT:Us.WARN_COUNT}function zs(e){return!e||(Object.prototype.hasOwnProperty.call(e,"length")?l0(e.length,0):typeof e=="object"&&l0((e=Object.keys(e)).length,0))}bh.ERROR_COUNT="errorCount",bh.WARN_COUNT="warnCount";var Hc=s1(zs);function Qi(e,t){return!(!t||e.fieldName!==t)}var Du=s1(function(e,t){return e.groupName===t});function x2(e,t){return $r().some(function(r){return M2(r,e,t)})}function M2(e,t,r){return(r=!e.hasFailures()||r&&!Qi(e,r))||(e=e.warns(),r=t===cr.WARNINGS!=!!e),!r}function vh(e){return!!T2(e)||!x2(cr.ERRORS,e)&&!zs($r())&&!function(t){return Hc(c1().filter(function(r){return R2(r,t)}))}(e)&&function(t){return $r().every(function(r){return!(!t||Qi(r,t))||C2(r,t)})}(e)}function T2(e){return!!e&&((t=k2(e))===null||t===void 0?void 0:t[1])===!0;var t}function R2(e,t){return!(t&&!Qi(e,t))&&o1(e.fieldName)!==!0}function C2(e,t){return!(!t||Qi(e,t))||o1(e.fieldName)===!0||e.isTested()||e.isOmitted()}function Ks(){var e=oe.useX().summary;return Is(e),e}function C4(){var e=$r(),t=Ri({errorCount:0,warnCount:0,testCount:0},{groups:{},tests:{},valid:!1});return e.reduce(function(r,n){var i=r.tests;i[n.fieldName]=wh(i,n),i[n.fieldName].valid=i[n.fieldName].valid!==!1&&vh(n.fieldName);var s=r.groups,a=n.groupName;return a&&(s[a]=s[a]||{},s[a][n.fieldName]=wh(s[a],n),i=s[a][n.fieldName],s[a][n.fieldName].valid===!1?n=!1:n=!!T2(n=n.fieldName)||!function(o,c,u){return $r().some(function(h){return!Du(h,c)&&M2(h,o,u)})}(cr.ERRORS,a,n)&&!function(o,c){return Hc(c1().filter(function(u){return!Du(u,o)&&R2(u,c)}))}(a,n)&&function(o,c){return $r().every(function(u){return!!Du(u,o)||C2(u,c)})}(a,n),i.valid=n),r},t),t.valid=vh(),function(r){for(var n in r.tests)r.errorCount+=r.tests[n].errorCount,r.warnCount+=r.tests[n].warnCount,r.testCount+=r.tests[n].testCount;return r}(t)}function wh(e,t){function r(a){var o=u1(a);s[o]++,i&&(s[a]=(s[a]||[]).concat(i))}var n=t.fieldName,i=t.message;e[n]=e[n]||Ri({errorCount:0,warnCount:0,testCount:0},{errors:[],warnings:[]});var s=e[n];return t.isNonActionable()||(e[n].testCount++,t.isFailing()?r(cr.ERRORS):t.isWarning()&&r(cr.WARNINGS)),s}function I2(e,t,r){var n;return((n=e==null?void 0:e[r])===null||n===void 0?void 0:n[t])||[]}function U2(e,t){var r,n={},i=u1(t);for(r in e)za(e[r][i],0)&&(n[r]=e[r][t]||[]);return n}function I4(e){return D2(cr.ERRORS,e)}function U4(e){return D2(cr.WARNINGS,e)}function D2(e,t){var r=Ks().tests;return t?I2(r,e,t):U2(r,e)}function D4(e,t){return O2(e,cr.ERRORS,t)}function O4(e,t){return O2(e,cr.WARNINGS,t)}function O2(e,t,r){return e=Ks().groups[e],r?I2(e,t,r):U2(e,t)}function N4(e){return N2(Us.ERROR_COUNT,e)}function B4(e){return N2(Us.WARN_COUNT,e)}function N2(e,t){var r,n=Ks();return za(t?(r=n.tests[t])===null||r===void 0?void 0:r[e]:n[e],0)}function z4(e,t){return B2(cr.ERRORS,e,t)}function K4(e,t){return B2(cr.WARNINGS,e,t)}function B2(e,t,r){var n,i,s=Ks();if(e=u1(e),!(t=s.groups[t]))return!1;if(r)return za((n=t[r])===null||n===void 0?void 0:n[e],0);for(var a in t)if(za((i=t[a])===null||i===void 0?void 0:i[e],0))return!0;return!1}function F4(e){var t=Ks();return e?!!p0(t.tests,e):t.valid}function L4(e,t){if(!(e=Ks().groups[e]))return!1;if(t)return p0(e,t);for(var r in e)if(!p0(e,r))return!1;return!0}function p0(e,t){var r;return!((r=e[t])===null||r===void 0||!r.valid)}var j4=Wc(1);function l1(){var e=$r(),t={stateRef:or()};return j4([e],oe.bind(t,function(){var r=C4(),n=or().suiteName()[0],i={summary:r};return Ri(r,{getErrors:oe.bind(i,I4),getErrorsByGroup:oe.bind(i,D4),getWarnings:oe.bind(i,U4),getWarningsByGroup:oe.bind(i,O4),hasErrors:oe.bind(i,N4),hasErrorsByGroup:oe.bind(i,z4),hasWarnings:oe.bind(i,B4),hasWarningsByGroup:oe.bind(i,K4),isValid:oe.bind(i,F4),isValidByGroup:oe.bind(i,L4),suiteName:n})}))}function wc(e){var t=c1();return!zs(t)&&(e?t.some(function(r){return Qi(r,e)}):Hc(t))}var q4=Wc(20);function z2(){var e=$r(),t={stateRef:or()};return q4([e],oe.bind(t,function(){return Ri({},l1(),{done:oe.bind(t,H4)})}))}function $4(e,t,r){return!(Or(e)&&(!t||r.tests[t]&&!zs(r.tests[t].testCount)))}function W4(e){return!(wc()&&(!e||wc(e)))}function H4(){function e(){return n(l1())}for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=(t=t.reverse())[0];return t=t[1],r=z2(),$4(n,t,r)?r:W4(t)?(e(),r):(G4(e,t),r)}function G4(e,t){(0,or().testCallbacks()[1])(function(r){return t?r.fieldCallbacks[t]=(r.fieldCallbacks[t]||[]).concat(e):r.doneCallbacks.push(e),r})}function _h(e){return e.forEach(function(t){return t()})}function V4(){var e=function(){var t={};return{emit:function(r,n){(t[r]||[]).forEach(function(i){i(n)})},on:function(r,n){return t[r]=(t[r]||[]).concat(n),{off:function(){t[r]=(t[r]||[]).filter(function(i){return i!==n})}}}}}();return e.on(_r.TEST_COMPLETED,function(t){if(!t.isCanceled()){t.done(),t=t.fieldName;var r=or().testCallbacks()[0].fieldCallbacks;t&&!wc(t)&&Array.isArray(r[t])&&_h(r[t]),wc()||e.emit(_r.ALL_RUNNING_TESTS_FINISHED)}}),e.on(_r.SUITE_CALLBACK_DONE_RUNNING,function(){(function(){function t(n){r[n.fieldName]&&(n.omit(),P4(n.fieldName,function(i){return[i[0],!0]}))}if(!zs(or().optionalFields()[0])){var r={};Cs(function(n){return h0(n,function(i){if(Object.prototype.hasOwnProperty.call(r,i.fieldName))t(i);else{var s=o1(i.fieldName);Or(s)&&(r[i.fieldName]=s(),t(i))}return i})})}})()}),e.on(_r.ALL_RUNNING_TESTS_FINISHED,function(){_h(or().testCallbacks()[0].doneCallbacks)}),e.on(_r.REMOVE_FIELD,function(t){$r().forEach(function(r){Qi(r,t)&&(r.cancel(),function(n){Cs(function(i){return h0(i,function(s){return n!==s?s:null})})}(r))})}),e.on(_r.RESET_FIELD,function(t){$r().forEach(function(r){Qi(r,t)&&r.reset()})}),e}function K2(){var e=oe.useX();return Is(e.bus),e.bus}var _r,Gs=_r||(_r={});function F2(e){return L2(0,"tests",e)}function L2(e,t,r){var n=oe.useX("hook called outside of a running suite.");r&&[].concat(r).forEach(function(i){$c(i)&&(n.exclusion[t][i]=e===0)})}function Ah(e){for(var t in e)if(e[t]===!0)return!0;return!1}function Sh(){var e,t=oe.useX().exclusion;for(e in t.groups)if(t.groups[e])return!0;return!1}function Y4(e,t,r){if(r||arguments.length===2)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function Eh(e){var t=e.asyncTest,r=e.message;if(t&&Or(t.then)){var n=K2().emit,i=or(),s=oe.bind({stateRef:i},function(){f0(),n(_r.TEST_COMPLETED,e)});i=oe.bind({stateRef:i},function(a){e.isCanceled()||(e.message=$c(a)?a:r,e.fail(),s())});try{t.then(s,i)}catch{i()}}}function kh(e){var t=or().testObjects()[0].prev;if(zs(t))return To(e),e;var r=vc();if(t=gc(t,r)[a1(r)],!d0(e.key)){t=e.key,(r=gi().keys.prev[t])&&(e=r),r=e;var n=gi().keys.current;return d0(n[t])?n[t]=r:yh('Encountered the same test key "'.concat(t,`" twice. This may lead to tests overriding each other's results, or to tests being unexpectedly omitted.`)),To(e),e}return!Hc(r=t)||r.fieldName===e.fieldName&&r.groupName===e.groupName||(gi().type===Rs.EACH||yh(`Vest Critical Error: Tests called in different order than previous run.
    expected: `.concat(t.fieldName,`
    received: `).concat(e.fieldName,`
    This can happen on one of two reasons:
    1. You're using if/else statements to conditionally select tests. Instead, use "skipWhen".
    2. You are iterating over a list of tests, and their order changed. Use "each" and a custom key prop so that Vest retains their state.`)),function(){var i=gi().cursor.current();Cs(function(s){return s.splice(i),s})}(),t=null),To(e=A2(t,e)),e}function To(e){var t=vc();Cs(function(r){return gc(r,t)[a1(t)]=e,r})}function j2(e){var t=gi().cursor,r=bc.EAGER;if(oe.useX().mode[0]===r&&x2(cr.ERRORS,e.fieldName))return e.skip(),kh(e),t.next(),e;if(r=kh(e),oe.useX().omitted)return r.omit(),t.next(),r;if(function(i){var s=i.fieldName;if(i=i.groupName,oe.useX().skipped)return!0;var a=oe.useX(),o=a.exclusion;a=a.inclusion;var c=o.tests,u=c[s];if(u===!1)return!0;if(u=u===!0,i){var h=oe.useX().exclusion.groups;if(h=Object.prototype.hasOwnProperty.call(h,i)?h[i]===!1:Sh())return!0;if(o.groups[i]===!0)return!(u||!Ah(c)&&c[s]!==!1)}return(i=!!Sh()&&!i)||!u&&!!Ah(c)&&!Zi(a[s])}(e))return r.skip(!!oe.useX().skipped),t.next(),r;if(e!==r&&r.fieldName===e.fieldName&&r.groupName===e.groupName&&r.isPending()&&r.cancel(),To(e),e.isUntested()){r=K2();var n=function(i){return oe.run({currentTest:i},function(){return i.run()})}(e);try{n&&Or(n.then)?(e.asyncTest=n,e.setPending(),Eh(e)):r.emit(_r.TEST_COMPLETED,e)}catch(i){throw Error(`Unexpected error encountered during test registration.
      Test Object: `.concat(JSON.stringify(e),`.
      Error: `).concat(i,"."))}}else(r=e.asyncTest)&&Or(r.then)&&(e.setPending(),Eh(e));return t.next(),e}function Ph(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Or(t[1])?t:Y4([void 0],t,!0);t=n[0],r=n[1],n=n[2],Is($c(e),xh("fieldName","string")),Is(Or(r),xh("Test callback","function"));var i=oe.useX();return j2(t=new P2(e,r,{message:t,groupName:i.groupName,key:n}))}Gs.TEST_COMPLETED="test_completed",Gs.ALL_RUNNING_TESTS_FINISHED="all_running_tests_finished",Gs.REMOVE_FIELD="remove_field",Gs.RESET_FIELD="reset_field",Gs.SUITE_CALLBACK_DONE_RUNNING="suite_callback_done_running",F2.group=function(e){return L2(0,"groups",e)};var Ou=Ri(Ph,{memo:function(e){var t=Wc(10);return function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];i=gi().cursor.current();var s=(n=n.reverse())[0],a=n[1],o=n[2];return i=[or().suiteId()[0],r,i].concat(s),(n=t.get(i))===null?t(i,function(){return e(r,o,a)}):n[1].isCanceled()?(t.invalidate(i),t(i,function(){return e(r,o,a)})):j2(n[1])}}(Ph)});function xh(e,t){return"Incompatible params passed to test function. ".concat(e," must be a ").concat(t)}function J4(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(e=e.reverse())[0];e=e[1],Is(Or(r),"vest.create: Expected callback to be a function.");var n=V4(),i=M4();return e={stateRef:T4(i,{suiteId:_2(),suiteName:e}),bus:n},Ri(oe.bind(e,function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return i.reset(),R4({type:Rs.SUITE},function(){r.apply(void 0,s)}),n.emit(_r.SUITE_CALLBACK_DONE_RUNNING),z2()}),{get:oe.bind(e,l1),remove:oe.bind(e,function(s){n.emit(_r.REMOVE_FIELD,s)}),reset:i.reset,resetField:oe.bind(e,function(s){n.emit(_r.RESET_FIELD,s)})})}function X4(e){let t;return{c(){t=Ln("path"),this.h()},l(r){t=jn(r,"path",{d:!0}),kt(t).forEach(dt),this.h()},h(){ft(t,"d","M256 105c-101.8 0-188.4 62.4-224 151 35.6 88.6 122.2 151 224 151s188.4-62.4 224-151c-35.6-88.6-122.2-151-224-151zm0 251.7c-56 0-101.8-45.3-101.8-100.7S200 155.3 256 155.3 357.8 200.6 357.8 256 312 356.7 256 356.7zm0-161.1c-33.6 0-61.1 27.2-61.1 60.4s27.5 60.4 61.1 60.4 61.1-27.2 61.1-60.4-27.5-60.4-61.1-60.4z")},m(r,n){Pt(r,t,n)},p:Pe,d(r){r&&dt(t)}}}function Z4(e){let t,r;const n=[{viewBox:"0 0 512 512"},e[0]];let i={$$slots:{default:[X4]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)i=Ce(i,n[s]);return t=new rs({props:i}),{c(){Ht(t.$$.fragment)},l(s){Gt(t.$$.fragment,s)},m(s,a){Vt(t,s,a),r=!0},p(s,[a]){const o=a&1?ts(n,[n[0],es(s[0])]):{};a&2&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(xt(t.$$.fragment,s),r=!0)},o(s){Mt(t.$$.fragment,s),r=!1},d(s){Yt(t,s)}}}function Q4(e,t,r){return e.$$set=n=>{r(0,t=Ce(Ce({},t),pr(n)))},t=pr(t),[t]}class h1 extends Ee{constructor(t){super(),ke(this,t,Q4,Z4,Vn,{})}}function t8(e){let t;return{c(){t=Ln("path"),this.h()},l(r){t=jn(r,"path",{d:!0}),kt(t).forEach(dt),this.h()},h(){ft(t,"d","M256.1 144.8c56.2 0 101.9 45.3 101.9 101.1 0 13.1-2.6 25.5-7.3 37l59.5 59c30.8-25.5 55-58.4 69.9-96-35.3-88.7-122.3-151.6-224.2-151.6-28.5 0-55.8 5.1-81.1 14.1l44 43.7c11.6-4.6 24.1-7.3 37.3-7.3zM52.4 89.7l46.5 46.1 9.4 9.3c-33.9 26-60.4 60.8-76.3 100.8 35.2 88.7 122.2 151.6 224.1 151.6 31.6 0 61.7-6.1 89.2-17l8.6 8.5 59.7 59 25.9-25.7L78.2 64 52.4 89.7zM165 201.4l31.6 31.3c-1 4.2-1.6 8.7-1.6 13.1 0 33.5 27.3 60.6 61.1 60.6 4.5 0 9-.6 13.2-1.6l31.6 31.3c-13.6 6.7-28.7 10.7-44.8 10.7-56.2 0-101.9-45.3-101.9-101.1 0-15.8 4.1-30.7 10.8-44.3zm87.8-15.7l64.2 63.7.4-3.2c0-33.5-27.3-60.6-61.1-60.6l-3.5.1z")},m(r,n){Pt(r,t,n)},p:Pe,d(r){r&&dt(t)}}}function e8(e){let t,r;const n=[{viewBox:"0 0 512 512"},e[0]];let i={$$slots:{default:[t8]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)i=Ce(i,n[s]);return t=new rs({props:i}),{c(){Ht(t.$$.fragment)},l(s){Gt(t.$$.fragment,s)},m(s,a){Vt(t,s,a),r=!0},p(s,[a]){const o=a&1?ts(n,[n[0],es(s[0])]):{};a&2&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(xt(t.$$.fragment,s),r=!0)},o(s){Mt(t.$$.fragment,s),r=!1},d(s){Yt(t,s)}}}function r8(e,t,r){return e.$$set=n=>{r(0,t=Ce(Ce({},t),pr(n)))},t=pr(t),[t]}class Gc extends Ee{constructor(t){super(),ke(this,t,r8,e8,Vn,{})}}function n8(e){let t,r,n,i,s;return{c(){t=Ln("path"),r=Ft(),n=Ln("path"),i=Ft(),s=Ln("path"),this.h()},l(a){t=jn(a,"path",{d:!0}),kt(t).forEach(dt),r=Lt(a),n=jn(a,"path",{d:!0}),kt(n).forEach(dt),i=Lt(a),s=jn(a,"path",{d:!0}),kt(s).forEach(dt),this.h()},h(){ft(t,"d","M352 115h90c3.3 0 6-2.7 6-6 0-8.2-3.7-16-10-21.3l-77.1-64.2c-4.9-4.1-14.2-7.4-20.6-7.4-4.1 0-7.4 3.3-7.4 7.4V96c.1 10.5 8.6 19 19.1 19z"),ft(n,"d","M307 96V16H176c-17.6 0-32 14.4-32 32v336c0 17.6 14.4 32 32 32h240c17.6 0 32-14.4 32-32V141h-96c-24.8 0-45-20.2-45-45z"),ft(s,"d","M116 412V80H96c-17.6 0-32 14.4-32 32v352c0 17.6 14.4 32 32 32h256c17.6 0 32-14.4 32-32v-20H148c-17.6 0-32-14.4-32-32z")},m(a,o){Pt(a,t,o),Pt(a,r,o),Pt(a,n,o),Pt(a,i,o),Pt(a,s,o)},p:Pe,d(a){a&&dt(t),a&&dt(r),a&&dt(n),a&&dt(i),a&&dt(s)}}}function i8(e){let t,r;const n=[{viewBox:"0 0 512 512"},e[0]];let i={$$slots:{default:[n8]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)i=Ce(i,n[s]);return t=new rs({props:i}),{c(){Ht(t.$$.fragment)},l(s){Gt(t.$$.fragment,s)},m(s,a){Vt(t,s,a),r=!0},p(s,[a]){const o=a&1?ts(n,[n[0],es(s[0])]):{};a&2&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(xt(t.$$.fragment,s),r=!0)},o(s){Mt(t.$$.fragment,s),r=!1},d(s){Yt(t,s)}}}function s8(e,t,r){return e.$$set=n=>{r(0,t=Ce(Ce({},t),pr(n)))},t=pr(t),[t]}class q2 extends Ee{constructor(t){super(),ke(this,t,s8,i8,Vn,{})}}function a8(e){let t;return{c(){t=Ln("path"),this.h()},l(r){t=jn(r,"path",{d:!0}),kt(t).forEach(dt),this.h()},h(){ft(t,"d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z")},m(r,n){Pt(r,t,n)},p:Pe,d(r){r&&dt(t)}}}function o8(e){let t,r;const n=[{viewBox:"0 0 24 24"},e[0]];let i={$$slots:{default:[a8]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)i=Ce(i,n[s]);return t=new rs({props:i}),{c(){Ht(t.$$.fragment)},l(s){Gt(t.$$.fragment,s)},m(s,a){Vt(t,s,a),r=!0},p(s,[a]){const o=a&1?ts(n,[n[0],es(s[0])]):{};a&2&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(xt(t.$$.fragment,s),r=!0)},o(s){Mt(t.$$.fragment,s),r=!1},d(s){Yt(t,s)}}}function c8(e,t,r){return e.$$set=n=>{r(0,t=Ce(Ce({},t),pr(n)))},t=pr(t),[t]}class $2 extends Ee{constructor(t){super(),ke(this,t,c8,o8,Vn,{})}}function u8(e){let t,r,n,i;return{c(){t=At("input"),this.h()},l(s){t=St(s,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){ft(t,"id",e[2]),ft(t,"name",e[3]),ft(t,"class","as-input as-flex-1"),ft(t,"type","password"),ft(t,"placeholder","Enter a Password"),t.disabled=r=!e[6]},m(s,a){Pt(s,t,a),Ue(t,e[0]),n||(i=[Zt(t,"input",e[12]),Zt(t,"input",function(){ki(e[4])&&e[4].apply(this,arguments)})],n=!0)},p(s,a){e=s,a&4&&ft(t,"id",e[2]),a&8&&ft(t,"name",e[3]),a&64&&r!==(r=!e[6])&&(t.disabled=r),a&1&&t.value!==e[0]&&Ue(t,e[0])},d(s){s&&dt(t),n=!1,gr(i)}}}function l8(e){let t,r,n,i;return{c(){t=At("input"),this.h()},l(s){t=St(s,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){ft(t,"id",e[2]),ft(t,"name",e[3]),ft(t,"class","as-input as-flex-1"),ft(t,"type","text"),ft(t,"placeholder","Enter a Password"),t.disabled=r=!e[6]},m(s,a){Pt(s,t,a),Ue(t,e[0]),n||(i=[Zt(t,"input",e[11]),Zt(t,"input",function(){ki(e[4])&&e[4].apply(this,arguments)})],n=!0)},p(s,a){e=s,a&4&&ft(t,"id",e[2]),a&8&&ft(t,"name",e[3]),a&64&&r!==(r=!e[6])&&(t.disabled=r),a&1&&t.value!==e[0]&&Ue(t,e[0])},d(s){s&&dt(t),n=!1,gr(i)}}}function h8(e){let t,r;return t=new Gc({}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function f8(e){let t,r;return t=new h1({}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function d8(e){let t,r,n,i,s,a,o,c,u,h,f,p,d,S,k,A,C,B;function R(m,v){return m[1]?l8:u8}let D=R(e),L=D(e);a=new $2({}),h=new q2({});const g=[f8,h8],I=[];function l(m,v){return m[1]?0:1}return S=l(e),k=I[S]=g[S](e),{c(){t=At("div"),L.c(),r=Ft(),n=At("div"),i=At("button"),s=At("div"),Ht(a.$$.fragment),o=Ft(),c=At("button"),u=At("div"),Ht(h.$$.fragment),f=Ft(),p=At("button"),d=At("div"),k.c(),this.h()},l(m){t=St(m,"DIV",{class:!0});var v=kt(t);L.l(v),r=Lt(v),n=St(v,"DIV",{class:!0});var y=kt(n);i=St(y,"BUTTON",{class:!0});var w=kt(i);s=St(w,"DIV",{class:!0});var N=kt(s);Gt(a.$$.fragment,N),N.forEach(dt),w.forEach(dt),o=Lt(y),c=St(y,"BUTTON",{class:!0});var O=kt(c);u=St(O,"DIV",{class:!0});var W=kt(u);Gt(h.$$.fragment,W),W.forEach(dt),O.forEach(dt),f=Lt(y),p=St(y,"BUTTON",{class:!0});var Z=kt(p);d=St(Z,"DIV",{class:!0});var b=kt(d);k.l(b),b.forEach(dt),Z.forEach(dt),y.forEach(dt),v.forEach(dt),this.h()},h(){ft(s,"class","as-w-5 as-h-5"),ft(i,"class","as-btn as-primary as-p-2"),i.disabled=e[5],Dr(i,"as-secondary",e[6]),ft(u,"class","as-w-5 as-h-5"),ft(c,"class","as-btn as-primary as-p-2"),c.disabled=e[5],ft(d,"class","as-w-5 as-h-5"),ft(p,"class","as-btn as-primary as-p-2"),ft(n,"class","as-grow-0 as-flex-row as-flex"),ft(t,"class","as-flex")},m(m,v){Pt(m,t,v),L.m(t,null),bt(t,r),bt(t,n),bt(n,i),bt(i,s),Vt(a,s,null),bt(n,o),bt(n,c),bt(c,u),Vt(h,u,null),bt(n,f),bt(n,p),bt(p,d),I[S].m(d,null),A=!0,C||(B=[Zt(i,"click",e[9]),Zt(c,"click",e[8]),Zt(p,"click",e[7])],C=!0)},p(m,[v]){D===(D=R(m))&&L?L.p(m,v):(L.d(1),L=D(m),L&&(L.c(),L.m(t,r))),(!A||v&32)&&(i.disabled=m[5]),v&64&&Dr(i,"as-secondary",m[6]),(!A||v&32)&&(c.disabled=m[5]);let y=S;S=l(m),S!==y&&(Pr(),Mt(I[y],1,1,()=>{I[y]=null}),xr(),k=I[S],k||(k=I[S]=g[S](m),k.c()),xt(k,1),k.m(d,null))},i(m){A||(xt(a.$$.fragment,m),xt(h.$$.fragment,m),xt(k),A=!0)},o(m){Mt(a.$$.fragment,m),Mt(h.$$.fragment,m),Mt(k),A=!1},d(m){m&&dt(t),L.d(),Yt(a),Yt(h),I[S].d(),C=!1,gr(B)}}}function p8(e,t,r){let{id:n=void 0}=t,{name:i=void 0}=t,{password:s}=t,{onInput:a=()=>{}}=t,{onShow:o=()=>{}}=t,{show:c=!1}=t,{disabled:u=!1}=t;function h(){r(1,c=!c),c===!1?r(6,p=!0):o()}async function f(){navigator.clipboard.writeText(s)}let p=c;function d(){r(6,p=!p),p===!1&&r(1,c=!0)}function S(){s=this.value,r(0,s)}function k(){s=this.value,r(0,s)}return e.$$set=A=>{"id"in A&&r(2,n=A.id),"name"in A&&r(3,i=A.name),"password"in A&&r(0,s=A.password),"onInput"in A&&r(4,a=A.onInput),"onShow"in A&&r(10,o=A.onShow),"show"in A&&r(1,c=A.show),"disabled"in A&&r(5,u=A.disabled)},[s,c,n,i,a,u,p,h,f,d,o,S,k]}class W2 extends Ee{constructor(t){super(),ke(this,t,p8,d8,Ze,{id:2,name:3,password:0,onInput:4,onShow:10,show:1,disabled:5})}}function Mh(e,t,r){const n=e.slice();return n[1]=t[r],n}function Th(e){let t,r=e[1]+"",n;return{c(){t=At("li"),n=Ae(r),this.h()},l(i){t=St(i,"LI",{class:!0});var s=kt(t);n=Se(s,r),s.forEach(dt),this.h()},h(){ft(t,"class","as-text-red-500")},m(i,s){Pt(i,t,s),bt(t,n)},p(i,s){s&1&&r!==(r=i[1]+"")&&Ea(n,r)},d(i){i&&dt(t)}}}function m8(e){let t,r=e[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Th(Mh(e,r,i));return{c(){t=At("ul");for(let i=0;i<n.length;i+=1)n[i].c()},l(i){t=St(i,"UL",{});var s=kt(t);for(let a=0;a<n.length;a+=1)n[a].l(s);s.forEach(dt)},m(i,s){Pt(i,t,s);for(let a=0;a<n.length;a+=1)n[a].m(t,null)},p(i,[s]){if(s&1){r=i[0];let a;for(a=0;a<r.length;a+=1){const o=Mh(i,r,a);n[a]?n[a].p(o,s):(n[a]=Th(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}},i:Pe,o:Pe,d(i){i&&dt(t),e3(n,i)}}}function y8(e,t,r){let{messages:n=[]}=t;return e.$$set=i=>{"messages"in i&&r(0,n=i.messages)},[n]}class ua extends Ee{constructor(t){super(),ke(this,t,y8,m8,Ze,{messages:0})}}const f1={},Ro={};class Vc{constructor(t,r){if(t!==f1)throw new TypeError("Options can only be created with the some or none functions");this._value=r}static some(t){return ir(t)}static none(){return nr()}static from(t){return t!=null?ir(t):nr()}static fromJSON(t){return Vc.from(t)}isNone(){return this._value===Ro}isSome(){return!this.isNone()}expect(t){if(this.isSome())return this._value;throw new Error(typeof t=="function"?t():t)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(t){return this.isSome()?this._value:t}unwrapOrElse(t){return this.isSome()?this._value:t()}map(t){return this.isSome()?ir(t(this._value)):nr()}mapOr(t,r){return this.isSome()?ir(t(this._value)):ir(r)}mapOrElse(t,r){return this.isSome()?ir(t(this._value)):ir(r())}flatMap(t){return this.isSome()?t(this._value):nr()}flatMapOr(t,r){return this.isSome()?t(this._value):r}flatMapOrElse(t,r){return this.isSome()?t(this._value):r()}and(t){return this.isSome()?t:nr()}andThen(t){return this.isSome()?t(this._value):nr()}or(t){return this.isNone()?t:this}orElse(t){return this.isNone()?t():this}xor(t){const r=this.isSome(),n=t.isSome();return r&&!n?this:!r&&n?t:nr()}filter(t){return this.isSome()&&t(this._value)?this:nr()}getOrInsert(t){return this.isNone()&&(this._value=t),this}getOrInsertWith(t){return this.isNone()&&(this._value=t()),this}clear(){return this._value=Ro,this}take(){if(this.isSome()){const t=this._value;return this._value=Ro,ir(t)}else return nr()}from(t){return t!=null?this._value=t:this.clear(),this}replace(t){return this._value=t,this}ifSome(t,r){return this.isSome()?t(this._value):r&&r(),this}ifNone(t,r){return this.isNone()?t():r&&r(this._value),this}toJSON(){return this.unwrapOr(null)}toJS(){return this.unwrapOr(null)}}const ir=e=>new Vc(f1,e),nr=()=>new Vc(f1,Ro);class ue{constructor(t){this._index=0,this._iter=t}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const t=this._iter.next();return t.done?t:{value:[t.value,this._index++]}}enumerate(){throw new Error("iter/Enumerate was not imported!")}peekable(){throw new Error("iter/Peekable was not imported!")}forEach(t){throw new Error("iter/ForEach was not imported!")}map(t){throw new Error("iter/Map was not imported!")}merge(t){throw new Error("iter/Merge was not imported!")}concat(t){return this.merge(t)}filter(t){throw new Error("iter/Filter was not imported!")}step(t){throw new Error("iter/Step was not imported!")}skip(t){throw new Error("iter/Skip was not imported!")}take(t){throw new Error("iter/Take was not imported!")}toMap(t,r){throw new Error("iter/ToMap was not imported!")}count(){return this.reduce(0,t=>t+1)}consume(){let t=this.next();for(;!t.done;)t=this.next();return this}toArray(){return this.reduce([],(t,r)=>(t.push(r),t))}join(t){return this.toArray().join(t)}indexOf(t){let r=this.next(),n=0;for(;!r.done;){if(r.value===t)return n;n++,r=this.next()}return-1}findIndex(t){let r=this.nextWithIndex();for(;!r.done;){const[n,i]=r.value;if(t(n,i))return i;r=this.nextWithIndex()}return-1}find(t){let r=this.nextWithIndex();for(;!r.done;){const[n,i]=r.value;if(t(n,i))return ir(n);r=this.nextWithIndex()}return nr()}findAll(t){return this.filter(t)}nth(t=0){let r=this.next();for(t<0&&(t=0);!r.done;){if(t--<=0)return ir(r.value);r=this.next()}return nr()}first(){return this.nth(0)}last(){let t=this.next();for(;!t.done;){const r=this.next();if(r.done)return ir(t.value);t=r}return nr()}any(t){return this.findIndex(t)!==-1}some(t){return this.any(t)}none(t){return this.findIndex(t)===-1}all(t){let r=this.nextWithIndex();for(;!r.done;){const[n,i]=r.value;if(!t(n,i))return!1;r=this.nextWithIndex()}return!0}unflatten(t){throw new Error("iter/Unflatten was not imported!")}reduce(t,r){let n=this.next();for(;!n.done;){const i=n.value;t=r(t,i,this._index-1),n=this.next()}return t}reverse(){return Co(this.toArray().reverse())}}function Co(e){return e!=null?typeof e[Symbol.iterator]=="function"?new ue(e[Symbol.iterator]()):typeof e.next=="function"?e instanceof ue?e:new ue(e):Co(typeof e=="object"?Object.entries(e):[e]):Co([])}class g8 extends ue{constructor(t){super(t)}next(){const t=super.nextWithIndex();return t.done?t:{value:b8(t.value)}}}ue.prototype.enumerate=function(){return new g8(this)};function b8(e){const t=e[0],r=e;return r[0]=e[1],r[1]=t,r}class v8 extends ue{constructor(t,r){super(t),this._fn=r}next(){let t=super.nextWithIndex();for(;!t.done;){const[r,n]=t.value;if(this._fn(r,n))return{done:!1,value:r};t=super.nextWithIndex()}return{done:!0,value:void 0}}}ue.prototype.filter=function(t){return new v8(this,t)};class w8 extends ue{constructor(t,r){super(t),this._fn=([n,i])=>(r(n,i),n)}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._fn(t.value)}}}ue.prototype.forEach=function(t){return new w8(this,t)};class _8 extends ue{constructor(t,r){super(t),this._fn=([n,i])=>r(n,i)}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._fn(t.value)}}}ue.prototype.map=function(t){return new _8(this,t)};class A8 extends ue{constructor(t,r){super(t),this._other=r}next(){const t=super.next();return t.done?this._other.next():t}}ue.prototype.merge=function(t){return new A8(this,t)};class S8 extends ue{constructor(){super(...arguments),this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?ir(this.peeked.shift()):nr()}peek(t=0){if(t<this.peeked.length)return ir(this.peeked[t]);{let r=this.peeked.length-t-1,n=super.next();for(;!n.done&&(this.peeked.push(n.value),!(--r<=0));)n=super.next();return n.done?nr():ir(n.value)}}next(){const t=this.unpeek();if(t.isSome())return{done:!1,value:t.unwrap()};const r=super.next();return r.done?r:{done:!1,value:r.value}}}ue.prototype.peekable=function(){return new S8(this)};class E8 extends ue{constructor(t,r){super(t),this._skipped=0,this._skip=(r<=0?0:r)|0}next(){let t=super.next();for(;!t.done;)if(this._skipped<=this._skip)this._skipped+=1,t=super.next();else return t;return{done:!0,value:void 0}}}ue.prototype.skip=function(e){return new E8(this,e)};class k8 extends ue{constructor(t,r){super(t),this._stepped=0,this._step=r<=0?1:r|0}next(){let t=super.next();for(;!t.done;)if(this._stepped<this._step)this._stepped+=1,t=super.next();else return this._stepped=0,t;return{done:!0,value:void 0}}}ue.prototype.step=function(e){return new k8(this,e)};class P8 extends ue{constructor(t,r){super(t),this._taken=0,this._count=(r<=0?0:r)|0}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}ue.prototype.take=function(t){return new P8(this,t)};const x8=e=>e,M8=e=>e;class T8 extends ue{constructor(t,r=x8,n=M8){super(t),this._map=([i,s])=>[r(i,s),n(i,s)]}toObject(){return this.reduce({},(t,r)=>(t[r[0]]=r[1],t))}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._map(t.value)}}}ue.prototype.toMap=function(t,r){return new T8(this,t,r)};class R8 extends ue{constructor(t,r){super(t),this._fn=r}next(){return this._fn(this._iter)}}ue.prototype.unflatten=function(t){return new R8(this,t)};var ys;(function(e){e[e.Forward=0]="Forward",e[e.Backward=1]="Backward"})(ys||(ys={}));class d1{constructor(t,r,n=1){this.start=t!==t?0:t,this.end=r!==r?this.start-1:r,this.step=n!==n?1:Math.abs(n),this.direction=t>r?ys.Backward:ys.Forward}static from(t,r,n=1){return new d1(t,r,n)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(t){return this.start<=t&&t<=this.end}isEmpty(){return this.direction===ys.Forward?this.start>this.end:this.start<this.end}iter(){return new ue(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const t=this.start;return this.direction===ys.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:t}}}}const C8=d1.from;function H2(e,t){return e[0]=(t&4278190080)>>24,e[1]=(t&16711680)>>16,e[2]=(t&65280)>>8,e[3]=t&255,e}const wi=Math.pow(2,31)-1|0;class I8 extends ue{constructor(t){super(t),this.rng=t}iter(){return new ue(this)}next(){return{done:!1,value:this.rng.nextFloat()}}}class U8 extends ue{constructor(t,r=0,n=1){super(t),this.rng=t,this.min=r,this.max=n}iter(){return new ue(this)}nextFloat(){return this.rng.nextFloatInRange(this.min,this.max)}next(){return{done:!1,value:this.nextFloat()}}}class D8 extends ue{constructor(t,r=0,n=wi){super(t),this.rng=t,this.min=r|0,this.max=n|0}iter(){return new ue(this)}nextInt(){return this.rng.nextIntInRange(this.min,this.max)}next(){return{done:!1,value:this.nextInt()}}}const O8=new Uint8Array(4);class p1{nextFloat(){return this.nextInt()/wi}nextFloatInRange(t=0,r=1){return t+this.nextFloat()*(r-t)}nextIntInRange(t=0,r=wi){return Math.round(this.nextFloatInRange(t,r))}shuffle(t){const r=t.length;for(let n=0;n<r;n++){const i=n+this.nextIntInRange(0,r-n-1),s=t[n];t[n]=t[i],t[i]=s}return t}fromArray(t){return t.length?ir(t[this.nextIntInRange(0,t.length-1)]):nr()}keyFromObject(t){return this.fromArray(Object.keys(t))}valueFromObject(t){return this.fromArray(Object.values(t))}fillBytes(t){const r=O8;for(let n=0,i=t.length;n<i;n++){const s=n%4;s===0&&H2(r,this.nextInt()),t[n]=r[s]}return t}[Symbol.iterator](){return this}iter(){return new ue(this)}next(){return{done:!1,value:this.nextInt()}}float(){return new I8(this)}uniformFloat(t=0,r=1){return new U8(this,t,r)}uniformInt(t=0,r=wi){return new D8(this,t,r)}}let Io,m0;if(typeof crypto!="undefined"&&crypto.getRandomValues){const e=new Uint32Array(1);Io=()=>crypto.getRandomValues(e)[0]%wi,m0=t=>crypto.getRandomValues(Array.isArray(t)?new Uint8Array(t):t)}else{const e=new Uint8Array(4);Io=()=>Math.random()*wi|0,m0=t=>{const r=e;for(let n=0,i=t.length;n<i;n++){const s=n%4;s===0&&H2(r,Io()),t[n]=r[s]}return t}}class N8 extends p1{nextInt(){return Io()}fillBytes(t){return m0(t)}}class G2 extends p1{constructor(t=423257940){super(),this.seed=t}setSeed(t=423257940){return this.seed=t,this}nextInt(){return this.seed=Math.imul(48271,this.seed)|0%wi,this.seed&wi}}const B8=new G2;class m1 extends p1{constructor(t,r,n,i){super(),this.x=423257940,this.y=2829571177,this.z=2541948421,this.w=289122235,this.set(t,r,n,i)}static fromSeed(t){return new m1().setSeed(t)}setSeed(t){const r=B8.setSeed(t);return this.set(r.nextInt(),r.nextInt(),r.nextInt(),r.nextInt())}set(t=423257940,r=2829571177,n=2541948421,i=289122235){return this.x=t|0,this.y=r|0,this.z=n|0,this.w=i|0,this}nextInt(){const t=this.x,r=t^t<<11;this.x=this.y,this.y=this.z,this.z=this.w;const n=this.w;return this.w=n^n>>19^(r^r>>8),this.w}}new G2;new m1;const bo={length:16,includeSymbols:!0,excludeSimilarCharacters:!1,excludeAmbiguousCharacters:!1};function z8(e={}){const t=Math.max(6,e.length||bo.length),r=e.includeSymbols!=null?e.includeSymbols:bo.includeSymbols,n=e.excludeSimilarCharacters!=null?e.excludeSimilarCharacters:bo.excludeSimilarCharacters,i=e.excludeAmbiguousCharacters!=null?e.excludeAmbiguousCharacters:bo.excludeAmbiguousCharacters,s=new N8;return C8(0,t).iter().map(()=>y0(s,r,n,i)).join("")}const K8="il1Lo0O".split(""),F8="{}[]()/\\'\"`~,;:.<>".split("");function y0(e,t,r,n){let i=t&&e.nextFloat()>.75?j8(e):$8(e);return r&&K8.includes(i)&&(i=y0(e,t,r,n)),n&&F8.includes(i)&&(i=y0(e,t,r,n)),i}const L8="`~!@#$%^&*()-_+={}[]|:;<>,.\\/?".split("").sort(()=>Math.random()>.5?-1:1);function j8(e){return e.fromArray(L8).unwrap()}const q8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("").sort(()=>Math.random()>.5?-1:1);function $8(e){return e.fromArray(q8).unwrap()}function W8(e){let t,r,n,i,s,a,o,c,u,h,f,p,d,S,k,A,C,B;return{c(){t=At("label"),r=Ae("Symbols?"),n=Ft(),i=At("input"),s=Ft(),a=At("label"),o=Ae("Exclude Similar?"),c=Ft(),u=At("input"),h=Ft(),f=At("label"),p=Ae("Exclude Ambiguous?"),d=Ft(),S=At("input"),k=Ft(),A=At("input"),this.h()},l(R){t=St(R,"LABEL",{for:!0});var D=kt(t);r=Se(D,"Symbols?"),D.forEach(dt),n=Lt(R),i=St(R,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),s=Lt(R),a=St(R,"LABEL",{for:!0});var L=kt(a);o=Se(L,"Exclude Similar?"),L.forEach(dt),c=Lt(R),u=St(R,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),h=Lt(R),f=St(R,"LABEL",{for:!0});var g=kt(f);p=Se(g,"Exclude Ambiguous?"),g.forEach(dt),d=Lt(R),S=St(R,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),k=Lt(R),A=St(R,"INPUT",{id:!0,class:!0,type:!0,min:!0,placeholder:!0}),this.h()},h(){ft(t,"for","includeSymbols"),ft(i,"id","includeSymbols"),ft(i,"type","checkbox"),ft(i,"class","as-checkbox"),ft(i,"placeholder","Length"),ft(a,"for","excludeSimilarCharacters"),ft(u,"id","excludeSimilarCharacters"),ft(u,"type","checkbox"),ft(u,"class","as-checkbox"),ft(u,"placeholder","Length"),ft(f,"for","excludeAmbiguousCharacters"),ft(S,"id","excludeAmbiguousCharacters"),ft(S,"type","checkbox"),ft(S,"class","as-checkbox"),ft(S,"placeholder","Length"),ft(A,"id","length"),ft(A,"class","as-input"),ft(A,"type","number"),ft(A,"min",6),ft(A,"placeholder","Length")},m(R,D){Pt(R,t,D),bt(t,r),Pt(R,n,D),Pt(R,i,D),i.checked=e[1],Pt(R,s,D),Pt(R,a,D),bt(a,o),Pt(R,c,D),Pt(R,u,D),u.checked=e[2],Pt(R,h,D),Pt(R,f,D),bt(f,p),Pt(R,d,D),Pt(R,S,D),S.checked=e[3],Pt(R,k,D),Pt(R,A,D),Ue(A,e[0]),C||(B=[Zt(i,"change",e[5]),Zt(u,"change",e[6]),Zt(S,"change",e[7]),Zt(A,"input",e[8])],C=!0)},p(R,[D]){D&2&&(i.checked=R[1]),D&4&&(u.checked=R[2]),D&8&&(S.checked=R[3]),D&1&&Lh(A.value)!==R[0]&&Ue(A,R[0])},i:Pe,o:Pe,d(R){R&&dt(t),R&&dt(n),R&&dt(i),R&&dt(s),R&&dt(a),R&&dt(c),R&&dt(u),R&&dt(h),R&&dt(f),R&&dt(d),R&&dt(S),R&&dt(k),R&&dt(A),C=!1,gr(B)}}}function H8(e,t,r){function n(){return z8({length:i,includeSymbols:s,excludeSimilarCharacters:a,excludeAmbiguousCharacters:o})}let i=16,s=!0,a=!1,o=!1;function c(){s=this.checked,r(1,s)}function u(){a=this.checked,r(2,a)}function h(){o=this.checked,r(3,o)}function f(){i=Lh(this.value),r(0,i)}return[i,s,a,o,n,c,u,h,f]}class G8 extends Ee{constructor(t){super(),ke(this,t,H8,W8,Ze,{generate:4})}get generate(){return this.$$.ctx[4]}}function V8(e){let t;return{c(){t=Ln("path"),this.h()},l(r){t=jn(r,"path",{d:!0}),kt(t).forEach(dt),this.h()},h(){ft(t,"d","M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z")},m(r,n){Pt(r,t,n)},p:Pe,d(r){r&&dt(t)}}}function Y8(e){let t,r;const n=[{viewBox:"0 0 24 24"},e[0]];let i={$$slots:{default:[V8]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)i=Ce(i,n[s]);return t=new rs({props:i}),{c(){Ht(t.$$.fragment)},l(s){Gt(t.$$.fragment,s)},m(s,a){Vt(t,s,a),r=!0},p(s,[a]){const o=a&1?ts(n,[n[0],es(s[0])]):{};a&2&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(xt(t.$$.fragment,s),r=!0)},o(s){Mt(t.$$.fragment,s),r=!1},d(s){Yt(t,s)}}}function J8(e,t,r){return e.$$set=n=>{r(0,t=Ce(Ce({},t),pr(n)))},t=pr(t),[t]}class X8 extends Ee{constructor(t){super(),ke(this,t,J8,Y8,Vn,{})}}function Z8(e){let t;return{c(){t=At("input"),this.h()},l(r){t=St(r,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){ft(t,"id",e[2]),ft(t,"name",e[3]),ft(t,"class","as-input as-flex-1"),ft(t,"type","password"),ft(t,"placeholder","Hidden"),t.disabled=e[5]},m(r,n){Pt(r,t,n)},p(r,n){n&4&&ft(t,"id",r[2]),n&8&&ft(t,"name",r[3]),n&32&&(t.disabled=r[5])},d(r){r&&dt(t)}}}function Q8(e){let t,r,n;return{c(){t=At("textarea"),this.h()},l(i){t=St(i,"TEXTAREA",{id:!0,name:!0,rows:!0,class:!0,type:!0,placeholder:!0}),kt(t).forEach(dt),this.h()},h(){ft(t,"id",e[2]),ft(t,"name",e[3]),ft(t,"rows",8),ft(t,"class","as-textarea as-flex-1 as-max-h-32 as-resize-none"),ft(t,"type","text"),ft(t,"placeholder","Enter a Password"),t.disabled=e[5]},m(i,s){Pt(i,t,s),Ue(t,e[0]),r||(n=[Zt(t,"input",e[14]),Zt(t,"input",function(){ki(e[4])&&e[4].apply(this,arguments)})],r=!0)},p(i,s){e=i,s&4&&ft(t,"id",e[2]),s&8&&ft(t,"name",e[3]),s&32&&(t.disabled=e[5]),s&1&&Ue(t,e[0])},d(i){i&&dt(t),r=!1,gr(n)}}}function t7(e){let t,r;return t=new Gc({}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function e7(e){let t,r;return t=new h1({}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function r7(e){let t,r,n,i,s,a,o,c,u,h,f,p,d,S,k,A,C,B,R,D,L,g,I,l;function m(W,Z){return W[1]?Q8:Z8}let v=m(e),y=v(e);c=new X8({}),p=new $2({}),A=new q2({});const w=[e7,t7],N=[];function O(W,Z){return W[1]?0:1}return D=O(e),L=N[D]=w[D](e),{c(){t=At("div"),y.c(),r=Ft(),n=At("div"),i=At("button"),s=At("input"),a=Ft(),o=At("div"),Ht(c.$$.fragment),u=Ft(),h=At("button"),f=At("div"),Ht(p.$$.fragment),d=Ft(),S=At("button"),k=At("div"),Ht(A.$$.fragment),C=Ft(),B=At("button"),R=At("div"),L.c(),this.h()},l(W){t=St(W,"DIV",{class:!0});var Z=kt(t);y.l(Z),r=Lt(Z),n=St(Z,"DIV",{class:!0});var b=kt(n);i=St(b,"BUTTON",{class:!0});var U=kt(i);s=St(U,"INPUT",{type:!0}),a=Lt(U),o=St(U,"DIV",{class:!0});var G=kt(o);Gt(c.$$.fragment,G),G.forEach(dt),U.forEach(dt),u=Lt(b),h=St(b,"BUTTON",{class:!0});var Q=kt(h);f=St(Q,"DIV",{class:!0});var it=kt(f);Gt(p.$$.fragment,it),it.forEach(dt),Q.forEach(dt),d=Lt(b),S=St(b,"BUTTON",{class:!0});var ht=kt(S);k=St(ht,"DIV",{class:!0});var ut=kt(k);Gt(A.$$.fragment,ut),ut.forEach(dt),ht.forEach(dt),C=Lt(b),B=St(b,"BUTTON",{class:!0});var lt=kt(B);R=St(lt,"DIV",{class:!0});var j=kt(R);L.l(j),j.forEach(dt),lt.forEach(dt),b.forEach(dt),Z.forEach(dt),this.h()},h(){ft(s,"type","file"),s.multiple=!1,s.hidden=!0,ft(o,"class","as-w-5 as-h-5"),ft(i,"class","as-btn as-primary as-p-2"),ft(f,"class","as-w-5 as-h-5"),ft(h,"class","as-btn as-primary as-p-2"),Dr(h,"as-secondary",!e[5]),ft(k,"class","as-w-5 as-h-5"),ft(S,"class","as-btn as-primary as-p-2"),ft(R,"class","as-w-5 as-h-5"),ft(B,"class","as-btn as-primary as-p-2"),ft(n,"class","as-absolute as-top-0 as-right-0 as-flex-row as-flex"),ft(t,"class","as-flex as-relative")},m(W,Z){Pt(W,t,Z),y.m(t,null),bt(t,r),bt(t,n),bt(n,i),bt(i,s),e[15](s),bt(i,a),bt(i,o),Vt(c,o,null),bt(n,u),bt(n,h),bt(h,f),Vt(p,f,null),bt(n,d),bt(n,S),bt(S,k),Vt(A,k,null),bt(n,C),bt(n,B),bt(B,R),N[D].m(R,null),g=!0,I||(l=[Zt(s,"input",e[11]),Zt(i,"click",e[10]),Zt(h,"click",e[9]),Zt(S,"click",e[8]),Zt(B,"click",e[7])],I=!0)},p(W,[Z]){v===(v=m(W))&&y?y.p(W,Z):(y.d(1),y=v(W),y&&(y.c(),y.m(t,r))),Z&32&&Dr(h,"as-secondary",!W[5]);let b=D;D=O(W),D!==b&&(Pr(),Mt(N[b],1,1,()=>{N[b]=null}),xr(),L=N[D],L||(L=N[D]=w[D](W),L.c()),xt(L,1),L.m(R,null))},i(W){g||(xt(c.$$.fragment,W),xt(p.$$.fragment,W),xt(A.$$.fragment,W),xt(L),g=!0)},o(W){Mt(c.$$.fragment,W),Mt(p.$$.fragment,W),Mt(A.$$.fragment,W),Mt(L),g=!1},d(W){W&&dt(t),y.d(),e[15](null),Yt(c),Yt(p),Yt(A),N[D].d(),I=!1,gr(l)}}}function n7(e,t,r){let{id:n=void 0}=t,{name:i=void 0}=t,{text:s}=t,{onUploadFile:a=()=>{}}=t,{onInput:o=()=>{}}=t,{onShow:c=()=>{}}=t,{show:u=!1}=t;function h(){r(1,u=!u),u===!1?r(5,p=!0):c()}async function f(){navigator.clipboard.writeText(s)}let p=!u;function d(){r(5,p=!p),p===!1&&r(1,u=!0)}let S;function k(){S.click()}function A(R){if(!R.currentTarget.files)return;const D=R.currentTarget.files[0];if(D){const L=new FileReader;L.onload=g=>{var I;r(0,s=(I=g.target)==null?void 0:I.result),a(s)},L.readAsText(D)}}function C(){s=this.value,r(0,s)}function B(R){Ar[R?"unshift":"push"](()=>{S=R,r(6,S)})}return e.$$set=R=>{"id"in R&&r(2,n=R.id),"name"in R&&r(3,i=R.name),"text"in R&&r(0,s=R.text),"onUploadFile"in R&&r(12,a=R.onUploadFile),"onInput"in R&&r(4,o=R.onInput),"onShow"in R&&r(13,c=R.onShow),"show"in R&&r(1,u=R.show)},[s,u,n,i,o,p,S,h,f,d,k,A,a,c,C,B]}class V2 extends Ee{constructor(t){super(),ke(this,t,n7,r7,Ze,{id:2,name:3,text:0,onUploadFile:12,onInput:4,onShow:13,show:1})}}function i7(e){let t,r,n,i,s,a;function o(u){e[20](u)}let c={id:"text",name:"secret",show:!0,onInput:e[7],onUploadFile:e[9]};return e[4]!==void 0&&(c.text=e[4]),i=new V2({props:c}),Ar.push(()=>Lr(i,"text",o)),{c(){t=At("label"),r=Ae("Text"),n=Ft(),Ht(i.$$.fragment),this.h()},l(u){t=St(u,"LABEL",{for:!0});var h=kt(t);r=Se(h,"Text"),h.forEach(dt),n=Lt(u),Gt(i.$$.fragment,u),this.h()},h(){ft(t,"for","text")},m(u,h){Pt(u,t,h),bt(t,r),Pt(u,n,h),Vt(i,u,h),a=!0},p(u,h){const f={};!s&&h&16&&(s=!0,f.text=u[4],jr(()=>s=!1)),i.$set(f)},i(u){a||(xt(i.$$.fragment,u),a=!0)},o(u){Mt(i.$$.fragment,u),a=!1},d(u){u&&dt(t),u&&dt(n),Yt(i,u)}}}function s7(e){let t,r,n,i,s,a,o,c;function u(p){e[18](p)}let h={id:"password",name:"secret",show:!0,onInput:e[7]};e[4]!==void 0&&(h.password=e[4]),i=new W2({props:h}),Ar.push(()=>Lr(i,"password",u));let f={};return o=new G8({props:f}),e[19](o),{c(){t=At("label"),r=Ae("Password"),n=Ft(),Ht(i.$$.fragment),a=Ft(),Ht(o.$$.fragment),this.h()},l(p){t=St(p,"LABEL",{for:!0});var d=kt(t);r=Se(d,"Password"),d.forEach(dt),n=Lt(p),Gt(i.$$.fragment,p),a=Lt(p),Gt(o.$$.fragment,p),this.h()},h(){ft(t,"for","password")},m(p,d){Pt(p,t,d),bt(t,r),Pt(p,n,d),Vt(i,p,d),Pt(p,a,d),Vt(o,p,d),c=!0},p(p,d){const S={};!s&&d&16&&(s=!0,S.password=p[4],jr(()=>s=!1)),i.$set(S);const k={};o.$set(k)},i(p){c||(xt(i.$$.fragment,p),xt(o.$$.fragment,p),c=!0)},o(p){Mt(i.$$.fragment,p),Mt(o.$$.fragment,p),c=!1},d(p){p&&dt(t),p&&dt(n),Yt(i,p),p&&dt(a),e[19](null),Yt(o,p)}}}function a7(e){let t,r,n,i;return{c(){t=At("div"),r=At("input"),this.h()},l(s){t=St(s,"DIV",{class:!0});var a=kt(t);r=St(a,"INPUT",{type:!0,class:!0}),a.forEach(dt),this.h()},h(){ft(r,"type","submit"),ft(r,"class","as-btn as-primary"),r.disabled=e[6],r.value="Add",ft(t,"class","as-flex as-justify-end as-mt-6")},m(s,a){Pt(s,t,a),bt(t,r),n||(i=Zt(r,"click",e[11]),n=!0)},p(s,a){a&64&&(r.disabled=s[6])},d(s){s&&dt(t),n=!1,i()}}}function o7(e){let t,r,n,i,s,a;return{c(){t=At("div"),r=At("input"),n=Ft(),i=At("input"),this.h()},l(o){t=St(o,"DIV",{class:!0});var c=kt(t);r=St(c,"INPUT",{type:!0,class:!0}),n=Lt(c),i=St(c,"INPUT",{type:!0,class:!0}),c.forEach(dt),this.h()},h(){ft(r,"type","submit"),ft(r,"class","as-btn as-primary"),r.value="Generate",ft(i,"type","submit"),ft(i,"class","as-btn as-primary"),i.disabled=e[6],i.value="Add",ft(t,"class","as-flex as-justify-between as-mt-6")},m(o,c){Pt(o,t,c),bt(t,r),bt(t,n),bt(t,i),s||(a=[Zt(r,"click",e[10]),Zt(i,"click",e[11])],s=!0)},p(o,c){c&64&&(i.disabled=o[6])},d(o){o&&dt(t),s=!1,gr(a)}}}function c7(e){let t,r,n,i,s,a,o,c,u,h,f,p,d,S,k,A,C,B,R,D,L,g,I,l,m,v,y,w,N,O,W,Z,b,U;o=new ua({props:{messages:e[1].getErrors("application")}}),S=new ua({props:{messages:e[1].getErrors("username")}}),m=new ua({props:{messages:e[1].getErrors("type")}});const G=[s7,i7],Q=[];function it(j,tt){return j[2]==="password"?0:j[2]==="text"?1:-1}~(y=it(e))&&(w=Q[y]=G[y](e)),O=new ua({props:{messages:e[1].getErrors("secret")}});function ht(j,tt){return j[2]==="password"?o7:a7}let ut=ht(e),lt=ut(e);return{c(){t=At("form"),r=At("label"),n=Ae("Application or URL"),i=Ft(),s=At("input"),a=Ft(),Ht(o.$$.fragment),c=Ft(),u=At("label"),h=Ae("Username"),f=Ft(),p=At("input"),d=Ft(),Ht(S.$$.fragment),k=Ft(),A=At("label"),C=Ae("Secret Type"),B=Ft(),R=At("select"),D=At("option"),L=Ae("Password"),g=At("option"),I=Ae("Text"),l=Ft(),Ht(m.$$.fragment),v=Ft(),w&&w.c(),N=Ft(),Ht(O.$$.fragment),W=Ft(),lt.c(),this.h()},l(j){t=St(j,"FORM",{});var tt=kt(t);r=St(tt,"LABEL",{for:!0});var F=kt(r);n=Se(F,"Application or URL"),F.forEach(dt),i=Lt(tt),s=St(tt,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),a=Lt(tt),Gt(o.$$.fragment,tt),c=Lt(tt),u=St(tt,"LABEL",{for:!0});var x=kt(u);h=Se(x,"Username"),x.forEach(dt),f=Lt(tt),p=St(tt,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),d=Lt(tt),Gt(S.$$.fragment,tt),k=Lt(tt),A=St(tt,"LABEL",{for:!0});var Y=kt(A);C=Se(Y,"Secret Type"),Y.forEach(dt),B=Lt(tt),R=St(tt,"SELECT",{id:!0,class:!0});var P=kt(R);D=St(P,"OPTION",{});var T=kt(D);L=Se(T,"Password"),T.forEach(dt),g=St(P,"OPTION",{});var z=kt(g);I=Se(z,"Text"),z.forEach(dt),P.forEach(dt),l=Lt(tt),Gt(m.$$.fragment,tt),v=Lt(tt),w&&w.l(tt),N=Lt(tt),Gt(O.$$.fragment,tt),W=Lt(tt),lt.l(tt),tt.forEach(dt),this.h()},h(){ft(r,"for","application"),ft(s,"id","application"),ft(s,"name","application"),ft(s,"class","as-input"),ft(s,"type","text"),ft(s,"placeholder","Application or URL"),ft(u,"for","username"),ft(p,"id","username"),ft(p,"name","username"),ft(p,"class","as-input"),ft(p,"type","text"),ft(p,"placeholder","Username"),ft(A,"for","type"),D.__value="password",D.value=D.__value,g.__value="text",g.value=g.__value,ft(R,"id","type"),ft(R,"class","as-input"),e[2]===void 0&&jh(()=>e[17].call(R))},m(j,tt){Pt(j,t,tt),bt(t,r),bt(r,n),bt(t,i),bt(t,s),Ue(s,e[0]),bt(t,a),Vt(o,t,null),bt(t,c),bt(t,u),bt(u,h),bt(t,f),bt(t,p),Ue(p,e[3]),bt(t,d),Vt(S,t,null),bt(t,k),bt(t,A),bt(A,C),bt(t,B),bt(t,R),bt(R,D),bt(D,L),bt(R,g),bt(g,I),Uo(R,e[2]),bt(t,l),Vt(m,t,null),bt(t,v),~y&&Q[y].m(t,null),bt(t,N),Vt(O,t,null),bt(t,W),lt.m(t,null),Z=!0,b||(U=[Zt(s,"input",e[15]),Zt(s,"input",e[7]),Zt(s,"change",e[8]),Zt(p,"input",e[16]),Zt(p,"input",e[7]),Zt(R,"change",e[17]),Zt(t,"submit",Ss(e[14]))],b=!0)},p(j,[tt]){tt&1&&s.value!==j[0]&&Ue(s,j[0]);const F={};tt&2&&(F.messages=j[1].getErrors("application")),o.$set(F),tt&8&&p.value!==j[3]&&Ue(p,j[3]);const x={};tt&2&&(x.messages=j[1].getErrors("username")),S.$set(x),tt&4&&Uo(R,j[2]);const Y={};tt&2&&(Y.messages=j[1].getErrors("type")),m.$set(Y);let P=y;y=it(j),y===P?~y&&Q[y].p(j,tt):(w&&(Pr(),Mt(Q[P],1,1,()=>{Q[P]=null}),xr()),~y?(w=Q[y],w?w.p(j,tt):(w=Q[y]=G[y](j),w.c()),xt(w,1),w.m(t,N)):w=null);const T={};tt&2&&(T.messages=j[1].getErrors("secret")),O.$set(T),ut===(ut=ht(j))&&lt?lt.p(j,tt):(lt.d(1),lt=ut(j),lt&&(lt.c(),lt.m(t,null)))},i(j){Z||(xt(o.$$.fragment,j),xt(S.$$.fragment,j),xt(m.$$.fragment,j),xt(w),xt(O.$$.fragment,j),Z=!0)},o(j){Mt(o.$$.fragment,j),Mt(S.$$.fragment,j),Mt(m.$$.fragment,j),Mt(w),Mt(O.$$.fragment,j),Z=!1},d(j){j&&dt(t),Yt(o),Yt(S),Yt(m),~y&&Q[y].d(),Yt(O),lt.d(),b=!1,gr(U)}}}const Rh=J4((e,t)=>{F2(t),Ou("application","Application is required",()=>{Cu(e.application).isNotBlank()}),Ou("username","Username is required",()=>{Cu(e.username).isNotBlank()}),Ou("secret","Secret is required",()=>{Cu(e.secret).isNotBlank()})});function u7(e,t,r){let n,{application:i=""}=t,{onAdd:s=()=>{}}=t,a="password",o="",c="",u=Rh.get();i&&h("application");function h(m){r(1,u=Rh({type:a,application:i,username:o,secret:c},m))}function f(m){h(m.currentTarget.name)}function p(m){r(0,i=ka(m.currentTarget.value)),h("application")}function d(m){r(4,c=m),h("secret")}let S;function k(){r(4,c=S.generate()),h("secret")}let A=!1;async function C(){r(13,A=!0);try{await N6({type:a,application:i,username:o,secret:c}),s()}catch(m){console.error(m),$h(m.message)}finally{r(13,A=!1)}}function B(m){Do.call(this,e,m)}function R(){i=this.value,r(0,i)}function D(){o=this.value,r(3,o)}function L(){a=qh(this),r(2,a)}function g(m){c=m,r(4,c)}function I(m){Ar[m?"unshift":"push"](()=>{S=m,r(5,S)})}function l(m){c=m,r(4,c)}return e.$$set=m=>{"application"in m&&r(0,i=m.application),"onAdd"in m&&r(12,s=m.onAdd)},e.$$.update=()=>{e.$$.dirty&8194&&r(6,n=A||!u.isValid())},[i,u,a,o,c,S,n,f,p,d,k,C,s,A,B,R,D,L,g,I,l]}class l7 extends Ee{constructor(t){super(),ke(this,t,u7,c7,Ze,{application:0,onAdd:12})}}function h7(e){let t;return{c(){t=Ln("path"),this.h()},l(r){t=jn(r,"path",{d:!0}),kt(t).forEach(dt),this.h()},h(){ft(t,"d","M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z")},m(r,n){Pt(r,t,n)},p:Pe,d(r){r&&dt(t)}}}function f7(e){let t,r;const n=[{viewBox:"0 0 24 24"},e[0]];let i={$$slots:{default:[h7]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)i=Ce(i,n[s]);return t=new rs({props:i}),{c(){Ht(t.$$.fragment)},l(s){Gt(t.$$.fragment,s)},m(s,a){Vt(t,s,a),r=!0},p(s,[a]){const o=a&1?ts(n,[n[0],es(s[0])]):{};a&2&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(xt(t.$$.fragment,s),r=!0)},o(s){Mt(t.$$.fragment,s),r=!1},d(s){Yt(t,s)}}}function d7(e,t,r){return e.$$set=n=>{r(0,t=Ce(Ce({},t),pr(n)))},t=pr(t),[t]}class p7 extends Ee{constructor(t){super(),ke(this,t,d7,f7,Vn,{})}}function m7(e){let t,r,n,i,s;return n=new p7({}),{c(){t=At("div"),r=At("div"),Ht(n.$$.fragment),this.h()},l(a){t=St(a,"DIV",{class:!0});var o=kt(t);r=St(o,"DIV",{class:!0});var c=kt(r);Gt(n.$$.fragment,c),c.forEach(dt),o.forEach(dt),this.h()},h(){ft(r,"class",i="as-transition-opacity "+(e[0]?"as-animate-wiggle":"")),Dr(r,"as-opacity-0",!e[0]),Dr(r,"as-opacity-100",e[0]),ft(t,"class","as-relative as-w-8 as-h-8")},m(a,o){Pt(a,t,o),bt(t,r),Vt(n,r,null),s=!0},p(a,[o]){(!s||o&1&&i!==(i="as-transition-opacity "+(a[0]?"as-animate-wiggle":"")))&&ft(r,"class",i),o&1&&Dr(r,"as-opacity-0",!a[0]),o&1&&Dr(r,"as-opacity-100",a[0])},i(a){s||(xt(n.$$.fragment,a),s=!0)},o(a){Mt(n.$$.fragment,a),s=!1},d(a){a&&dt(t),Yt(n)}}}function y7(e,t,r){let{saving:n=!1}=t,i=!1,s=Date.now();return e.$$set=a=>{"saving"in a&&r(1,n=a.saving)},e.$$.update=()=>{if(e.$$.dirty&6)if(n)r(0,i=!0),r(2,s=Date.now());else{const a=Date.now()-s;a<1e3?setTimeout(()=>{r(0,i=!1)},1e3-a):r(0,i=!1)}},[i,n,s]}class g7 extends Ee{constructor(t){super(),ke(this,t,y7,m7,Ze,{saving:1})}}const Ch=()=>{};function b7(e,t=0,r={}){let n=null,i=!1;const s=r.before||Ch,a=r.after||Ch;function o(){n!=null&&(clearTimeout(n),n=null)}function c(){i=!1,o()}function u(){o(),h()}function h(...p){i=!1,e.apply(this,p),a()}const f=function(...d){i||(i=!0,s()),o(),!!r.isImmediate&&n==null?h(this,d):n=setTimeout(()=>{n=null,h(this,d)},t)};return f.cancel=c,f.flush=u,f}function v7(e){let t,r,n,i,s,a,o,c,u,h;return o=new Gc({}),{c(){t=At("div"),r=At("input"),n=Ft(),i=At("div"),s=At("button"),a=At("div"),Ht(o.$$.fragment),this.h()},l(f){t=St(f,"DIV",{class:!0});var p=kt(t);r=St(p,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),n=Lt(p),i=St(p,"DIV",{class:!0});var d=kt(i);s=St(d,"BUTTON",{class:!0});var S=kt(s);a=St(S,"DIV",{class:!0});var k=kt(a);Gt(o.$$.fragment,k),k.forEach(dt),S.forEach(dt),d.forEach(dt),p.forEach(dt),this.h()},h(){ft(r,"id",e[0]),ft(r,"name",e[1]),ft(r,"class","as-input as-flex-1"),ft(r,"type","password"),ft(r,"placeholder","Enter a Password"),r.disabled=!0,r.value="Encrypted Password",ft(a,"class","as-w-5 as-h-5"),ft(s,"class","as-btn as-primary as-p-2"),ft(i,"class","as-grow-0 as-flex-row as-flex"),ft(t,"class","as-flex")},m(f,p){Pt(f,t,p),bt(t,r),bt(t,n),bt(t,i),bt(i,s),bt(s,a),Vt(o,a,null),c=!0,u||(h=Zt(s,"click",function(){ki(e[2])&&e[2].apply(this,arguments)}),u=!0)},p(f,[p]){e=f,(!c||p&1)&&ft(r,"id",e[0]),(!c||p&2)&&ft(r,"name",e[1])},i(f){c||(xt(o.$$.fragment,f),c=!0)},o(f){Mt(o.$$.fragment,f),c=!1},d(f){f&&dt(t),Yt(o),u=!1,h()}}}function w7(e,t,r){let{id:n=void 0}=t,{name:i=void 0}=t,{onShow:s=()=>{}}=t;return e.$$set=a=>{"id"in a&&r(0,n=a.id),"name"in a&&r(1,i=a.name),"onShow"in a&&r(2,s=a.onShow)},[n,i,s]}class _7 extends Ee{constructor(t){super(),ke(this,t,w7,v7,Ze,{id:0,name:1,onShow:2})}}function A7(e){let t,r;return t=new _7({props:{onShow:e[2]}}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},p:Pe,i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function S7(e){let t,r,n,i;const s=[k7,E7],a=[];function o(c,u){return c[0].type==="password"?0:c[0].type==="text"?1:-1}return~(t=o(e))&&(r=a[t]=s[t](e)),{c(){r&&r.c(),n=Qe()},l(c){r&&r.l(c),n=Qe()},m(c,u){~t&&a[t].m(c,u),Pt(c,n,u),i=!0},p(c,u){let h=t;t=o(c),t===h?~t&&a[t].p(c,u):(r&&(Pr(),Mt(a[h],1,1,()=>{a[h]=null}),xr()),~t?(r=a[t],r?r.p(c,u):(r=a[t]=s[t](c),r.c()),xt(r,1),r.m(n.parentNode,n)):r=null)},i(c){i||(xt(r),i=!0)},o(c){Mt(r),i=!1},d(c){~t&&a[t].d(c),c&&dt(n)}}}function E7(e){let t,r,n,i;function s(c){e[10](c)}function a(c){e[11](c)}let o={onInput:e[4],onUploadFile:e[4],onShow:e[2]};return e[0].secret!==void 0&&(o.text=e[0].secret),e[1]!==void 0&&(o.show=e[1]),t=new V2({props:o}),Ar.push(()=>Lr(t,"text",s)),Ar.push(()=>Lr(t,"show",a)),{c(){Ht(t.$$.fragment)},l(c){Gt(t.$$.fragment,c)},m(c,u){Vt(t,c,u),i=!0},p(c,u){const h={};!r&&u&1&&(r=!0,h.text=c[0].secret,jr(()=>r=!1)),!n&&u&2&&(n=!0,h.show=c[1],jr(()=>n=!1)),t.$set(h)},i(c){i||(xt(t.$$.fragment,c),i=!0)},o(c){Mt(t.$$.fragment,c),i=!1},d(c){Yt(t,c)}}}function k7(e){let t,r,n,i;function s(c){e[8](c)}function a(c){e[9](c)}let o={onInput:e[4]};return e[0].secret!==void 0&&(o.password=e[0].secret),e[1]!==void 0&&(o.show=e[1]),t=new W2({props:o}),Ar.push(()=>Lr(t,"password",s)),Ar.push(()=>Lr(t,"show",a)),{c(){Ht(t.$$.fragment)},l(c){Gt(t.$$.fragment,c)},m(c,u){Vt(t,c,u),i=!0},p(c,u){const h={};!r&&u&1&&(r=!0,h.password=c[0].secret,jr(()=>r=!1)),!n&&u&2&&(n=!0,h.show=c[1],jr(()=>n=!1)),t.$set(h)},i(c){i||(xt(t.$$.fragment,c),i=!0)},o(c){Mt(t.$$.fragment,c),i=!1},d(c){Yt(t,c)}}}function P7(e){let t,r,n,i,s,a,o,c,u,h,f,p,d,S;s=new i2({});const k=[S7,A7],A=[];function C(B,R){return B[0].secret!=null?0:1}return h=C(e),f=A[h]=k[h](e),{c(){t=At("form"),r=At("div"),n=At("button"),i=At("div"),Ht(s.$$.fragment),a=Ft(),o=At("div"),c=At("input"),u=Ft(),f.c(),this.h()},l(B){t=St(B,"FORM",{class:!0,autocomplete:!0});var R=kt(t);r=St(R,"DIV",{class:!0});var D=kt(r);n=St(D,"BUTTON",{class:!0});var L=kt(n);i=St(L,"DIV",{class:!0});var g=kt(i);Gt(s.$$.fragment,g),g.forEach(dt),L.forEach(dt),D.forEach(dt),a=Lt(R),o=St(R,"DIV",{class:!0});var I=kt(o);c=St(I,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0}),u=Lt(I),f.l(I),I.forEach(dt),R.forEach(dt),this.h()},h(){ft(i,"class","as-w-6 as-h-6"),ft(n,"class","as-btn as-danger as-p-1"),ft(r,"class","as-flex-grow-0 as-mr-2"),ft(c,"class","as-input"),ft(c,"type","text"),ft(c,"placeholder","Username"),ft(c,"autocomplete","off"),ft(o,"class","as-flex-grow"),ft(t,"class","as-flex as-flex-row as-w-full as-mb-2"),ft(t,"autocomplete","off")},m(B,R){Pt(B,t,R),bt(t,r),bt(r,n),bt(n,i),Vt(s,i,null),bt(t,a),bt(t,o),bt(o,c),Ue(c,e[0].username),bt(o,u),A[h].m(o,null),p=!0,d||(S=[Zt(n,"click",e[3]),Zt(c,"input",e[7]),Zt(c,"input",e[4]),Zt(t,"submit",Ss(e[6]))],d=!0)},p(B,[R]){R&1&&c.value!==B[0].username&&Ue(c,B[0].username);let D=h;h=C(B),h===D?A[h].p(B,R):(Pr(),Mt(A[D],1,1,()=>{A[D]=null}),xr(),f=A[h],f?f.p(B,R):(f=A[h]=k[h](B),f.c()),xt(f,1),f.m(o,null))},i(B){p||(xt(s.$$.fragment,B),xt(f),p=!0)},o(B){Mt(s.$$.fragment,B),Mt(f),p=!1},d(B){B&&dt(t),Yt(s),A[h].d(),d=!1,gr(S)}}}function x7(e,t,r){let{secret:n}=t,{onDelete:i=()=>{}}=t,s=!1;async function a(){try{await z6(n),r(1,s=!0)}catch(A){console.error(A),$h(A.message)}}function o(){i(n)}async function c(){n.application&&n.username&&n.secret&&await B6(n.id,{type:n.type,application:n.application,username:n.username,secret:n.secret})}const u=b7(c,1e3);function h(A){Do.call(this,e,A)}function f(){n.username=this.value,r(0,n)}function p(A){e.$$.not_equal(n.secret,A)&&(n.secret=A,r(0,n))}function d(A){s=A,r(1,s)}function S(A){e.$$.not_equal(n.secret,A)&&(n.secret=A,r(0,n))}function k(A){s=A,r(1,s)}return e.$$set=A=>{"secret"in A&&r(0,n=A.secret),"onDelete"in A&&r(5,i=A.onDelete)},[n,s,a,o,u,i,h,f,p,d,S,k]}class Y2 extends Ee{constructor(t){super(),ke(this,t,x7,P7,Ze,{secret:0,onDelete:5})}}function Ih(e,t,r){const n=e.slice();n[5]=t[r][0],n[6]=t[r][1];const i=n[0]?n[6].filter(s=>Wh(s,n[0])):n[6];return n[7]=i,n}function Uh(e,t,r){const n=e.slice();return n[10]=t[r],n}function Dh(e,t){let r,n,i;return n=new Y2({props:{secret:t[10],onDelete:t[1]}}),{key:e,first:null,c(){r=Qe(),Ht(n.$$.fragment),this.h()},l(s){r=Qe(),Gt(n.$$.fragment,s),this.h()},h(){this.first=r},m(s,a){Pt(s,r,a),Vt(n,s,a),i=!0},p(s,a){t=s;const o={};a&5&&(o.secret=t[10]),a&2&&(o.onDelete=t[1]),n.$set(o)},i(s){i||(xt(n.$$.fragment,s),i=!0)},o(s){Mt(n.$$.fragment,s),i=!1},d(s){s&&dt(r),Yt(n,s)}}}function Oh(e,t){let r,n=t[5]+"",i,s,a=[],o=new Map,c,u,h=t[7];const f=p=>p[10].id;for(let p=0;p<h.length;p+=1){let d=Uh(t,h,p),S=f(d);o.set(S,a[p]=Dh(S,d))}return{key:e,first:null,c(){r=At("h2"),i=Ae(n),s=Ft();for(let p=0;p<a.length;p+=1)a[p].c();c=Qe(),this.h()},l(p){r=St(p,"H2",{class:!0});var d=kt(r);i=Se(d,n),d.forEach(dt),s=Lt(p);for(let S=0;S<a.length;S+=1)a[S].l(p);c=Qe(),this.h()},h(){ft(r,"class","as-my-1 as-text-xl"),this.first=r},m(p,d){Pt(p,r,d),bt(r,i),Pt(p,s,d);for(let S=0;S<a.length;S+=1)a[S].m(p,d);Pt(p,c,d),u=!0},p(p,d){t=p,(!u||d&4)&&n!==(n=t[5]+"")&&Ea(i,n),d&7&&(h=t[7],Pr(),a=_c(a,d,f,1,t,h,o,c.parentNode,_0,Dh,c,Uh),xr())},i(p){if(!u){for(let d=0;d<h.length;d+=1)xt(a[d]);u=!0}},o(p){for(let d=0;d<a.length;d+=1)Mt(a[d]);u=!1},d(p){p&&dt(r),p&&dt(s);for(let d=0;d<a.length;d+=1)a[d].d(p);p&&dt(c)}}}function M7(e){let t=[],r=new Map,n,i,s=e[2];const a=o=>o[5];for(let o=0;o<s.length;o+=1){let c=Ih(e,s,o),u=a(c);r.set(u,t[o]=Oh(u,c))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();n=Qe()},l(o){for(let c=0;c<t.length;c+=1)t[c].l(o);n=Qe()},m(o,c){for(let u=0;u<t.length;u+=1)t[u].m(o,c);Pt(o,n,c),i=!0},p(o,[c]){c&7&&(s=o[2],Pr(),t=_c(t,c,a,1,o,s,r,n.parentNode,_0,Oh,n,Ih),xr())},i(o){if(!i){for(let c=0;c<s.length;c+=1)xt(t[c]);i=!0}},o(o){for(let c=0;c<t.length;c+=1)Mt(t[c]);i=!1},d(o){for(let c=0;c<t.length;c+=1)t[c].d(o);o&&dt(n)}}}function T7(e,t,r){let n,i,s;gs(e,Z0,c=>r(4,s=c));let{search:a=""}=t,{onDelete:o=()=>{}}=t;return e.$$set=c=>{"search"in c&&r(0,a=c.search),"onDelete"in c&&r(1,o=c.onDelete)},e.$$.update=()=>{e.$$.dirty&16&&r(3,n=Object.entries(s)),e.$$.dirty&9&&r(2,i=a?n.filter(([c,u])=>i3(a,c)):n),e.$$.dirty&12&&i.length===0&&r(2,i=n)},[a,o,i,n,s]}class R7 extends Ee{constructor(t){super(),ke(this,t,T7,M7,Ze,{search:0,onDelete:1})}}function Nh(e,t,r){const n=e.slice();return n[6]=t[r],n}function Bh(e,t){let r,n,i;return n=new Y2({props:{secret:t[6],onDelete:t[0]}}),{key:e,first:null,c(){r=Qe(),Ht(n.$$.fragment),this.h()},l(s){r=Qe(),Gt(n.$$.fragment,s),this.h()},h(){this.first=r},m(s,a){Pt(s,r,a),Vt(n,s,a),i=!0},p(s,a){t=s;const o={};a&2&&(o.secret=t[6]),a&1&&(o.onDelete=t[0]),n.$set(o)},i(s){i||(xt(n.$$.fragment,s),i=!0)},o(s){Mt(n.$$.fragment,s),i=!1},d(s){s&&dt(r),Yt(n,s)}}}function C7(e){let t=[],r=new Map,n,i,s=e[1];const a=o=>o[6].id;for(let o=0;o<s.length;o+=1){let c=Nh(e,s,o),u=a(c);r.set(u,t[o]=Bh(u,c))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();n=Qe()},l(o){for(let c=0;c<t.length;c+=1)t[c].l(o);n=Qe()},m(o,c){for(let u=0;u<t.length;u+=1)t[u].m(o,c);Pt(o,n,c),i=!0},p(o,[c]){c&3&&(s=o[1],Pr(),t=_c(t,c,a,1,o,s,r,n.parentNode,_0,Bh,n,Nh),xr())},i(o){if(!i){for(let c=0;c<s.length;c+=1)xt(t[c]);i=!0}},o(o){for(let c=0;c<t.length;c+=1)Mt(t[c]);i=!1},d(o){for(let c=0;c<t.length;c+=1)t[c].d(o);o&&dt(n)}}}function I7(e,t,r){let n,i,s;gs(e,Z0,u=>r(5,s=u));let{application:a}=t,{search:o=""}=t,{onDelete:c=()=>{}}=t;return e.$$set=u=>{"application"in u&&r(2,a=u.application),"search"in u&&r(3,o=u.search),"onDelete"in u&&r(0,c=u.onDelete)},e.$$.update=()=>{e.$$.dirty&36&&r(4,n=s[a]||[]),e.$$.dirty&24&&r(1,i=o?n.filter(u=>Wh(u,o)):n)},[c,i,a,o,n,s]}class U7 extends Ee{constructor(t){super(),ke(this,t,I7,C7,Ze,{application:2,search:3,onDelete:0})}}function D7(e){let t,r,n;return{c(){t=At("input"),this.h()},l(i){t=St(i,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){ft(t,"id",e[2]),ft(t,"name",e[3]),ft(t,"class","as-input as-flex-1"),ft(t,"type","password"),ft(t,"placeholder",e[5]),t.disabled=e[6]},m(i,s){Pt(i,t,s),Ue(t,e[0]),r||(n=[Zt(t,"input",e[10]),Zt(t,"input",function(){ki(e[4])&&e[4].apply(this,arguments)})],r=!0)},p(i,s){e=i,s&4&&ft(t,"id",e[2]),s&8&&ft(t,"name",e[3]),s&32&&ft(t,"placeholder",e[5]),s&64&&(t.disabled=e[6]),s&1&&t.value!==e[0]&&Ue(t,e[0])},d(i){i&&dt(t),r=!1,gr(n)}}}function O7(e){let t,r,n;return{c(){t=At("input"),this.h()},l(i){t=St(i,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){ft(t,"id",e[2]),ft(t,"name",e[3]),ft(t,"class","as-input as-flex-1"),ft(t,"type","text"),ft(t,"placeholder",e[5]),t.disabled=e[6]},m(i,s){Pt(i,t,s),Ue(t,e[0]),r||(n=[Zt(t,"input",e[9]),Zt(t,"input",function(){ki(e[4])&&e[4].apply(this,arguments)})],r=!0)},p(i,s){e=i,s&4&&ft(t,"id",e[2]),s&8&&ft(t,"name",e[3]),s&32&&ft(t,"placeholder",e[5]),s&64&&(t.disabled=e[6]),s&1&&t.value!==e[0]&&Ue(t,e[0])},d(i){i&&dt(t),r=!1,gr(n)}}}function N7(e){let t,r;return t=new Gc({}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function B7(e){let t,r;return t=new h1({}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function z7(e){let t,r,n,i,s,a,o,c,u,h;function f(C,B){return C[1]?O7:D7}let p=f(e),d=p(e);const S=[B7,N7],k=[];function A(C,B){return C[1]?0:1}return a=A(e),o=k[a]=S[a](e),{c(){t=At("div"),d.c(),r=Ft(),n=At("div"),i=At("button"),s=At("div"),o.c(),this.h()},l(C){t=St(C,"DIV",{class:!0});var B=kt(t);d.l(B),r=Lt(B),n=St(B,"DIV",{class:!0});var R=kt(n);i=St(R,"BUTTON",{class:!0});var D=kt(i);s=St(D,"DIV",{class:!0});var L=kt(s);o.l(L),L.forEach(dt),D.forEach(dt),R.forEach(dt),B.forEach(dt),this.h()},h(){ft(s,"class","as-w-5 as-h-5"),ft(i,"class","as-btn as-primary as-p-2"),ft(n,"class","as-grow-0 as-flex-row as-flex"),ft(t,"class","as-flex")},m(C,B){Pt(C,t,B),d.m(t,null),bt(t,r),bt(t,n),bt(n,i),bt(i,s),k[a].m(s,null),c=!0,u||(h=Zt(i,"click",e[7]),u=!0)},p(C,[B]){p===(p=f(C))&&d?d.p(C,B):(d.d(1),d=p(C),d&&(d.c(),d.m(t,r)));let R=a;a=A(C),a!==R&&(Pr(),Mt(k[R],1,1,()=>{k[R]=null}),xr(),o=k[a],o||(o=k[a]=S[a](C),o.c()),xt(o,1),o.m(s,null))},i(C){c||(xt(o),c=!0)},o(C){Mt(o),c=!1},d(C){C&&dt(t),d.d(),k[a].d(),u=!1,h()}}}function K7(e,t,r){let{id:n=void 0}=t,{name:i=void 0}=t,{password:s}=t,{onInput:a=()=>{}}=t,{onShow:o=()=>{}}=t,{placeholder:c="Enter Password"}=t,{show:u=!1}=t,{disabled:h=!1}=t;function f(){r(1,u=!u),u&&o()}function p(){s=this.value,r(0,s)}function d(){s=this.value,r(0,s)}return e.$$set=S=>{"id"in S&&r(2,n=S.id),"name"in S&&r(3,i=S.name),"password"in S&&r(0,s=S.password),"onInput"in S&&r(4,a=S.onInput),"onShow"in S&&r(8,o=S.onShow),"placeholder"in S&&r(5,c=S.placeholder),"show"in S&&r(1,u=S.show),"disabled"in S&&r(6,h=S.disabled)},[s,u,n,i,a,c,h,f,o,p,d]}class zh extends Ee{constructor(t){super(),ke(this,t,K7,z7,Ze,{id:2,name:3,password:0,onInput:4,onShow:8,placeholder:5,show:1,disabled:6})}}function Kh(e,t,r){const n=e.slice();return n[0]=t[r],n}function F7(e){var k,A;let t,r,n,i=((k=e[1])==null?void 0:k.application)+"",s,a,o=((A=e[1])==null?void 0:A.username)+"",c,u,h,f,p,d,S;return{c(){t=At("form"),r=At("p"),n=Ae("Delete "),s=Ae(i),a=Ft(),c=Ae(o),u=Ae(" Secret?"),h=Ft(),f=At("div"),p=At("input"),this.h()},l(C){t=St(C,"FORM",{});var B=kt(t);r=St(B,"P",{class:!0});var R=kt(r);n=Se(R,"Delete "),s=Se(R,i),a=Lt(R),c=Se(R,o),u=Se(R," Secret?"),R.forEach(dt),h=Lt(B),f=St(B,"DIV",{class:!0});var D=kt(f);p=St(D,"INPUT",{type:!0,class:!0}),D.forEach(dt),B.forEach(dt),this.h()},h(){ft(r,"class","as-mb-2"),ft(p,"type","submit"),ft(p,"class","as-btn as-danger"),p.value="Delete",ft(f,"class","as-flex as-justify-end as-mt-2")},m(C,B){Pt(C,t,B),bt(t,r),bt(r,n),bt(r,s),bt(r,a),bt(r,c),bt(r,u),bt(t,h),bt(t,f),bt(f,p),d||(S=[Zt(p,"click",Ss(function(){ki(e[10])&&e[10].apply(this,arguments)})),Zt(t,"submit",Ss(e[19]))],d=!0)},p(C,B){var R,D;e=C,B&2&&i!==(i=((R=e[1])==null?void 0:R.application)+"")&&Ea(s,i),B&2&&o!==(o=((D=e[1])==null?void 0:D.username)+"")&&Ea(c,o)},d(C){C&&dt(t),d=!1,gr(S)}}}function L7(e){let t,r;return{c(){t=At("h3"),r=Ae("Deleting Secret"),this.h()},l(n){t=St(n,"H3",{slot:!0,class:!0});var i=kt(t);r=Se(i,"Deleting Secret"),i.forEach(dt),this.h()},h(){ft(t,"slot","title"),ft(t,"class","as-text-lg")},m(n,i){Pt(n,t,i),bt(t,r)},p:Pe,d(n){n&&dt(t)}}}function j7(e){let t,r;return t=new l7({props:{onAdd:e[15],application:e[0]}}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},p(n,i){const s={};i&1&&(s.application=n[0]),t.$set(s)},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function q7(e){let t,r;return{c(){t=At("h3"),r=Ae("Add Secret"),this.h()},l(n){t=St(n,"H3",{class:!0,slot:!0});var i=kt(t);r=Se(i,"Add Secret"),i.forEach(dt),this.h()},h(){ft(t,"class","as-text-lg"),ft(t,"slot","title")},m(n,i){Pt(n,t,i),bt(t,r)},p:Pe,d(n){n&&dt(t)}}}function $7(e){let t,r,n,i,s,a,o,c,u,h,f,p,d,S;function k(R){e[22](R)}let A={};e[7]!==void 0&&(A.password=e[7]),r=new zh({props:A}),Ar.push(()=>Lr(r,"password",k));function C(R){e[23](R)}let B={placeholder:"Re-Enter Password"};return e[8]!==void 0&&(B.password=e[8]),s=new zh({props:B}),Ar.push(()=>Lr(s,"password",C)),c=new ua({props:{messages:e[9]}}),{c(){t=At("form"),Ht(r.$$.fragment),i=Ft(),Ht(s.$$.fragment),o=Ft(),Ht(c.$$.fragment),u=Ft(),h=At("div"),f=At("input"),this.h()},l(R){t=St(R,"FORM",{autocomplete:!0});var D=kt(t);Gt(r.$$.fragment,D),i=Lt(D),Gt(s.$$.fragment,D),o=Lt(D),Gt(c.$$.fragment,D),u=Lt(D),h=St(D,"DIV",{class:!0});var L=kt(h);f=St(L,"INPUT",{type:!0,class:!0}),L.forEach(dt),D.forEach(dt),this.h()},h(){ft(f,"type","submit"),ft(f,"class","as-btn as-primary"),f.value="Ok",ft(h,"class","as-flex as-justify-end as-mt-2"),ft(t,"autocomplete","off")},m(R,D){Pt(R,t,D),Vt(r,t,null),bt(t,i),Vt(s,t,null),bt(t,o),Vt(c,t,null),bt(t,u),bt(t,h),bt(h,f),p=!0,d||(S=[Zt(f,"click",Ss(e[16])),Zt(t,"submit",Ss(e[18]))],d=!0)},p(R,D){const L={};!n&&D&128&&(n=!0,L.password=R[7],jr(()=>n=!1)),r.$set(L);const g={};!a&&D&256&&(a=!0,g.password=R[8],jr(()=>a=!1)),s.$set(g);const I={};D&512&&(I.messages=R[9]),c.$set(I)},i(R){p||(xt(r.$$.fragment,R),xt(s.$$.fragment,R),xt(c.$$.fragment,R),p=!0)},o(R){Mt(r.$$.fragment,R),Mt(s.$$.fragment,R),Mt(c.$$.fragment,R),p=!1},d(R){R&&dt(t),Yt(r),Yt(s),Yt(c),d=!1,gr(S)}}}function W7(e){let t,r;return{c(){t=At("h3"),r=Ae("Enter Master Password"),this.h()},l(n){t=St(n,"H3",{slot:!0,class:!0});var i=kt(t);r=Se(i,"Enter Master Password"),i.forEach(dt),this.h()},h(){ft(t,"slot","title"),ft(t,"class","as-text-lg")},m(n,i){Pt(n,t,i),bt(t,r)},p:Pe,d(n){n&&dt(t)}}}function Fh(e,t){let r,n=t[0]+"",i,s;return{key:e,first:null,c(){r=At("option"),i=Ae(n),this.h()},l(a){r=St(a,"OPTION",{});var o=kt(r);i=Se(o,n),o.forEach(dt),this.h()},h(){r.__value=s=t[0],r.value=r.__value,this.first=r},m(a,o){Pt(a,r,o),bt(r,i)},p(a,o){t=a,o&4&&n!==(n=t[0]+"")&&Ea(i,n),o&4&&s!==(s=t[0])&&(r.__value=s,r.value=r.__value)},d(a){a&&dt(r)}}}function H7(e){let t,r;return t=new R7({props:{search:e[3],onDelete:e[11]}}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},p(n,i){const s={};i&8&&(s.search=n[3]),i&2048&&(s.onDelete=n[11]),t.$set(s)},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function G7(e){let t,r;return t=new U7({props:{application:e[6],search:e[3],onDelete:e[11]}}),{c(){Ht(t.$$.fragment)},l(n){Gt(t.$$.fragment,n)},m(n,i){Vt(t,n,i),r=!0},p(n,i){const s={};i&64&&(s.application=n[6]),i&8&&(s.search=n[3]),i&2048&&(s.onDelete=n[11]),t.$set(s)},i(n){r||(xt(t.$$.fragment,n),r=!0)},o(n){Mt(t.$$.fragment,n),r=!1},d(n){Yt(t,n)}}}function V7(e){let t,r,n,i,s,a,o,c,u,h,f,p,d,S,k,A,C,B=[],R=new Map,D,L,g,I,l,m,v,y,w,N,O,W,Z,b,U,G,Q,it;function ht(E){e[20](E)}let ut={$$slots:{title:[L7],default:[F7]},$$scope:{ctx:e}};e[5]!==void 0&&(ut.open=e[5]),t=new Ru({props:ut}),Ar.push(()=>Lr(t,"open",ht));function lt(E){e[21](E)}let j={$$slots:{title:[q7],default:[j7]},$$scope:{ctx:e}};e[4]!==void 0&&(j.open=e[4]),i=new Ru({props:j}),Ar.push(()=>Lr(i,"open",lt));function tt(E){e[24](E)}let F={onClose:T6,$$slots:{title:[W7],default:[$7]},$$scope:{ctx:e}};e[12]!==void 0&&(F.open=e[12]),o=new Ru({props:F}),Ar.push(()=>Lr(o,"open",tt));let x=e[2];const Y=E=>E[0];for(let E=0;E<x.length;E+=1){let _=Kh(e,x,E),M=Y(_);R.set(M,B[E]=Fh(M,_))}I=new g7({props:{saving:e[13]}});const P=[G7,H7],T=[];function z(E,_){return E[6]?0:1}return Z=z(e),b=T[Z]=P[Z](e),{c(){Ht(t.$$.fragment),n=Ft(),Ht(i.$$.fragment),a=Ft(),Ht(o.$$.fragment),u=Ft(),h=At("div"),f=At("div"),p=At("div"),d=At("label"),S=Ae("Filter by Application or URL"),k=Ft(),A=At("select"),C=At("option");for(let E=0;E<B.length;E+=1)B[E].c();D=Ft(),L=At("div"),g=At("div"),Ht(I.$$.fragment),l=Ft(),m=At("div"),v=At("div"),y=At("button"),w=Ae("Add"),N=Ft(),O=At("input"),W=Ft(),b.c(),U=Qe(),this.h()},l(E){Gt(t.$$.fragment,E),n=Lt(E),Gt(i.$$.fragment,E),a=Lt(E),Gt(o.$$.fragment,E),u=Lt(E),h=St(E,"DIV",{class:!0});var _=kt(h);f=St(_,"DIV",{class:!0});var M=kt(f);p=St(M,"DIV",{class:!0});var K=kt(p);d=St(K,"LABEL",{for:!0});var X=kt(d);S=Se(X,"Filter by Application or URL"),X.forEach(dt),k=Lt(K),A=St(K,"SELECT",{id:!0,name:!0,class:!0});var J=kt(A);C=St(J,"OPTION",{}),kt(C).forEach(dt);for(let rt=0;rt<B.length;rt+=1)B[rt].l(J);J.forEach(dt),K.forEach(dt),D=Lt(M),L=St(M,"DIV",{class:!0});var nt=kt(L);g=St(nt,"DIV",{class:!0});var pt=kt(g);Gt(I.$$.fragment,pt),pt.forEach(dt),nt.forEach(dt),M.forEach(dt),l=Lt(_),m=St(_,"DIV",{class:!0});var gt=kt(m);v=St(gt,"DIV",{class:!0});var Et=kt(v);y=St(Et,"BUTTON",{class:!0});var et=kt(y);w=Se(et,"Add"),et.forEach(dt),Et.forEach(dt),gt.forEach(dt),_.forEach(dt),N=Lt(E),O=St(E,"INPUT",{class:!0,type:!0,placeholder:!0}),W=Lt(E),b.l(E),U=Qe(),this.h()},h(){ft(d,"for","filter-application"),C.__value="",C.value=C.__value,ft(A,"id","filter-application"),ft(A,"name","filter-application"),ft(A,"class","as-input as-flex"),e[0]===void 0&&jh(()=>e[25].call(A)),ft(p,"class","as-flex-1"),ft(g,"class","as-grow-0"),ft(L,"class","as-flex as-flex-col as-p-1 as-justify-end"),ft(f,"class","as-flex as-flex-row as-flex-grow"),ft(y,"class","as-btn as-primary"),ft(v,"class","as-grow-0"),ft(m,"class","as-flex as-flex-col as-justify-end"),ft(h,"class","as-flex as-justify-between"),ft(O,"class","as-input as-my-2"),ft(O,"type","text"),ft(O,"placeholder","Search...")},m(E,_){Vt(t,E,_),Pt(E,n,_),Vt(i,E,_),Pt(E,a,_),Vt(o,E,_),Pt(E,u,_),Pt(E,h,_),bt(h,f),bt(f,p),bt(p,d),bt(d,S),bt(p,k),bt(p,A),bt(A,C);for(let M=0;M<B.length;M+=1)B[M].m(A,null);Uo(A,e[0]),bt(f,D),bt(f,L),bt(L,g),Vt(I,g,null),bt(h,l),bt(h,m),bt(m,v),bt(v,y),bt(y,w),Pt(E,N,_),Pt(E,O,_),Ue(O,e[3]),Pt(E,W,_),T[Z].m(E,_),Pt(E,U,_),G=!0,Q||(it=[Zt(A,"change",e[25]),Zt(y,"click",e[14]),Zt(O,"input",e[26])],Q=!0)},p(E,[_]){const M={};_&536871938&&(M.$$scope={dirty:_,ctx:E}),!r&&_&32&&(r=!0,M.open=E[5],jr(()=>r=!1)),t.$set(M);const K={};_&536870913&&(K.$$scope={dirty:_,ctx:E}),!s&&_&16&&(s=!0,K.open=E[4],jr(()=>s=!1)),i.$set(K);const X={};_&536871808&&(X.$$scope={dirty:_,ctx:E}),!c&&_&4096&&(c=!0,X.open=E[12],jr(()=>c=!1)),o.$set(X),_&4&&(x=E[2],B=_c(B,_,Y,1,E,x,R,A,r3,Fh,null,Kh)),_&5&&Uo(A,E[0]);const J={};_&8192&&(J.saving=E[13]),I.$set(J),_&8&&O.value!==E[3]&&Ue(O,E[3]);let nt=Z;Z=z(E),Z===nt?T[Z].p(E,_):(Pr(),Mt(T[nt],1,1,()=>{T[nt]=null}),xr(),b=T[Z],b?b.p(E,_):(b=T[Z]=P[Z](E),b.c()),xt(b,1),b.m(U.parentNode,U))},i(E){G||(xt(t.$$.fragment,E),xt(i.$$.fragment,E),xt(o.$$.fragment,E),xt(I.$$.fragment,E),xt(b),G=!0)},o(E){Mt(t.$$.fragment,E),Mt(i.$$.fragment,E),Mt(o.$$.fragment,E),Mt(I.$$.fragment,E),Mt(b),G=!1},d(E){Yt(t,E),E&&dt(n),Yt(i,E),E&&dt(a),Yt(o,E),E&&dt(u),E&&dt(h);for(let _=0;_<B.length;_+=1)B[_].d();Yt(I),E&&dt(N),E&&dt(O),E&&dt(W),T[Z].d(E),E&&dt(U),Q=!1,gr(it)}}}function Y7(e,t,r){let n,i,s,a,o,c;gs(e,Z0,O=>r(17,a=O)),gs(e,wa,O=>r(12,o=O)),gs(e,C6,O=>r(13,c=O));let{application:u=""}=t,h="",f=!1;function p(){r(4,f=!f)}function d(){r(4,f=!1)}let S,k=!1,A,C="",B="",R=[];function D(){try{if(C!==B)throw new Error("Password confirmation does not match");x6(C),r(9,R=[]),wa.set(!1)}catch(O){console.error(O),r(9,R=[O.message])}}function L(O){Do.call(this,e,O)}function g(O){Do.call(this,e,O)}function I(O){k=O,r(5,k),r(1,S)}function l(O){f=O,r(4,f)}function m(O){C=O,r(7,C)}function v(O){B=O,r(8,B)}function y(O){o=O,wa.set(o)}function w(){u=qh(this),r(0,u),r(2,s),r(17,a)}function N(){h=this.value,r(3,h)}return e.$$set=O=>{"application"in O&&r(0,u=O.application)},e.$$.update=()=>{e.$$.dirty&2&&r(10,i=()=>{S&&(K6(S.id),r(1,S=void 0),r(5,k=!1))}),e.$$.dirty&131072&&r(2,s=Object.keys(a)),e.$$.dirty&5&&r(6,A=s.find(O=>ka(u)===ka(O)))},r(11,n=O=>{r(1,S=O),r(5,k=!0)}),[u,S,s,h,f,k,A,C,B,R,i,n,o,c,p,d,D,a,L,g,I,l,m,v,y,w,N]}class J7 extends Ee{constructor(t){super(),ke(this,t,Y7,V7,Ze,{application:0})}}function X7(e){let t;return{c(){t=At("div"),this.h()},l(r){t=St(r,"DIV",{id:!0}),kt(t).forEach(dt),this.h()},h(){ft(t,"id",J2)},m(r,n){Pt(r,t,n)},p:Pe,i:Pe,o:Pe,d(r){r&&dt(t)}}}const J2="remote-storage-widget";let Nu;function Z7(e,t,r){let{element:n=void 0}=t,{widget:i=void 0}=t;return n3(()=>{a3(()=>import("../chunks/widget-bc58238e.js").then(function(s){return s.w}),[]).then(({default:s})=>{var o;Nu&&((o=Nu.rsWidget)==null||o.remove());const a=new s(Hr);a.attach(J2),Nu=a,function c(){a.rsWidget?(r(1,i=a),r(0,n=a.rsWidget)):setTimeout(c,300)}()})}),e.$$set=s=>{"element"in s&&r(0,n=s.element),"widget"in s&&r(1,i=s.widget)},[n,i]}class Q7 extends Ee{constructor(t){super(),ke(this,t,Z7,X7,Ze,{element:0,widget:1})}}const X2=Ka({storage:"disconnected",wire:"idle"}),t9=ns(X2,e=>e);Hr.on("connected",()=>{Yc("storage","connected")});Hr.on("disconnected",()=>{Yc("storage","disconnected")});Hr.on("wire-busy",()=>{Yc("wire","syncing")});Hr.on("wire-done",()=>{Yc("wire","idle")});function Yc(e,t){X2.update(r=>({...r,[e]:t}))}function e9(e){let t,r;return{c(){t=At("h3"),r=Ae("Please connect to a Storage Provider"),this.h()},l(n){t=St(n,"H3",{class:!0});var i=kt(t);r=Se(i,"Please connect to a Storage Provider"),i.forEach(dt),this.h()},h(){ft(t,"class","as-text-center as-py-8 as-text-lg")},m(n,i){Pt(n,t,i),bt(t,r)},i:Pe,o:Pe,d(n){n&&dt(t)}}}function r9(e){let t,r,n;return r=new J7({}),{c(){t=At("div"),Ht(r.$$.fragment),this.h()},l(i){t=St(i,"DIV",{class:!0});var s=kt(t);Gt(r.$$.fragment,s),s.forEach(dt),this.h()},h(){ft(t,"class","as-container as-mx-auto as-p-4 as-mt-4 as-mb-8 as-bg-white")},m(i,s){Pt(i,t,s),Vt(r,t,null),n=!0},i(i){n||(xt(r.$$.fragment,i),n=!0)},o(i){Mt(r.$$.fragment,i),n=!1},d(i){i&&dt(t),Yt(r)}}}function n9(e){let t,r,n,i;const s=[r9,e9],a=[];function o(c,u){return c[0].storage==="connected"?0:1}return t=o(e),r=a[t]=s[t](e),{c(){r.c(),n=Qe()},l(c){r.l(c),n=Qe()},m(c,u){a[t].m(c,u),Pt(c,n,u),i=!0},p(c,u){let h=t;t=o(c),t!==h&&(Pr(),Mt(a[h],1,1,()=>{a[h]=null}),xr(),r=a[t],r||(r=a[t]=s[t](c),r.c()),xt(r,1),r.m(n.parentNode,n))},i(c){i||(xt(r),i=!0)},o(c){Mt(r),i=!1},d(c){a[t].d(c),c&&dt(n)}}}function i9(e){let t,r,n,i,s;return t=new s3({props:{$$slots:{default:[n9]},$$scope:{ctx:e}}}),i=new Q7({}),{c(){Ht(t.$$.fragment),r=Ft(),n=At("div"),Ht(i.$$.fragment),this.h()},l(a){Gt(t.$$.fragment,a),r=Lt(a),n=St(a,"DIV",{class:!0});var o=kt(n);Gt(i.$$.fragment,o),o.forEach(dt),this.h()},h(){ft(n,"class","as-absolute as-left-0 as-bottom-0")},m(a,o){Vt(t,a,o),Pt(a,r,o),Pt(a,n,o),Vt(i,n,null),s=!0},p(a,[o]){const c={};o&3&&(c.$$scope={dirty:o,ctx:a}),t.$set(c)},i(a){s||(xt(t.$$.fragment,a),xt(i.$$.fragment,a),s=!0)},o(a){Mt(t.$$.fragment,a),Mt(i.$$.fragment,a),s=!1},d(a){Yt(t,a),a&&dt(r),a&&dt(n),Yt(i)}}}function s9(e,t,r){let n;return gs(e,t9,i=>r(0,n=i)),[n]}class l9 extends Ee{constructor(t){super(),ke(this,t,s9,i9,Vn,{})}}export{l9 as default};
