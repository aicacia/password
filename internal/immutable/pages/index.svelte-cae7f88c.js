var Ds=Object.defineProperty,js=Object.defineProperties;var Fs=Object.getOwnPropertyDescriptors;var Zr=Object.getOwnPropertySymbols;var Ls=Object.prototype.hasOwnProperty,Bs=Object.prototype.propertyIsEnumerable;var en=(t,e,r)=>e in t?Ds(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Je=(t,e)=>{for(var r in e||(e={}))Ls.call(e,r)&&en(t,r,e[r]);if(Zr)for(var r of Zr(e))Bs.call(e,r)&&en(t,r,e[r]);return t},ut=(t,e)=>js(t,Fs(e));import{S as Te,i as Ae,s as tt,I as Tr,e as X,c as Q,a as ee,d as q,g as K,N as $s,J as Ar,K as kr,L as Nr,H as Zt,q as ne,o as se,D as qs,C as ke,w as ge,x as ye,y as ve,z as mt,A as gt,B as _e,O as Be,P as Ye,Q as Ke,b as J,E as Se,R as Fe,k as ue,m as le,T as Ve,M as Z,U as be,n as Qe,p as Ze,G as ot,V as et,W as Ue,t as we,h as Ee,j as Nt,X as Gs,Y as qn,Z as Rt,_ as Gn,$ as Wt,a0 as It,a1 as Vn,a2 as Ct,l as De,a3 as er,a4 as Rr,a5 as Vs,v as Ws}from"../chunks/index-88b7c50a.js";import{c as tr,I as yt,a as tn,f as Wn,s as Hn,L as Hs}from"../chunks/Layout-c46df740.js";import{d as vt,w as Ir}from"../chunks/index-859dd965.js";import{_ as Js}from"../chunks/preload-helper-91b3b7b7.js";var Ut,zs=new Uint8Array(16);function Ys(){if(!Ut&&(Ut=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ut))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ut(zs)}var Ks=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Xs(t){return typeof t=="string"&&Ks.test(t)}var Ne=[];for(var cr=0;cr<256;++cr)Ne.push((cr+256).toString(16).substr(1));function Qs(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Ne[t[e+0]]+Ne[t[e+1]]+Ne[t[e+2]]+Ne[t[e+3]]+"-"+Ne[t[e+4]]+Ne[t[e+5]]+"-"+Ne[t[e+6]]+Ne[t[e+7]]+"-"+Ne[t[e+8]]+Ne[t[e+9]]+"-"+Ne[t[e+10]]+Ne[t[e+11]]+Ne[t[e+12]]+Ne[t[e+13]]+Ne[t[e+14]]+Ne[t[e+15]]).toLowerCase();if(!Xs(r))throw TypeError("Stringified UUID is invalid");return r}function Zs(t,e,r){t=t||{};var n=t.random||(t.rng||Ys)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return Qs(n)}const ei="v21wdidfxjapm8b",ti="399181883347-3dfijgbemptplmueu01bsfga9jpkks6j.apps.googleusercontent.com";var ri=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ni(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jn={exports:{}};/*! remotestorage.js 2.0.0-beta.3, https://remotestorage.io, MIT licensed */(function(t,e){(function(r,n){t.exports=n()})(ri,function(){return function(r){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=n,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:l})},s.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,o){if(1&o&&(i=s(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var p in i)s.d(l,p,function(_){return i[_]}.bind(null,p));return l},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=17)}([function(r,n,s){(function(i,o){Object.defineProperty(n,"__esModule",{value:!0}),n.applyMixins=n.toBase64=n.getTextFromArrayBuffer=n.shouldBeTreatedAsBinary=n.getJSONFromLocalStorage=n.localStorageAvailable=n.pathsFromRoot=n.deepClone=n.equal=n.bindAll=n.cleanPath=n.baseName=n.isDocument=n.isFolder=n.containingFolder=n.extend=n.getGlobalContext=n.globalContext=n.logError=void 0,n.logError=l=>{typeof l=="string"?console.error(l):console.error(l.message,l.stack)},n.globalContext=typeof window!="undefined"?window:typeof self=="object"?self:i,n.getGlobalContext=()=>typeof window!="undefined"?window:typeof self=="object"?self:i,n.extend=(...l)=>{const p=l[0];return Array.prototype.slice.call(l,1).forEach(function(_){for(const A in _)p[A]=_[A]}),p},n.containingFolder=l=>{if(l==="")return"/";if(!l)throw"Path not given!";return l.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},n.isFolder=l=>l.substr(-1)==="/",n.isDocument=l=>!n.isFolder(l),n.baseName=l=>{const p=l.split("/");return n.isFolder(l)?p[p.length-2]+"/":p[p.length-1]},n.cleanPath=l=>l.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27"),n.bindAll=l=>{for(const p in this)typeof l[p]=="function"&&(l[p]=l[p].bind(l))},n.equal=(l,p,_=[])=>{let A;if(typeof l!=typeof p)return!1;if(typeof l=="number"||typeof l=="boolean"||typeof l=="string")return l===p;if(typeof l=="function")return l.toString()===p.toString();if(l instanceof ArrayBuffer&&p instanceof ArrayBuffer&&(l=new Uint8Array(l),p=new Uint8Array(p)),l instanceof Array){if(l.length!==p.length)return!1;for(let y=0,k=l.length;y<k;y++)if(!n.equal(l[y],p[y],_))return!1}else{for(A in l)if(l.hasOwnProperty(A)&&!(A in p))return!1;for(A in p){if(!p.hasOwnProperty(A))continue;if(!(A in l))return!1;let y;if(typeof p[A]=="object"){if(_.indexOf(p[A])>=0)continue;y=_.slice(),y.push(p[A])}if(!n.equal(l[A],p[A],y))return!1}}return!0},n.deepClone=l=>{if(l!==void 0){const p=JSON.parse(JSON.stringify(l));return function _(A,y){if(typeof A=="object"&&!Array.isArray(A)&&A!==null){for(const k in A)if(typeof A[k]=="object"&&A[k]!==null)if(A[k].toString()==="[object ArrayBuffer]"){y[k]=new ArrayBuffer(A[k].byteLength);const P=new Int8Array(A[k]);new Int8Array(y[k]).set(P)}else _(A[k],y[k])}}(l,p),p}},n.pathsFromRoot=l=>{const p=[l],_=l.replace(/\/$/,"").split("/");for(;_.length>1;)_.pop(),p.push(_.join("/")+"/");return p},n.localStorageAvailable=()=>{const l=n.getGlobalContext();if(!("localStorage"in l))return!1;try{return l.localStorage.setItem("rs-check","1"),l.localStorage.removeItem("rs-check"),!0}catch{return!1}},n.getJSONFromLocalStorage=l=>{const p=n.getGlobalContext();try{return JSON.parse(p.localStorage.getItem(l))}catch{}},n.shouldBeTreatedAsBinary=(l,p)=>!!(p&&p.match(/charset=binary/)||/[\x00-\x08\x0E-\x1F\uFFFD]/.test(l)),n.getTextFromArrayBuffer=(l,p)=>new Promise(_=>{if(typeof Blob=="undefined"){const A=new o(new Uint8Array(l));_(A.toString(p))}else{let A;const y=n.globalContext;if(y.BlobBuilder=y.BlobBuilder||y.WebKitBlobBuilder,y.BlobBuilder!==void 0){const P=new y.BlobBuilder;P.append(l),A=P.getBlob()}else A=new Blob([l]);const k=new FileReader;typeof k.addEventListener=="function"?k.addEventListener("loadend",function(P){_(P.target.result)}):k.onloadend=function(P){_(P.target.result)},k.readAsText(A,p)}}),n.toBase64=l=>{const p=n.getGlobalContext();return"btoa"in p?p.btoa(l):o.from(l).toString("base64")},n.applyMixins=function(l,p){p.forEach(_=>{Object.getOwnPropertyNames(_.prototype).forEach(A=>{Object.defineProperty(l.prototype,A,Object.getOwnPropertyDescriptor(_.prototype,A))})})}}).call(this,s(5),s(19).Buffer)},function(r,n,s){const i=(this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}})(s(3));r.exports=function(...o){i.default.logging&&console.log(...o)}},function(r,n,s){const i=(this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}})(s(1));r.exports=class{addEvents(o){o.forEach(l=>this._addEvent(l))}addEventListener(o,l){if(typeof o!="string")throw new Error("Argument eventName should be a string");if(typeof l!="function")throw new Error("Argument handler should be a function");i.default("[EventHandling] Adding event listener",o),this._validateEvent(o),this._handlers[o].push(l)}on(o,l){return this.addEventListener(o,l)}removeEventListener(o,l){this._validateEvent(o);const p=this._handlers[o].length;for(let _=0;_<p;_++)if(this._handlers[o][_]===l)return void this._handlers[o].splice(_,1)}_emit(o,...l){this._validateEvent(o),this._handlers[o].slice().forEach(p=>{p.apply(this,l)})}_validateEvent(o){if(!(o in this._handlers))throw new Error("Unknown event: "+o)}_delegateEvent(o,l){l.on(o,p=>{this._emit(o,p)})}_addEvent(o){this._handlers===void 0&&(this._handlers={}),this._handlers[o]=[]}}},function(r,n,s){const i={cache:!0,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},cordovaRedirectUri:void 0,logging:!1,modules:[],backgroundSyncInterval:6e4,disableFeatures:[],discoveryTimeout:1e4,isBackground:!1,requestTimeout:3e4,syncInterval:1e4};r.exports=i},function(r,n,s){class i extends Error{constructor(l,p={}){super(),this.name="Unauthorized",this.message=l===void 0?"App authorization expired or revoked.":l,p.code!==void 0&&(this.code=p.code),this.stack=new Error().stack}}r.exports=i},function(r,n){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}r.exports=s},function(r,n,s){var i=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};const o=i(s(1)),l=s(0),p=i(s(4));let _;function A(k){const P=k||y.getLocation().href,w=P.indexOf("#");if(w===-1)return;const b=P.substring(w+1);return b.includes("=")?b.split("&").reduce(function(S,v){const M=v.split("=");if(M[0]==="state"&&M[1].match(/rsDiscovery/)){let E=decodeURIComponent(M[1]);const j=E.substr(E.indexOf("rsDiscovery=")).split("&")[0].split("=")[1];S.rsDiscovery=JSON.parse(atob(j)),E=E.replace(new RegExp("&?rsDiscovery="+j),""),E.length>0&&(S.state=E)}else S[decodeURIComponent(M[0])]=decodeURIComponent(M[1]);return S},{}):void 0}class y{static authorize(P,{authURL:w,scope:b,redirectUri:S,clientId:v}){if(o.default("[Authorize] authURL = ",w,"scope = ",b,"redirectUri = ",S,"clientId = ",v),!l.localStorageAvailable()&&P.backend==="remotestorage"){S+=S.indexOf("#")>0?"&":"#";const E={userAddress:P.remote.userAddress,href:P.remote.href,storageApi:P.remote.storageApi,properties:P.remote.properties};S+="rsDiscovery="+l.toBase64(JSON.stringify(E))}const M=function(E,j,O,a){const g=j.indexOf("#");let m=E;return m+=E.indexOf("?")>0?"&":"?",m+="redirect_uri="+encodeURIComponent(j.replace(/#.*$/,"")),m+="&scope="+encodeURIComponent(O),m+="&client_id="+encodeURIComponent(a),g!==-1&&g+1!==j.length&&(m+="&state="+encodeURIComponent(j.substring(g+1))),m+="&response_type=token",m}(w,S,b,v);l.globalContext.cordova?y.openWindow(M,S,"location=yes,clearsessioncache=yes,clearcache=yes").then(E=>{P.remote.configure({token:E.access_token})}):y.setLocation(M)}static setLocation(P){if(typeof P=="string")document.location.href=P;else{if(typeof P!="object")throw"Invalid location "+P;document.location=P}}static _rs_supported(){return typeof document!="undefined"}static _rs_cleanup(P){P.removeEventListener("features-loaded",_)}}y.IMPLIED_FAKE_TOKEN=!1,y.getLocation=function(){return document.location},y.openWindow=function(k,P,w){return new Promise((b,S)=>{const v=open(k,"_blank",w);if(!v||v.closed)return S("Authorization popup was blocked");function M(){return S("Authorization was canceled")}v.addEventListener("loadstart",function(E){if(E.url.indexOf(P)!==0)return;v.removeEventListener("exit",M),v.close();const j=A(E.url);return j?b(j):S("Authorization error")}),v.addEventListener("exit",M)})},y._rs_init=function(k){const P=A();let w;P&&(w=y.getLocation(),w.hash=""),_=function(){let b=!1;if(P){if(P.error)throw P.error==="access_denied"?new p.default("Authorization failed: access denied",{code:"access_denied"}):new p.default("Authorization failed: "+P.error);P.rsDiscovery&&k.remote.configure(P.rsDiscovery),P.access_token&&(k.remote.configure({token:P.access_token}),b=!0),P.remotestorage&&(k.connect(P.remotestorage),b=!0),P.state&&(w=y.getLocation(),y.setLocation(w.href.split("#")[0]+"#"+P.state)),b||k.remote.stopWaitingForToken()}else k.remote.stopWaitingForToken()},k.on("features-loaded",_)},r.exports=y},function(r,n,s){var i=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};const o=i(s(23)),l=i(s(24)),p=i(s(25)),_=i(s(2)),A=i(s(3)),y=s(0);class k{constructor(w,b){if(this.schemas={configurable:!0,get:function(){return k.Types.inScope(this.moduleName)}},b[b.length-1]!=="/")throw"Not a folder: "+b;b==="/"&&(this.makePath=v=>(v[0]==="/"?"":"/")+v),this.storage=w,this.base=b;const S=this.base.split("/");S.length>2?this.moduleName=S[1]:this.moduleName="root",this.addEvents(["change"]),this.on=this.on.bind(this),w.onChange(this.base,this._fireChange.bind(this))}scope(w){return new k(this.storage,this.makePath(w))}getListing(w,b){if(typeof w!="string")w="";else if(w.length>0&&w[w.length-1]!=="/")return Promise.reject("Not a folder: "+w);return this.storage.get(this.makePath(w),b).then(function(S){return S.statusCode===404?{}:S.body})}getAll(w,b){if(typeof w!="string")w="";else if(w.length>0&&w[w.length-1]!=="/")return Promise.reject("Not a folder: "+w);return this.storage.get(this.makePath(w),b).then(S=>{if(S.statusCode===404)return{};if(typeof S.body=="object"){const v=Object.keys(S.body);if(v.length===0)return{};const M=v.map(E=>this.storage.get(this.makePath(w+E),b).then(function(j){if(typeof j.body=="string")try{j.body=JSON.parse(j.body)}catch{}typeof j.body=="object"&&(S.body[E]=j.body)}));return Promise.all(M).then(function(){return S.body})}})}getFile(w,b){return typeof w!="string"?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(w),b).then(function(S){return{data:S.body,contentType:S.contentType,revision:S.revision}})}storeFile(w,b,S){return typeof w!="string"?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):typeof b!="string"?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):typeof S!="string"&&typeof S!="object"?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(b),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(b),S,w).then(v=>v.statusCode===200||v.statusCode===201?v.revision:Promise.reject("Request (PUT "+this.makePath(b)+") failed with status: "+v.statusCode)))}getObject(w,b){return typeof w!="string"?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(w),b).then(S=>{if(typeof S.body=="object")return S.body;if(typeof S.body=="string")try{return JSON.parse(S.body)}catch{throw new Error("Not valid JSON: "+this.makePath(w))}else if(S.body!==void 0&&S.statusCode===200)return Promise.reject("Not an object: "+this.makePath(w))})}storeObject(w,b,S){if(typeof w!="string")return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if(typeof b!="string")return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if(typeof S!="object")return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(S,w);try{const v=this.validate(S);if(!v.valid)return Promise.reject(v)}catch(v){return Promise.reject(v)}return this.storage.put(this.makePath(b),JSON.stringify(S),"application/json; charset=UTF-8").then(v=>v.statusCode===200||v.statusCode===201?v.revision:Promise.reject("Request (PUT "+this.makePath(b)+") failed with status: "+v.statusCode))}remove(w){return typeof w!="string"?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(w),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage.delete(this.makePath(w)))}getItemURL(w){if(typeof w!="string")throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(w=y.cleanPath(this.makePath(w)),this.storage.remote.href+w):void 0}cache(w,b="ALL"){if(typeof w!="string")throw"Argument 'path' of baseClient.cache must be a string";if(typeof b!="string")throw"Argument 'strategy' of baseClient.cache must be a string or undefined";if(b!=="FLUSH"&&b!=="SEEN"&&b!=="ALL")throw`Argument 'strategy' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]`;return this.storage.caching.set(this.makePath(w),b),this}flush(w){return this.storage.local.flush(w)}declareType(w,b,S){let v;S?v=b:(S=b,v=this._defaultTypeURI(w)),k.Types.declare(this.moduleName,w,v,S)}validate(w){const b=k.Types.getSchema(w["@context"]);if(b)return o.default.validateResult(w,b);throw new p.default(w["@context"])}_defaultTypeURI(w){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(w)}_attachType(w,b){w["@context"]=k.Types.resolveAlias(this.moduleName+"/"+b)||this._defaultTypeURI(b)}makePath(w){return this.base+(w||"")}_fireChange(w){A.default.changeEvents[w.origin]&&(["new","old","lastCommon"].forEach(function(b){if((!w[b+"ContentType"]||/^application\/(.*)json(.*)/.exec(w[b+"ContentType"]))&&typeof w[b+"Value"]=="string")try{w[b+"Value"]=JSON.parse(w[b+"Value"])}catch{}}),this._emit("change",w))}static _rs_init(){}}k.Types=l.default,y.applyMixins(k,[_.default]),r.exports=k},function(r,n,s){(function(i){var o=this&&this.__awaiter||function(O,a,g,m){return new(g||(g=Promise))(function(N,T){function U($){try{G(m.next($))}catch(x){T(x)}}function H($){try{G(m.throw($))}catch(x){T(x)}}function G($){var x;$.done?N($.value):(x=$.value,x instanceof g?x:new g(function(L){L(x)})).then(U,H)}G((m=m.apply(O,a||[])).next())})},l=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};const p=l(s(6)),_=l(s(2)),A=l(s(4)),y=l(s(3)),k=l(s(1)),P=s(0);let w;const b="remotestorage:wireclient",S={"draft-dejong-remotestorage-00":2,"draft-dejong-remotestorage-01":3,"draft-dejong-remotestorage-02":4,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":1};let v;if(typeof(i||window).ArrayBufferView=="function")v=function(O){return O&&O instanceof(i||window).ArrayBufferView};else{const O=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];v=function(a){for(let g=0;g<8;g++)if(a instanceof O[g])return!0;return!1}}function M(O){return typeof O!="string"?O:O==="*"?"*":'"'+O+'"'}function E(O){return typeof O!="string"?O:O.replace(/^["']|["']$/g,"")}class j{constructor(a){if(this._revisionCache={},w=P.localStorageAvailable(),this.rs=a,this.connected=!1,this.addEvents(["connected","not-connected"]),w){const g=function(){const m=P.getJSONFromLocalStorage(b)||{},{userAddress:N,href:T,storageApi:U,token:H,properties:G}=m;return{userAddress:N,href:T,storageApi:U,token:H,properties:G}}();g&&setTimeout(()=>{this.configure(g)},0)}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}get storageType(){if(this.storageApi){const a=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return a?a[1]:"2012.04"}}_request(a,g,m,N,T,U,H){return o(this,void 0,void 0,function*(){if(function($,x){return($==="PUT"||$==="DELETE")&&P.isFolder(x)}(a,g))return Promise.reject(`Don't use ${a} on directories!`);let G;return m!==p.default.IMPLIED_FAKE_TOKEN&&(N.Authorization="Bearer "+m),this.rs._emit("wire-busy",{method:a,isFolder:P.isFolder(g)}),j.request(a,g,{body:T,headers:N,responseType:"arraybuffer"}).then($=>{if(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:a,isFolder:P.isFolder(g),success:!0}),x=$.status,[401,403,404,412].indexOf(x)>=0)return k.default("[WireClient] Error response status",$.status),G=U?E($.getResponseHeader("ETag")):void 0,$.status===401&&this.rs._emit("error",new A.default),Promise.resolve({statusCode:$.status,revision:G});if(function(L){return[201,204,304].indexOf(L)>=0}($.status)||$.status===200&&a!=="GET")return G=E($.getResponseHeader("ETag")),k.default("[WireClient] Successful request",G),Promise.resolve({statusCode:$.status,revision:G});{const L=$.getResponseHeader("Content-Type");G=U?E($.getResponseHeader("ETag")):$.status===200?H:void 0;const h=function(d){let I,D="UTF-8";return d&&(I=d.match(/charset=(.+)$/),I&&(D=I[1])),D}(L);return P.shouldBeTreatedAsBinary($.response,L)?(k.default("[WireClient] Successful request with unknown or binary mime-type",G),Promise.resolve({statusCode:$.status,body:$.response,contentType:L,revision:G})):P.getTextFromArrayBuffer($.response,h).then(d=>(k.default("[WireClient] Successful request",G),Promise.resolve({statusCode:$.status,body:d,contentType:L,revision:G})))}var x},$=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:a,isFolder:P.isFolder(g),success:!1}),Promise.reject($)))})}configure(a){if(typeof a!="object")throw new Error("WireClient configure settings parameter should be an object");if(a.userAddress!==void 0&&(this.userAddress=a.userAddress),a.href!==void 0&&(this.href=a.href),a.storageApi!==void 0&&(this.storageApi=a.storageApi),a.token!==void 0&&(this.token=a.token),a.properties!==void 0&&(this.properties=a.properties),typeof this.storageApi=="string"){const g=S[this.storageApi]||5;this.supportsRevs=g>=2}this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,w&&(localStorage[b]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(a,g={}){if(!this.connected)return Promise.reject("not connected (path: "+a+")");const m={};return this.supportsRevs&&g.ifNoneMatch&&(m["If-None-Match"]=M(g.ifNoneMatch)),this._request("GET",this.href+P.cleanPath(a),this.token,m,void 0,this.supportsRevs,this._revisionCache[a]).then(N=>{if(!P.isFolder(a))return Promise.resolve(N);let T={};if(N.body!==void 0)try{N.body=JSON.parse(N.body)}catch{return Promise.reject("Folder description at "+this.href+P.cleanPath(a)+" is not JSON")}if(N.statusCode===200&&typeof N.body=="object"){if(Object.keys(N.body).length===0)N.statusCode=404;else if((U=N.body)["@context"]==="http://remotestorage.io/spec/folder-description"&&typeof U.items=="object"){for(const H in N.body.items)this._revisionCache[a+H]=N.body.items[H].ETag;T=N.body.items}else Object.keys(N.body).forEach(H=>{this._revisionCache[a+H]=N.body[H],T[H]={ETag:N.body[H]}});return N.body=T,Promise.resolve(N)}return Promise.resolve(N);var U})}put(a,g,m,N={}){if(!this.connected)return Promise.reject("not connected (path: "+a+")");!m.match(/charset=/)&&(g instanceof ArrayBuffer||v(g))&&(m+="; charset=binary");const T={"Content-Type":m};return this.supportsRevs&&(N.ifMatch&&(T["If-Match"]=M(N.ifMatch)),N.ifNoneMatch&&(T["If-None-Match"]=M(N.ifNoneMatch))),this._request("PUT",this.href+P.cleanPath(a),this.token,T,g,this.supportsRevs)}delete(a,g={}){if(!this.connected)throw new Error("not connected (path: "+a+")");g||(g={});const m={};return this.supportsRevs&&g.ifMatch&&(m["If-Match"]=M(g.ifMatch)),this._request("DELETE",this.href+P.cleanPath(a),this.token,m,void 0,this.supportsRevs)}static request(a,g,m){return o(this,void 0,void 0,function*(){return typeof fetch=="function"?j._fetchRequest(a,g,m):typeof XMLHttpRequest=="function"?j._xhrRequest(a,g,m):(k.default("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"),Promise.reject("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"))})}static _fetchRequest(a,g,m){let N;const T={};let U;typeof AbortController=="function"&&(U=new AbortController);const H=fetch(g,{method:a,headers:m.headers,body:m.body,signal:U?U.signal:void 0}).then($=>{switch(k.default("[WireClient fetch]",$),$.headers.forEach((x,L)=>{T[L.toUpperCase()]=x}),N={readyState:4,status:$.status,statusText:$.statusText,response:void 0,getResponseHeader:x=>T[x.toUpperCase()]||null,responseType:m.responseType,responseURL:g},m.responseType){case"arraybuffer":return $.arrayBuffer();case"blob":return $.blob();case"json":return $.json();case void 0:case"":case"text":return $.text();default:throw new Error("responseType 'document' is not currently supported using fetch")}}).then($=>(N.response=$,m.responseType&&m.responseType!=="text"||(N.responseText=$),N)),G=new Promise(($,x)=>{setTimeout(()=>{x("timeout"),U&&U.abort()},y.default.requestTimeout)});return Promise.race([H,G])}static _xhrRequest(a,g,m){return new Promise((N,T)=>{k.default("[WireClient]",a,g);let U=!1;const H=setTimeout(()=>{U=!0,T("timeout")},y.default.requestTimeout),G=new XMLHttpRequest;if(G.open(a,g,!0),m.responseType&&(G.responseType=m.responseType),m.headers)for(const x in m.headers)G.setRequestHeader(x,m.headers[x]);G.onload=()=>{U||(clearTimeout(H),N(G))},G.onerror=x=>{U||(clearTimeout(H),T(x))};let $=m.body;typeof $=="object"&&!v($)&&$ instanceof ArrayBuffer&&($=new Uint8Array($)),G.send($)})}static _rs_init(a){a.remote=new j(a),a.remote.online=!0}static _rs_supported(){return typeof fetch=="function"||typeof XMLHttpRequest=="function"}static _rs_cleanup(){w&&delete localStorage[b]}}j.isArrayBufferView=v,P.applyMixins(j,[_.default]),r.exports=j}).call(this,s(5))},function(r,n,s){class i extends Error{constructor(l){super(),this.name="SyncError",this.message="Sync failed: ",typeof l=="string"?this.message+=l:(this.message+=l.message,this.stack=l.stack,this.originalError=l)}}r.exports=i},function(r,n,s){var i=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};const o=i(s(2)),l=i(s(3)),p=i(s(1)),_=s(0);class A{constructor(){this._updateNodesRunning=!1,this._updateNodesQueued=[]}get(S,v,M){return typeof v=="number"?this.getNodes(_.pathsFromRoot(S)).then(E=>{const j=y(E[S]);return k(E,v)?M(S):j?{statusCode:200,body:j.body||j.itemsMap,contentType:j.contentType}:{statusCode:404}}):this.getNodes([S]).then(E=>{const j=y(E[S]);if(j){if(_.isFolder(S))for(const O in j.itemsMap)j.itemsMap.hasOwnProperty(O)&&j.itemsMap[O]===!1&&delete j.itemsMap[O];return{statusCode:200,body:j.body||j.itemsMap,contentType:j.contentType}}return{statusCode:404}})}put(S,v,M){const E=_.pathsFromRoot(S);return this._updateNodes(E,function(j,O){try{for(let a=0,g=j.length;a<g;a++){const m=j[a];let N,T=O[m];T||(O[m]=T=P(m)),a===0?(N=y(T),T.local={body:v,contentType:M,previousBody:N?N.body:void 0,previousContentType:N?N.contentType:void 0}):T=w(T,j[a-1].substring(m.length))}return O}catch(a){throw p.default("[Cachinglayer] Error during PUT",O,a),a}})}delete(S){const v=_.pathsFromRoot(S);return this._updateNodes(v,function(M,E){for(let j=0,O=M.length;j<O;j++){const a=M[j],g=E[a];let m;if(g)if(j===0)m=y(g),g.local={body:!1,previousBody:m?m.body:void 0,previousContentType:m?m.contentType:void 0};else{g.local||(g.local=_.deepClone(g.common));const N=M[j-1].substring(a.length);if(delete g.local.itemsMap[N],Object.getOwnPropertyNames(g.local.itemsMap).length>0)break}else console.error("Cannot delete non-existing node "+a)}return E})}flush(S){return this._getAllDescendentPaths(S).then(v=>this.getNodes(v)).then(v=>{for(const M in v){const E=v[M];E&&E.common&&E.local&&this._emitChange({path:E.path,origin:"local",oldValue:E.local.body===!1?void 0:E.local.body,newValue:E.common.body===!1?void 0:E.common.body}),v[M]=void 0}return this.setNodes(v)})}_emitChange(S){l.default.changeEvents[S.origin]&&this._emit("change",S)}fireInitial(){l.default.changeEvents.local&&this.forAllNodes(S=>{if(_.isDocument(S.path)){const v=y(S);v&&this._emitChange({path:S.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:v.body,newContentType:v.contentType})}}).then(()=>{this._emit("local-events-done")})}onDiff(S){this.diffHandler=S}migrate(S){return typeof S!="object"||S.common||(S.common={},typeof S.path=="string"?S.path.substr(-1)==="/"&&typeof S.body=="object"&&(S.common.itemsMap=S.body):(S.local||(S.local={}),S.local.body=S.body,S.local.contentType=S.contentType)),S}_updateNodes(S,v){return new Promise((M,E)=>{this._doUpdateNodes(S,v,{resolve:M,reject:E})})}_doUpdateNodes(S,v,M){this._updateNodesRunning?this._updateNodesQueued.push({paths:S,cb:v,promise:M}):(this._updateNodesRunning=!0,this.getNodes(S).then(E=>{const j=_.deepClone(E),O=[];E=v(S,E);for(const a in E){const g=E[a];_.equal(g,j[a])?delete E[a]:_.isDocument(a)&&(_.equal(g.local.body,g.local.previousBody)&&g.local.contentType===g.local.previousContentType||O.push({path:a,origin:"window",oldValue:g.local.previousBody,newValue:g.local.body===!1?void 0:g.local.body,oldContentType:g.local.previousContentType,newContentType:g.local.contentType}),delete g.local.previousBody,delete g.local.previousContentType)}this.setNodes(E).then(()=>{this._emitChangeEvents(O),M.resolve({statusCode:200})})}).then(()=>Promise.resolve(),E=>{M.reject(E)}).then(()=>{this._updateNodesRunning=!1;const E=this._updateNodesQueued.shift();E&&this._doUpdateNodes(E.paths,E.cb,E.promise)}))}_emitChangeEvents(S){for(let v=0,M=S.length;v<M;v++)this._emitChange(S[v]),this.diffHandler&&this.diffHandler(S[v].path)}_getAllDescendentPaths(S){return _.isFolder(S)?this.getNodes([S]).then(v=>{const M=[S],E=y(v[S]),j=Object.keys(E.itemsMap).map(O=>this._getAllDescendentPaths(S+O).then(a=>{for(let g=0,m=a.length;g<m;g++)M.push(a[g])}));return Promise.all(j).then(()=>M)}):Promise.resolve([S])}_getInternals(){return{getLatest:y,makeNode:P,isOutdated:k}}}function y(b){if(typeof b=="object"&&typeof b.path=="string")if(_.isFolder(b.path)){if(b.local&&b.local.itemsMap)return b.local;if(b.common&&b.common.itemsMap)return b.common}else{if(b.local){if(b.local.body&&b.local.contentType)return b.local;if(b.local.body===!1)return}if(b.common&&b.common.body&&b.common.contentType)return b.common;if(b.body&&b.contentType)return{body:b.body,contentType:b.contentType}}}function k(b,S){for(const v in b){if(b[v]&&b[v].remote)return!0;const M=y(b[v]);if(M&&M.timestamp&&new Date().getTime()-M.timestamp<=S)return!1;if(!M)return!0}return!0}function P(b){const S={path:b,common:{}};return _.isFolder(b)&&(S.common.itemsMap={}),S}function w(b,S){return b.common||(b.common={itemsMap:{}}),b.common.itemsMap||(b.common.itemsMap={}),b.local||(b.local=_.deepClone(b.common)),b.local.itemsMap||(b.local.itemsMap=b.common.itemsMap),b.local.itemsMap[S]=!0,b}_.applyMixins(A,[o.default]),r.exports=A},function(r,n,s){r.exports=class{constructor(){this.reset()}static _rs_init(){}get scopes(){return Object.keys(this.scopeModeMap).map(i=>({name:i,mode:this.scopeModeMap[i]}))}get scopeParameter(){return this.scopes.map(i=>`${this._scopeNameForParameter(i)}:${i.mode}`).join(" ")}claim(i,o){if(typeof i!="string"||i.indexOf("/")!==-1||i.length===0)throw new Error("Scope should be a non-empty string without forward slashes");if(!o.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(i),this.scopeModeMap[i]=o}get(i){return this.scopeModeMap[i]}remove(i){const o={};for(const l in this.scopeModeMap)o[l]=this.scopeModeMap[l];this.reset(),delete o[i];for(const l in o)this.claim(l,o[l])}checkPermission(i,o){const l=this.get(i);return l&&(o==="r"||l==="rw")}checkPathPermission(i,o){if(this.checkPermission("*",o))return!0;const l=this._getModuleName(i);return!!this.checkPermission(l,o)}reset(){this.rootPaths=[],this.scopeModeMap={}}_getModuleName(i){if(i[0]!=="/")throw new Error("Path should start with a slash");const o=i.replace(/^\/public/,"").match(/^\/([^/]*)\//);return o?o[1]:"*"}_adjustRootPaths(i){"*"in this.scopeModeMap||i==="*"?this.rootPaths=["/"]:i in this.scopeModeMap||(this.rootPaths.push("/"+i+"/"),this.rootPaths.push("/public/"+i+"/"))}_scopeNameForParameter(i){if(i.name==="*"&&this.storageType){if(this.storageType==="2012.04")return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return i.name}setStorageType(i){this.storageType=i}}},function(r,n,s){var i=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};const o=s(0),l=i(s(1));r.exports=class{constructor(){this.pendingActivations=[],this.reset()}set(p,_){if(typeof p!="string")throw new Error("path should be a string");if(!o.isFolder(p))throw new Error("path should be a folder");if(!_.match(/^(FLUSH|SEEN|ALL)$/))throw new Error("strategy should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[p]=_,_==="ALL"&&(this.activateHandler?this.activateHandler(p):this.pendingActivations.push(p))}enable(p){this.set(p,"ALL")}disable(p){this.set(p,"FLUSH")}onActivate(p){l.default("[Caching] Setting activate handler",p,this.pendingActivations),this.activateHandler=p;for(let _=0;_<this.pendingActivations.length;_++)p(this.pendingActivations[_]);this.pendingActivations=[]}checkPath(p){return this._rootPaths[p]!==void 0?this._rootPaths[p]:p==="/"?"SEEN":this.checkPath(o.containingFolder(p))}reset(){this._rootPaths={}}static _rs_init(){}}},function(r,n,s){var i=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};const o=i(s(7)),l=i(s(8)),p=i(s(2)),_=s(0),A="https://www.googleapis.com",y="remotestorage:googledrive";let k;function P(j){return j.substr(-1)==="/"&&(j=j.substr(0,j.length-1)),decodeURIComponent(j)}function w(j){return j.replace(/[^\/]+\/?$/,"")}function b(j){const O=j.split("/");return j.substr(-1)==="/"?O[O.length-2]+"/":O[O.length-1]}function S(j){return _.cleanPath("/remotestorage/"+j)}function v(j){return j.replace(/^["'](.*)["']$/,"$1")}class M{constructor(O){this._items={},this.maxAge=O,this._items={}}get(O){const a=this._items[O],g=new Date().getTime();return a&&a.t>=g-this.maxAge?a.v:void 0}set(O,a){this._items[O]={v:a,t:new Date().getTime()}}}class E{constructor(O,a){if(this.connected=!1,this.online=!0,this.addEvents(["connected","not-connected"]),this.rs=O,this.clientId=a,this._fileIdCache=new M(300),k=_.localStorageAvailable(),k){const g=_.getJSONFromLocalStorage(y);g&&this.configure(g)}}configure(O){O.userAddress!==void 0&&(this.userAddress=O.userAddress),O.token!==void 0&&(this.token=O.token);const a=function(){k&&localStorage.setItem(y,JSON.stringify({userAddress:this.userAddress,token:this.token}))},g=function(){this.connected=!1,delete this.token,k&&localStorage.removeItem(y)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),a.apply(this)):this.info().then(m=>{this.userAddress=m.user.emailAddress,this._emit("connected"),a.apply(this)}).catch(()=>{g.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))})):g.apply(this)}connect(){this.rs.setBackend("googledrive"),this.rs.authorize({authURL:"https://accounts.google.com/o/oauth2/auth",scope:"https://www.googleapis.com/auth/drive",clientId:this.clientId})}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(O,a){return _.isFolder(O)?this._getFolder(S(O)):this._getFile(S(O),a)}put(O,a,g,m){const N=S(O);function T(U){if(U.status>=200&&U.status<300){const H=JSON.parse(U.responseText),G=v(H.etag);return Promise.resolve({statusCode:200,contentType:H.mimeType,revision:G})}return U.status===412?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+U.status+" ("+U.responseText+")")}return this._getFileId(N).then(U=>U?m&&m.ifNoneMatch==="*"?T({status:412}):this._updateFile(U,N,a,g,m).then(T):this._createFile(N,a,g).then(T))}delete(O,a){const g=S(O);return this._getFileId(g).then(m=>m?this._getMeta(m).then(N=>{let T;return typeof N=="object"&&typeof N.etag=="string"&&(T=v(N.etag)),a&&a.ifMatch&&a.ifMatch!==T?{statusCode:412,revision:T}:this._request("DELETE",A+"/drive/v2/files/"+m,{}).then(U=>U.status===200||U.status===204?{statusCode:200}:Promise.reject("Delete failed: "+U.status+" ("+U.responseText+")"))}):Promise.resolve({statusCode:200}))}info(){return this._request("GET","https://www.googleapis.com/drive/v2/about?fields=user",{}).then(function(O){try{const a=JSON.parse(O.responseText);return Promise.resolve(a)}catch(a){return Promise.reject(a)}})}_updateFile(O,a,g,m,N){const T={mimeType:m},U={"Content-Type":"application/json; charset=UTF-8"};return N&&N.ifMatch&&(U["If-Match"]='"'+N.ifMatch+'"'),this._request("PUT",A+"/upload/drive/v2/files/"+O+"?uploadType=resumable",{body:JSON.stringify(T),headers:U}).then(H=>H.status===412?H:this._request("PUT",H.getResponseHeader("Location"),{body:m.match(/^application\/json/)?JSON.stringify(g):g}))}_createFile(O,a,g){return this._getParentId(O).then(m=>{const N={title:P(b(O)),mimeType:g,parents:[{kind:"drive#fileLink",id:m}]};return this._request("POST",A+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(N),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(T=>this._request("POST",T.getResponseHeader("Location"),{body:g.match(/^application\/json/)?JSON.stringify(a):a}))})}_getFile(O,a){return this._getFileId(O).then(g=>this._getMeta(g).then(m=>{let N;if(typeof m=="object"&&typeof m.etag=="string"&&(N=v(m.etag)),a&&a.ifNoneMatch&&N===a.ifNoneMatch)return Promise.resolve({statusCode:304});if(!m.downloadUrl){if(!m.exportLinks||!m.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:m.mimeType,revision:N});m.mimeType+=";export=text/html",m.downloadUrl=m.exportLinks["text/html"]}return this._request("GET",m.downloadUrl,{responseType:"arraybuffer"}).then(T=>_.getTextFromArrayBuffer(T.response,"UTF-8").then(function(U){let H=U;if(m.mimeType.match(/^application\/json/))try{H=JSON.parse(H)}catch{}else _.shouldBeTreatedAsBinary(U,m.mimeType)&&(H=T.response);return{statusCode:200,body:H,contentType:m.mimeType,revision:N}}))}))}_getFolder(O){return this._getFileId(O).then(a=>{let g,m,N;if(!a)return Promise.resolve({statusCode:404});const T="'"+a+"' in parents";return this._request("GET",A+"/drive/v2/files?q="+encodeURIComponent(T)+"&fields="+encodeURIComponent("items(downloadUrl,etag,fileSize,id,mimeType,title,labels)")+"&maxResults=1000&trashed=false",{}).then(U=>{var H;if(U.status!==200)return Promise.reject("request failed or something: "+U.status);try{g=JSON.parse(U.responseText)}catch{return Promise.reject("non-JSON response from GoogleDrive")}N={};for(const G of g.items)!((H=G.labels)===null||H===void 0)&&H.trashed||(m=v(G.etag),G.mimeType==="application/vnd.google-apps.folder"?(this._fileIdCache.set(O+_.cleanPath(G.title)+"/",G.id),N[G.title+"/"]={ETag:m}):(this._fileIdCache.set(O+_.cleanPath(G.title),G.id),N[G.title]={ETag:m,"Content-Type":G.mimeType,"Content-Length":G.fileSize}));return Promise.resolve({statusCode:200,body:N,contentType:"application/json; charset=UTF-8",revision:void 0})})})}_getParentId(O){const a=w(O);return this._getFileId(a).then(g=>g?Promise.resolve(g):this._createFolder(a))}_createFolder(O){return this._getParentId(O).then(a=>this._request("POST",A+"/drive/v2/files",{body:JSON.stringify({title:P(b(O)),mimeType:"application/vnd.google-apps.folder",parents:[{id:a}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(g=>{const m=JSON.parse(g.responseText);return Promise.resolve(m.id)}))}_getFileId(O){let a;return O==="/"?Promise.resolve("root"):(a=this._fileIdCache.get(O))?Promise.resolve(a):this._getFolder(w(O)).then(()=>(a=this._fileIdCache.get(O),a?Promise.resolve(a):O.substr(-1)==="/"?this._createFolder(O).then(()=>this._getFileId(O)):Promise.resolve()))}_getMeta(O){return this._request("GET",A+"/drive/v2/files/"+O,{}).then(function(a){return a.status===200?Promise.resolve(JSON.parse(a.responseText)):Promise.reject("request (getting metadata for "+O+") failed with status: "+a.status)})}_request(O,a,g){return g.headers||(g.headers={}),g.headers.Authorization="Bearer "+this.token,this.rs._emit("wire-busy",{method:O,isFolder:_.isFolder(a)}),l.default.request.call(this,O,a,g).then(m=>m&&m.status===401?void this.connect():(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:O,isFolder:_.isFolder(a),success:!0}),Promise.resolve(m)),m=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:O,isFolder:_.isFolder(a),success:!1}),Promise.reject(m)))}static _rs_init(O){const a=O.apiKeys.googledrive;var g;a&&(O.googledrive=new E(O,a.clientId),O.backend==="googledrive"&&(O._origRemote=O.remote,O.remote=O.googledrive,(g=O)._origBaseClientGetItemURL||(g._origBaseClientGetItemURL=o.default.prototype.getItemURL,o.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Google Drive yet")})))}static _rs_supported(){return!0}static _rs_cleanup(O){var a;O.setBackend(void 0),O._origRemote&&(O.remote=O._origRemote,delete O._origRemote),(a=O)._origBaseClientGetItemURL&&(o.default.prototype.getItemURL=a._origBaseClientGetItemURL,delete a._origBaseClientGetItemURL)}}_.applyMixins(E,[p.default]),r.exports=E},function(r,n,s){var i=this&&this.__awaiter||function(g,m,N,T){return new(N||(N=Promise))(function(U,H){function G(L){try{x(T.next(L))}catch(h){H(h)}}function $(L){try{x(T.throw(L))}catch(h){H(h)}}function x(L){var h;L.done?U(L.value):(h=L.value,h instanceof N?h:new N(function(d){d(h)})).then(G,$)}x((T=T.apply(g,m||[])).next())})},o=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};const l=o(s(2)),p=o(s(8)),_=o(s(7)),A=o(s(26)),y=o(s(9)),k=o(s(4)),P=s(0);let w;const b="remotestorage:dropbox";function S(g){return P.cleanPath("/remotestorage/"+g).replace(/\/$/,"")}function v(g,m){return new RegExp("^"+m.join("\\/")+"(\\/|$)").test(g.error_summary)}function M(g){return g instanceof ArrayBuffer||p.default.isArrayBufferView(g)}class E{constructor(m){if(this.rs=m,this.connected=!1,this.online=!0,this._initialFetchDone=!1,this.addEvents(["connected","not-connected"]),this.clientId=m.apiKeys.dropbox.appKey,this._revCache=new A.default("rev"),this._fetchDeltaCursor=null,this._fetchDeltaPromise=null,this._itemRefs={},w=P.localStorageAvailable(),w){const N=P.getJSONFromLocalStorage(b);N&&this.configure(N),this._itemRefs=P.getJSONFromLocalStorage(b+":shares")||{}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}connect(){this.rs.setBackend("dropbox"),this.token?a(this.rs):this.rs.authorize({authURL:"https://www.dropbox.com/oauth2/authorize",scope:"",clientId:this.clientId})}configure(m){m.userAddress!==void 0&&(this.userAddress=m.userAddress),m.token!==void 0&&(this.token=m.token);const N=function(){w&&localStorage.setItem(b,JSON.stringify({userAddress:this.userAddress,token:this.token}))},T=function(){this.connected=!1,w&&localStorage.removeItem(b)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),N.apply(this)):this.info().then(function(U){this.userAddress=U.email,this._emit("connected"),N.apply(this)}.bind(this)).catch(function(){T.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))}.bind(this))):T.apply(this)}stopWaitingForToken(){this.connected||this._emit("not-connected")}_getFolder(m){const N=this._revCache,T=H=>{let G;if(H.status!==200&&H.status!==409)return Promise.reject("Unexpected response status: "+H.status);try{G=JSON.parse(H.responseText)}catch(x){return Promise.reject(x)}if(H.status===409)return v(G,["path","not_found"])?Promise.resolve({}):Promise.reject(new Error("API returned an error: "+G.error_summary));const $=G.entries.reduce((x,L)=>{const h=L[".tag"]==="folder",d=L.path_lower.split("/").slice(-1)[0]+(h?"/":"");return h?x[d]={ETag:N.get(m+d)}:(x[d]={ETag:L.rev},this._revCache.set(m+d,L.rev)),x},{});return G.has_more?U(G.cursor).then(function(x){return Object.assign($,x)}):Promise.resolve($)},U=H=>{const G={body:{cursor:H}};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder/continue",G).then(T)};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder",{body:{path:S(m)}}).then(T).then(function(H){return Promise.resolve({statusCode:200,body:H,contentType:"application/json; charset=UTF-8",revision:N.get(m)})})}get(m,N){if(!this.connected)return Promise.reject("not connected (path: "+m+")");const T=this._revCache.get(m);if(T===null)return Promise.resolve({statusCode:404});if(N&&N.ifNoneMatch){if(!this._initialFetchDone)return this.fetchDelta().then(()=>this.get(m,N));if(T&&T===N.ifNoneMatch)return Promise.resolve({statusCode:304})}if(m.substr(-1)==="/")return this._getFolder(m);const U={headers:{"Dropbox-API-Arg":JSON.stringify({path:S(m)})},responseType:"arraybuffer"};return N&&N.ifNoneMatch&&(U.headers["If-None-Match"]=N.ifNoneMatch),this._request("GET","https://content.dropboxapi.com/2/files/download",U).then(H=>{const G=H.status;let $,x,L,h;return G!==200&&G!==409?Promise.resolve({statusCode:G}):($=H.getResponseHeader("Dropbox-API-Result"),P.getTextFromArrayBuffer(H.response,"UTF-8").then(d=>{x=d,G===409&&($=x);try{$=JSON.parse($)}catch(I){return Promise.reject(I)}if(G===409)return v($,["path","not_found"])?{statusCode:404}:Promise.reject(new Error('API error while downloading file ("'+m+'"): '+$.error_summary));if(L=H.getResponseHeader("Content-Type"),h=$.rev,this._revCache.set(m,h),this._shareIfNeeded(m),P.shouldBeTreatedAsBinary(d,L))x=H.response;else try{x=JSON.parse(x),L="application/json; charset=UTF-8"}catch{}return{statusCode:G,body:x,contentType:L,revision:h}}))})}put(m,N,T,U){if(!this.connected)throw new Error("not connected (path: "+m+")");const H=this._revCache.get(m);if(U&&U.ifMatch&&H&&H!==U.ifMatch)return Promise.resolve({statusCode:412,revision:H});if(U&&U.ifNoneMatch==="*"&&H&&H!=="rev")return Promise.resolve({statusCode:412,revision:H});if(!T.match(/charset=/)&&M(N)&&(T+="; charset=binary"),N.length>157286400)return Promise.reject(new Error("Cannot upload file larger than 150MB"));let G;const $=U&&(U.ifMatch||U.ifNoneMatch==="*"),x={body:N,contentType:T,path:m};return G=$?this._getMetadata(m).then(L=>U&&U.ifNoneMatch==="*"&&L||U&&U.ifMatch&&L&&L.rev!==U.ifMatch?Promise.resolve({statusCode:412,revision:L.rev}):this._uploadSimple(x)):this._uploadSimple(x),G.then(L=>(this._shareIfNeeded(m),L))}delete(m,N){if(!this.connected)throw new Error("not connected (path: "+m+")");const T=this._revCache.get(m);return N&&N.ifMatch&&T&&N.ifMatch!==T?Promise.resolve({statusCode:412,revision:T}):N&&N.ifMatch?this._getMetadata(m).then(U=>N&&N.ifMatch&&U&&U.rev!==N.ifMatch?Promise.resolve({statusCode:412,revision:U.rev}):this._deleteSimple(m)):this._deleteSimple(m)}_shareIfNeeded(m){m.match(/^\/public\/.*[^/]$/)&&this._itemRefs[m]===void 0&&this.share(m)}share(m){const N={body:{path:S(m)}};return this._request("POST","https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings",N).then(T=>{if(T.status!==200&&T.status!==409)return Promise.reject(new Error("Invalid response status:"+T.status));let U;try{U=JSON.parse(T.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+T.responseText))}return T.status===409?v(U,["shared_link_already_exists"])?this._getSharedLink(m):Promise.reject(new Error("API error: "+U.error_summary)):Promise.resolve(U.url)}).then(T=>(this._itemRefs[m]=T,w&&localStorage.setItem(b+":shares",JSON.stringify(this._itemRefs)),Promise.resolve(T)),T=>(T.message='Sharing Dropbox file or folder ("'+m+'") failed: '+T.message,Promise.reject(T)))}info(){return this._request("POST","https://api.dropboxapi.com/2/users/get_current_account",{}).then(function(m){let N=m.responseText;try{N=JSON.parse(N)}catch{return Promise.reject(new Error("Could not query current account info: Invalid API response: "+N))}return Promise.resolve({email:N.email})})}_request(m,N,T){return T.headers||(T.headers={}),T.headers.Authorization="Bearer "+this.token,typeof T.body!="object"||M(T.body)||(T.body=JSON.stringify(T.body),T.headers["Content-Type"]="application/json; charset=UTF-8"),this.rs._emit("wire-busy",{method:m,isFolder:P.isFolder(N)}),p.default.request.call(this,m,N,T).then(U=>U&&U.status===503?(this.online&&(this.online=!1,this.rs._emit("network-offline")),setTimeout(this._request(m,N,T),3210)):(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:m,isFolder:P.isFolder(N),success:!0}),Promise.resolve(U)),U=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:m,isFolder:P.isFolder(N),success:!1}),Promise.reject(U)))}fetchDelta(...m){if(this._fetchDeltaPromise)return this._fetchDeltaPromise;const N=T=>{let U,H="https://api.dropboxapi.com/2/files/list_folder";return typeof T=="string"?(H+="/continue",U={cursor:T}):U={path:"/remotestorage",recursive:!0,include_deleted:!0},this._request("POST",H,{body:U}).then(G=>{if(G.status===401)return this.rs._emit("error",new k.default),Promise.resolve(m);if(G.status!==200&&G.status!==409)return Promise.reject(new Error("Invalid response status: "+G.status));let $;try{$=JSON.parse(G.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+G.responseText))}if(G.status===409){if(!v($,["path","not_found"]))return Promise.reject(new Error("API returned an error: "+$.error_summary));$={cursor:null,entries:[],has_more:!1}}if(T||this._revCache.deactivatePropagation(),$.entries.forEach(x=>{const L=x.path_lower.substr(14);x[".tag"]==="deleted"?(this._revCache.delete(L),this._revCache.delete(L+"/")):x[".tag"]==="file"&&this._revCache.set(L,x.rev)}),this._fetchDeltaCursor=$.cursor,$.has_more)return N($.cursor);this._revCache.activatePropagation(),this._initialFetchDone=!0}).catch(G=>G==="timeout"||G instanceof ProgressEvent?Promise.resolve():Promise.reject(G))};return this._fetchDeltaPromise=N(this._fetchDeltaCursor).catch(T=>(typeof T=="object"&&"message"in T?T.message="Dropbox: fetchDelta: "+T.message:T="Dropbox: fetchDelta: "+T,this._fetchDeltaPromise=null,Promise.reject(T))).then(()=>(this._fetchDeltaPromise=null,Promise.resolve(m))),this._fetchDeltaPromise}_getMetadata(m){const N={path:S(m)};return this._request("POST","https://api.dropboxapi.com/2/files/get_metadata",{body:N}).then(T=>{if(T.status!==200&&T.status!==409)return Promise.reject(new Error("Invalid response status:"+T.status));let U;try{U=JSON.parse(T.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+T.responseText))}return T.status===409?v(U,["path","not_found"])?Promise.resolve():Promise.reject(new Error("API error: "+U.error_summary)):Promise.resolve(U)}).then(void 0,T=>(T.message='Could not load metadata for file or folder ("'+m+'"): '+T.message,Promise.reject(T)))}_uploadSimple(m){const N={path:S(m.path),mode:{".tag":"overwrite",update:void 0},mute:!0};return m.ifMatch&&(N.mode={".tag":"update",update:m.ifMatch}),this._request("POST","https://content.dropboxapi.com/2/files/upload",{body:m.body,headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":JSON.stringify(N)}}).then(T=>{if(T.status!==200&&T.status!==409)return Promise.resolve({statusCode:T.status});let U=T.responseText;try{U=JSON.parse(U)}catch{return Promise.reject(new Error("Invalid API result: "+U))}return T.status===409?v(U,["path","conflict"])?this._getMetadata(m.path).then(function(H){return Promise.resolve({statusCode:412,revision:H.rev})}):Promise.reject(new Error("API error: "+U.error_summary)):(this._revCache.set(m.path,U.rev),Promise.resolve({statusCode:T.status,revision:U.rev}))})}_deleteSimple(m){const N={path:S(m)};return this._request("POST","https://api.dropboxapi.com/2/files/delete",{body:N}).then(T=>{if(T.status!==200&&T.status!==409)return Promise.resolve({statusCode:T.status});let U=T.responseText;try{U=JSON.parse(U)}catch{return Promise.reject(new Error("Invalid response body: "+U))}return T.status===409?v(U,["path_lookup","not_found"])?Promise.resolve({statusCode:404}):Promise.reject(new Error("API error: "+U.error_summary)):Promise.resolve({statusCode:200})}).then(T=>(T.statusCode!==200&&T.statusCode!==404||(this._revCache.delete(m),delete this._itemRefs[m]),Promise.resolve(T)),T=>(T.message='Could not delete Dropbox file or folder ("'+m+'"): '+T.message,Promise.reject(T)))}_getSharedLink(m){return i(this,void 0,void 0,function*(){const N={body:{path:S(m),direct_only:!0}};return this._request("POST","https://api.dropbox.com/2/sharing/list_shared_links",N).then(T=>{if(T.status!==200&&T.status!==409)return Promise.reject(new Error("Invalid response status: "+T.status));let U;try{U=JSON.parse(T.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+T.responseText))}return T.status===409?Promise.reject(new Error("API error: "+T.error_summary)):U.links.length?Promise.resolve(U.links[0].url):Promise.reject(new Error("No links returned"))},T=>(T.message='Could not get link to a shared file or folder ("'+m+'"): '+T.message,Promise.reject(T)))})}static _rs_init(m){w=P.localStorageAvailable(),m.apiKeys.dropbox&&(m.dropbox=new E(m)),m.backend==="dropbox"&&a(m)}static _rs_supported(){return!0}static _rs_cleanup(m){(function(N){(function(T){T._origRemote&&(T.remote=T._origRemote,delete T._origRemote)})(N),function(T){!T._dropboxOrigSync||(T.sync.sync=T._dropboxOrigSync,delete T._dropboxOrigSync)}(N),function(T){!T._origBaseClientGetItemURL||(_.default.prototype.getItemURL=T._origBaseClientGetItemURL,delete T._origBaseClientGetItemURL)}(N),O(N)})(m),w&&localStorage.removeItem(b),m.setBackend(void 0)}}function j(g,...m){g._dropboxOrigSync||(g._dropboxOrigSync=g.sync.sync.bind(g.sync),g.sync.sync=function(){return this.dropbox.fetchDelta(g,...m).then(g._dropboxOrigSync,function(N){g._emit("error",new y.default(N)),g._emit("sync-done")})}.bind(g))}function O(g){g._dropboxOrigSyncCycle&&(g.syncCycle=g._dropboxOrigSyncCycle,delete g._dropboxOrigSyncCycle)}function a(g){(function(m){m._origRemote||(m._origRemote=m.remote,m.remote=m.dropbox)})(g),g.sync?j(g):function(m,...N){m._dropboxOrigSyncCycle||(m._dropboxOrigSyncCycle=m.syncCycle,m.syncCycle=()=>{if(!m.sync)throw new Error("expected sync to be initialized by now");j(m),m._dropboxOrigSyncCycle(m,...N),O(m)})}(g),function(m){m._origBaseClientGetItemURL||(m._origBaseClientGetItemURL=_.default.prototype.getItemURL,_.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Dropbox yet")})}(g)}P.applyMixins(E,[l.default]),r.exports=E},function(r,n,s){var i=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};const o=i(s(27)),l=i(s(1)),p=s(0);let _,A,y={};const k=function(P){return new Promise((w,b)=>P in y?w(y[P]):new o.default({tls_only:!1,uri_fallback:!0,request_timeout:5e3}).lookup(P,function(S,v){if(S)return b(S);if(typeof v.idx.links.remotestorage!="object"||typeof v.idx.links.remotestorage.length!="number"||v.idx.links.remotestorage.length<=0)return l.default("[Discover] WebFinger record for "+P+" does not have remotestorage defined in the links section ",JSON.stringify(v.json)),b("WebFinger record for "+P+" does not have remotestorage defined in the links section.");const M=v.idx.links.remotestorage[0],E=M.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||M.properties["auth-endpoint"],j=M.properties["http://remotestorage.io/spec/version"]||M.type;return y[P]={href:M.href,storageApi:j,authURL:E,properties:M.properties},A&&(localStorage["remotestorage:discover"]=JSON.stringify({cache:y})),w(y[P])}))};(k.DiscoveryError=function(P){this.name="DiscoveryError",this.message=P,this.stack=new Error().stack}).prototype=Object.create(Error.prototype),k.DiscoveryError.prototype.constructor=k.DiscoveryError,k._rs_init=function(){if(A=p.localStorageAvailable(),A)try{y=JSON.parse(localStorage["remotestorage:discover"]).cache}catch{}},k._rs_supported=function(){return _=Object.prototype.hasOwnProperty.call(p.globalContext,"XMLHttpRequest"),_},k._rs_cleanup=function(){A&&delete localStorage["remotestorage:discover"]},r.exports=k},function(r,n,s){const i=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(s(2)),o=s(0);class l{constructor(){this.addEvents(["background","foreground"]),this.mode=typeof window!="undefined"?"browser":"node",this.mode==="browser"&&(this.setBrowserPrefixedNames(),document.addEventListener(this.visibilityChangeEvent,this.setVisibility.bind(this),!1),this.setVisibility())}setBrowserPrefixedNames(){this.mode==="browser"&&(document.hidden!==void 0?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):document.mozHidden!==void 0?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange"):document.msHidden!==void 0?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):document.webkitHidden!==void 0&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"))}setVisibility(){document[this.hiddenProperty]?this.goBackground():this.goForeground()}isBrowser(){return this.mode==="browser"}isNode(){return this.mode==="node"}goBackground(){this._emit("background")}goForeground(){this._emit("foreground")}static _rs_init(){}static _rs_cleanup(){}}o.applyMixins(l,[i.default]),r.exports=l},function(r,n,s){r.exports=s(18)},function(r,n,s){var i=this&&this.__createBinding||(Object.create?function($,x,L,h){h===void 0&&(h=L),Object.defineProperty($,h,{enumerable:!0,get:function(){return x[L]}})}:function($,x,L,h){h===void 0&&(h=L),$[h]=x[L]}),o=this&&this.__setModuleDefault||(Object.create?function($,x){Object.defineProperty($,"default",{enumerable:!0,value:x})}:function($,x){$.default=x}),l=this&&this.__importStar||function($){if($&&$.__esModule)return $;var x={};if($!=null)for(var L in $)L!=="default"&&Object.hasOwnProperty.call($,L)&&i(x,$,L);return o(x,$),x},p=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};const _=p(s(3)),A=p(s(1)),y=s(0),k=p(s(11)),P=p(s(6)),w=p(s(7)),b=p(s(12)),S=p(s(2)),v=p(s(13)),M=p(s(14)),E=p(s(15)),j=p(s(9)),O=p(s(4)),a=p(s(29)),g=l(s(0)),m=y.getGlobalContext();let N;function T($){return $.statusCode!==403&&$.statusCode!==401||this._emit("error",new O.default),Promise.resolve($)}function U($){return typeof $=="number"&&$>=2e3&&$<=36e5}class H{constructor(x){this._pending=[],this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this._init=a.default.loadFeatures,this.features=a.default.features,this.loadFeature=a.default.loadFeature,this.featureSupported=a.default.featureSupported,this.featureDone=a.default.featureDone,this.featuresDone=a.default.featuresDone,this.featuresLoaded=a.default.featuresLoaded,this.featureInitialized=a.default.featureInitialized,this.featureFailed=a.default.featureFailed,this.hasFeature=a.default.hasFeature,this._setCachingModule=a.default._setCachingModule,this._collectCleanupFunctions=a.default._collectCleanupFunctions,this._fireReady=a.default._fireReady,this.initFeature=a.default.initFeature,typeof x=="object"&&y.extend(_.default,x),this.addEvents(["ready","authing","connecting","connected","disconnected","not-connected","conflict","error","features-loaded","sync-interval-change","sync-req-done","sync-done","wire-busy","wire-done","network-offline","network-online"]),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")}),N=y.localStorageAvailable(),N&&(this.apiKeys=y.getJSONFromLocalStorage("remotestorage:api-keys")||{},this.setBackend(localStorage.getItem("remotestorage:backend")||"remotestorage"));const L=this.on;this.on=function(h,d){if(this._allLoaded)switch(h){case"features-loaded":setTimeout(d,0);break;case"ready":this.remote&&setTimeout(d,0);break;case"connected":this.remote&&this.remote.connected&&setTimeout(d,0);break;case"not-connected":this.remote&&!this.remote.connected&&setTimeout(d,0)}return L.call(this,h,d)},this._init(),this.fireInitial=function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}.bind(this),this.on("ready",this.fireInitial.bind(this)),this.loadModules()}get connected(){return this.remote.connected}loadModules(){_.default.modules.forEach(this.addModule.bind(this))}authorize(x){if(this.access.setStorageType(this.remote.storageApi),x.scope===void 0&&(x.scope=this.access.scopeParameter),m.cordova)x.redirectUri=_.default.cordovaRedirectUri;else{const L=P.default.getLocation();let h=L.origin;L.pathname!=="/"&&(h+=L.pathname),x.redirectUri=h}x.clientId===void 0&&(x.clientId=x.redirectUri.match(/^(https?:\/\/[^/]+)/)[0]),P.default.authorize(this,x)}impliedauth(x,L){x=x||this.remote.storageApi,L=L||String(document.location),A.default("ImpliedAuth proceeding due to absent authURL; storageApi = "+x+" redirectUri = "+L),this.remote.configure({token:P.default.IMPLIED_FAKE_TOKEN}),document.location.href=L}connect(x,L){if(this.setBackend("remotestorage"),x.indexOf("@")<0&&!x.match(/^(https?:\/\/)?[^\s\/$\.?#]+\.[^\s]*$/))return void this._emit("error",new H.DiscoveryError("Not a valid user address or URL."));if(x.indexOf("@")<0&&!x.match(/^https?:\/\//)&&(x="https://"+x),m.cordova){if(typeof _.default.cordovaRedirectUri!="string")return void this._emit("error",new H.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));if(!m.cordova.InAppBrowser)return void this._emit("error",new H.DiscoveryError("Please include the InAppBrowser Cordova plugin to enable OAuth"))}this.remote.configure({userAddress:x}),this._emit("connecting");const h=setTimeout(()=>{this._emit("error",new H.DiscoveryError("No storage information found for this user address."))},_.default.discoveryTimeout);E.default(x).then(d=>{if(clearTimeout(h),this._emit("authing"),d.userAddress=x,this.remote.configure(d),!this.remote.connected)if(d.authURL)if(L===void 0)this.authorize({authURL:d.authURL});else{if(typeof L!="string")throw new Error("Supplied bearer token must be a string");A.default("Skipping authorization sequence and connecting with known token"),this.remote.configure({token:L})}else this.impliedauth()},()=>{clearTimeout(h),this._emit("error",new H.DiscoveryError("No storage information found for this user address."))})}reconnect(){this.remote.configure({token:null}),this.backend==="remotestorage"?this.connect(this.remote.userAddress):this.remote.connect()}disconnect(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")});const x=this._cleanups.length;let L=0;const h=()=>{L++,L>=x&&(this._init(),this._emit("disconnected"))};x>0?this._cleanups.forEach(d=>{const I=d(this);typeof I=="object"&&typeof I.then=="function"?I.then(h):h()}):h()}setBackend(x){this.backend=x,N&&(x?localStorage.setItem("remotestorage:backend",x):localStorage.removeItem("remotestorage:backend"))}onChange(x,L){this._pathHandlers.change[x]||(this._pathHandlers.change[x]=[]),this._pathHandlers.change[x].push(L)}enableLog(){_.default.logging=!0}disableLog(){_.default.logging=!1}log(...x){A.default.apply(H,x)}setApiKeys(x){const L=[G.GOOGLE,G.DROPBOX];if(typeof x!="object"||!Object.keys(x).every(h=>L.includes(h)))return console.error("setApiKeys() was called with invalid arguments"),!1;Object.keys(x).forEach(h=>{const d=x[h];if(d){switch(h){case G.DROPBOX:this.apiKeys[G.DROPBOX]={appKey:d},this.dropbox!==void 0&&this.dropbox.clientId===d||M.default._rs_init(this);break;case G.GOOGLE:this.apiKeys[G.GOOGLE]={clientId:d},this.googledrive!==void 0&&this.googledrive.clientId===d||v.default._rs_init(this)}return!0}delete this.apiKeys[h]}),N&&localStorage.setItem("remotestorage:api-keys",JSON.stringify(this.apiKeys))}setCordovaRedirectUri(x){if(typeof x!="string"||!x.match(/http(s)?:\/\//))throw new Error("Cordova redirect URI must be a URI string");_.default.cordovaRedirectUri=x}_setGPD(x,L){function h(d){return function(...I){return d.apply(L,I).then(T.bind(this))}}this.get=h(x.get),this.put=h(x.put),this.delete=h(x.delete)}_pendingGPD(x){return(...L)=>{const h=Array.prototype.slice.call(L);return new Promise((d,I)=>{this._pending.push({method:x,args:h,promise:{resolve:d,reject:I}})})}}_processPending(){this._pending.forEach(x=>{try{this[x.method](...x.args).then(x.promise.resolve,x.promise.reject)}catch(L){x.promise.reject(L)}}),this._pending=[]}_bindChange(x){x.on("change",this._dispatchEvent.bind(this,"change"))}_dispatchEvent(x,L){Object.keys(this._pathHandlers[x]).forEach(h=>{const d=h.length;L.path.substr(0,d)===h&&this._pathHandlers[x][h].forEach(I=>{const D={};for(const R in L)D[R]=L[R];D.relativePath=L.path.replace(new RegExp("^"+h),"");try{I(D)}catch(R){console.error("'change' handler failed: ",R,R.stack),this._emit("error",R)}})})}scope(x){if(typeof x!="string")throw"Argument 'path' of baseClient.scope must be a string";return this.access.checkPathPermission(x,"r")||console.warn("WARNING: Please use remoteStorage.access.claim() to ask for access permissions first: https://remotestoragejs.readthedocs.io/en/latest/js-api/access.html#claim"),new w.default(this,x)}getSyncInterval(){return _.default.syncInterval}setSyncInterval(x){if(!U(x))throw x+" is not a valid sync interval";const L=_.default.syncInterval;_.default.syncInterval=x,this._emit("sync-interval-change",{oldValue:L,newValue:x})}getBackgroundSyncInterval(){return _.default.backgroundSyncInterval}setBackgroundSyncInterval(x){if(!U(x))throw x+" is not a valid sync interval";const L=_.default.backgroundSyncInterval;_.default.backgroundSyncInterval=x,this._emit("sync-interval-change",{oldValue:L,newValue:x})}getCurrentSyncInterval(){return _.default.isBackground?_.default.backgroundSyncInterval:_.default.syncInterval}getRequestTimeout(){return _.default.requestTimeout}setRequestTimeout(x){if(typeof x!="number")throw x+" is not a valid request timeout";_.default.requestTimeout=x}syncCycle(){this.sync&&!this.sync.stopped&&(this.on("sync-done",()=>{this.sync&&!this.sync.stopped&&(this._syncTimer&&(clearTimeout(this._syncTimer),this._syncTimer=void 0),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}),this.sync.sync())}startSync(){return _.default.cache?(this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()):(console.warn("Nothing to sync, because caching is disabled."),Promise.resolve())}stopSync(){clearTimeout(this._syncTimer),this._syncTimer=void 0,this.sync?this.sync.stopped=!0:this.syncStopped=!0}addModule(x){const L=x.name,h=x.builder;if(Object.defineProperty(this,L,{configurable:!0,get:function(){const d=this._loadModule(L,h);return Object.defineProperty(this,L,{value:d}),d}}),L.indexOf("-")!==-1){const d=L.replace(/\-[a-z]/g,function(I){return I[1].toUpperCase()});Object.defineProperty(this,d,{get:function(){return this[L]}})}}_loadModule(x,L){if(L)return L(new w.default(this,"/"+x+"/"),new w.default(this,"/public/"+x+"/")).exports;throw"Unknown module: "+x}}var G;H.Authorize=P.default,H.SyncError=j.default,H.Unauthorized=O.default,H.DiscoveryError=E.default.DiscoveryError,H.util=g,Object.defineProperty(H.prototype,"access",{get:function(){const $=new k.default;return Object.defineProperty(this,"access",{value:$}),$},configurable:!0}),Object.defineProperty(H.prototype,"caching",{configurable:!0,get:function(){const $=new b.default;return Object.defineProperty(this,"caching",{value:$}),$}}),y.applyMixins(H,[S.default]),function($){$.GOOGLE="googledrive",$.DROPBOX="dropbox"}(G||(G={})),r.exports=H},function(r,n,s){(function(i){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var o=s(20),l=s(21),p=s(22);function _(){return y.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function A(u,f){if(_()<f)throw new RangeError("Invalid typed array length");return y.TYPED_ARRAY_SUPPORT?(u=new Uint8Array(f)).__proto__=y.prototype:(u===null&&(u=new y(f)),u.length=f),u}function y(u,f,c){if(!(y.TYPED_ARRAY_SUPPORT||this instanceof y))return new y(u,f,c);if(typeof u=="number"){if(typeof f=="string")throw new Error("If encoding is specified then the first argument must be a string");return w(this,u)}return k(this,u,f,c)}function k(u,f,c,C){if(typeof f=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&f instanceof ArrayBuffer?function(F,B,Y,oe){if(B.byteLength,Y<0||B.byteLength<Y)throw new RangeError("'offset' is out of bounds");if(B.byteLength<Y+(oe||0))throw new RangeError("'length' is out of bounds");return B=Y===void 0&&oe===void 0?new Uint8Array(B):oe===void 0?new Uint8Array(B,Y):new Uint8Array(B,Y,oe),y.TYPED_ARRAY_SUPPORT?(F=B).__proto__=y.prototype:F=b(F,B),F}(u,f,c,C):typeof f=="string"?function(F,B,Y){if(typeof Y=="string"&&Y!==""||(Y="utf8"),!y.isEncoding(Y))throw new TypeError('"encoding" must be a valid string encoding');var oe=0|v(B,Y),fe=(F=A(F,oe)).write(B,Y);return fe!==oe&&(F=F.slice(0,fe)),F}(u,f,c):function(F,B){if(y.isBuffer(B)){var Y=0|S(B.length);return(F=A(F,Y)).length===0||B.copy(F,0,0,Y),F}if(B){if(typeof ArrayBuffer!="undefined"&&B.buffer instanceof ArrayBuffer||"length"in B)return typeof B.length!="number"||(oe=B.length)!=oe?A(F,0):b(F,B);if(B.type==="Buffer"&&p(B.data))return b(F,B.data)}var oe;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(u,f)}function P(u){if(typeof u!="number")throw new TypeError('"size" argument must be a number');if(u<0)throw new RangeError('"size" argument must not be negative')}function w(u,f){if(P(f),u=A(u,f<0?0:0|S(f)),!y.TYPED_ARRAY_SUPPORT)for(var c=0;c<f;++c)u[c]=0;return u}function b(u,f){var c=f.length<0?0:0|S(f.length);u=A(u,c);for(var C=0;C<c;C+=1)u[C]=255&f[C];return u}function S(u){if(u>=_())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_().toString(16)+" bytes");return 0|u}function v(u,f){if(y.isBuffer(u))return u.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(u)||u instanceof ArrayBuffer))return u.byteLength;typeof u!="string"&&(u=""+u);var c=u.length;if(c===0)return 0;for(var C=!1;;)switch(f){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return de(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return he(u).length;default:if(C)return de(u).length;f=(""+f).toLowerCase(),C=!0}}function M(u,f,c){var C=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0)<=(f>>>=0))return"";for(u||(u="utf8");;)switch(u){case"hex":return L(this,f,c);case"utf8":case"utf-8":return G(this,f,c);case"ascii":return $(this,f,c);case"latin1":case"binary":return x(this,f,c);case"base64":return H(this,f,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h(this,f,c);default:if(C)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),C=!0}}function E(u,f,c){var C=u[f];u[f]=u[c],u[c]=C}function j(u,f,c,C,F){if(u.length===0)return-1;if(typeof c=="string"?(C=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,isNaN(c)&&(c=F?0:u.length-1),c<0&&(c=u.length+c),c>=u.length){if(F)return-1;c=u.length-1}else if(c<0){if(!F)return-1;c=0}if(typeof f=="string"&&(f=y.from(f,C)),y.isBuffer(f))return f.length===0?-1:O(u,f,c,C,F);if(typeof f=="number")return f&=255,y.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(u,f,c):Uint8Array.prototype.lastIndexOf.call(u,f,c):O(u,[f],c,C,F);throw new TypeError("val must be string, number or Buffer")}function O(u,f,c,C,F){var B,Y=1,oe=u.length,fe=f.length;if(C!==void 0&&((C=String(C).toLowerCase())==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(u.length<2||f.length<2)return-1;Y=2,oe/=2,fe/=2,c/=2}function ce(Ge,wt){return Y===1?Ge[wt]:Ge.readUInt16BE(wt*Y)}if(F){var re=-1;for(B=c;B<oe;B++)if(ce(u,B)===ce(f,re===-1?0:B-re)){if(re===-1&&(re=B),B-re+1===fe)return re*Y}else re!==-1&&(B-=B-re),re=-1}else for(c+fe>oe&&(c=oe-fe),B=c;B>=0;B--){for(var Re=!0,Me=0;Me<fe;Me++)if(ce(u,B+Me)!==ce(f,Me)){Re=!1;break}if(Re)return B}return-1}function a(u,f,c,C){c=Number(c)||0;var F=u.length-c;C?(C=Number(C))>F&&(C=F):C=F;var B=f.length;if(B%2!=0)throw new TypeError("Invalid hex string");C>B/2&&(C=B/2);for(var Y=0;Y<C;++Y){var oe=parseInt(f.substr(2*Y,2),16);if(isNaN(oe))return Y;u[c+Y]=oe}return Y}function g(u,f,c,C){return ae(de(f,u.length-c),u,c,C)}function m(u,f,c,C){return ae(function(F){for(var B=[],Y=0;Y<F.length;++Y)B.push(255&F.charCodeAt(Y));return B}(f),u,c,C)}function N(u,f,c,C){return m(u,f,c,C)}function T(u,f,c,C){return ae(he(f),u,c,C)}function U(u,f,c,C){return ae(function(F,B){for(var Y,oe,fe,ce=[],re=0;re<F.length&&!((B-=2)<0);++re)Y=F.charCodeAt(re),oe=Y>>8,fe=Y%256,ce.push(fe),ce.push(oe);return ce}(f,u.length-c),u,c,C)}function H(u,f,c){return f===0&&c===u.length?o.fromByteArray(u):o.fromByteArray(u.slice(f,c))}function G(u,f,c){c=Math.min(u.length,c);for(var C=[],F=f;F<c;){var B,Y,oe,fe,ce=u[F],re=null,Re=ce>239?4:ce>223?3:ce>191?2:1;if(F+Re<=c)switch(Re){case 1:ce<128&&(re=ce);break;case 2:(192&(B=u[F+1]))==128&&(fe=(31&ce)<<6|63&B)>127&&(re=fe);break;case 3:B=u[F+1],Y=u[F+2],(192&B)==128&&(192&Y)==128&&(fe=(15&ce)<<12|(63&B)<<6|63&Y)>2047&&(fe<55296||fe>57343)&&(re=fe);break;case 4:B=u[F+1],Y=u[F+2],oe=u[F+3],(192&B)==128&&(192&Y)==128&&(192&oe)==128&&(fe=(15&ce)<<18|(63&B)<<12|(63&Y)<<6|63&oe)>65535&&fe<1114112&&(re=fe)}re===null?(re=65533,Re=1):re>65535&&(re-=65536,C.push(re>>>10&1023|55296),re=56320|1023&re),C.push(re),F+=Re}return function(Me){var Ge=Me.length;if(Ge<=4096)return String.fromCharCode.apply(String,Me);for(var wt="",lr=0;lr<Ge;)wt+=String.fromCharCode.apply(String,Me.slice(lr,lr+=4096));return wt}(C)}n.Buffer=y,n.SlowBuffer=function(u){return+u!=u&&(u=0),y.alloc(+u)},n.INSPECT_MAX_BYTES=50,y.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var u=new Uint8Array(1);return u.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},u.foo()===42&&typeof u.subarray=="function"&&u.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=_(),y.poolSize=8192,y._augment=function(u){return u.__proto__=y.prototype,u},y.from=function(u,f,c){return k(null,u,f,c)},y.TYPED_ARRAY_SUPPORT&&(y.prototype.__proto__=Uint8Array.prototype,y.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&y[Symbol.species]===y&&Object.defineProperty(y,Symbol.species,{value:null,configurable:!0})),y.alloc=function(u,f,c){return function(C,F,B,Y){return P(F),F<=0?A(C,F):B!==void 0?typeof Y=="string"?A(C,F).fill(B,Y):A(C,F).fill(B):A(C,F)}(null,u,f,c)},y.allocUnsafe=function(u){return w(null,u)},y.allocUnsafeSlow=function(u){return w(null,u)},y.isBuffer=function(u){return!(u==null||!u._isBuffer)},y.compare=function(u,f){if(!y.isBuffer(u)||!y.isBuffer(f))throw new TypeError("Arguments must be Buffers");if(u===f)return 0;for(var c=u.length,C=f.length,F=0,B=Math.min(c,C);F<B;++F)if(u[F]!==f[F]){c=u[F],C=f[F];break}return c<C?-1:C<c?1:0},y.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(u,f){if(!p(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return y.alloc(0);var c;if(f===void 0)for(f=0,c=0;c<u.length;++c)f+=u[c].length;var C=y.allocUnsafe(f),F=0;for(c=0;c<u.length;++c){var B=u[c];if(!y.isBuffer(B))throw new TypeError('"list" argument must be an Array of Buffers');B.copy(C,F),F+=B.length}return C},y.byteLength=v,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var u=this.length;if(u%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var f=0;f<u;f+=2)E(this,f,f+1);return this},y.prototype.swap32=function(){var u=this.length;if(u%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var f=0;f<u;f+=4)E(this,f,f+3),E(this,f+1,f+2);return this},y.prototype.swap64=function(){var u=this.length;if(u%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var f=0;f<u;f+=8)E(this,f,f+7),E(this,f+1,f+6),E(this,f+2,f+5),E(this,f+3,f+4);return this},y.prototype.toString=function(){var u=0|this.length;return u===0?"":arguments.length===0?G(this,0,u):M.apply(this,arguments)},y.prototype.equals=function(u){if(!y.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u||y.compare(this,u)===0},y.prototype.inspect=function(){var u="",f=n.INSPECT_MAX_BYTES;return this.length>0&&(u=this.toString("hex",0,f).match(/.{2}/g).join(" "),this.length>f&&(u+=" ... ")),"<Buffer "+u+">"},y.prototype.compare=function(u,f,c,C,F){if(!y.isBuffer(u))throw new TypeError("Argument must be a Buffer");if(f===void 0&&(f=0),c===void 0&&(c=u?u.length:0),C===void 0&&(C=0),F===void 0&&(F=this.length),f<0||c>u.length||C<0||F>this.length)throw new RangeError("out of range index");if(C>=F&&f>=c)return 0;if(C>=F)return-1;if(f>=c)return 1;if(this===u)return 0;for(var B=(F>>>=0)-(C>>>=0),Y=(c>>>=0)-(f>>>=0),oe=Math.min(B,Y),fe=this.slice(C,F),ce=u.slice(f,c),re=0;re<oe;++re)if(fe[re]!==ce[re]){B=fe[re],Y=ce[re];break}return B<Y?-1:Y<B?1:0},y.prototype.includes=function(u,f,c){return this.indexOf(u,f,c)!==-1},y.prototype.indexOf=function(u,f,c){return j(this,u,f,c,!0)},y.prototype.lastIndexOf=function(u,f,c){return j(this,u,f,c,!1)},y.prototype.write=function(u,f,c,C){if(f===void 0)C="utf8",c=this.length,f=0;else if(c===void 0&&typeof f=="string")C=f,c=this.length,f=0;else{if(!isFinite(f))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");f|=0,isFinite(c)?(c|=0,C===void 0&&(C="utf8")):(C=c,c=void 0)}var F=this.length-f;if((c===void 0||c>F)&&(c=F),u.length>0&&(c<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");for(var B=!1;;)switch(C){case"hex":return a(this,u,f,c);case"utf8":case"utf-8":return g(this,u,f,c);case"ascii":return m(this,u,f,c);case"latin1":case"binary":return N(this,u,f,c);case"base64":return T(this,u,f,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,u,f,c);default:if(B)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),B=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(u,f,c){var C="";c=Math.min(u.length,c);for(var F=f;F<c;++F)C+=String.fromCharCode(127&u[F]);return C}function x(u,f,c){var C="";c=Math.min(u.length,c);for(var F=f;F<c;++F)C+=String.fromCharCode(u[F]);return C}function L(u,f,c){var C=u.length;(!f||f<0)&&(f=0),(!c||c<0||c>C)&&(c=C);for(var F="",B=f;B<c;++B)F+=ie(u[B]);return F}function h(u,f,c){for(var C=u.slice(f,c),F="",B=0;B<C.length;B+=2)F+=String.fromCharCode(C[B]+256*C[B+1]);return F}function d(u,f,c){if(u%1!=0||u<0)throw new RangeError("offset is not uint");if(u+f>c)throw new RangeError("Trying to access beyond buffer length")}function I(u,f,c,C,F,B){if(!y.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>F||f<B)throw new RangeError('"value" argument is out of bounds');if(c+C>u.length)throw new RangeError("Index out of range")}function D(u,f,c,C){f<0&&(f=65535+f+1);for(var F=0,B=Math.min(u.length-c,2);F<B;++F)u[c+F]=(f&255<<8*(C?F:1-F))>>>8*(C?F:1-F)}function R(u,f,c,C){f<0&&(f=4294967295+f+1);for(var F=0,B=Math.min(u.length-c,4);F<B;++F)u[c+F]=f>>>8*(C?F:3-F)&255}function W(u,f,c,C,F,B){if(c+C>u.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function V(u,f,c,C,F){return F||W(u,0,c,4),l.write(u,f,c,C,23,4),c+4}function z(u,f,c,C,F){return F||W(u,0,c,8),l.write(u,f,c,C,52,8),c+8}y.prototype.slice=function(u,f){var c,C=this.length;if((u=~~u)<0?(u+=C)<0&&(u=0):u>C&&(u=C),(f=f===void 0?C:~~f)<0?(f+=C)<0&&(f=0):f>C&&(f=C),f<u&&(f=u),y.TYPED_ARRAY_SUPPORT)(c=this.subarray(u,f)).__proto__=y.prototype;else{var F=f-u;c=new y(F,void 0);for(var B=0;B<F;++B)c[B]=this[B+u]}return c},y.prototype.readUIntLE=function(u,f,c){u|=0,f|=0,c||d(u,f,this.length);for(var C=this[u],F=1,B=0;++B<f&&(F*=256);)C+=this[u+B]*F;return C},y.prototype.readUIntBE=function(u,f,c){u|=0,f|=0,c||d(u,f,this.length);for(var C=this[u+--f],F=1;f>0&&(F*=256);)C+=this[u+--f]*F;return C},y.prototype.readUInt8=function(u,f){return f||d(u,1,this.length),this[u]},y.prototype.readUInt16LE=function(u,f){return f||d(u,2,this.length),this[u]|this[u+1]<<8},y.prototype.readUInt16BE=function(u,f){return f||d(u,2,this.length),this[u]<<8|this[u+1]},y.prototype.readUInt32LE=function(u,f){return f||d(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+16777216*this[u+3]},y.prototype.readUInt32BE=function(u,f){return f||d(u,4,this.length),16777216*this[u]+(this[u+1]<<16|this[u+2]<<8|this[u+3])},y.prototype.readIntLE=function(u,f,c){u|=0,f|=0,c||d(u,f,this.length);for(var C=this[u],F=1,B=0;++B<f&&(F*=256);)C+=this[u+B]*F;return C>=(F*=128)&&(C-=Math.pow(2,8*f)),C},y.prototype.readIntBE=function(u,f,c){u|=0,f|=0,c||d(u,f,this.length);for(var C=f,F=1,B=this[u+--C];C>0&&(F*=256);)B+=this[u+--C]*F;return B>=(F*=128)&&(B-=Math.pow(2,8*f)),B},y.prototype.readInt8=function(u,f){return f||d(u,1,this.length),128&this[u]?-1*(255-this[u]+1):this[u]},y.prototype.readInt16LE=function(u,f){f||d(u,2,this.length);var c=this[u]|this[u+1]<<8;return 32768&c?4294901760|c:c},y.prototype.readInt16BE=function(u,f){f||d(u,2,this.length);var c=this[u+1]|this[u]<<8;return 32768&c?4294901760|c:c},y.prototype.readInt32LE=function(u,f){return f||d(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},y.prototype.readInt32BE=function(u,f){return f||d(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},y.prototype.readFloatLE=function(u,f){return f||d(u,4,this.length),l.read(this,u,!0,23,4)},y.prototype.readFloatBE=function(u,f){return f||d(u,4,this.length),l.read(this,u,!1,23,4)},y.prototype.readDoubleLE=function(u,f){return f||d(u,8,this.length),l.read(this,u,!0,52,8)},y.prototype.readDoubleBE=function(u,f){return f||d(u,8,this.length),l.read(this,u,!1,52,8)},y.prototype.writeUIntLE=function(u,f,c,C){u=+u,f|=0,c|=0,C||I(this,u,f,c,Math.pow(2,8*c)-1,0);var F=1,B=0;for(this[f]=255&u;++B<c&&(F*=256);)this[f+B]=u/F&255;return f+c},y.prototype.writeUIntBE=function(u,f,c,C){u=+u,f|=0,c|=0,C||I(this,u,f,c,Math.pow(2,8*c)-1,0);var F=c-1,B=1;for(this[f+F]=255&u;--F>=0&&(B*=256);)this[f+F]=u/B&255;return f+c},y.prototype.writeUInt8=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,1,255,0),y.TYPED_ARRAY_SUPPORT||(u=Math.floor(u)),this[f]=255&u,f+1},y.prototype.writeUInt16LE=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[f]=255&u,this[f+1]=u>>>8):D(this,u,f,!0),f+2},y.prototype.writeUInt16BE=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[f]=u>>>8,this[f+1]=255&u):D(this,u,f,!1),f+2},y.prototype.writeUInt32LE=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[f+3]=u>>>24,this[f+2]=u>>>16,this[f+1]=u>>>8,this[f]=255&u):R(this,u,f,!0),f+4},y.prototype.writeUInt32BE=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=255&u):R(this,u,f,!1),f+4},y.prototype.writeIntLE=function(u,f,c,C){if(u=+u,f|=0,!C){var F=Math.pow(2,8*c-1);I(this,u,f,c,F-1,-F)}var B=0,Y=1,oe=0;for(this[f]=255&u;++B<c&&(Y*=256);)u<0&&oe===0&&this[f+B-1]!==0&&(oe=1),this[f+B]=(u/Y>>0)-oe&255;return f+c},y.prototype.writeIntBE=function(u,f,c,C){if(u=+u,f|=0,!C){var F=Math.pow(2,8*c-1);I(this,u,f,c,F-1,-F)}var B=c-1,Y=1,oe=0;for(this[f+B]=255&u;--B>=0&&(Y*=256);)u<0&&oe===0&&this[f+B+1]!==0&&(oe=1),this[f+B]=(u/Y>>0)-oe&255;return f+c},y.prototype.writeInt8=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,1,127,-128),y.TYPED_ARRAY_SUPPORT||(u=Math.floor(u)),u<0&&(u=255+u+1),this[f]=255&u,f+1},y.prototype.writeInt16LE=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[f]=255&u,this[f+1]=u>>>8):D(this,u,f,!0),f+2},y.prototype.writeInt16BE=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[f]=u>>>8,this[f+1]=255&u):D(this,u,f,!1),f+2},y.prototype.writeInt32LE=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,4,2147483647,-2147483648),y.TYPED_ARRAY_SUPPORT?(this[f]=255&u,this[f+1]=u>>>8,this[f+2]=u>>>16,this[f+3]=u>>>24):R(this,u,f,!0),f+4},y.prototype.writeInt32BE=function(u,f,c){return u=+u,f|=0,c||I(this,u,f,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),y.TYPED_ARRAY_SUPPORT?(this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=255&u):R(this,u,f,!1),f+4},y.prototype.writeFloatLE=function(u,f,c){return V(this,u,f,!0,c)},y.prototype.writeFloatBE=function(u,f,c){return V(this,u,f,!1,c)},y.prototype.writeDoubleLE=function(u,f,c){return z(this,u,f,!0,c)},y.prototype.writeDoubleBE=function(u,f,c){return z(this,u,f,!1,c)},y.prototype.copy=function(u,f,c,C){if(c||(c=0),C||C===0||(C=this.length),f>=u.length&&(f=u.length),f||(f=0),C>0&&C<c&&(C=c),C===c||u.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),u.length-f<C-c&&(C=u.length-f+c);var F,B=C-c;if(this===u&&c<f&&f<C)for(F=B-1;F>=0;--F)u[F+f]=this[F+c];else if(B<1e3||!y.TYPED_ARRAY_SUPPORT)for(F=0;F<B;++F)u[F+f]=this[F+c];else Uint8Array.prototype.set.call(u,this.subarray(c,c+B),f);return B},y.prototype.fill=function(u,f,c,C){if(typeof u=="string"){if(typeof f=="string"?(C=f,f=0,c=this.length):typeof c=="string"&&(C=c,c=this.length),u.length===1){var F=u.charCodeAt(0);F<256&&(u=F)}if(C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!y.isEncoding(C))throw new TypeError("Unknown encoding: "+C)}else typeof u=="number"&&(u&=255);if(f<0||this.length<f||this.length<c)throw new RangeError("Out of range index");if(c<=f)return this;var B;if(f>>>=0,c=c===void 0?this.length:c>>>0,u||(u=0),typeof u=="number")for(B=f;B<c;++B)this[B]=u;else{var Y=y.isBuffer(u)?u:de(new y(u,C).toString()),oe=Y.length;for(B=0;B<c-f;++B)this[B+f]=Y[B%oe]}return this};var te=/[^+\/0-9A-Za-z-_]/g;function ie(u){return u<16?"0"+u.toString(16):u.toString(16)}function de(u,f){var c;f=f||1/0;for(var C=u.length,F=null,B=[],Y=0;Y<C;++Y){if((c=u.charCodeAt(Y))>55295&&c<57344){if(!F){if(c>56319){(f-=3)>-1&&B.push(239,191,189);continue}if(Y+1===C){(f-=3)>-1&&B.push(239,191,189);continue}F=c;continue}if(c<56320){(f-=3)>-1&&B.push(239,191,189),F=c;continue}c=65536+(F-55296<<10|c-56320)}else F&&(f-=3)>-1&&B.push(239,191,189);if(F=null,c<128){if((f-=1)<0)break;B.push(c)}else if(c<2048){if((f-=2)<0)break;B.push(c>>6|192,63&c|128)}else if(c<65536){if((f-=3)<0)break;B.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((f-=4)<0)break;B.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return B}function he(u){return o.toByteArray(function(f){if((f=function(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}(f).replace(te,"")).length<2)return"";for(;f.length%4!=0;)f+="=";return f}(u))}function ae(u,f,c,C){for(var F=0;F<C&&!(F+c>=f.length||F>=u.length);++F)f[F+c]=u[F];return F}}).call(this,s(5))},function(r,n,s){n.byteLength=function(P){var w=y(P),b=w[0],S=w[1];return 3*(b+S)/4-S},n.toByteArray=function(P){var w,b,S=y(P),v=S[0],M=S[1],E=new l(function(a,g,m){return 3*(g+m)/4-m}(0,v,M)),j=0,O=M>0?v-4:v;for(b=0;b<O;b+=4)w=o[P.charCodeAt(b)]<<18|o[P.charCodeAt(b+1)]<<12|o[P.charCodeAt(b+2)]<<6|o[P.charCodeAt(b+3)],E[j++]=w>>16&255,E[j++]=w>>8&255,E[j++]=255&w;return M===2&&(w=o[P.charCodeAt(b)]<<2|o[P.charCodeAt(b+1)]>>4,E[j++]=255&w),M===1&&(w=o[P.charCodeAt(b)]<<10|o[P.charCodeAt(b+1)]<<4|o[P.charCodeAt(b+2)]>>2,E[j++]=w>>8&255,E[j++]=255&w),E},n.fromByteArray=function(P){for(var w,b=P.length,S=b%3,v=[],M=0,E=b-S;M<E;M+=16383)v.push(k(P,M,M+16383>E?E:M+16383));return S===1?(w=P[b-1],v.push(i[w>>2]+i[w<<4&63]+"==")):S===2&&(w=(P[b-2]<<8)+P[b-1],v.push(i[w>>10]+i[w>>4&63]+i[w<<2&63]+"=")),v.join("")};for(var i=[],o=[],l=typeof Uint8Array!="undefined"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,A=p.length;_<A;++_)i[_]=p[_],o[p.charCodeAt(_)]=_;function y(P){var w=P.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=P.indexOf("=");return b===-1&&(b=w),[b,b===w?0:4-b%4]}function k(P,w,b){for(var S,v,M=[],E=w;E<b;E+=3)S=(P[E]<<16&16711680)+(P[E+1]<<8&65280)+(255&P[E+2]),M.push(i[(v=S)>>18&63]+i[v>>12&63]+i[v>>6&63]+i[63&v]);return M.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(r,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(s,i,o,l,p){var _,A,y=8*p-l-1,k=(1<<y)-1,P=k>>1,w=-7,b=o?p-1:0,S=o?-1:1,v=s[i+b];for(b+=S,_=v&(1<<-w)-1,v>>=-w,w+=y;w>0;_=256*_+s[i+b],b+=S,w-=8);for(A=_&(1<<-w)-1,_>>=-w,w+=l;w>0;A=256*A+s[i+b],b+=S,w-=8);if(_===0)_=1-P;else{if(_===k)return A?NaN:1/0*(v?-1:1);A+=Math.pow(2,l),_-=P}return(v?-1:1)*A*Math.pow(2,_-l)},n.write=function(s,i,o,l,p,_){var A,y,k,P=8*_-p-1,w=(1<<P)-1,b=w>>1,S=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=l?0:_-1,M=l?1:-1,E=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(y=isNaN(i)?1:0,A=w):(A=Math.floor(Math.log(i)/Math.LN2),i*(k=Math.pow(2,-A))<1&&(A--,k*=2),(i+=A+b>=1?S/k:S*Math.pow(2,1-b))*k>=2&&(A++,k/=2),A+b>=w?(y=0,A=w):A+b>=1?(y=(i*k-1)*Math.pow(2,p),A+=b):(y=i*Math.pow(2,b-1)*Math.pow(2,p),A=0));p>=8;s[o+v]=255&y,v+=M,y/=256,p-=8);for(A=A<<p|y,P+=p;P>0;s[o+v]=255&A,v+=M,A/=256,P-=8);s[o+v-M]|=128*E}},function(r,n){var s={}.toString;r.exports=Array.isArray||function(i){return s.call(i)=="[object Array]"}},function(r,n,s){var i,o,l;o=[],(l=typeof(i=function(){var p,_,A,y;Object.keys||(Object.keys=(p=Object.prototype.hasOwnProperty,_=!{toString:null}.propertyIsEnumerable("toString"),y=(A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(h){if(typeof h!="object"&&typeof h!="function"||h===null)throw new TypeError("Object.keys called on non-object");var d=[];for(var I in h)p.call(h,I)&&d.push(I);if(_)for(var D=0;D<y;D++)p.call(h,A[D])&&d.push(A[D]);return d})),Object.create||(Object.create=function(){function h(){}return function(d){if(arguments.length!==1)throw new Error("Object.create implementation only accepts one parameter.");return h.prototype=d,new h}}()),Array.isArray||(Array.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(h){if(this===null)throw new TypeError;var d=Object(this),I=d.length>>>0;if(I===0)return-1;var D=0;if(arguments.length>1&&((D=Number(arguments[1]))!=D?D=0:D!==0&&D!==1/0&&D!==-1/0&&(D=(D>0||-1)*Math.floor(Math.abs(D)))),D>=I)return-1;for(var R=D>=0?D:Math.max(I-Math.abs(D),0);R<I;R++)if(R in d&&d[R]===h)return R;return-1}),Object.isFrozen||(Object.isFrozen=function(h){for(var d="tv4_test_frozen_key";h.hasOwnProperty(d);)d+=Math.random();try{return h[d]=!0,delete h[d],!1}catch{return!0}});var k={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},P={"*":!0};function w(h){return encodeURI(h).replace(/%25[0-9][0-9]/g,function(d){return"%"+d.substring(3)})}function b(h){var d="";k[h.charAt(0)]&&(d=h.charAt(0),h=h.substring(1));var I="",D="",R=!0,W=!1,V=!1;d==="+"?R=!1:d==="."?(D=".",I="."):d==="/"?(D="/",I="/"):d==="#"?(D="#",R=!1):d===";"?(D=";",I=";",W=!0,V=!0):d==="?"?(D="?",I="&",W=!0):d==="&"&&(D="&",I="&",W=!0);for(var z=[],te=h.split(","),ie=[],de={},he=0;he<te.length;he++){var ae=te[he],u=null;if(ae.indexOf(":")!==-1){var f=ae.split(":");ae=f[0],u=parseInt(f[1],10)}for(var c={};P[ae.charAt(ae.length-1)];)c[ae.charAt(ae.length-1)]=!0,ae=ae.substring(0,ae.length-1);var C={truncate:u,name:ae,suffices:c};ie.push(C),de[ae]=C,z.push(ae)}var F=function(B){for(var Y="",oe=0,fe=0;fe<ie.length;fe++){var ce=ie[fe],re=B(ce.name);if(re==null||Array.isArray(re)&&re.length===0||typeof re=="object"&&Object.keys(re).length===0)oe++;else if(Y+=fe===oe?D:I||",",Array.isArray(re)){W&&(Y+=ce.name+"=");for(var Re=0;Re<re.length;Re++)Re>0&&(Y+=ce.suffices["*"]&&I||",",ce.suffices["*"]&&W&&(Y+=ce.name+"=")),Y+=R?encodeURIComponent(re[Re]).replace(/!/g,"%21"):w(re[Re])}else if(typeof re=="object"){W&&!ce.suffices["*"]&&(Y+=ce.name+"=");var Me=!0;for(var Ge in re)Me||(Y+=ce.suffices["*"]&&I||","),Me=!1,Y+=R?encodeURIComponent(Ge).replace(/!/g,"%21"):w(Ge),Y+=ce.suffices["*"]?"=":",",Y+=R?encodeURIComponent(re[Ge]).replace(/!/g,"%21"):w(re[Ge])}else W&&(Y+=ce.name,V&&re===""||(Y+="=")),ce.truncate!=null&&(re=re.substring(0,ce.truncate)),Y+=R?encodeURIComponent(re).replace(/!/g,"%21"):w(re)}return Y};return F.varNames=z,{prefix:D,substitution:F}}function S(h){if(!(this instanceof S))return new S(h);for(var d=h.split("{"),I=[d.shift()],D=[],R=[],W=[];d.length>0;){var V=d.shift(),z=V.split("}")[0],te=V.substring(z.length+1),ie=b(z);R.push(ie.substitution),D.push(ie.prefix),I.push(te),W=W.concat(ie.substitution.varNames)}this.fill=function(de){for(var he=I[0],ae=0;ae<R.length;ae++)he+=(0,R[ae])(de),he+=I[ae+1];return he},this.varNames=W,this.template=h}S.prototype={toString:function(){return this.template},fillFromObject:function(h){return this.fill(function(d){return h[d]})}};var v=function(h,d,I,D,R){if(this.missing=[],this.missingMap={},this.formatValidators=h?Object.create(h.formatValidators):{},this.schemas=h?Object.create(h.schemas):{},this.collectMultiple=d,this.errors=[],this.handleError=d?this.collectError:this.returnError,D&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),R&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=I||N("en"),typeof this.errorReporter=="string")throw new Error("debug");if(this.definedKeywords={},h)for(var W in h.definedKeywords)this.definedKeywords[W]=h.definedKeywords[W].slice(0)};function M(h,d){if(h===d)return!0;if(h&&d&&typeof h=="object"&&typeof d=="object"){if(Array.isArray(h)!==Array.isArray(d))return!1;if(Array.isArray(h)){if(h.length!==d.length)return!1;for(var I=0;I<h.length;I++)if(!M(h[I],d[I]))return!1}else{var D;for(D in h)if(d[D]===void 0&&h[D]!==void 0)return!1;for(D in d)if(h[D]===void 0&&d[D]!==void 0)return!1;for(D in h)if(!M(h[D],d[D]))return!1}return!0}return!1}v.prototype.defineKeyword=function(h,d){this.definedKeywords[h]=this.definedKeywords[h]||[],this.definedKeywords[h].push(d)},v.prototype.createError=function(h,d,I,D,R,W,V){var z=new $(h,d,I,D,R);return z.message=this.errorReporter(z,W,V),z},v.prototype.returnError=function(h){return h},v.prototype.collectError=function(h){return h&&this.errors.push(h),null},v.prototype.prefixErrors=function(h,d,I){for(var D=h;D<this.errors.length;D++)this.errors[D]=this.errors[D].prefixWith(d,I);return this},v.prototype.banUnknownProperties=function(h,d){for(var I in this.unknownPropertyPaths){var D=this.createError(T.UNKNOWN_PROPERTY,{path:I},I,"",null,h,d),R=this.handleError(D);if(R)return R}return null},v.prototype.addFormat=function(h,d){if(typeof h=="object"){for(var I in h)this.addFormat(I,h[I]);return this}this.formatValidators[h]=d},v.prototype.resolveRefs=function(h,d){if(h.$ref!==void 0){if((d=d||{})[h.$ref])return this.createError(T.CIRCULAR_REFERENCE,{urls:Object.keys(d).join(", ")},"","",null,void 0,h);d[h.$ref]=!0,h=this.getSchema(h.$ref,d)}return h},v.prototype.getSchema=function(h,d){var I;if(this.schemas[h]!==void 0)return I=this.schemas[h],this.resolveRefs(I,d);var D=h,R="";if(h.indexOf("#")!==-1&&(R=h.substring(h.indexOf("#")+1),D=h.substring(0,h.indexOf("#"))),typeof this.schemas[D]=="object"){I=this.schemas[D];var W=decodeURIComponent(R);if(W==="")return this.resolveRefs(I,d);if(W.charAt(0)!=="/")return;for(var V=W.split("/").slice(1),z=0;z<V.length;z++){var te=V[z].replace(/~1/g,"/").replace(/~0/g,"~");if(I[te]===void 0){I=void 0;break}I=I[te]}if(I!==void 0)return this.resolveRefs(I,d)}this.missing[D]===void 0&&(this.missing.push(D),this.missing[D]=D,this.missingMap[D]=D)},v.prototype.searchSchemas=function(h,d){if(Array.isArray(h))for(var I=0;I<h.length;I++)this.searchSchemas(h[I],d);else if(h&&typeof h=="object"){for(var D in typeof h.id=="string"&&function(W,V){if(V.substring(0,W.length)===W){var z=V.substring(W.length);if(V.length>0&&V.charAt(W.length-1)==="/"||z.charAt(0)==="#"||z.charAt(0)==="?")return!0}return!1}(d,h.id)&&this.schemas[h.id]===void 0&&(this.schemas[h.id]=h),h)if(D!=="enum"){if(typeof h[D]=="object")this.searchSchemas(h[D],d);else if(D==="$ref"){var R=g(h[D]);R&&this.schemas[R]===void 0&&this.missingMap[R]===void 0&&(this.missingMap[R]=R)}}}},v.prototype.addSchema=function(h,d){if(typeof h!="string"||d===void 0){if(typeof h!="object"||typeof h.id!="string")return;h=(d=h).id}h===g(h)+"#"&&(h=g(h)),this.schemas[h]=d,delete this.missingMap[h],m(d,h),this.searchSchemas(d,h)},v.prototype.getSchemaMap=function(){var h={};for(var d in this.schemas)h[d]=this.schemas[d];return h},v.prototype.getSchemaUris=function(h){var d=[];for(var I in this.schemas)h&&!h.test(I)||d.push(I);return d},v.prototype.getMissingUris=function(h){var d=[];for(var I in this.missingMap)h&&!h.test(I)||d.push(I);return d},v.prototype.dropSchemas=function(){this.schemas={},this.reset()},v.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},v.prototype.validateAll=function(h,d,I,D,R){var W;if(!(d=this.resolveRefs(d)))return null;if(d instanceof $)return this.errors.push(d),d;var V,z=this.errors.length,te=null,ie=null;if(this.checkRecursive&&h&&typeof h=="object"){if(W=!this.scanned.length,h[this.validatedSchemasKey]){var de=h[this.validatedSchemasKey].indexOf(d);if(de!==-1)return this.errors=this.errors.concat(h[this.validationErrorsKey][de]),null}if(Object.isFrozen(h)&&(V=this.scannedFrozen.indexOf(h))!==-1){var he=this.scannedFrozenSchemas[V].indexOf(d);if(he!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[V][he]),null}if(this.scanned.push(h),Object.isFrozen(h))V===-1&&(V=this.scannedFrozen.length,this.scannedFrozen.push(h),this.scannedFrozenSchemas.push([])),te=this.scannedFrozenSchemas[V].length,this.scannedFrozenSchemas[V][te]=d,this.scannedFrozenValidationErrors[V][te]=[];else{if(!h[this.validatedSchemasKey])try{Object.defineProperty(h,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(h,this.validationErrorsKey,{value:[],configurable:!0})}catch{h[this.validatedSchemasKey]=[],h[this.validationErrorsKey]=[]}ie=h[this.validatedSchemasKey].length,h[this.validatedSchemasKey][ie]=d,h[this.validationErrorsKey][ie]=[]}}var ae=this.errors.length,u=this.validateBasic(h,d,R)||this.validateNumeric(h,d,R)||this.validateString(h,d,R)||this.validateArray(h,d,R)||this.validateObject(h,d,R)||this.validateCombinations(h,d,R)||this.validateHypermedia(h,d,R)||this.validateFormat(h,d,R)||this.validateDefinedKeywords(h,d,R)||null;if(W){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(u||ae!==this.errors.length)for(;I&&I.length||D&&D.length;){var f=I&&I.length?""+I.pop():null,c=D&&D.length?""+D.pop():null;u&&(u=u.prefixWith(f,c)),this.prefixErrors(ae,f,c)}return te!==null?this.scannedFrozenValidationErrors[V][te]=this.errors.slice(z):ie!==null&&(h[this.validationErrorsKey][ie]=this.errors.slice(z)),this.handleError(u)},v.prototype.validateFormat=function(h,d){if(typeof d.format!="string"||!this.formatValidators[d.format])return null;var I=this.formatValidators[d.format].call(null,h,d);return typeof I=="string"||typeof I=="number"?this.createError(T.FORMAT_CUSTOM,{message:I},"","/format",null,h,d):I&&typeof I=="object"?this.createError(T.FORMAT_CUSTOM,{message:I.message||"?"},I.dataPath||"",I.schemaPath||"/format",null,h,d):null},v.prototype.validateDefinedKeywords=function(h,d,I){for(var D in this.definedKeywords)if(d[D]!==void 0)for(var R=this.definedKeywords[D],W=0;W<R.length;W++){var V=(0,R[W])(h,d[D],d,I);if(typeof V=="string"||typeof V=="number")return this.createError(T.KEYWORD_CUSTOM,{key:D,message:V},"","",null,h,d).prefixWith(null,D);if(V&&typeof V=="object"){var z=V.code;if(typeof z=="string"){if(!T[z])throw new Error("Undefined error code (use defineError): "+z);z=T[z]}else typeof z!="number"&&(z=T.KEYWORD_CUSTOM);var te=typeof V.message=="object"?V.message:{key:D,message:V.message||"?"},ie=V.schemaPath||"/"+D.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(z,te,V.dataPath||null,ie,null,h,d)}}return null},v.prototype.validateBasic=function(h,d,I){var D;return(D=this.validateType(h,d,I))||(D=this.validateEnum(h,d,I))?D.prefixWith(null,"type"):null},v.prototype.validateType=function(h,d){if(d.type===void 0)return null;var I=typeof h;h===null?I="null":Array.isArray(h)&&(I="array");var D=d.type;Array.isArray(D)||(D=[D]);for(var R=0;R<D.length;R++){var W=D[R];if(W===I||W==="integer"&&I==="number"&&h%1==0)return null}return this.createError(T.INVALID_TYPE,{type:I,expected:D.join("/")},"","",null,h,d)},v.prototype.validateEnum=function(h,d){if(d.enum===void 0)return null;for(var I=0;I<d.enum.length;I++)if(M(h,d.enum[I]))return null;return this.createError(T.ENUM_MISMATCH,{value:typeof JSON!="undefined"?JSON.stringify(h):h},"","",null,h,d)},v.prototype.validateNumeric=function(h,d,I){return this.validateMultipleOf(h,d,I)||this.validateMinMax(h,d,I)||this.validateNaN(h,d,I)||null};var E=Math.pow(2,-51),j=1-E;function O(h){var d=String(h).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return d?{href:d[0]||"",protocol:d[1]||"",authority:d[2]||"",host:d[3]||"",hostname:d[4]||"",port:d[5]||"",pathname:d[6]||"",search:d[7]||"",hash:d[8]||""}:null}function a(h,d){return d=O(d||""),h=O(h||""),d&&h?(d.protocol||h.protocol)+(d.protocol||d.authority?d.authority:h.authority)+(I=d.protocol||d.authority||d.pathname.charAt(0)==="/"?d.pathname:d.pathname?(h.authority&&!h.pathname?"/":"")+h.pathname.slice(0,h.pathname.lastIndexOf("/")+1)+d.pathname:h.pathname,D=[],I.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(R){R==="/.."?D.pop():D.push(R)}),D.join("").replace(/^\//,I.charAt(0)==="/"?"/":""))+(d.protocol||d.authority||d.pathname?d.search:d.search||h.search)+d.hash:null;var I,D}function g(h){return h.split("#")[0]}function m(h,d){if(h&&typeof h=="object")if(d===void 0?d=h.id:typeof h.id=="string"&&(d=a(d,h.id),h.id=d),Array.isArray(h))for(var I=0;I<h.length;I++)m(h[I],d);else for(var D in typeof h.$ref=="string"&&(h.$ref=a(d,h.$ref)),h)D!=="enum"&&m(h[D],d)}function N(h){var d=x[h=h||"en"];return function(I){var D=d[I.code]||G[I.code];if(typeof D!="string")return"Unknown error code "+I.code+": "+JSON.stringify(I.messageParams);var R=I.params;return D.replace(/\{([^{}]*)\}/g,function(W,V){var z=R[V];return typeof z=="string"||typeof z=="number"?z:W})}}v.prototype.validateMultipleOf=function(h,d){var I=d.multipleOf||d.divisibleBy;if(I===void 0)return null;if(typeof h=="number"){var D=h/I%1;if(D>=E&&D<j)return this.createError(T.NUMBER_MULTIPLE_OF,{value:h,multipleOf:I},"","",null,h,d)}return null},v.prototype.validateMinMax=function(h,d){if(typeof h!="number")return null;if(d.minimum!==void 0){if(h<d.minimum)return this.createError(T.NUMBER_MINIMUM,{value:h,minimum:d.minimum},"","/minimum",null,h,d);if(d.exclusiveMinimum&&h===d.minimum)return this.createError(T.NUMBER_MINIMUM_EXCLUSIVE,{value:h,minimum:d.minimum},"","/exclusiveMinimum",null,h,d)}if(d.maximum!==void 0){if(h>d.maximum)return this.createError(T.NUMBER_MAXIMUM,{value:h,maximum:d.maximum},"","/maximum",null,h,d);if(d.exclusiveMaximum&&h===d.maximum)return this.createError(T.NUMBER_MAXIMUM_EXCLUSIVE,{value:h,maximum:d.maximum},"","/exclusiveMaximum",null,h,d)}return null},v.prototype.validateNaN=function(h,d){return typeof h!="number"?null:isNaN(h)===!0||h===1/0||h===-1/0?this.createError(T.NUMBER_NOT_A_NUMBER,{value:h},"","/type",null,h,d):null},v.prototype.validateString=function(h,d,I){return this.validateStringLength(h,d,I)||this.validateStringPattern(h,d,I)||null},v.prototype.validateStringLength=function(h,d){return typeof h!="string"?null:d.minLength!==void 0&&h.length<d.minLength?this.createError(T.STRING_LENGTH_SHORT,{length:h.length,minimum:d.minLength},"","/minLength",null,h,d):d.maxLength!==void 0&&h.length>d.maxLength?this.createError(T.STRING_LENGTH_LONG,{length:h.length,maximum:d.maxLength},"","/maxLength",null,h,d):null},v.prototype.validateStringPattern=function(h,d){if(typeof h!="string"||typeof d.pattern!="string"&&!(d.pattern instanceof RegExp))return null;var I;if(d.pattern instanceof RegExp)I=d.pattern;else{var D,R="",W=d.pattern.match(/^\/(.+)\/([img]*)$/);W?(D=W[1],R=W[2]):D=d.pattern,I=new RegExp(D,R)}return I.test(h)?null:this.createError(T.STRING_PATTERN,{pattern:d.pattern},"","/pattern",null,h,d)},v.prototype.validateArray=function(h,d,I){return Array.isArray(h)&&(this.validateArrayLength(h,d,I)||this.validateArrayUniqueItems(h,d,I)||this.validateArrayItems(h,d,I))||null},v.prototype.validateArrayLength=function(h,d){var I;return d.minItems!==void 0&&h.length<d.minItems&&(I=this.createError(T.ARRAY_LENGTH_SHORT,{length:h.length,minimum:d.minItems},"","/minItems",null,h,d),this.handleError(I))||d.maxItems!==void 0&&h.length>d.maxItems&&(I=this.createError(T.ARRAY_LENGTH_LONG,{length:h.length,maximum:d.maxItems},"","/maxItems",null,h,d),this.handleError(I))?I:null},v.prototype.validateArrayUniqueItems=function(h,d){if(d.uniqueItems){for(var I=0;I<h.length;I++)for(var D=I+1;D<h.length;D++)if(M(h[I],h[D])){var R=this.createError(T.ARRAY_UNIQUE,{match1:I,match2:D},"","/uniqueItems",null,h,d);if(this.handleError(R))return R}}return null},v.prototype.validateArrayItems=function(h,d,I){if(d.items===void 0)return null;var D,R;if(Array.isArray(d.items)){for(R=0;R<h.length;R++)if(R<d.items.length){if(D=this.validateAll(h[R],d.items[R],[R],["items",R],I+"/"+R))return D}else if(d.additionalItems!==void 0){if(typeof d.additionalItems=="boolean"){if(!d.additionalItems&&(D=this.createError(T.ARRAY_ADDITIONAL_ITEMS,{},"/"+R,"/additionalItems",null,h,d),this.handleError(D)))return D}else if(D=this.validateAll(h[R],d.additionalItems,[R],["additionalItems"],I+"/"+R))return D}}else for(R=0;R<h.length;R++)if(D=this.validateAll(h[R],d.items,[R],["items"],I+"/"+R))return D;return null},v.prototype.validateObject=function(h,d,I){return typeof h!="object"||h===null||Array.isArray(h)?null:this.validateObjectMinMaxProperties(h,d,I)||this.validateObjectRequiredProperties(h,d,I)||this.validateObjectProperties(h,d,I)||this.validateObjectDependencies(h,d,I)||null},v.prototype.validateObjectMinMaxProperties=function(h,d){var I,D=Object.keys(h);return d.minProperties!==void 0&&D.length<d.minProperties&&(I=this.createError(T.OBJECT_PROPERTIES_MINIMUM,{propertyCount:D.length,minimum:d.minProperties},"","/minProperties",null,h,d),this.handleError(I))||d.maxProperties!==void 0&&D.length>d.maxProperties&&(I=this.createError(T.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:D.length,maximum:d.maxProperties},"","/maxProperties",null,h,d),this.handleError(I))?I:null},v.prototype.validateObjectRequiredProperties=function(h,d){if(d.required!==void 0)for(var I=0;I<d.required.length;I++){var D=d.required[I];if(h[D]===void 0){var R=this.createError(T.OBJECT_REQUIRED,{key:D},"","/required/"+I,null,h,d);if(this.handleError(R))return R}}return null},v.prototype.validateObjectProperties=function(h,d,I){var D;for(var R in h){var W=I+"/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),V=!1;if(d.properties!==void 0&&d.properties[R]!==void 0&&(V=!0,D=this.validateAll(h[R],d.properties[R],[R],["properties",R],W)))return D;if(d.patternProperties!==void 0){for(var z in d.patternProperties)if(new RegExp(z).test(R)&&(V=!0,D=this.validateAll(h[R],d.patternProperties[z],[R],["patternProperties",z],W)))return D}if(V)this.trackUnknownProperties&&(this.knownPropertyPaths[W]=!0,delete this.unknownPropertyPaths[W]);else if(d.additionalProperties!==void 0){if(this.trackUnknownProperties&&(this.knownPropertyPaths[W]=!0,delete this.unknownPropertyPaths[W]),typeof d.additionalProperties=="boolean"){if(!d.additionalProperties&&(D=this.createError(T.OBJECT_ADDITIONAL_PROPERTIES,{key:R},"","/additionalProperties",null,h,d).prefixWith(R,null),this.handleError(D)))return D}else if(D=this.validateAll(h[R],d.additionalProperties,[R],["additionalProperties"],W))return D}else this.trackUnknownProperties&&!this.knownPropertyPaths[W]&&(this.unknownPropertyPaths[W]=!0)}return null},v.prototype.validateObjectDependencies=function(h,d,I){var D;if(d.dependencies!==void 0){for(var R in d.dependencies)if(h[R]!==void 0){var W=d.dependencies[R];if(typeof W=="string"){if(h[W]===void 0&&(D=this.createError(T.OBJECT_DEPENDENCY_KEY,{key:R,missing:W},"","",null,h,d).prefixWith(null,R).prefixWith(null,"dependencies"),this.handleError(D)))return D}else if(Array.isArray(W))for(var V=0;V<W.length;V++){var z=W[V];if(h[z]===void 0&&(D=this.createError(T.OBJECT_DEPENDENCY_KEY,{key:R,missing:z},"","/"+V,null,h,d).prefixWith(null,R).prefixWith(null,"dependencies"),this.handleError(D)))return D}else if(D=this.validateAll(h,W,[],["dependencies",R],I))return D}}return null},v.prototype.validateCombinations=function(h,d,I){return this.validateAllOf(h,d,I)||this.validateAnyOf(h,d,I)||this.validateOneOf(h,d,I)||this.validateNot(h,d,I)||null},v.prototype.validateAllOf=function(h,d,I){if(d.allOf===void 0)return null;for(var D,R=0;R<d.allOf.length;R++){var W=d.allOf[R];if(D=this.validateAll(h,W,[],["allOf",R],I))return D}return null},v.prototype.validateAnyOf=function(h,d,I){if(d.anyOf===void 0)return null;var D,R,W=[],V=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,R=this.knownPropertyPaths);for(var z=!0,te=0;te<d.anyOf.length;te++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var ie=d.anyOf[te],de=this.errors.length,he=this.validateAll(h,ie,[],["anyOf",te],I);if(he===null&&de===this.errors.length){if(this.errors=this.errors.slice(0,V),this.trackUnknownProperties){for(var ae in this.knownPropertyPaths)R[ae]=!0,delete D[ae];for(var u in this.unknownPropertyPaths)R[u]||(D[u]=!0);z=!1;continue}return null}he&&W.push(he.prefixWith(null,""+te).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=R),z?(W=W.concat(this.errors.slice(V)),this.errors=this.errors.slice(0,V),this.createError(T.ANY_OF_MISSING,{},"","/anyOf",W,h,d)):void 0},v.prototype.validateOneOf=function(h,d,I){if(d.oneOf===void 0)return null;var D,R,W=null,V=[],z=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,R=this.knownPropertyPaths);for(var te=0;te<d.oneOf.length;te++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var ie=d.oneOf[te],de=this.errors.length,he=this.validateAll(h,ie,[],["oneOf",te],I);if(he===null&&de===this.errors.length){if(W!==null)return this.errors=this.errors.slice(0,z),this.createError(T.ONE_OF_MULTIPLE,{index1:W,index2:te},"","/oneOf",null,h,d);if(W=te,this.trackUnknownProperties){for(var ae in this.knownPropertyPaths)R[ae]=!0,delete D[ae];for(var u in this.unknownPropertyPaths)R[u]||(D[u]=!0)}}else he&&V.push(he)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=R),W===null?(V=V.concat(this.errors.slice(z)),this.errors=this.errors.slice(0,z),this.createError(T.ONE_OF_MISSING,{},"","/oneOf",V,h,d)):(this.errors=this.errors.slice(0,z),null)},v.prototype.validateNot=function(h,d,I){if(d.not===void 0)return null;var D,R,W=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,R=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var V=this.validateAll(h,d.not,null,null,I),z=this.errors.slice(W);return this.errors=this.errors.slice(0,W),this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=R),V===null&&z.length===0?this.createError(T.NOT_PASSED,{},"","/not",null,h,d):null},v.prototype.validateHypermedia=function(h,d,I){if(!d.links)return null;for(var D,R=0;R<d.links.length;R++){var W=d.links[R];if(W.rel==="describedby"){for(var V=new S(W.href),z=!0,te=0;te<V.varNames.length;te++)if(!(V.varNames[te]in h)){z=!1;break}if(z){var ie={$ref:V.fillFromObject(h)};if(D=this.validateAll(h,ie,[],["links",R],I))return D}}}};var T={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},U={};for(var H in T)U[T[H]]=H;var G={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function $(h,d,I,D,R){if(Error.call(this),h===void 0)throw new Error("No error code supplied: "+D);this.message="",this.params=d,this.code=h,this.dataPath=I||"",this.schemaPath=D||"",this.subErrors=R||null;var W=new Error(this.message);if(this.stack=W.stack||W.stacktrace,!this.stack)try{throw W}catch(V){this.stack=V.stack||V.stacktrace}}$.prototype=Object.create(Error.prototype),$.prototype.constructor=$,$.prototype.name="ValidationError",$.prototype.prefixWith=function(h,d){if(h!==null&&(h=h.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+h+this.dataPath),d!==null&&(d=d.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+d+this.schemaPath),this.subErrors!==null)for(var I=0;I<this.subErrors.length;I++)this.subErrors[I].prefixWith(h,d);return this};var x={},L=function h(d){var I,D,R=new v,W={setErrorReporter:function(V){return typeof V=="string"?this.language(V):(D=V,!0)},addFormat:function(){R.addFormat.apply(R,arguments)},language:function(V){return V?(x[V]||(V=V.split("-")[0]),!!x[V]&&(I=V,V)):I},addLanguage:function(V,z){var te;for(te in T)z[te]&&!z[T[te]]&&(z[T[te]]=z[te]);var ie=V.split("-")[0];if(x[ie])for(te in x[V]=Object.create(x[ie]),z)x[ie][te]===void 0&&(x[ie][te]=z[te]),x[V][te]=z[te];else x[V]=z,x[ie]=z;return this},freshApi:function(V){var z=h();return V&&z.language(V),z},validate:function(V,z,te,ie){var de=N(I),he=new v(R,!1,D?function(u,f,c){return D(u,f,c)||de(u,f,c)}:de,te,ie);typeof z=="string"&&(z={$ref:z}),he.addSchema("",z);var ae=he.validateAll(V,z,null,null,"");return!ae&&ie&&(ae=he.banUnknownProperties(V,z)),this.error=ae,this.missing=he.missing,this.valid=ae===null,this.valid},validateResult:function(){var V={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(V,arguments),V},validateMultiple:function(V,z,te,ie){var de=N(I),he=new v(R,!0,D?function(u,f,c){return D(u,f,c)||de(u,f,c)}:de,te,ie);typeof z=="string"&&(z={$ref:z}),he.addSchema("",z),he.validateAll(V,z,null,null,""),ie&&he.banUnknownProperties(V,z);var ae={toString:function(){return this.valid?"valid":this.error.message}};return ae.errors=he.errors,ae.missing=he.missing,ae.valid=ae.errors.length===0,ae},addSchema:function(){return R.addSchema.apply(R,arguments)},getSchema:function(){return R.getSchema.apply(R,arguments)},getSchemaMap:function(){return R.getSchemaMap.apply(R,arguments)},getSchemaUris:function(){return R.getSchemaUris.apply(R,arguments)},getMissingUris:function(){return R.getMissingUris.apply(R,arguments)},dropSchemas:function(){R.dropSchemas.apply(R,arguments)},defineKeyword:function(){R.defineKeyword.apply(R,arguments)},defineError:function(V,z,te){if(typeof V!="string"||!/^[A-Z]+(_[A-Z]+)*$/.test(V))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if(typeof z!="number"||z%1!=0||z<1e4)throw new Error("Code number must be an integer > 10000");if(T[V]!==void 0)throw new Error("Error already defined: "+V+" as "+T[V]);if(U[z]!==void 0)throw new Error("Error code already used: "+U[z]+" as "+z);for(var ie in T[V]=z,U[z]=V,G[V]=G[z]=te,x){var de=x[ie];de[V]&&(de[z]=de[z]||de[V])}},reset:function(){R.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:m,resolveUrl:a,getDocumentUri:g,errorCodes:T};return W.language(d||"en"),W}();return L.addLanguage("en-gb",G),L.tv4=L,L})=="function"?i.apply(n,o):i)===void 0||(r.exports=l)},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseClientTypes=void 0;class i{constructor(){this.uris={},this.schemas={},this.aliases={}}declare(p,_,A,y){const k=p+"/"+_;if(y.extends){const P=y.extends.split("/"),w=P.length===1?p+"/"+P.shift():P.join("/"),b=this.uris[w];if(!b)throw"Type '"+k+"' tries to extend unknown schema '"+w+"'";y.extends=this.schemas[b]}this.uris[k]=A,this.aliases[A]=k,this.schemas[A]=y}resolveAlias(p){return this.uris[p]}getSchema(p){return this.schemas[p]}inScope(p){const _=p.length,A={};for(const y in this.uris)if(y.substr(0,_+1)===p+"/"){const k=this.uris[y];A[k]=this.schemas[k]}return A}}n.BaseClientTypes=i;const o=new i;n.default=o},function(r,n,s){class i extends Error{constructor(l){super();const p=new Error("Schema not found: "+l);return p.name="SchemaNotFound",p}}r.exports=i},function(r,n,s){r.exports=class{constructor(i){this._itemsRev={},this._storage={},this._canPropagate=!1,this.defaultValue=i,this.activatePropagation()}get(i){i=i.toLowerCase();let o=this._storage[i];return o===void 0&&(o=this.defaultValue,this._storage[i]=o),o}set(i,o){return i=i.toLowerCase(),this._storage[i]===o||(this._storage[i]=o,o||delete this._itemsRev[i],this._updateParentFolderItemRev(i,o),this._canPropagate&&this._propagate(i)),o}delete(i){return this.set(i,null)}deactivatePropagation(){return this._canPropagate=!1,!0}activatePropagation(){return this._canPropagate||(this._generateFolderRev("/"),this._canPropagate=!0),!0}_hashCode(i){let o=0;if(i.length===0)return o;for(let l=0;l<i.length;l++)o=(o<<5)-o+i.charCodeAt(l),o|=0;return o}_generateHash(i){const o=i.sort().join("|");return""+this._hashCode(o)}_updateParentFolderItemRev(i,o){if(i!=="/"){const l=this._getParentFolder(i);this._itemsRev[l]||(this._itemsRev[l]={});const p=this._itemsRev[l];o?p[i]=o:delete p[i],this._updateParentFolderItemRev(l,this.defaultValue)}}_getParentFolder(i){return i.substr(0,i.lastIndexOf("/",i.length-2)+1)}_propagate(i){if(i!=="/"){const o=this._getParentFolder(i),l=this._itemsRev[o],p=[];for(const A in l)p.push(l[A]);const _=this._generateHash(p);this.set(o,_)}}_generateFolderRev(i){const o=this._itemsRev[i];let l=this.defaultValue;if(o){const p=[];for(const _ in o){let A;A=_.substr(-1)==="/"?this._generateFolderRev(_):o[_],p.push(A)}p.length>0&&(l=this._generateHash(p))}return this.set(i,l),l}}},function(r,n,s){var i;/*!
 * webfinger.js
 *   version 2.7.0
 *   http://github.com/silverbucket/webfinger.js
 *
 * Developed and Maintained by:
 *   Nick Jennings <nick@silverbucket.net> 2012
 *
 * webfinger.js is released under the AGPL (see LICENSE).
 *
 * You don't have to do anything special to choose one license or the other and you don't
 * have to notify anyone which license you are using.
 * Please see the corresponding license file for details of these licenses.
 * You are free to use, modify and distribute this software, but all copyright
 * information must remain.
 *
 */typeof fetch!="function"&&typeof XMLHttpRequest!="function"&&(XMLHttpRequest=s(28)),function(o){var l={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage","http://tools.ietf.org/id/draft-dejong-remotestorage":"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},p={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camlistore:[]},_=["webfinger","host-meta","host-meta.json"];function A(k){return k.toString=function(){return this.message},k}function y(k){typeof k!="object"&&(k={}),this.config={tls_only:k.tls_only===void 0||k.tls_only,webfist_fallback:k.webfist_fallback!==void 0&&k.webfist_fallback,uri_fallback:k.uri_fallback!==void 0&&k.uri_fallback,request_timeout:k.request_timeout!==void 0?k.request_timeout:1e4}}y.prototype.__fetchJRD=function(k,P,w){if(typeof fetch=="function")return this.__fetchJRD_fetch(k,P,w);if(typeof XMLHttpRequest=="function")return this.__fetchJRD_XHR(k,P,w);throw new Error("add a polyfill for fetch or XMLHttpRequest")},y.prototype.__fetchJRD_fetch=function(k,P,w){var b,S=this;typeof AbortController=="function"&&(b=new AbortController);var v=fetch(k,{headers:{Accept:"application/jrd+json, application/json"},signal:b?b.signal:void 0}).then(function(E){if(E.ok)return E.text();throw E.status===404?A({message:"resource not found",url:k,status:E.status}):A({message:"error during request",url:k,status:E.status})},function(E){throw A({message:"error during request",url:k,status:void 0,err:E})}).then(function(E){if(S.__isValidJSON(E))return E;throw A({message:"invalid json",url:k,status:void 0})}),M=new Promise(function(E,j){setTimeout(function(){j(A({message:"request timed out",url:k,status:void 0})),b&&b.abort()},S.config.request_timeout)});Promise.race([v,M]).then(function(E){w(E)}).catch(function(E){P(E)})},y.prototype.__fetchJRD_XHR=function(k,P,w){var b=this,S=!1,v=new XMLHttpRequest;function M(){if(!S){if(S=!0,v.status===200)return b.__isValidJSON(v.responseText)?w(v.responseText):P(A({message:"invalid json",url:k,status:v.status}));if(v.status===404)return P(A({message:"resource not found",url:k,status:v.status}));if(v.status>=301&&v.status<=302){var j=v.getResponseHeader("Location");return function(O){return typeof O=="string"&&O.split("://")[0]==="https"}(j)?E():P(A({message:"no redirect URL found",url:k,status:v.status}))}return P(A({message:"error during request",url:k,status:v.status}))}}function E(){v.onreadystatechange=function(){v.readyState===4&&M()},v.onload=function(){M()},v.ontimeout=function(){return P(A({message:"request timed out",url:k,status:v.status}))},v.open("GET",k,!0),v.timeout=b.config.request_timeout,v.setRequestHeader("Accept","application/jrd+json, application/json"),v.send()}return E()},y.prototype.__isValidJSON=function(k){try{JSON.parse(k)}catch{return!1}return!0},y.prototype.__isLocalhost=function(k){return/^localhost(\.localdomain)?(\:[0-9]+)?$/.test(k)},y.prototype.__processJRD=function(k,P,w,b){var S=JSON.parse(P);if(typeof S!="object"||typeof S.links!="object")return S.error!==void 0?w(A({message:S.error,request:k})):w(A({message:"unknown response from server",request:k}));var v=S.links;Array.isArray(v)||(v=[]);var M={object:S,json:P,idx:{}};M.idx.properties={name:void 0},M.idx.links=JSON.parse(JSON.stringify(p)),v.map(function(O,a){if(l.hasOwnProperty(O.rel)&&M.idx.links[l[O.rel]]){var g={};Object.keys(O).map(function(m,N){g[m]=O[m]}),M.idx.links[l[O.rel]].push(g)}});var E=JSON.parse(P).properties;for(var j in E)E.hasOwnProperty(j)&&j==="http://packetizer.com/ns/name"&&(M.idx.properties.name=E[j]);return b(M)},y.prototype.lookup=function(k,P){if(typeof k!="string")throw new Error("first parameter must be a user address");if(typeof P!="function")throw new Error("second parameter must be a callback");var w=this,b="";b=k.indexOf("://")>-1?k.replace(/ /g,"").split("/")[2]:k.replace(/ /g,"").split("@")[1];var S=0,v="https";function M(){var O="";return k.split("://")[1]||(O="acct:"),v+"://"+b+"/.well-known/"+_[S]+"?resource="+O+k}function E(O){if(w.config.uri_fallback&&b!=="webfist.org"&&S!==_.length-1)return S+=1,j();if(!w.config.tls_only&&v==="https")return S=0,v="http",j();if(!w.config.webfist_fallback||b==="webfist.org")return P(O);S=0,v="http",b="webfist.org";var a=M();w.__fetchJRD(a,P,function(g){w.__processJRD(a,g,P,function(m){typeof m.idx.links.webfist=="object"&&typeof m.idx.links.webfist[0].href=="string"&&w.__fetchJRD(m.idx.links.webfist[0].href,P,function(N){w.__processJRD(a,N,P,function(T){return P(null,P)})})})})}function j(){var O=M();w.__fetchJRD(O,E,function(a){w.__processJRD(O,a,P,function(g){P(null,g)})})}return w.__isLocalhost(b)&&(v="http"),setTimeout(j,0)},y.prototype.lookupLink=function(k,P,w){if(!p.hasOwnProperty(P))return w("unsupported rel "+P);this.lookup(k,function(b,S){var v=S.idx.links[P];return b?w(b):v.length===0?w('no links found with rel="'+P+'"'):w(null,v[0])})},(i=function(){return y}.apply(n,[]))===void 0||(r.exports=i)}()},function(r,n){r.exports=XMLHttpRequest},function(r,n,s){var i=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};const o=i(s(3)),l=i(s(16)),p=i(s(1)),_=s(0),A=i(s(30)),y=i(s(11)),k=i(s(6)),P=i(s(15)),w=i(s(7)),b=i(s(13)),S=i(s(14)),v=i(s(8)),M=i(s(31)),E=i(s(12)),j=i(s(32)),O=i(s(33)),a=i(s(34)),g={features:[],featuresDone:0,readyFired:!1,loadFeatures(){this.features=[],this.featuresDone=0,this.readyFired=!1,this.featureModules={WireClient:v.default,Dropbox:S.default,GoogleDrive:b.default,Access:y.default,Discover:P.default,Authorize:k.default,BaseClient:w.default,Env:l.default},o.default.cache&&_.extend(this.featureModules,{Caching:E.default,IndexedDB:j.default,LocalStorage:O.default,InMemoryStorage:a.default,Sync:M.default}),o.default.disableFeatures.forEach(m=>{this.featureModules[m]&&delete this.featureModules[m]}),this._allLoaded=!1;for(const m in this.featureModules)this.loadFeature(m)},hasFeature(m){for(let N=this.features.length-1;N>=0;N--)if(this.features[N].name===m)return this.features[N].supported;return!1},loadFeature(m){const N=this.featureModules[m],T=!N._rs_supported||N._rs_supported();p.default(`[RemoteStorage] [FEATURE ${m}] initializing ...`),typeof T=="object"?T.then(()=>{this.featureSupported(m,!0),this.initFeature(m)},()=>{this.featureSupported(m,!1)}):typeof T=="boolean"?(this.featureSupported(m,T),T&&this.initFeature(m)):this.featureSupported(m,!1)},initFeature(m){const N=this.featureModules[m];let T;try{T=N._rs_init(this)}catch(U){return void this.featureFailed(m,U)}typeof T=="object"&&typeof T.then=="function"?T.then(()=>{this.featureInitialized(m)},U=>{this.featureFailed(m,U)}):this.featureInitialized(m)},featureFailed(m,N){p.default(`[RemoteStorage] [FEATURE ${m}] initialization failed (${N})`),this.featureDone()},featureSupported(m,N){p.default(`[RemoteStorage] [FEATURE ${m}]${N?"":"not "} supported`),N||this.featureDone()},featureInitialized(m){p.default(`[RemoteStorage] [FEATURE ${m}] initialized`),this.features.push({name:m,init:this.featureModules[m]._rs_init,supported:!0,cleanup:this.featureModules[m]._rs_cleanup}),this.featureDone()},featureDone(){this.featuresDone++,this.featuresDone===Object.keys(this.featureModules).length&&setTimeout(this.featuresLoaded.bind(this),0)},_setCachingModule(){["IndexedDB","LocalStorage","InMemoryStorage"].some(m=>{if(this.features.some(N=>N.name===m))return this.features.local=this.featureModules[m],!0})},_fireReady(){try{this.readyFired||(this._emit("ready"),this.readyFired=!0)}catch(m){console.error("'ready' failed: ",m,m.stack),this._emit("error",m)}},featuresLoaded(){p.default("[RemoteStorage] All features loaded"),this._setCachingModule(),this.local=o.default.cache&&this.features.local&&new this.features.local,this.local&&this.remote?(this._setGPD(A.default,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",()=>{this._fireReady(),this._emit("connected")}),this.remote.on("not-connected",()=>{this._fireReady(),this._emit("not-connected")}),this.remote.connected&&(this._fireReady(),this._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(m){_.logError(m),this._emit("error",m)}this._processPending()},_collectCleanupFunctions(){this._cleanups=[];for(let m=0;m<this.features.length;m++){const N=this.features[m].cleanup;typeof N=="function"&&this._cleanups.push(N)}}};r.exports=g},function(r,n,s){var i=this&&this.__awaiter||function(_,A,y,k){return new(y||(y=Promise))(function(P,w){function b(M){try{v(k.next(M))}catch(E){w(E)}}function S(M){try{v(k.throw(M))}catch(E){w(E)}}function v(M){var E;M.done?P(M.value):(E=M.value,E instanceof y?E:new y(function(j){j(E)})).then(b,S)}v((k=k.apply(_,A||[])).next())})};const o=(this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}})(s(1));function l(_){return this.backend==="dropbox"&&!!_.match(/^\/public\/.*[^\/]$/)}const p={get:function(_,A){if(this.local){if(A===void 0)A=typeof(y=this).remote=="object"&&y.remote.connected&&y.remote.online?2*y.getSyncInterval():(o.default("Not setting default maxAge, because remote is offline or not connected"),!1);else if(typeof A!="number"&&A!==!1)return Promise.reject("Argument 'maxAge' must be 'false' or a number");return this.local.get(_,A,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(_);var y},put:function(_,A,y){return l.bind(this)(_)?p._wrapBusyDone.call(this,this.remote.put(_,A,y)):this.local?this.local.put(_,A,y):p._wrapBusyDone.call(this,this.remote.put(_,A,y))},delete:function(_){return this.local?this.local.delete(_):p._wrapBusyDone.call(this,this.remote.delete(_))},_wrapBusyDone:function(_){return i(this,void 0,void 0,function*(){return this._emit("wire-busy"),_.then(A=>(this._emit("wire-done",{success:!0}),Promise.resolve(A)),A=>(this._emit("wire-done",{success:!1}),Promise.reject(A)))})}};r.exports=p},function(r,n,s){var i=this&&this.__awaiter||function(O,a,g,m){return new(g||(g=Promise))(function(N,T){function U($){try{G(m.next($))}catch(x){T(x)}}function H($){try{G(m.throw($))}catch(x){T(x)}}function G($){var x;$.done?N($.value):(x=$.value,x instanceof g?x:new g(function(L){L(x)})).then(U,H)}G((m=m.apply(O,a||[])).next())})},o=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};const l=o(s(3)),p=o(s(16)),_=o(s(2)),A=o(s(1)),y=o(s(6)),k=o(s(9)),P=o(s(4)),w=s(0);let b,S;function v(O,a,g){return{action:O,path:a,promise:g}}function M(O,a){return O.common.revision!==a&&(!O.remote||O.remote.revision!==a)}function E(O){return O.common&&O.common.revision}class j{constructor(a){this.rs=a,this._tasks={},this._running={},this._timeStarted={},this.numThreads=10,this.rs.local.onDiff(g=>{this.addTask(g),this.doTasks()}),this.rs.caching.onActivate(g=>{this.addTask(g),this.doTasks()}),this.addEvents(["done","req-done"])}now(){return new Date().getTime()}queueGetRequest(a){return new Promise((g,m)=>{this.rs.remote.connected?this.rs.remote.online?(this.addTask(a,function(){this.rs.local.get(a).then(N=>g(N))}.bind(this)),this.doTasks()):m("cannot fulfill maxAge requirement - remote is not online"):m("cannot fulfill maxAge requirement - remote is not connected")})}corruptServerItemsMap(a,g){if(typeof a!="object"||Array.isArray(a))return!0;for(const m in a){const N=a[m];if(typeof N!="object"||typeof N.ETag!="string")return!0;if(w.isFolder(m)){if(m.substring(0,m.length-1).indexOf("/")!==-1)return!0}else if(m.indexOf("/")!==-1||g&&(typeof N["Content-Type"]!="string"||typeof N["Content-Length"]!="number"))return!0}return!1}corruptItemsMap(a){if(typeof a!="object"||Array.isArray(a))return!0;for(const g in a)if(typeof a[g]!="boolean")return!0;return!1}corruptRevision(a){return typeof a!="object"||Array.isArray(a)||a.revision&&typeof a.revision!="string"||a.body&&typeof a.body!="string"&&typeof a.body!="object"||a.contentType&&typeof a.contentType!="string"||a.contentLength&&typeof a.contentLength!="number"||a.timestamp&&typeof a.timestamp!="number"||a.itemsMap&&this.corruptItemsMap(a.itemsMap)}isCorrupt(a){return typeof a!="object"||Array.isArray(a)||typeof a.path!="string"||this.corruptRevision(a.common)||a.local&&this.corruptRevision(a.local)||a.remote&&this.corruptRevision(a.remote)||a.push&&this.corruptRevision(a.push)}hasTasks(){return Object.getOwnPropertyNames(this._tasks).length>0}collectDiffTasks(){return i(this,void 0,void 0,function*(){let a=0;return this.rs.local.forAllNodes(g=>{a>100||(this.isCorrupt(g)?(A.default("[Sync] WARNING: corrupt node in local cache",g),typeof g=="object"&&g.path&&(this.addTask(g.path),a++)):(this.needsFetch(g)&&this.rs.access.checkPathPermission(g.path,"r")||w.isDocument(g.path)&&this.needsPush(g)&&this.rs.access.checkPathPermission(g.path,"rw"))&&(this.addTask(g.path),a++))}).then(()=>a).catch(g=>{throw g})})}inConflict(a){return a.local&&a.remote&&(a.remote.body!==void 0||a.remote.itemsMap)}needsRefresh(a){return!!a.common&&(!a.common.timestamp||this.now()-a.common.timestamp>l.default.syncInterval)}needsFetch(a){return!!this.inConflict(a)||!(!a.common||a.common.itemsMap!==void 0||a.common.body!==void 0)||!(!a.remote||a.remote.itemsMap!==void 0||a.remote.body!==void 0)}needsPush(a){return!this.inConflict(a)&&(!(!a.local||a.push)||void 0)}needsRemotePut(a){return a.local&&a.local.body}needsRemoteDelete(a){return a.local&&a.local.body===!1}getParentPath(a){const g=a.match(/^(.*\/)([^\/]+\/?)$/);if(g)return g[1];throw new Error('Not a valid path: "'+a+'"')}deleteChildPathsFromTasks(){for(const a in this._tasks){const g=w.pathsFromRoot(a);for(let m=1;m<g.length;m++)this._tasks[g[m]]&&(Array.isArray(this._tasks[a])&&this._tasks[a].length&&Array.prototype.push.apply(this._tasks[g[m]],this._tasks[a]),delete this._tasks[a])}}collectRefreshTasks(){return i(this,void 0,void 0,function*(){return this.rs.local.forAllNodes(a=>{let g;if(this.needsRefresh(a)){try{g=this.getParentPath(a.path)}catch{}g&&this.rs.access.checkPathPermission(g,"r")?this.addTask(g):this.rs.access.checkPathPermission(a.path,"r")&&this.addTask(a.path)}}).then(()=>this.deleteChildPathsFromTasks()).catch(a=>{throw a})})}flush(a){for(const g in a)this.rs.caching.checkPath(g)==="FLUSH"&&a[g]&&!a[g].local&&(A.default("[Sync] Flushing",g),a[g]=void 0);return a}doTask(a){return this.rs.local.getNodes([a]).then(g=>{const m=g[a];return m===void 0||function(N){return N.remote&&N.remote.revision&&!N.remote.itemsMap&&!N.remote.body}(m)?v("get",a,this.rs.remote.get(a)):this.needsRemotePut(m)?(m.push=w.deepClone(m.local),m.push.timestamp=this.now(),this.rs.local.setNodes(this.flush(g)).then(()=>{let N;return N=E(m)?{ifMatch:m.common.revision}:{ifNoneMatch:"*"},v("put",a,this.rs.remote.put(a,m.push.body,m.push.contentType,N))})):this.needsRemoteDelete(m)?(m.push={body:!1,timestamp:this.now()},this.rs.local.setNodes(this.flush(g)).then(()=>E(m)?v("delete",a,this.rs.remote.delete(a,{ifMatch:m.common.revision})):v("get",a,this.rs.remote.get(a)))):E(m)?v("get",a,this.rs.remote.get(a,{ifNoneMatch:m.common.revision})):v("get",a,this.rs.remote.get(a))})}autoMergeFolder(a){if(a.remote.itemsMap&&(a.common=a.remote,delete a.remote,a.common.itemsMap)){for(const g in a.common.itemsMap)a.local.itemsMap[g]||(a.local.itemsMap[g]=!1);w.equal(a.local.itemsMap,a.common.itemsMap)&&delete a.local}return a}autoMergeDocument(a){return function(g){return(!g.remote||!g.remote.revision||g.remote.revision===g.common.revision)&&(g.common.body===void 0&&g.remote.body===!1||g.remote.body===g.common.body&&g.remote.contentType===g.common.contentType)}(a)?delete(a=function(g){return g.remote&&g.remote.body===!1&&g.local&&g.local.body===!1&&delete g.local,g}(a)).remote:a.remote.body!==void 0&&(A.default("[Sync] Emitting keep/revert"),this.rs.local._emitChange({origin:"conflict",path:a.path,oldValue:a.local.body,newValue:a.remote.body,lastCommonValue:a.common.body,oldContentType:a.local.contentType,newContentType:a.remote.contentType,lastCommonContentType:a.common.contentType}),a.remote.body?a.common=a.remote:a.common={},delete a.remote,delete a.local),a}autoMerge(a){if(a.remote){if(a.local)return w.isFolder(a.path)?this.autoMergeFolder(a):this.autoMergeDocument(a);if(w.isFolder(a.path))a.remote.itemsMap!==void 0&&(a.common=a.remote,delete a.remote);else if(a.remote.body!==void 0){const g={origin:"remote",path:a.path,oldValue:a.common.body===!1?void 0:a.common.body,newValue:a.remote.body===!1?void 0:a.remote.body,oldContentType:a.common.contentType,newContentType:a.remote.contentType};if((g.oldValue||g.newValue)&&this.rs.local._emitChange(g),!a.remote.body)return;a.common=a.remote,delete a.remote}return a}a.common.body&&this.rs.local._emitChange({origin:"remote",path:a.path,oldValue:a.common.body,newValue:void 0,oldContentType:a.common.contentType,newContentType:void 0})}updateCommonTimestamp(a,g){return i(this,void 0,void 0,function*(){return this.rs.local.getNodes([a]).then(m=>(m[a]&&m[a].common&&m[a].common.revision===g&&(m[a].common.timestamp=this.now()),this.rs.local.setNodes(this.flush(m))))})}markChildren(a,g,m,N){return i(this,void 0,void 0,function*(){const T=[],U={},H={};for(const G in g)T.push(a+G),U[a+G]=g[G];for(const G in N)T.push(a+G);return this.rs.local.getNodes(T).then(G=>{let $,x;for(const L in G)if(x=G[L],U[L])x&&x.common?M(x,U[L].ETag)&&(m[L]=w.deepClone(x),m[L].remote={revision:U[L].ETag,timestamp:this.now()},m[L]=this.autoMerge(m[L])):($=this.rs.caching.checkPath(L),$==="ALL"&&(m[L]={path:L,common:{timestamp:this.now()},remote:{revision:U[L].ETag,timestamp:this.now()}})),m[L]&&U[L]["Content-Type"]&&(m[L].remote.contentType=U[L]["Content-Type"]),m[L]&&U[L]["Content-Length"]&&(m[L].remote.contentLength=U[L]["Content-Length"]);else if(N[L.substring(a.length)]&&x&&x.common){if(x.common.itemsMap)for(const h in x.common.itemsMap)H[L+h]=!0;if(x.local&&x.local.itemsMap)for(const h in x.local.itemsMap)H[L+h]=!0;if(x.remote||w.isFolder(L))m[L]=void 0;else if(m[L]=this.autoMerge(x),m[L]===void 0){const h=this.getParentPath(L),d=m[h],I=L.substring(a.length);d&&d.local&&(delete d.local.itemsMap[I],w.equal(d.local.itemsMap,d.common.itemsMap)&&delete d.local)}}return this.deleteRemoteTrees(Object.keys(H),m).then(L=>this.rs.local.setNodes(this.flush(L)))})})}deleteRemoteTrees(a,g){return i(this,void 0,void 0,function*(){return a.length===0?Promise.resolve(g):this.rs.local.getNodes(a).then(m=>i(this,void 0,void 0,function*(){const N={};function T(U,H){if(U&&U.itemsMap)for(const G in U.itemsMap)N[H+G]=!0}for(const U in m){const H=m[U];H&&(w.isFolder(U)?(T(H.common,U),T(H.local,U)):H.common&&typeof H.common.body!==void 0&&(g[U]=w.deepClone(H),g[U].remote={body:!1,timestamp:this.now()},g[U]=this.autoMerge(g[U])))}return this.deleteRemoteTrees(Object.keys(N),g).then(U=>this.rs.local.setNodes(this.flush(U)))}))})}completeFetch(a,g,m,N){return i(this,void 0,void 0,function*(){let T,U;const H=w.pathsFromRoot(a);return w.isFolder(a)?T=[a]:(U=H[1],T=[a,U]),this.rs.local.getNodes(T).then(G=>{let $,x,L=G[a];const h={};function d(I){if(I&&I.itemsMap)for($ in I.itemsMap)g[$]||(h[$]=!0)}if(typeof L=="object"&&L.path===a&&typeof L.common=="object"||(L={path:a,common:{}},G[a]=L),L.remote={revision:N,timestamp:this.now()},w.isFolder(a))for($ in d(L.common),d(L.remote),L.remote.itemsMap={},g)L.remote.itemsMap[$]=!0;else L.remote.body=g,L.remote.contentType=m,x=G[U],x&&x.local&&x.local.itemsMap&&($=a.substring(U.length),x.local.itemsMap[$]=!0,w.equal(x.local.itemsMap,x.common.itemsMap)&&delete x.local);return G[a]=this.autoMerge(L),{toBeSaved:G,missingChildren:h}})})}completePush(a,g,m,N){return i(this,void 0,void 0,function*(){return this.rs.local.getNodes([a]).then(T=>{const U=T[a];if(!U.push)throw this.stopped=!0,new Error("completePush called but no push version!");return m?(A.default("[Sync] We have a conflict"),U.remote&&U.remote.revision===N||(U.remote={revision:N||"conflict",timestamp:this.now()},delete U.push),T[a]=this.autoMerge(U)):(U.common={revision:N,timestamp:this.now()},g==="put"?(U.common.body=U.push.body,U.common.contentType=U.push.contentType,w.equal(U.local.body,U.push.body)&&U.local.contentType===U.push.contentType&&delete U.local,delete U.push):g==="delete"&&(U.local.body===!1?T[a]=void 0:delete U.push)),this.rs.local.setNodes(this.flush(T))})})}dealWithFailure(a){return i(this,void 0,void 0,function*(){return this.rs.local.getNodes([a]).then(g=>{if(g[a])return delete g[a].push,this.rs.local.setNodes(this.flush(g))})})}interpretStatus(a){const g={statusCode:a,successful:void 0,conflict:void 0,unAuth:void 0,notFound:void 0,changed:void 0,networkProblems:void 0};if(typeof a=="string"&&(a==="offline"||a==="timeout"))return g.successful=!1,g.networkProblems=!0,g;if(typeof a=="number"){const m=Math.floor(a/100);return g.successful=m===2||a===304||a===412||a===404,g.conflict=a===412,g.unAuth=a===401&&this.rs.remote.token!==y.default.IMPLIED_FAKE_TOKEN||a===402||a===403,g.notFound=a===404,g.changed=a!==304,g}}handleGetResponse(a,g,m,N,T){return i(this,void 0,void 0,function*(){return g.notFound&&(m=!!w.isFolder(a)&&{}),g.changed?this.completeFetch(a,m,N,T).then(U=>w.isFolder(a)?this.corruptServerItemsMap(m)?(A.default("[Sync] WARNING: Discarding corrupt folder description from server for "+a),!1):this.markChildren(a,m,U.toBeSaved,U.missingChildren).then(()=>!0):this.rs.local.setNodes(this.flush(U.toBeSaved)).then(()=>!0)):this.updateCommonTimestamp(a,T).then(()=>!0)})}handleResponse(a,g,m){const N=this.interpretStatus(m.statusCode);if(N.successful){if(g==="get")return this.handleGetResponse(a,N,m.body,m.contentType,m.revision);if(g==="put"||g==="delete")return this.completePush(a,g,N.conflict,m.revision).then(function(){return!0});throw new Error("cannot handle response for unknown action "+g)}{let T;return T=N.unAuth?new P.default:N.networkProblems?new k.default("Network request failed."):new Error("HTTP response code "+N.statusCode+" received."),this.dealWithFailure(a).then(()=>{throw this.rs._emit("error",T),T})}}finishTask(a){if(a.action!==void 0)return a.promise.then(g=>this.handleResponse(a.path,a.action,g),g=>(A.default("[Sync] wireclient rejects its promise!",a.path,a.action,g),this.handleResponse(a.path,a.action,{statusCode:"offline"}))).then(g=>{if(delete this._timeStarted[a.path],delete this._running[a.path],g&&this._tasks[a.path]){for(let m=0;m<this._tasks[a.path].length;m++)this._tasks[a.path][m]();delete this._tasks[a.path]}this.rs._emit("sync-req-done"),this.collectTasks(!1).then(()=>{!this.hasTasks()||this.stopped?(A.default("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(this._tasks).length,this.stopped),this.done||(this.done=!0,this.rs._emit("sync-done"))):setTimeout(()=>{this.doTasks()},10)})},g=>{A.default("[Sync] Error",g),delete this._timeStarted[a.path],delete this._running[a.path],this.rs._emit("sync-req-done"),this.done||(this.done=!0,this.rs._emit("sync-done"))});delete this._running[a.path]}doTasks(){let a,g,m=0;a=this.rs.remote.connected?this.rs.remote.online?this.numThreads:1:0;const N=a-Object.getOwnPropertyNames(this._running).length;if(N<=0)return!0;for(g in this._tasks)if(!this._running[g]&&(this._timeStarted[g]=this.now(),this._running[g]=this.doTask(g),this._running[g].then(this.finishTask.bind(this)),m++,m>=N))return!0;return m>=N}collectTasks(a){return i(this,void 0,void 0,function*(){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(g=>g||a===!1?Promise.resolve():this.collectRefreshTasks(),function(g){throw g})})}addTask(a,g){this._tasks[a]||(this._tasks[a]=[]),typeof g=="function"&&this._tasks[a].push(g)}sync(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(()=>{try{this.doTasks()}catch(a){A.default("[Sync] doTasks error",a)}},function(a){throw A.default("[Sync] Sync error",a),new Error("Local cache unavailable")})}static _rs_init(a){b=function(){A.default("[Sync] syncCycleCb calling syncCycle");const g=new p.default;g.isBrowser()&&function(m,N){function T(U){const H=N.getCurrentSyncInterval();l.default.isBackground=!U;const G=N.getCurrentSyncInterval();N._emit("sync-interval-change",{oldValue:H,newValue:G})}m.on("background",()=>T(!1)),m.on("foreground",()=>T(!0))}(g,a),a.sync||(a.sync=new j(a),a.syncStopped&&(A.default("[Sync] Instantiating sync stopped"),a.sync.stopped=!0,delete a.syncStopped)),A.default("[Sync] syncCycleCb calling syncCycle"),a.syncCycle()},S=function(){a.removeEventListener("connected",S),a.startSync()},a.on("ready",b),a.on("connected",S)}static _rs_cleanup(a){a.stopSync(),a.removeEventListener("ready",b),a.removeEventListener("connected",S),a.sync=void 0,delete a.sync}}w.applyMixins(j,[_.default]),r.exports=j},function(r,n,s){(function(i){var o=this&&this.__awaiter||function(w,b,S,v){return new(S||(S=Promise))(function(M,E){function j(g){try{a(v.next(g))}catch(m){E(m)}}function O(g){try{a(v.throw(g))}catch(m){E(m)}}function a(g){var m;g.done?M(g.value):(m=g.value,m instanceof S?m:new S(function(N){N(m)})).then(j,O)}a((v=v.apply(w,b||[])).next())})},l=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};const p=l(s(2)),_=l(s(10)),A=l(s(1)),y=s(0);let k;class P extends _.default{constructor(b){super(),this.addEvents(["change","local-events-done"]),this.db=b||k,this.db?(this.getsRunning=0,this.putsRunning=0,this.changesQueued={},this.changesRunning={},this.commitSlownessWarning=null):A.default("[IndexedDB] Failed to open DB")}getNodes(b){return o(this,void 0,void 0,function*(){const S=[],v={};for(let M=0,E=b.length;M<E;M++)this.changesQueued[b[M]]!==void 0?v[b[M]]=y.deepClone(this.changesQueued[b[M]]||void 0):this.changesRunning[b[M]]!==void 0?v[b[M]]=y.deepClone(this.changesRunning[b[M]]||void 0):S.push(b[M]);return S.length>0?this.getNodesFromDb(S).then(function(M){for(const E in v)M[E]=v[E];return M}):Promise.resolve(v)})}setNodes(b){return o(this,void 0,void 0,function*(){for(const S in b)this.changesQueued[S]=b[S]||!1;return this.maybeFlush(),Promise.resolve()})}maybeFlush(){this.putsRunning===0?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=i.setInterval(function(){console.warn("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))}flushChangesQueued(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))}getNodesFromDb(b){return new Promise((S,v)=>{const M=this.db.transaction(["nodes"],"readonly"),E=M.objectStore("nodes"),j={};this.getsRunning++,b.map(O=>{E.get(O).onsuccess=a=>{j[O]=a.target.result}}),M.oncomplete=()=>{S(j),this.getsRunning--},M.onerror=M.onabort=()=>{v("get transaction error/abort"),this.getsRunning--}})}setNodesInDb(b){return o(this,void 0,void 0,function*(){return new Promise((S,v)=>{const M=this.db.transaction(["nodes"],"readwrite"),E=M.objectStore("nodes"),j=new Date().getTime();this.putsRunning++,A.default("[IndexedDB] Starting put",b,this.putsRunning);for(const O in b){const a=b[O];if(typeof a=="object")try{E.put(a)}catch(g){throw A.default("[IndexedDB] Error while putting",a,g),g}else try{E.delete(O)}catch(g){throw A.default("[IndexedDB] Error while removing",E,a,g),g}}M.oncomplete=()=>{this.putsRunning--,A.default("[IndexedDB] Finished put",b,this.putsRunning,new Date().getTime()-j+"ms"),S()},M.onerror=()=>{this.putsRunning--,v("transaction error")},M.onabort=()=>{v("transaction abort"),this.putsRunning--}})})}reset(b){const S=this.db.name;this.db.close(),P.clean(this.db.name,()=>{P.open(S,(v,M)=>{v?A.default("[IndexedDB] Error while resetting local storage",v):this.db=M,typeof b=="function"&&b(self)})})}forAllNodes(b){return o(this,void 0,void 0,function*(){return new Promise(S=>{this.db.transaction(["nodes"],"readonly").objectStore("nodes").openCursor().onsuccess=v=>{const M=v.target.result;M?(b(this.migrate(M.value)),M.continue()):S()}})})}closeDB(){this.putsRunning===0?this.db.close():setTimeout(this.closeDB.bind(this),100)}static open(b,S){const v=setTimeout(function(){S("timeout trying to open db")},1e4);try{const M=indexedDB.open(b,2);M.onerror=function(){A.default("[IndexedDB] Opening DB failed",M),clearTimeout(v),S(M.error)},M.onupgradeneeded=function(E){const j=M.result;A.default("[IndexedDB] Upgrade: from ",E.oldVersion," to ",E.newVersion),E.oldVersion!==1&&(A.default("[IndexedDB] Creating object store: nodes"),j.createObjectStore("nodes",{keyPath:"path"})),A.default("[IndexedDB] Creating object store: changes"),j.createObjectStore("changes",{keyPath:"path"})},M.onsuccess=function(){clearTimeout(v);const E=M.result;if(!E.objectStoreNames.contains("nodes")||!E.objectStoreNames.contains("changes"))return A.default("[IndexedDB] Missing object store. Resetting the database."),void P.clean(b,function(){P.open(b,S)});S(null,M.result)}}catch(M){A.default("[IndexedDB] Failed to open database: "+M),A.default("[IndexedDB] Resetting database and trying again."),clearTimeout(v),P.clean(b,function(){P.open(b,S)})}}static clean(b,S){const v=indexedDB.deleteDatabase(b);v.onsuccess=function(){A.default("[IndexedDB] Done removing DB"),S()},v.onerror=v.onabort=function(M){console.error('Failed to remove database "'+b+'"',M)}}static _rs_init(b){return new Promise((S,v)=>{P.open("remotestorage",function(M,E){M?v(M):(k=E,E.onerror=()=>{b._emit("error",M)},S())})})}static _rs_supported(){return new Promise((b,S)=>{const v=y.getGlobalContext();let M=!1;if(typeof navigator!="undefined"&&navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(M=!0)),"indexedDB"in v&&!M)try{const E=indexedDB.open("rs-check");E.onerror=function(){S()},E.onsuccess=function(){E.result.close(),indexedDB.deleteDatabase("rs-check"),b()}}catch{S()}else S()})}static _rs_cleanup(b){return new Promise(S=>{b.local&&b.local.closeDB(),P.clean("remotestorage",S)})}diffHandler(){}}y.applyMixins(P,[p.default]),r.exports=P}).call(this,s(5))},function(r,n,s){var i=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};const o=i(s(10)),l=i(s(2)),p=i(s(1)),_=s(0),A="remotestorage:cache:nodes:";function y(P){return P.substr(0,A.length)===A||P.substr(0,28)==="remotestorage:cache:changes:"}class k extends o.default{constructor(){super(),this.addEvents(["change","local-events-done"])}diffHandler(...w){}getNodes(w){const b={};for(let S=0,v=w.length;S<v;S++)try{b[w[S]]=JSON.parse(localStorage[A+w[S]])}catch{b[w[S]]=void 0}return Promise.resolve(b)}setNodes(w){for(const b in w)localStorage[A+b]=JSON.stringify(w[b]);return Promise.resolve()}forAllNodes(w){let b;for(let S=0,v=localStorage.length;S<v;S++)if(localStorage.key(S).substr(0,A.length)===A){try{b=this.migrate(JSON.parse(localStorage[localStorage.key(S)]))}catch{b=void 0}b&&w(b)}return Promise.resolve()}static _rs_init(){}static _rs_supported(){return _.localStorageAvailable()}static _rs_cleanup(){const w=[];for(let b=0,S=localStorage.length;b<S;b++){const v=localStorage.key(b);y(v)&&w.push(v)}w.forEach(b=>{p.default("[LocalStorage] Removing",b),delete localStorage[b]})}}_.applyMixins(k,[l.default]),r.exports=k},function(r,n,s){var i=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};const o=i(s(2)),l=i(s(10)),p=s(0);class _ extends l.default{constructor(){super(),this._storage={},this.addEvents(["change","local-events-done"])}getNodes(y){const k={};for(let P=0,w=y.length;P<w;P++)k[y[P]]=this._storage[y[P]];return Promise.resolve(k)}setNodes(y){for(const k in y)y[k]===void 0?delete this._storage[k]:this._storage[k]=y[k];return Promise.resolve()}forAllNodes(y){for(const k in this._storage)y(this.migrate(this._storage[k]));return Promise.resolve()}diffHandler(){}static _rs_init(){}static _rs_supported(){return!0}static _rs_cleanup(){}}p.applyMixins(_,[o.default]),r.exports=_}])})})(Jn);var si=ni(Jn.exports);const rt=new si;rt.setApiKeys({dropbox:ei,googledrive:ti});const rr=Ir(0),ii=vt(rr,t=>t>0);vt(rr,t=>t);function oi(){rr.update(t=>t+1)}function ai(){rr.update(t=>t-1)}function ui(t){return oi(),t.finally(ai)}rt.access.claim("secrets","rw");rt.caching.enable("/secrets/");const Or=rt.scope("/secrets/");Or.declareType("secrets",{type:"object",properties:{".*":{type:"object",properties:{id:{type:"string",format:"uuid"},type:{type:"string",enum:["password","text"]},application:{type:"string",format:{type:"oneOf",items:[{type:"uri"},{type:"string"}]}},username:{type:"string"},secret:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","type","application","username","secret","createdAt","updatedAt"]}}});const at=Ir({});vt(at,t=>Object.values(t));vt(at,t=>t);const xr=vt(at,t=>Object.values(t).reduce((e,r)=>((e[r.application]||(e[r.application]=[])).push(r),e),{}));function li(t){const r={id:Zs(),type:t.type,application:tr(t.application),username:t.username,secret:t.secret,createdAt:new Date,updatedAt:new Date};at.update(n=>{const s=ut(Je({},n),{[r.id]:r});return Cr(s),s})}async function ci(t,e){let r;at.update(n=>{const s=n[t];if(s){const i=ut(Je(Je({},s),e),{updatedAt:new Date});i.application=tr(i.application);const o=ut(Je({},n),{[t]:i});return r=Cr(o),o}else return n}),r&&await r}function hi(t){at.update(e=>{const r=Je({},e);return delete r[t],Cr(r),r})}function fi(t){return{id:t.id,type:t.type,application:t.application,username:t.username,secret:t.secret,createdAt:t.createdAt.toJSON(),updatedAt:t.updatedAt.toJSON()}}function di(t){return{id:t.id,type:t.type,application:t.application,username:t.username,secret:t.secret,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)}}async function Cr(t){await ui(Or.storeObject("secrets","secrets.json",Object.values(t).reduce((e,r)=>(e[r.id]=fi(r),e),{})))}function pi(){Or.getObject("secrets.json",!1).then(t=>{if(t){const e=t;delete e["@context"],at.update(r=>(Object.values(e).forEach(n=>{const s=r[n.id],i=di(n);(!s||s.updatedAt<i.updatedAt)&&(r[n.id]=i)}),r))}})}rt.on("sync-done",pi);function mi(t){let e,r,n,s,i;const o=t[2].default,l=Tr(o,t,t[1],null);return{c(){e=X("div"),l&&l.c(),this.h()},l(p){e=Q(p,"DIV",{});var _=ee(e);l&&l.l(_),_.forEach(q),this.h()},h(){e.hidden=!0},m(p,_){K(p,e,_),l&&l.m(e,null),n=!0,s||(i=$s(r=gi.call(null,e,t[0])),s=!0)},p(p,[_]){l&&l.p&&(!n||_&2)&&Ar(l,o,p,p[1],n?Nr(o,p[1],_,null):kr(p[1]),null),r&&Zt(r.update)&&_&1&&r.update.call(null,p[0])},i(p){n||(ne(l,p),n=!0)},o(p){se(l,p),n=!1},d(p){p&&q(e),l&&l.d(p),s=!1,i()}}}function gi(t,e="body"){let r;async function n(i){if(e=i,typeof e=="string"){if(r=document.querySelector(e),r===null&&(await qs(),r=document.querySelector(e)),r===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)r=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);r.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return n(e),{update:n,destroy:s}}function yi(t,e,r){let{$$slots:n={},$$scope:s}=e,{target:i="body"}=e;return t.$$set=o=>{"target"in o&&r(0,i=o.target),"$$scope"in o&&r(1,s=o.$$scope)},[i,s,n]}class vi extends Te{constructor(e){super(),Ae(this,e,yi,mi,tt,{target:0})}}function _i(t){let e;return{c(){e=Ye("path"),this.h()},l(r){e=Ke(r,"path",{d:!0}),ee(e).forEach(q),this.h()},h(){J(e,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z")},m(r,n){K(r,e,n)},p:Se,d(r){r&&q(e)}}}function bi(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[_i]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=ke(s,n[i]);return e=new yt({props:s}),{c(){ge(e.$$.fragment)},l(i){ye(e.$$.fragment,i)},m(i,o){ve(e,i,o),r=!0},p(i,[o]){const l=o&1?mt(n,[n[0],gt(i[0])]):{};o&2&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){_e(e,i)}}}function wi(t,e,r){return t.$$set=n=>{r(0,e=ke(ke({},e),Be(n)))},e=Be(e),[e]}class zn extends Te{constructor(e){super(),Ae(this,e,wi,bi,tt,{})}}const Ei=t=>({}),rn=t=>({});function nn(t){let e;const r=t[5].title,n=Tr(r,t,t[6],rn);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),e=!0},p(s,i){n&&n.p&&(!e||i&64)&&Ar(n,r,s,s[6],e?Nr(r,s[6],i,Ei):kr(s[6]),rn)},i(s){e||(ne(n,s),e=!0)},o(s){se(n,s),e=!1},d(s){n&&n.d(s)}}}function sn(t){let e;const r=t[5].default,n=Tr(r,t,t[6],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),e=!0},p(s,i){n&&n.p&&(!e||i&64)&&Ar(n,r,s,s[6],e?Nr(r,s[6],i,null):kr(s[6]),null)},i(s){e||(ne(n,s),e=!0)},o(s){se(n,s),e=!1},d(s){n&&n.d(s)}}}function Pi(t){let e,r,n,s,i,o,l,p,_=t[1],A,y,k,P,w,b,S=t[1],v,M,E,j=nn(t);P=new zn({});let O=sn(t);return{c(){e=X("div"),r=X("div"),n=ue(),s=X("div"),i=X("div"),o=X("div"),l=X("div"),p=X("div"),j.c(),A=ue(),y=X("button"),k=X("div"),ge(P.$$.fragment),w=ue(),b=X("div"),O.c(),this.h()},l(a){e=Q(a,"DIV",{class:!0,role:!0,"aria-modal":!0});var g=ee(e);r=Q(g,"DIV",{class:!0}),ee(r).forEach(q),n=le(g),s=Q(g,"DIV",{class:!0});var m=ee(s);i=Q(m,"DIV",{class:!0});var N=ee(i);o=Q(N,"DIV",{class:!0});var T=ee(o);l=Q(T,"DIV",{class:!0});var U=ee(l);p=Q(U,"DIV",{class:!0});var H=ee(p);j.l(H),H.forEach(q),A=le(U),y=Q(U,"BUTTON",{class:!0});var G=ee(y);k=Q(G,"DIV",{class:!0});var $=ee(k);ye(P.$$.fragment,$),$.forEach(q),G.forEach(q),U.forEach(q),w=le(T),b=Q(T,"DIV",{class:!0});var x=ee(b);O.l(x),x.forEach(q),T.forEach(q),N.forEach(q),m.forEach(q),g.forEach(q),this.h()},h(){J(r,"class","as-fixed as-inset-0 as-bg-gray-500 as-bg-opacity-25"),Ve(r,"as-hidden",!t[0]),J(p,"class","as-flex-grow"),J(k,"class","as-w-6 as-h-6"),J(y,"class","as-bg-transparent as-border-0 as-text-black as-outline-none focus:as-outline-none"),J(l,"class","as-flex as-items-start as-justify-between as-px-4 as-pt-4"),J(b,"class","as-relative as-p-4 as-flex-auto"),J(o,"class","as-relative as-bg-white as-text-left as-overflow-hidden as-shadow-xl sm:as-my-8 sm:as-container sm:as-w-full"),J(i,"class","as-flex as-items-end sm:as-items-center as-justify-center as-min-h-full as-p-4 as-text-center sm:as-p-0"),J(s,"class","as-fixed as-z-10 as-inset-0 as-overflow-y-auto"),Ve(s,"as-hidden",!t[0]),J(e,"class","as-relative as-z-10"),J(e,"role","dialog"),J(e,"aria-modal","true")},m(a,g){K(a,e,g),Z(e,r),Z(e,n),Z(e,s),Z(s,i),Z(i,o),Z(o,l),Z(l,p),j.m(p,null),Z(l,A),Z(l,y),Z(y,k),ve(P,k,null),Z(o,w),Z(o,b),O.m(b,null),v=!0,M||(E=be(y,"click",t[2]),M=!0)},p(a,g){g&1&&Ve(r,"as-hidden",!a[0]),g&2&&Fe(_,_=a[1])?(Qe(),se(j,1,1,Se),Ze(),j=nn(a),j.c(),ne(j,1),j.m(p,null)):j.p(a,g),g&2&&Fe(S,S=a[1])?(Qe(),se(O,1,1,Se),Ze(),O=sn(a),O.c(),ne(O,1),O.m(b,null)):O.p(a,g),g&1&&Ve(s,"as-hidden",!a[0])},i(a){v||(ne(j),ne(P.$$.fragment,a),ne(O),v=!0)},o(a){se(j),se(P.$$.fragment,a),se(O),v=!1},d(a){a&&q(e),j.d(a),_e(P),O.d(a),M=!1,E()}}}function Si(t){let e,r;return e=new vi({props:{$$slots:{default:[Pi]},$$scope:{ctx:t}}}),{c(){ge(e.$$.fragment)},l(n){ye(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},p(n,[s]){const i={};s&67&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){_e(e,n)}}}function Ti(t,e,r){let{$$slots:n={},$$scope:s}=e,{onClose:i=()=>{}}=e,{open:o=!1}=e,l=tn(),p;function _(){r(0,o=!1),i()}return t.$$set=A=>{"onClose"in A&&r(3,i=A.onClose),"open"in A&&r(0,o=A.open),"$$scope"in A&&r(6,s=A.$$scope)},t.$$.update=()=>{t.$$.dirty&17&&p!==o&&(r(1,l=tn()),r(4,p=o))},[o,l,_,i,p,n,s]}class on extends Te{constructor(e){super(),Ae(this,e,Ti,Si,Fe,{onClose:3,open:0})}}var Ai=Object.assign;function hr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return typeof t=="function"?t.apply(void 0,e):t}function Yn(t){function e(s,i){var o,l,p=r();return s=Ai({},p||{},(o=hr(t,s,p))!==null&&o!==void 0?o:s),o=n.ctx=Object.freeze(s),n.ancestry.unshift(o),i=i(o),n.ancestry.shift(),n.ctx=(l=n.ancestry[0])!==null&&l!==void 0?l:null,i}function r(){return n.ctx}var n={ancestry:[]};return{bind:function(s,i){return function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return e(s,function(){return i.apply(void 0,o)})}},run:e,use:r,useX:function(s){var i,o=n.ctx;if(s=(i=hr(s))!==null&&i!==void 0?i:"Context was used after it was closed",!o)throw s instanceof String?s.valueOf():Error(s&&hr(s));return n.ctx}}}var Tt=Object.assign;function Mr(t){return typeof t=="function"}function Pe(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(void 0,e)}}function Kn(t){return t===null}var ki=Pe(Kn);function Ur(t){return t===void 0}var Ni=Pe(Ur);function nr(t){return t===null||Ur(t)}var Ri=Pe(nr);function He(t){return String(t)===t}function Xn(t,e){return He(t)&&He(e)&&t.endsWith(e)}var Ii=Pe(Xn);function Qn(t,e){return t===e}var Oi=Pe(Qn);function We(t){var e=Number(t);return!(isNaN(parseFloat(String(t)))||isNaN(Number(t))||!isFinite(e))}var xi=Pe(We);function Pt(t,e){return We(t)&&We(e)&&Number(t)>Number(e)}function Mt(t,e){return We(t)&&We(e)&&Number(t)===Number(e)}var Ci=Pe(Mt);function Lt(t,e){return Mt(t,e)||Pt(t,e)}function Dr(t){return!!Array.isArray(t)}var Mi=Pe(Dr);function Zn(t,e){return!!(Dr(e)||He(e)&&He(t))&&e.indexOf(t)!==-1}var Ui=Pe(Zn);function St(t,e){return We(t)&&We(e)&&Number(t)<Number(e)}function Bt(t,e){return Mt(t,e)||St(t,e)}function es(t,e,r){return Lt(t,e)&&Bt(t,r)}var Di=Pe(es);function ts(t){return nr(t)||He(t)&&!t.trim()}var ji=Pe(ts);function At(t){return!!t===t}var Fi=Pe(At);function jr(t){return typeof t=="number"}var Li=Pe(jr);function Ht(t,e){return Mt(t.length,e)}var Bi=Pe(Ht);function Fr(t){return!t||(jr(t)?t===0:Object.prototype.hasOwnProperty.call(t,"length")?Ht(t,0):typeof t=="object"&&Ht(Object.keys(t),0))}var $i=Pe(Fr);function rs(t,e){return t in e}var qi=Pe(rs);function ns(t){return Number.isNaN(t)}var Gi=Pe(ns),Vi=Pe(He);function ss(t){return!!t}var Wi=Pe(ss);function is(t,e){if(nr(e))return!1;for(var r in e)if(e[r]===t)return!0;return!1}var Hi=Pe(is);function os(t,e){return e instanceof RegExp?e.test(t):!!He(e)&&new RegExp(e).test(t)}var Ji=Pe(os);function an(t,e){return He(t)&&He(e)&&t.startsWith(e)}var st={condition:function(t,e){try{return e(t)}catch{return!1}},doesNotEndWith:Ii,doesNotStartWith:Pe(an),endsWith:Xn,equals:Qn,greaterThan:Pt,greaterThanOrEquals:Lt,gt:Pt,gte:Lt,inside:Zn,isArray:Dr,isBetween:es,isBlank:ts,isBoolean:At,isEmpty:Fr,isEven:function(t){return!!We(t)&&t%2==0},isFalsy:Wi,isKeyOf:rs,isNaN:ns,isNegative:function(t){return St(t,0)},isNotArray:Mi,isNotBetween:Di,isNotBlank:ji,isNotBoolean:Fi,isNotEmpty:$i,isNotKeyOf:qi,isNotNaN:Gi,isNotNull:ki,isNotNullish:Ri,isNotNumber:Li,isNotNumeric:xi,isNotString:Vi,isNotUndefined:Ni,isNotValueOf:Hi,isNull:Kn,isNullish:nr,isNumber:jr,isNumeric:We,isOdd:function(t){return!!We(t)&&t%2!=0},isPositive:function(t){return Pt(t,0)},isString:He,isTruthy:ss,isUndefined:Ur,isValueOf:is,lengthEquals:Ht,lengthNotEquals:Bi,lessThan:St,lessThanOrEquals:Bt,longerThan:function(t,e){return Pt(t.length,e)},longerThanOrEquals:function(t,e){return Lt(t.length,e)},lt:St,lte:Bt,matches:os,notEquals:Oi,notInside:Ui,notMatches:Ji,numberEquals:Mt,numberNotEquals:Ci,shorterThan:function(t,e){return St(t.length,e)},shorterThanOrEquals:function(t,e){return Bt(t.length,e)},startsWith:an};function Lr(t){for(var e in st){var r=st[e];Mr(r)&&t(e,r)}}var Br=Yn(function(t,e){var r={value:t.value,meta:t.meta||{}};return e?t.set?Tt(r,{parent:function(){return e&&{value:e.value,meta:e.meta,parent:e.parent}}}):e:Tt(r,{parent:zi})});function zi(){return null}function Ot(t,e,r){if(r||arguments.length===2)for(var n,s=0,i=e.length;s<i;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))}function sr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return Mr(t)?t.apply(void 0,e):t}function as(t,e){if(!t)throw e instanceof String?e.valueOf():Error(e&&sr(e))}function $r(){try{return Mr(Proxy)}catch{return!1}}function Yi(t,e){var r;return(r=sr(t))!==null&&r!==void 0?r:e}function Jt(t,e){return t={pass:t},e&&(t.message=e),t}function us(t,e,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return as(At(t)||t&&At(t.pass),"Incorrect return value for rule: "+JSON.stringify(t)),At(t)?Jt(t):Jt(t.pass,sr.apply(void 0,Ot([t.message,e,r],n,!1)))}function un(t){function e(s,i,o){return function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return as((p=us.apply(void 0,Ot([Br.run({value:t},function(){return i.apply(void 0,Ot([t],l,!1))}),o,t],l,!1))).pass,Fr(p.message)?"enforce/".concat(o," failed with ").concat(JSON.stringify(t)):new String(p.message)),s}}var r={};if(!$r())return Lr(function(s,i){r[s]=e(r,i,s)}),r;var n=new Proxy(r,{get:function(s,i){if(s=st[i])return e(n,s,i)}});return n}function Ki(t,e){function r(o){n=!0,s=o}for(var n=!1,s=null,i=0;i<t.length;i++)if(e(t[i],r,i),n)return s}function ln(t){var e,r=[];return function n(s){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var l=st[s];r.push(function(_){return us.apply(void 0,Ot([l.apply(void 0,Ot([_],i,!1)),s,_],i,!1))});var p={run:function(_){return Yi(Ki(r,function(A,y){var k,P=Br.run({value:_},function(){return A(_)});P.pass||y(Jt(!!P.pass,(k=sr(e,_,P.message))!==null&&k!==void 0?k:P.message))}),Jt(!0))},test:function(_){return p.run(_).pass},message:function(_){return _&&(e=_),p}};return $r()?p=new Proxy(p,{get:function(_,A){return st[A]?n(A):_[A]}}):(Lr(function(_){p[_]=n(_)}),p)}}(t)}var fr=function(){function t(){if(!$r())return Lr(function(r){e[r]=ln(r)}),Tt(un,e)}var e={context:function(){return Br.useX()},extend:function(r){Tt(st,r),t()}};return t(),new Proxy(Tt(un,e),{get:function(r,n){return n in r?r[n]:st[n]?ln(n):void 0}})}(),cn,ls=(cn=0,function(){return"".concat(cn++)});function ir(t){return String(t)===t}function qr(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(void 0,e)}}var nt=Object.assign;function zt(t){var e=Number(t);return!(isNaN(parseFloat(String(t)))||isNaN(Number(t))||!isFinite(e))}function vr(t,e){return zt(t)&&zt(e)&&Number(t)===Number(e)}function xt(t,e){return zt(t)&&zt(e)&&Number(t)>Number(e)}function or(t){function e(s,i){var o=e.get(s);return o?o[1]:(i=i(),n.unshift([s.concat(),i]),xt(n.length,t)&&(n.length=t),i)}function r(s){return n.findIndex(function(i){var o=i[0];return vr(s.length,o.length)&&s.every(function(l,p){return l===o[p]})})}t===void 0&&(t=1);var n=[];return e.invalidate=function(s){-1<(s=r(s))&&n.splice(s,1)},e.get=function(s){return n[r(s)]||null},e}var Xi=qr(function(t){return t===null});function $e(t){return typeof t=="function"}function ct(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return $e(t)?t.apply(void 0,e):t}function cs(t,e){var r;return(r=ct(t))!==null&&r!==void 0?r:e}function Gr(t){return(t=[].concat(t))[t.length-1]}function _r(t,e){for(var r=[],n=0;n<t.length;n++){var s=t[n];Array.isArray(s)?r.push(_r(s,e)):(s=e(s),Xi(s)&&r.push(s))}return r}function hs(t){return[].concat(t).reduce(function(e,r){return Array.isArray(r)?e.concat(hs(r)):[].concat(e).concat(r)},[])}function Yt(t,e){var r=0;for(e=e.slice(0,-1);r<e.length;r++){var n=e[r];t[n]=cs(t[n],[]),t=t[n]}return t}var ht,Le=ht||(ht={});Le[Le.DEFAULT=0]="DEFAULT",Le[Le.SUITE=1]="SUITE",Le[Le.EACH=2]="EACH",Le[Le.SKIP_WHEN=3]="SKIP_WHEN",Le[Le.OMIT_WHEN=4]="OMIT_WHEN",Le[Le.GROUP=5]="GROUP";var Kt,Dt=Kt||(Kt={});function Qi(){var t=0;return{current:function(){return t},next:function(){t++}}}function fs(t,e){return e===void 0&&(e=[]),{cursor:Qi(),keys:{current:{},prev:{}},path:e,type:t}}Dt[Dt.ALL=0]="ALL",Dt[Dt.EAGER=1]="EAGER";var pe=Yn(function(t,e){return e?null:nt({},{exclusion:{tests:{},groups:{}},inclusion:{},isolate:fs(ht.DEFAULT),mode:[Kt.ALL]},t)});function xe(){return pe.useX().stateRef}function ds(t){return xe().optionalFields()[0][t]}function Zi(t,e){(0,xe().optionalFields()[1])(function(r){var n;return nt(r,((n={})[t]=ct(e,r[t]),n))})}function Vr(t){var e;return(e=ds(t))===null||e===void 0?void 0:e[0]}function br(){ft(function(t){return t})}function ft(t){(0,xe().testObjects()[1])(function(e){return{prev:e.prev,current:[].concat(t(e.current))}})}function Wr(){return qe().filter(function(t){return t.isPending()})}var eo=or();function qe(){var t=xe().testObjects()[0].current;return eo([t],function(){return hs(t)})}var kt,hn=kt||(kt={});hn.Error="error",hn.Warning="warning";var ps=function(){function t(e,r,n){var s=n===void 0?{}:n;n=s.message;var i=s.groupName;s=s.key,this.key=null,this.id=ls(),this.severity=kt.Error,this.status=dr,this.fieldName=e,this.testFn=r,i&&(this.groupName=i),n&&(this.message=n),s&&(this.key=s)}return t.prototype.run=function(){try{var e=this.testFn()}catch(r){e=r,this.message===void 0&&ir(e)&&(this.message=r),e=!1}return e===!1&&this.fail(),e},t.prototype.setStatus=function(e){this.isFinalStatus()&&e!==pr||(this.status=e)},t.prototype.warns=function(){return this.severity===kt.Warning},t.prototype.setPending=function(){this.setStatus(gn)},t.prototype.fail=function(){this.setStatus(this.warns()?pn:dn)},t.prototype.done=function(){this.isFinalStatus()||this.setStatus(mn)},t.prototype.warn=function(){this.severity=kt.Warning},t.prototype.isFinalStatus=function(){return this.hasFailures()||this.isCanceled()||this.isPassing()},t.prototype.skip=function(e){this.isPending()&&!e||this.setStatus(fn)},t.prototype.cancel=function(){this.setStatus(yn),br()},t.prototype.reset=function(){this.status=dr,br()},t.prototype.omit=function(){this.setStatus(pr)},t.prototype.valueOf=function(){return!this.isFailing()},t.prototype.hasFailures=function(){return this.isFailing()||this.isWarning()},t.prototype.isNonActionable=function(){return this.isSkipped()||this.isOmitted()||this.isCanceled()},t.prototype.isPending=function(){return this.statusEquals(gn)},t.prototype.isTested=function(){return this.hasFailures()||this.isPassing()},t.prototype.isOmitted=function(){return this.statusEquals(pr)},t.prototype.isUntested=function(){return this.statusEquals(dr)},t.prototype.isFailing=function(){return this.statusEquals(dn)},t.prototype.isCanceled=function(){return this.statusEquals(yn)},t.prototype.isSkipped=function(){return this.statusEquals(fn)},t.prototype.isPassing=function(){return this.statusEquals(mn)},t.prototype.isWarning=function(){return this.statusEquals(pn)},t.prototype.statusEquals=function(e){return this.status===e},t}(),dr="UNTESTED",fn="SKIPPED",dn="FAILED",pn="WARNING",mn="PASSING",gn="PENDING",yn="CANCELED",pr="OMITTED";function dt(t,e){if(!t)throw e instanceof String?e.valueOf():Error(e&&ct(e))}function to(t){function e(i,o,l){return n.references.push(),r(i,ct(o,l)),function(){return[n.references[i],function(p){return r(i,ct(p,n.references[i]))}]}}function r(i,o){var l=n.references[i];n.references[i]=o,$e(i=s[i][1])&&i(o,l),$e(t)&&t()}var n={references:[]},s=[];return{registerStateKey:function(i,o){var l=s.length;return s.push([i,o]),e(l,i)},reset:function(){var i=n.references;n.references=[],s.forEach(function(o,l){return e(l,o[0],i[l])})}}}function ro(t,e){var r=e.suiteId;return e=e.suiteName,{optionalFields:t.registerStateKey(function(){return{}}),suiteId:t.registerStateKey(r),suiteName:t.registerStateKey(e),testCallbacks:t.registerStateKey(function(){return{fieldCallbacks:{},doneCallbacks:[]}}),testObjects:t.registerStateKey(function(n){return{prev:n?n.current:[],current:[]}})}}function wr(t){return t==null}function vn(t){setTimeout(function(){throw Error(t)},0)}function no(t,e){t=(t=t.type)===void 0?ht.DEFAULT:t,dt($e(e));var r=fs(t,Xt());return t=pe.run({isolate:r},function(){return r.keys.prev=function(){var n=xe().testObjects()[0].prev;return[].concat(Yt(n,Xt())).reduce(function(s,i){return i instanceof ps&&!wr(i.key)&&(s[i.key]=i),s},{})}(),ft(function(n){var s=r.path;return Yt(n,s)[Gr(s)]=[],n}),e()}),ze().cursor.next(),t}function ze(){return pe.useX().isolate}function Xt(){var t=ze();return t.path.concat(t.cursor.current())}var Ce,_n=Ce||(Ce={});_n.WARNINGS="warnings",_n.ERRORS="errors";var pt,bn=pt||(pt={});function Hr(t){return t===Ce.ERRORS?pt.ERROR_COUNT:pt.WARN_COUNT}function _t(t){return!t||(typeof t=="number"?t===0:Object.prototype.hasOwnProperty.call(t,"length")?vr(t.length,0):typeof t=="object"&&vr((t=Object.keys(t)).length,0))}bn.ERROR_COUNT="errorCount",bn.WARN_COUNT="warnCount";var ar=qr(_t);function it(t,e){return!(!e||t.fieldName!==e)}var mr=qr(function(t,e){return t.groupName===e});function ms(t,e){return qe().some(function(r){return gs(r,t,e)})}function gs(t,e,r){return(r=!t.hasFailures()||r&&!it(t,r))||(t=t.warns(),r=e===Ce.WARNINGS!=!!t),!r}function wn(t){return!!ys(t)||!ms(Ce.ERRORS,t)&&!_t(qe())&&!function(e){return ar(Wr().filter(function(r){return vs(r,e)}))}(t)&&function(e){return qe().every(function(r){return!(!e||it(r,e))||_s(r,e)})}(t)}function ys(t){return!!t&&((e=ds(t))===null||e===void 0?void 0:e[1])===!0;var e}function vs(t,e){return!(e&&!it(t,e))&&Vr(t.fieldName)!==!0}function _s(t,e){return!(!e||it(t,e))||Vr(t.fieldName)===!0||t.isTested()||t.isOmitted()}function bt(){var t=pe.useX().summary;return dt(t),t}function so(){var t=qe(),e=nt({errorCount:0,warnCount:0,testCount:0},{groups:{},tests:{},valid:!1});return t.reduce(function(r,n){var s=r.tests;s[n.fieldName]=En(s,n),s[n.fieldName].valid=s[n.fieldName].valid!==!1&&wn(n.fieldName);var i=r.groups,o=n.groupName;return o&&(i[o]=i[o]||{},i[o][n.fieldName]=En(i[o],n),s=i[o][n.fieldName],i[o][n.fieldName].valid===!1?n=!1:n=!!ys(n=n.fieldName)||!function(l,p,_){return qe().some(function(A){return!mr(A,p)&&gs(A,l,_)})}(Ce.ERRORS,o,n)&&!function(l,p){return ar(Wr().filter(function(_){return!mr(_,l)&&vs(_,p)}))}(o,n)&&function(l,p){return qe().every(function(_){return!!mr(_,l)||_s(_,p)})}(o,n),s.valid=n),r},e),e.valid=wn(),function(r){for(var n in r.tests)r.errorCount+=r.tests[n].errorCount,r.warnCount+=r.tests[n].warnCount,r.testCount+=r.tests[n].testCount;return r}(e)}function En(t,e){function r(o){var l=Hr(o);i[l]++,s&&(i[o]=(i[o]||[]).concat(s))}var n=e.fieldName,s=e.message;t[n]=t[n]||nt({errorCount:0,warnCount:0,testCount:0},{errors:[],warnings:[]});var i=t[n];return e.isNonActionable()||(t[n].testCount++,e.isFailing()?r(Ce.ERRORS):e.isWarning()&&r(Ce.WARNINGS)),i}function bs(t,e,r){var n;return((n=t==null?void 0:t[r])===null||n===void 0?void 0:n[e])||[]}function ws(t,e){var r,n={},s=Hr(e);for(r in t)xt(t[r][s],0)&&(n[r]=t[r][e]||[]);return n}function io(t){return Es(Ce.ERRORS,t)}function oo(t){return Es(Ce.WARNINGS,t)}function Es(t,e){var r=bt().tests;return e?bs(r,t,e):ws(r,t)}function ao(t,e){return Ps(t,Ce.ERRORS,e)}function uo(t,e){return Ps(t,Ce.WARNINGS,e)}function Ps(t,e,r){return t=bt().groups[t],r?bs(t,e,r):ws(t,e)}function lo(t){return Ss(pt.ERROR_COUNT,t)}function co(t){return Ss(pt.WARN_COUNT,t)}function Ss(t,e){var r,n=bt();return xt(e?(r=n.tests[e])===null||r===void 0?void 0:r[t]:n[t],0)}function ho(t,e){return Ts(Ce.ERRORS,t,e)}function fo(t,e){return Ts(Ce.WARNINGS,t,e)}function Ts(t,e,r){var n,s,i=bt();if(t=Hr(t),!(e=i.groups[e]))return!1;if(r)return xt((n=e[r])===null||n===void 0?void 0:n[t],0);for(var o in e)if(xt((s=e[o])===null||s===void 0?void 0:s[t],0))return!0;return!1}function po(t){var e=bt();return t?!!Er(e.tests,t):e.valid}function mo(t,e){if(!(t=bt().groups[t]))return!1;if(e)return Er(t,e);for(var r in t)if(!Er(t,r))return!1;return!0}function Er(t,e){var r;return!((r=t[e])===null||r===void 0||!r.valid)}var go=or(1);function Jr(){var t=qe(),e={stateRef:xe()};return go([t],pe.bind(e,function(){var r=so(),n=xe().suiteName()[0],s={summary:r};return nt(r,{getErrors:pe.bind(s,io),getErrorsByGroup:pe.bind(s,ao),getWarnings:pe.bind(s,oo),getWarningsByGroup:pe.bind(s,uo),hasErrors:pe.bind(s,lo),hasErrorsByGroup:pe.bind(s,ho),hasWarnings:pe.bind(s,co),hasWarningsByGroup:pe.bind(s,fo),isValid:pe.bind(s,po),isValidByGroup:pe.bind(s,mo),suiteName:n})}))}function Qt(t){var e=Wr();return!_t(e)&&(t?e.some(function(r){return it(r,t)}):ar(e))}var yo=or(20);function As(){var t=qe(),e={stateRef:xe()};return yo([t],pe.bind(e,function(){return nt({},Jr(),{done:pe.bind(e,bo)})}))}function vo(t,e,r){return!($e(t)&&(!e||r.tests[e]&&!_t(r.tests[e].testCount)))}function _o(t){return!(Qt()&&(!t||Qt(t)))}function bo(){function t(){return n(Jr())}for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=(e=e.reverse())[0];return e=e[1],r=As(),vo(n,e,r)?r:_o(e)?(t(),r):(wo(t,e),r)}function wo(t,e){(0,xe().testCallbacks()[1])(function(r){return e?r.fieldCallbacks[e]=(r.fieldCallbacks[e]||[]).concat(t):r.doneCallbacks.push(t),r})}function Pn(t){return t.forEach(function(e){return e()})}function Eo(){var t=function(){var e={};return{emit:function(r,n){(e[r]||[]).forEach(function(s){s(n)})},on:function(r,n){return e[r]=(e[r]||[]).concat(n),{off:function(){e[r]=(e[r]||[]).filter(function(s){return s!==n})}}}}}();return t.on(je.TEST_COMPLETED,function(e){if(!e.isCanceled()){e.done(),e=e.fieldName;var r=xe().testCallbacks()[0].fieldCallbacks;e&&!Qt(e)&&Array.isArray(r[e])&&Pn(r[e]),Qt()||t.emit(je.ALL_RUNNING_TESTS_FINISHED)}}),t.on(je.SUITE_CALLBACK_DONE_RUNNING,function(){(function(){function e(n){r[n.fieldName]&&(n.omit(),Zi(n.fieldName,function(s){return[s[0],!0]}))}if(!_t(xe().optionalFields()[0])){var r={};ft(function(n){return _r(n,function(s){if(Object.prototype.hasOwnProperty.call(r,s.fieldName))e(s);else{var i=Vr(s.fieldName);$e(i)&&(r[s.fieldName]=i(),e(s))}return s})})}})()}),t.on(je.ALL_RUNNING_TESTS_FINISHED,function(){Pn(xe().testCallbacks()[0].doneCallbacks)}),t.on(je.REMOVE_FIELD,function(e){qe().forEach(function(r){it(r,e)&&(r.cancel(),function(n){ft(function(s){return _r(s,function(i){return n!==i?i:null})})}(r))})}),t.on(je.RESET_FIELD,function(e){qe().forEach(function(r){it(r,e)&&r.reset()})}),t}function ks(){var t=pe.useX();return dt(t.bus),t.bus}var je,Et=je||(je={});function Ns(t){return Rs(0,"tests",t)}function Rs(t,e,r){var n=pe.useX("hook called outside of a running suite.");r&&[].concat(r).forEach(function(s){ir(s)&&(n.exclusion[e][s]=t===0)})}function Sn(t){for(var e in t)if(t[e]===!0)return!0;return!1}function Tn(){var t,e=pe.useX().exclusion;for(t in e.groups)if(e.groups[t])return!0;return!1}function Po(t,e,r){if(r||arguments.length===2)for(var n,s=0,i=e.length;s<i;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))}function An(t){var e=t.asyncTest,r=t.message;if(e&&$e(e.then)){var n=ks().emit,s=xe(),i=pe.bind({stateRef:s},function(){br(),n(je.TEST_COMPLETED,t)});s=pe.bind({stateRef:s},function(o){t.isCanceled()||(t.message=ir(o)?o:r,t.fail(),i())});try{e.then(i,s)}catch{s()}}}function kn(t){var e=xe().testObjects()[0].prev;if(_t(e))return $t(t),t;var r=Xt();if(e=Yt(e,r)[Gr(r)],!wr(t.key)){e=t.key,(r=ze().keys.prev[e])&&(t=r),r=t;var n=ze().keys.current;return wr(n[e])?n[e]=r:vn('Encountered the same test key "'.concat(e,`" twice. This may lead to tests overriding each other's results, or to tests being unexpectedly omitted.`)),$t(t),t}return!ar(r=e)||r.fieldName===t.fieldName&&r.groupName===t.groupName||(ze().type===ht.EACH||vn(`Vest Critical Error: Tests called in different order than previous run.
    expected: `.concat(e.fieldName,`
    received: `).concat(t.fieldName,`
    This can happen on one of two reasons:
    1. You're using if/else statements to conditionally select tests. Instead, use "skipWhen".
    2. You are iterating over a list of tests, and their order changed. Use "each" and a custom key prop so that Vest retains their state.`)),function(){var s=ze().cursor.current();ft(function(i){return i.splice(s),i})}(),e=null),$t(t=cs(e,t)),t}function $t(t){var e=Xt();ft(function(r){return Yt(r,e)[Gr(e)]=t,r})}function Is(t){var e=ze().cursor,r=Kt.EAGER;if(r=!(pe.useX().mode[0]!==r||!ms(Ce.ERRORS,t.fieldName)))return t.skip(),kn(t),e.next(),t;if(r=kn(t),pe.useX().omitted)return r.omit(),e.next(),r;if(function(s){var i=s.fieldName;if(s=s.groupName,pe.useX().skipped)return!0;var o=pe.useX(),l=o.exclusion;o=o.inclusion;var p=l.tests,_=p[i];if(_===!1)return!0;if(_=_===!0,s){var A=pe.useX().exclusion.groups;if(A=Object.prototype.hasOwnProperty.call(A,s)?A[s]===!1:Tn())return!0;if(l.groups[s]===!0)return!(_||!Sn(p)&&p[i]!==!1)}return(s=!!Tn()&&!s)||!_&&!!Sn(p)&&!ct(o[i])}(t))return r.skip(!!pe.useX().skipped),e.next(),r;if(t!==r&&r.fieldName===t.fieldName&&r.groupName===t.groupName&&r.isPending()&&r.cancel(),$t(t),t.isUntested()){r=ks();var n=function(s){return pe.run({currentTest:s},function(){return s.run()})}(t);try{n&&$e(n.then)?(t.asyncTest=n,t.setPending(),An(t)):r.emit(je.TEST_COMPLETED,t)}catch(s){throw Error(`Unexpected error encountered during test registration.
      Test Object: `.concat(JSON.stringify(t),`.
      Error: `).concat(s,"."))}}else(r=t.asyncTest)&&$e(r.then)&&(t.setPending(),An(t));return e.next(),t}function Nn(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=$e(e[1])?e:Po([void 0],e,!0);e=n[0],r=n[1],n=n[2],dt(ir(t),Rn("fieldName","string")),dt($e(r),Rn("Test callback","function"));var s=pe.useX();return Is(e=new ps(t,r,{message:e,groupName:s.groupName,key:n}))}Et.TEST_COMPLETED="test_completed",Et.ALL_RUNNING_TESTS_FINISHED="all_running_tests_finished",Et.REMOVE_FIELD="remove_field",Et.RESET_FIELD="reset_field",Et.SUITE_CALLBACK_DONE_RUNNING="suite_callback_done_running",Ns.group=function(t){return Rs(0,"groups",t)};var gr=nt(Nn,{memo:function(t){var e=or(10);return function(r){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];s=ze().cursor.current();var i=(n=n.reverse())[0],o=n[1],l=n[2];return s=[xe().suiteId()[0],r,s].concat(i),(n=e.get(s))===null?e(s,function(){return t(r,l,o)}):n[1].isCanceled()?(e.invalidate(s),e(s,function(){return t(r,l,o)})):Is(n[1])}}(Nn)});function Rn(t,e){return"Incompatible params passed to test function. ".concat(t," must be a ").concat(e)}function So(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(t=t.reverse())[0];t=t[1],dt($e(r),"vest.create: Expected callback to be a function.");var n=Eo(),s=to();return t={stateRef:ro(s,{suiteId:ls(),suiteName:t}),bus:n},nt(pe.bind(t,function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return s.reset(),no({type:ht.SUITE},function(){r.apply(void 0,i)}),n.emit(je.SUITE_CALLBACK_DONE_RUNNING),As()}),{get:pe.bind(t,Jr),remove:pe.bind(t,function(i){n.emit(je.REMOVE_FIELD,i)}),reset:s.reset,resetField:pe.bind(t,function(i){n.emit(je.RESET_FIELD,i)})})}function To(t){let e;return{c(){e=Ye("path"),this.h()},l(r){e=Ke(r,"path",{d:!0}),ee(e).forEach(q),this.h()},h(){J(e,"d","M256 105c-101.8 0-188.4 62.4-224 151 35.6 88.6 122.2 151 224 151s188.4-62.4 224-151c-35.6-88.6-122.2-151-224-151zm0 251.7c-56 0-101.8-45.3-101.8-100.7S200 155.3 256 155.3 357.8 200.6 357.8 256 312 356.7 256 356.7zm0-161.1c-33.6 0-61.1 27.2-61.1 60.4s27.5 60.4 61.1 60.4 61.1-27.2 61.1-60.4-27.5-60.4-61.1-60.4z")},m(r,n){K(r,e,n)},p:Se,d(r){r&&q(e)}}}function Ao(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[To]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=ke(s,n[i]);return e=new yt({props:s}),{c(){ge(e.$$.fragment)},l(i){ye(e.$$.fragment,i)},m(i,o){ve(e,i,o),r=!0},p(i,[o]){const l=o&1?mt(n,[n[0],gt(i[0])]):{};o&2&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){_e(e,i)}}}function ko(t,e,r){return t.$$set=n=>{r(0,e=ke(ke({},e),Be(n)))},e=Be(e),[e]}class No extends Te{constructor(e){super(),Ae(this,e,ko,Ao,tt,{})}}function Ro(t){let e;return{c(){e=Ye("path"),this.h()},l(r){e=Ke(r,"path",{d:!0}),ee(e).forEach(q),this.h()},h(){J(e,"d","M256.1 144.8c56.2 0 101.9 45.3 101.9 101.1 0 13.1-2.6 25.5-7.3 37l59.5 59c30.8-25.5 55-58.4 69.9-96-35.3-88.7-122.3-151.6-224.2-151.6-28.5 0-55.8 5.1-81.1 14.1l44 43.7c11.6-4.6 24.1-7.3 37.3-7.3zM52.4 89.7l46.5 46.1 9.4 9.3c-33.9 26-60.4 60.8-76.3 100.8 35.2 88.7 122.2 151.6 224.1 151.6 31.6 0 61.7-6.1 89.2-17l8.6 8.5 59.7 59 25.9-25.7L78.2 64 52.4 89.7zM165 201.4l31.6 31.3c-1 4.2-1.6 8.7-1.6 13.1 0 33.5 27.3 60.6 61.1 60.6 4.5 0 9-.6 13.2-1.6l31.6 31.3c-13.6 6.7-28.7 10.7-44.8 10.7-56.2 0-101.9-45.3-101.9-101.1 0-15.8 4.1-30.7 10.8-44.3zm87.8-15.7l64.2 63.7.4-3.2c0-33.5-27.3-60.6-61.1-60.6l-3.5.1z")},m(r,n){K(r,e,n)},p:Se,d(r){r&&q(e)}}}function Io(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[Ro]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=ke(s,n[i]);return e=new yt({props:s}),{c(){ge(e.$$.fragment)},l(i){ye(e.$$.fragment,i)},m(i,o){ve(e,i,o),r=!0},p(i,[o]){const l=o&1?mt(n,[n[0],gt(i[0])]):{};o&2&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){_e(e,i)}}}function Oo(t,e,r){return t.$$set=n=>{r(0,e=ke(ke({},e),Be(n)))},e=Be(e),[e]}class xo extends Te{constructor(e){super(),Ae(this,e,Oo,Io,tt,{})}}function Co(t){let e,r,n,s,i;return{c(){e=Ye("path"),r=ue(),n=Ye("path"),s=ue(),i=Ye("path"),this.h()},l(o){e=Ke(o,"path",{d:!0}),ee(e).forEach(q),r=le(o),n=Ke(o,"path",{d:!0}),ee(n).forEach(q),s=le(o),i=Ke(o,"path",{d:!0}),ee(i).forEach(q),this.h()},h(){J(e,"d","M352 115h90c3.3 0 6-2.7 6-6 0-8.2-3.7-16-10-21.3l-77.1-64.2c-4.9-4.1-14.2-7.4-20.6-7.4-4.1 0-7.4 3.3-7.4 7.4V96c.1 10.5 8.6 19 19.1 19z"),J(n,"d","M307 96V16H176c-17.6 0-32 14.4-32 32v336c0 17.6 14.4 32 32 32h240c17.6 0 32-14.4 32-32V141h-96c-24.8 0-45-20.2-45-45z"),J(i,"d","M116 412V80H96c-17.6 0-32 14.4-32 32v352c0 17.6 14.4 32 32 32h256c17.6 0 32-14.4 32-32v-20H148c-17.6 0-32-14.4-32-32z")},m(o,l){K(o,e,l),K(o,r,l),K(o,n,l),K(o,s,l),K(o,i,l)},p:Se,d(o){o&&q(e),o&&q(r),o&&q(n),o&&q(s),o&&q(i)}}}function Mo(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[Co]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=ke(s,n[i]);return e=new yt({props:s}),{c(){ge(e.$$.fragment)},l(i){ye(e.$$.fragment,i)},m(i,o){ve(e,i,o),r=!0},p(i,[o]){const l=o&1?mt(n,[n[0],gt(i[0])]):{};o&2&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){_e(e,i)}}}function Uo(t,e,r){return t.$$set=n=>{r(0,e=ke(ke({},e),Be(n)))},e=Be(e),[e]}class Do extends Te{constructor(e){super(),Ae(this,e,Uo,Mo,tt,{})}}function jo(t){let e;return{c(){e=Ye("path"),this.h()},l(r){e=Ke(r,"path",{d:!0}),ee(e).forEach(q),this.h()},h(){J(e,"d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z")},m(r,n){K(r,e,n)},p:Se,d(r){r&&q(e)}}}function Fo(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[jo]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=ke(s,n[i]);return e=new yt({props:s}),{c(){ge(e.$$.fragment)},l(i){ye(e.$$.fragment,i)},m(i,o){ve(e,i,o),r=!0},p(i,[o]){const l=o&1?mt(n,[n[0],gt(i[0])]):{};o&2&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){_e(e,i)}}}function Lo(t,e,r){return t.$$set=n=>{r(0,e=ke(ke({},e),Be(n)))},e=Be(e),[e]}class Bo extends Te{constructor(e){super(),Ae(this,e,Lo,Fo,tt,{})}}function $o(t){let e,r,n;return{c(){e=X("input"),this.h()},l(s){e=Q(s,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){J(e,"id",t[2]),J(e,"name",t[3]),J(e,"class","as-input as-flex-1"),J(e,"type","password"),J(e,"placeholder","Enter a Password"),e.disabled=t[6]},m(s,i){K(s,e,i),t[12](e),Ue(e,t[0]),r||(n=[be(e,"input",t[13]),be(e,"input",function(){Zt(t[4])&&t[4].apply(this,arguments)})],r=!0)},p(s,i){t=s,i&4&&J(e,"id",t[2]),i&8&&J(e,"name",t[3]),i&64&&(e.disabled=t[6]),i&1&&e.value!==t[0]&&Ue(e,t[0])},d(s){s&&q(e),t[12](null),r=!1,ot(n)}}}function qo(t){let e,r,n;return{c(){e=X("input"),this.h()},l(s){e=Q(s,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){J(e,"id",t[2]),J(e,"name",t[3]),J(e,"class","as-input as-flex-1"),J(e,"type","text"),J(e,"placeholder","Enter a Password"),e.disabled=t[6]},m(s,i){K(s,e,i),t[10](e),Ue(e,t[0]),r||(n=[be(e,"input",t[11]),be(e,"input",function(){Zt(t[4])&&t[4].apply(this,arguments)})],r=!0)},p(s,i){t=s,i&4&&J(e,"id",t[2]),i&8&&J(e,"name",t[3]),i&64&&(e.disabled=t[6]),i&1&&e.value!==t[0]&&Ue(e,t[0])},d(s){s&&q(e),t[10](null),r=!1,ot(n)}}}function Go(t){let e,r;return e=new xo({}),{c(){ge(e.$$.fragment)},l(n){ye(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){_e(e,n)}}}function Vo(t){let e,r;return e=new No({}),{c(){ge(e.$$.fragment)},l(n){ye(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){_e(e,n)}}}function Wo(t){let e,r,n,s,i,o,l,p,_,A,y,k,P,w,b,S,v,M;function E(N,T){return N[1]?qo:$o}let j=E(t),O=j(t);o=new Bo({}),A=new Do({});const a=[Vo,Go],g=[];function m(N,T){return N[1]?0:1}return w=m(t),b=g[w]=a[w](t),{c(){e=X("div"),O.c(),r=ue(),n=X("div"),s=X("button"),i=X("div"),ge(o.$$.fragment),l=ue(),p=X("button"),_=X("div"),ge(A.$$.fragment),y=ue(),k=X("button"),P=X("div"),b.c(),this.h()},l(N){e=Q(N,"DIV",{class:!0});var T=ee(e);O.l(T),r=le(T),n=Q(T,"DIV",{class:!0});var U=ee(n);s=Q(U,"BUTTON",{class:!0});var H=ee(s);i=Q(H,"DIV",{class:!0});var G=ee(i);ye(o.$$.fragment,G),G.forEach(q),H.forEach(q),l=le(U),p=Q(U,"BUTTON",{class:!0});var $=ee(p);_=Q($,"DIV",{class:!0});var x=ee(_);ye(A.$$.fragment,x),x.forEach(q),$.forEach(q),y=le(U),k=Q(U,"BUTTON",{class:!0});var L=ee(k);P=Q(L,"DIV",{class:!0});var h=ee(P);b.l(h),h.forEach(q),L.forEach(q),U.forEach(q),T.forEach(q),this.h()},h(){J(i,"class","as-w-5 as-h-5"),J(s,"class","as-btn as-p-2"),Ve(s,"opacity-50",!t[6]),J(_,"class","as-w-5 as-h-5"),J(p,"class","as-btn as-p-2"),J(P,"class","as-w-5 as-h-5"),J(k,"class","as-btn as-p-2"),J(n,"class","as-grow-0 as-flex-row as-flex"),J(e,"class","as-flex")},m(N,T){K(N,e,T),O.m(e,null),Z(e,r),Z(e,n),Z(n,s),Z(s,i),ve(o,i,null),Z(n,l),Z(n,p),Z(p,_),ve(A,_,null),Z(n,y),Z(n,k),Z(k,P),g[w].m(P,null),S=!0,v||(M=[be(s,"click",t[9]),be(p,"click",t[8]),be(k,"click",t[7])],v=!0)},p(N,[T]){j===(j=E(N))&&O?O.p(N,T):(O.d(1),O=j(N),O&&(O.c(),O.m(e,r))),T&64&&Ve(s,"opacity-50",!N[6]);let U=w;w=m(N),w!==U&&(Qe(),se(g[U],1,1,()=>{g[U]=null}),Ze(),b=g[w],b||(b=g[w]=a[w](N),b.c()),ne(b,1),b.m(P,null))},i(N){S||(ne(o.$$.fragment,N),ne(A.$$.fragment,N),ne(b),S=!0)},o(N){se(o.$$.fragment,N),se(A.$$.fragment,N),se(b),S=!1},d(N){N&&q(e),O.d(),_e(o),_e(A),g[w].d(),v=!1,ot(M)}}}function Ho(t,e,r){let{id:n=void 0}=e,{name:s=void 0}=e,{secret:i}=e,{onInput:o=()=>{}}=e,{show:l=!1}=e;function p(){r(1,l=!l),l===!1&&r(6,y=!0)}let _;async function A(){_.select(),_.setSelectionRange(0,99999),navigator.clipboard.writeText(_.value)}let y=!0;function k(){r(6,y=!y),y===!1&&r(1,l=!0)}function P(v){et[v?"unshift":"push"](()=>{_=v,r(5,_)})}function w(){i=this.value,r(0,i)}function b(v){et[v?"unshift":"push"](()=>{_=v,r(5,_)})}function S(){i=this.value,r(0,i)}return t.$$set=v=>{"id"in v&&r(2,n=v.id),"name"in v&&r(3,s=v.name),"secret"in v&&r(0,i=v.secret),"onInput"in v&&r(4,o=v.onInput),"show"in v&&r(1,l=v.show)},[i,l,n,s,o,_,y,p,A,k,P,w,b,S]}class Os extends Te{constructor(e){super(),Ae(this,e,Ho,Wo,Fe,{id:2,name:3,secret:0,onInput:4,show:1})}}function In(t,e,r){const n=t.slice();return n[1]=e[r],n}function On(t){let e,r=t[1]+"",n;return{c(){e=X("li"),n=we(r),this.h()},l(s){e=Q(s,"LI",{class:!0});var i=ee(e);n=Ee(i,r),i.forEach(q),this.h()},h(){J(e,"class","as-text-red-500")},m(s,i){K(s,e,i),Z(e,n)},p(s,i){i&1&&r!==(r=s[1]+"")&&Nt(n,r)},d(s){s&&q(e)}}}function Jo(t){let e,r=t[0],n=[];for(let s=0;s<r.length;s+=1)n[s]=On(In(t,r,s));return{c(){e=X("ul");for(let s=0;s<n.length;s+=1)n[s].c()},l(s){e=Q(s,"UL",{});var i=ee(e);for(let o=0;o<n.length;o+=1)n[o].l(i);i.forEach(q)},m(s,i){K(s,e,i);for(let o=0;o<n.length;o+=1)n[o].m(e,null)},p(s,[i]){if(i&1){r=s[0];let o;for(o=0;o<r.length;o+=1){const l=In(s,r,o);n[o]?n[o].p(l,i):(n[o]=On(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},i:Se,o:Se,d(s){s&&q(e),Gs(n,s)}}}function zo(t,e,r){let{messages:n=[]}=e;return t.$$set=s=>{"messages"in s&&r(0,n=s.messages)},[n]}class jt extends Te{constructor(e){super(),Ae(this,e,zo,Jo,Fe,{messages:0})}}const zr={},qt={};class ur{constructor(e,r){if(e!==zr)throw new TypeError("Options can only be created with the some or none functions");this._value=r}static some(e){return Oe(e)}static none(){return Ie()}static from(e){return e!=null?Oe(e):Ie()}static fromJSON(e){return ur.from(e)}isNone(){return this._value===qt}isSome(){return!this.isNone()}expect(e){if(this.isSome())return this._value;throw new Error(typeof e=="function"?e():e)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(e){return this.isSome()?this._value:e}unwrapOrElse(e){return this.isSome()?this._value:e()}map(e){return this.isSome()?Oe(e(this._value)):Ie()}mapOr(e,r){return this.isSome()?Oe(e(this._value)):Oe(r)}mapOrElse(e,r){return this.isSome()?Oe(e(this._value)):Oe(r())}flatMap(e){return this.isSome()?e(this._value):Ie()}flatMapOr(e,r){return this.isSome()?e(this._value):r}flatMapOrElse(e,r){return this.isSome()?e(this._value):r()}and(e){return this.isSome()?e:Ie()}andThen(e){return this.isSome()?e(this._value):Ie()}or(e){return this.isNone()?e:this}orElse(e){return this.isNone()?e():this}xor(e){const r=this.isSome(),n=e.isSome();return r&&!n?this:!r&&n?e:Ie()}filter(e){return this.isSome()&&e(this._value)?this:Ie()}getOrInsert(e){return this.isNone()&&(this._value=e),this}getOrInsertWith(e){return this.isNone()&&(this._value=e()),this}clear(){return this._value=qt,this}take(){if(this.isSome()){const e=this._value;return this._value=qt,Oe(e)}else return Ie()}from(e){return e!=null?this._value=e:this.clear(),this}replace(e){return this._value=e,this}ifSome(e,r){return this.isSome()?e(this._value):r&&r(),this}ifNone(e,r){return this.isNone()?e():r&&r(this._value),this}toJSON(){return this.unwrapOr(null)}toJS(){return this.unwrapOr(null)}}const Oe=t=>new ur(zr,t),Ie=()=>new ur(zr,qt);class me{constructor(e){this._index=0,this._iter=e}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const e=this._iter.next();return e.done?e:{value:[e.value,this._index++]}}enumerate(){throw new Error("iter/Enumerate was not imported!")}peekable(){throw new Error("iter/Peekable was not imported!")}forEach(e){throw new Error("iter/ForEach was not imported!")}map(e){throw new Error("iter/Map was not imported!")}merge(e){throw new Error("iter/Merge was not imported!")}concat(e){return this.merge(e)}filter(e){throw new Error("iter/Filter was not imported!")}step(e){throw new Error("iter/Step was not imported!")}skip(e){throw new Error("iter/Skip was not imported!")}take(e){throw new Error("iter/Take was not imported!")}toMap(e,r){throw new Error("iter/ToMap was not imported!")}count(){return this.reduce(0,e=>e+1)}consume(){let e=this.next();for(;!e.done;)e=this.next();return this}toArray(){return this.reduce([],(e,r)=>(e.push(r),e))}join(e){return this.toArray().join(e)}indexOf(e){let r=this.next(),n=0;for(;!r.done;){if(r.value===e)return n;n++,r=this.next()}return-1}findIndex(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(e(n,s))return s;r=this.nextWithIndex()}return-1}find(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(e(n,s))return Oe(n);r=this.nextWithIndex()}return Ie()}findAll(e){return this.filter(e)}nth(e=0){let r=this.next();for(e<0&&(e=0);!r.done;){if(e--<=0)return Oe(r.value);r=this.next()}return Ie()}first(){return this.nth(0)}last(){let e=this.next();for(;!e.done;){const r=this.next();if(r.done)return Oe(e.value);e=r}return Ie()}any(e){return this.findIndex(e)!==-1}some(e){return this.any(e)}none(e){return this.findIndex(e)===-1}all(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(!e(n,s))return!1;r=this.nextWithIndex()}return!0}unflatten(e){throw new Error("iter/Unflatten was not imported!")}reduce(e,r){let n=this.next();for(;!n.done;){const s=n.value;e=r(e,s,this._index-1),n=this.next()}return e}reverse(){return Gt(this.toArray().reverse())}}function Gt(t){return t!=null?typeof t[Symbol.iterator]=="function"?new me(t[Symbol.iterator]()):typeof t.next=="function"?t instanceof me?t:new me(t):Gt(typeof t=="object"?Object.entries(t):[t]):Gt([])}class Yo extends me{constructor(e){super(e)}next(){const e=super.nextWithIndex();return e.done?e:{value:Ko(e.value)}}}me.prototype.enumerate=function(){return new Yo(this)};function Ko(t){const e=t[0],r=t;return r[0]=t[1],r[1]=e,r}class Xo extends me{constructor(e,r){super(e),this._fn=r}next(){let e=super.nextWithIndex();for(;!e.done;){const[r,n]=e.value;if(this._fn(r,n))return{done:!1,value:r};e=super.nextWithIndex()}return{done:!0,value:void 0}}}me.prototype.filter=function(e){return new Xo(this,e)};class Qo extends me{constructor(e,r){super(e),this._fn=([n,s])=>(r(n,s),n)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}me.prototype.forEach=function(e){return new Qo(this,e)};class Zo extends me{constructor(e,r){super(e),this._fn=([n,s])=>r(n,s)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}me.prototype.map=function(e){return new Zo(this,e)};class ea extends me{constructor(e,r){super(e),this._other=r}next(){const e=super.next();return e.done?this._other.next():e}}me.prototype.merge=function(e){return new ea(this,e)};class ta extends me{constructor(){super(...arguments),this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?Oe(this.peeked.shift()):Ie()}peek(e=0){if(e<this.peeked.length)return Oe(this.peeked[e]);{let r=this.peeked.length-e-1,n=super.next();for(;!n.done&&(this.peeked.push(n.value),!(--r<=0));)n=super.next();return n.done?Ie():Oe(n.value)}}next(){const e=this.unpeek();if(e.isSome())return{done:!1,value:e.unwrap()};const r=super.next();return r.done?r:{done:!1,value:r.value}}}me.prototype.peekable=function(){return new ta(this)};class ra extends me{constructor(e,r){super(e),this._skipped=0,this._skip=(r<=0?0:r)|0}next(){let e=super.next();for(;!e.done;)if(this._skipped<=this._skip)this._skipped+=1,e=super.next();else return e;return{done:!0,value:void 0}}}me.prototype.skip=function(t){return new ra(this,t)};class na extends me{constructor(e,r){super(e),this._stepped=0,this._step=r<=0?1:r|0}next(){let e=super.next();for(;!e.done;)if(this._stepped<this._step)this._stepped+=1,e=super.next();else return this._stepped=0,e;return{done:!0,value:void 0}}}me.prototype.step=function(t){return new na(this,t)};class sa extends me{constructor(e,r){super(e),this._taken=0,this._count=(r<=0?0:r)|0}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}me.prototype.take=function(e){return new sa(this,e)};const ia=t=>t,oa=t=>t;class aa extends me{constructor(e,r=ia,n=oa){super(e),this._map=([s,i])=>[r(s,i),n(s,i)]}toObject(){return this.reduce({},(e,r)=>(e[r[0]]=r[1],e))}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._map(e.value)}}}me.prototype.toMap=function(e,r){return new aa(this,e,r)};class ua extends me{constructor(e,r){super(e),this._fn=r}next(){return this._fn(this._iter)}}me.prototype.unflatten=function(e){return new ua(this,e)};var lt;(function(t){t[t.Forward=0]="Forward",t[t.Backward=1]="Backward"})(lt||(lt={}));class Yr{constructor(e,r,n=1){this.start=e!==e?0:e,this.end=r!==r?this.start-1:r,this.step=n!==n?1:Math.abs(n),this.direction=e>r?lt.Backward:lt.Forward}static from(e,r,n=1){return new Yr(e,r,n)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(e){return this.start<=e&&e<=this.end}isEmpty(){return this.direction===lt.Forward?this.start>this.end:this.start<this.end}iter(){return new me(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===lt.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}const la=Yr.from;function xs(t,e){return t[0]=(e&4278190080)>>24,t[1]=(e&16711680)>>16,t[2]=(e&65280)>>8,t[3]=e&255,t}const Xe=Math.pow(2,31)-1|0;class ca extends me{constructor(e){super(e),this.rng=e}iter(){return new me(this)}next(){return{done:!1,value:this.rng.nextFloat()}}}class ha extends me{constructor(e,r=0,n=1){super(e),this.rng=e,this.min=r,this.max=n}iter(){return new me(this)}nextFloat(){return this.rng.nextFloatInRange(this.min,this.max)}next(){return{done:!1,value:this.nextFloat()}}}class fa extends me{constructor(e,r=0,n=Xe){super(e),this.rng=e,this.min=r|0,this.max=n|0}iter(){return new me(this)}nextInt(){return this.rng.nextIntInRange(this.min,this.max)}next(){return{done:!1,value:this.nextInt()}}}const da=new Uint8Array(4);class Kr{nextFloat(){return this.nextInt()/Xe}nextFloatInRange(e=0,r=1){return e+this.nextFloat()*(r-e)}nextIntInRange(e=0,r=Xe){return Math.round(this.nextFloatInRange(e,r))}shuffle(e){const r=e.length;for(let n=0;n<r;n++){const s=n+this.nextIntInRange(0,r-n-1),i=e[n];e[n]=e[s],e[s]=i}return e}fromArray(e){return e.length?Oe(e[this.nextIntInRange(0,e.length-1)]):Ie()}keyFromObject(e){return this.fromArray(Object.keys(e))}valueFromObject(e){return this.fromArray(Object.values(e))}fillBytes(e){const r=da;for(let n=0,s=e.length;n<s;n++){const i=n%4;i===0&&xs(r,this.nextInt()),e[n]=r[i]}return e}[Symbol.iterator](){return this}iter(){return new me(this)}next(){return{done:!1,value:this.nextInt()}}float(){return new ca(this)}uniformFloat(e=0,r=1){return new ha(this,e,r)}uniformInt(e=0,r=Xe){return new fa(this,e,r)}}let Vt,Pr;if(typeof crypto!="undefined"&&crypto.getRandomValues){const t=new Uint32Array(1);Vt=()=>crypto.getRandomValues(t)[0]%Xe,Pr=e=>crypto.getRandomValues(Array.isArray(e)?new Uint8Array(e):e)}else{const t=new Uint8Array(4);Vt=()=>Math.random()*Xe|0,Pr=e=>{const r=t;for(let n=0,s=e.length;n<s;n++){const i=n%4;i===0&&xs(r,Vt()),e[n]=r[i]}return e}}class pa extends Kr{nextInt(){return Vt()}fillBytes(e){return Pr(e)}}class Cs extends Kr{constructor(e=423257940){super(),this.seed=e}setSeed(e=423257940){return this.seed=e,this}nextInt(){return this.seed=Math.imul(48271,this.seed)|0%Xe,this.seed&Xe}}const ma=new Cs;class Xr extends Kr{constructor(e,r,n,s){super(),this.x=423257940,this.y=2829571177,this.z=2541948421,this.w=289122235,this.set(e,r,n,s)}static fromSeed(e){return new Xr().setSeed(e)}setSeed(e){const r=ma.setSeed(e);return this.set(r.nextInt(),r.nextInt(),r.nextInt(),r.nextInt())}set(e=423257940,r=2829571177,n=2541948421,s=289122235){return this.x=e|0,this.y=r|0,this.z=n|0,this.w=s|0,this}nextInt(){const e=this.x,r=e^e<<11;this.x=this.y,this.y=this.z,this.z=this.w;const n=this.w;return this.w=n^n>>19^(r^r>>8),this.w}}new Cs;new Xr;const Ft={length:16,includeSymbols:!0,excludeSimilarCharacters:!1,excludeAmbiguousCharacters:!1};function ga(t={}){const e=Math.max(6,t.length||Ft.length),r=t.includeSymbols!=null?t.includeSymbols:Ft.includeSymbols,n=t.excludeSimilarCharacters!=null?t.excludeSimilarCharacters:Ft.excludeSimilarCharacters,s=t.excludeAmbiguousCharacters!=null?t.excludeAmbiguousCharacters:Ft.excludeAmbiguousCharacters,i=new pa;return la(0,e).iter().map(()=>Sr(i,r,n,s)).join("")}const ya="il1Lo0O".split(""),va="{}[]()/\\'\"`~,;:.<>".split("");function Sr(t,e,r,n){let s=e&&t.nextFloat()>.75?ba(t):Ea(t);return r&&ya.includes(s)&&(s=Sr(t,e,r,n)),n&&va.includes(s)&&(s=Sr(t,e,r,n)),s}const _a="`~!@#$%^&*()-_+={}[]|:;<>,.\\/?".split("").sort(()=>Math.random()>.5?-1:1);function ba(t){return t.fromArray(_a).unwrap()}const wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("").sort(()=>Math.random()>.5?-1:1);function Ea(t){return t.fromArray(wa).unwrap()}function Pa(t){let e,r,n,s,i,o,l,p,_,A,y,k,P,w,b,S,v,M;return{c(){e=X("label"),r=we("Symbols?"),n=ue(),s=X("input"),i=ue(),o=X("label"),l=we("Exclude Similar?"),p=ue(),_=X("input"),A=ue(),y=X("label"),k=we("Exclude Ambiguous?"),P=ue(),w=X("input"),b=ue(),S=X("input"),this.h()},l(E){e=Q(E,"LABEL",{for:!0});var j=ee(e);r=Ee(j,"Symbols?"),j.forEach(q),n=le(E),s=Q(E,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),i=le(E),o=Q(E,"LABEL",{for:!0});var O=ee(o);l=Ee(O,"Exclude Similar?"),O.forEach(q),p=le(E),_=Q(E,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),A=le(E),y=Q(E,"LABEL",{for:!0});var a=ee(y);k=Ee(a,"Exclude Ambiguous?"),a.forEach(q),P=le(E),w=Q(E,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),b=le(E),S=Q(E,"INPUT",{id:!0,class:!0,type:!0,min:!0,placeholder:!0}),this.h()},h(){J(e,"for","includeSymbols"),J(s,"id","includeSymbols"),J(s,"type","checkbox"),J(s,"class","as-checkbox"),J(s,"placeholder","Length"),J(o,"for","excludeSimilarCharacters"),J(_,"id","excludeSimilarCharacters"),J(_,"type","checkbox"),J(_,"class","as-checkbox"),J(_,"placeholder","Length"),J(y,"for","excludeAmbiguousCharacters"),J(w,"id","excludeAmbiguousCharacters"),J(w,"type","checkbox"),J(w,"class","as-checkbox"),J(w,"placeholder","Length"),J(S,"id","length"),J(S,"class","as-input"),J(S,"type","number"),J(S,"min",6),J(S,"placeholder","Length")},m(E,j){K(E,e,j),Z(e,r),K(E,n,j),K(E,s,j),s.checked=t[1],K(E,i,j),K(E,o,j),Z(o,l),K(E,p,j),K(E,_,j),_.checked=t[2],K(E,A,j),K(E,y,j),Z(y,k),K(E,P,j),K(E,w,j),w.checked=t[3],K(E,b,j),K(E,S,j),Ue(S,t[0]),v||(M=[be(s,"change",t[5]),be(_,"change",t[6]),be(w,"change",t[7]),be(S,"input",t[8])],v=!0)},p(E,[j]){j&2&&(s.checked=E[1]),j&4&&(_.checked=E[2]),j&8&&(w.checked=E[3]),j&1&&qn(S.value)!==E[0]&&Ue(S,E[0])},i:Se,o:Se,d(E){E&&q(e),E&&q(n),E&&q(s),E&&q(i),E&&q(o),E&&q(p),E&&q(_),E&&q(A),E&&q(y),E&&q(P),E&&q(w),E&&q(b),E&&q(S),v=!1,ot(M)}}}function Sa(t,e,r){function n(){return ga({length:s,includeSymbols:i,excludeSimilarCharacters:o,excludeAmbiguousCharacters:l})}let s=16,i=!0,o=!1,l=!1;function p(){i=this.checked,r(1,i)}function _(){o=this.checked,r(2,o)}function A(){l=this.checked,r(3,l)}function y(){s=qn(this.value),r(0,s)}return[s,i,o,l,n,p,_,A,y]}class Ta extends Te{constructor(e){super(),Ae(this,e,Sa,Pa,Fe,{generate:4})}get generate(){return this.$$.ctx[4]}}function Aa(t){let e,r,n,s,i,o,l,p,_,A,y,k,P,w,b,S,v,M,E,j,O,a,g,m,N,T,U,H,G,$,x,L,h,d,I,D,R,W,V,z,te,ie,de,he;o=new jt({props:{messages:t[0].getErrors("application")}}),v=new jt({props:{messages:t[0].getErrors("type")}}),m=new jt({props:{messages:t[0].getErrors("username")}});function ae(c){t[13](c)}let u={id:"secret",name:"secret",show:!0,onInput:t[4]};t[1].secret!==void 0&&(u.secret=t[1].secret),G=new Os({props:u}),et.push(()=>Rt(G,"secret",ae)),L=new jt({props:{messages:t[0].getErrors("secret")}});let f={};return d=new Ta({props:f}),t[14](d),{c(){e=X("label"),r=we("Application or URL"),n=ue(),s=X("input"),i=ue(),ge(o.$$.fragment),l=ue(),p=X("label"),_=we("Secret Type"),A=ue(),y=X("select"),k=X("option"),P=we("Password"),w=X("option"),b=we("Text"),S=ue(),ge(v.$$.fragment),M=ue(),E=X("label"),j=we("Username"),O=ue(),a=X("input"),g=ue(),ge(m.$$.fragment),N=ue(),T=X("label"),U=we("Secret"),H=ue(),ge(G.$$.fragment),x=ue(),ge(L.$$.fragment),h=ue(),ge(d.$$.fragment),I=ue(),D=X("div"),R=X("button"),W=we("Generate"),V=ue(),z=X("button"),te=we("Add"),this.h()},l(c){e=Q(c,"LABEL",{for:!0});var C=ee(e);r=Ee(C,"Application or URL"),C.forEach(q),n=le(c),s=Q(c,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),i=le(c),ye(o.$$.fragment,c),l=le(c),p=Q(c,"LABEL",{for:!0});var F=ee(p);_=Ee(F,"Secret Type"),F.forEach(q),A=le(c),y=Q(c,"SELECT",{id:!0,class:!0});var B=ee(y);k=Q(B,"OPTION",{});var Y=ee(k);P=Ee(Y,"Password"),Y.forEach(q),w=Q(B,"OPTION",{});var oe=ee(w);b=Ee(oe,"Text"),oe.forEach(q),B.forEach(q),S=le(c),ye(v.$$.fragment,c),M=le(c),E=Q(c,"LABEL",{for:!0});var fe=ee(E);j=Ee(fe,"Username"),fe.forEach(q),O=le(c),a=Q(c,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),g=le(c),ye(m.$$.fragment,c),N=le(c),T=Q(c,"LABEL",{for:!0});var ce=ee(T);U=Ee(ce,"Secret"),ce.forEach(q),H=le(c),ye(G.$$.fragment,c),x=le(c),ye(L.$$.fragment,c),h=le(c),ye(d.$$.fragment,c),I=le(c),D=Q(c,"DIV",{class:!0});var re=ee(D);R=Q(re,"BUTTON",{class:!0});var Re=ee(R);W=Ee(Re,"Generate"),Re.forEach(q),V=le(re),z=Q(re,"BUTTON",{class:!0});var Me=ee(z);te=Ee(Me,"Add"),Me.forEach(q),re.forEach(q),this.h()},h(){J(e,"for","application"),J(s,"id","application"),J(s,"name","application"),J(s,"class","as-input"),J(s,"type","text"),J(s,"placeholder","Application or URL"),J(p,"for","type"),k.__value="password",k.value=k.__value,w.__value="text",w.value=w.__value,J(y,"id","type"),J(y,"class","as-input"),t[1].type===void 0&&Gn(()=>t[11].call(y)),J(E,"for","username"),J(a,"id","username"),J(a,"name","username"),J(a,"class","as-input"),J(a,"type","text"),J(a,"placeholder","Username"),J(T,"for","secret"),J(R,"class","as-btn as-primary"),J(z,"class","as-btn as-primary"),z.disabled=t[3],J(D,"class","as-flex as-justify-between as-mt-6")},m(c,C){K(c,e,C),Z(e,r),K(c,n,C),K(c,s,C),Ue(s,t[1].application),K(c,i,C),ve(o,c,C),K(c,l,C),K(c,p,C),Z(p,_),K(c,A,C),K(c,y,C),Z(y,k),Z(k,P),Z(y,w),Z(w,b),Wt(y,t[1].type),K(c,S,C),ve(v,c,C),K(c,M,C),K(c,E,C),Z(E,j),K(c,O,C),K(c,a,C),Ue(a,t[1].username),K(c,g,C),ve(m,c,C),K(c,N,C),K(c,T,C),Z(T,U),K(c,H,C),ve(G,c,C),K(c,x,C),ve(L,c,C),K(c,h,C),ve(d,c,C),K(c,I,C),K(c,D,C),Z(D,R),Z(R,W),Z(D,V),Z(D,z),Z(z,te),ie=!0,de||(he=[be(s,"input",t[10]),be(s,"input",t[4]),be(s,"change",t[5]),be(y,"change",t[11]),be(a,"input",t[12]),be(a,"input",t[4]),be(R,"click",t[6]),be(z,"click",t[7])],de=!0)},p(c,[C]){C&2&&s.value!==c[1].application&&Ue(s,c[1].application);const F={};C&1&&(F.messages=c[0].getErrors("application")),o.$set(F),C&2&&Wt(y,c[1].type);const B={};C&1&&(B.messages=c[0].getErrors("type")),v.$set(B),C&2&&a.value!==c[1].username&&Ue(a,c[1].username);const Y={};C&1&&(Y.messages=c[0].getErrors("username")),m.$set(Y);const oe={};!$&&C&2&&($=!0,oe.secret=c[1].secret,It(()=>$=!1)),G.$set(oe);const fe={};C&1&&(fe.messages=c[0].getErrors("secret")),L.$set(fe);const ce={};d.$set(ce),(!ie||C&8)&&(z.disabled=c[3])},i(c){ie||(ne(o.$$.fragment,c),ne(v.$$.fragment,c),ne(m.$$.fragment,c),ne(G.$$.fragment,c),ne(L.$$.fragment,c),ne(d.$$.fragment,c),ie=!0)},o(c){se(o.$$.fragment,c),se(v.$$.fragment,c),se(m.$$.fragment,c),se(G.$$.fragment,c),se(L.$$.fragment,c),se(d.$$.fragment,c),ie=!1},d(c){c&&q(e),c&&q(n),c&&q(s),c&&q(i),_e(o,c),c&&q(l),c&&q(p),c&&q(A),c&&q(y),c&&q(S),_e(v,c),c&&q(M),c&&q(E),c&&q(O),c&&q(a),c&&q(g),_e(m,c),c&&q(N),c&&q(T),c&&q(H),_e(G,c),c&&q(x),_e(L,c),c&&q(h),t[14](null),_e(d,c),c&&q(I),c&&q(D),de=!1,ot(he)}}}const xn=So((t,e)=>{Ns(e),gr("application","Application is required",()=>{fr(t.application).isNotBlank()}),gr("username","Username is required",()=>{fr(t.username).isNotBlank()}),gr("secret","Secret is required",()=>{fr(t.secret).isNotBlank()})});function ka(t,e,r){let n,{application:s=""}=e,{onAdd:i=()=>{}}=e,o={type:"password",application:s,username:"",secret:""},l=xn.get();s&&p("application");function p(E){r(0,l=xn(o,E))}function _(E){p(E.currentTarget.name)}function A(E){r(1,o=ut(Je({},o),{application:tr(E.currentTarget.value)})),p("application")}let y;function k(){r(1,o=ut(Je({},o),{secret:y.generate()})),p("secret")}function P(){li(o),i()}function w(){o.application=this.value,r(1,o)}function b(){o.type=Vn(this),r(1,o)}function S(){o.username=this.value,r(1,o)}function v(E){t.$$.not_equal(o.secret,E)&&(o.secret=E,r(1,o))}function M(E){et[E?"unshift":"push"](()=>{y=E,r(2,y)})}return t.$$set=E=>{"application"in E&&r(8,s=E.application),"onAdd"in E&&r(9,i=E.onAdd)},t.$$.update=()=>{t.$$.dirty&1&&r(3,n=!l.isValid())},[l,o,y,n,_,A,k,P,s,i,w,b,S,v,M]}class Na extends Te{constructor(e){super(),Ae(this,e,ka,Aa,Fe,{application:8,onAdd:9})}}function Ra(t){let e;return{c(){e=Ye("path"),this.h()},l(r){e=Ke(r,"path",{d:!0}),ee(e).forEach(q),this.h()},h(){J(e,"d","M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z")},m(r,n){K(r,e,n)},p:Se,d(r){r&&q(e)}}}function Ia(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[Ra]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=ke(s,n[i]);return e=new yt({props:s}),{c(){ge(e.$$.fragment)},l(i){ye(e.$$.fragment,i)},m(i,o){ve(e,i,o),r=!0},p(i,[o]){const l=o&1?mt(n,[n[0],gt(i[0])]):{};o&2&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){_e(e,i)}}}function Oa(t,e,r){return t.$$set=n=>{r(0,e=ke(ke({},e),Be(n)))},e=Be(e),[e]}class xa extends Te{constructor(e){super(),Ae(this,e,Oa,Ia,tt,{})}}function Ca(t){let e,r,n,s,i;return n=new xa({}),{c(){e=X("div"),r=X("div"),ge(n.$$.fragment),this.h()},l(o){e=Q(o,"DIV",{class:!0});var l=ee(e);r=Q(l,"DIV",{class:!0});var p=ee(r);ye(n.$$.fragment,p),p.forEach(q),l.forEach(q),this.h()},h(){J(r,"class",s="as-transition-opacity "+(t[0]?"as-animate-wiggle":"")),Ve(r,"as-opacity-0",!t[0]),Ve(r,"as-opacity-100",t[0]),J(e,"class","as-relative as-w-8 as-h-8")},m(o,l){K(o,e,l),Z(e,r),ve(n,r,null),i=!0},p(o,[l]){(!i||l&1&&s!==(s="as-transition-opacity "+(o[0]?"as-animate-wiggle":"")))&&J(r,"class",s),l&1&&Ve(r,"as-opacity-0",!o[0]),l&1&&Ve(r,"as-opacity-100",o[0])},i(o){i||(ne(n.$$.fragment,o),i=!0)},o(o){se(n.$$.fragment,o),i=!1},d(o){o&&q(e),_e(n)}}}function Ma(t,e,r){let n;Ct(t,ii,o=>r(2,n=o));let s=!1,i=Date.now();return t.$$.update=()=>{if(t.$$.dirty&6)if(n)r(0,s=!0),r(1,i=Date.now());else{const o=Date.now()-i;o<1e3?setTimeout(()=>{r(0,s=!1)},1e3-o):r(0,s=!1)}},[s,i,n]}class Ua extends Te{constructor(e){super(),Ae(this,e,Ma,Ca,Fe,{})}}const Cn=()=>{};function Da(t,e=0,r={}){let n=null,s=!1;const i=r.before||Cn,o=r.after||Cn;function l(){n!=null&&(clearTimeout(n),n=null)}function p(){s=!1,l()}function _(){l(),A()}function A(...k){s=!1,t.apply(this,k),o()}const y=function(...P){s||(s=!0,i()),l(),!!r.isImmediate&&n==null?A(this,P):n=setTimeout(()=>{n=null,A(this,P)},e)};return y.cancel=p,y.flush=_,y}function ja(t){let e,r,n,s,i,o,l,p,_,A,y,k,P,w,b;i=new zn({});function S(E){t[6](E)}function v(E){t[7](E)}let M={onInput:t[3]};return t[0].secret!==void 0&&(M.secret=t[0].secret),t[1]!==void 0&&(M.show=t[1]),A=new Os({props:M}),et.push(()=>Rt(A,"secret",S)),et.push(()=>Rt(A,"show",v)),{c(){e=X("div"),r=X("div"),n=X("button"),s=X("div"),ge(i.$$.fragment),o=ue(),l=X("div"),p=X("input"),_=ue(),ge(A.$$.fragment),this.h()},l(E){e=Q(E,"DIV",{class:!0});var j=ee(e);r=Q(j,"DIV",{class:!0});var O=ee(r);n=Q(O,"BUTTON",{class:!0});var a=ee(n);s=Q(a,"DIV",{class:!0});var g=ee(s);ye(i.$$.fragment,g),g.forEach(q),a.forEach(q),O.forEach(q),o=le(j),l=Q(j,"DIV",{class:!0});var m=ee(l);p=Q(m,"INPUT",{class:!0,type:!0,placeholder:!0}),_=le(m),ye(A.$$.fragment,m),m.forEach(q),j.forEach(q),this.h()},h(){J(s,"class","as-w-6 as-h-6"),J(n,"class","as-btn as-danger as-p-1"),J(r,"class","as-flex-grow-0 as-mr-2"),J(p,"class","as-input"),J(p,"type","text"),J(p,"placeholder","Username"),J(l,"class","as-grid as-grid-rows-2 as-grid-flow-row as-w-full"),J(e,"class","as-flex as-flex-row as-w-full as-mb-2")},m(E,j){K(E,e,j),Z(e,r),Z(r,n),Z(n,s),ve(i,s,null),Z(e,o),Z(e,l),Z(l,p),Ue(p,t[0].username),Z(l,_),ve(A,l,null),P=!0,w||(b=[be(n,"click",t[2]),be(p,"input",t[5]),be(p,"input",t[3])],w=!0)},p(E,[j]){j&1&&p.value!==E[0].username&&Ue(p,E[0].username);const O={};!y&&j&1&&(y=!0,O.secret=E[0].secret,It(()=>y=!1)),!k&&j&2&&(k=!0,O.show=E[1],It(()=>k=!1)),A.$set(O)},i(E){P||(ne(i.$$.fragment,E),ne(A.$$.fragment,E),P=!0)},o(E){se(i.$$.fragment,E),se(A.$$.fragment,E),P=!1},d(E){E&&q(e),_e(i),_e(A),w=!1,ot(b)}}}function Fa(t,e,r){let{secret:n}=e,{onDelete:s=()=>{}}=e,i=!1;function o(){s(n)}async function l(){n.application&&n.username&&n.secret&&await ci(n.id,n)}const p=Da(l,1e3);function _(){n.username=this.value,r(0,n)}function A(k){t.$$.not_equal(n.secret,k)&&(n.secret=k,r(0,n))}function y(k){i=k,r(1,i)}return t.$$set=k=>{"secret"in k&&r(0,n=k.secret),"onDelete"in k&&r(4,s=k.onDelete)},[n,i,o,p,s,_,A,y]}class Ms extends Te{constructor(e){super(),Ae(this,e,Fa,ja,Fe,{secret:0,onDelete:4})}}function Mn(t,e,r){const n=t.slice();n[5]=e[r][0],n[6]=e[r][1];const s=n[0]?n[6].filter(i=>Hn(i,n[0])):n[6];return n[7]=s,n}function Un(t,e,r){const n=t.slice();return n[10]=e[r],n}function Dn(t,e){let r,n,s;return n=new Ms({props:{secret:e[10],onDelete:e[1]}}),{key:t,first:null,c(){r=De(),ge(n.$$.fragment),this.h()},l(i){r=De(),ye(n.$$.fragment,i),this.h()},h(){this.first=r},m(i,o){K(i,r,o),ve(n,i,o),s=!0},p(i,o){e=i;const l={};o&5&&(l.secret=e[10]),o&2&&(l.onDelete=e[1]),n.$set(l)},i(i){s||(ne(n.$$.fragment,i),s=!0)},o(i){se(n.$$.fragment,i),s=!1},d(i){i&&q(r),_e(n,i)}}}function jn(t,e){let r,n=e[5]+"",s,i,o=[],l=new Map,p,_,A=e[7];const y=k=>k[10].id;for(let k=0;k<A.length;k+=1){let P=Un(e,A,k),w=y(P);l.set(w,o[k]=Dn(w,P))}return{key:t,first:null,c(){r=X("h2"),s=we(n),i=ue();for(let k=0;k<o.length;k+=1)o[k].c();p=De(),this.h()},l(k){r=Q(k,"H2",{class:!0});var P=ee(r);s=Ee(P,n),P.forEach(q),i=le(k);for(let w=0;w<o.length;w+=1)o[w].l(k);p=De(),this.h()},h(){J(r,"class","as-my-1 as-text-xl"),this.first=r},m(k,P){K(k,r,P),Z(r,s),K(k,i,P);for(let w=0;w<o.length;w+=1)o[w].m(k,P);K(k,p,P),_=!0},p(k,P){e=k,(!_||P&4)&&n!==(n=e[5]+"")&&Nt(s,n),P&7&&(A=e[7],Qe(),o=er(o,P,y,1,e,A,l,p.parentNode,Rr,Dn,p,Un),Ze())},i(k){if(!_){for(let P=0;P<A.length;P+=1)ne(o[P]);_=!0}},o(k){for(let P=0;P<o.length;P+=1)se(o[P]);_=!1},d(k){k&&q(r),k&&q(i);for(let P=0;P<o.length;P+=1)o[P].d(k);k&&q(p)}}}function La(t){let e=[],r=new Map,n,s,i=t[2];const o=l=>l[5];for(let l=0;l<i.length;l+=1){let p=Mn(t,i,l),_=o(p);r.set(_,e[l]=jn(_,p))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=De()},l(l){for(let p=0;p<e.length;p+=1)e[p].l(l);n=De()},m(l,p){for(let _=0;_<e.length;_+=1)e[_].m(l,p);K(l,n,p),s=!0},p(l,[p]){p&7&&(i=l[2],Qe(),e=er(e,p,o,1,l,i,r,n.parentNode,Rr,jn,n,Mn),Ze())},i(l){if(!s){for(let p=0;p<i.length;p+=1)ne(e[p]);s=!0}},o(l){for(let p=0;p<e.length;p+=1)se(e[p]);s=!1},d(l){for(let p=0;p<e.length;p+=1)e[p].d(l);l&&q(n)}}}function Ba(t,e,r){let n,s,i;Ct(t,xr,p=>r(4,i=p));let{search:o=""}=e,{onDelete:l=()=>{}}=e;return t.$$set=p=>{"search"in p&&r(0,o=p.search),"onDelete"in p&&r(1,l=p.onDelete)},t.$$.update=()=>{t.$$.dirty&16&&r(3,n=Object.entries(i)),t.$$.dirty&9&&r(2,s=o?n.filter(([p,_])=>Wn(o,p)):n),t.$$.dirty&12&&s.length===0&&r(2,s=n)},[o,l,s,n,i]}class $a extends Te{constructor(e){super(),Ae(this,e,Ba,La,Fe,{search:0,onDelete:1})}}function Fn(t,e,r){const n=t.slice();return n[6]=e[r],n}function Ln(t,e){let r,n,s;return n=new Ms({props:{secret:e[6],onDelete:e[0]}}),{key:t,first:null,c(){r=De(),ge(n.$$.fragment),this.h()},l(i){r=De(),ye(n.$$.fragment,i),this.h()},h(){this.first=r},m(i,o){K(i,r,o),ve(n,i,o),s=!0},p(i,o){e=i;const l={};o&2&&(l.secret=e[6]),o&1&&(l.onDelete=e[0]),n.$set(l)},i(i){s||(ne(n.$$.fragment,i),s=!0)},o(i){se(n.$$.fragment,i),s=!1},d(i){i&&q(r),_e(n,i)}}}function qa(t){let e=[],r=new Map,n,s,i=t[1];const o=l=>l[6].id;for(let l=0;l<i.length;l+=1){let p=Fn(t,i,l),_=o(p);r.set(_,e[l]=Ln(_,p))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=De()},l(l){for(let p=0;p<e.length;p+=1)e[p].l(l);n=De()},m(l,p){for(let _=0;_<e.length;_+=1)e[_].m(l,p);K(l,n,p),s=!0},p(l,[p]){p&3&&(i=l[1],Qe(),e=er(e,p,o,1,l,i,r,n.parentNode,Rr,Ln,n,Fn),Ze())},i(l){if(!s){for(let p=0;p<i.length;p+=1)ne(e[p]);s=!0}},o(l){for(let p=0;p<e.length;p+=1)se(e[p]);s=!1},d(l){for(let p=0;p<e.length;p+=1)e[p].d(l);l&&q(n)}}}function Ga(t,e,r){let n,s,i;Ct(t,xr,_=>r(5,i=_));let{application:o}=e,{search:l=""}=e,{onDelete:p=()=>{}}=e;return t.$$set=_=>{"application"in _&&r(2,o=_.application),"search"in _&&r(3,l=_.search),"onDelete"in _&&r(0,p=_.onDelete)},t.$$.update=()=>{t.$$.dirty&36&&r(4,n=i[o]||[]),t.$$.dirty&24&&r(1,s=l?n.filter(_=>Hn(_,l)):n)},[p,s,o,l,n,i]}class Va extends Te{constructor(e){super(),Ae(this,e,Ga,qa,Fe,{application:2,search:3,onDelete:0})}}function Bn(t,e,r){const n=t.slice();return n[0]=e[r],n}function Wa(t){let e,r;return e=new Na({props:{onAdd:t[10],application:t[0]}}),{c(){ge(e.$$.fragment)},l(n){ye(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},p(n,s){const i={};s&1&&(i.application=n[0]),e.$set(i)},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){_e(e,n)}}}function Ha(t){let e,r;return{c(){e=X("h3"),r=we("Add Secret"),this.h()},l(n){e=Q(n,"H3",{class:!0,slot:!0});var s=ee(e);r=Ee(s,"Add Secret"),s.forEach(q),this.h()},h(){J(e,"class","as-text-lg"),J(e,"slot","title")},m(n,s){K(n,e,s),Z(e,r)},p:Se,d(n){n&&q(e)}}}function Ja(t){var b,S;let e,r,n=((b=t[1])==null?void 0:b.application)+"",s,i,o=((S=t[1])==null?void 0:S.username)+"",l,p,_,A,y,k,P,w;return{c(){e=X("p"),r=we("Delete "),s=we(n),i=ue(),l=we(o),p=we(" Secret?"),_=ue(),A=X("div"),y=X("button"),k=we("Delete"),this.h()},l(v){e=Q(v,"P",{class:!0});var M=ee(e);r=Ee(M,"Delete "),s=Ee(M,n),i=le(M),l=Ee(M,o),p=Ee(M," Secret?"),M.forEach(q),_=le(v),A=Q(v,"DIV",{class:!0});var E=ee(A);y=Q(E,"BUTTON",{class:!0});var j=ee(y);k=Ee(j,"Delete"),j.forEach(q),E.forEach(q),this.h()},h(){J(e,"class","as-mb-2"),J(y,"class","as-btn as-danger"),J(A,"class","as-flex justify-end")},m(v,M){K(v,e,M),Z(e,r),Z(e,s),Z(e,i),Z(e,l),Z(e,p),K(v,_,M),K(v,A,M),Z(A,y),Z(y,k),P||(w=be(y,"click",function(){Zt(t[7])&&t[7].apply(this,arguments)}),P=!0)},p(v,M){var E,j;t=v,M&2&&n!==(n=((E=t[1])==null?void 0:E.application)+"")&&Nt(s,n),M&2&&o!==(o=((j=t[1])==null?void 0:j.username)+"")&&Nt(l,o)},d(v){v&&q(e),v&&q(_),v&&q(A),P=!1,w()}}}function za(t){let e,r;return{c(){e=X("h3"),r=we("Deleting Secret"),this.h()},l(n){e=Q(n,"H3",{slot:!0,class:!0});var s=ee(e);r=Ee(s,"Deleting Secret"),s.forEach(q),this.h()},h(){J(e,"slot","title"),J(e,"class","as-text-lg")},m(n,s){K(n,e,s),Z(e,r)},p:Se,d(n){n&&q(e)}}}function $n(t,e){let r,n=e[0]+"",s,i;return{key:t,first:null,c(){r=X("option"),s=we(n),this.h()},l(o){r=Q(o,"OPTION",{});var l=ee(r);s=Ee(l,n),l.forEach(q),this.h()},h(){r.__value=i=e[0],r.value=r.__value,this.first=r},m(o,l){K(o,r,l),Z(r,s)},p(o,l){e=o,l&4&&n!==(n=e[0]+"")&&Nt(s,n),l&4&&i!==(i=e[0])&&(r.__value=i,r.value=r.__value)},d(o){o&&q(r)}}}function Ya(t){let e,r;return e=new $a({props:{search:t[3],onDelete:t[8]}}),{c(){ge(e.$$.fragment)},l(n){ye(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},p(n,s){const i={};s&8&&(i.search=n[3]),s&256&&(i.onDelete=n[8]),e.$set(i)},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){_e(e,n)}}}function Ka(t){let e,r;return e=new Va({props:{application:t[6],search:t[3],onDelete:t[8]}}),{c(){ge(e.$$.fragment)},l(n){ye(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},p(n,s){const i={};s&64&&(i.application=n[6]),s&8&&(i.search=n[3]),s&256&&(i.onDelete=n[8]),e.$set(i)},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){_e(e,n)}}}function Xa(t){let e,r,n,s,i,o,l,p,_,A,y=[],k=new Map,P,w,b,S,v,M,E,j,O,a,g,m,N,T,U;function H(R){t[12](R)}let G={$$slots:{title:[Ha],default:[Wa]},$$scope:{ctx:t}};t[4]!==void 0&&(G.open=t[4]),e=new on({props:G}),et.push(()=>Rt(e,"open",H));function $(R){t[13](R)}let x={$$slots:{title:[za],default:[Ja]},$$scope:{ctx:t}};t[5]!==void 0&&(x.open=t[5]),s=new on({props:x}),et.push(()=>Rt(s,"open",$));let L=t[2];const h=R=>R[0];for(let R=0;R<L.length;R+=1){let W=Bn(t,L,R),V=h(W);k.set(V,y[R]=$n(V,W))}b=new Ua({});const d=[Ka,Ya],I=[];function D(R,W){return R[6]?0:1}return a=D(t),g=I[a]=d[a](t),{c(){ge(e.$$.fragment),n=ue(),ge(s.$$.fragment),o=ue(),l=X("div"),p=X("div"),_=X("select"),A=X("option");for(let R=0;R<y.length;R+=1)y[R].c();P=ue(),w=X("div"),ge(b.$$.fragment),S=ue(),v=X("button"),M=we("Add"),E=ue(),j=X("input"),O=ue(),g.c(),m=De(),this.h()},l(R){ye(e.$$.fragment,R),n=le(R),ye(s.$$.fragment,R),o=le(R),l=Q(R,"DIV",{class:!0});var W=ee(l);p=Q(W,"DIV",{class:!0});var V=ee(p);_=Q(V,"SELECT",{class:!0});var z=ee(_);A=Q(z,"OPTION",{}),ee(A).forEach(q);for(let de=0;de<y.length;de+=1)y[de].l(z);z.forEach(q),P=le(V),w=Q(V,"DIV",{class:!0});var te=ee(w);ye(b.$$.fragment,te),te.forEach(q),V.forEach(q),S=le(W),v=Q(W,"BUTTON",{class:!0});var ie=ee(v);M=Ee(ie,"Add"),ie.forEach(q),W.forEach(q),E=le(R),j=Q(R,"INPUT",{class:!0,type:!0,placeholder:!0}),O=le(R),g.l(R),m=De(),this.h()},h(){A.__value="",A.value=A.__value,J(_,"class","as-input as-flex"),t[0]===void 0&&Gn(()=>t[14].call(_)),J(w,"class","as-flex as-p-1"),J(p,"class","as-flex as-flex-row as-flex-grow"),J(v,"class","as-btn as-primary"),J(l,"class","as-flex as-justify-between"),J(j,"class","as-input as-my-2"),J(j,"type","text"),J(j,"placeholder","Search...")},m(R,W){ve(e,R,W),K(R,n,W),ve(s,R,W),K(R,o,W),K(R,l,W),Z(l,p),Z(p,_),Z(_,A);for(let V=0;V<y.length;V+=1)y[V].m(_,null);Wt(_,t[0]),Z(p,P),Z(p,w),ve(b,w,null),Z(l,S),Z(l,v),Z(v,M),K(R,E,W),K(R,j,W),Ue(j,t[3]),K(R,O,W),I[a].m(R,W),K(R,m,W),N=!0,T||(U=[be(_,"change",t[14]),be(v,"click",t[9]),be(j,"input",t[15])],T=!0)},p(R,[W]){const V={};W&262145&&(V.$$scope={dirty:W,ctx:R}),!r&&W&16&&(r=!0,V.open=R[4],It(()=>r=!1)),e.$set(V);const z={};W&262274&&(z.$$scope={dirty:W,ctx:R}),!i&&W&32&&(i=!0,z.open=R[5],It(()=>i=!1)),s.$set(z),W&4&&(L=R[2],y=er(y,W,h,1,R,L,k,_,Vs,$n,null,Bn)),W&5&&Wt(_,R[0]),W&8&&j.value!==R[3]&&Ue(j,R[3]);let te=a;a=D(R),a===te?I[a].p(R,W):(Qe(),se(I[te],1,1,()=>{I[te]=null}),Ze(),g=I[a],g?g.p(R,W):(g=I[a]=d[a](R),g.c()),ne(g,1),g.m(m.parentNode,m))},i(R){N||(ne(e.$$.fragment,R),ne(s.$$.fragment,R),ne(b.$$.fragment,R),ne(g),N=!0)},o(R){se(e.$$.fragment,R),se(s.$$.fragment,R),se(b.$$.fragment,R),se(g),N=!1},d(R){_e(e,R),R&&q(n),_e(s,R),R&&q(o),R&&q(l);for(let W=0;W<y.length;W+=1)y[W].d();_e(b),R&&q(E),R&&q(j),R&&q(O),I[a].d(R),R&&q(m),T=!1,ot(U)}}}function Qa(t,e,r){let n,s,i,o;Ct(t,xr,E=>r(11,o=E));let{application:l=""}=e,p="",_=!1;function A(){r(4,_=!_)}function y(){r(4,_=!1)}let k,P=!1,w;function b(E){_=E,r(4,_)}function S(E){P=E,r(5,P),r(1,k)}function v(){l=Vn(this),r(0,l),r(2,i),r(11,o)}function M(){p=this.value,r(3,p)}return t.$$set=E=>{"application"in E&&r(0,l=E.application)},t.$$.update=()=>{if(t.$$.dirty&2&&r(7,s=()=>{k&&(hi(k.id),r(1,k=void 0),r(5,P=!1))}),t.$$.dirty&2048&&r(2,i=Object.keys(o)),t.$$.dirty&4){const E=i.filter(j=>Wn(j,tr(j)));E.length===1&&r(6,w=E[0])}},r(8,n=E=>{r(1,k=E),r(5,P=!0)}),[l,k,i,p,_,P,w,s,n,A,y,o,b,S,v,M]}class Za extends Te{constructor(e){super(),Ae(this,e,Qa,Xa,Fe,{application:0})}}function eu(t){let e;return{c(){e=X("div"),this.h()},l(r){e=Q(r,"DIV",{id:!0}),ee(e).forEach(q),this.h()},h(){J(e,"id",Us)},m(r,n){K(r,e,n)},p:Se,i:Se,o:Se,d(r){r&&q(e)}}}const Us="remote-storage-widget";let yr;function tu(t,e,r){let{element:n=void 0}=e,{widget:s=void 0}=e;return Ws(()=>{Js(()=>import("../chunks/widget-bc58238e.js").then(function(i){return i.w}),[]).then(({default:i})=>{var l;yr&&((l=yr.rsWidget)==null||l.remove());const o=new i(rt);o.attach(Us),yr=o,function p(){o.rsWidget?(r(1,s=o),r(0,n=o.rsWidget)):setTimeout(p,300)}()})}),t.$$set=i=>{"element"in i&&r(0,n=i.element),"widget"in i&&r(1,s=i.widget)},[n,s]}class ru extends Te{constructor(e){super(),Ae(this,e,tu,eu,Fe,{element:0,widget:1})}}const Qr=Ir("disconnected"),nu=vt(Qr,t=>t);rt.on("connected",()=>{Qr.set("connected")});rt.on("disconnected",()=>{Qr.set("disconnected")});function su(t){let e,r;return{c(){e=X("h3"),r=we("Please connect to a Storage Provider"),this.h()},l(n){e=Q(n,"H3",{class:!0});var s=ee(e);r=Ee(s,"Please connect to a Storage Provider"),s.forEach(q),this.h()},h(){J(e,"class","as-text-center as-py-8 as-text-lg")},m(n,s){K(n,e,s),Z(e,r)},i:Se,o:Se,d(n){n&&q(e)}}}function iu(t){let e,r,n;return r=new Za({}),{c(){e=X("div"),ge(r.$$.fragment),this.h()},l(s){e=Q(s,"DIV",{class:!0});var i=ee(e);ye(r.$$.fragment,i),i.forEach(q),this.h()},h(){J(e,"class","as-container as-mx-auto as-p-4 as-mt-4 as-mb-8 as-bg-white")},m(s,i){K(s,e,i),ve(r,e,null),n=!0},i(s){n||(ne(r.$$.fragment,s),n=!0)},o(s){se(r.$$.fragment,s),n=!1},d(s){s&&q(e),_e(r)}}}function ou(t){let e,r,n,s;const i=[iu,su],o=[];function l(p,_){return p[0]==="connected"?0:1}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),n=De()},l(p){r.l(p),n=De()},m(p,_){o[e].m(p,_),K(p,n,_),s=!0},p(p,_){let A=e;e=l(p),e!==A&&(Qe(),se(o[A],1,1,()=>{o[A]=null}),Ze(),r=o[e],r||(r=o[e]=i[e](p),r.c()),ne(r,1),r.m(n.parentNode,n))},i(p){s||(ne(r),s=!0)},o(p){se(r),s=!1},d(p){o[e].d(p),p&&q(n)}}}function au(t){let e,r,n,s,i;return e=new Hs({props:{$$slots:{default:[ou]},$$scope:{ctx:t}}}),s=new ru({}),{c(){ge(e.$$.fragment),r=ue(),n=X("div"),ge(s.$$.fragment),this.h()},l(o){ye(e.$$.fragment,o),r=le(o),n=Q(o,"DIV",{class:!0});var l=ee(n);ye(s.$$.fragment,l),l.forEach(q),this.h()},h(){J(n,"class","as-absolute as-left-0 as-bottom-0")},m(o,l){ve(e,o,l),K(o,r,l),K(o,n,l),ve(s,n,null),i=!0},p(o,[l]){const p={};l&3&&(p.$$scope={dirty:l,ctx:o}),e.$set(p)},i(o){i||(ne(e.$$.fragment,o),ne(s.$$.fragment,o),i=!0)},o(o){se(e.$$.fragment,o),se(s.$$.fragment,o),i=!1},d(o){_e(e,o),o&&q(r),o&&q(n),_e(s)}}}function uu(t,e,r){let n;return Ct(t,nu,s=>r(0,n=s)),[n]}class pu extends Te{constructor(e){super(),Ae(this,e,uu,au,tt,{})}}export{pu as default};
