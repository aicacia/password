var Bs=Object.defineProperty,$s=Object.defineProperties;var qs=Object.getOwnPropertyDescriptors;var Zr=Object.getOwnPropertySymbols;var Vs=Object.prototype.hasOwnProperty,Gs=Object.prototype.propertyIsEnumerable;var en=(t,e,r)=>e in t?Bs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ot=(t,e)=>{for(var r in e||(e={}))Vs.call(e,r)&&en(t,r,e[r]);if(Zr)for(var r of Zr(e))Gs.call(e,r)&&en(t,r,e[r]);return t},Dt=(t,e)=>$s(t,qs(e));import{S as Se,i as ke,s as Ze,I as Sr,e as Q,c as Z,a as te,d as $,g as K,N as Hs,J as kr,K as Ar,L as Nr,H as Ct,q as ne,o as se,D as Ws,C as Te,w as ce,x as fe,y as he,z as lt,A as ct,B as de,O as Ue,P as Xe,Q as Qe,b as G,E as Ae,R as De,k as ae,m as ue,T as Be,M as X,U as ge,n as Ge,p as He,G as Ke,V as Ie,t as we,h as Ee,j as It,W as Js,X as qn,Y as ze,l as Re,Z as Vn,_ as Jt,$ as Gn,a0 as rt,a1 as nt,a2 as Mt,a3 as tr,a4 as Ir,a5 as zs,v as Ys}from"../chunks/index-9afa2a66.js";import{c as Rt,I as ft,a as tn,f as Ks,s as Hn,L as Xs}from"../chunks/Layout-30d6995f.js";import{d as _t,w as Rr}from"../chunks/index-4f21f3e2.js";import{_ as Qs}from"../chunks/preload-helper-91b3b7b7.js";var jt,Zs=new Uint8Array(16);function ei(){if(!jt&&(jt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jt(Zs)}var ti=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ri(t){return typeof t=="string"&&ti.test(t)}var Ne=[];for(var cr=0;cr<256;++cr)Ne.push((cr+256).toString(16).substr(1));function ni(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Ne[t[e+0]]+Ne[t[e+1]]+Ne[t[e+2]]+Ne[t[e+3]]+"-"+Ne[t[e+4]]+Ne[t[e+5]]+"-"+Ne[t[e+6]]+Ne[t[e+7]]+"-"+Ne[t[e+8]]+Ne[t[e+9]]+"-"+Ne[t[e+10]]+Ne[t[e+11]]+Ne[t[e+12]]+Ne[t[e+13]]+Ne[t[e+14]]+Ne[t[e+15]]).toLowerCase();if(!ri(r))throw TypeError("Stringified UUID is invalid");return r}function si(t,e,r){t=t||{};var n=t.random||(t.rng||ei)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return ni(n)}const ii="v21wdidfxjapm8b",oi="399181883347-3dfijgbemptplmueu01bsfga9jpkks6j.apps.googleusercontent.com";var ai=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ui(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wn={exports:{}};/*! remotestorage.js 2.0.0-beta.3, https://remotestorage.io, MIT licensed */(function(t,e){(function(r,n){t.exports=n()})(ai,function(){return function(r){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=n,s.d=function(i,o,u){s.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:u})},s.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,o){if(1&o&&(i=s(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var u=Object.create(null);if(s.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var c in i)s.d(u,c,function(g){return i[g]}.bind(null,c));return u},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=17)}([function(r,n,s){(function(i,o){Object.defineProperty(n,"__esModule",{value:!0}),n.applyMixins=n.toBase64=n.getTextFromArrayBuffer=n.shouldBeTreatedAsBinary=n.getJSONFromLocalStorage=n.localStorageAvailable=n.pathsFromRoot=n.deepClone=n.equal=n.bindAll=n.cleanPath=n.baseName=n.isDocument=n.isFolder=n.containingFolder=n.extend=n.getGlobalContext=n.globalContext=n.logError=void 0,n.logError=u=>{typeof u=="string"?console.error(u):console.error(u.message,u.stack)},n.globalContext=typeof window!="undefined"?window:typeof self=="object"?self:i,n.getGlobalContext=()=>typeof window!="undefined"?window:typeof self=="object"?self:i,n.extend=(...u)=>{const c=u[0];return Array.prototype.slice.call(u,1).forEach(function(g){for(const _ in g)c[_]=g[_]}),c},n.containingFolder=u=>{if(u==="")return"/";if(!u)throw"Path not given!";return u.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},n.isFolder=u=>u.substr(-1)==="/",n.isDocument=u=>!n.isFolder(u),n.baseName=u=>{const c=u.split("/");return n.isFolder(u)?c[c.length-2]+"/":c[c.length-1]},n.cleanPath=u=>u.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27"),n.bindAll=u=>{for(const c in this)typeof u[c]=="function"&&(u[c]=u[c].bind(u))},n.equal=(u,c,g=[])=>{let _;if(typeof u!=typeof c)return!1;if(typeof u=="number"||typeof u=="boolean"||typeof u=="string")return u===c;if(typeof u=="function")return u.toString()===c.toString();if(u instanceof ArrayBuffer&&c instanceof ArrayBuffer&&(u=new Uint8Array(u),c=new Uint8Array(c)),u instanceof Array){if(u.length!==c.length)return!1;for(let y=0,k=u.length;y<k;y++)if(!n.equal(u[y],c[y],g))return!1}else{for(_ in u)if(u.hasOwnProperty(_)&&!(_ in c))return!1;for(_ in c){if(!c.hasOwnProperty(_))continue;if(!(_ in u))return!1;let y;if(typeof c[_]=="object"){if(g.indexOf(c[_])>=0)continue;y=g.slice(),y.push(c[_])}if(!n.equal(u[_],c[_],y))return!1}}return!0},n.deepClone=u=>{if(u!==void 0){const c=JSON.parse(JSON.stringify(u));return function g(_,y){if(typeof _=="object"&&!Array.isArray(_)&&_!==null){for(const k in _)if(typeof _[k]=="object"&&_[k]!==null)if(_[k].toString()==="[object ArrayBuffer]"){y[k]=new ArrayBuffer(_[k].byteLength);const w=new Int8Array(_[k]);new Int8Array(y[k]).set(w)}else g(_[k],y[k])}}(u,c),c}},n.pathsFromRoot=u=>{const c=[u],g=u.replace(/\/$/,"").split("/");for(;g.length>1;)g.pop(),c.push(g.join("/")+"/");return c},n.localStorageAvailable=()=>{const u=n.getGlobalContext();if(!("localStorage"in u))return!1;try{return u.localStorage.setItem("rs-check","1"),u.localStorage.removeItem("rs-check"),!0}catch{return!1}},n.getJSONFromLocalStorage=u=>{const c=n.getGlobalContext();try{return JSON.parse(c.localStorage.getItem(u))}catch{}},n.shouldBeTreatedAsBinary=(u,c)=>!!(c&&c.match(/charset=binary/)||/[\x00-\x08\x0E-\x1F\uFFFD]/.test(u)),n.getTextFromArrayBuffer=(u,c)=>new Promise(g=>{if(typeof Blob=="undefined"){const _=new o(new Uint8Array(u));g(_.toString(c))}else{let _;const y=n.globalContext;if(y.BlobBuilder=y.BlobBuilder||y.WebKitBlobBuilder,y.BlobBuilder!==void 0){const w=new y.BlobBuilder;w.append(u),_=w.getBlob()}else _=new Blob([u]);const k=new FileReader;typeof k.addEventListener=="function"?k.addEventListener("loadend",function(w){g(w.target.result)}):k.onloadend=function(w){g(w.target.result)},k.readAsText(_,c)}}),n.toBase64=u=>{const c=n.getGlobalContext();return"btoa"in c?c.btoa(u):o.from(u).toString("base64")},n.applyMixins=function(u,c){c.forEach(g=>{Object.getOwnPropertyNames(g.prototype).forEach(_=>{Object.defineProperty(u.prototype,_,Object.getOwnPropertyDescriptor(g.prototype,_))})})}}).call(this,s(5),s(19).Buffer)},function(r,n,s){const i=(this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}})(s(3));r.exports=function(...o){i.default.logging&&console.log(...o)}},function(r,n,s){const i=(this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}})(s(1));r.exports=class{addEvents(o){o.forEach(u=>this._addEvent(u))}addEventListener(o,u){if(typeof o!="string")throw new Error("Argument eventName should be a string");if(typeof u!="function")throw new Error("Argument handler should be a function");i.default("[EventHandling] Adding event listener",o),this._validateEvent(o),this._handlers[o].push(u)}on(o,u){return this.addEventListener(o,u)}removeEventListener(o,u){this._validateEvent(o);const c=this._handlers[o].length;for(let g=0;g<c;g++)if(this._handlers[o][g]===u)return void this._handlers[o].splice(g,1)}_emit(o,...u){this._validateEvent(o),this._handlers[o].slice().forEach(c=>{c.apply(this,u)})}_validateEvent(o){if(!(o in this._handlers))throw new Error("Unknown event: "+o)}_delegateEvent(o,u){u.on(o,c=>{this._emit(o,c)})}_addEvent(o){this._handlers===void 0&&(this._handlers={}),this._handlers[o]=[]}}},function(r,n,s){const i={cache:!0,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},cordovaRedirectUri:void 0,logging:!1,modules:[],backgroundSyncInterval:6e4,disableFeatures:[],discoveryTimeout:1e4,isBackground:!1,requestTimeout:3e4,syncInterval:1e4};r.exports=i},function(r,n,s){class i extends Error{constructor(u,c={}){super(),this.name="Unauthorized",this.message=u===void 0?"App authorization expired or revoked.":u,c.code!==void 0&&(this.code=c.code),this.stack=new Error().stack}}r.exports=i},function(r,n){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}r.exports=s},function(r,n,s){var i=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};const o=i(s(1)),u=s(0),c=i(s(4));let g;function _(k){const w=k||y.getLocation().href,v=w.indexOf("#");if(v===-1)return;const b=w.substring(v+1);return b.includes("=")?b.split("&").reduce(function(T,E){const I=E.split("=");if(I[0]==="state"&&I[1].match(/rsDiscovery/)){let A=decodeURIComponent(I[1]);const U=A.substr(A.indexOf("rsDiscovery=")).split("&")[0].split("=")[1];T.rsDiscovery=JSON.parse(atob(U)),A=A.replace(new RegExp("&?rsDiscovery="+U),""),A.length>0&&(T.state=A)}else T[decodeURIComponent(I[0])]=decodeURIComponent(I[1]);return T},{}):void 0}class y{static authorize(w,{authURL:v,scope:b,redirectUri:T,clientId:E}){if(o.default("[Authorize] authURL = ",v,"scope = ",b,"redirectUri = ",T,"clientId = ",E),!u.localStorageAvailable()&&w.backend==="remotestorage"){T+=T.indexOf("#")>0?"&":"#";const A={userAddress:w.remote.userAddress,href:w.remote.href,storageApi:w.remote.storageApi,properties:w.remote.properties};T+="rsDiscovery="+u.toBase64(JSON.stringify(A))}const I=function(A,U,C,a){const m=U.indexOf("#");let p=A;return p+=A.indexOf("?")>0?"&":"?",p+="redirect_uri="+encodeURIComponent(U.replace(/#.*$/,"")),p+="&scope="+encodeURIComponent(C),p+="&client_id="+encodeURIComponent(a),m!==-1&&m+1!==U.length&&(p+="&state="+encodeURIComponent(U.substring(m+1))),p+="&response_type=token",p}(v,T,b,E);u.globalContext.cordova?y.openWindow(I,T,"location=yes,clearsessioncache=yes,clearcache=yes").then(A=>{w.remote.configure({token:A.access_token})}):y.setLocation(I)}static setLocation(w){if(typeof w=="string")document.location.href=w;else{if(typeof w!="object")throw"Invalid location "+w;document.location=w}}static _rs_supported(){return typeof document!="undefined"}static _rs_cleanup(w){w.removeEventListener("features-loaded",g)}}y.IMPLIED_FAKE_TOKEN=!1,y.getLocation=function(){return document.location},y.openWindow=function(k,w,v){return new Promise((b,T)=>{const E=open(k,"_blank",v);if(!E||E.closed)return T("Authorization popup was blocked");function I(){return T("Authorization was canceled")}E.addEventListener("loadstart",function(A){if(A.url.indexOf(w)!==0)return;E.removeEventListener("exit",I),E.close();const U=_(A.url);return U?b(U):T("Authorization error")}),E.addEventListener("exit",I)})},y._rs_init=function(k){const w=_();let v;w&&(v=y.getLocation(),v.hash=""),g=function(){let b=!1;if(w){if(w.error)throw w.error==="access_denied"?new c.default("Authorization failed: access denied",{code:"access_denied"}):new c.default("Authorization failed: "+w.error);w.rsDiscovery&&k.remote.configure(w.rsDiscovery),w.access_token&&(k.remote.configure({token:w.access_token}),b=!0),w.remotestorage&&(k.connect(w.remotestorage),b=!0),w.state&&(v=y.getLocation(),y.setLocation(v.href.split("#")[0]+"#"+w.state)),b||k.remote.stopWaitingForToken()}else k.remote.stopWaitingForToken()},k.on("features-loaded",g)},r.exports=y},function(r,n,s){var i=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};const o=i(s(23)),u=i(s(24)),c=i(s(25)),g=i(s(2)),_=i(s(3)),y=s(0);class k{constructor(v,b){if(this.schemas={configurable:!0,get:function(){return k.Types.inScope(this.moduleName)}},b[b.length-1]!=="/")throw"Not a folder: "+b;b==="/"&&(this.makePath=E=>(E[0]==="/"?"":"/")+E),this.storage=v,this.base=b;const T=this.base.split("/");T.length>2?this.moduleName=T[1]:this.moduleName="root",this.addEvents(["change"]),this.on=this.on.bind(this),v.onChange(this.base,this._fireChange.bind(this))}scope(v){return new k(this.storage,this.makePath(v))}getListing(v,b){if(typeof v!="string")v="";else if(v.length>0&&v[v.length-1]!=="/")return Promise.reject("Not a folder: "+v);return this.storage.get(this.makePath(v),b).then(function(T){return T.statusCode===404?{}:T.body})}getAll(v,b){if(typeof v!="string")v="";else if(v.length>0&&v[v.length-1]!=="/")return Promise.reject("Not a folder: "+v);return this.storage.get(this.makePath(v),b).then(T=>{if(T.statusCode===404)return{};if(typeof T.body=="object"){const E=Object.keys(T.body);if(E.length===0)return{};const I=E.map(A=>this.storage.get(this.makePath(v+A),b).then(function(U){if(typeof U.body=="string")try{U.body=JSON.parse(U.body)}catch{}typeof U.body=="object"&&(T.body[A]=U.body)}));return Promise.all(I).then(function(){return T.body})}})}getFile(v,b){return typeof v!="string"?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(v),b).then(function(T){return{data:T.body,contentType:T.contentType,revision:T.revision}})}storeFile(v,b,T){return typeof v!="string"?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):typeof b!="string"?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):typeof T!="string"&&typeof T!="object"?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(b),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(b),T,v).then(E=>E.statusCode===200||E.statusCode===201?E.revision:Promise.reject("Request (PUT "+this.makePath(b)+") failed with status: "+E.statusCode)))}getObject(v,b){return typeof v!="string"?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(v),b).then(T=>{if(typeof T.body=="object")return T.body;if(typeof T.body=="string")try{return JSON.parse(T.body)}catch{throw new Error("Not valid JSON: "+this.makePath(v))}else if(T.body!==void 0&&T.statusCode===200)return Promise.reject("Not an object: "+this.makePath(v))})}storeObject(v,b,T){if(typeof v!="string")return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if(typeof b!="string")return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if(typeof T!="object")return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(T,v);try{const E=this.validate(T);if(!E.valid)return Promise.reject(E)}catch(E){return Promise.reject(E)}return this.storage.put(this.makePath(b),JSON.stringify(T),"application/json; charset=UTF-8").then(E=>E.statusCode===200||E.statusCode===201?E.revision:Promise.reject("Request (PUT "+this.makePath(b)+") failed with status: "+E.statusCode))}remove(v){return typeof v!="string"?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(v),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage.delete(this.makePath(v)))}getItemURL(v){if(typeof v!="string")throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(v=y.cleanPath(this.makePath(v)),this.storage.remote.href+v):void 0}cache(v,b="ALL"){if(typeof v!="string")throw"Argument 'path' of baseClient.cache must be a string";if(typeof b!="string")throw"Argument 'strategy' of baseClient.cache must be a string or undefined";if(b!=="FLUSH"&&b!=="SEEN"&&b!=="ALL")throw`Argument 'strategy' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]`;return this.storage.caching.set(this.makePath(v),b),this}flush(v){return this.storage.local.flush(v)}declareType(v,b,T){let E;T?E=b:(T=b,E=this._defaultTypeURI(v)),k.Types.declare(this.moduleName,v,E,T)}validate(v){const b=k.Types.getSchema(v["@context"]);if(b)return o.default.validateResult(v,b);throw new c.default(v["@context"])}_defaultTypeURI(v){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(v)}_attachType(v,b){v["@context"]=k.Types.resolveAlias(this.moduleName+"/"+b)||this._defaultTypeURI(b)}makePath(v){return this.base+(v||"")}_fireChange(v){_.default.changeEvents[v.origin]&&(["new","old","lastCommon"].forEach(function(b){if((!v[b+"ContentType"]||/^application\/(.*)json(.*)/.exec(v[b+"ContentType"]))&&typeof v[b+"Value"]=="string")try{v[b+"Value"]=JSON.parse(v[b+"Value"])}catch{}}),this._emit("change",v))}static _rs_init(){}}k.Types=u.default,y.applyMixins(k,[g.default]),r.exports=k},function(r,n,s){(function(i){var o=this&&this.__awaiter||function(C,a,m,p){return new(m||(m=Promise))(function(N,S){function M(q){try{H(p.next(q))}catch(R){S(R)}}function J(q){try{H(p.throw(q))}catch(R){S(R)}}function H(q){var R;q.done?N(q.value):(R=q.value,R instanceof m?R:new m(function(j){j(R)})).then(M,J)}H((p=p.apply(C,a||[])).next())})},u=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};const c=u(s(6)),g=u(s(2)),_=u(s(4)),y=u(s(3)),k=u(s(1)),w=s(0);let v;const b="remotestorage:wireclient",T={"draft-dejong-remotestorage-00":2,"draft-dejong-remotestorage-01":3,"draft-dejong-remotestorage-02":4,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":1};let E;if(typeof(i||window).ArrayBufferView=="function")E=function(C){return C&&C instanceof(i||window).ArrayBufferView};else{const C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];E=function(a){for(let m=0;m<8;m++)if(a instanceof C[m])return!0;return!1}}function I(C){return typeof C!="string"?C:C==="*"?"*":'"'+C+'"'}function A(C){return typeof C!="string"?C:C.replace(/^["']|["']$/g,"")}class U{constructor(a){if(this._revisionCache={},v=w.localStorageAvailable(),this.rs=a,this.connected=!1,this.addEvents(["connected","not-connected"]),v){const m=function(){const p=w.getJSONFromLocalStorage(b)||{},{userAddress:N,href:S,storageApi:M,token:J,properties:H}=p;return{userAddress:N,href:S,storageApi:M,token:J,properties:H}}();m&&setTimeout(()=>{this.configure(m)},0)}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}get storageType(){if(this.storageApi){const a=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return a?a[1]:"2012.04"}}_request(a,m,p,N,S,M,J){return o(this,void 0,void 0,function*(){if(function(q,R){return(q==="PUT"||q==="DELETE")&&w.isFolder(R)}(a,m))return Promise.reject(`Don't use ${a} on directories!`);let H;return p!==c.default.IMPLIED_FAKE_TOKEN&&(N.Authorization="Bearer "+p),this.rs._emit("wire-busy",{method:a,isFolder:w.isFolder(m)}),U.request(a,m,{body:S,headers:N,responseType:"arraybuffer"}).then(q=>{if(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:a,isFolder:w.isFolder(m),success:!0}),R=q.status,[401,403,404,412].indexOf(R)>=0)return k.default("[WireClient] Error response status",q.status),H=M?A(q.getResponseHeader("ETag")):void 0,q.status===401&&this.rs._emit("error",new _.default),Promise.resolve({statusCode:q.status,revision:H});if(function(j){return[201,204,304].indexOf(j)>=0}(q.status)||q.status===200&&a!=="GET")return H=A(q.getResponseHeader("ETag")),k.default("[WireClient] Successful request",H),Promise.resolve({statusCode:q.status,revision:H});{const j=q.getResponseHeader("Content-Type");H=M?A(q.getResponseHeader("ETag")):q.status===200?J:void 0;const f=function(d){let O,D="UTF-8";return d&&(O=d.match(/charset=(.+)$/),O&&(D=O[1])),D}(j);return w.shouldBeTreatedAsBinary(q.response,j)?(k.default("[WireClient] Successful request with unknown or binary mime-type",H),Promise.resolve({statusCode:q.status,body:q.response,contentType:j,revision:H})):w.getTextFromArrayBuffer(q.response,f).then(d=>(k.default("[WireClient] Successful request",H),Promise.resolve({statusCode:q.status,body:d,contentType:j,revision:H})))}var R},q=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:a,isFolder:w.isFolder(m),success:!1}),Promise.reject(q)))})}configure(a){if(typeof a!="object")throw new Error("WireClient configure settings parameter should be an object");if(a.userAddress!==void 0&&(this.userAddress=a.userAddress),a.href!==void 0&&(this.href=a.href),a.storageApi!==void 0&&(this.storageApi=a.storageApi),a.token!==void 0&&(this.token=a.token),a.properties!==void 0&&(this.properties=a.properties),typeof this.storageApi=="string"){const m=T[this.storageApi]||5;this.supportsRevs=m>=2}this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,v&&(localStorage[b]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(a,m={}){if(!this.connected)return Promise.reject("not connected (path: "+a+")");const p={};return this.supportsRevs&&m.ifNoneMatch&&(p["If-None-Match"]=I(m.ifNoneMatch)),this._request("GET",this.href+w.cleanPath(a),this.token,p,void 0,this.supportsRevs,this._revisionCache[a]).then(N=>{if(!w.isFolder(a))return Promise.resolve(N);let S={};if(N.body!==void 0)try{N.body=JSON.parse(N.body)}catch{return Promise.reject("Folder description at "+this.href+w.cleanPath(a)+" is not JSON")}if(N.statusCode===200&&typeof N.body=="object"){if(Object.keys(N.body).length===0)N.statusCode=404;else if((M=N.body)["@context"]==="http://remotestorage.io/spec/folder-description"&&typeof M.items=="object"){for(const J in N.body.items)this._revisionCache[a+J]=N.body.items[J].ETag;S=N.body.items}else Object.keys(N.body).forEach(J=>{this._revisionCache[a+J]=N.body[J],S[J]={ETag:N.body[J]}});return N.body=S,Promise.resolve(N)}return Promise.resolve(N);var M})}put(a,m,p,N={}){if(!this.connected)return Promise.reject("not connected (path: "+a+")");!p.match(/charset=/)&&(m instanceof ArrayBuffer||E(m))&&(p+="; charset=binary");const S={"Content-Type":p};return this.supportsRevs&&(N.ifMatch&&(S["If-Match"]=I(N.ifMatch)),N.ifNoneMatch&&(S["If-None-Match"]=I(N.ifNoneMatch))),this._request("PUT",this.href+w.cleanPath(a),this.token,S,m,this.supportsRevs)}delete(a,m={}){if(!this.connected)throw new Error("not connected (path: "+a+")");m||(m={});const p={};return this.supportsRevs&&m.ifMatch&&(p["If-Match"]=I(m.ifMatch)),this._request("DELETE",this.href+w.cleanPath(a),this.token,p,void 0,this.supportsRevs)}static request(a,m,p){return o(this,void 0,void 0,function*(){return typeof fetch=="function"?U._fetchRequest(a,m,p):typeof XMLHttpRequest=="function"?U._xhrRequest(a,m,p):(k.default("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"),Promise.reject("[WireClient] You need to add a polyfill for fetch or XMLHttpRequest"))})}static _fetchRequest(a,m,p){let N;const S={};let M;typeof AbortController=="function"&&(M=new AbortController);const J=fetch(m,{method:a,headers:p.headers,body:p.body,signal:M?M.signal:void 0}).then(q=>{switch(k.default("[WireClient fetch]",q),q.headers.forEach((R,j)=>{S[j.toUpperCase()]=R}),N={readyState:4,status:q.status,statusText:q.statusText,response:void 0,getResponseHeader:R=>S[R.toUpperCase()]||null,responseType:p.responseType,responseURL:m},p.responseType){case"arraybuffer":return q.arrayBuffer();case"blob":return q.blob();case"json":return q.json();case void 0:case"":case"text":return q.text();default:throw new Error("responseType 'document' is not currently supported using fetch")}}).then(q=>(N.response=q,p.responseType&&p.responseType!=="text"||(N.responseText=q),N)),H=new Promise((q,R)=>{setTimeout(()=>{R("timeout"),M&&M.abort()},y.default.requestTimeout)});return Promise.race([J,H])}static _xhrRequest(a,m,p){return new Promise((N,S)=>{k.default("[WireClient]",a,m);let M=!1;const J=setTimeout(()=>{M=!0,S("timeout")},y.default.requestTimeout),H=new XMLHttpRequest;if(H.open(a,m,!0),p.responseType&&(H.responseType=p.responseType),p.headers)for(const R in p.headers)H.setRequestHeader(R,p.headers[R]);H.onload=()=>{M||(clearTimeout(J),N(H))},H.onerror=R=>{M||(clearTimeout(J),S(R))};let q=p.body;typeof q=="object"&&!E(q)&&q instanceof ArrayBuffer&&(q=new Uint8Array(q)),H.send(q)})}static _rs_init(a){a.remote=new U(a),a.remote.online=!0}static _rs_supported(){return typeof fetch=="function"||typeof XMLHttpRequest=="function"}static _rs_cleanup(){v&&delete localStorage[b]}}U.isArrayBufferView=E,w.applyMixins(U,[g.default]),r.exports=U}).call(this,s(5))},function(r,n,s){class i extends Error{constructor(u){super(),this.name="SyncError",this.message="Sync failed: ",typeof u=="string"?this.message+=u:(this.message+=u.message,this.stack=u.stack,this.originalError=u)}}r.exports=i},function(r,n,s){var i=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};const o=i(s(2)),u=i(s(3)),c=i(s(1)),g=s(0);class _{constructor(){this._updateNodesRunning=!1,this._updateNodesQueued=[]}get(T,E,I){return typeof E=="number"?this.getNodes(g.pathsFromRoot(T)).then(A=>{const U=y(A[T]);return k(A,E)?I(T):U?{statusCode:200,body:U.body||U.itemsMap,contentType:U.contentType}:{statusCode:404}}):this.getNodes([T]).then(A=>{const U=y(A[T]);if(U){if(g.isFolder(T))for(const C in U.itemsMap)U.itemsMap.hasOwnProperty(C)&&U.itemsMap[C]===!1&&delete U.itemsMap[C];return{statusCode:200,body:U.body||U.itemsMap,contentType:U.contentType}}return{statusCode:404}})}put(T,E,I){const A=g.pathsFromRoot(T);return this._updateNodes(A,function(U,C){try{for(let a=0,m=U.length;a<m;a++){const p=U[a];let N,S=C[p];S||(C[p]=S=w(p)),a===0?(N=y(S),S.local={body:E,contentType:I,previousBody:N?N.body:void 0,previousContentType:N?N.contentType:void 0}):S=v(S,U[a-1].substring(p.length))}return C}catch(a){throw c.default("[Cachinglayer] Error during PUT",C,a),a}})}delete(T){const E=g.pathsFromRoot(T);return this._updateNodes(E,function(I,A){for(let U=0,C=I.length;U<C;U++){const a=I[U],m=A[a];let p;if(m)if(U===0)p=y(m),m.local={body:!1,previousBody:p?p.body:void 0,previousContentType:p?p.contentType:void 0};else{m.local||(m.local=g.deepClone(m.common));const N=I[U-1].substring(a.length);if(delete m.local.itemsMap[N],Object.getOwnPropertyNames(m.local.itemsMap).length>0)break}else console.error("Cannot delete non-existing node "+a)}return A})}flush(T){return this._getAllDescendentPaths(T).then(E=>this.getNodes(E)).then(E=>{for(const I in E){const A=E[I];A&&A.common&&A.local&&this._emitChange({path:A.path,origin:"local",oldValue:A.local.body===!1?void 0:A.local.body,newValue:A.common.body===!1?void 0:A.common.body}),E[I]=void 0}return this.setNodes(E)})}_emitChange(T){u.default.changeEvents[T.origin]&&this._emit("change",T)}fireInitial(){u.default.changeEvents.local&&this.forAllNodes(T=>{if(g.isDocument(T.path)){const E=y(T);E&&this._emitChange({path:T.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:E.body,newContentType:E.contentType})}}).then(()=>{this._emit("local-events-done")})}onDiff(T){this.diffHandler=T}migrate(T){return typeof T!="object"||T.common||(T.common={},typeof T.path=="string"?T.path.substr(-1)==="/"&&typeof T.body=="object"&&(T.common.itemsMap=T.body):(T.local||(T.local={}),T.local.body=T.body,T.local.contentType=T.contentType)),T}_updateNodes(T,E){return new Promise((I,A)=>{this._doUpdateNodes(T,E,{resolve:I,reject:A})})}_doUpdateNodes(T,E,I){this._updateNodesRunning?this._updateNodesQueued.push({paths:T,cb:E,promise:I}):(this._updateNodesRunning=!0,this.getNodes(T).then(A=>{const U=g.deepClone(A),C=[];A=E(T,A);for(const a in A){const m=A[a];g.equal(m,U[a])?delete A[a]:g.isDocument(a)&&(g.equal(m.local.body,m.local.previousBody)&&m.local.contentType===m.local.previousContentType||C.push({path:a,origin:"window",oldValue:m.local.previousBody,newValue:m.local.body===!1?void 0:m.local.body,oldContentType:m.local.previousContentType,newContentType:m.local.contentType}),delete m.local.previousBody,delete m.local.previousContentType)}this.setNodes(A).then(()=>{this._emitChangeEvents(C),I.resolve({statusCode:200})})}).then(()=>Promise.resolve(),A=>{I.reject(A)}).then(()=>{this._updateNodesRunning=!1;const A=this._updateNodesQueued.shift();A&&this._doUpdateNodes(A.paths,A.cb,A.promise)}))}_emitChangeEvents(T){for(let E=0,I=T.length;E<I;E++)this._emitChange(T[E]),this.diffHandler&&this.diffHandler(T[E].path)}_getAllDescendentPaths(T){return g.isFolder(T)?this.getNodes([T]).then(E=>{const I=[T],A=y(E[T]),U=Object.keys(A.itemsMap).map(C=>this._getAllDescendentPaths(T+C).then(a=>{for(let m=0,p=a.length;m<p;m++)I.push(a[m])}));return Promise.all(U).then(()=>I)}):Promise.resolve([T])}_getInternals(){return{getLatest:y,makeNode:w,isOutdated:k}}}function y(b){if(typeof b=="object"&&typeof b.path=="string")if(g.isFolder(b.path)){if(b.local&&b.local.itemsMap)return b.local;if(b.common&&b.common.itemsMap)return b.common}else{if(b.local){if(b.local.body&&b.local.contentType)return b.local;if(b.local.body===!1)return}if(b.common&&b.common.body&&b.common.contentType)return b.common;if(b.body&&b.contentType)return{body:b.body,contentType:b.contentType}}}function k(b,T){for(const E in b){if(b[E]&&b[E].remote)return!0;const I=y(b[E]);if(I&&I.timestamp&&new Date().getTime()-I.timestamp<=T)return!1;if(!I)return!0}return!0}function w(b){const T={path:b,common:{}};return g.isFolder(b)&&(T.common.itemsMap={}),T}function v(b,T){return b.common||(b.common={itemsMap:{}}),b.common.itemsMap||(b.common.itemsMap={}),b.local||(b.local=g.deepClone(b.common)),b.local.itemsMap||(b.local.itemsMap=b.common.itemsMap),b.local.itemsMap[T]=!0,b}g.applyMixins(_,[o.default]),r.exports=_},function(r,n,s){r.exports=class{constructor(){this.reset()}static _rs_init(){}get scopes(){return Object.keys(this.scopeModeMap).map(i=>({name:i,mode:this.scopeModeMap[i]}))}get scopeParameter(){return this.scopes.map(i=>`${this._scopeNameForParameter(i)}:${i.mode}`).join(" ")}claim(i,o){if(typeof i!="string"||i.indexOf("/")!==-1||i.length===0)throw new Error("Scope should be a non-empty string without forward slashes");if(!o.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(i),this.scopeModeMap[i]=o}get(i){return this.scopeModeMap[i]}remove(i){const o={};for(const u in this.scopeModeMap)o[u]=this.scopeModeMap[u];this.reset(),delete o[i];for(const u in o)this.claim(u,o[u])}checkPermission(i,o){const u=this.get(i);return u&&(o==="r"||u==="rw")}checkPathPermission(i,o){if(this.checkPermission("*",o))return!0;const u=this._getModuleName(i);return!!this.checkPermission(u,o)}reset(){this.rootPaths=[],this.scopeModeMap={}}_getModuleName(i){if(i[0]!=="/")throw new Error("Path should start with a slash");const o=i.replace(/^\/public/,"").match(/^\/([^/]*)\//);return o?o[1]:"*"}_adjustRootPaths(i){"*"in this.scopeModeMap||i==="*"?this.rootPaths=["/"]:i in this.scopeModeMap||(this.rootPaths.push("/"+i+"/"),this.rootPaths.push("/public/"+i+"/"))}_scopeNameForParameter(i){if(i.name==="*"&&this.storageType){if(this.storageType==="2012.04")return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return i.name}setStorageType(i){this.storageType=i}}},function(r,n,s){var i=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};const o=s(0),u=i(s(1));r.exports=class{constructor(){this.pendingActivations=[],this.reset()}set(c,g){if(typeof c!="string")throw new Error("path should be a string");if(!o.isFolder(c))throw new Error("path should be a folder");if(!g.match(/^(FLUSH|SEEN|ALL)$/))throw new Error("strategy should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[c]=g,g==="ALL"&&(this.activateHandler?this.activateHandler(c):this.pendingActivations.push(c))}enable(c){this.set(c,"ALL")}disable(c){this.set(c,"FLUSH")}onActivate(c){u.default("[Caching] Setting activate handler",c,this.pendingActivations),this.activateHandler=c;for(let g=0;g<this.pendingActivations.length;g++)c(this.pendingActivations[g]);this.pendingActivations=[]}checkPath(c){return this._rootPaths[c]!==void 0?this._rootPaths[c]:c==="/"?"SEEN":this.checkPath(o.containingFolder(c))}reset(){this._rootPaths={}}static _rs_init(){}}},function(r,n,s){var i=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};const o=i(s(7)),u=i(s(8)),c=i(s(2)),g=s(0),_="https://www.googleapis.com",y="remotestorage:googledrive";let k;function w(U){return U.substr(-1)==="/"&&(U=U.substr(0,U.length-1)),decodeURIComponent(U)}function v(U){return U.replace(/[^\/]+\/?$/,"")}function b(U){const C=U.split("/");return U.substr(-1)==="/"?C[C.length-2]+"/":C[C.length-1]}function T(U){return g.cleanPath("/remotestorage/"+U)}function E(U){return U.replace(/^["'](.*)["']$/,"$1")}class I{constructor(C){this._items={},this.maxAge=C,this._items={}}get(C){const a=this._items[C],m=new Date().getTime();return a&&a.t>=m-this.maxAge?a.v:void 0}set(C,a){this._items[C]={v:a,t:new Date().getTime()}}}class A{constructor(C,a){if(this.connected=!1,this.online=!0,this.addEvents(["connected","not-connected"]),this.rs=C,this.clientId=a,this._fileIdCache=new I(300),k=g.localStorageAvailable(),k){const m=g.getJSONFromLocalStorage(y);m&&this.configure(m)}}configure(C){C.userAddress!==void 0&&(this.userAddress=C.userAddress),C.token!==void 0&&(this.token=C.token);const a=function(){k&&localStorage.setItem(y,JSON.stringify({userAddress:this.userAddress,token:this.token}))},m=function(){this.connected=!1,delete this.token,k&&localStorage.removeItem(y)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),a.apply(this)):this.info().then(p=>{this.userAddress=p.user.emailAddress,this._emit("connected"),a.apply(this)}).catch(()=>{m.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))})):m.apply(this)}connect(){this.rs.setBackend("googledrive"),this.rs.authorize({authURL:"https://accounts.google.com/o/oauth2/auth",scope:"https://www.googleapis.com/auth/drive",clientId:this.clientId})}stopWaitingForToken(){this.connected||this._emit("not-connected")}get(C,a){return g.isFolder(C)?this._getFolder(T(C)):this._getFile(T(C),a)}put(C,a,m,p){const N=T(C);function S(M){if(M.status>=200&&M.status<300){const J=JSON.parse(M.responseText),H=E(J.etag);return Promise.resolve({statusCode:200,contentType:J.mimeType,revision:H})}return M.status===412?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+M.status+" ("+M.responseText+")")}return this._getFileId(N).then(M=>M?p&&p.ifNoneMatch==="*"?S({status:412}):this._updateFile(M,N,a,m,p).then(S):this._createFile(N,a,m).then(S))}delete(C,a){const m=T(C);return this._getFileId(m).then(p=>p?this._getMeta(p).then(N=>{let S;return typeof N=="object"&&typeof N.etag=="string"&&(S=E(N.etag)),a&&a.ifMatch&&a.ifMatch!==S?{statusCode:412,revision:S}:this._request("DELETE",_+"/drive/v2/files/"+p,{}).then(M=>M.status===200||M.status===204?{statusCode:200}:Promise.reject("Delete failed: "+M.status+" ("+M.responseText+")"))}):Promise.resolve({statusCode:200}))}info(){return this._request("GET","https://www.googleapis.com/drive/v2/about?fields=user",{}).then(function(C){try{const a=JSON.parse(C.responseText);return Promise.resolve(a)}catch(a){return Promise.reject(a)}})}_updateFile(C,a,m,p,N){const S={mimeType:p},M={"Content-Type":"application/json; charset=UTF-8"};return N&&N.ifMatch&&(M["If-Match"]='"'+N.ifMatch+'"'),this._request("PUT",_+"/upload/drive/v2/files/"+C+"?uploadType=resumable",{body:JSON.stringify(S),headers:M}).then(J=>J.status===412?J:this._request("PUT",J.getResponseHeader("Location"),{body:p.match(/^application\/json/)?JSON.stringify(m):m}))}_createFile(C,a,m){return this._getParentId(C).then(p=>{const N={title:w(b(C)),mimeType:m,parents:[{kind:"drive#fileLink",id:p}]};return this._request("POST",_+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(N),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(S=>this._request("POST",S.getResponseHeader("Location"),{body:m.match(/^application\/json/)?JSON.stringify(a):a}))})}_getFile(C,a){return this._getFileId(C).then(m=>this._getMeta(m).then(p=>{let N;if(typeof p=="object"&&typeof p.etag=="string"&&(N=E(p.etag)),a&&a.ifNoneMatch&&N===a.ifNoneMatch)return Promise.resolve({statusCode:304});if(!p.downloadUrl){if(!p.exportLinks||!p.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:p.mimeType,revision:N});p.mimeType+=";export=text/html",p.downloadUrl=p.exportLinks["text/html"]}return this._request("GET",p.downloadUrl,{responseType:"arraybuffer"}).then(S=>g.getTextFromArrayBuffer(S.response,"UTF-8").then(function(M){let J=M;if(p.mimeType.match(/^application\/json/))try{J=JSON.parse(J)}catch{}else g.shouldBeTreatedAsBinary(M,p.mimeType)&&(J=S.response);return{statusCode:200,body:J,contentType:p.mimeType,revision:N}}))}))}_getFolder(C){return this._getFileId(C).then(a=>{let m,p,N;if(!a)return Promise.resolve({statusCode:404});const S="'"+a+"' in parents";return this._request("GET",_+"/drive/v2/files?q="+encodeURIComponent(S)+"&fields="+encodeURIComponent("items(downloadUrl,etag,fileSize,id,mimeType,title,labels)")+"&maxResults=1000&trashed=false",{}).then(M=>{var J;if(M.status!==200)return Promise.reject("request failed or something: "+M.status);try{m=JSON.parse(M.responseText)}catch{return Promise.reject("non-JSON response from GoogleDrive")}N={};for(const H of m.items)!((J=H.labels)===null||J===void 0)&&J.trashed||(p=E(H.etag),H.mimeType==="application/vnd.google-apps.folder"?(this._fileIdCache.set(C+g.cleanPath(H.title)+"/",H.id),N[H.title+"/"]={ETag:p}):(this._fileIdCache.set(C+g.cleanPath(H.title),H.id),N[H.title]={ETag:p,"Content-Type":H.mimeType,"Content-Length":H.fileSize}));return Promise.resolve({statusCode:200,body:N,contentType:"application/json; charset=UTF-8",revision:void 0})})})}_getParentId(C){const a=v(C);return this._getFileId(a).then(m=>m?Promise.resolve(m):this._createFolder(a))}_createFolder(C){return this._getParentId(C).then(a=>this._request("POST",_+"/drive/v2/files",{body:JSON.stringify({title:w(b(C)),mimeType:"application/vnd.google-apps.folder",parents:[{id:a}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(m=>{const p=JSON.parse(m.responseText);return Promise.resolve(p.id)}))}_getFileId(C){let a;return C==="/"?Promise.resolve("root"):(a=this._fileIdCache.get(C))?Promise.resolve(a):this._getFolder(v(C)).then(()=>(a=this._fileIdCache.get(C),a?Promise.resolve(a):C.substr(-1)==="/"?this._createFolder(C).then(()=>this._getFileId(C)):Promise.resolve()))}_getMeta(C){return this._request("GET",_+"/drive/v2/files/"+C,{}).then(function(a){return a.status===200?Promise.resolve(JSON.parse(a.responseText)):Promise.reject("request (getting metadata for "+C+") failed with status: "+a.status)})}_request(C,a,m){return m.headers||(m.headers={}),m.headers.Authorization="Bearer "+this.token,this.rs._emit("wire-busy",{method:C,isFolder:g.isFolder(a)}),u.default.request.call(this,C,a,m).then(p=>p&&p.status===401?void this.connect():(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:C,isFolder:g.isFolder(a),success:!0}),Promise.resolve(p)),p=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:C,isFolder:g.isFolder(a),success:!1}),Promise.reject(p)))}static _rs_init(C){const a=C.apiKeys.googledrive;var m;a&&(C.googledrive=new A(C,a.clientId),C.backend==="googledrive"&&(C._origRemote=C.remote,C.remote=C.googledrive,(m=C)._origBaseClientGetItemURL||(m._origBaseClientGetItemURL=o.default.prototype.getItemURL,o.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Google Drive yet")})))}static _rs_supported(){return!0}static _rs_cleanup(C){var a;C.setBackend(void 0),C._origRemote&&(C.remote=C._origRemote,delete C._origRemote),(a=C)._origBaseClientGetItemURL&&(o.default.prototype.getItemURL=a._origBaseClientGetItemURL,delete a._origBaseClientGetItemURL)}}g.applyMixins(A,[c.default]),r.exports=A},function(r,n,s){var i=this&&this.__awaiter||function(m,p,N,S){return new(N||(N=Promise))(function(M,J){function H(j){try{R(S.next(j))}catch(f){J(f)}}function q(j){try{R(S.throw(j))}catch(f){J(f)}}function R(j){var f;j.done?M(j.value):(f=j.value,f instanceof N?f:new N(function(d){d(f)})).then(H,q)}R((S=S.apply(m,p||[])).next())})},o=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};const u=o(s(2)),c=o(s(8)),g=o(s(7)),_=o(s(26)),y=o(s(9)),k=o(s(4)),w=s(0);let v;const b="remotestorage:dropbox";function T(m){return w.cleanPath("/remotestorage/"+m).replace(/\/$/,"")}function E(m,p){return new RegExp("^"+p.join("\\/")+"(\\/|$)").test(m.error_summary)}function I(m){return m instanceof ArrayBuffer||c.default.isArrayBufferView(m)}class A{constructor(p){if(this.rs=p,this.connected=!1,this.online=!0,this._initialFetchDone=!1,this.addEvents(["connected","not-connected"]),this.clientId=p.apiKeys.dropbox.appKey,this._revCache=new _.default("rev"),this._fetchDeltaCursor=null,this._fetchDeltaPromise=null,this._itemRefs={},v=w.localStorageAvailable(),v){const N=w.getJSONFromLocalStorage(b);N&&this.configure(N),this._itemRefs=w.getJSONFromLocalStorage(b+":shares")||{}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}connect(){this.rs.setBackend("dropbox"),this.token?a(this.rs):this.rs.authorize({authURL:"https://www.dropbox.com/oauth2/authorize",scope:"",clientId:this.clientId})}configure(p){p.userAddress!==void 0&&(this.userAddress=p.userAddress),p.token!==void 0&&(this.token=p.token);const N=function(){v&&localStorage.setItem(b,JSON.stringify({userAddress:this.userAddress,token:this.token}))},S=function(){this.connected=!1,v&&localStorage.removeItem(b)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),N.apply(this)):this.info().then(function(M){this.userAddress=M.email,this._emit("connected"),N.apply(this)}.bind(this)).catch(function(){S.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))}.bind(this))):S.apply(this)}stopWaitingForToken(){this.connected||this._emit("not-connected")}_getFolder(p){const N=this._revCache,S=J=>{let H;if(J.status!==200&&J.status!==409)return Promise.reject("Unexpected response status: "+J.status);try{H=JSON.parse(J.responseText)}catch(R){return Promise.reject(R)}if(J.status===409)return E(H,["path","not_found"])?Promise.resolve({}):Promise.reject(new Error("API returned an error: "+H.error_summary));const q=H.entries.reduce((R,j)=>{const f=j[".tag"]==="folder",d=j.path_lower.split("/").slice(-1)[0]+(f?"/":"");return f?R[d]={ETag:N.get(p+d)}:(R[d]={ETag:j.rev},this._revCache.set(p+d,j.rev)),R},{});return H.has_more?M(H.cursor).then(function(R){return Object.assign(q,R)}):Promise.resolve(q)},M=J=>{const H={body:{cursor:J}};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder/continue",H).then(S)};return this._request("POST","https://api.dropboxapi.com/2/files/list_folder",{body:{path:T(p)}}).then(S).then(function(J){return Promise.resolve({statusCode:200,body:J,contentType:"application/json; charset=UTF-8",revision:N.get(p)})})}get(p,N){if(!this.connected)return Promise.reject("not connected (path: "+p+")");const S=this._revCache.get(p);if(S===null)return Promise.resolve({statusCode:404});if(N&&N.ifNoneMatch){if(!this._initialFetchDone)return this.fetchDelta().then(()=>this.get(p,N));if(S&&S===N.ifNoneMatch)return Promise.resolve({statusCode:304})}if(p.substr(-1)==="/")return this._getFolder(p);const M={headers:{"Dropbox-API-Arg":JSON.stringify({path:T(p)})},responseType:"arraybuffer"};return N&&N.ifNoneMatch&&(M.headers["If-None-Match"]=N.ifNoneMatch),this._request("GET","https://content.dropboxapi.com/2/files/download",M).then(J=>{const H=J.status;let q,R,j,f;return H!==200&&H!==409?Promise.resolve({statusCode:H}):(q=J.getResponseHeader("Dropbox-API-Result"),w.getTextFromArrayBuffer(J.response,"UTF-8").then(d=>{R=d,H===409&&(q=R);try{q=JSON.parse(q)}catch(O){return Promise.reject(O)}if(H===409)return E(q,["path","not_found"])?{statusCode:404}:Promise.reject(new Error('API error while downloading file ("'+p+'"): '+q.error_summary));if(j=J.getResponseHeader("Content-Type"),f=q.rev,this._revCache.set(p,f),this._shareIfNeeded(p),w.shouldBeTreatedAsBinary(d,j))R=J.response;else try{R=JSON.parse(R),j="application/json; charset=UTF-8"}catch{}return{statusCode:H,body:R,contentType:j,revision:f}}))})}put(p,N,S,M){if(!this.connected)throw new Error("not connected (path: "+p+")");const J=this._revCache.get(p);if(M&&M.ifMatch&&J&&J!==M.ifMatch)return Promise.resolve({statusCode:412,revision:J});if(M&&M.ifNoneMatch==="*"&&J&&J!=="rev")return Promise.resolve({statusCode:412,revision:J});if(!S.match(/charset=/)&&I(N)&&(S+="; charset=binary"),N.length>157286400)return Promise.reject(new Error("Cannot upload file larger than 150MB"));let H;const q=M&&(M.ifMatch||M.ifNoneMatch==="*"),R={body:N,contentType:S,path:p};return H=q?this._getMetadata(p).then(j=>M&&M.ifNoneMatch==="*"&&j||M&&M.ifMatch&&j&&j.rev!==M.ifMatch?Promise.resolve({statusCode:412,revision:j.rev}):this._uploadSimple(R)):this._uploadSimple(R),H.then(j=>(this._shareIfNeeded(p),j))}delete(p,N){if(!this.connected)throw new Error("not connected (path: "+p+")");const S=this._revCache.get(p);return N&&N.ifMatch&&S&&N.ifMatch!==S?Promise.resolve({statusCode:412,revision:S}):N&&N.ifMatch?this._getMetadata(p).then(M=>N&&N.ifMatch&&M&&M.rev!==N.ifMatch?Promise.resolve({statusCode:412,revision:M.rev}):this._deleteSimple(p)):this._deleteSimple(p)}_shareIfNeeded(p){p.match(/^\/public\/.*[^/]$/)&&this._itemRefs[p]===void 0&&this.share(p)}share(p){const N={body:{path:T(p)}};return this._request("POST","https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings",N).then(S=>{if(S.status!==200&&S.status!==409)return Promise.reject(new Error("Invalid response status:"+S.status));let M;try{M=JSON.parse(S.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+S.responseText))}return S.status===409?E(M,["shared_link_already_exists"])?this._getSharedLink(p):Promise.reject(new Error("API error: "+M.error_summary)):Promise.resolve(M.url)}).then(S=>(this._itemRefs[p]=S,v&&localStorage.setItem(b+":shares",JSON.stringify(this._itemRefs)),Promise.resolve(S)),S=>(S.message='Sharing Dropbox file or folder ("'+p+'") failed: '+S.message,Promise.reject(S)))}info(){return this._request("POST","https://api.dropboxapi.com/2/users/get_current_account",{}).then(function(p){let N=p.responseText;try{N=JSON.parse(N)}catch{return Promise.reject(new Error("Could not query current account info: Invalid API response: "+N))}return Promise.resolve({email:N.email})})}_request(p,N,S){return S.headers||(S.headers={}),S.headers.Authorization="Bearer "+this.token,typeof S.body!="object"||I(S.body)||(S.body=JSON.stringify(S.body),S.headers["Content-Type"]="application/json; charset=UTF-8"),this.rs._emit("wire-busy",{method:p,isFolder:w.isFolder(N)}),c.default.request.call(this,p,N,S).then(M=>M&&M.status===503?(this.online&&(this.online=!1,this.rs._emit("network-offline")),setTimeout(this._request(p,N,S),3210)):(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:p,isFolder:w.isFolder(N),success:!0}),Promise.resolve(M)),M=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:p,isFolder:w.isFolder(N),success:!1}),Promise.reject(M)))}fetchDelta(...p){if(this._fetchDeltaPromise)return this._fetchDeltaPromise;const N=S=>{let M,J="https://api.dropboxapi.com/2/files/list_folder";return typeof S=="string"?(J+="/continue",M={cursor:S}):M={path:"/remotestorage",recursive:!0,include_deleted:!0},this._request("POST",J,{body:M}).then(H=>{if(H.status===401)return this.rs._emit("error",new k.default),Promise.resolve(p);if(H.status!==200&&H.status!==409)return Promise.reject(new Error("Invalid response status: "+H.status));let q;try{q=JSON.parse(H.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+H.responseText))}if(H.status===409){if(!E(q,["path","not_found"]))return Promise.reject(new Error("API returned an error: "+q.error_summary));q={cursor:null,entries:[],has_more:!1}}if(S||this._revCache.deactivatePropagation(),q.entries.forEach(R=>{const j=R.path_lower.substr(14);R[".tag"]==="deleted"?(this._revCache.delete(j),this._revCache.delete(j+"/")):R[".tag"]==="file"&&this._revCache.set(j,R.rev)}),this._fetchDeltaCursor=q.cursor,q.has_more)return N(q.cursor);this._revCache.activatePropagation(),this._initialFetchDone=!0}).catch(H=>H==="timeout"||H instanceof ProgressEvent?Promise.resolve():Promise.reject(H))};return this._fetchDeltaPromise=N(this._fetchDeltaCursor).catch(S=>(typeof S=="object"&&"message"in S?S.message="Dropbox: fetchDelta: "+S.message:S="Dropbox: fetchDelta: "+S,this._fetchDeltaPromise=null,Promise.reject(S))).then(()=>(this._fetchDeltaPromise=null,Promise.resolve(p))),this._fetchDeltaPromise}_getMetadata(p){const N={path:T(p)};return this._request("POST","https://api.dropboxapi.com/2/files/get_metadata",{body:N}).then(S=>{if(S.status!==200&&S.status!==409)return Promise.reject(new Error("Invalid response status:"+S.status));let M;try{M=JSON.parse(S.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+S.responseText))}return S.status===409?E(M,["path","not_found"])?Promise.resolve():Promise.reject(new Error("API error: "+M.error_summary)):Promise.resolve(M)}).then(void 0,S=>(S.message='Could not load metadata for file or folder ("'+p+'"): '+S.message,Promise.reject(S)))}_uploadSimple(p){const N={path:T(p.path),mode:{".tag":"overwrite",update:void 0},mute:!0};return p.ifMatch&&(N.mode={".tag":"update",update:p.ifMatch}),this._request("POST","https://content.dropboxapi.com/2/files/upload",{body:p.body,headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":JSON.stringify(N)}}).then(S=>{if(S.status!==200&&S.status!==409)return Promise.resolve({statusCode:S.status});let M=S.responseText;try{M=JSON.parse(M)}catch{return Promise.reject(new Error("Invalid API result: "+M))}return S.status===409?E(M,["path","conflict"])?this._getMetadata(p.path).then(function(J){return Promise.resolve({statusCode:412,revision:J.rev})}):Promise.reject(new Error("API error: "+M.error_summary)):(this._revCache.set(p.path,M.rev),Promise.resolve({statusCode:S.status,revision:M.rev}))})}_deleteSimple(p){const N={path:T(p)};return this._request("POST","https://api.dropboxapi.com/2/files/delete",{body:N}).then(S=>{if(S.status!==200&&S.status!==409)return Promise.resolve({statusCode:S.status});let M=S.responseText;try{M=JSON.parse(M)}catch{return Promise.reject(new Error("Invalid response body: "+M))}return S.status===409?E(M,["path_lookup","not_found"])?Promise.resolve({statusCode:404}):Promise.reject(new Error("API error: "+M.error_summary)):Promise.resolve({statusCode:200})}).then(S=>(S.statusCode!==200&&S.statusCode!==404||(this._revCache.delete(p),delete this._itemRefs[p]),Promise.resolve(S)),S=>(S.message='Could not delete Dropbox file or folder ("'+p+'"): '+S.message,Promise.reject(S)))}_getSharedLink(p){return i(this,void 0,void 0,function*(){const N={body:{path:T(p),direct_only:!0}};return this._request("POST","https://api.dropbox.com/2/sharing/list_shared_links",N).then(S=>{if(S.status!==200&&S.status!==409)return Promise.reject(new Error("Invalid response status: "+S.status));let M;try{M=JSON.parse(S.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+S.responseText))}return S.status===409?Promise.reject(new Error("API error: "+S.error_summary)):M.links.length?Promise.resolve(M.links[0].url):Promise.reject(new Error("No links returned"))},S=>(S.message='Could not get link to a shared file or folder ("'+p+'"): '+S.message,Promise.reject(S)))})}static _rs_init(p){v=w.localStorageAvailable(),p.apiKeys.dropbox&&(p.dropbox=new A(p)),p.backend==="dropbox"&&a(p)}static _rs_supported(){return!0}static _rs_cleanup(p){(function(N){(function(S){S._origRemote&&(S.remote=S._origRemote,delete S._origRemote)})(N),function(S){!S._dropboxOrigSync||(S.sync.sync=S._dropboxOrigSync,delete S._dropboxOrigSync)}(N),function(S){!S._origBaseClientGetItemURL||(g.default.prototype.getItemURL=S._origBaseClientGetItemURL,delete S._origBaseClientGetItemURL)}(N),C(N)})(p),v&&localStorage.removeItem(b),p.setBackend(void 0)}}function U(m,...p){m._dropboxOrigSync||(m._dropboxOrigSync=m.sync.sync.bind(m.sync),m.sync.sync=function(){return this.dropbox.fetchDelta(m,...p).then(m._dropboxOrigSync,function(N){m._emit("error",new y.default(N)),m._emit("sync-done")})}.bind(m))}function C(m){m._dropboxOrigSyncCycle&&(m.syncCycle=m._dropboxOrigSyncCycle,delete m._dropboxOrigSyncCycle)}function a(m){(function(p){p._origRemote||(p._origRemote=p.remote,p.remote=p.dropbox)})(m),m.sync?U(m):function(p,...N){p._dropboxOrigSyncCycle||(p._dropboxOrigSyncCycle=p.syncCycle,p.syncCycle=()=>{if(!p.sync)throw new Error("expected sync to be initialized by now");U(p),p._dropboxOrigSyncCycle(p,...N),C(p)})}(m),function(p){p._origBaseClientGetItemURL||(p._origBaseClientGetItemURL=g.default.prototype.getItemURL,g.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Dropbox yet")})}(m)}w.applyMixins(A,[u.default]),r.exports=A},function(r,n,s){var i=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};const o=i(s(27)),u=i(s(1)),c=s(0);let g,_,y={};const k=function(w){return new Promise((v,b)=>w in y?v(y[w]):new o.default({tls_only:!1,uri_fallback:!0,request_timeout:5e3}).lookup(w,function(T,E){if(T)return b(T);if(typeof E.idx.links.remotestorage!="object"||typeof E.idx.links.remotestorage.length!="number"||E.idx.links.remotestorage.length<=0)return u.default("[Discover] WebFinger record for "+w+" does not have remotestorage defined in the links section ",JSON.stringify(E.json)),b("WebFinger record for "+w+" does not have remotestorage defined in the links section.");const I=E.idx.links.remotestorage[0],A=I.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||I.properties["auth-endpoint"],U=I.properties["http://remotestorage.io/spec/version"]||I.type;return y[w]={href:I.href,storageApi:U,authURL:A,properties:I.properties},_&&(localStorage["remotestorage:discover"]=JSON.stringify({cache:y})),v(y[w])}))};(k.DiscoveryError=function(w){this.name="DiscoveryError",this.message=w,this.stack=new Error().stack}).prototype=Object.create(Error.prototype),k.DiscoveryError.prototype.constructor=k.DiscoveryError,k._rs_init=function(){if(_=c.localStorageAvailable(),_)try{y=JSON.parse(localStorage["remotestorage:discover"]).cache}catch{}},k._rs_supported=function(){return g=Object.prototype.hasOwnProperty.call(c.globalContext,"XMLHttpRequest"),g},k._rs_cleanup=function(){_&&delete localStorage["remotestorage:discover"]},r.exports=k},function(r,n,s){const i=(this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}})(s(2)),o=s(0);class u{constructor(){this.addEvents(["background","foreground"]),this.mode=typeof window!="undefined"?"browser":"node",this.mode==="browser"&&(this.setBrowserPrefixedNames(),document.addEventListener(this.visibilityChangeEvent,this.setVisibility.bind(this),!1),this.setVisibility())}setBrowserPrefixedNames(){this.mode==="browser"&&(document.hidden!==void 0?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):document.mozHidden!==void 0?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange"):document.msHidden!==void 0?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):document.webkitHidden!==void 0&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"))}setVisibility(){document[this.hiddenProperty]?this.goBackground():this.goForeground()}isBrowser(){return this.mode==="browser"}isNode(){return this.mode==="node"}goBackground(){this._emit("background")}goForeground(){this._emit("foreground")}static _rs_init(){}static _rs_cleanup(){}}o.applyMixins(u,[i.default]),r.exports=u},function(r,n,s){r.exports=s(18)},function(r,n,s){var i=this&&this.__createBinding||(Object.create?function(q,R,j,f){f===void 0&&(f=j),Object.defineProperty(q,f,{enumerable:!0,get:function(){return R[j]}})}:function(q,R,j,f){f===void 0&&(f=j),q[f]=R[j]}),o=this&&this.__setModuleDefault||(Object.create?function(q,R){Object.defineProperty(q,"default",{enumerable:!0,value:R})}:function(q,R){q.default=R}),u=this&&this.__importStar||function(q){if(q&&q.__esModule)return q;var R={};if(q!=null)for(var j in q)j!=="default"&&Object.hasOwnProperty.call(q,j)&&i(R,q,j);return o(R,q),R},c=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};const g=c(s(3)),_=c(s(1)),y=s(0),k=c(s(11)),w=c(s(6)),v=c(s(7)),b=c(s(12)),T=c(s(2)),E=c(s(13)),I=c(s(14)),A=c(s(15)),U=c(s(9)),C=c(s(4)),a=c(s(29)),m=u(s(0)),p=y.getGlobalContext();let N;function S(q){return q.statusCode!==403&&q.statusCode!==401||this._emit("error",new C.default),Promise.resolve(q)}function M(q){return typeof q=="number"&&q>=2e3&&q<=36e5}class J{constructor(R){this._pending=[],this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this._init=a.default.loadFeatures,this.features=a.default.features,this.loadFeature=a.default.loadFeature,this.featureSupported=a.default.featureSupported,this.featureDone=a.default.featureDone,this.featuresDone=a.default.featuresDone,this.featuresLoaded=a.default.featuresLoaded,this.featureInitialized=a.default.featureInitialized,this.featureFailed=a.default.featureFailed,this.hasFeature=a.default.hasFeature,this._setCachingModule=a.default._setCachingModule,this._collectCleanupFunctions=a.default._collectCleanupFunctions,this._fireReady=a.default._fireReady,this.initFeature=a.default.initFeature,typeof R=="object"&&y.extend(g.default,R),this.addEvents(["ready","authing","connecting","connected","disconnected","not-connected","conflict","error","features-loaded","sync-interval-change","sync-req-done","sync-done","wire-busy","wire-done","network-offline","network-online"]),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")}),N=y.localStorageAvailable(),N&&(this.apiKeys=y.getJSONFromLocalStorage("remotestorage:api-keys")||{},this.setBackend(localStorage.getItem("remotestorage:backend")||"remotestorage"));const j=this.on;this.on=function(f,d){if(this._allLoaded)switch(f){case"features-loaded":setTimeout(d,0);break;case"ready":this.remote&&setTimeout(d,0);break;case"connected":this.remote&&this.remote.connected&&setTimeout(d,0);break;case"not-connected":this.remote&&!this.remote.connected&&setTimeout(d,0)}return j.call(this,f,d)},this._init(),this.fireInitial=function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}.bind(this),this.on("ready",this.fireInitial.bind(this)),this.loadModules()}get connected(){return this.remote.connected}loadModules(){g.default.modules.forEach(this.addModule.bind(this))}authorize(R){if(this.access.setStorageType(this.remote.storageApi),R.scope===void 0&&(R.scope=this.access.scopeParameter),p.cordova)R.redirectUri=g.default.cordovaRedirectUri;else{const j=w.default.getLocation();let f=j.origin;j.pathname!=="/"&&(f+=j.pathname),R.redirectUri=f}R.clientId===void 0&&(R.clientId=R.redirectUri.match(/^(https?:\/\/[^/]+)/)[0]),w.default.authorize(this,R)}impliedauth(R,j){R=R||this.remote.storageApi,j=j||String(document.location),_.default("ImpliedAuth proceeding due to absent authURL; storageApi = "+R+" redirectUri = "+j),this.remote.configure({token:w.default.IMPLIED_FAKE_TOKEN}),document.location.href=j}connect(R,j){if(this.setBackend("remotestorage"),R.indexOf("@")<0&&!R.match(/^(https?:\/\/)?[^\s\/$\.?#]+\.[^\s]*$/))return void this._emit("error",new J.DiscoveryError("Not a valid user address or URL."));if(R.indexOf("@")<0&&!R.match(/^https?:\/\//)&&(R="https://"+R),p.cordova){if(typeof g.default.cordovaRedirectUri!="string")return void this._emit("error",new J.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));if(!p.cordova.InAppBrowser)return void this._emit("error",new J.DiscoveryError("Please include the InAppBrowser Cordova plugin to enable OAuth"))}this.remote.configure({userAddress:R}),this._emit("connecting");const f=setTimeout(()=>{this._emit("error",new J.DiscoveryError("No storage information found for this user address."))},g.default.discoveryTimeout);A.default(R).then(d=>{if(clearTimeout(f),this._emit("authing"),d.userAddress=R,this.remote.configure(d),!this.remote.connected)if(d.authURL)if(j===void 0)this.authorize({authURL:d.authURL});else{if(typeof j!="string")throw new Error("Supplied bearer token must be a string");_.default("Skipping authorization sequence and connecting with known token"),this.remote.configure({token:j})}else this.impliedauth()},()=>{clearTimeout(f),this._emit("error",new J.DiscoveryError("No storage information found for this user address."))})}reconnect(){this.remote.configure({token:null}),this.backend==="remotestorage"?this.connect(this.remote.userAddress):this.remote.connect()}disconnect(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")});const R=this._cleanups.length;let j=0;const f=()=>{j++,j>=R&&(this._init(),this._emit("disconnected"))};R>0?this._cleanups.forEach(d=>{const O=d(this);typeof O=="object"&&typeof O.then=="function"?O.then(f):f()}):f()}setBackend(R){this.backend=R,N&&(R?localStorage.setItem("remotestorage:backend",R):localStorage.removeItem("remotestorage:backend"))}onChange(R,j){this._pathHandlers.change[R]||(this._pathHandlers.change[R]=[]),this._pathHandlers.change[R].push(j)}enableLog(){g.default.logging=!0}disableLog(){g.default.logging=!1}log(...R){_.default.apply(J,R)}setApiKeys(R){const j=[H.GOOGLE,H.DROPBOX];if(typeof R!="object"||!Object.keys(R).every(f=>j.includes(f)))return console.error("setApiKeys() was called with invalid arguments"),!1;Object.keys(R).forEach(f=>{const d=R[f];if(d){switch(f){case H.DROPBOX:this.apiKeys[H.DROPBOX]={appKey:d},this.dropbox!==void 0&&this.dropbox.clientId===d||I.default._rs_init(this);break;case H.GOOGLE:this.apiKeys[H.GOOGLE]={clientId:d},this.googledrive!==void 0&&this.googledrive.clientId===d||E.default._rs_init(this)}return!0}delete this.apiKeys[f]}),N&&localStorage.setItem("remotestorage:api-keys",JSON.stringify(this.apiKeys))}setCordovaRedirectUri(R){if(typeof R!="string"||!R.match(/http(s)?:\/\//))throw new Error("Cordova redirect URI must be a URI string");g.default.cordovaRedirectUri=R}_setGPD(R,j){function f(d){return function(...O){return d.apply(j,O).then(S.bind(this))}}this.get=f(R.get),this.put=f(R.put),this.delete=f(R.delete)}_pendingGPD(R){return(...j)=>{const f=Array.prototype.slice.call(j);return new Promise((d,O)=>{this._pending.push({method:R,args:f,promise:{resolve:d,reject:O}})})}}_processPending(){this._pending.forEach(R=>{try{this[R.method](...R.args).then(R.promise.resolve,R.promise.reject)}catch(j){R.promise.reject(j)}}),this._pending=[]}_bindChange(R){R.on("change",this._dispatchEvent.bind(this,"change"))}_dispatchEvent(R,j){Object.keys(this._pathHandlers[R]).forEach(f=>{const d=f.length;j.path.substr(0,d)===f&&this._pathHandlers[R][f].forEach(O=>{const D={};for(const x in j)D[x]=j[x];D.relativePath=j.path.replace(new RegExp("^"+f),"");try{O(D)}catch(x){console.error("'change' handler failed: ",x,x.stack),this._emit("error",x)}})})}scope(R){if(typeof R!="string")throw"Argument 'path' of baseClient.scope must be a string";return this.access.checkPathPermission(R,"r")||console.warn("WARNING: Please use remoteStorage.access.claim() to ask for access permissions first: https://remotestoragejs.readthedocs.io/en/latest/js-api/access.html#claim"),new v.default(this,R)}getSyncInterval(){return g.default.syncInterval}setSyncInterval(R){if(!M(R))throw R+" is not a valid sync interval";const j=g.default.syncInterval;g.default.syncInterval=R,this._emit("sync-interval-change",{oldValue:j,newValue:R})}getBackgroundSyncInterval(){return g.default.backgroundSyncInterval}setBackgroundSyncInterval(R){if(!M(R))throw R+" is not a valid sync interval";const j=g.default.backgroundSyncInterval;g.default.backgroundSyncInterval=R,this._emit("sync-interval-change",{oldValue:j,newValue:R})}getCurrentSyncInterval(){return g.default.isBackground?g.default.backgroundSyncInterval:g.default.syncInterval}getRequestTimeout(){return g.default.requestTimeout}setRequestTimeout(R){if(typeof R!="number")throw R+" is not a valid request timeout";g.default.requestTimeout=R}syncCycle(){this.sync&&!this.sync.stopped&&(this.on("sync-done",()=>{this.sync&&!this.sync.stopped&&(this._syncTimer&&(clearTimeout(this._syncTimer),this._syncTimer=void 0),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}),this.sync.sync())}startSync(){return g.default.cache?(this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()):(console.warn("Nothing to sync, because caching is disabled."),Promise.resolve())}stopSync(){clearTimeout(this._syncTimer),this._syncTimer=void 0,this.sync?this.sync.stopped=!0:this.syncStopped=!0}addModule(R){const j=R.name,f=R.builder;if(Object.defineProperty(this,j,{configurable:!0,get:function(){const d=this._loadModule(j,f);return Object.defineProperty(this,j,{value:d}),d}}),j.indexOf("-")!==-1){const d=j.replace(/\-[a-z]/g,function(O){return O[1].toUpperCase()});Object.defineProperty(this,d,{get:function(){return this[j]}})}}_loadModule(R,j){if(j)return j(new v.default(this,"/"+R+"/"),new v.default(this,"/public/"+R+"/")).exports;throw"Unknown module: "+R}}var H;J.Authorize=w.default,J.SyncError=U.default,J.Unauthorized=C.default,J.DiscoveryError=A.default.DiscoveryError,J.util=m,Object.defineProperty(J.prototype,"access",{get:function(){const q=new k.default;return Object.defineProperty(this,"access",{value:q}),q},configurable:!0}),Object.defineProperty(J.prototype,"caching",{configurable:!0,get:function(){const q=new b.default;return Object.defineProperty(this,"caching",{value:q}),q}}),y.applyMixins(J,[T.default]),function(q){q.GOOGLE="googledrive",q.DROPBOX="dropbox"}(H||(H={})),r.exports=J},function(r,n,s){(function(i){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var o=s(20),u=s(21),c=s(22);function g(){return y.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _(l,h){if(g()<h)throw new RangeError("Invalid typed array length");return y.TYPED_ARRAY_SUPPORT?(l=new Uint8Array(h)).__proto__=y.prototype:(l===null&&(l=new y(h)),l.length=h),l}function y(l,h,P){if(!(y.TYPED_ARRAY_SUPPORT||this instanceof y))return new y(l,h,P);if(typeof l=="number"){if(typeof h=="string")throw new Error("If encoding is specified then the first argument must be a string");return v(this,l)}return k(this,l,h,P)}function k(l,h,P,L){if(typeof h=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&h instanceof ArrayBuffer?function(F,V,re,le){if(V.byteLength,re<0||V.byteLength<re)throw new RangeError("'offset' is out of bounds");if(V.byteLength<re+(le||0))throw new RangeError("'length' is out of bounds");return V=re===void 0&&le===void 0?new Uint8Array(V):le===void 0?new Uint8Array(V,re):new Uint8Array(V,re,le),y.TYPED_ARRAY_SUPPORT?(F=V).__proto__=y.prototype:F=b(F,V),F}(l,h,P,L):typeof h=="string"?function(F,V,re){if(typeof re=="string"&&re!==""||(re="utf8"),!y.isEncoding(re))throw new TypeError('"encoding" must be a valid string encoding');var le=0|E(V,re),be=(F=_(F,le)).write(V,re);return be!==le&&(F=F.slice(0,be)),F}(l,h,P):function(F,V){if(y.isBuffer(V)){var re=0|T(V.length);return(F=_(F,re)).length===0||V.copy(F,0,0,re),F}if(V){if(typeof ArrayBuffer!="undefined"&&V.buffer instanceof ArrayBuffer||"length"in V)return typeof V.length!="number"||(le=V.length)!=le?_(F,0):b(F,V);if(V.type==="Buffer"&&c(V.data))return b(F,V.data)}var le;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(l,h)}function w(l){if(typeof l!="number")throw new TypeError('"size" argument must be a number');if(l<0)throw new RangeError('"size" argument must not be negative')}function v(l,h){if(w(h),l=_(l,h<0?0:0|T(h)),!y.TYPED_ARRAY_SUPPORT)for(var P=0;P<h;++P)l[P]=0;return l}function b(l,h){var P=h.length<0?0:0|T(h.length);l=_(l,P);for(var L=0;L<P;L+=1)l[L]=255&h[L];return l}function T(l){if(l>=g())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g().toString(16)+" bytes");return 0|l}function E(l,h){if(y.isBuffer(l))return l.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(l)||l instanceof ArrayBuffer))return l.byteLength;typeof l!="string"&&(l=""+l);var P=l.length;if(P===0)return 0;for(var L=!1;;)switch(h){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":case void 0:return me(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*P;case"hex":return P>>>1;case"base64":return pe(l).length;default:if(L)return me(l).length;h=(""+h).toLowerCase(),L=!0}}function I(l,h,P){var L=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0)<=(h>>>=0))return"";for(l||(l="utf8");;)switch(l){case"hex":return j(this,h,P);case"utf8":case"utf-8":return H(this,h,P);case"ascii":return q(this,h,P);case"latin1":case"binary":return R(this,h,P);case"base64":return J(this,h,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f(this,h,P);default:if(L)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),L=!0}}function A(l,h,P){var L=l[h];l[h]=l[P],l[P]=L}function U(l,h,P,L,F){if(l.length===0)return-1;if(typeof P=="string"?(L=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,isNaN(P)&&(P=F?0:l.length-1),P<0&&(P=l.length+P),P>=l.length){if(F)return-1;P=l.length-1}else if(P<0){if(!F)return-1;P=0}if(typeof h=="string"&&(h=y.from(h,L)),y.isBuffer(h))return h.length===0?-1:C(l,h,P,L,F);if(typeof h=="number")return h&=255,y.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(l,h,P):Uint8Array.prototype.lastIndexOf.call(l,h,P):C(l,[h],P,L,F);throw new TypeError("val must be string, number or Buffer")}function C(l,h,P,L,F){var V,re=1,le=l.length,be=h.length;if(L!==void 0&&((L=String(L).toLowerCase())==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(l.length<2||h.length<2)return-1;re=2,le/=2,be/=2,P/=2}function ve(We,Et){return re===1?We[Et]:We.readUInt16BE(Et*re)}if(F){var ie=-1;for(V=P;V<le;V++)if(ve(l,V)===ve(h,ie===-1?0:V-ie)){if(ie===-1&&(ie=V),V-ie+1===be)return ie*re}else ie!==-1&&(V-=V-ie),ie=-1}else for(P+be>le&&(P=le-be),V=P;V>=0;V--){for(var je=!0,qe=0;qe<be;qe++)if(ve(l,V+qe)!==ve(h,qe)){je=!1;break}if(je)return V}return-1}function a(l,h,P,L){P=Number(P)||0;var F=l.length-P;L?(L=Number(L))>F&&(L=F):L=F;var V=h.length;if(V%2!=0)throw new TypeError("Invalid hex string");L>V/2&&(L=V/2);for(var re=0;re<L;++re){var le=parseInt(h.substr(2*re,2),16);if(isNaN(le))return re;l[P+re]=le}return re}function m(l,h,P,L){return oe(me(h,l.length-P),l,P,L)}function p(l,h,P,L){return oe(function(F){for(var V=[],re=0;re<F.length;++re)V.push(255&F.charCodeAt(re));return V}(h),l,P,L)}function N(l,h,P,L){return p(l,h,P,L)}function S(l,h,P,L){return oe(pe(h),l,P,L)}function M(l,h,P,L){return oe(function(F,V){for(var re,le,be,ve=[],ie=0;ie<F.length&&!((V-=2)<0);++ie)re=F.charCodeAt(ie),le=re>>8,be=re%256,ve.push(be),ve.push(le);return ve}(h,l.length-P),l,P,L)}function J(l,h,P){return h===0&&P===l.length?o.fromByteArray(l):o.fromByteArray(l.slice(h,P))}function H(l,h,P){P=Math.min(l.length,P);for(var L=[],F=h;F<P;){var V,re,le,be,ve=l[F],ie=null,je=ve>239?4:ve>223?3:ve>191?2:1;if(F+je<=P)switch(je){case 1:ve<128&&(ie=ve);break;case 2:(192&(V=l[F+1]))==128&&(be=(31&ve)<<6|63&V)>127&&(ie=be);break;case 3:V=l[F+1],re=l[F+2],(192&V)==128&&(192&re)==128&&(be=(15&ve)<<12|(63&V)<<6|63&re)>2047&&(be<55296||be>57343)&&(ie=be);break;case 4:V=l[F+1],re=l[F+2],le=l[F+3],(192&V)==128&&(192&re)==128&&(192&le)==128&&(be=(15&ve)<<18|(63&V)<<12|(63&re)<<6|63&le)>65535&&be<1114112&&(ie=be)}ie===null?(ie=65533,je=1):ie>65535&&(ie-=65536,L.push(ie>>>10&1023|55296),ie=56320|1023&ie),L.push(ie),F+=je}return function(qe){var We=qe.length;if(We<=4096)return String.fromCharCode.apply(String,qe);for(var Et="",lr=0;lr<We;)Et+=String.fromCharCode.apply(String,qe.slice(lr,lr+=4096));return Et}(L)}n.Buffer=y,n.SlowBuffer=function(l){return+l!=l&&(l=0),y.alloc(+l)},n.INSPECT_MAX_BYTES=50,y.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var l=new Uint8Array(1);return l.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},l.foo()===42&&typeof l.subarray=="function"&&l.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=g(),y.poolSize=8192,y._augment=function(l){return l.__proto__=y.prototype,l},y.from=function(l,h,P){return k(null,l,h,P)},y.TYPED_ARRAY_SUPPORT&&(y.prototype.__proto__=Uint8Array.prototype,y.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&y[Symbol.species]===y&&Object.defineProperty(y,Symbol.species,{value:null,configurable:!0})),y.alloc=function(l,h,P){return function(L,F,V,re){return w(F),F<=0?_(L,F):V!==void 0?typeof re=="string"?_(L,F).fill(V,re):_(L,F).fill(V):_(L,F)}(null,l,h,P)},y.allocUnsafe=function(l){return v(null,l)},y.allocUnsafeSlow=function(l){return v(null,l)},y.isBuffer=function(l){return!(l==null||!l._isBuffer)},y.compare=function(l,h){if(!y.isBuffer(l)||!y.isBuffer(h))throw new TypeError("Arguments must be Buffers");if(l===h)return 0;for(var P=l.length,L=h.length,F=0,V=Math.min(P,L);F<V;++F)if(l[F]!==h[F]){P=l[F],L=h[F];break}return P<L?-1:L<P?1:0},y.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(l,h){if(!c(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return y.alloc(0);var P;if(h===void 0)for(h=0,P=0;P<l.length;++P)h+=l[P].length;var L=y.allocUnsafe(h),F=0;for(P=0;P<l.length;++P){var V=l[P];if(!y.isBuffer(V))throw new TypeError('"list" argument must be an Array of Buffers');V.copy(L,F),F+=V.length}return L},y.byteLength=E,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var l=this.length;if(l%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<l;h+=2)A(this,h,h+1);return this},y.prototype.swap32=function(){var l=this.length;if(l%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<l;h+=4)A(this,h,h+3),A(this,h+1,h+2);return this},y.prototype.swap64=function(){var l=this.length;if(l%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<l;h+=8)A(this,h,h+7),A(this,h+1,h+6),A(this,h+2,h+5),A(this,h+3,h+4);return this},y.prototype.toString=function(){var l=0|this.length;return l===0?"":arguments.length===0?H(this,0,l):I.apply(this,arguments)},y.prototype.equals=function(l){if(!y.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l||y.compare(this,l)===0},y.prototype.inspect=function(){var l="",h=n.INSPECT_MAX_BYTES;return this.length>0&&(l=this.toString("hex",0,h).match(/.{2}/g).join(" "),this.length>h&&(l+=" ... ")),"<Buffer "+l+">"},y.prototype.compare=function(l,h,P,L,F){if(!y.isBuffer(l))throw new TypeError("Argument must be a Buffer");if(h===void 0&&(h=0),P===void 0&&(P=l?l.length:0),L===void 0&&(L=0),F===void 0&&(F=this.length),h<0||P>l.length||L<0||F>this.length)throw new RangeError("out of range index");if(L>=F&&h>=P)return 0;if(L>=F)return-1;if(h>=P)return 1;if(this===l)return 0;for(var V=(F>>>=0)-(L>>>=0),re=(P>>>=0)-(h>>>=0),le=Math.min(V,re),be=this.slice(L,F),ve=l.slice(h,P),ie=0;ie<le;++ie)if(be[ie]!==ve[ie]){V=be[ie],re=ve[ie];break}return V<re?-1:re<V?1:0},y.prototype.includes=function(l,h,P){return this.indexOf(l,h,P)!==-1},y.prototype.indexOf=function(l,h,P){return U(this,l,h,P,!0)},y.prototype.lastIndexOf=function(l,h,P){return U(this,l,h,P,!1)},y.prototype.write=function(l,h,P,L){if(h===void 0)L="utf8",P=this.length,h=0;else if(P===void 0&&typeof h=="string")L=h,P=this.length,h=0;else{if(!isFinite(h))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");h|=0,isFinite(P)?(P|=0,L===void 0&&(L="utf8")):(L=P,P=void 0)}var F=this.length-h;if((P===void 0||P>F)&&(P=F),l.length>0&&(P<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");for(var V=!1;;)switch(L){case"hex":return a(this,l,h,P);case"utf8":case"utf-8":return m(this,l,h,P);case"ascii":return p(this,l,h,P);case"latin1":case"binary":return N(this,l,h,P);case"base64":return S(this,l,h,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,l,h,P);default:if(V)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),V=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(l,h,P){var L="";P=Math.min(l.length,P);for(var F=h;F<P;++F)L+=String.fromCharCode(127&l[F]);return L}function R(l,h,P){var L="";P=Math.min(l.length,P);for(var F=h;F<P;++F)L+=String.fromCharCode(l[F]);return L}function j(l,h,P){var L=l.length;(!h||h<0)&&(h=0),(!P||P<0||P>L)&&(P=L);for(var F="",V=h;V<P;++V)F+=ee(l[V]);return F}function f(l,h,P){for(var L=l.slice(h,P),F="",V=0;V<L.length;V+=2)F+=String.fromCharCode(L[V]+256*L[V+1]);return F}function d(l,h,P){if(l%1!=0||l<0)throw new RangeError("offset is not uint");if(l+h>P)throw new RangeError("Trying to access beyond buffer length")}function O(l,h,P,L,F,V){if(!y.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>F||h<V)throw new RangeError('"value" argument is out of bounds');if(P+L>l.length)throw new RangeError("Index out of range")}function D(l,h,P,L){h<0&&(h=65535+h+1);for(var F=0,V=Math.min(l.length-P,2);F<V;++F)l[P+F]=(h&255<<8*(L?F:1-F))>>>8*(L?F:1-F)}function x(l,h,P,L){h<0&&(h=4294967295+h+1);for(var F=0,V=Math.min(l.length-P,4);F<V;++F)l[P+F]=h>>>8*(L?F:3-F)&255}function z(l,h,P,L,F,V){if(P+L>l.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function W(l,h,P,L,F){return F||z(l,0,P,4),u.write(l,h,P,L,23,4),P+4}function Y(l,h,P,L,F){return F||z(l,0,P,8),u.write(l,h,P,L,52,8),P+8}y.prototype.slice=function(l,h){var P,L=this.length;if((l=~~l)<0?(l+=L)<0&&(l=0):l>L&&(l=L),(h=h===void 0?L:~~h)<0?(h+=L)<0&&(h=0):h>L&&(h=L),h<l&&(h=l),y.TYPED_ARRAY_SUPPORT)(P=this.subarray(l,h)).__proto__=y.prototype;else{var F=h-l;P=new y(F,void 0);for(var V=0;V<F;++V)P[V]=this[V+l]}return P},y.prototype.readUIntLE=function(l,h,P){l|=0,h|=0,P||d(l,h,this.length);for(var L=this[l],F=1,V=0;++V<h&&(F*=256);)L+=this[l+V]*F;return L},y.prototype.readUIntBE=function(l,h,P){l|=0,h|=0,P||d(l,h,this.length);for(var L=this[l+--h],F=1;h>0&&(F*=256);)L+=this[l+--h]*F;return L},y.prototype.readUInt8=function(l,h){return h||d(l,1,this.length),this[l]},y.prototype.readUInt16LE=function(l,h){return h||d(l,2,this.length),this[l]|this[l+1]<<8},y.prototype.readUInt16BE=function(l,h){return h||d(l,2,this.length),this[l]<<8|this[l+1]},y.prototype.readUInt32LE=function(l,h){return h||d(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},y.prototype.readUInt32BE=function(l,h){return h||d(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},y.prototype.readIntLE=function(l,h,P){l|=0,h|=0,P||d(l,h,this.length);for(var L=this[l],F=1,V=0;++V<h&&(F*=256);)L+=this[l+V]*F;return L>=(F*=128)&&(L-=Math.pow(2,8*h)),L},y.prototype.readIntBE=function(l,h,P){l|=0,h|=0,P||d(l,h,this.length);for(var L=h,F=1,V=this[l+--L];L>0&&(F*=256);)V+=this[l+--L]*F;return V>=(F*=128)&&(V-=Math.pow(2,8*h)),V},y.prototype.readInt8=function(l,h){return h||d(l,1,this.length),128&this[l]?-1*(255-this[l]+1):this[l]},y.prototype.readInt16LE=function(l,h){h||d(l,2,this.length);var P=this[l]|this[l+1]<<8;return 32768&P?4294901760|P:P},y.prototype.readInt16BE=function(l,h){h||d(l,2,this.length);var P=this[l+1]|this[l]<<8;return 32768&P?4294901760|P:P},y.prototype.readInt32LE=function(l,h){return h||d(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},y.prototype.readInt32BE=function(l,h){return h||d(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},y.prototype.readFloatLE=function(l,h){return h||d(l,4,this.length),u.read(this,l,!0,23,4)},y.prototype.readFloatBE=function(l,h){return h||d(l,4,this.length),u.read(this,l,!1,23,4)},y.prototype.readDoubleLE=function(l,h){return h||d(l,8,this.length),u.read(this,l,!0,52,8)},y.prototype.readDoubleBE=function(l,h){return h||d(l,8,this.length),u.read(this,l,!1,52,8)},y.prototype.writeUIntLE=function(l,h,P,L){l=+l,h|=0,P|=0,L||O(this,l,h,P,Math.pow(2,8*P)-1,0);var F=1,V=0;for(this[h]=255&l;++V<P&&(F*=256);)this[h+V]=l/F&255;return h+P},y.prototype.writeUIntBE=function(l,h,P,L){l=+l,h|=0,P|=0,L||O(this,l,h,P,Math.pow(2,8*P)-1,0);var F=P-1,V=1;for(this[h+F]=255&l;--F>=0&&(V*=256);)this[h+F]=l/V&255;return h+P},y.prototype.writeUInt8=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,1,255,0),y.TYPED_ARRAY_SUPPORT||(l=Math.floor(l)),this[h]=255&l,h+1},y.prototype.writeUInt16LE=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[h]=255&l,this[h+1]=l>>>8):D(this,l,h,!0),h+2},y.prototype.writeUInt16BE=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[h]=l>>>8,this[h+1]=255&l):D(this,l,h,!1),h+2},y.prototype.writeUInt32LE=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[h+3]=l>>>24,this[h+2]=l>>>16,this[h+1]=l>>>8,this[h]=255&l):x(this,l,h,!0),h+4},y.prototype.writeUInt32BE=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=255&l):x(this,l,h,!1),h+4},y.prototype.writeIntLE=function(l,h,P,L){if(l=+l,h|=0,!L){var F=Math.pow(2,8*P-1);O(this,l,h,P,F-1,-F)}var V=0,re=1,le=0;for(this[h]=255&l;++V<P&&(re*=256);)l<0&&le===0&&this[h+V-1]!==0&&(le=1),this[h+V]=(l/re>>0)-le&255;return h+P},y.prototype.writeIntBE=function(l,h,P,L){if(l=+l,h|=0,!L){var F=Math.pow(2,8*P-1);O(this,l,h,P,F-1,-F)}var V=P-1,re=1,le=0;for(this[h+V]=255&l;--V>=0&&(re*=256);)l<0&&le===0&&this[h+V+1]!==0&&(le=1),this[h+V]=(l/re>>0)-le&255;return h+P},y.prototype.writeInt8=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,1,127,-128),y.TYPED_ARRAY_SUPPORT||(l=Math.floor(l)),l<0&&(l=255+l+1),this[h]=255&l,h+1},y.prototype.writeInt16LE=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[h]=255&l,this[h+1]=l>>>8):D(this,l,h,!0),h+2},y.prototype.writeInt16BE=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[h]=l>>>8,this[h+1]=255&l):D(this,l,h,!1),h+2},y.prototype.writeInt32LE=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,4,2147483647,-2147483648),y.TYPED_ARRAY_SUPPORT?(this[h]=255&l,this[h+1]=l>>>8,this[h+2]=l>>>16,this[h+3]=l>>>24):x(this,l,h,!0),h+4},y.prototype.writeInt32BE=function(l,h,P){return l=+l,h|=0,P||O(this,l,h,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),y.TYPED_ARRAY_SUPPORT?(this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=255&l):x(this,l,h,!1),h+4},y.prototype.writeFloatLE=function(l,h,P){return W(this,l,h,!0,P)},y.prototype.writeFloatBE=function(l,h,P){return W(this,l,h,!1,P)},y.prototype.writeDoubleLE=function(l,h,P){return Y(this,l,h,!0,P)},y.prototype.writeDoubleBE=function(l,h,P){return Y(this,l,h,!1,P)},y.prototype.copy=function(l,h,P,L){if(P||(P=0),L||L===0||(L=this.length),h>=l.length&&(h=l.length),h||(h=0),L>0&&L<P&&(L=P),L===P||l.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("sourceStart out of bounds");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),l.length-h<L-P&&(L=l.length-h+P);var F,V=L-P;if(this===l&&P<h&&h<L)for(F=V-1;F>=0;--F)l[F+h]=this[F+P];else if(V<1e3||!y.TYPED_ARRAY_SUPPORT)for(F=0;F<V;++F)l[F+h]=this[F+P];else Uint8Array.prototype.set.call(l,this.subarray(P,P+V),h);return V},y.prototype.fill=function(l,h,P,L){if(typeof l=="string"){if(typeof h=="string"?(L=h,h=0,P=this.length):typeof P=="string"&&(L=P,P=this.length),l.length===1){var F=l.charCodeAt(0);F<256&&(l=F)}if(L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!y.isEncoding(L))throw new TypeError("Unknown encoding: "+L)}else typeof l=="number"&&(l&=255);if(h<0||this.length<h||this.length<P)throw new RangeError("Out of range index");if(P<=h)return this;var V;if(h>>>=0,P=P===void 0?this.length:P>>>0,l||(l=0),typeof l=="number")for(V=h;V<P;++V)this[V]=l;else{var re=y.isBuffer(l)?l:me(new y(l,L).toString()),le=re.length;for(V=0;V<P-h;++V)this[V+h]=re[V%le]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function ee(l){return l<16?"0"+l.toString(16):l.toString(16)}function me(l,h){var P;h=h||1/0;for(var L=l.length,F=null,V=[],re=0;re<L;++re){if((P=l.charCodeAt(re))>55295&&P<57344){if(!F){if(P>56319){(h-=3)>-1&&V.push(239,191,189);continue}if(re+1===L){(h-=3)>-1&&V.push(239,191,189);continue}F=P;continue}if(P<56320){(h-=3)>-1&&V.push(239,191,189),F=P;continue}P=65536+(F-55296<<10|P-56320)}else F&&(h-=3)>-1&&V.push(239,191,189);if(F=null,P<128){if((h-=1)<0)break;V.push(P)}else if(P<2048){if((h-=2)<0)break;V.push(P>>6|192,63&P|128)}else if(P<65536){if((h-=3)<0)break;V.push(P>>12|224,P>>6&63|128,63&P|128)}else{if(!(P<1114112))throw new Error("Invalid code point");if((h-=4)<0)break;V.push(P>>18|240,P>>12&63|128,P>>6&63|128,63&P|128)}}return V}function pe(l){return o.toByteArray(function(h){if((h=function(P){return P.trim?P.trim():P.replace(/^\s+|\s+$/g,"")}(h).replace(B,"")).length<2)return"";for(;h.length%4!=0;)h+="=";return h}(l))}function oe(l,h,P,L){for(var F=0;F<L&&!(F+P>=h.length||F>=l.length);++F)h[F+P]=l[F];return F}}).call(this,s(5))},function(r,n,s){n.byteLength=function(w){var v=y(w),b=v[0],T=v[1];return 3*(b+T)/4-T},n.toByteArray=function(w){var v,b,T=y(w),E=T[0],I=T[1],A=new u(function(a,m,p){return 3*(m+p)/4-p}(0,E,I)),U=0,C=I>0?E-4:E;for(b=0;b<C;b+=4)v=o[w.charCodeAt(b)]<<18|o[w.charCodeAt(b+1)]<<12|o[w.charCodeAt(b+2)]<<6|o[w.charCodeAt(b+3)],A[U++]=v>>16&255,A[U++]=v>>8&255,A[U++]=255&v;return I===2&&(v=o[w.charCodeAt(b)]<<2|o[w.charCodeAt(b+1)]>>4,A[U++]=255&v),I===1&&(v=o[w.charCodeAt(b)]<<10|o[w.charCodeAt(b+1)]<<4|o[w.charCodeAt(b+2)]>>2,A[U++]=v>>8&255,A[U++]=255&v),A},n.fromByteArray=function(w){for(var v,b=w.length,T=b%3,E=[],I=0,A=b-T;I<A;I+=16383)E.push(k(w,I,I+16383>A?A:I+16383));return T===1?(v=w[b-1],E.push(i[v>>2]+i[v<<4&63]+"==")):T===2&&(v=(w[b-2]<<8)+w[b-1],E.push(i[v>>10]+i[v>>4&63]+i[v<<2&63]+"=")),E.join("")};for(var i=[],o=[],u=typeof Uint8Array!="undefined"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,_=c.length;g<_;++g)i[g]=c[g],o[c.charCodeAt(g)]=g;function y(w){var v=w.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=w.indexOf("=");return b===-1&&(b=v),[b,b===v?0:4-b%4]}function k(w,v,b){for(var T,E,I=[],A=v;A<b;A+=3)T=(w[A]<<16&16711680)+(w[A+1]<<8&65280)+(255&w[A+2]),I.push(i[(E=T)>>18&63]+i[E>>12&63]+i[E>>6&63]+i[63&E]);return I.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(r,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(s,i,o,u,c){var g,_,y=8*c-u-1,k=(1<<y)-1,w=k>>1,v=-7,b=o?c-1:0,T=o?-1:1,E=s[i+b];for(b+=T,g=E&(1<<-v)-1,E>>=-v,v+=y;v>0;g=256*g+s[i+b],b+=T,v-=8);for(_=g&(1<<-v)-1,g>>=-v,v+=u;v>0;_=256*_+s[i+b],b+=T,v-=8);if(g===0)g=1-w;else{if(g===k)return _?NaN:1/0*(E?-1:1);_+=Math.pow(2,u),g-=w}return(E?-1:1)*_*Math.pow(2,g-u)},n.write=function(s,i,o,u,c,g){var _,y,k,w=8*g-c-1,v=(1<<w)-1,b=v>>1,T=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=u?0:g-1,I=u?1:-1,A=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(y=isNaN(i)?1:0,_=v):(_=Math.floor(Math.log(i)/Math.LN2),i*(k=Math.pow(2,-_))<1&&(_--,k*=2),(i+=_+b>=1?T/k:T*Math.pow(2,1-b))*k>=2&&(_++,k/=2),_+b>=v?(y=0,_=v):_+b>=1?(y=(i*k-1)*Math.pow(2,c),_+=b):(y=i*Math.pow(2,b-1)*Math.pow(2,c),_=0));c>=8;s[o+E]=255&y,E+=I,y/=256,c-=8);for(_=_<<c|y,w+=c;w>0;s[o+E]=255&_,E+=I,_/=256,w-=8);s[o+E-I]|=128*A}},function(r,n){var s={}.toString;r.exports=Array.isArray||function(i){return s.call(i)=="[object Array]"}},function(r,n,s){var i,o,u;o=[],(u=typeof(i=function(){var c,g,_,y;Object.keys||(Object.keys=(c=Object.prototype.hasOwnProperty,g=!{toString:null}.propertyIsEnumerable("toString"),y=(_=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(f){if(typeof f!="object"&&typeof f!="function"||f===null)throw new TypeError("Object.keys called on non-object");var d=[];for(var O in f)c.call(f,O)&&d.push(O);if(g)for(var D=0;D<y;D++)c.call(f,_[D])&&d.push(_[D]);return d})),Object.create||(Object.create=function(){function f(){}return function(d){if(arguments.length!==1)throw new Error("Object.create implementation only accepts one parameter.");return f.prototype=d,new f}}()),Array.isArray||(Array.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(f){if(this===null)throw new TypeError;var d=Object(this),O=d.length>>>0;if(O===0)return-1;var D=0;if(arguments.length>1&&((D=Number(arguments[1]))!=D?D=0:D!==0&&D!==1/0&&D!==-1/0&&(D=(D>0||-1)*Math.floor(Math.abs(D)))),D>=O)return-1;for(var x=D>=0?D:Math.max(O-Math.abs(D),0);x<O;x++)if(x in d&&d[x]===f)return x;return-1}),Object.isFrozen||(Object.isFrozen=function(f){for(var d="tv4_test_frozen_key";f.hasOwnProperty(d);)d+=Math.random();try{return f[d]=!0,delete f[d],!1}catch{return!0}});var k={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},w={"*":!0};function v(f){return encodeURI(f).replace(/%25[0-9][0-9]/g,function(d){return"%"+d.substring(3)})}function b(f){var d="";k[f.charAt(0)]&&(d=f.charAt(0),f=f.substring(1));var O="",D="",x=!0,z=!1,W=!1;d==="+"?x=!1:d==="."?(D=".",O="."):d==="/"?(D="/",O="/"):d==="#"?(D="#",x=!1):d===";"?(D=";",O=";",z=!0,W=!0):d==="?"?(D="?",O="&",z=!0):d==="&"&&(D="&",O="&",z=!0);for(var Y=[],B=f.split(","),ee=[],me={},pe=0;pe<B.length;pe++){var oe=B[pe],l=null;if(oe.indexOf(":")!==-1){var h=oe.split(":");oe=h[0],l=parseInt(h[1],10)}for(var P={};w[oe.charAt(oe.length-1)];)P[oe.charAt(oe.length-1)]=!0,oe=oe.substring(0,oe.length-1);var L={truncate:l,name:oe,suffices:P};ee.push(L),me[oe]=L,Y.push(oe)}var F=function(V){for(var re="",le=0,be=0;be<ee.length;be++){var ve=ee[be],ie=V(ve.name);if(ie==null||Array.isArray(ie)&&ie.length===0||typeof ie=="object"&&Object.keys(ie).length===0)le++;else if(re+=be===le?D:O||",",Array.isArray(ie)){z&&(re+=ve.name+"=");for(var je=0;je<ie.length;je++)je>0&&(re+=ve.suffices["*"]&&O||",",ve.suffices["*"]&&z&&(re+=ve.name+"=")),re+=x?encodeURIComponent(ie[je]).replace(/!/g,"%21"):v(ie[je])}else if(typeof ie=="object"){z&&!ve.suffices["*"]&&(re+=ve.name+"=");var qe=!0;for(var We in ie)qe||(re+=ve.suffices["*"]&&O||","),qe=!1,re+=x?encodeURIComponent(We).replace(/!/g,"%21"):v(We),re+=ve.suffices["*"]?"=":",",re+=x?encodeURIComponent(ie[We]).replace(/!/g,"%21"):v(ie[We])}else z&&(re+=ve.name,W&&ie===""||(re+="=")),ve.truncate!=null&&(ie=ie.substring(0,ve.truncate)),re+=x?encodeURIComponent(ie).replace(/!/g,"%21"):v(ie)}return re};return F.varNames=Y,{prefix:D,substitution:F}}function T(f){if(!(this instanceof T))return new T(f);for(var d=f.split("{"),O=[d.shift()],D=[],x=[],z=[];d.length>0;){var W=d.shift(),Y=W.split("}")[0],B=W.substring(Y.length+1),ee=b(Y);x.push(ee.substitution),D.push(ee.prefix),O.push(B),z=z.concat(ee.substitution.varNames)}this.fill=function(me){for(var pe=O[0],oe=0;oe<x.length;oe++)pe+=(0,x[oe])(me),pe+=O[oe+1];return pe},this.varNames=z,this.template=f}T.prototype={toString:function(){return this.template},fillFromObject:function(f){return this.fill(function(d){return f[d]})}};var E=function(f,d,O,D,x){if(this.missing=[],this.missingMap={},this.formatValidators=f?Object.create(f.formatValidators):{},this.schemas=f?Object.create(f.schemas):{},this.collectMultiple=d,this.errors=[],this.handleError=d?this.collectError:this.returnError,D&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),x&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=O||N("en"),typeof this.errorReporter=="string")throw new Error("debug");if(this.definedKeywords={},f)for(var z in f.definedKeywords)this.definedKeywords[z]=f.definedKeywords[z].slice(0)};function I(f,d){if(f===d)return!0;if(f&&d&&typeof f=="object"&&typeof d=="object"){if(Array.isArray(f)!==Array.isArray(d))return!1;if(Array.isArray(f)){if(f.length!==d.length)return!1;for(var O=0;O<f.length;O++)if(!I(f[O],d[O]))return!1}else{var D;for(D in f)if(d[D]===void 0&&f[D]!==void 0)return!1;for(D in d)if(f[D]===void 0&&d[D]!==void 0)return!1;for(D in f)if(!I(f[D],d[D]))return!1}return!0}return!1}E.prototype.defineKeyword=function(f,d){this.definedKeywords[f]=this.definedKeywords[f]||[],this.definedKeywords[f].push(d)},E.prototype.createError=function(f,d,O,D,x,z,W){var Y=new q(f,d,O,D,x);return Y.message=this.errorReporter(Y,z,W),Y},E.prototype.returnError=function(f){return f},E.prototype.collectError=function(f){return f&&this.errors.push(f),null},E.prototype.prefixErrors=function(f,d,O){for(var D=f;D<this.errors.length;D++)this.errors[D]=this.errors[D].prefixWith(d,O);return this},E.prototype.banUnknownProperties=function(f,d){for(var O in this.unknownPropertyPaths){var D=this.createError(S.UNKNOWN_PROPERTY,{path:O},O,"",null,f,d),x=this.handleError(D);if(x)return x}return null},E.prototype.addFormat=function(f,d){if(typeof f=="object"){for(var O in f)this.addFormat(O,f[O]);return this}this.formatValidators[f]=d},E.prototype.resolveRefs=function(f,d){if(f.$ref!==void 0){if((d=d||{})[f.$ref])return this.createError(S.CIRCULAR_REFERENCE,{urls:Object.keys(d).join(", ")},"","",null,void 0,f);d[f.$ref]=!0,f=this.getSchema(f.$ref,d)}return f},E.prototype.getSchema=function(f,d){var O;if(this.schemas[f]!==void 0)return O=this.schemas[f],this.resolveRefs(O,d);var D=f,x="";if(f.indexOf("#")!==-1&&(x=f.substring(f.indexOf("#")+1),D=f.substring(0,f.indexOf("#"))),typeof this.schemas[D]=="object"){O=this.schemas[D];var z=decodeURIComponent(x);if(z==="")return this.resolveRefs(O,d);if(z.charAt(0)!=="/")return;for(var W=z.split("/").slice(1),Y=0;Y<W.length;Y++){var B=W[Y].replace(/~1/g,"/").replace(/~0/g,"~");if(O[B]===void 0){O=void 0;break}O=O[B]}if(O!==void 0)return this.resolveRefs(O,d)}this.missing[D]===void 0&&(this.missing.push(D),this.missing[D]=D,this.missingMap[D]=D)},E.prototype.searchSchemas=function(f,d){if(Array.isArray(f))for(var O=0;O<f.length;O++)this.searchSchemas(f[O],d);else if(f&&typeof f=="object"){for(var D in typeof f.id=="string"&&function(z,W){if(W.substring(0,z.length)===z){var Y=W.substring(z.length);if(W.length>0&&W.charAt(z.length-1)==="/"||Y.charAt(0)==="#"||Y.charAt(0)==="?")return!0}return!1}(d,f.id)&&this.schemas[f.id]===void 0&&(this.schemas[f.id]=f),f)if(D!=="enum"){if(typeof f[D]=="object")this.searchSchemas(f[D],d);else if(D==="$ref"){var x=m(f[D]);x&&this.schemas[x]===void 0&&this.missingMap[x]===void 0&&(this.missingMap[x]=x)}}}},E.prototype.addSchema=function(f,d){if(typeof f!="string"||d===void 0){if(typeof f!="object"||typeof f.id!="string")return;f=(d=f).id}f===m(f)+"#"&&(f=m(f)),this.schemas[f]=d,delete this.missingMap[f],p(d,f),this.searchSchemas(d,f)},E.prototype.getSchemaMap=function(){var f={};for(var d in this.schemas)f[d]=this.schemas[d];return f},E.prototype.getSchemaUris=function(f){var d=[];for(var O in this.schemas)f&&!f.test(O)||d.push(O);return d},E.prototype.getMissingUris=function(f){var d=[];for(var O in this.missingMap)f&&!f.test(O)||d.push(O);return d},E.prototype.dropSchemas=function(){this.schemas={},this.reset()},E.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},E.prototype.validateAll=function(f,d,O,D,x){var z;if(!(d=this.resolveRefs(d)))return null;if(d instanceof q)return this.errors.push(d),d;var W,Y=this.errors.length,B=null,ee=null;if(this.checkRecursive&&f&&typeof f=="object"){if(z=!this.scanned.length,f[this.validatedSchemasKey]){var me=f[this.validatedSchemasKey].indexOf(d);if(me!==-1)return this.errors=this.errors.concat(f[this.validationErrorsKey][me]),null}if(Object.isFrozen(f)&&(W=this.scannedFrozen.indexOf(f))!==-1){var pe=this.scannedFrozenSchemas[W].indexOf(d);if(pe!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[W][pe]),null}if(this.scanned.push(f),Object.isFrozen(f))W===-1&&(W=this.scannedFrozen.length,this.scannedFrozen.push(f),this.scannedFrozenSchemas.push([])),B=this.scannedFrozenSchemas[W].length,this.scannedFrozenSchemas[W][B]=d,this.scannedFrozenValidationErrors[W][B]=[];else{if(!f[this.validatedSchemasKey])try{Object.defineProperty(f,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(f,this.validationErrorsKey,{value:[],configurable:!0})}catch{f[this.validatedSchemasKey]=[],f[this.validationErrorsKey]=[]}ee=f[this.validatedSchemasKey].length,f[this.validatedSchemasKey][ee]=d,f[this.validationErrorsKey][ee]=[]}}var oe=this.errors.length,l=this.validateBasic(f,d,x)||this.validateNumeric(f,d,x)||this.validateString(f,d,x)||this.validateArray(f,d,x)||this.validateObject(f,d,x)||this.validateCombinations(f,d,x)||this.validateHypermedia(f,d,x)||this.validateFormat(f,d,x)||this.validateDefinedKeywords(f,d,x)||null;if(z){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(l||oe!==this.errors.length)for(;O&&O.length||D&&D.length;){var h=O&&O.length?""+O.pop():null,P=D&&D.length?""+D.pop():null;l&&(l=l.prefixWith(h,P)),this.prefixErrors(oe,h,P)}return B!==null?this.scannedFrozenValidationErrors[W][B]=this.errors.slice(Y):ee!==null&&(f[this.validationErrorsKey][ee]=this.errors.slice(Y)),this.handleError(l)},E.prototype.validateFormat=function(f,d){if(typeof d.format!="string"||!this.formatValidators[d.format])return null;var O=this.formatValidators[d.format].call(null,f,d);return typeof O=="string"||typeof O=="number"?this.createError(S.FORMAT_CUSTOM,{message:O},"","/format",null,f,d):O&&typeof O=="object"?this.createError(S.FORMAT_CUSTOM,{message:O.message||"?"},O.dataPath||"",O.schemaPath||"/format",null,f,d):null},E.prototype.validateDefinedKeywords=function(f,d,O){for(var D in this.definedKeywords)if(d[D]!==void 0)for(var x=this.definedKeywords[D],z=0;z<x.length;z++){var W=(0,x[z])(f,d[D],d,O);if(typeof W=="string"||typeof W=="number")return this.createError(S.KEYWORD_CUSTOM,{key:D,message:W},"","",null,f,d).prefixWith(null,D);if(W&&typeof W=="object"){var Y=W.code;if(typeof Y=="string"){if(!S[Y])throw new Error("Undefined error code (use defineError): "+Y);Y=S[Y]}else typeof Y!="number"&&(Y=S.KEYWORD_CUSTOM);var B=typeof W.message=="object"?W.message:{key:D,message:W.message||"?"},ee=W.schemaPath||"/"+D.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(Y,B,W.dataPath||null,ee,null,f,d)}}return null},E.prototype.validateBasic=function(f,d,O){var D;return(D=this.validateType(f,d,O))||(D=this.validateEnum(f,d,O))?D.prefixWith(null,"type"):null},E.prototype.validateType=function(f,d){if(d.type===void 0)return null;var O=typeof f;f===null?O="null":Array.isArray(f)&&(O="array");var D=d.type;Array.isArray(D)||(D=[D]);for(var x=0;x<D.length;x++){var z=D[x];if(z===O||z==="integer"&&O==="number"&&f%1==0)return null}return this.createError(S.INVALID_TYPE,{type:O,expected:D.join("/")},"","",null,f,d)},E.prototype.validateEnum=function(f,d){if(d.enum===void 0)return null;for(var O=0;O<d.enum.length;O++)if(I(f,d.enum[O]))return null;return this.createError(S.ENUM_MISMATCH,{value:typeof JSON!="undefined"?JSON.stringify(f):f},"","",null,f,d)},E.prototype.validateNumeric=function(f,d,O){return this.validateMultipleOf(f,d,O)||this.validateMinMax(f,d,O)||this.validateNaN(f,d,O)||null};var A=Math.pow(2,-51),U=1-A;function C(f){var d=String(f).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return d?{href:d[0]||"",protocol:d[1]||"",authority:d[2]||"",host:d[3]||"",hostname:d[4]||"",port:d[5]||"",pathname:d[6]||"",search:d[7]||"",hash:d[8]||""}:null}function a(f,d){return d=C(d||""),f=C(f||""),d&&f?(d.protocol||f.protocol)+(d.protocol||d.authority?d.authority:f.authority)+(O=d.protocol||d.authority||d.pathname.charAt(0)==="/"?d.pathname:d.pathname?(f.authority&&!f.pathname?"/":"")+f.pathname.slice(0,f.pathname.lastIndexOf("/")+1)+d.pathname:f.pathname,D=[],O.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(x){x==="/.."?D.pop():D.push(x)}),D.join("").replace(/^\//,O.charAt(0)==="/"?"/":""))+(d.protocol||d.authority||d.pathname?d.search:d.search||f.search)+d.hash:null;var O,D}function m(f){return f.split("#")[0]}function p(f,d){if(f&&typeof f=="object")if(d===void 0?d=f.id:typeof f.id=="string"&&(d=a(d,f.id),f.id=d),Array.isArray(f))for(var O=0;O<f.length;O++)p(f[O],d);else for(var D in typeof f.$ref=="string"&&(f.$ref=a(d,f.$ref)),f)D!=="enum"&&p(f[D],d)}function N(f){var d=R[f=f||"en"];return function(O){var D=d[O.code]||H[O.code];if(typeof D!="string")return"Unknown error code "+O.code+": "+JSON.stringify(O.messageParams);var x=O.params;return D.replace(/\{([^{}]*)\}/g,function(z,W){var Y=x[W];return typeof Y=="string"||typeof Y=="number"?Y:z})}}E.prototype.validateMultipleOf=function(f,d){var O=d.multipleOf||d.divisibleBy;if(O===void 0)return null;if(typeof f=="number"){var D=f/O%1;if(D>=A&&D<U)return this.createError(S.NUMBER_MULTIPLE_OF,{value:f,multipleOf:O},"","",null,f,d)}return null},E.prototype.validateMinMax=function(f,d){if(typeof f!="number")return null;if(d.minimum!==void 0){if(f<d.minimum)return this.createError(S.NUMBER_MINIMUM,{value:f,minimum:d.minimum},"","/minimum",null,f,d);if(d.exclusiveMinimum&&f===d.minimum)return this.createError(S.NUMBER_MINIMUM_EXCLUSIVE,{value:f,minimum:d.minimum},"","/exclusiveMinimum",null,f,d)}if(d.maximum!==void 0){if(f>d.maximum)return this.createError(S.NUMBER_MAXIMUM,{value:f,maximum:d.maximum},"","/maximum",null,f,d);if(d.exclusiveMaximum&&f===d.maximum)return this.createError(S.NUMBER_MAXIMUM_EXCLUSIVE,{value:f,maximum:d.maximum},"","/exclusiveMaximum",null,f,d)}return null},E.prototype.validateNaN=function(f,d){return typeof f!="number"?null:isNaN(f)===!0||f===1/0||f===-1/0?this.createError(S.NUMBER_NOT_A_NUMBER,{value:f},"","/type",null,f,d):null},E.prototype.validateString=function(f,d,O){return this.validateStringLength(f,d,O)||this.validateStringPattern(f,d,O)||null},E.prototype.validateStringLength=function(f,d){return typeof f!="string"?null:d.minLength!==void 0&&f.length<d.minLength?this.createError(S.STRING_LENGTH_SHORT,{length:f.length,minimum:d.minLength},"","/minLength",null,f,d):d.maxLength!==void 0&&f.length>d.maxLength?this.createError(S.STRING_LENGTH_LONG,{length:f.length,maximum:d.maxLength},"","/maxLength",null,f,d):null},E.prototype.validateStringPattern=function(f,d){if(typeof f!="string"||typeof d.pattern!="string"&&!(d.pattern instanceof RegExp))return null;var O;if(d.pattern instanceof RegExp)O=d.pattern;else{var D,x="",z=d.pattern.match(/^\/(.+)\/([img]*)$/);z?(D=z[1],x=z[2]):D=d.pattern,O=new RegExp(D,x)}return O.test(f)?null:this.createError(S.STRING_PATTERN,{pattern:d.pattern},"","/pattern",null,f,d)},E.prototype.validateArray=function(f,d,O){return Array.isArray(f)&&(this.validateArrayLength(f,d,O)||this.validateArrayUniqueItems(f,d,O)||this.validateArrayItems(f,d,O))||null},E.prototype.validateArrayLength=function(f,d){var O;return d.minItems!==void 0&&f.length<d.minItems&&(O=this.createError(S.ARRAY_LENGTH_SHORT,{length:f.length,minimum:d.minItems},"","/minItems",null,f,d),this.handleError(O))||d.maxItems!==void 0&&f.length>d.maxItems&&(O=this.createError(S.ARRAY_LENGTH_LONG,{length:f.length,maximum:d.maxItems},"","/maxItems",null,f,d),this.handleError(O))?O:null},E.prototype.validateArrayUniqueItems=function(f,d){if(d.uniqueItems){for(var O=0;O<f.length;O++)for(var D=O+1;D<f.length;D++)if(I(f[O],f[D])){var x=this.createError(S.ARRAY_UNIQUE,{match1:O,match2:D},"","/uniqueItems",null,f,d);if(this.handleError(x))return x}}return null},E.prototype.validateArrayItems=function(f,d,O){if(d.items===void 0)return null;var D,x;if(Array.isArray(d.items)){for(x=0;x<f.length;x++)if(x<d.items.length){if(D=this.validateAll(f[x],d.items[x],[x],["items",x],O+"/"+x))return D}else if(d.additionalItems!==void 0){if(typeof d.additionalItems=="boolean"){if(!d.additionalItems&&(D=this.createError(S.ARRAY_ADDITIONAL_ITEMS,{},"/"+x,"/additionalItems",null,f,d),this.handleError(D)))return D}else if(D=this.validateAll(f[x],d.additionalItems,[x],["additionalItems"],O+"/"+x))return D}}else for(x=0;x<f.length;x++)if(D=this.validateAll(f[x],d.items,[x],["items"],O+"/"+x))return D;return null},E.prototype.validateObject=function(f,d,O){return typeof f!="object"||f===null||Array.isArray(f)?null:this.validateObjectMinMaxProperties(f,d,O)||this.validateObjectRequiredProperties(f,d,O)||this.validateObjectProperties(f,d,O)||this.validateObjectDependencies(f,d,O)||null},E.prototype.validateObjectMinMaxProperties=function(f,d){var O,D=Object.keys(f);return d.minProperties!==void 0&&D.length<d.minProperties&&(O=this.createError(S.OBJECT_PROPERTIES_MINIMUM,{propertyCount:D.length,minimum:d.minProperties},"","/minProperties",null,f,d),this.handleError(O))||d.maxProperties!==void 0&&D.length>d.maxProperties&&(O=this.createError(S.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:D.length,maximum:d.maxProperties},"","/maxProperties",null,f,d),this.handleError(O))?O:null},E.prototype.validateObjectRequiredProperties=function(f,d){if(d.required!==void 0)for(var O=0;O<d.required.length;O++){var D=d.required[O];if(f[D]===void 0){var x=this.createError(S.OBJECT_REQUIRED,{key:D},"","/required/"+O,null,f,d);if(this.handleError(x))return x}}return null},E.prototype.validateObjectProperties=function(f,d,O){var D;for(var x in f){var z=O+"/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),W=!1;if(d.properties!==void 0&&d.properties[x]!==void 0&&(W=!0,D=this.validateAll(f[x],d.properties[x],[x],["properties",x],z)))return D;if(d.patternProperties!==void 0){for(var Y in d.patternProperties)if(new RegExp(Y).test(x)&&(W=!0,D=this.validateAll(f[x],d.patternProperties[Y],[x],["patternProperties",Y],z)))return D}if(W)this.trackUnknownProperties&&(this.knownPropertyPaths[z]=!0,delete this.unknownPropertyPaths[z]);else if(d.additionalProperties!==void 0){if(this.trackUnknownProperties&&(this.knownPropertyPaths[z]=!0,delete this.unknownPropertyPaths[z]),typeof d.additionalProperties=="boolean"){if(!d.additionalProperties&&(D=this.createError(S.OBJECT_ADDITIONAL_PROPERTIES,{key:x},"","/additionalProperties",null,f,d).prefixWith(x,null),this.handleError(D)))return D}else if(D=this.validateAll(f[x],d.additionalProperties,[x],["additionalProperties"],z))return D}else this.trackUnknownProperties&&!this.knownPropertyPaths[z]&&(this.unknownPropertyPaths[z]=!0)}return null},E.prototype.validateObjectDependencies=function(f,d,O){var D;if(d.dependencies!==void 0){for(var x in d.dependencies)if(f[x]!==void 0){var z=d.dependencies[x];if(typeof z=="string"){if(f[z]===void 0&&(D=this.createError(S.OBJECT_DEPENDENCY_KEY,{key:x,missing:z},"","",null,f,d).prefixWith(null,x).prefixWith(null,"dependencies"),this.handleError(D)))return D}else if(Array.isArray(z))for(var W=0;W<z.length;W++){var Y=z[W];if(f[Y]===void 0&&(D=this.createError(S.OBJECT_DEPENDENCY_KEY,{key:x,missing:Y},"","/"+W,null,f,d).prefixWith(null,x).prefixWith(null,"dependencies"),this.handleError(D)))return D}else if(D=this.validateAll(f,z,[],["dependencies",x],O))return D}}return null},E.prototype.validateCombinations=function(f,d,O){return this.validateAllOf(f,d,O)||this.validateAnyOf(f,d,O)||this.validateOneOf(f,d,O)||this.validateNot(f,d,O)||null},E.prototype.validateAllOf=function(f,d,O){if(d.allOf===void 0)return null;for(var D,x=0;x<d.allOf.length;x++){var z=d.allOf[x];if(D=this.validateAll(f,z,[],["allOf",x],O))return D}return null},E.prototype.validateAnyOf=function(f,d,O){if(d.anyOf===void 0)return null;var D,x,z=[],W=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,x=this.knownPropertyPaths);for(var Y=!0,B=0;B<d.anyOf.length;B++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var ee=d.anyOf[B],me=this.errors.length,pe=this.validateAll(f,ee,[],["anyOf",B],O);if(pe===null&&me===this.errors.length){if(this.errors=this.errors.slice(0,W),this.trackUnknownProperties){for(var oe in this.knownPropertyPaths)x[oe]=!0,delete D[oe];for(var l in this.unknownPropertyPaths)x[l]||(D[l]=!0);Y=!1;continue}return null}pe&&z.push(pe.prefixWith(null,""+B).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=x),Y?(z=z.concat(this.errors.slice(W)),this.errors=this.errors.slice(0,W),this.createError(S.ANY_OF_MISSING,{},"","/anyOf",z,f,d)):void 0},E.prototype.validateOneOf=function(f,d,O){if(d.oneOf===void 0)return null;var D,x,z=null,W=[],Y=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,x=this.knownPropertyPaths);for(var B=0;B<d.oneOf.length;B++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var ee=d.oneOf[B],me=this.errors.length,pe=this.validateAll(f,ee,[],["oneOf",B],O);if(pe===null&&me===this.errors.length){if(z!==null)return this.errors=this.errors.slice(0,Y),this.createError(S.ONE_OF_MULTIPLE,{index1:z,index2:B},"","/oneOf",null,f,d);if(z=B,this.trackUnknownProperties){for(var oe in this.knownPropertyPaths)x[oe]=!0,delete D[oe];for(var l in this.unknownPropertyPaths)x[l]||(D[l]=!0)}}else pe&&W.push(pe)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=x),z===null?(W=W.concat(this.errors.slice(Y)),this.errors=this.errors.slice(0,Y),this.createError(S.ONE_OF_MISSING,{},"","/oneOf",W,f,d)):(this.errors=this.errors.slice(0,Y),null)},E.prototype.validateNot=function(f,d,O){if(d.not===void 0)return null;var D,x,z=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,x=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var W=this.validateAll(f,d.not,null,null,O),Y=this.errors.slice(z);return this.errors=this.errors.slice(0,z),this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=x),W===null&&Y.length===0?this.createError(S.NOT_PASSED,{},"","/not",null,f,d):null},E.prototype.validateHypermedia=function(f,d,O){if(!d.links)return null;for(var D,x=0;x<d.links.length;x++){var z=d.links[x];if(z.rel==="describedby"){for(var W=new T(z.href),Y=!0,B=0;B<W.varNames.length;B++)if(!(W.varNames[B]in f)){Y=!1;break}if(Y){var ee={$ref:W.fillFromObject(f)};if(D=this.validateAll(f,ee,[],["links",x],O))return D}}}};var S={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},M={};for(var J in S)M[S[J]]=J;var H={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function q(f,d,O,D,x){if(Error.call(this),f===void 0)throw new Error("No error code supplied: "+D);this.message="",this.params=d,this.code=f,this.dataPath=O||"",this.schemaPath=D||"",this.subErrors=x||null;var z=new Error(this.message);if(this.stack=z.stack||z.stacktrace,!this.stack)try{throw z}catch(W){this.stack=W.stack||W.stacktrace}}q.prototype=Object.create(Error.prototype),q.prototype.constructor=q,q.prototype.name="ValidationError",q.prototype.prefixWith=function(f,d){if(f!==null&&(f=f.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+f+this.dataPath),d!==null&&(d=d.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+d+this.schemaPath),this.subErrors!==null)for(var O=0;O<this.subErrors.length;O++)this.subErrors[O].prefixWith(f,d);return this};var R={},j=function f(d){var O,D,x=new E,z={setErrorReporter:function(W){return typeof W=="string"?this.language(W):(D=W,!0)},addFormat:function(){x.addFormat.apply(x,arguments)},language:function(W){return W?(R[W]||(W=W.split("-")[0]),!!R[W]&&(O=W,W)):O},addLanguage:function(W,Y){var B;for(B in S)Y[B]&&!Y[S[B]]&&(Y[S[B]]=Y[B]);var ee=W.split("-")[0];if(R[ee])for(B in R[W]=Object.create(R[ee]),Y)R[ee][B]===void 0&&(R[ee][B]=Y[B]),R[W][B]=Y[B];else R[W]=Y,R[ee]=Y;return this},freshApi:function(W){var Y=f();return W&&Y.language(W),Y},validate:function(W,Y,B,ee){var me=N(O),pe=new E(x,!1,D?function(l,h,P){return D(l,h,P)||me(l,h,P)}:me,B,ee);typeof Y=="string"&&(Y={$ref:Y}),pe.addSchema("",Y);var oe=pe.validateAll(W,Y,null,null,"");return!oe&&ee&&(oe=pe.banUnknownProperties(W,Y)),this.error=oe,this.missing=pe.missing,this.valid=oe===null,this.valid},validateResult:function(){var W={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(W,arguments),W},validateMultiple:function(W,Y,B,ee){var me=N(O),pe=new E(x,!0,D?function(l,h,P){return D(l,h,P)||me(l,h,P)}:me,B,ee);typeof Y=="string"&&(Y={$ref:Y}),pe.addSchema("",Y),pe.validateAll(W,Y,null,null,""),ee&&pe.banUnknownProperties(W,Y);var oe={toString:function(){return this.valid?"valid":this.error.message}};return oe.errors=pe.errors,oe.missing=pe.missing,oe.valid=oe.errors.length===0,oe},addSchema:function(){return x.addSchema.apply(x,arguments)},getSchema:function(){return x.getSchema.apply(x,arguments)},getSchemaMap:function(){return x.getSchemaMap.apply(x,arguments)},getSchemaUris:function(){return x.getSchemaUris.apply(x,arguments)},getMissingUris:function(){return x.getMissingUris.apply(x,arguments)},dropSchemas:function(){x.dropSchemas.apply(x,arguments)},defineKeyword:function(){x.defineKeyword.apply(x,arguments)},defineError:function(W,Y,B){if(typeof W!="string"||!/^[A-Z]+(_[A-Z]+)*$/.test(W))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if(typeof Y!="number"||Y%1!=0||Y<1e4)throw new Error("Code number must be an integer > 10000");if(S[W]!==void 0)throw new Error("Error already defined: "+W+" as "+S[W]);if(M[Y]!==void 0)throw new Error("Error code already used: "+M[Y]+" as "+Y);for(var ee in S[W]=Y,M[Y]=W,H[W]=H[Y]=B,R){var me=R[ee];me[W]&&(me[Y]=me[Y]||me[W])}},reset:function(){x.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:p,resolveUrl:a,getDocumentUri:m,errorCodes:S};return z.language(d||"en"),z}();return j.addLanguage("en-gb",H),j.tv4=j,j})=="function"?i.apply(n,o):i)===void 0||(r.exports=u)},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseClientTypes=void 0;class i{constructor(){this.uris={},this.schemas={},this.aliases={}}declare(c,g,_,y){const k=c+"/"+g;if(y.extends){const w=y.extends.split("/"),v=w.length===1?c+"/"+w.shift():w.join("/"),b=this.uris[v];if(!b)throw"Type '"+k+"' tries to extend unknown schema '"+v+"'";y.extends=this.schemas[b]}this.uris[k]=_,this.aliases[_]=k,this.schemas[_]=y}resolveAlias(c){return this.uris[c]}getSchema(c){return this.schemas[c]}inScope(c){const g=c.length,_={};for(const y in this.uris)if(y.substr(0,g+1)===c+"/"){const k=this.uris[y];_[k]=this.schemas[k]}return _}}n.BaseClientTypes=i;const o=new i;n.default=o},function(r,n,s){class i extends Error{constructor(u){super();const c=new Error("Schema not found: "+u);return c.name="SchemaNotFound",c}}r.exports=i},function(r,n,s){r.exports=class{constructor(i){this._itemsRev={},this._storage={},this._canPropagate=!1,this.defaultValue=i,this.activatePropagation()}get(i){i=i.toLowerCase();let o=this._storage[i];return o===void 0&&(o=this.defaultValue,this._storage[i]=o),o}set(i,o){return i=i.toLowerCase(),this._storage[i]===o||(this._storage[i]=o,o||delete this._itemsRev[i],this._updateParentFolderItemRev(i,o),this._canPropagate&&this._propagate(i)),o}delete(i){return this.set(i,null)}deactivatePropagation(){return this._canPropagate=!1,!0}activatePropagation(){return this._canPropagate||(this._generateFolderRev("/"),this._canPropagate=!0),!0}_hashCode(i){let o=0;if(i.length===0)return o;for(let u=0;u<i.length;u++)o=(o<<5)-o+i.charCodeAt(u),o|=0;return o}_generateHash(i){const o=i.sort().join("|");return""+this._hashCode(o)}_updateParentFolderItemRev(i,o){if(i!=="/"){const u=this._getParentFolder(i);this._itemsRev[u]||(this._itemsRev[u]={});const c=this._itemsRev[u];o?c[i]=o:delete c[i],this._updateParentFolderItemRev(u,this.defaultValue)}}_getParentFolder(i){return i.substr(0,i.lastIndexOf("/",i.length-2)+1)}_propagate(i){if(i!=="/"){const o=this._getParentFolder(i),u=this._itemsRev[o],c=[];for(const _ in u)c.push(u[_]);const g=this._generateHash(c);this.set(o,g)}}_generateFolderRev(i){const o=this._itemsRev[i];let u=this.defaultValue;if(o){const c=[];for(const g in o){let _;_=g.substr(-1)==="/"?this._generateFolderRev(g):o[g],c.push(_)}c.length>0&&(u=this._generateHash(c))}return this.set(i,u),u}}},function(r,n,s){var i;/*!
 * webfinger.js
 *   version 2.7.0
 *   http://github.com/silverbucket/webfinger.js
 *
 * Developed and Maintained by:
 *   Nick Jennings <nick@silverbucket.net> 2012
 *
 * webfinger.js is released under the AGPL (see LICENSE).
 *
 * You don't have to do anything special to choose one license or the other and you don't
 * have to notify anyone which license you are using.
 * Please see the corresponding license file for details of these licenses.
 * You are free to use, modify and distribute this software, but all copyright
 * information must remain.
 *
 */typeof fetch!="function"&&typeof XMLHttpRequest!="function"&&(XMLHttpRequest=s(28)),function(o){var u={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage","http://tools.ietf.org/id/draft-dejong-remotestorage":"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},c={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camlistore:[]},g=["webfinger","host-meta","host-meta.json"];function _(k){return k.toString=function(){return this.message},k}function y(k){typeof k!="object"&&(k={}),this.config={tls_only:k.tls_only===void 0||k.tls_only,webfist_fallback:k.webfist_fallback!==void 0&&k.webfist_fallback,uri_fallback:k.uri_fallback!==void 0&&k.uri_fallback,request_timeout:k.request_timeout!==void 0?k.request_timeout:1e4}}y.prototype.__fetchJRD=function(k,w,v){if(typeof fetch=="function")return this.__fetchJRD_fetch(k,w,v);if(typeof XMLHttpRequest=="function")return this.__fetchJRD_XHR(k,w,v);throw new Error("add a polyfill for fetch or XMLHttpRequest")},y.prototype.__fetchJRD_fetch=function(k,w,v){var b,T=this;typeof AbortController=="function"&&(b=new AbortController);var E=fetch(k,{headers:{Accept:"application/jrd+json, application/json"},signal:b?b.signal:void 0}).then(function(A){if(A.ok)return A.text();throw A.status===404?_({message:"resource not found",url:k,status:A.status}):_({message:"error during request",url:k,status:A.status})},function(A){throw _({message:"error during request",url:k,status:void 0,err:A})}).then(function(A){if(T.__isValidJSON(A))return A;throw _({message:"invalid json",url:k,status:void 0})}),I=new Promise(function(A,U){setTimeout(function(){U(_({message:"request timed out",url:k,status:void 0})),b&&b.abort()},T.config.request_timeout)});Promise.race([E,I]).then(function(A){v(A)}).catch(function(A){w(A)})},y.prototype.__fetchJRD_XHR=function(k,w,v){var b=this,T=!1,E=new XMLHttpRequest;function I(){if(!T){if(T=!0,E.status===200)return b.__isValidJSON(E.responseText)?v(E.responseText):w(_({message:"invalid json",url:k,status:E.status}));if(E.status===404)return w(_({message:"resource not found",url:k,status:E.status}));if(E.status>=301&&E.status<=302){var U=E.getResponseHeader("Location");return function(C){return typeof C=="string"&&C.split("://")[0]==="https"}(U)?A():w(_({message:"no redirect URL found",url:k,status:E.status}))}return w(_({message:"error during request",url:k,status:E.status}))}}function A(){E.onreadystatechange=function(){E.readyState===4&&I()},E.onload=function(){I()},E.ontimeout=function(){return w(_({message:"request timed out",url:k,status:E.status}))},E.open("GET",k,!0),E.timeout=b.config.request_timeout,E.setRequestHeader("Accept","application/jrd+json, application/json"),E.send()}return A()},y.prototype.__isValidJSON=function(k){try{JSON.parse(k)}catch{return!1}return!0},y.prototype.__isLocalhost=function(k){return/^localhost(\.localdomain)?(\:[0-9]+)?$/.test(k)},y.prototype.__processJRD=function(k,w,v,b){var T=JSON.parse(w);if(typeof T!="object"||typeof T.links!="object")return T.error!==void 0?v(_({message:T.error,request:k})):v(_({message:"unknown response from server",request:k}));var E=T.links;Array.isArray(E)||(E=[]);var I={object:T,json:w,idx:{}};I.idx.properties={name:void 0},I.idx.links=JSON.parse(JSON.stringify(c)),E.map(function(C,a){if(u.hasOwnProperty(C.rel)&&I.idx.links[u[C.rel]]){var m={};Object.keys(C).map(function(p,N){m[p]=C[p]}),I.idx.links[u[C.rel]].push(m)}});var A=JSON.parse(w).properties;for(var U in A)A.hasOwnProperty(U)&&U==="http://packetizer.com/ns/name"&&(I.idx.properties.name=A[U]);return b(I)},y.prototype.lookup=function(k,w){if(typeof k!="string")throw new Error("first parameter must be a user address");if(typeof w!="function")throw new Error("second parameter must be a callback");var v=this,b="";b=k.indexOf("://")>-1?k.replace(/ /g,"").split("/")[2]:k.replace(/ /g,"").split("@")[1];var T=0,E="https";function I(){var C="";return k.split("://")[1]||(C="acct:"),E+"://"+b+"/.well-known/"+g[T]+"?resource="+C+k}function A(C){if(v.config.uri_fallback&&b!=="webfist.org"&&T!==g.length-1)return T+=1,U();if(!v.config.tls_only&&E==="https")return T=0,E="http",U();if(!v.config.webfist_fallback||b==="webfist.org")return w(C);T=0,E="http",b="webfist.org";var a=I();v.__fetchJRD(a,w,function(m){v.__processJRD(a,m,w,function(p){typeof p.idx.links.webfist=="object"&&typeof p.idx.links.webfist[0].href=="string"&&v.__fetchJRD(p.idx.links.webfist[0].href,w,function(N){v.__processJRD(a,N,w,function(S){return w(null,w)})})})})}function U(){var C=I();v.__fetchJRD(C,A,function(a){v.__processJRD(C,a,w,function(m){w(null,m)})})}return v.__isLocalhost(b)&&(E="http"),setTimeout(U,0)},y.prototype.lookupLink=function(k,w,v){if(!c.hasOwnProperty(w))return v("unsupported rel "+w);this.lookup(k,function(b,T){var E=T.idx.links[w];return b?v(b):E.length===0?v('no links found with rel="'+w+'"'):v(null,E[0])})},(i=function(){return y}.apply(n,[]))===void 0||(r.exports=i)}()},function(r,n){r.exports=XMLHttpRequest},function(r,n,s){var i=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};const o=i(s(3)),u=i(s(16)),c=i(s(1)),g=s(0),_=i(s(30)),y=i(s(11)),k=i(s(6)),w=i(s(15)),v=i(s(7)),b=i(s(13)),T=i(s(14)),E=i(s(8)),I=i(s(31)),A=i(s(12)),U=i(s(32)),C=i(s(33)),a=i(s(34)),m={features:[],featuresDone:0,readyFired:!1,loadFeatures(){this.features=[],this.featuresDone=0,this.readyFired=!1,this.featureModules={WireClient:E.default,Dropbox:T.default,GoogleDrive:b.default,Access:y.default,Discover:w.default,Authorize:k.default,BaseClient:v.default,Env:u.default},o.default.cache&&g.extend(this.featureModules,{Caching:A.default,IndexedDB:U.default,LocalStorage:C.default,InMemoryStorage:a.default,Sync:I.default}),o.default.disableFeatures.forEach(p=>{this.featureModules[p]&&delete this.featureModules[p]}),this._allLoaded=!1;for(const p in this.featureModules)this.loadFeature(p)},hasFeature(p){for(let N=this.features.length-1;N>=0;N--)if(this.features[N].name===p)return this.features[N].supported;return!1},loadFeature(p){const N=this.featureModules[p],S=!N._rs_supported||N._rs_supported();c.default(`[RemoteStorage] [FEATURE ${p}] initializing ...`),typeof S=="object"?S.then(()=>{this.featureSupported(p,!0),this.initFeature(p)},()=>{this.featureSupported(p,!1)}):typeof S=="boolean"?(this.featureSupported(p,S),S&&this.initFeature(p)):this.featureSupported(p,!1)},initFeature(p){const N=this.featureModules[p];let S;try{S=N._rs_init(this)}catch(M){return void this.featureFailed(p,M)}typeof S=="object"&&typeof S.then=="function"?S.then(()=>{this.featureInitialized(p)},M=>{this.featureFailed(p,M)}):this.featureInitialized(p)},featureFailed(p,N){c.default(`[RemoteStorage] [FEATURE ${p}] initialization failed (${N})`),this.featureDone()},featureSupported(p,N){c.default(`[RemoteStorage] [FEATURE ${p}]${N?"":"not "} supported`),N||this.featureDone()},featureInitialized(p){c.default(`[RemoteStorage] [FEATURE ${p}] initialized`),this.features.push({name:p,init:this.featureModules[p]._rs_init,supported:!0,cleanup:this.featureModules[p]._rs_cleanup}),this.featureDone()},featureDone(){this.featuresDone++,this.featuresDone===Object.keys(this.featureModules).length&&setTimeout(this.featuresLoaded.bind(this),0)},_setCachingModule(){["IndexedDB","LocalStorage","InMemoryStorage"].some(p=>{if(this.features.some(N=>N.name===p))return this.features.local=this.featureModules[p],!0})},_fireReady(){try{this.readyFired||(this._emit("ready"),this.readyFired=!0)}catch(p){console.error("'ready' failed: ",p,p.stack),this._emit("error",p)}},featuresLoaded(){c.default("[RemoteStorage] All features loaded"),this._setCachingModule(),this.local=o.default.cache&&this.features.local&&new this.features.local,this.local&&this.remote?(this._setGPD(_.default,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",()=>{this._fireReady(),this._emit("connected")}),this.remote.on("not-connected",()=>{this._fireReady(),this._emit("not-connected")}),this.remote.connected&&(this._fireReady(),this._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(p){g.logError(p),this._emit("error",p)}this._processPending()},_collectCleanupFunctions(){this._cleanups=[];for(let p=0;p<this.features.length;p++){const N=this.features[p].cleanup;typeof N=="function"&&this._cleanups.push(N)}}};r.exports=m},function(r,n,s){var i=this&&this.__awaiter||function(g,_,y,k){return new(y||(y=Promise))(function(w,v){function b(I){try{E(k.next(I))}catch(A){v(A)}}function T(I){try{E(k.throw(I))}catch(A){v(A)}}function E(I){var A;I.done?w(I.value):(A=I.value,A instanceof y?A:new y(function(U){U(A)})).then(b,T)}E((k=k.apply(g,_||[])).next())})};const o=(this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}})(s(1));function u(g){return this.backend==="dropbox"&&!!g.match(/^\/public\/.*[^\/]$/)}const c={get:function(g,_){if(this.local){if(_===void 0)_=typeof(y=this).remote=="object"&&y.remote.connected&&y.remote.online?2*y.getSyncInterval():(o.default("Not setting default maxAge, because remote is offline or not connected"),!1);else if(typeof _!="number"&&_!==!1)return Promise.reject("Argument 'maxAge' must be 'false' or a number");return this.local.get(g,_,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(g);var y},put:function(g,_,y){return u.bind(this)(g)?c._wrapBusyDone.call(this,this.remote.put(g,_,y)):this.local?this.local.put(g,_,y):c._wrapBusyDone.call(this,this.remote.put(g,_,y))},delete:function(g){return this.local?this.local.delete(g):c._wrapBusyDone.call(this,this.remote.delete(g))},_wrapBusyDone:function(g){return i(this,void 0,void 0,function*(){return this._emit("wire-busy"),g.then(_=>(this._emit("wire-done",{success:!0}),Promise.resolve(_)),_=>(this._emit("wire-done",{success:!1}),Promise.reject(_)))})}};r.exports=c},function(r,n,s){var i=this&&this.__awaiter||function(C,a,m,p){return new(m||(m=Promise))(function(N,S){function M(q){try{H(p.next(q))}catch(R){S(R)}}function J(q){try{H(p.throw(q))}catch(R){S(R)}}function H(q){var R;q.done?N(q.value):(R=q.value,R instanceof m?R:new m(function(j){j(R)})).then(M,J)}H((p=p.apply(C,a||[])).next())})},o=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};const u=o(s(3)),c=o(s(16)),g=o(s(2)),_=o(s(1)),y=o(s(6)),k=o(s(9)),w=o(s(4)),v=s(0);let b,T;function E(C,a,m){return{action:C,path:a,promise:m}}function I(C,a){return C.common.revision!==a&&(!C.remote||C.remote.revision!==a)}function A(C){return C.common&&C.common.revision}class U{constructor(a){this.rs=a,this._tasks={},this._running={},this._timeStarted={},this.numThreads=10,this.rs.local.onDiff(m=>{this.addTask(m),this.doTasks()}),this.rs.caching.onActivate(m=>{this.addTask(m),this.doTasks()}),this.addEvents(["done","req-done"])}now(){return new Date().getTime()}queueGetRequest(a){return new Promise((m,p)=>{this.rs.remote.connected?this.rs.remote.online?(this.addTask(a,function(){this.rs.local.get(a).then(N=>m(N))}.bind(this)),this.doTasks()):p("cannot fulfill maxAge requirement - remote is not online"):p("cannot fulfill maxAge requirement - remote is not connected")})}corruptServerItemsMap(a,m){if(typeof a!="object"||Array.isArray(a))return!0;for(const p in a){const N=a[p];if(typeof N!="object"||typeof N.ETag!="string")return!0;if(v.isFolder(p)){if(p.substring(0,p.length-1).indexOf("/")!==-1)return!0}else if(p.indexOf("/")!==-1||m&&(typeof N["Content-Type"]!="string"||typeof N["Content-Length"]!="number"))return!0}return!1}corruptItemsMap(a){if(typeof a!="object"||Array.isArray(a))return!0;for(const m in a)if(typeof a[m]!="boolean")return!0;return!1}corruptRevision(a){return typeof a!="object"||Array.isArray(a)||a.revision&&typeof a.revision!="string"||a.body&&typeof a.body!="string"&&typeof a.body!="object"||a.contentType&&typeof a.contentType!="string"||a.contentLength&&typeof a.contentLength!="number"||a.timestamp&&typeof a.timestamp!="number"||a.itemsMap&&this.corruptItemsMap(a.itemsMap)}isCorrupt(a){return typeof a!="object"||Array.isArray(a)||typeof a.path!="string"||this.corruptRevision(a.common)||a.local&&this.corruptRevision(a.local)||a.remote&&this.corruptRevision(a.remote)||a.push&&this.corruptRevision(a.push)}hasTasks(){return Object.getOwnPropertyNames(this._tasks).length>0}collectDiffTasks(){return i(this,void 0,void 0,function*(){let a=0;return this.rs.local.forAllNodes(m=>{a>100||(this.isCorrupt(m)?(_.default("[Sync] WARNING: corrupt node in local cache",m),typeof m=="object"&&m.path&&(this.addTask(m.path),a++)):(this.needsFetch(m)&&this.rs.access.checkPathPermission(m.path,"r")||v.isDocument(m.path)&&this.needsPush(m)&&this.rs.access.checkPathPermission(m.path,"rw"))&&(this.addTask(m.path),a++))}).then(()=>a).catch(m=>{throw m})})}inConflict(a){return a.local&&a.remote&&(a.remote.body!==void 0||a.remote.itemsMap)}needsRefresh(a){return!!a.common&&(!a.common.timestamp||this.now()-a.common.timestamp>u.default.syncInterval)}needsFetch(a){return!!this.inConflict(a)||!(!a.common||a.common.itemsMap!==void 0||a.common.body!==void 0)||!(!a.remote||a.remote.itemsMap!==void 0||a.remote.body!==void 0)}needsPush(a){return!this.inConflict(a)&&(!(!a.local||a.push)||void 0)}needsRemotePut(a){return a.local&&a.local.body}needsRemoteDelete(a){return a.local&&a.local.body===!1}getParentPath(a){const m=a.match(/^(.*\/)([^\/]+\/?)$/);if(m)return m[1];throw new Error('Not a valid path: "'+a+'"')}deleteChildPathsFromTasks(){for(const a in this._tasks){const m=v.pathsFromRoot(a);for(let p=1;p<m.length;p++)this._tasks[m[p]]&&(Array.isArray(this._tasks[a])&&this._tasks[a].length&&Array.prototype.push.apply(this._tasks[m[p]],this._tasks[a]),delete this._tasks[a])}}collectRefreshTasks(){return i(this,void 0,void 0,function*(){return this.rs.local.forAllNodes(a=>{let m;if(this.needsRefresh(a)){try{m=this.getParentPath(a.path)}catch{}m&&this.rs.access.checkPathPermission(m,"r")?this.addTask(m):this.rs.access.checkPathPermission(a.path,"r")&&this.addTask(a.path)}}).then(()=>this.deleteChildPathsFromTasks()).catch(a=>{throw a})})}flush(a){for(const m in a)this.rs.caching.checkPath(m)==="FLUSH"&&a[m]&&!a[m].local&&(_.default("[Sync] Flushing",m),a[m]=void 0);return a}doTask(a){return this.rs.local.getNodes([a]).then(m=>{const p=m[a];return p===void 0||function(N){return N.remote&&N.remote.revision&&!N.remote.itemsMap&&!N.remote.body}(p)?E("get",a,this.rs.remote.get(a)):this.needsRemotePut(p)?(p.push=v.deepClone(p.local),p.push.timestamp=this.now(),this.rs.local.setNodes(this.flush(m)).then(()=>{let N;return N=A(p)?{ifMatch:p.common.revision}:{ifNoneMatch:"*"},E("put",a,this.rs.remote.put(a,p.push.body,p.push.contentType,N))})):this.needsRemoteDelete(p)?(p.push={body:!1,timestamp:this.now()},this.rs.local.setNodes(this.flush(m)).then(()=>A(p)?E("delete",a,this.rs.remote.delete(a,{ifMatch:p.common.revision})):E("get",a,this.rs.remote.get(a)))):A(p)?E("get",a,this.rs.remote.get(a,{ifNoneMatch:p.common.revision})):E("get",a,this.rs.remote.get(a))})}autoMergeFolder(a){if(a.remote.itemsMap&&(a.common=a.remote,delete a.remote,a.common.itemsMap)){for(const m in a.common.itemsMap)a.local.itemsMap[m]||(a.local.itemsMap[m]=!1);v.equal(a.local.itemsMap,a.common.itemsMap)&&delete a.local}return a}autoMergeDocument(a){return function(m){return(!m.remote||!m.remote.revision||m.remote.revision===m.common.revision)&&(m.common.body===void 0&&m.remote.body===!1||m.remote.body===m.common.body&&m.remote.contentType===m.common.contentType)}(a)?delete(a=function(m){return m.remote&&m.remote.body===!1&&m.local&&m.local.body===!1&&delete m.local,m}(a)).remote:a.remote.body!==void 0&&(_.default("[Sync] Emitting keep/revert"),this.rs.local._emitChange({origin:"conflict",path:a.path,oldValue:a.local.body,newValue:a.remote.body,lastCommonValue:a.common.body,oldContentType:a.local.contentType,newContentType:a.remote.contentType,lastCommonContentType:a.common.contentType}),a.remote.body?a.common=a.remote:a.common={},delete a.remote,delete a.local),a}autoMerge(a){if(a.remote){if(a.local)return v.isFolder(a.path)?this.autoMergeFolder(a):this.autoMergeDocument(a);if(v.isFolder(a.path))a.remote.itemsMap!==void 0&&(a.common=a.remote,delete a.remote);else if(a.remote.body!==void 0){const m={origin:"remote",path:a.path,oldValue:a.common.body===!1?void 0:a.common.body,newValue:a.remote.body===!1?void 0:a.remote.body,oldContentType:a.common.contentType,newContentType:a.remote.contentType};if((m.oldValue||m.newValue)&&this.rs.local._emitChange(m),!a.remote.body)return;a.common=a.remote,delete a.remote}return a}a.common.body&&this.rs.local._emitChange({origin:"remote",path:a.path,oldValue:a.common.body,newValue:void 0,oldContentType:a.common.contentType,newContentType:void 0})}updateCommonTimestamp(a,m){return i(this,void 0,void 0,function*(){return this.rs.local.getNodes([a]).then(p=>(p[a]&&p[a].common&&p[a].common.revision===m&&(p[a].common.timestamp=this.now()),this.rs.local.setNodes(this.flush(p))))})}markChildren(a,m,p,N){return i(this,void 0,void 0,function*(){const S=[],M={},J={};for(const H in m)S.push(a+H),M[a+H]=m[H];for(const H in N)S.push(a+H);return this.rs.local.getNodes(S).then(H=>{let q,R;for(const j in H)if(R=H[j],M[j])R&&R.common?I(R,M[j].ETag)&&(p[j]=v.deepClone(R),p[j].remote={revision:M[j].ETag,timestamp:this.now()},p[j]=this.autoMerge(p[j])):(q=this.rs.caching.checkPath(j),q==="ALL"&&(p[j]={path:j,common:{timestamp:this.now()},remote:{revision:M[j].ETag,timestamp:this.now()}})),p[j]&&M[j]["Content-Type"]&&(p[j].remote.contentType=M[j]["Content-Type"]),p[j]&&M[j]["Content-Length"]&&(p[j].remote.contentLength=M[j]["Content-Length"]);else if(N[j.substring(a.length)]&&R&&R.common){if(R.common.itemsMap)for(const f in R.common.itemsMap)J[j+f]=!0;if(R.local&&R.local.itemsMap)for(const f in R.local.itemsMap)J[j+f]=!0;if(R.remote||v.isFolder(j))p[j]=void 0;else if(p[j]=this.autoMerge(R),p[j]===void 0){const f=this.getParentPath(j),d=p[f],O=j.substring(a.length);d&&d.local&&(delete d.local.itemsMap[O],v.equal(d.local.itemsMap,d.common.itemsMap)&&delete d.local)}}return this.deleteRemoteTrees(Object.keys(J),p).then(j=>this.rs.local.setNodes(this.flush(j)))})})}deleteRemoteTrees(a,m){return i(this,void 0,void 0,function*(){return a.length===0?Promise.resolve(m):this.rs.local.getNodes(a).then(p=>i(this,void 0,void 0,function*(){const N={};function S(M,J){if(M&&M.itemsMap)for(const H in M.itemsMap)N[J+H]=!0}for(const M in p){const J=p[M];J&&(v.isFolder(M)?(S(J.common,M),S(J.local,M)):J.common&&typeof J.common.body!==void 0&&(m[M]=v.deepClone(J),m[M].remote={body:!1,timestamp:this.now()},m[M]=this.autoMerge(m[M])))}return this.deleteRemoteTrees(Object.keys(N),m).then(M=>this.rs.local.setNodes(this.flush(M)))}))})}completeFetch(a,m,p,N){return i(this,void 0,void 0,function*(){let S,M;const J=v.pathsFromRoot(a);return v.isFolder(a)?S=[a]:(M=J[1],S=[a,M]),this.rs.local.getNodes(S).then(H=>{let q,R,j=H[a];const f={};function d(O){if(O&&O.itemsMap)for(q in O.itemsMap)m[q]||(f[q]=!0)}if(typeof j=="object"&&j.path===a&&typeof j.common=="object"||(j={path:a,common:{}},H[a]=j),j.remote={revision:N,timestamp:this.now()},v.isFolder(a))for(q in d(j.common),d(j.remote),j.remote.itemsMap={},m)j.remote.itemsMap[q]=!0;else j.remote.body=m,j.remote.contentType=p,R=H[M],R&&R.local&&R.local.itemsMap&&(q=a.substring(M.length),R.local.itemsMap[q]=!0,v.equal(R.local.itemsMap,R.common.itemsMap)&&delete R.local);return H[a]=this.autoMerge(j),{toBeSaved:H,missingChildren:f}})})}completePush(a,m,p,N){return i(this,void 0,void 0,function*(){return this.rs.local.getNodes([a]).then(S=>{const M=S[a];if(!M.push)throw this.stopped=!0,new Error("completePush called but no push version!");return p?(_.default("[Sync] We have a conflict"),M.remote&&M.remote.revision===N||(M.remote={revision:N||"conflict",timestamp:this.now()},delete M.push),S[a]=this.autoMerge(M)):(M.common={revision:N,timestamp:this.now()},m==="put"?(M.common.body=M.push.body,M.common.contentType=M.push.contentType,v.equal(M.local.body,M.push.body)&&M.local.contentType===M.push.contentType&&delete M.local,delete M.push):m==="delete"&&(M.local.body===!1?S[a]=void 0:delete M.push)),this.rs.local.setNodes(this.flush(S))})})}dealWithFailure(a){return i(this,void 0,void 0,function*(){return this.rs.local.getNodes([a]).then(m=>{if(m[a])return delete m[a].push,this.rs.local.setNodes(this.flush(m))})})}interpretStatus(a){const m={statusCode:a,successful:void 0,conflict:void 0,unAuth:void 0,notFound:void 0,changed:void 0,networkProblems:void 0};if(typeof a=="string"&&(a==="offline"||a==="timeout"))return m.successful=!1,m.networkProblems=!0,m;if(typeof a=="number"){const p=Math.floor(a/100);return m.successful=p===2||a===304||a===412||a===404,m.conflict=a===412,m.unAuth=a===401&&this.rs.remote.token!==y.default.IMPLIED_FAKE_TOKEN||a===402||a===403,m.notFound=a===404,m.changed=a!==304,m}}handleGetResponse(a,m,p,N,S){return i(this,void 0,void 0,function*(){return m.notFound&&(p=!!v.isFolder(a)&&{}),m.changed?this.completeFetch(a,p,N,S).then(M=>v.isFolder(a)?this.corruptServerItemsMap(p)?(_.default("[Sync] WARNING: Discarding corrupt folder description from server for "+a),!1):this.markChildren(a,p,M.toBeSaved,M.missingChildren).then(()=>!0):this.rs.local.setNodes(this.flush(M.toBeSaved)).then(()=>!0)):this.updateCommonTimestamp(a,S).then(()=>!0)})}handleResponse(a,m,p){const N=this.interpretStatus(p.statusCode);if(N.successful){if(m==="get")return this.handleGetResponse(a,N,p.body,p.contentType,p.revision);if(m==="put"||m==="delete")return this.completePush(a,m,N.conflict,p.revision).then(function(){return!0});throw new Error("cannot handle response for unknown action "+m)}{let S;return S=N.unAuth?new w.default:N.networkProblems?new k.default("Network request failed."):new Error("HTTP response code "+N.statusCode+" received."),this.dealWithFailure(a).then(()=>{throw this.rs._emit("error",S),S})}}finishTask(a){if(a.action!==void 0)return a.promise.then(m=>this.handleResponse(a.path,a.action,m),m=>(_.default("[Sync] wireclient rejects its promise!",a.path,a.action,m),this.handleResponse(a.path,a.action,{statusCode:"offline"}))).then(m=>{if(delete this._timeStarted[a.path],delete this._running[a.path],m&&this._tasks[a.path]){for(let p=0;p<this._tasks[a.path].length;p++)this._tasks[a.path][p]();delete this._tasks[a.path]}this.rs._emit("sync-req-done"),this.collectTasks(!1).then(()=>{!this.hasTasks()||this.stopped?(_.default("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(this._tasks).length,this.stopped),this.done||(this.done=!0,this.rs._emit("sync-done"))):setTimeout(()=>{this.doTasks()},10)})},m=>{_.default("[Sync] Error",m),delete this._timeStarted[a.path],delete this._running[a.path],this.rs._emit("sync-req-done"),this.done||(this.done=!0,this.rs._emit("sync-done"))});delete this._running[a.path]}doTasks(){let a,m,p=0;a=this.rs.remote.connected?this.rs.remote.online?this.numThreads:1:0;const N=a-Object.getOwnPropertyNames(this._running).length;if(N<=0)return!0;for(m in this._tasks)if(!this._running[m]&&(this._timeStarted[m]=this.now(),this._running[m]=this.doTask(m),this._running[m].then(this.finishTask.bind(this)),p++,p>=N))return!0;return p>=N}collectTasks(a){return i(this,void 0,void 0,function*(){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(m=>m||a===!1?Promise.resolve():this.collectRefreshTasks(),function(m){throw m})})}addTask(a,m){this._tasks[a]||(this._tasks[a]=[]),typeof m=="function"&&this._tasks[a].push(m)}sync(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(()=>{try{this.doTasks()}catch(a){_.default("[Sync] doTasks error",a)}},function(a){throw _.default("[Sync] Sync error",a),new Error("Local cache unavailable")})}static _rs_init(a){b=function(){_.default("[Sync] syncCycleCb calling syncCycle");const m=new c.default;m.isBrowser()&&function(p,N){function S(M){const J=N.getCurrentSyncInterval();u.default.isBackground=!M;const H=N.getCurrentSyncInterval();N._emit("sync-interval-change",{oldValue:J,newValue:H})}p.on("background",()=>S(!1)),p.on("foreground",()=>S(!0))}(m,a),a.sync||(a.sync=new U(a),a.syncStopped&&(_.default("[Sync] Instantiating sync stopped"),a.sync.stopped=!0,delete a.syncStopped)),_.default("[Sync] syncCycleCb calling syncCycle"),a.syncCycle()},T=function(){a.removeEventListener("connected",T),a.startSync()},a.on("ready",b),a.on("connected",T)}static _rs_cleanup(a){a.stopSync(),a.removeEventListener("ready",b),a.removeEventListener("connected",T),a.sync=void 0,delete a.sync}}v.applyMixins(U,[g.default]),r.exports=U},function(r,n,s){(function(i){var o=this&&this.__awaiter||function(v,b,T,E){return new(T||(T=Promise))(function(I,A){function U(m){try{a(E.next(m))}catch(p){A(p)}}function C(m){try{a(E.throw(m))}catch(p){A(p)}}function a(m){var p;m.done?I(m.value):(p=m.value,p instanceof T?p:new T(function(N){N(p)})).then(U,C)}a((E=E.apply(v,b||[])).next())})},u=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};const c=u(s(2)),g=u(s(10)),_=u(s(1)),y=s(0);let k;class w extends g.default{constructor(b){super(),this.addEvents(["change","local-events-done"]),this.db=b||k,this.db?(this.getsRunning=0,this.putsRunning=0,this.changesQueued={},this.changesRunning={},this.commitSlownessWarning=null):_.default("[IndexedDB] Failed to open DB")}getNodes(b){return o(this,void 0,void 0,function*(){const T=[],E={};for(let I=0,A=b.length;I<A;I++)this.changesQueued[b[I]]!==void 0?E[b[I]]=y.deepClone(this.changesQueued[b[I]]||void 0):this.changesRunning[b[I]]!==void 0?E[b[I]]=y.deepClone(this.changesRunning[b[I]]||void 0):T.push(b[I]);return T.length>0?this.getNodesFromDb(T).then(function(I){for(const A in E)I[A]=E[A];return I}):Promise.resolve(E)})}setNodes(b){return o(this,void 0,void 0,function*(){for(const T in b)this.changesQueued[T]=b[T]||!1;return this.maybeFlush(),Promise.resolve()})}maybeFlush(){this.putsRunning===0?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=i.setInterval(function(){console.warn("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))}flushChangesQueued(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))}getNodesFromDb(b){return new Promise((T,E)=>{const I=this.db.transaction(["nodes"],"readonly"),A=I.objectStore("nodes"),U={};this.getsRunning++,b.map(C=>{A.get(C).onsuccess=a=>{U[C]=a.target.result}}),I.oncomplete=()=>{T(U),this.getsRunning--},I.onerror=I.onabort=()=>{E("get transaction error/abort"),this.getsRunning--}})}setNodesInDb(b){return o(this,void 0,void 0,function*(){return new Promise((T,E)=>{const I=this.db.transaction(["nodes"],"readwrite"),A=I.objectStore("nodes"),U=new Date().getTime();this.putsRunning++,_.default("[IndexedDB] Starting put",b,this.putsRunning);for(const C in b){const a=b[C];if(typeof a=="object")try{A.put(a)}catch(m){throw _.default("[IndexedDB] Error while putting",a,m),m}else try{A.delete(C)}catch(m){throw _.default("[IndexedDB] Error while removing",A,a,m),m}}I.oncomplete=()=>{this.putsRunning--,_.default("[IndexedDB] Finished put",b,this.putsRunning,new Date().getTime()-U+"ms"),T()},I.onerror=()=>{this.putsRunning--,E("transaction error")},I.onabort=()=>{E("transaction abort"),this.putsRunning--}})})}reset(b){const T=this.db.name;this.db.close(),w.clean(this.db.name,()=>{w.open(T,(E,I)=>{E?_.default("[IndexedDB] Error while resetting local storage",E):this.db=I,typeof b=="function"&&b(self)})})}forAllNodes(b){return o(this,void 0,void 0,function*(){return new Promise(T=>{this.db.transaction(["nodes"],"readonly").objectStore("nodes").openCursor().onsuccess=E=>{const I=E.target.result;I?(b(this.migrate(I.value)),I.continue()):T()}})})}closeDB(){this.putsRunning===0?this.db.close():setTimeout(this.closeDB.bind(this),100)}static open(b,T){const E=setTimeout(function(){T("timeout trying to open db")},1e4);try{const I=indexedDB.open(b,2);I.onerror=function(){_.default("[IndexedDB] Opening DB failed",I),clearTimeout(E),T(I.error)},I.onupgradeneeded=function(A){const U=I.result;_.default("[IndexedDB] Upgrade: from ",A.oldVersion," to ",A.newVersion),A.oldVersion!==1&&(_.default("[IndexedDB] Creating object store: nodes"),U.createObjectStore("nodes",{keyPath:"path"})),_.default("[IndexedDB] Creating object store: changes"),U.createObjectStore("changes",{keyPath:"path"})},I.onsuccess=function(){clearTimeout(E);const A=I.result;if(!A.objectStoreNames.contains("nodes")||!A.objectStoreNames.contains("changes"))return _.default("[IndexedDB] Missing object store. Resetting the database."),void w.clean(b,function(){w.open(b,T)});T(null,I.result)}}catch(I){_.default("[IndexedDB] Failed to open database: "+I),_.default("[IndexedDB] Resetting database and trying again."),clearTimeout(E),w.clean(b,function(){w.open(b,T)})}}static clean(b,T){const E=indexedDB.deleteDatabase(b);E.onsuccess=function(){_.default("[IndexedDB] Done removing DB"),T()},E.onerror=E.onabort=function(I){console.error('Failed to remove database "'+b+'"',I)}}static _rs_init(b){return new Promise((T,E)=>{w.open("remotestorage",function(I,A){I?E(I):(k=A,A.onerror=()=>{b._emit("error",I)},T())})})}static _rs_supported(){return new Promise((b,T)=>{const E=y.getGlobalContext();let I=!1;if(typeof navigator!="undefined"&&navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(I=!0)),"indexedDB"in E&&!I)try{const A=indexedDB.open("rs-check");A.onerror=function(){T()},A.onsuccess=function(){A.result.close(),indexedDB.deleteDatabase("rs-check"),b()}}catch{T()}else T()})}static _rs_cleanup(b){return new Promise(T=>{b.local&&b.local.closeDB(),w.clean("remotestorage",T)})}diffHandler(){}}y.applyMixins(w,[c.default]),r.exports=w}).call(this,s(5))},function(r,n,s){var i=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};const o=i(s(10)),u=i(s(2)),c=i(s(1)),g=s(0),_="remotestorage:cache:nodes:";function y(w){return w.substr(0,_.length)===_||w.substr(0,28)==="remotestorage:cache:changes:"}class k extends o.default{constructor(){super(),this.addEvents(["change","local-events-done"])}diffHandler(...v){}getNodes(v){const b={};for(let T=0,E=v.length;T<E;T++)try{b[v[T]]=JSON.parse(localStorage[_+v[T]])}catch{b[v[T]]=void 0}return Promise.resolve(b)}setNodes(v){for(const b in v)localStorage[_+b]=JSON.stringify(v[b]);return Promise.resolve()}forAllNodes(v){let b;for(let T=0,E=localStorage.length;T<E;T++)if(localStorage.key(T).substr(0,_.length)===_){try{b=this.migrate(JSON.parse(localStorage[localStorage.key(T)]))}catch{b=void 0}b&&v(b)}return Promise.resolve()}static _rs_init(){}static _rs_supported(){return g.localStorageAvailable()}static _rs_cleanup(){const v=[];for(let b=0,T=localStorage.length;b<T;b++){const E=localStorage.key(b);y(E)&&v.push(E)}v.forEach(b=>{c.default("[LocalStorage] Removing",b),delete localStorage[b]})}}g.applyMixins(k,[u.default]),r.exports=k},function(r,n,s){var i=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};const o=i(s(2)),u=i(s(10)),c=s(0);class g extends u.default{constructor(){super(),this._storage={},this.addEvents(["change","local-events-done"])}getNodes(y){const k={};for(let w=0,v=y.length;w<v;w++)k[y[w]]=this._storage[y[w]];return Promise.resolve(k)}setNodes(y){for(const k in y)y[k]===void 0?delete this._storage[k]:this._storage[k]=y[k];return Promise.resolve()}forAllNodes(y){for(const k in this._storage)y(this.migrate(this._storage[k]));return Promise.resolve()}diffHandler(){}static _rs_init(){}static _rs_supported(){return!0}static _rs_cleanup(){}}c.applyMixins(g,[o.default]),r.exports=g}])})})(Wn);var li=ui(Wn.exports);const st=new li;st.setApiKeys({dropbox:ii,googledrive:oi});const rr=Rr(0),ci=_t(rr,t=>t>0);_t(rr,t=>t);function fi(){rr.update(t=>t+1)}function hi(){rr.update(t=>t-1)}function di(t){return fi(),t.finally(hi)}st.access.claim("secrets","rw");st.caching.enable("/secrets/");const Or=st.scope("/secrets/");Or.declareType("secrets",{type:"object",properties:{".*":{type:"object",properties:{id:{type:"string",format:"uuid"},type:{type:"string",enum:["password","text"]},application:{type:"string",format:{type:"oneOf",items:[{type:"uri"},{type:"string"}]}},username:{type:"string"},secret:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","type","application","username","secret","createdAt","updatedAt"]}}});const ht=Rr({});_t(ht,t=>Object.values(t));_t(ht,t=>t);const xr=_t(ht,t=>Object.values(t).reduce((e,r)=>((e[r.application]||(e[r.application]=[])).push(r),e),{}));function pi(t){const r={id:si(),type:t.type,application:Rt(t.application),username:t.username,secret:t.secret,createdAt:new Date,updatedAt:new Date};ht.update(n=>{const s=Dt(ot({},n),{[r.id]:r});return Cr(s),s})}async function mi(t,e){let r;ht.update(n=>{const s=n[t];if(s){const i=Dt(ot(ot({},s),e),{updatedAt:new Date});i.application=Rt(i.application);const o=Dt(ot({},n),{[t]:i});return r=Cr(o),o}else return n}),r&&await r}function gi(t){ht.update(e=>{const r=ot({},e);return delete r[t],Cr(r),r})}function yi(t){return{id:t.id,type:t.type,application:t.application,username:t.username,secret:t.secret,createdAt:t.createdAt.toJSON(),updatedAt:t.updatedAt.toJSON()}}function vi(t){return{id:t.id,type:t.type,application:t.application,username:t.username,secret:t.secret,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)}}async function Cr(t){await di(Or.storeObject("secrets","secrets.json",Object.values(t).reduce((e,r)=>(e[r.id]=yi(r),e),{})))}function _i(){Or.getObject("secrets.json",!1).then(t=>{if(t){const e=t;delete e["@context"],ht.update(r=>{const n=ot({},r);return Object.values(e).forEach(s=>{const i=n[s.id],o=vi(s);(!i||i.updatedAt<o.updatedAt)&&(n[s.id]=o)}),n})}})}st.on("sync-done",_i);function bi(t){let e,r,n,s,i;const o=t[2].default,u=Sr(o,t,t[1],null);return{c(){e=Q("div"),u&&u.c(),this.h()},l(c){e=Z(c,"DIV",{});var g=te(e);u&&u.l(g),g.forEach($),this.h()},h(){e.hidden=!0},m(c,g){K(c,e,g),u&&u.m(e,null),n=!0,s||(i=Hs(r=wi.call(null,e,t[0])),s=!0)},p(c,[g]){u&&u.p&&(!n||g&2)&&kr(u,o,c,c[1],n?Nr(o,c[1],g,null):Ar(c[1]),null),r&&Ct(r.update)&&g&1&&r.update.call(null,c[0])},i(c){n||(ne(u,c),n=!0)},o(c){se(u,c),n=!1},d(c){c&&$(e),u&&u.d(c),s=!1,i()}}}function wi(t,e="body"){let r;async function n(i){if(e=i,typeof e=="string"){if(r=document.querySelector(e),r===null&&(await Ws(),r=document.querySelector(e)),r===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)r=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);r.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return n(e),{update:n,destroy:s}}function Ei(t,e,r){let{$$slots:n={},$$scope:s}=e,{target:i="body"}=e;return t.$$set=o=>{"target"in o&&r(0,i=o.target),"$$scope"in o&&r(1,s=o.$$scope)},[i,s,n]}class Pi extends Se{constructor(e){super(),ke(this,e,Ei,bi,Ze,{target:0})}}function Ti(t){let e;return{c(){e=Xe("path"),this.h()},l(r){e=Qe(r,"path",{d:!0}),te(e).forEach($),this.h()},h(){G(e,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z")},m(r,n){K(r,e,n)},p:Ae,d(r){r&&$(e)}}}function Si(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[Ti]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=Te(s,n[i]);return e=new ft({props:s}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,o){he(e,i,o),r=!0},p(i,[o]){const u=o&1?lt(n,[n[0],ct(i[0])]):{};o&2&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){de(e,i)}}}function ki(t,e,r){return t.$$set=n=>{r(0,e=Te(Te({},e),Ue(n)))},e=Ue(e),[e]}class Jn extends Se{constructor(e){super(),ke(this,e,ki,Si,Ze,{})}}const Ai=t=>({}),rn=t=>({});function nn(t){let e;const r=t[5].title,n=Sr(r,t,t[6],rn);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),e=!0},p(s,i){n&&n.p&&(!e||i&64)&&kr(n,r,s,s[6],e?Nr(r,s[6],i,Ai):Ar(s[6]),rn)},i(s){e||(ne(n,s),e=!0)},o(s){se(n,s),e=!1},d(s){n&&n.d(s)}}}function sn(t){let e;const r=t[5].default,n=Sr(r,t,t[6],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),e=!0},p(s,i){n&&n.p&&(!e||i&64)&&kr(n,r,s,s[6],e?Nr(r,s[6],i,null):Ar(s[6]),null)},i(s){e||(ne(n,s),e=!0)},o(s){se(n,s),e=!1},d(s){n&&n.d(s)}}}function Ni(t){let e,r,n,s,i,o,u,c,g=t[1],_,y,k,w,v,b,T=t[1],E,I,A,U=nn(t);w=new Jn({});let C=sn(t);return{c(){e=Q("div"),r=Q("div"),n=ae(),s=Q("div"),i=Q("div"),o=Q("div"),u=Q("div"),c=Q("div"),U.c(),_=ae(),y=Q("button"),k=Q("div"),ce(w.$$.fragment),v=ae(),b=Q("div"),C.c(),this.h()},l(a){e=Z(a,"DIV",{class:!0,role:!0,"aria-modal":!0});var m=te(e);r=Z(m,"DIV",{class:!0}),te(r).forEach($),n=ue(m),s=Z(m,"DIV",{class:!0});var p=te(s);i=Z(p,"DIV",{class:!0});var N=te(i);o=Z(N,"DIV",{class:!0});var S=te(o);u=Z(S,"DIV",{class:!0});var M=te(u);c=Z(M,"DIV",{class:!0});var J=te(c);U.l(J),J.forEach($),_=ue(M),y=Z(M,"BUTTON",{class:!0});var H=te(y);k=Z(H,"DIV",{class:!0});var q=te(k);fe(w.$$.fragment,q),q.forEach($),H.forEach($),M.forEach($),v=ue(S),b=Z(S,"DIV",{class:!0});var R=te(b);C.l(R),R.forEach($),S.forEach($),N.forEach($),p.forEach($),m.forEach($),this.h()},h(){G(r,"class","as-fixed as-inset-0 as-bg-gray-500 as-bg-opacity-25"),Be(r,"as-hidden",!t[0]),G(c,"class","as-flex-grow"),G(k,"class","as-w-6 as-h-6"),G(y,"class","as-bg-transparent as-border-0 as-text-black as-outline-none focus:as-outline-none"),G(u,"class","as-flex as-items-start as-justify-between as-px-4 as-pt-4"),G(b,"class","as-relative as-p-4 as-flex-auto"),G(o,"class","as-relative as-bg-white as-text-left as-overflow-hidden as-shadow-xl sm:as-my-8 sm:as-container sm:as-w-full"),G(i,"class","as-flex as-items-end sm:as-items-center as-justify-center as-min-h-full as-p-4 as-text-center sm:as-p-0"),G(s,"class","as-fixed as-z-10 as-inset-0 as-overflow-y-auto"),Be(s,"as-hidden",!t[0]),G(e,"class","as-relative as-z-10"),G(e,"role","dialog"),G(e,"aria-modal","true")},m(a,m){K(a,e,m),X(e,r),X(e,n),X(e,s),X(s,i),X(i,o),X(o,u),X(u,c),U.m(c,null),X(u,_),X(u,y),X(y,k),he(w,k,null),X(o,v),X(o,b),C.m(b,null),E=!0,I||(A=ge(y,"click",t[2]),I=!0)},p(a,m){m&1&&Be(r,"as-hidden",!a[0]),m&2&&De(g,g=a[1])?(Ge(),se(U,1,1,Ae),He(),U=nn(a),U.c(),ne(U,1),U.m(c,null)):U.p(a,m),m&2&&De(T,T=a[1])?(Ge(),se(C,1,1,Ae),He(),C=sn(a),C.c(),ne(C,1),C.m(b,null)):C.p(a,m),m&1&&Be(s,"as-hidden",!a[0])},i(a){E||(ne(U),ne(w.$$.fragment,a),ne(C),E=!0)},o(a){se(U),se(w.$$.fragment,a),se(C),E=!1},d(a){a&&$(e),U.d(a),de(w),C.d(a),I=!1,A()}}}function Ii(t){let e,r;return e=new Pi({props:{$$slots:{default:[Ni]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},p(n,[s]){const i={};s&67&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function Ri(t,e,r){let{$$slots:n={},$$scope:s}=e,{onClose:i=()=>{}}=e,{open:o=!1}=e,u=tn(),c;function g(){r(0,o=!1),i()}return t.$$set=_=>{"onClose"in _&&r(3,i=_.onClose),"open"in _&&r(0,o=_.open),"$$scope"in _&&r(6,s=_.$$scope)},t.$$.update=()=>{t.$$.dirty&17&&c!==o&&(r(1,u=tn()),r(4,c=o))},[o,u,g,i,c,n,s]}class on extends Se{constructor(e){super(),ke(this,e,Ri,Ii,De,{onClose:3,open:0})}}var Oi=Object.assign;function fr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return typeof t=="function"?t.apply(void 0,e):t}function zn(t){function e(s,i){var o,u,c=r();return s=Oi({},c||{},(o=fr(t,s,c))!==null&&o!==void 0?o:s),o=n.ctx=Object.freeze(s),n.ancestry.unshift(o),i=i(o),n.ancestry.shift(),n.ctx=(u=n.ancestry[0])!==null&&u!==void 0?u:null,i}function r(){return n.ctx}var n={ancestry:[]};return{bind:function(s,i){return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return e(s,function(){return i.apply(void 0,o)})}},run:e,use:r,useX:function(s){var i,o=n.ctx;if(s=(i=fr(s))!==null&&i!==void 0?i:"Context was used after it was closed",!o)throw s instanceof String?s.valueOf():Error(s&&fr(s));return n.ctx}}}var kt=Object.assign;function Mr(t){return typeof t=="function"}function Pe(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(void 0,e)}}function Yn(t){return t===null}var xi=Pe(Yn);function Ur(t){return t===void 0}var Ci=Pe(Ur);function nr(t){return t===null||Ur(t)}var Mi=Pe(nr);function Ye(t){return String(t)===t}function Kn(t,e){return Ye(t)&&Ye(e)&&t.endsWith(e)}var Ui=Pe(Kn);function Xn(t,e){return t===e}var Di=Pe(Xn);function Je(t){var e=Number(t);return!(isNaN(parseFloat(String(t)))||isNaN(Number(t))||!isFinite(e))}var ji=Pe(Je);function Tt(t,e){return Je(t)&&Je(e)&&Number(t)>Number(e)}function Ut(t,e){return Je(t)&&Je(e)&&Number(t)===Number(e)}var Fi=Pe(Ut);function $t(t,e){return Ut(t,e)||Tt(t,e)}function Dr(t){return!!Array.isArray(t)}var Li=Pe(Dr);function Qn(t,e){return!!(Dr(e)||Ye(e)&&Ye(t))&&e.indexOf(t)!==-1}var Bi=Pe(Qn);function St(t,e){return Je(t)&&Je(e)&&Number(t)<Number(e)}function qt(t,e){return Ut(t,e)||St(t,e)}function Zn(t,e,r){return $t(t,e)&&qt(t,r)}var $i=Pe(Zn);function es(t){return nr(t)||Ye(t)&&!t.trim()}var qi=Pe(es);function At(t){return!!t===t}var Vi=Pe(At);function jr(t){return typeof t=="number"}var Gi=Pe(jr);function zt(t,e){return Ut(t.length,e)}var Hi=Pe(zt);function Fr(t){return!t||(jr(t)?t===0:Object.prototype.hasOwnProperty.call(t,"length")?zt(t,0):typeof t=="object"&&zt(Object.keys(t),0))}var Wi=Pe(Fr);function ts(t,e){return t in e}var Ji=Pe(ts);function rs(t){return Number.isNaN(t)}var zi=Pe(rs),Yi=Pe(Ye);function ns(t){return!!t}var Ki=Pe(ns);function ss(t,e){if(nr(e))return!1;for(var r in e)if(e[r]===t)return!0;return!1}var Xi=Pe(ss);function is(t,e){return e instanceof RegExp?e.test(t):!!Ye(e)&&new RegExp(e).test(t)}var Qi=Pe(is);function an(t,e){return Ye(t)&&Ye(e)&&t.startsWith(e)}var at={condition:function(t,e){try{return e(t)}catch{return!1}},doesNotEndWith:Ui,doesNotStartWith:Pe(an),endsWith:Kn,equals:Xn,greaterThan:Tt,greaterThanOrEquals:$t,gt:Tt,gte:$t,inside:Qn,isArray:Dr,isBetween:Zn,isBlank:es,isBoolean:At,isEmpty:Fr,isEven:function(t){return!!Je(t)&&t%2==0},isFalsy:Ki,isKeyOf:ts,isNaN:rs,isNegative:function(t){return St(t,0)},isNotArray:Li,isNotBetween:$i,isNotBlank:qi,isNotBoolean:Vi,isNotEmpty:Wi,isNotKeyOf:Ji,isNotNaN:zi,isNotNull:xi,isNotNullish:Mi,isNotNumber:Gi,isNotNumeric:ji,isNotString:Yi,isNotUndefined:Ci,isNotValueOf:Xi,isNull:Yn,isNullish:nr,isNumber:jr,isNumeric:Je,isOdd:function(t){return!!Je(t)&&t%2!=0},isPositive:function(t){return Tt(t,0)},isString:Ye,isTruthy:ns,isUndefined:Ur,isValueOf:ss,lengthEquals:zt,lengthNotEquals:Hi,lessThan:St,lessThanOrEquals:qt,longerThan:function(t,e){return Tt(t.length,e)},longerThanOrEquals:function(t,e){return $t(t.length,e)},lt:St,lte:qt,matches:is,notEquals:Di,notInside:Bi,notMatches:Qi,numberEquals:Ut,numberNotEquals:Fi,shorterThan:function(t,e){return St(t.length,e)},shorterThanOrEquals:function(t,e){return qt(t.length,e)},startsWith:an};function Lr(t){for(var e in at){var r=at[e];Mr(r)&&t(e,r)}}var Br=zn(function(t,e){var r={value:t.value,meta:t.meta||{}};return e?t.set?kt(r,{parent:function(){return e&&{value:e.value,meta:e.meta,parent:e.parent}}}):e:kt(r,{parent:Zi})});function Zi(){return null}function Ot(t,e,r){if(r||arguments.length===2)for(var n,s=0,i=e.length;s<i;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))}function sr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return Mr(t)?t.apply(void 0,e):t}function os(t,e){if(!t)throw e instanceof String?e.valueOf():Error(e&&sr(e))}function $r(){try{return Mr(Proxy)}catch{return!1}}function eo(t,e){var r;return(r=sr(t))!==null&&r!==void 0?r:e}function Yt(t,e){return t={pass:t},e&&(t.message=e),t}function as(t,e,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return os(At(t)||t&&At(t.pass),"Incorrect return value for rule: "+JSON.stringify(t)),At(t)?Yt(t):Yt(t.pass,sr.apply(void 0,Ot([t.message,e,r],n,!1)))}function un(t){function e(s,i,o){return function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return os((c=as.apply(void 0,Ot([Br.run({value:t},function(){return i.apply(void 0,Ot([t],u,!1))}),o,t],u,!1))).pass,Fr(c.message)?"enforce/".concat(o," failed with ").concat(JSON.stringify(t)):new String(c.message)),s}}var r={};if(!$r())return Lr(function(s,i){r[s]=e(r,i,s)}),r;var n=new Proxy(r,{get:function(s,i){if(s=at[i])return e(n,s,i)}});return n}function to(t,e){function r(o){n=!0,s=o}for(var n=!1,s=null,i=0;i<t.length;i++)if(e(t[i],r,i),n)return s}function ln(t){var e,r=[];return function n(s){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var u=at[s];r.push(function(g){return as.apply(void 0,Ot([u.apply(void 0,Ot([g],i,!1)),s,g],i,!1))});var c={run:function(g){return eo(to(r,function(_,y){var k,w=Br.run({value:g},function(){return _(g)});w.pass||y(Yt(!!w.pass,(k=sr(e,g,w.message))!==null&&k!==void 0?k:w.message))}),Yt(!0))},test:function(g){return c.run(g).pass},message:function(g){return g&&(e=g),c}};return $r()?c=new Proxy(c,{get:function(g,_){return at[_]?n(_):g[_]}}):(Lr(function(g){c[g]=n(g)}),c)}}(t)}var hr=function(){function t(){if(!$r())return Lr(function(r){e[r]=ln(r)}),kt(un,e)}var e={context:function(){return Br.useX()},extend:function(r){kt(at,r),t()}};return t(),new Proxy(kt(un,e),{get:function(r,n){return n in r?r[n]:at[n]?ln(n):void 0}})}(),cn,us=(cn=0,function(){return"".concat(cn++)});function ir(t){return String(t)===t}function qr(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(void 0,e)}}var it=Object.assign;function Kt(t){var e=Number(t);return!(isNaN(parseFloat(String(t)))||isNaN(Number(t))||!isFinite(e))}function vr(t,e){return Kt(t)&&Kt(e)&&Number(t)===Number(e)}function xt(t,e){return Kt(t)&&Kt(e)&&Number(t)>Number(e)}function or(t){function e(s,i){var o=e.get(s);return o?o[1]:(i=i(),n.unshift([s.concat(),i]),xt(n.length,t)&&(n.length=t),i)}function r(s){return n.findIndex(function(i){var o=i[0];return vr(s.length,o.length)&&s.every(function(u,c){return u===o[c]})})}t===void 0&&(t=1);var n=[];return e.invalidate=function(s){-1<(s=r(s))&&n.splice(s,1)},e.get=function(s){return n[r(s)]||null},e}var ro=qr(function(t){return t===null});function $e(t){return typeof t=="function"}function pt(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return $e(t)?t.apply(void 0,e):t}function ls(t,e){var r;return(r=pt(t))!==null&&r!==void 0?r:e}function Vr(t){return(t=[].concat(t))[t.length-1]}function _r(t,e){for(var r=[],n=0;n<t.length;n++){var s=t[n];Array.isArray(s)?r.push(_r(s,e)):(s=e(s),ro(s)&&r.push(s))}return r}function cs(t){return[].concat(t).reduce(function(e,r){return Array.isArray(r)?e.concat(cs(r)):[].concat(e).concat(r)},[])}function Xt(t,e){var r=0;for(e=e.slice(0,-1);r<e.length;r++){var n=e[r];t[n]=ls(t[n],[]),t=t[n]}return t}var mt,Le=mt||(mt={});Le[Le.DEFAULT=0]="DEFAULT",Le[Le.SUITE=1]="SUITE",Le[Le.EACH=2]="EACH",Le[Le.SKIP_WHEN=3]="SKIP_WHEN",Le[Le.OMIT_WHEN=4]="OMIT_WHEN",Le[Le.GROUP=5]="GROUP";var Qt,Ft=Qt||(Qt={});function no(){var t=0;return{current:function(){return t},next:function(){t++}}}function fs(t,e){return e===void 0&&(e=[]),{cursor:no(),keys:{current:{},prev:{}},path:e,type:t}}Ft[Ft.ALL=0]="ALL",Ft[Ft.EAGER=1]="EAGER";var ye=zn(function(t,e){return e?null:it({},{exclusion:{tests:{},groups:{}},inclusion:{},isolate:fs(mt.DEFAULT),mode:[Qt.ALL]},t)});function Ce(){return ye.useX().stateRef}function hs(t){return Ce().optionalFields()[0][t]}function so(t,e){(0,Ce().optionalFields()[1])(function(r){var n;return it(r,((n={})[t]=pt(e,r[t]),n))})}function Gr(t){var e;return(e=hs(t))===null||e===void 0?void 0:e[0]}function br(){gt(function(t){return t})}function gt(t){(0,Ce().testObjects()[1])(function(e){return{prev:e.prev,current:[].concat(t(e.current))}})}function Hr(){return Ve().filter(function(t){return t.isPending()})}var io=or();function Ve(){var t=Ce().testObjects()[0].current;return io([t],function(){return cs(t)})}var Nt,fn=Nt||(Nt={});fn.Error="error",fn.Warning="warning";var ds=function(){function t(e,r,n){var s=n===void 0?{}:n;n=s.message;var i=s.groupName;s=s.key,this.key=null,this.id=us(),this.severity=Nt.Error,this.status=dr,this.fieldName=e,this.testFn=r,i&&(this.groupName=i),n&&(this.message=n),s&&(this.key=s)}return t.prototype.run=function(){try{var e=this.testFn()}catch(r){e=r,this.message===void 0&&ir(e)&&(this.message=r),e=!1}return e===!1&&this.fail(),e},t.prototype.setStatus=function(e){this.isFinalStatus()&&e!==pr||(this.status=e)},t.prototype.warns=function(){return this.severity===Nt.Warning},t.prototype.setPending=function(){this.setStatus(gn)},t.prototype.fail=function(){this.setStatus(this.warns()?pn:dn)},t.prototype.done=function(){this.isFinalStatus()||this.setStatus(mn)},t.prototype.warn=function(){this.severity=Nt.Warning},t.prototype.isFinalStatus=function(){return this.hasFailures()||this.isCanceled()||this.isPassing()},t.prototype.skip=function(e){this.isPending()&&!e||this.setStatus(hn)},t.prototype.cancel=function(){this.setStatus(yn),br()},t.prototype.reset=function(){this.status=dr,br()},t.prototype.omit=function(){this.setStatus(pr)},t.prototype.valueOf=function(){return!this.isFailing()},t.prototype.hasFailures=function(){return this.isFailing()||this.isWarning()},t.prototype.isNonActionable=function(){return this.isSkipped()||this.isOmitted()||this.isCanceled()},t.prototype.isPending=function(){return this.statusEquals(gn)},t.prototype.isTested=function(){return this.hasFailures()||this.isPassing()},t.prototype.isOmitted=function(){return this.statusEquals(pr)},t.prototype.isUntested=function(){return this.statusEquals(dr)},t.prototype.isFailing=function(){return this.statusEquals(dn)},t.prototype.isCanceled=function(){return this.statusEquals(yn)},t.prototype.isSkipped=function(){return this.statusEquals(hn)},t.prototype.isPassing=function(){return this.statusEquals(mn)},t.prototype.isWarning=function(){return this.statusEquals(pn)},t.prototype.statusEquals=function(e){return this.status===e},t}(),dr="UNTESTED",hn="SKIPPED",dn="FAILED",pn="WARNING",mn="PASSING",gn="PENDING",yn="CANCELED",pr="OMITTED";function yt(t,e){if(!t)throw e instanceof String?e.valueOf():Error(e&&pt(e))}function oo(t){function e(i,o,u){return n.references.push(),r(i,pt(o,u)),function(){return[n.references[i],function(c){return r(i,pt(c,n.references[i]))}]}}function r(i,o){var u=n.references[i];n.references[i]=o,$e(i=s[i][1])&&i(o,u),$e(t)&&t()}var n={references:[]},s=[];return{registerStateKey:function(i,o){var u=s.length;return s.push([i,o]),e(u,i)},reset:function(){var i=n.references;n.references=[],s.forEach(function(o,u){return e(u,o[0],i[u])})}}}function ao(t,e){var r=e.suiteId;return e=e.suiteName,{optionalFields:t.registerStateKey(function(){return{}}),suiteId:t.registerStateKey(r),suiteName:t.registerStateKey(e),testCallbacks:t.registerStateKey(function(){return{fieldCallbacks:{},doneCallbacks:[]}}),testObjects:t.registerStateKey(function(n){return{prev:n?n.current:[],current:[]}})}}function wr(t){return t==null}function vn(t){setTimeout(function(){throw Error(t)},0)}function uo(t,e){t=(t=t.type)===void 0?mt.DEFAULT:t,yt($e(e));var r=fs(t,Zt());return t=ye.run({isolate:r},function(){return r.keys.prev=function(){var n=Ce().testObjects()[0].prev;return[].concat(Xt(n,Zt())).reduce(function(s,i){return i instanceof ds&&!wr(i.key)&&(s[i.key]=i),s},{})}(),gt(function(n){var s=r.path;return Xt(n,s)[Vr(s)]=[],n}),e()}),et().cursor.next(),t}function et(){return ye.useX().isolate}function Zt(){var t=et();return t.path.concat(t.cursor.current())}var Me,_n=Me||(Me={});_n.WARNINGS="warnings",_n.ERRORS="errors";var vt,bn=vt||(vt={});function Wr(t){return t===Me.ERRORS?vt.ERROR_COUNT:vt.WARN_COUNT}function bt(t){return!t||(typeof t=="number"?t===0:Object.prototype.hasOwnProperty.call(t,"length")?vr(t.length,0):typeof t=="object"&&vr((t=Object.keys(t)).length,0))}bn.ERROR_COUNT="errorCount",bn.WARN_COUNT="warnCount";var ar=qr(bt);function ut(t,e){return!(!e||t.fieldName!==e)}var mr=qr(function(t,e){return t.groupName===e});function ps(t,e){return Ve().some(function(r){return ms(r,t,e)})}function ms(t,e,r){return(r=!t.hasFailures()||r&&!ut(t,r))||(t=t.warns(),r=e===Me.WARNINGS!=!!t),!r}function wn(t){return!!gs(t)||!ps(Me.ERRORS,t)&&!bt(Ve())&&!function(e){return ar(Hr().filter(function(r){return ys(r,e)}))}(t)&&function(e){return Ve().every(function(r){return!(!e||ut(r,e))||vs(r,e)})}(t)}function gs(t){return!!t&&((e=hs(t))===null||e===void 0?void 0:e[1])===!0;var e}function ys(t,e){return!(e&&!ut(t,e))&&Gr(t.fieldName)!==!0}function vs(t,e){return!(!e||ut(t,e))||Gr(t.fieldName)===!0||t.isTested()||t.isOmitted()}function wt(){var t=ye.useX().summary;return yt(t),t}function lo(){var t=Ve(),e=it({errorCount:0,warnCount:0,testCount:0},{groups:{},tests:{},valid:!1});return t.reduce(function(r,n){var s=r.tests;s[n.fieldName]=En(s,n),s[n.fieldName].valid=s[n.fieldName].valid!==!1&&wn(n.fieldName);var i=r.groups,o=n.groupName;return o&&(i[o]=i[o]||{},i[o][n.fieldName]=En(i[o],n),s=i[o][n.fieldName],i[o][n.fieldName].valid===!1?n=!1:n=!!gs(n=n.fieldName)||!function(u,c,g){return Ve().some(function(_){return!mr(_,c)&&ms(_,u,g)})}(Me.ERRORS,o,n)&&!function(u,c){return ar(Hr().filter(function(g){return!mr(g,u)&&ys(g,c)}))}(o,n)&&function(u,c){return Ve().every(function(g){return!!mr(g,u)||vs(g,c)})}(o,n),s.valid=n),r},e),e.valid=wn(),function(r){for(var n in r.tests)r.errorCount+=r.tests[n].errorCount,r.warnCount+=r.tests[n].warnCount,r.testCount+=r.tests[n].testCount;return r}(e)}function En(t,e){function r(o){var u=Wr(o);i[u]++,s&&(i[o]=(i[o]||[]).concat(s))}var n=e.fieldName,s=e.message;t[n]=t[n]||it({errorCount:0,warnCount:0,testCount:0},{errors:[],warnings:[]});var i=t[n];return e.isNonActionable()||(t[n].testCount++,e.isFailing()?r(Me.ERRORS):e.isWarning()&&r(Me.WARNINGS)),i}function _s(t,e,r){var n;return((n=t==null?void 0:t[r])===null||n===void 0?void 0:n[e])||[]}function bs(t,e){var r,n={},s=Wr(e);for(r in t)xt(t[r][s],0)&&(n[r]=t[r][e]||[]);return n}function co(t){return ws(Me.ERRORS,t)}function fo(t){return ws(Me.WARNINGS,t)}function ws(t,e){var r=wt().tests;return e?_s(r,t,e):bs(r,t)}function ho(t,e){return Es(t,Me.ERRORS,e)}function po(t,e){return Es(t,Me.WARNINGS,e)}function Es(t,e,r){return t=wt().groups[t],r?_s(t,e,r):bs(t,e)}function mo(t){return Ps(vt.ERROR_COUNT,t)}function go(t){return Ps(vt.WARN_COUNT,t)}function Ps(t,e){var r,n=wt();return xt(e?(r=n.tests[e])===null||r===void 0?void 0:r[t]:n[t],0)}function yo(t,e){return Ts(Me.ERRORS,t,e)}function vo(t,e){return Ts(Me.WARNINGS,t,e)}function Ts(t,e,r){var n,s,i=wt();if(t=Wr(t),!(e=i.groups[e]))return!1;if(r)return xt((n=e[r])===null||n===void 0?void 0:n[t],0);for(var o in e)if(xt((s=e[o])===null||s===void 0?void 0:s[t],0))return!0;return!1}function _o(t){var e=wt();return t?!!Er(e.tests,t):e.valid}function bo(t,e){if(!(t=wt().groups[t]))return!1;if(e)return Er(t,e);for(var r in t)if(!Er(t,r))return!1;return!0}function Er(t,e){var r;return!((r=t[e])===null||r===void 0||!r.valid)}var wo=or(1);function Jr(){var t=Ve(),e={stateRef:Ce()};return wo([t],ye.bind(e,function(){var r=lo(),n=Ce().suiteName()[0],s={summary:r};return it(r,{getErrors:ye.bind(s,co),getErrorsByGroup:ye.bind(s,ho),getWarnings:ye.bind(s,fo),getWarningsByGroup:ye.bind(s,po),hasErrors:ye.bind(s,mo),hasErrorsByGroup:ye.bind(s,yo),hasWarnings:ye.bind(s,go),hasWarningsByGroup:ye.bind(s,vo),isValid:ye.bind(s,_o),isValidByGroup:ye.bind(s,bo),suiteName:n})}))}function er(t){var e=Hr();return!bt(e)&&(t?e.some(function(r){return ut(r,t)}):ar(e))}var Eo=or(20);function Ss(){var t=Ve(),e={stateRef:Ce()};return Eo([t],ye.bind(e,function(){return it({},Jr(),{done:ye.bind(e,So)})}))}function Po(t,e,r){return!($e(t)&&(!e||r.tests[e]&&!bt(r.tests[e].testCount)))}function To(t){return!(er()&&(!t||er(t)))}function So(){function t(){return n(Jr())}for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=(e=e.reverse())[0];return e=e[1],r=Ss(),Po(n,e,r)?r:To(e)?(t(),r):(ko(t,e),r)}function ko(t,e){(0,Ce().testCallbacks()[1])(function(r){return e?r.fieldCallbacks[e]=(r.fieldCallbacks[e]||[]).concat(t):r.doneCallbacks.push(t),r})}function Pn(t){return t.forEach(function(e){return e()})}function Ao(){var t=function(){var e={};return{emit:function(r,n){(e[r]||[]).forEach(function(s){s(n)})},on:function(r,n){return e[r]=(e[r]||[]).concat(n),{off:function(){e[r]=(e[r]||[]).filter(function(s){return s!==n})}}}}}();return t.on(Fe.TEST_COMPLETED,function(e){if(!e.isCanceled()){e.done(),e=e.fieldName;var r=Ce().testCallbacks()[0].fieldCallbacks;e&&!er(e)&&Array.isArray(r[e])&&Pn(r[e]),er()||t.emit(Fe.ALL_RUNNING_TESTS_FINISHED)}}),t.on(Fe.SUITE_CALLBACK_DONE_RUNNING,function(){(function(){function e(n){r[n.fieldName]&&(n.omit(),so(n.fieldName,function(s){return[s[0],!0]}))}if(!bt(Ce().optionalFields()[0])){var r={};gt(function(n){return _r(n,function(s){if(Object.prototype.hasOwnProperty.call(r,s.fieldName))e(s);else{var i=Gr(s.fieldName);$e(i)&&(r[s.fieldName]=i(),e(s))}return s})})}})()}),t.on(Fe.ALL_RUNNING_TESTS_FINISHED,function(){Pn(Ce().testCallbacks()[0].doneCallbacks)}),t.on(Fe.REMOVE_FIELD,function(e){Ve().forEach(function(r){ut(r,e)&&(r.cancel(),function(n){gt(function(s){return _r(s,function(i){return n!==i?i:null})})}(r))})}),t.on(Fe.RESET_FIELD,function(e){Ve().forEach(function(r){ut(r,e)&&r.reset()})}),t}function ks(){var t=ye.useX();return yt(t.bus),t.bus}var Fe,Pt=Fe||(Fe={});function As(t){return Ns(0,"tests",t)}function Ns(t,e,r){var n=ye.useX("hook called outside of a running suite.");r&&[].concat(r).forEach(function(s){ir(s)&&(n.exclusion[e][s]=t===0)})}function Tn(t){for(var e in t)if(t[e]===!0)return!0;return!1}function Sn(){var t,e=ye.useX().exclusion;for(t in e.groups)if(e.groups[t])return!0;return!1}function No(t,e,r){if(r||arguments.length===2)for(var n,s=0,i=e.length;s<i;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))}function kn(t){var e=t.asyncTest,r=t.message;if(e&&$e(e.then)){var n=ks().emit,s=Ce(),i=ye.bind({stateRef:s},function(){br(),n(Fe.TEST_COMPLETED,t)});s=ye.bind({stateRef:s},function(o){t.isCanceled()||(t.message=ir(o)?o:r,t.fail(),i())});try{e.then(i,s)}catch{s()}}}function An(t){var e=Ce().testObjects()[0].prev;if(bt(e))return Vt(t),t;var r=Zt();if(e=Xt(e,r)[Vr(r)],!wr(t.key)){e=t.key,(r=et().keys.prev[e])&&(t=r),r=t;var n=et().keys.current;return wr(n[e])?n[e]=r:vn('Encountered the same test key "'.concat(e,`" twice. This may lead to tests overriding each other's results, or to tests being unexpectedly omitted.`)),Vt(t),t}return!ar(r=e)||r.fieldName===t.fieldName&&r.groupName===t.groupName||(et().type===mt.EACH||vn(`Vest Critical Error: Tests called in different order than previous run.
    expected: `.concat(e.fieldName,`
    received: `).concat(t.fieldName,`
    This can happen on one of two reasons:
    1. You're using if/else statements to conditionally select tests. Instead, use "skipWhen".
    2. You are iterating over a list of tests, and their order changed. Use "each" and a custom key prop so that Vest retains their state.`)),function(){var s=et().cursor.current();gt(function(i){return i.splice(s),i})}(),e=null),Vt(t=ls(e,t)),t}function Vt(t){var e=Zt();gt(function(r){return Xt(r,e)[Vr(e)]=t,r})}function Is(t){var e=et().cursor,r=Qt.EAGER;if(r=!(ye.useX().mode[0]!==r||!ps(Me.ERRORS,t.fieldName)))return t.skip(),An(t),e.next(),t;if(r=An(t),ye.useX().omitted)return r.omit(),e.next(),r;if(function(s){var i=s.fieldName;if(s=s.groupName,ye.useX().skipped)return!0;var o=ye.useX(),u=o.exclusion;o=o.inclusion;var c=u.tests,g=c[i];if(g===!1)return!0;if(g=g===!0,s){var _=ye.useX().exclusion.groups;if(_=Object.prototype.hasOwnProperty.call(_,s)?_[s]===!1:Sn())return!0;if(u.groups[s]===!0)return!(g||!Tn(c)&&c[i]!==!1)}return(s=!!Sn()&&!s)||!g&&!!Tn(c)&&!pt(o[i])}(t))return r.skip(!!ye.useX().skipped),e.next(),r;if(t!==r&&r.fieldName===t.fieldName&&r.groupName===t.groupName&&r.isPending()&&r.cancel(),Vt(t),t.isUntested()){r=ks();var n=function(s){return ye.run({currentTest:s},function(){return s.run()})}(t);try{n&&$e(n.then)?(t.asyncTest=n,t.setPending(),kn(t)):r.emit(Fe.TEST_COMPLETED,t)}catch(s){throw Error(`Unexpected error encountered during test registration.
      Test Object: `.concat(JSON.stringify(t),`.
      Error: `).concat(s,"."))}}else(r=t.asyncTest)&&$e(r.then)&&(t.setPending(),kn(t));return e.next(),t}function Nn(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=$e(e[1])?e:No([void 0],e,!0);e=n[0],r=n[1],n=n[2],yt(ir(t),In("fieldName","string")),yt($e(r),In("Test callback","function"));var s=ye.useX();return Is(e=new ds(t,r,{message:e,groupName:s.groupName,key:n}))}Pt.TEST_COMPLETED="test_completed",Pt.ALL_RUNNING_TESTS_FINISHED="all_running_tests_finished",Pt.REMOVE_FIELD="remove_field",Pt.RESET_FIELD="reset_field",Pt.SUITE_CALLBACK_DONE_RUNNING="suite_callback_done_running",As.group=function(t){return Ns(0,"groups",t)};var gr=it(Nn,{memo:function(t){var e=or(10);return function(r){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];s=et().cursor.current();var i=(n=n.reverse())[0],o=n[1],u=n[2];return s=[Ce().suiteId()[0],r,s].concat(i),(n=e.get(s))===null?e(s,function(){return t(r,u,o)}):n[1].isCanceled()?(e.invalidate(s),e(s,function(){return t(r,u,o)})):Is(n[1])}}(Nn)});function In(t,e){return"Incompatible params passed to test function. ".concat(t," must be a ").concat(e)}function Io(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(t=t.reverse())[0];t=t[1],yt($e(r),"vest.create: Expected callback to be a function.");var n=Ao(),s=oo();return t={stateRef:ao(s,{suiteId:us(),suiteName:t}),bus:n},it(ye.bind(t,function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return s.reset(),uo({type:mt.SUITE},function(){r.apply(void 0,i)}),n.emit(Fe.SUITE_CALLBACK_DONE_RUNNING),Ss()}),{get:ye.bind(t,Jr),remove:ye.bind(t,function(i){n.emit(Fe.REMOVE_FIELD,i)}),reset:s.reset,resetField:ye.bind(t,function(i){n.emit(Fe.RESET_FIELD,i)})})}function Ro(t){let e;return{c(){e=Xe("path"),this.h()},l(r){e=Qe(r,"path",{d:!0}),te(e).forEach($),this.h()},h(){G(e,"d","M256 105c-101.8 0-188.4 62.4-224 151 35.6 88.6 122.2 151 224 151s188.4-62.4 224-151c-35.6-88.6-122.2-151-224-151zm0 251.7c-56 0-101.8-45.3-101.8-100.7S200 155.3 256 155.3 357.8 200.6 357.8 256 312 356.7 256 356.7zm0-161.1c-33.6 0-61.1 27.2-61.1 60.4s27.5 60.4 61.1 60.4 61.1-27.2 61.1-60.4-27.5-60.4-61.1-60.4z")},m(r,n){K(r,e,n)},p:Ae,d(r){r&&$(e)}}}function Oo(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[Ro]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=Te(s,n[i]);return e=new ft({props:s}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,o){he(e,i,o),r=!0},p(i,[o]){const u=o&1?lt(n,[n[0],ct(i[0])]):{};o&2&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){de(e,i)}}}function xo(t,e,r){return t.$$set=n=>{r(0,e=Te(Te({},e),Ue(n)))},e=Ue(e),[e]}class Rs extends Se{constructor(e){super(),ke(this,e,xo,Oo,Ze,{})}}function Co(t){let e;return{c(){e=Xe("path"),this.h()},l(r){e=Qe(r,"path",{d:!0}),te(e).forEach($),this.h()},h(){G(e,"d","M256.1 144.8c56.2 0 101.9 45.3 101.9 101.1 0 13.1-2.6 25.5-7.3 37l59.5 59c30.8-25.5 55-58.4 69.9-96-35.3-88.7-122.3-151.6-224.2-151.6-28.5 0-55.8 5.1-81.1 14.1l44 43.7c11.6-4.6 24.1-7.3 37.3-7.3zM52.4 89.7l46.5 46.1 9.4 9.3c-33.9 26-60.4 60.8-76.3 100.8 35.2 88.7 122.2 151.6 224.1 151.6 31.6 0 61.7-6.1 89.2-17l8.6 8.5 59.7 59 25.9-25.7L78.2 64 52.4 89.7zM165 201.4l31.6 31.3c-1 4.2-1.6 8.7-1.6 13.1 0 33.5 27.3 60.6 61.1 60.6 4.5 0 9-.6 13.2-1.6l31.6 31.3c-13.6 6.7-28.7 10.7-44.8 10.7-56.2 0-101.9-45.3-101.9-101.1 0-15.8 4.1-30.7 10.8-44.3zm87.8-15.7l64.2 63.7.4-3.2c0-33.5-27.3-60.6-61.1-60.6l-3.5.1z")},m(r,n){K(r,e,n)},p:Ae,d(r){r&&$(e)}}}function Mo(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[Co]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=Te(s,n[i]);return e=new ft({props:s}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,o){he(e,i,o),r=!0},p(i,[o]){const u=o&1?lt(n,[n[0],ct(i[0])]):{};o&2&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){de(e,i)}}}function Uo(t,e,r){return t.$$set=n=>{r(0,e=Te(Te({},e),Ue(n)))},e=Ue(e),[e]}class Os extends Se{constructor(e){super(),ke(this,e,Uo,Mo,Ze,{})}}function Do(t){let e,r,n,s,i;return{c(){e=Xe("path"),r=ae(),n=Xe("path"),s=ae(),i=Xe("path"),this.h()},l(o){e=Qe(o,"path",{d:!0}),te(e).forEach($),r=ue(o),n=Qe(o,"path",{d:!0}),te(n).forEach($),s=ue(o),i=Qe(o,"path",{d:!0}),te(i).forEach($),this.h()},h(){G(e,"d","M352 115h90c3.3 0 6-2.7 6-6 0-8.2-3.7-16-10-21.3l-77.1-64.2c-4.9-4.1-14.2-7.4-20.6-7.4-4.1 0-7.4 3.3-7.4 7.4V96c.1 10.5 8.6 19 19.1 19z"),G(n,"d","M307 96V16H176c-17.6 0-32 14.4-32 32v336c0 17.6 14.4 32 32 32h240c17.6 0 32-14.4 32-32V141h-96c-24.8 0-45-20.2-45-45z"),G(i,"d","M116 412V80H96c-17.6 0-32 14.4-32 32v352c0 17.6 14.4 32 32 32h256c17.6 0 32-14.4 32-32v-20H148c-17.6 0-32-14.4-32-32z")},m(o,u){K(o,e,u),K(o,r,u),K(o,n,u),K(o,s,u),K(o,i,u)},p:Ae,d(o){o&&$(e),o&&$(r),o&&$(n),o&&$(s),o&&$(i)}}}function jo(t){let e,r;const n=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[Do]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=Te(s,n[i]);return e=new ft({props:s}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,o){he(e,i,o),r=!0},p(i,[o]){const u=o&1?lt(n,[n[0],ct(i[0])]):{};o&2&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){de(e,i)}}}function Fo(t,e,r){return t.$$set=n=>{r(0,e=Te(Te({},e),Ue(n)))},e=Ue(e),[e]}class xs extends Se{constructor(e){super(),ke(this,e,Fo,jo,Ze,{})}}function Lo(t){let e;return{c(){e=Xe("path"),this.h()},l(r){e=Qe(r,"path",{d:!0}),te(e).forEach($),this.h()},h(){G(e,"d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z")},m(r,n){K(r,e,n)},p:Ae,d(r){r&&$(e)}}}function Bo(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[Lo]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=Te(s,n[i]);return e=new ft({props:s}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,o){he(e,i,o),r=!0},p(i,[o]){const u=o&1?lt(n,[n[0],ct(i[0])]):{};o&2&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){de(e,i)}}}function $o(t,e,r){return t.$$set=n=>{r(0,e=Te(Te({},e),Ue(n)))},e=Ue(e),[e]}class Cs extends Se{constructor(e){super(),ke(this,e,$o,Bo,Ze,{})}}function qo(t){let e,r,n;return{c(){e=Q("input"),this.h()},l(s){e=Z(s,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){G(e,"id",t[2]),G(e,"name",t[3]),G(e,"class","as-input as-flex-1"),G(e,"type","password"),G(e,"placeholder","Enter a Password"),e.disabled=t[5]},m(s,i){K(s,e,i),Ie(e,t[0]),r||(n=[ge(e,"input",t[10]),ge(e,"input",function(){Ct(t[4])&&t[4].apply(this,arguments)})],r=!0)},p(s,i){t=s,i&4&&G(e,"id",t[2]),i&8&&G(e,"name",t[3]),i&32&&(e.disabled=t[5]),i&1&&e.value!==t[0]&&Ie(e,t[0])},d(s){s&&$(e),r=!1,Ke(n)}}}function Vo(t){let e,r,n;return{c(){e=Q("input"),this.h()},l(s){e=Z(s,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){G(e,"id",t[2]),G(e,"name",t[3]),G(e,"class","as-input as-flex-1"),G(e,"type","text"),G(e,"placeholder","Enter a Password"),e.disabled=t[5]},m(s,i){K(s,e,i),Ie(e,t[0]),r||(n=[ge(e,"input",t[9]),ge(e,"input",function(){Ct(t[4])&&t[4].apply(this,arguments)})],r=!0)},p(s,i){t=s,i&4&&G(e,"id",t[2]),i&8&&G(e,"name",t[3]),i&32&&(e.disabled=t[5]),i&1&&e.value!==t[0]&&Ie(e,t[0])},d(s){s&&$(e),r=!1,Ke(n)}}}function Go(t){let e,r;return e=new Os({}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function Ho(t){let e,r;return e=new Rs({}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function Wo(t){let e,r,n,s,i,o,u,c,g,_,y,k,w,v,b,T,E,I;function A(N,S){return N[1]?Vo:qo}let U=A(t),C=U(t);o=new Cs({}),_=new xs({});const a=[Ho,Go],m=[];function p(N,S){return N[1]?0:1}return v=p(t),b=m[v]=a[v](t),{c(){e=Q("div"),C.c(),r=ae(),n=Q("div"),s=Q("button"),i=Q("div"),ce(o.$$.fragment),u=ae(),c=Q("button"),g=Q("div"),ce(_.$$.fragment),y=ae(),k=Q("button"),w=Q("div"),b.c(),this.h()},l(N){e=Z(N,"DIV",{class:!0});var S=te(e);C.l(S),r=ue(S),n=Z(S,"DIV",{class:!0});var M=te(n);s=Z(M,"BUTTON",{class:!0});var J=te(s);i=Z(J,"DIV",{class:!0});var H=te(i);fe(o.$$.fragment,H),H.forEach($),J.forEach($),u=ue(M),c=Z(M,"BUTTON",{class:!0});var q=te(c);g=Z(q,"DIV",{class:!0});var R=te(g);fe(_.$$.fragment,R),R.forEach($),q.forEach($),y=ue(M),k=Z(M,"BUTTON",{class:!0});var j=te(k);w=Z(j,"DIV",{class:!0});var f=te(w);b.l(f),f.forEach($),j.forEach($),M.forEach($),S.forEach($),this.h()},h(){G(i,"class","as-w-5 as-h-5"),G(s,"class","as-btn as-primary as-p-2"),Be(s,"opacity-50",!t[5]),G(g,"class","as-w-5 as-h-5"),G(c,"class","as-btn as-primary as-p-2"),G(w,"class","as-w-5 as-h-5"),G(k,"class","as-btn as-primary as-p-2"),G(n,"class","as-grow-0 as-flex-row as-flex"),G(e,"class","as-flex")},m(N,S){K(N,e,S),C.m(e,null),X(e,r),X(e,n),X(n,s),X(s,i),he(o,i,null),X(n,u),X(n,c),X(c,g),he(_,g,null),X(n,y),X(n,k),X(k,w),m[v].m(w,null),T=!0,E||(I=[ge(s,"click",t[8]),ge(c,"click",t[7]),ge(k,"click",t[6])],E=!0)},p(N,[S]){U===(U=A(N))&&C?C.p(N,S):(C.d(1),C=U(N),C&&(C.c(),C.m(e,r))),S&32&&Be(s,"opacity-50",!N[5]);let M=v;v=p(N),v!==M&&(Ge(),se(m[M],1,1,()=>{m[M]=null}),He(),b=m[v],b||(b=m[v]=a[v](N),b.c()),ne(b,1),b.m(w,null))},i(N){T||(ne(o.$$.fragment,N),ne(_.$$.fragment,N),ne(b),T=!0)},o(N){se(o.$$.fragment,N),se(_.$$.fragment,N),se(b),T=!1},d(N){N&&$(e),C.d(),de(o),de(_),m[v].d(),E=!1,Ke(I)}}}function Jo(t,e,r){let{id:n=void 0}=e,{name:s=void 0}=e,{password:i}=e,{onInput:o=()=>{}}=e,{show:u=!1}=e;function c(){r(1,u=!u),u===!1&&r(5,_=!0)}async function g(){navigator.clipboard.writeText(i)}let _=!u;function y(){r(5,_=!_),_===!1&&r(1,u=!0)}function k(){i=this.value,r(0,i)}function w(){i=this.value,r(0,i)}return t.$$set=v=>{"id"in v&&r(2,n=v.id),"name"in v&&r(3,s=v.name),"password"in v&&r(0,i=v.password),"onInput"in v&&r(4,o=v.onInput),"show"in v&&r(1,u=v.show)},[i,u,n,s,o,_,c,g,y,k,w]}class Ms extends Se{constructor(e){super(),ke(this,e,Jo,Wo,De,{id:2,name:3,password:0,onInput:4,show:1})}}function Rn(t,e,r){const n=t.slice();return n[1]=e[r],n}function On(t){let e,r=t[1]+"",n;return{c(){e=Q("li"),n=we(r),this.h()},l(s){e=Z(s,"LI",{class:!0});var i=te(e);n=Ee(i,r),i.forEach($),this.h()},h(){G(e,"class","as-text-red-500")},m(s,i){K(s,e,i),X(e,n)},p(s,i){i&1&&r!==(r=s[1]+"")&&It(n,r)},d(s){s&&$(e)}}}function zo(t){let e,r=t[0],n=[];for(let s=0;s<r.length;s+=1)n[s]=On(Rn(t,r,s));return{c(){e=Q("ul");for(let s=0;s<n.length;s+=1)n[s].c()},l(s){e=Z(s,"UL",{});var i=te(e);for(let o=0;o<n.length;o+=1)n[o].l(i);i.forEach($)},m(s,i){K(s,e,i);for(let o=0;o<n.length;o+=1)n[o].m(e,null)},p(s,[i]){if(i&1){r=s[0];let o;for(o=0;o<r.length;o+=1){const u=Rn(s,r,o);n[o]?n[o].p(u,i):(n[o]=On(u),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},i:Ae,o:Ae,d(s){s&&$(e),Js(n,s)}}}function Yo(t,e,r){let{messages:n=[]}=e;return t.$$set=s=>{"messages"in s&&r(0,n=s.messages)},[n]}class Lt extends Se{constructor(e){super(),ke(this,e,Yo,zo,De,{messages:0})}}const zr={},Gt={};class ur{constructor(e,r){if(e!==zr)throw new TypeError("Options can only be created with the some or none functions");this._value=r}static some(e){return xe(e)}static none(){return Oe()}static from(e){return e!=null?xe(e):Oe()}static fromJSON(e){return ur.from(e)}isNone(){return this._value===Gt}isSome(){return!this.isNone()}expect(e){if(this.isSome())return this._value;throw new Error(typeof e=="function"?e():e)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(e){return this.isSome()?this._value:e}unwrapOrElse(e){return this.isSome()?this._value:e()}map(e){return this.isSome()?xe(e(this._value)):Oe()}mapOr(e,r){return this.isSome()?xe(e(this._value)):xe(r)}mapOrElse(e,r){return this.isSome()?xe(e(this._value)):xe(r())}flatMap(e){return this.isSome()?e(this._value):Oe()}flatMapOr(e,r){return this.isSome()?e(this._value):r}flatMapOrElse(e,r){return this.isSome()?e(this._value):r()}and(e){return this.isSome()?e:Oe()}andThen(e){return this.isSome()?e(this._value):Oe()}or(e){return this.isNone()?e:this}orElse(e){return this.isNone()?e():this}xor(e){const r=this.isSome(),n=e.isSome();return r&&!n?this:!r&&n?e:Oe()}filter(e){return this.isSome()&&e(this._value)?this:Oe()}getOrInsert(e){return this.isNone()&&(this._value=e),this}getOrInsertWith(e){return this.isNone()&&(this._value=e()),this}clear(){return this._value=Gt,this}take(){if(this.isSome()){const e=this._value;return this._value=Gt,xe(e)}else return Oe()}from(e){return e!=null?this._value=e:this.clear(),this}replace(e){return this._value=e,this}ifSome(e,r){return this.isSome()?e(this._value):r&&r(),this}ifNone(e,r){return this.isNone()?e():r&&r(this._value),this}toJSON(){return this.unwrapOr(null)}toJS(){return this.unwrapOr(null)}}const xe=t=>new ur(zr,t),Oe=()=>new ur(zr,Gt);class _e{constructor(e){this._index=0,this._iter=e}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const e=this._iter.next();return e.done?e:{value:[e.value,this._index++]}}enumerate(){throw new Error("iter/Enumerate was not imported!")}peekable(){throw new Error("iter/Peekable was not imported!")}forEach(e){throw new Error("iter/ForEach was not imported!")}map(e){throw new Error("iter/Map was not imported!")}merge(e){throw new Error("iter/Merge was not imported!")}concat(e){return this.merge(e)}filter(e){throw new Error("iter/Filter was not imported!")}step(e){throw new Error("iter/Step was not imported!")}skip(e){throw new Error("iter/Skip was not imported!")}take(e){throw new Error("iter/Take was not imported!")}toMap(e,r){throw new Error("iter/ToMap was not imported!")}count(){return this.reduce(0,e=>e+1)}consume(){let e=this.next();for(;!e.done;)e=this.next();return this}toArray(){return this.reduce([],(e,r)=>(e.push(r),e))}join(e){return this.toArray().join(e)}indexOf(e){let r=this.next(),n=0;for(;!r.done;){if(r.value===e)return n;n++,r=this.next()}return-1}findIndex(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(e(n,s))return s;r=this.nextWithIndex()}return-1}find(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(e(n,s))return xe(n);r=this.nextWithIndex()}return Oe()}findAll(e){return this.filter(e)}nth(e=0){let r=this.next();for(e<0&&(e=0);!r.done;){if(e--<=0)return xe(r.value);r=this.next()}return Oe()}first(){return this.nth(0)}last(){let e=this.next();for(;!e.done;){const r=this.next();if(r.done)return xe(e.value);e=r}return Oe()}any(e){return this.findIndex(e)!==-1}some(e){return this.any(e)}none(e){return this.findIndex(e)===-1}all(e){let r=this.nextWithIndex();for(;!r.done;){const[n,s]=r.value;if(!e(n,s))return!1;r=this.nextWithIndex()}return!0}unflatten(e){throw new Error("iter/Unflatten was not imported!")}reduce(e,r){let n=this.next();for(;!n.done;){const s=n.value;e=r(e,s,this._index-1),n=this.next()}return e}reverse(){return Ht(this.toArray().reverse())}}function Ht(t){return t!=null?typeof t[Symbol.iterator]=="function"?new _e(t[Symbol.iterator]()):typeof t.next=="function"?t instanceof _e?t:new _e(t):Ht(typeof t=="object"?Object.entries(t):[t]):Ht([])}class Ko extends _e{constructor(e){super(e)}next(){const e=super.nextWithIndex();return e.done?e:{value:Xo(e.value)}}}_e.prototype.enumerate=function(){return new Ko(this)};function Xo(t){const e=t[0],r=t;return r[0]=t[1],r[1]=e,r}class Qo extends _e{constructor(e,r){super(e),this._fn=r}next(){let e=super.nextWithIndex();for(;!e.done;){const[r,n]=e.value;if(this._fn(r,n))return{done:!1,value:r};e=super.nextWithIndex()}return{done:!0,value:void 0}}}_e.prototype.filter=function(e){return new Qo(this,e)};class Zo extends _e{constructor(e,r){super(e),this._fn=([n,s])=>(r(n,s),n)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}_e.prototype.forEach=function(e){return new Zo(this,e)};class ea extends _e{constructor(e,r){super(e),this._fn=([n,s])=>r(n,s)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}_e.prototype.map=function(e){return new ea(this,e)};class ta extends _e{constructor(e,r){super(e),this._other=r}next(){const e=super.next();return e.done?this._other.next():e}}_e.prototype.merge=function(e){return new ta(this,e)};class ra extends _e{constructor(){super(...arguments),this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?xe(this.peeked.shift()):Oe()}peek(e=0){if(e<this.peeked.length)return xe(this.peeked[e]);{let r=this.peeked.length-e-1,n=super.next();for(;!n.done&&(this.peeked.push(n.value),!(--r<=0));)n=super.next();return n.done?Oe():xe(n.value)}}next(){const e=this.unpeek();if(e.isSome())return{done:!1,value:e.unwrap()};const r=super.next();return r.done?r:{done:!1,value:r.value}}}_e.prototype.peekable=function(){return new ra(this)};class na extends _e{constructor(e,r){super(e),this._skipped=0,this._skip=(r<=0?0:r)|0}next(){let e=super.next();for(;!e.done;)if(this._skipped<=this._skip)this._skipped+=1,e=super.next();else return e;return{done:!0,value:void 0}}}_e.prototype.skip=function(t){return new na(this,t)};class sa extends _e{constructor(e,r){super(e),this._stepped=0,this._step=r<=0?1:r|0}next(){let e=super.next();for(;!e.done;)if(this._stepped<this._step)this._stepped+=1,e=super.next();else return this._stepped=0,e;return{done:!0,value:void 0}}}_e.prototype.step=function(t){return new sa(this,t)};class ia extends _e{constructor(e,r){super(e),this._taken=0,this._count=(r<=0?0:r)|0}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}_e.prototype.take=function(e){return new ia(this,e)};const oa=t=>t,aa=t=>t;class ua extends _e{constructor(e,r=oa,n=aa){super(e),this._map=([s,i])=>[r(s,i),n(s,i)]}toObject(){return this.reduce({},(e,r)=>(e[r[0]]=r[1],e))}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._map(e.value)}}}_e.prototype.toMap=function(e,r){return new ua(this,e,r)};class la extends _e{constructor(e,r){super(e),this._fn=r}next(){return this._fn(this._iter)}}_e.prototype.unflatten=function(e){return new la(this,e)};var dt;(function(t){t[t.Forward=0]="Forward",t[t.Backward=1]="Backward"})(dt||(dt={}));class Yr{constructor(e,r,n=1){this.start=e!==e?0:e,this.end=r!==r?this.start-1:r,this.step=n!==n?1:Math.abs(n),this.direction=e>r?dt.Backward:dt.Forward}static from(e,r,n=1){return new Yr(e,r,n)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(e){return this.start<=e&&e<=this.end}isEmpty(){return this.direction===dt.Forward?this.start>this.end:this.start<this.end}iter(){return new _e(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===dt.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}const ca=Yr.from;function Us(t,e){return t[0]=(e&4278190080)>>24,t[1]=(e&16711680)>>16,t[2]=(e&65280)>>8,t[3]=e&255,t}const tt=Math.pow(2,31)-1|0;class fa extends _e{constructor(e){super(e),this.rng=e}iter(){return new _e(this)}next(){return{done:!1,value:this.rng.nextFloat()}}}class ha extends _e{constructor(e,r=0,n=1){super(e),this.rng=e,this.min=r,this.max=n}iter(){return new _e(this)}nextFloat(){return this.rng.nextFloatInRange(this.min,this.max)}next(){return{done:!1,value:this.nextFloat()}}}class da extends _e{constructor(e,r=0,n=tt){super(e),this.rng=e,this.min=r|0,this.max=n|0}iter(){return new _e(this)}nextInt(){return this.rng.nextIntInRange(this.min,this.max)}next(){return{done:!1,value:this.nextInt()}}}const pa=new Uint8Array(4);class Kr{nextFloat(){return this.nextInt()/tt}nextFloatInRange(e=0,r=1){return e+this.nextFloat()*(r-e)}nextIntInRange(e=0,r=tt){return Math.round(this.nextFloatInRange(e,r))}shuffle(e){const r=e.length;for(let n=0;n<r;n++){const s=n+this.nextIntInRange(0,r-n-1),i=e[n];e[n]=e[s],e[s]=i}return e}fromArray(e){return e.length?xe(e[this.nextIntInRange(0,e.length-1)]):Oe()}keyFromObject(e){return this.fromArray(Object.keys(e))}valueFromObject(e){return this.fromArray(Object.values(e))}fillBytes(e){const r=pa;for(let n=0,s=e.length;n<s;n++){const i=n%4;i===0&&Us(r,this.nextInt()),e[n]=r[i]}return e}[Symbol.iterator](){return this}iter(){return new _e(this)}next(){return{done:!1,value:this.nextInt()}}float(){return new fa(this)}uniformFloat(e=0,r=1){return new ha(this,e,r)}uniformInt(e=0,r=tt){return new da(this,e,r)}}let Wt,Pr;if(typeof crypto!="undefined"&&crypto.getRandomValues){const t=new Uint32Array(1);Wt=()=>crypto.getRandomValues(t)[0]%tt,Pr=e=>crypto.getRandomValues(Array.isArray(e)?new Uint8Array(e):e)}else{const t=new Uint8Array(4);Wt=()=>Math.random()*tt|0,Pr=e=>{const r=t;for(let n=0,s=e.length;n<s;n++){const i=n%4;i===0&&Us(r,Wt()),e[n]=r[i]}return e}}class ma extends Kr{nextInt(){return Wt()}fillBytes(e){return Pr(e)}}class Ds extends Kr{constructor(e=423257940){super(),this.seed=e}setSeed(e=423257940){return this.seed=e,this}nextInt(){return this.seed=Math.imul(48271,this.seed)|0%tt,this.seed&tt}}const ga=new Ds;class Xr extends Kr{constructor(e,r,n,s){super(),this.x=423257940,this.y=2829571177,this.z=2541948421,this.w=289122235,this.set(e,r,n,s)}static fromSeed(e){return new Xr().setSeed(e)}setSeed(e){const r=ga.setSeed(e);return this.set(r.nextInt(),r.nextInt(),r.nextInt(),r.nextInt())}set(e=423257940,r=2829571177,n=2541948421,s=289122235){return this.x=e|0,this.y=r|0,this.z=n|0,this.w=s|0,this}nextInt(){const e=this.x,r=e^e<<11;this.x=this.y,this.y=this.z,this.z=this.w;const n=this.w;return this.w=n^n>>19^(r^r>>8),this.w}}new Ds;new Xr;const Bt={length:16,includeSymbols:!0,excludeSimilarCharacters:!1,excludeAmbiguousCharacters:!1};function ya(t={}){const e=Math.max(6,t.length||Bt.length),r=t.includeSymbols!=null?t.includeSymbols:Bt.includeSymbols,n=t.excludeSimilarCharacters!=null?t.excludeSimilarCharacters:Bt.excludeSimilarCharacters,s=t.excludeAmbiguousCharacters!=null?t.excludeAmbiguousCharacters:Bt.excludeAmbiguousCharacters,i=new ma;return ca(0,e).iter().map(()=>Tr(i,r,n,s)).join("")}const va="il1Lo0O".split(""),_a="{}[]()/\\'\"`~,;:.<>".split("");function Tr(t,e,r,n){let s=e&&t.nextFloat()>.75?wa(t):Pa(t);return r&&va.includes(s)&&(s=Tr(t,e,r,n)),n&&_a.includes(s)&&(s=Tr(t,e,r,n)),s}const ba="`~!@#$%^&*()-_+={}[]|:;<>,.\\/?".split("").sort(()=>Math.random()>.5?-1:1);function wa(t){return t.fromArray(ba).unwrap()}const Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("").sort(()=>Math.random()>.5?-1:1);function Pa(t){return t.fromArray(Ea).unwrap()}function Ta(t){let e,r,n,s,i,o,u,c,g,_,y,k,w,v,b,T,E,I;return{c(){e=Q("label"),r=we("Symbols?"),n=ae(),s=Q("input"),i=ae(),o=Q("label"),u=we("Exclude Similar?"),c=ae(),g=Q("input"),_=ae(),y=Q("label"),k=we("Exclude Ambiguous?"),w=ae(),v=Q("input"),b=ae(),T=Q("input"),this.h()},l(A){e=Z(A,"LABEL",{for:!0});var U=te(e);r=Ee(U,"Symbols?"),U.forEach($),n=ue(A),s=Z(A,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),i=ue(A),o=Z(A,"LABEL",{for:!0});var C=te(o);u=Ee(C,"Exclude Similar?"),C.forEach($),c=ue(A),g=Z(A,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),_=ue(A),y=Z(A,"LABEL",{for:!0});var a=te(y);k=Ee(a,"Exclude Ambiguous?"),a.forEach($),w=ue(A),v=Z(A,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),b=ue(A),T=Z(A,"INPUT",{id:!0,class:!0,type:!0,min:!0,placeholder:!0}),this.h()},h(){G(e,"for","includeSymbols"),G(s,"id","includeSymbols"),G(s,"type","checkbox"),G(s,"class","as-checkbox"),G(s,"placeholder","Length"),G(o,"for","excludeSimilarCharacters"),G(g,"id","excludeSimilarCharacters"),G(g,"type","checkbox"),G(g,"class","as-checkbox"),G(g,"placeholder","Length"),G(y,"for","excludeAmbiguousCharacters"),G(v,"id","excludeAmbiguousCharacters"),G(v,"type","checkbox"),G(v,"class","as-checkbox"),G(v,"placeholder","Length"),G(T,"id","length"),G(T,"class","as-input"),G(T,"type","number"),G(T,"min",6),G(T,"placeholder","Length")},m(A,U){K(A,e,U),X(e,r),K(A,n,U),K(A,s,U),s.checked=t[1],K(A,i,U),K(A,o,U),X(o,u),K(A,c,U),K(A,g,U),g.checked=t[2],K(A,_,U),K(A,y,U),X(y,k),K(A,w,U),K(A,v,U),v.checked=t[3],K(A,b,U),K(A,T,U),Ie(T,t[0]),E||(I=[ge(s,"change",t[5]),ge(g,"change",t[6]),ge(v,"change",t[7]),ge(T,"input",t[8])],E=!0)},p(A,[U]){U&2&&(s.checked=A[1]),U&4&&(g.checked=A[2]),U&8&&(v.checked=A[3]),U&1&&qn(T.value)!==A[0]&&Ie(T,A[0])},i:Ae,o:Ae,d(A){A&&$(e),A&&$(n),A&&$(s),A&&$(i),A&&$(o),A&&$(c),A&&$(g),A&&$(_),A&&$(y),A&&$(w),A&&$(v),A&&$(b),A&&$(T),E=!1,Ke(I)}}}function Sa(t,e,r){function n(){return ya({length:s,includeSymbols:i,excludeSimilarCharacters:o,excludeAmbiguousCharacters:u})}let s=16,i=!0,o=!1,u=!1;function c(){i=this.checked,r(1,i)}function g(){o=this.checked,r(2,o)}function _(){u=this.checked,r(3,u)}function y(){s=qn(this.value),r(0,s)}return[s,i,o,u,n,c,g,_,y]}class ka extends Se{constructor(e){super(),ke(this,e,Sa,Ta,De,{generate:4})}get generate(){return this.$$.ctx[4]}}function Aa(t){let e;return{c(){e=Xe("path"),this.h()},l(r){e=Qe(r,"path",{d:!0}),te(e).forEach($),this.h()},h(){G(e,"d","M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z")},m(r,n){K(r,e,n)},p:Ae,d(r){r&&$(e)}}}function Na(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[Aa]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=Te(s,n[i]);return e=new ft({props:s}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,o){he(e,i,o),r=!0},p(i,[o]){const u=o&1?lt(n,[n[0],ct(i[0])]):{};o&2&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){de(e,i)}}}function Ia(t,e,r){return t.$$set=n=>{r(0,e=Te(Te({},e),Ue(n)))},e=Ue(e),[e]}class Ra extends Se{constructor(e){super(),ke(this,e,Ia,Na,Ze,{})}}function Oa(t){let e;return{c(){e=Q("input"),this.h()},l(r){e=Z(r,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){G(e,"id",t[2]),G(e,"name",t[3]),G(e,"class","as-input as-flex-1"),G(e,"type","password"),G(e,"placeholder","Hidden"),e.disabled=t[5]},m(r,n){K(r,e,n)},p(r,n){n&4&&G(e,"id",r[2]),n&8&&G(e,"name",r[3]),n&32&&(e.disabled=r[5])},d(r){r&&$(e)}}}function xa(t){let e,r,n;return{c(){e=Q("textarea"),this.h()},l(s){e=Z(s,"TEXTAREA",{id:!0,name:!0,rows:!0,class:!0,type:!0,placeholder:!0}),te(e).forEach($),this.h()},h(){G(e,"id",t[2]),G(e,"name",t[3]),G(e,"rows",8),G(e,"class","as-textarea as-flex-1 as-max-h-32 as-resize-none"),G(e,"type","text"),G(e,"placeholder","Enter a Password"),e.disabled=t[5]},m(s,i){K(s,e,i),Ie(e,t[0]),r||(n=[ge(e,"input",t[13]),ge(e,"input",function(){Ct(t[4])&&t[4].apply(this,arguments)})],r=!0)},p(s,i){t=s,i&4&&G(e,"id",t[2]),i&8&&G(e,"name",t[3]),i&32&&(e.disabled=t[5]),i&1&&Ie(e,t[0])},d(s){s&&$(e),r=!1,Ke(n)}}}function Ca(t){let e,r;return e=new Os({}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function Ma(t){let e,r;return e=new Rs({}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function Ua(t){let e,r,n,s,i,o,u,c,g,_,y,k,w,v,b,T,E,I,A,U,C,a,m,p;function N(R,j){return R[1]?xa:Oa}let S=N(t),M=S(t);c=new Ra({}),k=new Cs({}),T=new xs({});const J=[Ma,Ca],H=[];function q(R,j){return R[1]?0:1}return U=q(t),C=H[U]=J[U](t),{c(){e=Q("div"),M.c(),r=ae(),n=Q("div"),s=Q("button"),i=Q("input"),o=ae(),u=Q("div"),ce(c.$$.fragment),g=ae(),_=Q("button"),y=Q("div"),ce(k.$$.fragment),w=ae(),v=Q("button"),b=Q("div"),ce(T.$$.fragment),E=ae(),I=Q("button"),A=Q("div"),C.c(),this.h()},l(R){e=Z(R,"DIV",{class:!0});var j=te(e);M.l(j),r=ue(j),n=Z(j,"DIV",{class:!0});var f=te(n);s=Z(f,"BUTTON",{class:!0});var d=te(s);i=Z(d,"INPUT",{type:!0}),o=ue(d),u=Z(d,"DIV",{class:!0});var O=te(u);fe(c.$$.fragment,O),O.forEach($),d.forEach($),g=ue(f),_=Z(f,"BUTTON",{class:!0});var D=te(_);y=Z(D,"DIV",{class:!0});var x=te(y);fe(k.$$.fragment,x),x.forEach($),D.forEach($),w=ue(f),v=Z(f,"BUTTON",{class:!0});var z=te(v);b=Z(z,"DIV",{class:!0});var W=te(b);fe(T.$$.fragment,W),W.forEach($),z.forEach($),E=ue(f),I=Z(f,"BUTTON",{class:!0});var Y=te(I);A=Z(Y,"DIV",{class:!0});var B=te(A);C.l(B),B.forEach($),Y.forEach($),f.forEach($),j.forEach($),this.h()},h(){G(i,"type","file"),i.multiple=!1,i.hidden=!0,G(u,"class","as-w-5 as-h-5"),G(s,"class","as-btn as-primary as-p-2"),G(y,"class","as-w-5 as-h-5"),G(_,"class","as-btn as-primary as-p-2"),Be(_,"as-secondary",!t[5]),G(b,"class","as-w-5 as-h-5"),G(v,"class","as-btn as-primary as-p-2"),G(A,"class","as-w-5 as-h-5"),G(I,"class","as-btn as-primary as-p-2"),G(n,"class","as-absolute as-top-0 as-right-0 as-flex-row as-flex"),G(e,"class","as-flex as-relative")},m(R,j){K(R,e,j),M.m(e,null),X(e,r),X(e,n),X(n,s),X(s,i),t[14](i),X(s,o),X(s,u),he(c,u,null),X(n,g),X(n,_),X(_,y),he(k,y,null),X(n,w),X(n,v),X(v,b),he(T,b,null),X(n,E),X(n,I),X(I,A),H[U].m(A,null),a=!0,m||(p=[ge(i,"input",t[11]),ge(s,"click",t[10]),ge(_,"click",t[9]),ge(v,"click",t[8]),ge(I,"click",t[7])],m=!0)},p(R,[j]){S===(S=N(R))&&M?M.p(R,j):(M.d(1),M=S(R),M&&(M.c(),M.m(e,r))),j&32&&Be(_,"as-secondary",!R[5]);let f=U;U=q(R),U!==f&&(Ge(),se(H[f],1,1,()=>{H[f]=null}),He(),C=H[U],C||(C=H[U]=J[U](R),C.c()),ne(C,1),C.m(A,null))},i(R){a||(ne(c.$$.fragment,R),ne(k.$$.fragment,R),ne(T.$$.fragment,R),ne(C),a=!0)},o(R){se(c.$$.fragment,R),se(k.$$.fragment,R),se(T.$$.fragment,R),se(C),a=!1},d(R){R&&$(e),M.d(),t[14](null),de(c),de(k),de(T),H[U].d(),m=!1,Ke(p)}}}function Da(t,e,r){let{id:n=void 0}=e,{name:s=void 0}=e,{text:i}=e,{onUploadFile:o=()=>{}}=e,{onInput:u=()=>{}}=e,{show:c=!1}=e;function g(){r(1,c=!c),c===!1&&r(5,y=!0)}async function _(){navigator.clipboard.writeText(i)}let y=!c;function k(){r(5,y=!y),y===!1&&r(1,c=!0)}let w;function v(){w.click()}function b(I){if(!I.currentTarget.files)return;const A=I.currentTarget.files[0];if(A){const U=new FileReader;U.onload=C=>{var a;r(0,i=(a=C.target)==null?void 0:a.result),o(i)},U.readAsText(A)}}function T(){i=this.value,r(0,i)}function E(I){ze[I?"unshift":"push"](()=>{w=I,r(6,w)})}return t.$$set=I=>{"id"in I&&r(2,n=I.id),"name"in I&&r(3,s=I.name),"text"in I&&r(0,i=I.text),"onUploadFile"in I&&r(12,o=I.onUploadFile),"onInput"in I&&r(4,u=I.onInput),"show"in I&&r(1,c=I.show)},[i,c,n,s,u,y,w,g,_,k,v,b,o,T,E]}class js extends Se{constructor(e){super(),ke(this,e,Da,Ua,De,{id:2,name:3,text:0,onUploadFile:12,onInput:4,show:1})}}function ja(t){let e,r,n,s,i,o;function u(g){t[18](g)}let c={id:"text",name:"secret",show:!0,onInput:t[7],onUploadFile:t[9]};return t[4]!==void 0&&(c.text=t[4]),s=new js({props:c}),ze.push(()=>rt(s,"text",u)),{c(){e=Q("label"),r=we("Text"),n=ae(),ce(s.$$.fragment),this.h()},l(g){e=Z(g,"LABEL",{for:!0});var _=te(e);r=Ee(_,"Text"),_.forEach($),n=ue(g),fe(s.$$.fragment,g),this.h()},h(){G(e,"for","text")},m(g,_){K(g,e,_),X(e,r),K(g,n,_),he(s,g,_),o=!0},p(g,_){const y={};!i&&_&16&&(i=!0,y.text=g[4],nt(()=>i=!1)),s.$set(y)},i(g){o||(ne(s.$$.fragment,g),o=!0)},o(g){se(s.$$.fragment,g),o=!1},d(g){g&&$(e),g&&$(n),de(s,g)}}}function Fa(t){let e,r,n,s,i,o,u,c;function g(k){t[16](k)}let _={id:"password",name:"secret",show:!0,onInput:t[7]};t[4]!==void 0&&(_.password=t[4]),s=new Ms({props:_}),ze.push(()=>rt(s,"password",g));let y={};return u=new ka({props:y}),t[17](u),{c(){e=Q("label"),r=we("Password"),n=ae(),ce(s.$$.fragment),o=ae(),ce(u.$$.fragment),this.h()},l(k){e=Z(k,"LABEL",{for:!0});var w=te(e);r=Ee(w,"Password"),w.forEach($),n=ue(k),fe(s.$$.fragment,k),o=ue(k),fe(u.$$.fragment,k),this.h()},h(){G(e,"for","password")},m(k,w){K(k,e,w),X(e,r),K(k,n,w),he(s,k,w),K(k,o,w),he(u,k,w),c=!0},p(k,w){const v={};!i&&w&16&&(i=!0,v.password=k[4],nt(()=>i=!1)),s.$set(v);const b={};u.$set(b)},i(k){c||(ne(s.$$.fragment,k),ne(u.$$.fragment,k),c=!0)},o(k){se(s.$$.fragment,k),se(u.$$.fragment,k),c=!1},d(k){k&&$(e),k&&$(n),de(s,k),k&&$(o),t[17](null),de(u,k)}}}function La(t){let e,r,n,s,i;return{c(){e=Q("div"),r=Q("button"),n=we("Add"),this.h()},l(o){e=Z(o,"DIV",{class:!0});var u=te(e);r=Z(u,"BUTTON",{class:!0});var c=te(r);n=Ee(c,"Add"),c.forEach($),u.forEach($),this.h()},h(){G(r,"class","as-btn as-primary"),r.disabled=t[6],G(e,"class","as-flex as-justify-end as-mt-6")},m(o,u){K(o,e,u),X(e,r),X(r,n),s||(i=ge(r,"click",t[11]),s=!0)},p(o,u){u&64&&(r.disabled=o[6])},d(o){o&&$(e),s=!1,i()}}}function Ba(t){let e,r,n,s,i,o,u,c;return{c(){e=Q("div"),r=Q("button"),n=we("Generate"),s=ae(),i=Q("button"),o=we("Add"),this.h()},l(g){e=Z(g,"DIV",{class:!0});var _=te(e);r=Z(_,"BUTTON",{class:!0});var y=te(r);n=Ee(y,"Generate"),y.forEach($),s=ue(_),i=Z(_,"BUTTON",{class:!0});var k=te(i);o=Ee(k,"Add"),k.forEach($),_.forEach($),this.h()},h(){G(r,"class","as-btn as-primary"),G(i,"class","as-btn as-primary"),i.disabled=t[6],G(e,"class","as-flex as-justify-between as-mt-6")},m(g,_){K(g,e,_),X(e,r),X(r,n),X(e,s),X(e,i),X(i,o),u||(c=[ge(r,"click",t[10]),ge(i,"click",t[11])],u=!0)},p(g,_){_&64&&(i.disabled=g[6])},d(g){g&&$(e),u=!1,Ke(c)}}}function $a(t){let e,r,n,s,i,o,u,c,g,_,y,k,w,v,b,T,E,I,A,U,C,a,m,p,N,S,M,J,H,q,R,j,f,d;o=new Lt({props:{messages:t[1].getErrors("application")}}),w=new Lt({props:{messages:t[1].getErrors("username")}}),p=new Lt({props:{messages:t[1].getErrors("type")}});const O=[Fa,ja],D=[];function x(B,ee){return B[2]==="password"?0:B[2]==="text"?1:-1}~(S=x(t))&&(M=D[S]=O[S](t)),H=new Lt({props:{messages:t[1].getErrors("secret")}});function z(B,ee){return B[2]==="password"?Ba:La}let W=z(t),Y=W(t);return{c(){e=Q("label"),r=we("Application or URL"),n=ae(),s=Q("input"),i=ae(),ce(o.$$.fragment),u=ae(),c=Q("label"),g=we("Username"),_=ae(),y=Q("input"),k=ae(),ce(w.$$.fragment),v=ae(),b=Q("label"),T=we("Secret Type"),E=ae(),I=Q("select"),A=Q("option"),U=we("Password"),C=Q("option"),a=we("Text"),m=ae(),ce(p.$$.fragment),N=ae(),M&&M.c(),J=ae(),ce(H.$$.fragment),q=ae(),Y.c(),R=Re(),this.h()},l(B){e=Z(B,"LABEL",{for:!0});var ee=te(e);r=Ee(ee,"Application or URL"),ee.forEach($),n=ue(B),s=Z(B,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),i=ue(B),fe(o.$$.fragment,B),u=ue(B),c=Z(B,"LABEL",{for:!0});var me=te(c);g=Ee(me,"Username"),me.forEach($),_=ue(B),y=Z(B,"INPUT",{id:!0,name:!0,class:!0,type:!0,placeholder:!0}),k=ue(B),fe(w.$$.fragment,B),v=ue(B),b=Z(B,"LABEL",{for:!0});var pe=te(b);T=Ee(pe,"Secret Type"),pe.forEach($),E=ue(B),I=Z(B,"SELECT",{id:!0,class:!0});var oe=te(I);A=Z(oe,"OPTION",{});var l=te(A);U=Ee(l,"Password"),l.forEach($),C=Z(oe,"OPTION",{});var h=te(C);a=Ee(h,"Text"),h.forEach($),oe.forEach($),m=ue(B),fe(p.$$.fragment,B),N=ue(B),M&&M.l(B),J=ue(B),fe(H.$$.fragment,B),q=ue(B),Y.l(B),R=Re(),this.h()},h(){G(e,"for","application"),G(s,"id","application"),G(s,"name","application"),G(s,"class","as-input"),G(s,"type","text"),G(s,"placeholder","Application or URL"),G(c,"for","username"),G(y,"id","username"),G(y,"name","username"),G(y,"class","as-input"),G(y,"type","text"),G(y,"placeholder","Username"),G(b,"for","type"),A.__value="password",A.value=A.__value,C.__value="text",C.value=C.__value,G(I,"id","type"),G(I,"class","as-input"),t[2]===void 0&&Vn(()=>t[15].call(I))},m(B,ee){K(B,e,ee),X(e,r),K(B,n,ee),K(B,s,ee),Ie(s,t[0]),K(B,i,ee),he(o,B,ee),K(B,u,ee),K(B,c,ee),X(c,g),K(B,_,ee),K(B,y,ee),Ie(y,t[3]),K(B,k,ee),he(w,B,ee),K(B,v,ee),K(B,b,ee),X(b,T),K(B,E,ee),K(B,I,ee),X(I,A),X(A,U),X(I,C),X(C,a),Jt(I,t[2]),K(B,m,ee),he(p,B,ee),K(B,N,ee),~S&&D[S].m(B,ee),K(B,J,ee),he(H,B,ee),K(B,q,ee),Y.m(B,ee),K(B,R,ee),j=!0,f||(d=[ge(s,"input",t[13]),ge(s,"input",t[7]),ge(s,"change",t[8]),ge(y,"input",t[14]),ge(y,"input",t[7]),ge(I,"change",t[15])],f=!0)},p(B,[ee]){ee&1&&s.value!==B[0]&&Ie(s,B[0]);const me={};ee&2&&(me.messages=B[1].getErrors("application")),o.$set(me),ee&8&&y.value!==B[3]&&Ie(y,B[3]);const pe={};ee&2&&(pe.messages=B[1].getErrors("username")),w.$set(pe),ee&4&&Jt(I,B[2]);const oe={};ee&2&&(oe.messages=B[1].getErrors("type")),p.$set(oe);let l=S;S=x(B),S===l?~S&&D[S].p(B,ee):(M&&(Ge(),se(D[l],1,1,()=>{D[l]=null}),He()),~S?(M=D[S],M?M.p(B,ee):(M=D[S]=O[S](B),M.c()),ne(M,1),M.m(J.parentNode,J)):M=null);const h={};ee&2&&(h.messages=B[1].getErrors("secret")),H.$set(h),W===(W=z(B))&&Y?Y.p(B,ee):(Y.d(1),Y=W(B),Y&&(Y.c(),Y.m(R.parentNode,R)))},i(B){j||(ne(o.$$.fragment,B),ne(w.$$.fragment,B),ne(p.$$.fragment,B),ne(M),ne(H.$$.fragment,B),j=!0)},o(B){se(o.$$.fragment,B),se(w.$$.fragment,B),se(p.$$.fragment,B),se(M),se(H.$$.fragment,B),j=!1},d(B){B&&$(e),B&&$(n),B&&$(s),B&&$(i),de(o,B),B&&$(u),B&&$(c),B&&$(_),B&&$(y),B&&$(k),de(w,B),B&&$(v),B&&$(b),B&&$(E),B&&$(I),B&&$(m),de(p,B),B&&$(N),~S&&D[S].d(B),B&&$(J),de(H,B),B&&$(q),Y.d(B),B&&$(R),f=!1,Ke(d)}}}const xn=Io((t,e)=>{As(e),gr("application","Application is required",()=>{hr(t.application).isNotBlank()}),gr("username","Username is required",()=>{hr(t.username).isNotBlank()}),gr("secret","Secret is required",()=>{hr(t.secret).isNotBlank()})});function qa(t,e,r){let n,{application:s=""}=e,{onAdd:i=()=>{}}=e,o="password",u="",c="",g=xn.get();s&&_("application");function _(m){r(1,g=xn({type:o,application:s,username:u,secret:c},m))}function y(m){_(m.currentTarget.name)}function k(m){r(0,s=Rt(m.currentTarget.value)),_("application")}function w(m){r(4,c=m),_("secret")}let v;function b(){r(4,c=v.generate()),_("secret")}function T(){pi({type:o,application:s,username:u,secret:c}),i()}function E(){s=this.value,r(0,s)}function I(){u=this.value,r(3,u)}function A(){o=Gn(this),r(2,o)}function U(m){c=m,r(4,c)}function C(m){ze[m?"unshift":"push"](()=>{v=m,r(5,v)})}function a(m){c=m,r(4,c)}return t.$$set=m=>{"application"in m&&r(0,s=m.application),"onAdd"in m&&r(12,i=m.onAdd)},t.$$.update=()=>{t.$$.dirty&2&&r(6,n=!g.isValid())},[s,g,o,u,c,v,n,y,k,w,b,T,i,E,I,A,U,C,a]}class Va extends Se{constructor(e){super(),ke(this,e,qa,$a,De,{application:0,onAdd:12})}}function Ga(t){let e;return{c(){e=Xe("path"),this.h()},l(r){e=Qe(r,"path",{d:!0}),te(e).forEach($),this.h()},h(){G(e,"d","M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z")},m(r,n){K(r,e,n)},p:Ae,d(r){r&&$(e)}}}function Ha(t){let e,r;const n=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[Ga]},$$scope:{ctx:t}};for(let i=0;i<n.length;i+=1)s=Te(s,n[i]);return e=new ft({props:s}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,o){he(e,i,o),r=!0},p(i,[o]){const u=o&1?lt(n,[n[0],ct(i[0])]):{};o&2&&(u.$$scope={dirty:o,ctx:i}),e.$set(u)},i(i){r||(ne(e.$$.fragment,i),r=!0)},o(i){se(e.$$.fragment,i),r=!1},d(i){de(e,i)}}}function Wa(t,e,r){return t.$$set=n=>{r(0,e=Te(Te({},e),Ue(n)))},e=Ue(e),[e]}class Ja extends Se{constructor(e){super(),ke(this,e,Wa,Ha,Ze,{})}}function za(t){let e,r,n,s,i;return n=new Ja({}),{c(){e=Q("div"),r=Q("div"),ce(n.$$.fragment),this.h()},l(o){e=Z(o,"DIV",{class:!0});var u=te(e);r=Z(u,"DIV",{class:!0});var c=te(r);fe(n.$$.fragment,c),c.forEach($),u.forEach($),this.h()},h(){G(r,"class",s="as-transition-opacity "+(t[0]?"as-animate-wiggle":"")),Be(r,"as-opacity-0",!t[0]),Be(r,"as-opacity-100",t[0]),G(e,"class","as-relative as-w-8 as-h-8")},m(o,u){K(o,e,u),X(e,r),he(n,r,null),i=!0},p(o,[u]){(!i||u&1&&s!==(s="as-transition-opacity "+(o[0]?"as-animate-wiggle":"")))&&G(r,"class",s),u&1&&Be(r,"as-opacity-0",!o[0]),u&1&&Be(r,"as-opacity-100",o[0])},i(o){i||(ne(n.$$.fragment,o),i=!0)},o(o){se(n.$$.fragment,o),i=!1},d(o){o&&$(e),de(n)}}}function Ya(t,e,r){let n;Mt(t,ci,o=>r(2,n=o));let s=!1,i=Date.now();return t.$$.update=()=>{if(t.$$.dirty&6)if(n)r(0,s=!0),r(1,i=Date.now());else{const o=Date.now()-i;o<1e3?setTimeout(()=>{r(0,s=!1)},1e3-o):r(0,s=!1)}},[s,i,n]}class Ka extends Se{constructor(e){super(),ke(this,e,Ya,za,De,{})}}const Cn=()=>{};function Xa(t,e=0,r={}){let n=null,s=!1;const i=r.before||Cn,o=r.after||Cn;function u(){n!=null&&(clearTimeout(n),n=null)}function c(){s=!1,u()}function g(){u(),_()}function _(...k){s=!1,t.apply(this,k),o()}const y=function(...w){s||(s=!0,i()),u(),!!r.isImmediate&&n==null?_(this,w):n=setTimeout(()=>{n=null,_(this,w)},e)};return y.cancel=c,y.flush=g,y}function Qa(t){let e,r,n,s;function i(c){t[8](c)}function o(c){t[9](c)}let u={onInput:t[3],onUploadFile:t[3]};return t[0].secret!==void 0&&(u.text=t[0].secret),t[1]!==void 0&&(u.show=t[1]),e=new js({props:u}),ze.push(()=>rt(e,"text",i)),ze.push(()=>rt(e,"show",o)),{c(){ce(e.$$.fragment)},l(c){fe(e.$$.fragment,c)},m(c,g){he(e,c,g),s=!0},p(c,g){const _={};!r&&g&1&&(r=!0,_.text=c[0].secret,nt(()=>r=!1)),!n&&g&2&&(n=!0,_.show=c[1],nt(()=>n=!1)),e.$set(_)},i(c){s||(ne(e.$$.fragment,c),s=!0)},o(c){se(e.$$.fragment,c),s=!1},d(c){de(e,c)}}}function Za(t){let e,r,n,s;function i(c){t[6](c)}function o(c){t[7](c)}let u={onInput:t[3]};return t[0].secret!==void 0&&(u.password=t[0].secret),t[1]!==void 0&&(u.show=t[1]),e=new Ms({props:u}),ze.push(()=>rt(e,"password",i)),ze.push(()=>rt(e,"show",o)),{c(){ce(e.$$.fragment)},l(c){fe(e.$$.fragment,c)},m(c,g){he(e,c,g),s=!0},p(c,g){const _={};!r&&g&1&&(r=!0,_.password=c[0].secret,nt(()=>r=!1)),!n&&g&2&&(n=!0,_.show=c[1],nt(()=>n=!1)),e.$set(_)},i(c){s||(ne(e.$$.fragment,c),s=!0)},o(c){se(e.$$.fragment,c),s=!1},d(c){de(e,c)}}}function eu(t){let e,r,n,s,i,o,u,c,g,_,y,k,w,v;i=new Jn({});const b=[Za,Qa],T=[];function E(I,A){return I[0].type==="password"?0:I[0].type==="text"?1:-1}return~(_=E(t))&&(y=T[_]=b[_](t)),{c(){e=Q("div"),r=Q("div"),n=Q("button"),s=Q("div"),ce(i.$$.fragment),o=ae(),u=Q("div"),c=Q("input"),g=ae(),y&&y.c(),this.h()},l(I){e=Z(I,"DIV",{class:!0});var A=te(e);r=Z(A,"DIV",{class:!0});var U=te(r);n=Z(U,"BUTTON",{class:!0});var C=te(n);s=Z(C,"DIV",{class:!0});var a=te(s);fe(i.$$.fragment,a),a.forEach($),C.forEach($),U.forEach($),o=ue(A),u=Z(A,"DIV",{class:!0});var m=te(u);c=Z(m,"INPUT",{class:!0,type:!0,placeholder:!0}),g=ue(m),y&&y.l(m),m.forEach($),A.forEach($),this.h()},h(){G(s,"class","as-w-6 as-h-6"),G(n,"class","as-btn as-danger as-p-1"),G(r,"class","as-flex-grow-0 as-mr-2"),G(c,"class","as-input"),G(c,"type","text"),G(c,"placeholder","Username"),G(u,"class","as-flex-grow"),G(e,"class","as-flex as-flex-row as-w-full as-mb-2")},m(I,A){K(I,e,A),X(e,r),X(r,n),X(n,s),he(i,s,null),X(e,o),X(e,u),X(u,c),Ie(c,t[0].username),X(u,g),~_&&T[_].m(u,null),k=!0,w||(v=[ge(n,"click",t[2]),ge(c,"input",t[5]),ge(c,"input",t[3])],w=!0)},p(I,[A]){A&1&&c.value!==I[0].username&&Ie(c,I[0].username);let U=_;_=E(I),_===U?~_&&T[_].p(I,A):(y&&(Ge(),se(T[U],1,1,()=>{T[U]=null}),He()),~_?(y=T[_],y?y.p(I,A):(y=T[_]=b[_](I),y.c()),ne(y,1),y.m(u,null)):y=null)},i(I){k||(ne(i.$$.fragment,I),ne(y),k=!0)},o(I){se(i.$$.fragment,I),se(y),k=!1},d(I){I&&$(e),de(i),~_&&T[_].d(),w=!1,Ke(v)}}}function tu(t,e,r){let{secret:n}=e,{onDelete:s=()=>{}}=e,i=!1;function o(){s(n)}async function u(){n.application&&n.username&&n.secret&&await mi(n.id,n)}const c=Xa(u,1e3);function g(){n.username=this.value,r(0,n)}function _(v){t.$$.not_equal(n.secret,v)&&(n.secret=v,r(0,n))}function y(v){i=v,r(1,i)}function k(v){t.$$.not_equal(n.secret,v)&&(n.secret=v,r(0,n))}function w(v){i=v,r(1,i)}return t.$$set=v=>{"secret"in v&&r(0,n=v.secret),"onDelete"in v&&r(4,s=v.onDelete)},[n,i,o,c,s,g,_,y,k,w]}class Fs extends Se{constructor(e){super(),ke(this,e,tu,eu,De,{secret:0,onDelete:4})}}function Mn(t,e,r){const n=t.slice();n[5]=e[r][0],n[6]=e[r][1];const s=n[0]?n[6].filter(i=>Hn(i,n[0])):n[6];return n[7]=s,n}function Un(t,e,r){const n=t.slice();return n[10]=e[r],n}function Dn(t,e){let r,n,s;return n=new Fs({props:{secret:e[10],onDelete:e[1]}}),{key:t,first:null,c(){r=Re(),ce(n.$$.fragment),this.h()},l(i){r=Re(),fe(n.$$.fragment,i),this.h()},h(){this.first=r},m(i,o){K(i,r,o),he(n,i,o),s=!0},p(i,o){e=i;const u={};o&5&&(u.secret=e[10]),o&2&&(u.onDelete=e[1]),n.$set(u)},i(i){s||(ne(n.$$.fragment,i),s=!0)},o(i){se(n.$$.fragment,i),s=!1},d(i){i&&$(r),de(n,i)}}}function jn(t,e){let r,n=e[5]+"",s,i,o=[],u=new Map,c,g,_=e[7];const y=k=>k[10].id;for(let k=0;k<_.length;k+=1){let w=Un(e,_,k),v=y(w);u.set(v,o[k]=Dn(v,w))}return{key:t,first:null,c(){r=Q("h2"),s=we(n),i=ae();for(let k=0;k<o.length;k+=1)o[k].c();c=Re(),this.h()},l(k){r=Z(k,"H2",{class:!0});var w=te(r);s=Ee(w,n),w.forEach($),i=ue(k);for(let v=0;v<o.length;v+=1)o[v].l(k);c=Re(),this.h()},h(){G(r,"class","as-my-1 as-text-xl"),this.first=r},m(k,w){K(k,r,w),X(r,s),K(k,i,w);for(let v=0;v<o.length;v+=1)o[v].m(k,w);K(k,c,w),g=!0},p(k,w){e=k,(!g||w&4)&&n!==(n=e[5]+"")&&It(s,n),w&7&&(_=e[7],Ge(),o=tr(o,w,y,1,e,_,u,c.parentNode,Ir,Dn,c,Un),He())},i(k){if(!g){for(let w=0;w<_.length;w+=1)ne(o[w]);g=!0}},o(k){for(let w=0;w<o.length;w+=1)se(o[w]);g=!1},d(k){k&&$(r),k&&$(i);for(let w=0;w<o.length;w+=1)o[w].d(k);k&&$(c)}}}function ru(t){let e=[],r=new Map,n,s,i=t[2];const o=u=>u[5];for(let u=0;u<i.length;u+=1){let c=Mn(t,i,u),g=o(c);r.set(g,e[u]=jn(g,c))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=Re()},l(u){for(let c=0;c<e.length;c+=1)e[c].l(u);n=Re()},m(u,c){for(let g=0;g<e.length;g+=1)e[g].m(u,c);K(u,n,c),s=!0},p(u,[c]){c&7&&(i=u[2],Ge(),e=tr(e,c,o,1,u,i,r,n.parentNode,Ir,jn,n,Mn),He())},i(u){if(!s){for(let c=0;c<i.length;c+=1)ne(e[c]);s=!0}},o(u){for(let c=0;c<e.length;c+=1)se(e[c]);s=!1},d(u){for(let c=0;c<e.length;c+=1)e[c].d(u);u&&$(n)}}}function nu(t,e,r){let n,s,i;Mt(t,xr,c=>r(4,i=c));let{search:o=""}=e,{onDelete:u=()=>{}}=e;return t.$$set=c=>{"search"in c&&r(0,o=c.search),"onDelete"in c&&r(1,u=c.onDelete)},t.$$.update=()=>{t.$$.dirty&16&&r(3,n=Object.entries(i)),t.$$.dirty&9&&r(2,s=o?n.filter(([c,g])=>Ks(o,c)):n),t.$$.dirty&12&&s.length===0&&r(2,s=n)},[o,u,s,n,i]}class su extends Se{constructor(e){super(),ke(this,e,nu,ru,De,{search:0,onDelete:1})}}function Fn(t,e,r){const n=t.slice();return n[6]=e[r],n}function Ln(t,e){let r,n,s;return n=new Fs({props:{secret:e[6],onDelete:e[0]}}),{key:t,first:null,c(){r=Re(),ce(n.$$.fragment),this.h()},l(i){r=Re(),fe(n.$$.fragment,i),this.h()},h(){this.first=r},m(i,o){K(i,r,o),he(n,i,o),s=!0},p(i,o){e=i;const u={};o&2&&(u.secret=e[6]),o&1&&(u.onDelete=e[0]),n.$set(u)},i(i){s||(ne(n.$$.fragment,i),s=!0)},o(i){se(n.$$.fragment,i),s=!1},d(i){i&&$(r),de(n,i)}}}function iu(t){let e=[],r=new Map,n,s,i=t[1];const o=u=>u[6].id;for(let u=0;u<i.length;u+=1){let c=Fn(t,i,u),g=o(c);r.set(g,e[u]=Ln(g,c))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=Re()},l(u){for(let c=0;c<e.length;c+=1)e[c].l(u);n=Re()},m(u,c){for(let g=0;g<e.length;g+=1)e[g].m(u,c);K(u,n,c),s=!0},p(u,[c]){c&3&&(i=u[1],Ge(),e=tr(e,c,o,1,u,i,r,n.parentNode,Ir,Ln,n,Fn),He())},i(u){if(!s){for(let c=0;c<i.length;c+=1)ne(e[c]);s=!0}},o(u){for(let c=0;c<e.length;c+=1)se(e[c]);s=!1},d(u){for(let c=0;c<e.length;c+=1)e[c].d(u);u&&$(n)}}}function ou(t,e,r){let n,s,i;Mt(t,xr,g=>r(5,i=g));let{application:o}=e,{search:u=""}=e,{onDelete:c=()=>{}}=e;return t.$$set=g=>{"application"in g&&r(2,o=g.application),"search"in g&&r(3,u=g.search),"onDelete"in g&&r(0,c=g.onDelete)},t.$$.update=()=>{t.$$.dirty&36&&r(4,n=i[o]||[]),t.$$.dirty&24&&r(1,s=u?n.filter(g=>Hn(g,u)):n)},[c,s,o,u,n,i]}class au extends Se{constructor(e){super(),ke(this,e,ou,iu,De,{application:2,search:3,onDelete:0})}}function Bn(t,e,r){const n=t.slice();return n[0]=e[r],n}function uu(t){let e,r;return e=new Va({props:{onAdd:t[10],application:t[0]}}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},p(n,s){const i={};s&1&&(i.application=n[0]),e.$set(i)},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function lu(t){let e,r;return{c(){e=Q("h3"),r=we("Add Secret"),this.h()},l(n){e=Z(n,"H3",{class:!0,slot:!0});var s=te(e);r=Ee(s,"Add Secret"),s.forEach($),this.h()},h(){G(e,"class","as-text-lg"),G(e,"slot","title")},m(n,s){K(n,e,s),X(e,r)},p:Ae,d(n){n&&$(e)}}}function cu(t){var b,T;let e,r,n=((b=t[1])==null?void 0:b.application)+"",s,i,o=((T=t[1])==null?void 0:T.username)+"",u,c,g,_,y,k,w,v;return{c(){e=Q("p"),r=we("Delete "),s=we(n),i=ae(),u=we(o),c=we(" Secret?"),g=ae(),_=Q("div"),y=Q("button"),k=we("Delete"),this.h()},l(E){e=Z(E,"P",{class:!0});var I=te(e);r=Ee(I,"Delete "),s=Ee(I,n),i=ue(I),u=Ee(I,o),c=Ee(I," Secret?"),I.forEach($),g=ue(E),_=Z(E,"DIV",{class:!0});var A=te(_);y=Z(A,"BUTTON",{class:!0});var U=te(y);k=Ee(U,"Delete"),U.forEach($),A.forEach($),this.h()},h(){G(e,"class","as-mb-2"),G(y,"class","as-btn as-danger"),G(_,"class","as-flex justify-end")},m(E,I){K(E,e,I),X(e,r),X(e,s),X(e,i),X(e,u),X(e,c),K(E,g,I),K(E,_,I),X(_,y),X(y,k),w||(v=ge(y,"click",function(){Ct(t[7])&&t[7].apply(this,arguments)}),w=!0)},p(E,I){var A,U;t=E,I&2&&n!==(n=((A=t[1])==null?void 0:A.application)+"")&&It(s,n),I&2&&o!==(o=((U=t[1])==null?void 0:U.username)+"")&&It(u,o)},d(E){E&&$(e),E&&$(g),E&&$(_),w=!1,v()}}}function fu(t){let e,r;return{c(){e=Q("h3"),r=we("Deleting Secret"),this.h()},l(n){e=Z(n,"H3",{slot:!0,class:!0});var s=te(e);r=Ee(s,"Deleting Secret"),s.forEach($),this.h()},h(){G(e,"slot","title"),G(e,"class","as-text-lg")},m(n,s){K(n,e,s),X(e,r)},p:Ae,d(n){n&&$(e)}}}function $n(t,e){let r,n=e[0]+"",s,i;return{key:t,first:null,c(){r=Q("option"),s=we(n),this.h()},l(o){r=Z(o,"OPTION",{});var u=te(r);s=Ee(u,n),u.forEach($),this.h()},h(){r.__value=i=e[0],r.value=r.__value,this.first=r},m(o,u){K(o,r,u),X(r,s)},p(o,u){e=o,u&4&&n!==(n=e[0]+"")&&It(s,n),u&4&&i!==(i=e[0])&&(r.__value=i,r.value=r.__value)},d(o){o&&$(r)}}}function hu(t){let e,r;return e=new su({props:{search:t[3],onDelete:t[8]}}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},p(n,s){const i={};s&8&&(i.search=n[3]),s&256&&(i.onDelete=n[8]),e.$set(i)},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function du(t){let e,r;return e=new au({props:{application:t[6],search:t[3],onDelete:t[8]}}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},p(n,s){const i={};s&64&&(i.application=n[6]),s&8&&(i.search=n[3]),s&256&&(i.onDelete=n[8]),e.$set(i)},i(n){r||(ne(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function pu(t){let e,r,n,s,i,o,u,c,g,_,y=[],k=new Map,w,v,b,T,E,I,A,U,C,a,m,p,N,S,M;function J(x){t[12](x)}let H={$$slots:{title:[lu],default:[uu]},$$scope:{ctx:t}};t[4]!==void 0&&(H.open=t[4]),e=new on({props:H}),ze.push(()=>rt(e,"open",J));function q(x){t[13](x)}let R={$$slots:{title:[fu],default:[cu]},$$scope:{ctx:t}};t[5]!==void 0&&(R.open=t[5]),s=new on({props:R}),ze.push(()=>rt(s,"open",q));let j=t[2];const f=x=>x[0];for(let x=0;x<j.length;x+=1){let z=Bn(t,j,x),W=f(z);k.set(W,y[x]=$n(W,z))}b=new Ka({});const d=[du,hu],O=[];function D(x,z){return x[6]?0:1}return a=D(t),m=O[a]=d[a](t),{c(){ce(e.$$.fragment),n=ae(),ce(s.$$.fragment),o=ae(),u=Q("div"),c=Q("div"),g=Q("select"),_=Q("option");for(let x=0;x<y.length;x+=1)y[x].c();w=ae(),v=Q("div"),ce(b.$$.fragment),T=ae(),E=Q("button"),I=we("Add"),A=ae(),U=Q("input"),C=ae(),m.c(),p=Re(),this.h()},l(x){fe(e.$$.fragment,x),n=ue(x),fe(s.$$.fragment,x),o=ue(x),u=Z(x,"DIV",{class:!0});var z=te(u);c=Z(z,"DIV",{class:!0});var W=te(c);g=Z(W,"SELECT",{class:!0});var Y=te(g);_=Z(Y,"OPTION",{}),te(_).forEach($);for(let me=0;me<y.length;me+=1)y[me].l(Y);Y.forEach($),w=ue(W),v=Z(W,"DIV",{class:!0});var B=te(v);fe(b.$$.fragment,B),B.forEach($),W.forEach($),T=ue(z),E=Z(z,"BUTTON",{class:!0});var ee=te(E);I=Ee(ee,"Add"),ee.forEach($),z.forEach($),A=ue(x),U=Z(x,"INPUT",{class:!0,type:!0,placeholder:!0}),C=ue(x),m.l(x),p=Re(),this.h()},h(){_.__value="",_.value=_.__value,G(g,"class","as-input as-flex"),t[0]===void 0&&Vn(()=>t[14].call(g)),G(v,"class","as-flex as-p-1"),G(c,"class","as-flex as-flex-row as-flex-grow"),G(E,"class","as-btn as-primary"),G(u,"class","as-flex as-justify-between"),G(U,"class","as-input as-my-2"),G(U,"type","text"),G(U,"placeholder","Search...")},m(x,z){he(e,x,z),K(x,n,z),he(s,x,z),K(x,o,z),K(x,u,z),X(u,c),X(c,g),X(g,_);for(let W=0;W<y.length;W+=1)y[W].m(g,null);Jt(g,t[0]),X(c,w),X(c,v),he(b,v,null),X(u,T),X(u,E),X(E,I),K(x,A,z),K(x,U,z),Ie(U,t[3]),K(x,C,z),O[a].m(x,z),K(x,p,z),N=!0,S||(M=[ge(g,"change",t[14]),ge(E,"click",t[9]),ge(U,"input",t[15])],S=!0)},p(x,[z]){const W={};z&262145&&(W.$$scope={dirty:z,ctx:x}),!r&&z&16&&(r=!0,W.open=x[4],nt(()=>r=!1)),e.$set(W);const Y={};z&262274&&(Y.$$scope={dirty:z,ctx:x}),!i&&z&32&&(i=!0,Y.open=x[5],nt(()=>i=!1)),s.$set(Y),z&4&&(j=x[2],y=tr(y,z,f,1,x,j,k,g,zs,$n,null,Bn)),z&5&&Jt(g,x[0]),z&8&&U.value!==x[3]&&Ie(U,x[3]);let B=a;a=D(x),a===B?O[a].p(x,z):(Ge(),se(O[B],1,1,()=>{O[B]=null}),He(),m=O[a],m?m.p(x,z):(m=O[a]=d[a](x),m.c()),ne(m,1),m.m(p.parentNode,p))},i(x){N||(ne(e.$$.fragment,x),ne(s.$$.fragment,x),ne(b.$$.fragment,x),ne(m),N=!0)},o(x){se(e.$$.fragment,x),se(s.$$.fragment,x),se(b.$$.fragment,x),se(m),N=!1},d(x){de(e,x),x&&$(n),de(s,x),x&&$(o),x&&$(u);for(let z=0;z<y.length;z+=1)y[z].d();de(b),x&&$(A),x&&$(U),x&&$(C),O[a].d(x),x&&$(p),S=!1,Ke(M)}}}function mu(t,e,r){let n,s,i,o;Mt(t,xr,A=>r(11,o=A));let{application:u=""}=e,c="",g=!1;function _(){r(4,g=!g)}function y(){r(4,g=!1)}let k,w=!1,v;function b(A){g=A,r(4,g)}function T(A){w=A,r(5,w),r(1,k)}function E(){u=Gn(this),r(0,u),r(2,i),r(11,o)}function I(){c=this.value,r(3,c)}return t.$$set=A=>{"application"in A&&r(0,u=A.application)},t.$$.update=()=>{if(t.$$.dirty&2&&r(7,s=()=>{k&&(gi(k.id),r(1,k=void 0),r(5,w=!1))}),t.$$.dirty&2048&&r(2,i=Object.keys(o)),t.$$.dirty&5){const A=i.find(U=>Rt(u)===Rt(U));A&&r(6,v=A)}},r(8,n=A=>{r(1,k=A),r(5,w=!0)}),[u,k,i,c,g,w,v,s,n,_,y,o,b,T,E,I]}class gu extends Se{constructor(e){super(),ke(this,e,mu,pu,De,{application:0})}}function yu(t){let e;return{c(){e=Q("div"),this.h()},l(r){e=Z(r,"DIV",{id:!0}),te(e).forEach($),this.h()},h(){G(e,"id",Ls)},m(r,n){K(r,e,n)},p:Ae,i:Ae,o:Ae,d(r){r&&$(e)}}}const Ls="remote-storage-widget";let yr;function vu(t,e,r){let{element:n=void 0}=e,{widget:s=void 0}=e;return Ys(()=>{Qs(()=>import("../chunks/widget-bc58238e.js").then(function(i){return i.w}),[]).then(({default:i})=>{var u;yr&&((u=yr.rsWidget)==null||u.remove());const o=new i(st);o.attach(Ls),yr=o,function c(){o.rsWidget?(r(1,s=o),r(0,n=o.rsWidget)):setTimeout(c,300)}()})}),t.$$set=i=>{"element"in i&&r(0,n=i.element),"widget"in i&&r(1,s=i.widget)},[n,s]}class _u extends Se{constructor(e){super(),ke(this,e,vu,yu,De,{element:0,widget:1})}}const Qr=Rr("disconnected"),bu=_t(Qr,t=>t);st.on("connected",()=>{Qr.set("connected")});st.on("disconnected",()=>{Qr.set("disconnected")});function wu(t){let e,r;return{c(){e=Q("h3"),r=we("Please connect to a Storage Provider"),this.h()},l(n){e=Z(n,"H3",{class:!0});var s=te(e);r=Ee(s,"Please connect to a Storage Provider"),s.forEach($),this.h()},h(){G(e,"class","as-text-center as-py-8 as-text-lg")},m(n,s){K(n,e,s),X(e,r)},i:Ae,o:Ae,d(n){n&&$(e)}}}function Eu(t){let e,r,n;return r=new gu({}),{c(){e=Q("div"),ce(r.$$.fragment),this.h()},l(s){e=Z(s,"DIV",{class:!0});var i=te(e);fe(r.$$.fragment,i),i.forEach($),this.h()},h(){G(e,"class","as-container as-mx-auto as-p-4 as-mt-4 as-mb-8 as-bg-white")},m(s,i){K(s,e,i),he(r,e,null),n=!0},i(s){n||(ne(r.$$.fragment,s),n=!0)},o(s){se(r.$$.fragment,s),n=!1},d(s){s&&$(e),de(r)}}}function Pu(t){let e,r,n,s;const i=[Eu,wu],o=[];function u(c,g){return c[0]==="connected"?0:1}return e=u(t),r=o[e]=i[e](t),{c(){r.c(),n=Re()},l(c){r.l(c),n=Re()},m(c,g){o[e].m(c,g),K(c,n,g),s=!0},p(c,g){let _=e;e=u(c),e!==_&&(Ge(),se(o[_],1,1,()=>{o[_]=null}),He(),r=o[e],r||(r=o[e]=i[e](c),r.c()),ne(r,1),r.m(n.parentNode,n))},i(c){s||(ne(r),s=!0)},o(c){se(r),s=!1},d(c){o[e].d(c),c&&$(n)}}}function Tu(t){let e,r,n,s,i;return e=new Xs({props:{$$slots:{default:[Pu]},$$scope:{ctx:t}}}),s=new _u({}),{c(){ce(e.$$.fragment),r=ae(),n=Q("div"),ce(s.$$.fragment),this.h()},l(o){fe(e.$$.fragment,o),r=ue(o),n=Z(o,"DIV",{class:!0});var u=te(n);fe(s.$$.fragment,u),u.forEach($),this.h()},h(){G(n,"class","as-absolute as-left-0 as-bottom-0")},m(o,u){he(e,o,u),K(o,r,u),K(o,n,u),he(s,n,null),i=!0},p(o,[u]){const c={};u&3&&(c.$$scope={dirty:u,ctx:o}),e.$set(c)},i(o){i||(ne(e.$$.fragment,o),ne(s.$$.fragment,o),i=!0)},o(o){se(e.$$.fragment,o),se(s.$$.fragment,o),i=!1},d(o){de(e,o),o&&$(r),o&&$(n),de(s)}}}function Su(t,e,r){let n;return Mt(t,bu,s=>r(0,n=s)),[n]}class Ou extends Se{constructor(e){super(),ke(this,e,Su,Tu,Ze,{})}}export{Ou as default};
